INFO  - ultTestContextBootstrapper - Using TestExecutionListeners: [org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener@56aac163, org.springframework.test.context.support.DependencyInjectionTestExecutionListener@1f7030a6, org.springframework.test.context.support.DirtiesContextTestExecutionListener@5a1c0542, org.springframework.test.context.transaction.TransactionalTestExecutionListener@396f6598, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener@394e1a0f]
INFO  - XmlBeanDefinitionReader    - Loading XML bean definitions from class path resource [hibernate-test.xml]
INFO  - XmlBeanDefinitionReader    - Loading XML bean definitions from class path resource [org/sakaiproject/poll/spring-hibernate.xml]
INFO  - GenericApplicationContext  - Refreshing org.springframework.context.support.GenericApplicationContext@3e57cd70: startup date [Thu Jun 07 17:09:31 CEST 2018]; root of context hierarchy
INFO  - DriverManagerDataSource    - Loaded JDBC driver: org.hsqldb.jdbcDriver
INFO  - Version                    - HCANN000001: Hibernate Commons Annotations {4.0.5.Final}
INFO  - Version                    - HHH000412: Hibernate Core {4.3.11.Final}
INFO  - Environment                - HHH000205: Loaded properties from resource hibernate.properties: {hibernate.connection.driver_class=org.hsqldb.jdbcDriver, hibernate.dialect=org.hibernate.dialect.HSQLDialect, hibernate.use_cache=false, hibernate.connection.username=sa, hibernate.hbm2ddl.auto=create, hibernate.connection.url=jdbc:hsqldb:mem:test, hibernate.connection.password=****, hibernate.bytecode.use_reflection_optimizer=false, hibernate.show_sql=false}
INFO  - Environment                - HHH000021: Bytecode provider name : javassist
INFO  - Dialect                    - HHH000400: Using dialect: org.hibernate.dialect.HSQLDialect
INFO  - ransactionFactoryInitiator - HHH000399: Using default transaction strategy (direct JDBC transactions)
INFO  - ASTQueryTranslatorFactory  - HHH000397: Using ASTQueryTranslatorFactory
INFO  - SchemaExport               - HHH000227: Running hbm2ddl schema export
INFO  - SchemaExport               - HHH000230: Schema export complete
INFO  - ibernateTransactionManager - Using DataSource [org.springframework.jdbc.datasource.DriverManagerDataSource@7c729a55] of Hibernate SessionFactory for HibernateTransactionManager
INFO  - TransactionContext         - Began transaction (1) for test context [DefaultTestContext@76b74e9c testClass = PollListManagerTest, testInstance = org.sakaiproject.poll.logic.test.PollListManagerTest@2d72f75e, testMethod = testSavePoll@PollListManagerTest, testException = [null], mergedContextConfiguration = [MergedContextConfiguration@5dcbb60 testClass = PollListManagerTest, locations = '{classpath:/hibernate-test.xml, classpath:org/sakaiproject/poll/spring-hibernate.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], contextLoader = 'org.springframework.test.context.support.DelegatingSmartContextLoader', parent = [null]]]; transaction manager [org.springframework.orm.hibernate4.HibernateTransactionManager@6273c5a4]; rollback [true]
ERROR - PollListManagerTest        - you must supply a question, siteId & open and close dates
java.lang.IllegalArgumentException: you must supply a question, siteId & open and close dates
	at org.sakaiproject.poll.service.impl.PollListManagerImpl.savePoll(PollListManagerImpl.java:164)
	at org.sakaiproject.poll.logic.test.PollListManagerTest.testSavePoll(PollListManagerTest.java:138)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:50)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:47)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.springframework.test.context.junit4.statements.RunBeforeTestMethodCallbacks.evaluate(RunBeforeTestMethodCallbacks.java:75)
	at org.springframework.test.context.junit4.statements.RunAfterTestMethodCallbacks.evaluate(RunAfterTestMethodCallbacks.java:86)
	at org.springframework.test.context.junit4.statements.SpringRepeat.evaluate(SpringRepeat.java:84)
	at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:325)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:252)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:94)
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:290)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288)
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:58)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268)
	at org.springframework.test.context.junit4.statements.RunBeforeTestClassCallbacks.evaluate(RunBeforeTestClassCallbacks.java:61)
	at org.springframework.test.context.junit4.statements.RunAfterTestClassCallbacks.evaluate(RunAfterTestClassCallbacks.java:70)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:363)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.run(SpringJUnit4ClassRunner.java:191)
	at org.apache.maven.surefire.junit4.JUnit4Provider.execute(JUnit4Provider.java:367)
	at org.apache.maven.surefire.junit4.JUnit4Provider.executeWithRerun(JUnit4Provider.java:274)
	at org.apache.maven.surefire.junit4.JUnit4Provider.executeTestSet(JUnit4Provider.java:238)
	at org.apache.maven.surefire.junit4.JUnit4Provider.invoke(JUnit4Provider.java:161)
	at org.apache.maven.surefire.booter.ForkedBooter.invokeProviderInSameClassLoader(ForkedBooter.java:290)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:242)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:121)
ERROR - PollListManagerTest        - you must supply a question, siteId & open and close dates
java.lang.IllegalArgumentException: you must supply a question, siteId & open and close dates
	at org.sakaiproject.poll.service.impl.PollListManagerImpl.savePoll(PollListManagerImpl.java:164)
	at org.sakaiproject.poll.logic.test.PollListManagerTest.testSavePoll(PollListManagerTest.java:150)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:50)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:47)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.springframework.test.context.junit4.statements.RunBeforeTestMethodCallbacks.evaluate(RunBeforeTestMethodCallbacks.java:75)
	at org.springframework.test.context.junit4.statements.RunAfterTestMethodCallbacks.evaluate(RunAfterTestMethodCallbacks.java:86)
	at org.springframework.test.context.junit4.statements.SpringRepeat.evaluate(SpringRepeat.java:84)
	at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:325)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:252)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:94)
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:290)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288)
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:58)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268)
	at org.springframework.test.context.junit4.statements.RunBeforeTestClassCallbacks.evaluate(RunBeforeTestClassCallbacks.java:61)
	at org.springframework.test.context.junit4.statements.RunAfterTestClassCallbacks.evaluate(RunAfterTestClassCallbacks.java:70)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:363)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.run(SpringJUnit4ClassRunner.java:191)
	at org.apache.maven.surefire.junit4.JUnit4Provider.execute(JUnit4Provider.java:367)
	at org.apache.maven.surefire.junit4.JUnit4Provider.executeWithRerun(JUnit4Provider.java:274)
	at org.apache.maven.surefire.junit4.JUnit4Provider.executeTestSet(JUnit4Provider.java:238)
	at org.apache.maven.surefire.junit4.JUnit4Provider.invoke(JUnit4Provider.java:161)
	at org.apache.maven.surefire.booter.ForkedBooter.invokeProviderInSameClassLoader(ForkedBooter.java:290)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:242)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:121)
ERROR - PollListManagerTest        - 
java.lang.SecurityException
	at org.sakaiproject.poll.service.impl.PollListManagerImpl.savePoll(PollListManagerImpl.java:169)
	at org.sakaiproject.poll.logic.test.PollListManagerTest.testSavePoll(PollListManagerTest.java:159)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:50)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:47)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.springframework.test.context.junit4.statements.RunBeforeTestMethodCallbacks.evaluate(RunBeforeTestMethodCallbacks.java:75)
	at org.springframework.test.context.junit4.statements.RunAfterTestMethodCallbacks.evaluate(RunAfterTestMethodCallbacks.java:86)
	at org.springframework.test.context.junit4.statements.SpringRepeat.evaluate(SpringRepeat.java:84)
	at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:325)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:252)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:94)
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:290)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288)
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:58)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268)
	at org.springframework.test.context.junit4.statements.RunBeforeTestClassCallbacks.evaluate(RunBeforeTestClassCallbacks.java:61)
	at org.springframework.test.context.junit4.statements.RunAfterTestClassCallbacks.evaluate(RunAfterTestClassCallbacks.java:70)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:363)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.run(SpringJUnit4ClassRunner.java:191)
	at org.apache.maven.surefire.junit4.JUnit4Provider.execute(JUnit4Provider.java:367)
	at org.apache.maven.surefire.junit4.JUnit4Provider.executeWithRerun(JUnit4Provider.java:274)
	at org.apache.maven.surefire.junit4.JUnit4Provider.executeTestSet(JUnit4Provider.java:238)
	at org.apache.maven.surefire.junit4.JUnit4Provider.invoke(JUnit4Provider.java:161)
	at org.apache.maven.surefire.booter.ForkedBooter.invokeProviderInSameClassLoader(ForkedBooter.java:290)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:242)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:121)
INFO  - TransactionContext         - Rolled back transaction for test context [DefaultTestContext@76b74e9c testClass = PollListManagerTest, testInstance = org.sakaiproject.poll.logic.test.PollListManagerTest@2d72f75e, testMethod = testSavePoll@PollListManagerTest, testException = [null], mergedContextConfiguration = [MergedContextConfiguration@5dcbb60 testClass = PollListManagerTest, locations = '{classpath:/hibernate-test.xml, classpath:org/sakaiproject/poll/spring-hibernate.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], contextLoader = 'org.springframework.test.context.support.DelegatingSmartContextLoader', parent = [null]]].
INFO  - TransactionContext         - Began transaction (1) for test context [DefaultTestContext@76b74e9c testClass = PollListManagerTest, testInstance = org.sakaiproject.poll.logic.test.PollListManagerTest@2237bada, testMethod = testDeletePoll@PollListManagerTest, testException = [null], mergedContextConfiguration = [MergedContextConfiguration@5dcbb60 testClass = PollListManagerTest, locations = '{classpath:/hibernate-test.xml, classpath:org/sakaiproject/poll/spring-hibernate.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], contextLoader = 'org.springframework.test.context.support.DelegatingSmartContextLoader', parent = [null]]]; transaction manager [org.springframework.orm.hibernate4.HibernateTransactionManager@6273c5a4]; rollback [true]
INFO  - PollListManagerImpl        - Option  org.sakaiproject.poll.model.Option@2c1dc8esuccessfuly saved
INFO  - PollListManagerImpl        - Option  org.sakaiproject.poll.model.Option@4e7095acsuccessfuly saved
INFO  - PollListManagerImpl        - Poll id null deleted
INFO  - TransactionContext         - Rolled back transaction for test context [DefaultTestContext@76b74e9c testClass = PollListManagerTest, testInstance = org.sakaiproject.poll.logic.test.PollListManagerTest@2237bada, testMethod = testDeletePoll@PollListManagerTest, testException = [null], mergedContextConfiguration = [MergedContextConfiguration@5dcbb60 testClass = PollListManagerTest, locations = '{classpath:/hibernate-test.xml, classpath:org/sakaiproject/poll/spring-hibernate.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], contextLoader = 'org.springframework.test.context.support.DelegatingSmartContextLoader', parent = [null]]].
INFO  - TransactionContext         - Began transaction (1) for test context [DefaultTestContext@76b74e9c testClass = PollListManagerTest, testInstance = org.sakaiproject.poll.logic.test.PollListManagerTest@64711bf2, testMethod = testGetPollById@PollListManagerTest, testException = [null], mergedContextConfiguration = [MergedContextConfiguration@5dcbb60 testClass = PollListManagerTest, locations = '{classpath:/hibernate-test.xml, classpath:org/sakaiproject/poll/spring-hibernate.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], contextLoader = 'org.springframework.test.context.support.DelegatingSmartContextLoader', parent = [null]]]; transaction manager [org.springframework.orm.hibernate4.HibernateTransactionManager@6273c5a4]; rollback [true]
ERROR - PollListManagerTest        - java.lang.SecurityException: user:user-nobody can't read poll 5
java.lang.SecurityException: java.lang.SecurityException: user:user-nobody can't read poll 5
	at org.sakaiproject.poll.service.impl.PollListManagerImpl.getOptionsForPoll(PollListManagerImpl.java:303)
	at org.sakaiproject.poll.service.impl.PollListManagerImpl.getOptionsForPoll(PollListManagerImpl.java:295)
	at org.sakaiproject.poll.service.impl.PollListManagerImpl.getPollById(PollListManagerImpl.java:276)
	at org.sakaiproject.poll.service.impl.PollListManagerImpl.getPollById(PollListManagerImpl.java:265)
	at org.sakaiproject.poll.logic.test.PollListManagerTest.testGetPollById(PollListManagerTest.java:97)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:50)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:47)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.springframework.test.context.junit4.statements.RunBeforeTestMethodCallbacks.evaluate(RunBeforeTestMethodCallbacks.java:75)
	at org.springframework.test.context.junit4.statements.RunAfterTestMethodCallbacks.evaluate(RunAfterTestMethodCallbacks.java:86)
	at org.springframework.test.context.junit4.statements.SpringRepeat.evaluate(SpringRepeat.java:84)
	at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:325)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:252)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:94)
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:290)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288)
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:58)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268)
	at org.springframework.test.context.junit4.statements.RunBeforeTestClassCallbacks.evaluate(RunBeforeTestClassCallbacks.java:61)
	at org.springframework.test.context.junit4.statements.RunAfterTestClassCallbacks.evaluate(RunAfterTestClassCallbacks.java:70)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:363)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.run(SpringJUnit4ClassRunner.java:191)
	at org.apache.maven.surefire.junit4.JUnit4Provider.execute(JUnit4Provider.java:367)
	at org.apache.maven.surefire.junit4.JUnit4Provider.executeWithRerun(JUnit4Provider.java:274)
	at org.apache.maven.surefire.junit4.JUnit4Provider.executeTestSet(JUnit4Provider.java:238)
	at org.apache.maven.surefire.junit4.JUnit4Provider.invoke(JUnit4Provider.java:161)
	at org.apache.maven.surefire.booter.ForkedBooter.invokeProviderInSameClassLoader(ForkedBooter.java:290)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:242)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:121)
Caused by: java.lang.SecurityException: user:user-nobody can't read poll 5
	at org.sakaiproject.poll.service.impl.PollListManagerImpl.getPollById(PollListManagerImpl.java:285)
	at org.sakaiproject.poll.service.impl.PollListManagerImpl.getOptionsForPoll(PollListManagerImpl.java:301)
	... 35 more
INFO  - TransactionContext         - Rolled back transaction for test context [DefaultTestContext@76b74e9c testClass = PollListManagerTest, testInstance = org.sakaiproject.poll.logic.test.PollListManagerTest@64711bf2, testMethod = testGetPollById@PollListManagerTest, testException = [null], mergedContextConfiguration = [MergedContextConfiguration@5dcbb60 testClass = PollListManagerTest, locations = '{classpath:/hibernate-test.xml, classpath:org/sakaiproject/poll/spring-hibernate.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], contextLoader = 'org.springframework.test.context.support.DelegatingSmartContextLoader', parent = [null]]].
