== Definitions
=== Action
:hardbreaks:
State change attempt. A new instance for every retry attempt.

[options="header"]
|===
|Name|Description|Required|Schema|Default
|id|Identifier of the workflow instance action|false|integer (int32)|
|type|Type of state (stateExecution, stateExecutionFailed, externalChange, recovery)|false|string|
|state|Name of state|false|string|
|stateText|Description of state|false|string|
|retryNo|Number of retries in this state|false|integer (int32)|
|executionStartTime|Start time for execution|false|string (date-time)|
|executionEndTime|End time for execution|false|string (date-time)|
|executorId|Identifier of the executor that executed this action|false|integer (int32)|
|updatedStateVariables|Updated state variables|false|object|
|===

=== All
:hardbreaks:
All instances

[options="header"]
|===
|Name|Description|Required|Schema|Default
|allInstances|Statistics per state|true|integer (int64)|
|===

=== AllAndQueued
:hardbreaks:
All and queued instances

[options="header"]
|===
|Name|Description|Required|Schema|Default
|allInstances|Statistics per state|true|integer (int64)|
|queuedInstances|Statistics per state|true|integer (int64)|
|===

=== ArchiveRequest
:hardbreaks:
Request to start archiving process

[options="header"]
|===
|Name|Description|Required|Schema|Default
|olderThan|Passive workflow instances whose modified time is before this will be archived.|true|string (date-time)|
|batchSize|Number of workflow hierarchies to archive in a single transaction.|false|integer (int32)|
|===

=== ArchiveResponse
:hardbreaks:
Archiving result response

[options="header"]
|===
|Name|Description|Required|Schema|Default
|archivedWorkflows|Total number of archived workflows|false|integer (int32)|
|===

=== CreateWorkflowInstanceRequest
:hardbreaks:
Request for submitting a new workflow instance. Note that if externalId is given, type and externalId pair must be unique hence enabling retry-safety.

[options="header"]
|===
|Name|Description|Required|Schema|Default
|type|Workflow definition type|true|string|
|businessKey|Main business key or identifier for the new workflow instance|false|string|
|startState|Start state name (if other than default set in workflow definition)|false|string|
|externalId|Unique external identifier within the workflow type. Generated by nflow if not given.|false|string|
|requestData|JSON document that contains business information. Stored as state variable 'requestData'.|false|<<JsonNode>>|
|activationTime|Start time for workflow execution. If null, defaults to now.|false|string (date-time)|
|stateVariables|State variables to be set for the new workflow instance.|false|object|
|===

=== CreateWorkflowInstanceResponse
:hardbreaks:
Response for submit new workflow instance

[options="header"]
|===
|Name|Description|Required|Schema|Default
|id|Idenfier of the new workflow instance|true|integer (int32)|
|type|Workflow definition type|true|string|
|businessKey|Main business key or identifier for the workflow instance (e.g. credit application identifier)|false|string|
|externalId|Unique external identifier under workflow type. Generated by nflow if not given.|false|string|
|===

=== JsonNode
[options="header"]
|===
|Name|Description|Required|Schema|Default
|float||false|boolean|false
|number||false|boolean|false
|bigInteger||false|boolean|false
|bigDecimal||false|boolean|false
|containerNode||false|boolean|false
|missingNode||false|boolean|false
|object||false|boolean|false
|nodeType||false|enum (ARRAY, BINARY, BOOLEAN, MISSING, NULL, NUMBER, OBJECT, POJO, STRING)|
|pojo||false|boolean|false
|integralNumber||false|boolean|false
|floatingPointNumber||false|boolean|false
|short||false|boolean|false
|int||false|boolean|false
|long||false|boolean|false
|double||false|boolean|false
|textual||false|boolean|false
|boolean||false|boolean|false
|binary||false|boolean|false
|valueNode||false|boolean|false
|array||false|boolean|false
|null||false|boolean|false
|===

=== ListWorkflowDefinitionResponse
:hardbreaks:
Basic information of workflow definition

[options="header"]
|===
|Name|Description|Required|Schema|Default
|type|Type of the workflow definition|true|string|
|name|Name of the workflow definition|true|string|
|description|Description of the workflow definition|false|string|
|onError|Default error state|true|string|
|states|Workflow definition states and transitions|true|<<State>> array|
|settings|Workflow settings|true|<<Settings>>|
|supportedSignals|Supported signals|false|<<Signal>> array|
|===

=== ListWorkflowExecutorResponse
:hardbreaks:
Basic information of workflow executor

[options="header"]
|===
|Name|Description|Required|Schema|Default
|id|Identifier of the workflow executor|true|integer (int32)|
|host|Host where the executor is running|true|string|
|pid|Executor process identifier assigned by the operating system|true|integer (int32)|
|executorGroup|Executor group the executor belongs to|true|string|
|started|Time when the executor was started|true|string (date-time)|
|active|Last time the executor updated it's heart beat to the database|true|string (date-time)|
|expires|Time after which the executor is considered as crashed|true|string (date-time)|
|===

=== ListWorkflowInstanceResponse
:hardbreaks:
Basic information of workflow instance

[options="header"]
|===
|Name|Description|Required|Schema|Default
|id|Identifier of the workflow instance|true|integer (int32)|
|status|Workflow instance status (created, executing, inProgress, finished, manual)|true|string|
|type|Workflow definition type|true|string|
|parentWorkflowId|Parent workflow instance id for child workflows|false|integer (int32)|
|parentActionId|Parent workflow instance action id for child workflows (action that created the child workflow)|false|integer (int32)|
|businessKey|Main business key or identifier for the workflow instance|false|string|
|externalId|Unique external identifier within a workflow type. Generated by nflow if not given.|true|string|
|state|State of the workflow instance|true|string|
|stateText|Text of describing the reason for state (free text)|false|string|
|nextActivation|Time when the workflow instance is processed again|false|string (date-time)|
|stateVariables|State variables for current state|false|object|
|retries|Number of times the current state has been retried|true|integer (int32)|
|actions|Action history of the workflow instance|false|<<Action>> array|
|created|Workflow instance creation timestamp|true|string (date-time)|
|modified|Workflow instance latest modification timestamp|true|string (date-time)|
|started|Time when workflow processing started (=start time of the first action)|false|string (date-time)|
|childWorkflows|Child workflow instance IDs created by this instance, grouped by instance action ID|false|object|
|signal|Current signal value|false|integer (int32)|
|===

=== QueueStatistics
:hardbreaks:
Global statistics for workflow instances.

[options="header"]
|===
|Name|Description|Required|Schema|Default
|count|Number for workflow instances.|true|integer (int32)|
|maxAge|Maximum time (ms) currently queued workflow instances have been in queue.|false|integer (int64)|
|minAge|Minimum time (ms) currently queued workflow instances have been in queue.|false|integer (int64)|
|===

=== SetSignalRequest
:hardbreaks:
Request to set workflow instance signal value

[options="header"]
|===
|Name|Description|Required|Schema|Default
|signal|New signal value|false|integer (int32)|
|reason|Reason for setting the signal|false|string|
|===

=== Settings
[options="header"]
|===
|Name|Description|Required|Schema|Default
|transitionDelaysInMilliseconds|Global transition delays for the workflow|true|<<TransitionDelays>>|
|maxRetries|Maximum retries for a state before moving to failure|true|integer (int32)|
|===

=== Signal
[options="header"]
|===
|Name|Description|Required|Schema|Default
|value|Signal value|true|integer (int32)|
|description|Signal description|true|string|
|===

=== State
:hardbreaks:
Workflow definition states and transition to next states

[options="header"]
|===
|Name|Description|Required|Schema|Default
|id|State identifier|true|string|
|type|State type (start, normal, manual, end)|true|string|
|description|State description|true|string|
|transitions|Permitted transitions from this state|false|string array|
|onFailure|Failure state for the this state|false|string|
|===

=== StateStatistics
:hardbreaks:
Statistics for a state

[options="header"]
|===
|Name|Description|Required|Schema|Default
|created|Instances created|true|<<AllAndQueued>>|
|inProgress|Instances in progress|true|<<AllAndQueued>>|
|executing|Instances executing|true|<<All>>|
|manual|Instances in manual state|true|<<All>>|
|finished|Instances finished|true|<<All>>|
|===

=== StatisticsResponse
:hardbreaks:
Response for statistics

[options="header"]
|===
|Name|Description|Required|Schema|Default
|queueStatistics|Statistics for queued workflows. Workflow instances waiting for free executors.|true|<<QueueStatistics>>|
|executionStatistics|Statistics for workflows in execution. Workflow instances currently processed by an executor.|true|<<QueueStatistics>>|
|===

=== TransitionDelays
[options="header"]
|===
|Name|Description|Required|Schema|Default
|immediate|Delay in immediate transition|true|integer (int64)|
|waitShort|Short delay between transitions|true|integer (int64)|
|minErrorWait|First retry delay after failure|true|integer (int64)|
|maxErrorWait|Maximum delay between failure retries|true|integer (int64)|
|===

=== UpdateWorkflowInstanceRequest
:hardbreaks:
Request for update workflow instance

[options="header"]
|===
|Name|Description|Required|Schema|Default
|state|New state of the workflow instance|false|string|
|nextActivationTime|New next activation time for next workflow instance processing|false|string (date-time)|
|actionDescription|Description of the action|false|string|
|stateVariables|State variables to be added or updated.|false|object|
|===

=== WorkflowDefinitionStatisticsResponse
:hardbreaks:
Response for workflow definition statistics

[options="header"]
|===
|Name|Description|Required|Schema|Default
|stateStatistics|Statistics per state|true|object|
|===

