== Paths
=== Archive workflow instances synchronously
----
POST /nflow/v1/archive
----

==== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|BodyParameter|body|Parameters for the archiving process|true|<<ArchiveRequest>>|
|===

==== Responses
[options="header"]
|===
|HTTP Code|Description|Schema
|200|successful operation|<<ArchiveResponse>>
|===

==== Consumes

* application/json

==== Produces

* application/json

==== Tags

* nFlow archiving

=== Get executor group statistics
----
GET /nflow/v1/statistics
----

==== Description
:hardbreaks:
Returns counts of queued and executing workflow instances.

==== Responses
[options="header"]
|===
|HTTP Code|Description|Schema
|200|successful operation|<<StatisticsResponse>>
|===

==== Consumes

* application/json

==== Produces

* application/json

==== Tags

* nFlow statistics

=== Get workflow definition statistics
----
GET /nflow/v1/statistics/workflow/{type}
----

==== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|PathParameter|type|Workflow definition type|true|string|
|QueryParameter|createdAfter|Include only workflow instances created after given time|false|string (date-time)|
|QueryParameter|createdBefore|Include only workflow instances created before given time|false|string (date-time)|
|QueryParameter|modifiedAfter|Include only workflow instances modified after given time|false|string (date-time)|
|QueryParameter|modifiedBefore|Include only workflow instances modified before given time|false|string (date-time)|
|===

==== Responses
[options="header"]
|===
|HTTP Code|Description|Schema
|200|successful operation|<<WorkflowDefinitionStatisticsResponse>>
|===

==== Consumes

* application/json

==== Produces

* application/json

==== Tags

* nFlow statistics

=== List workflow definitions
----
GET /nflow/v1/workflow-definition
----

==== Description
:hardbreaks:
Returns workflow definition(s): all possible states, transitions between states and other setting metadata.The workflow definition can deployed in nFlow engine or historical workflow definition stored in the database.

==== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|QueryParameter|type|Included workflow types|false|multi string array|
|===

==== Responses
[options="header"]
|===
|HTTP Code|Description|Schema
|200|successful operation|<<ListWorkflowDefinitionResponse>> array
|===

==== Consumes

* application/json

==== Produces

* application/json

==== Tags

* nFlow workflow definition management

=== List workflow executors
----
GET /nflow/v1/workflow-executor
----

==== Responses
[options="header"]
|===
|HTTP Code|Description|Schema
|200|successful operation|<<ListWorkflowExecutorResponse>> array
|===

==== Consumes

* application/json

==== Produces

* application/json

==== Tags

* nFlow workflow executor management

=== List workflow instances
----
GET /nflow/v1/workflow-instance
----

==== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|QueryParameter|id|Internal id of workflow instance|false|multi integer (int32) array|
|QueryParameter|type|Workflow definition type of workflow instance|false|multi string array|
|QueryParameter|parentWorkflowId|Id of parent workflow instance|false|integer (int32)|
|QueryParameter|parentActionId|Id of parent workflow instance action|false|integer (int32)|
|QueryParameter|state|Current state of workflow instance|false|multi string array|
|QueryParameter|status|Current status of workflow instance|false|multi enum (created, inProgress, finished, manual, executing) array|
|QueryParameter|businessKey|Business key for workflow instance|false|string|
|QueryParameter|externalId|External id for workflow instance|false|string|
|QueryParameter|include|Data to include in response. currentStateVariables = current stateVariables for worfklow, actions = state transitions, actionStateVariables = state variable changes for actions, childWorkflows = map of created child workflow instance IDs by action ID|false|multi enum (currentStateVariables, actions, actionStateVariables, childWorkflows) array|
|QueryParameter|maxResults|Maximum number of workflow instances to be returned|false|integer (int64)|
|QueryParameter|maxActions|Maximum number of actions returned for each workflow instance|false|integer (int64)|
|===

==== Responses
[options="header"]
|===
|HTTP Code|Description|Schema
|200|successful operation|<<ListWorkflowInstanceResponse>> array
|===

==== Consumes

* application/json

==== Produces

* application/json

==== Tags

* nFlow workflow instance management

=== Submit new workflow instance
----
PUT /nflow/v1/workflow-instance
----

==== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|BodyParameter|body|Submitted workflow instance information|true|<<CreateWorkflowInstanceRequest>>|
|===

==== Responses
[options="header"]
|===
|HTTP Code|Description|Schema
|201|Workflow was created|<<CreateWorkflowInstanceResponse>>
|===

==== Consumes

* application/json

==== Produces

* application/json

==== Tags

* nFlow workflow instance management

=== CORS preflight handling
----
OPTIONS /nflow/v1/workflow-instance/{any}
----

==== Responses
[options="header"]
|===
|HTTP Code|Description|Schema
|default|successful operation|No Content
|===

==== Consumes

* */*

==== Produces

* application/json

==== Tags

* nFlow workflow instance management

=== Fetch a workflow instance
----
GET /nflow/v1/workflow-instance/{id}
----

==== Description
:hardbreaks:
Fetch full state and action history of a single workflow instance.

==== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|PathParameter|id|Internal id for workflow instance|true|integer (int32)|
|QueryParameter|include|Data to include in response. currentStateVariables = current stateVariables for worfklow, actions = state transitions, actionStateVariables = state variable changes for actions, childWorkflows = map of created child workflow instance IDs by action ID|false|multi enum (currentStateVariables, actions, actionStateVariables, childWorkflows) array|
|QueryParameter|maxActions|Maximum number of actions returned for each workflow instance|false|integer (int64)|
|===

==== Responses
[options="header"]
|===
|HTTP Code|Description|Schema
|200|successful operation|<<ListWorkflowInstanceResponse>>
|===

==== Consumes

* application/json

==== Produces

* application/json

==== Tags

* nFlow workflow instance management

=== Update workflow instance
----
PUT /nflow/v1/workflow-instance/{id}
----

==== Description
:hardbreaks:
The service is typically used in manual state transition via nFlow Explorer or a business UI.

==== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|PathParameter|id|Internal id for workflow instance|true|integer (int32)|
|BodyParameter|body|Submitted workflow instance information|false|<<UpdateWorkflowInstanceRequest>>|
|===

==== Responses
[options="header"]
|===
|HTTP Code|Description|Schema
|204|If update was successful|No Content
|409|If workflow was executing and no update was done|No Content
|===

==== Consumes

* application/json

==== Produces

* application/json

==== Tags

* nFlow workflow instance management

=== Set workflow instance signal value
----
PUT /nflow/v1/workflow-instance/{id}/signal
----

==== Description
:hardbreaks:
The service may be used for example to interrupt executing workflow instance.

==== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|PathParameter|id|Internal id for workflow instance|true|integer (int32)|
|BodyParameter|body|New signal value|false|<<SetSignalRequest>>|
|===

==== Responses
[options="header"]
|===
|HTTP Code|Description|Schema
|200|When operation was successful|No Content
|===

==== Consumes

* application/json

==== Produces

* application/json

==== Tags

* nFlow workflow instance management

