[INFO] Scanning for projects...
[WARNING] 
[WARNING] Some problems were encountered while building the effective model for org.axonframework:axon-integrationtests:jar:3.4-SNAPSHOT
[WARNING] 'dependencies.dependency.systemPath' for com.oracle:ojdbc7:jar should not point at files within the project directory, ${project.basedir}/src/test/binary/ojdbc7.jar will be unresolvable by dependent projects @ org.axonframework:axon-integrationtests:[unknown-version], /root/workspace/AxonFramework/AxonFramework/437597512/integrationtests/pom.xml, line 142, column 25
[WARNING] 
[WARNING] It is highly recommended to fix these problems because they threaten the stability of your build.
[WARNING] 
[WARNING] For this reason, future Maven versions might no longer support building such malformed projects.
[WARNING] 
[INFO] ------------------------------------------------------------------------
[INFO] Reactor Build Order:
[INFO] 
[INFO] Axon Framework
[INFO] Axon Framework core
[INFO] Axon Framework Distributed CommandBus JGroups
[INFO] Axon Framework Spring Support
[INFO] Axon AMQP
[INFO] Axon Kafka
[INFO] Axon Framework Distributed CommandBus Spring Cloud
[INFO] Axon Metrics
[INFO] Axon Framework Spring Boot Support
[INFO] Axon Framework Test Fixtures
[INFO] Axon MongoDB Components
[INFO] Axon Integration tests
[INFO] Spring Boot Starter module for Axon Framework
[INFO] Spring Boot Starter module for Axon with JGroups Distributed Command Bus
[INFO] Axon Legacy Components
[INFO]                                                                         
[INFO] ------------------------------------------------------------------------
[INFO] Building Axon Framework 3.4-SNAPSHOT
[INFO] ------------------------------------------------------------------------
[INFO]                                                                         
[INFO] ------------------------------------------------------------------------
[INFO] Building Axon Framework core 3.4-SNAPSHOT
[INFO] ------------------------------------------------------------------------
[INFO] 
[INFO] --- maven-enforcer-plugin:1.4.1:enforce (enforce-banned-dependencies) @ axon-core ---
[INFO] Skipping Rule Enforcement.
[INFO] 
[INFO] --- maven-resources-plugin:3.0.2:resources (default-resources) @ axon-core ---
[INFO] Using 'UTF-8' encoding to copy filtered resources.
[INFO] Copying 7 resources
[INFO] 
[INFO] --- maven-compiler-plugin:3.5.1:compile (default-compile) @ axon-core ---
[INFO] Changes detected - recompiling the module!
[INFO] Compiling 575 source files to /root/workspace/AxonFramework/AxonFramework/437597512/core/target/classes
[INFO] /root/workspace/AxonFramework/AxonFramework/437597512/core/src/main/java/org/axonframework/commandhandling/model/LockingRepository.java: Some input files use or override a deprecated API.
[INFO] /root/workspace/AxonFramework/AxonFramework/437597512/core/src/main/java/org/axonframework/commandhandling/model/LockingRepository.java: Recompile with -Xlint:deprecation for details.
[INFO] /root/workspace/AxonFramework/AxonFramework/437597512/core/src/main/java/org/axonframework/serialization/json/JacksonSerializer.java: Some input files use unchecked or unsafe operations.
[INFO] /root/workspace/AxonFramework/AxonFramework/437597512/core/src/main/java/org/axonframework/serialization/json/JacksonSerializer.java: Recompile with -Xlint:unchecked for details.
[INFO] 
[INFO] --- maven-bundle-plugin:3.3.0:manifest (default) @ axon-core ---
[INFO] 
[INFO] --- maven-resources-plugin:3.0.2:testResources (default-testResources) @ axon-core ---
[INFO] Using 'UTF-8' encoding to copy filtered resources.
[INFO] Copying 11 resources
[INFO] 
[INFO] --- maven-compiler-plugin:3.5.1:testCompile (default-testCompile) @ axon-core ---
[INFO] Nothing to compile - all classes are up to date
[INFO] 
[INFO] --- maven-surefire-plugin:2.19.1:test (default-test) @ axon-core ---
[INFO] Downloading: https://repo.maven.apache.org/maven2/org/apache/maven/surefire/surefire-junit4/2.19.1/surefire-junit4-2.19.1.pom
[INFO] Downloaded: https://repo.maven.apache.org/maven2/org/apache/maven/surefire/surefire-junit4/2.19.1/surefire-junit4-2.19.1.pom (4 KB at 9.8 KB/sec)
[INFO] Downloading: https://repo.maven.apache.org/maven2/org/apache/maven/surefire/surefire-providers/2.19.1/surefire-providers-2.19.1.pom
[INFO] Downloaded: https://repo.maven.apache.org/maven2/org/apache/maven/surefire/surefire-providers/2.19.1/surefire-providers-2.19.1.pom (3 KB at 73.6 KB/sec)
[INFO] Downloading: https://repo.maven.apache.org/maven2/org/apache/maven/surefire/surefire-junit4/2.19.1/surefire-junit4-2.19.1.jar
[INFO] Downloaded: https://repo.maven.apache.org/maven2/org/apache/maven/surefire/surefire-junit4/2.19.1/surefire-junit4-2.19.1.jar (74 KB at 1022.9 KB/sec)

-------------------------------------------------------
 T E S T S
-------------------------------------------------------
Running org.axonframework.common.AssertTest
Tests run: 4, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.096 sec - in org.axonframework.common.AssertTest
Running org.axonframework.common.IdentifierValidatorTest
Tests run: 4, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0 sec - in org.axonframework.common.IdentifierValidatorTest
Running org.axonframework.common.jdbc.JdbcUtilsTest
Tests run: 4, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.974 sec - in org.axonframework.common.jdbc.JdbcUtilsTest
Running org.axonframework.common.jdbc.ConnectionWrapperFactoryTest
Tests run: 8, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.21 sec - in org.axonframework.common.jdbc.ConnectionWrapperFactoryTest
Running org.axonframework.common.jdbc.UnitOfWorkAwareConnectionProviderWrapperTest
Tests run: 5, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.352 sec - in org.axonframework.common.jdbc.UnitOfWorkAwareConnectionProviderWrapperTest
Running org.axonframework.common.annotation.PriorityAnnotationComparatorTest
Tests run: 4, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.016 sec - in org.axonframework.common.annotation.PriorityAnnotationComparatorTest
Running org.axonframework.common.annotation.AnnotationUtilsTest
Tests run: 5, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.004 sec - in org.axonframework.common.annotation.AnnotationUtilsTest
Running org.axonframework.common.lock.PessimisticLockFactoryTest
Tests run: 10, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 1.433 sec - in org.axonframework.common.lock.PessimisticLockFactoryTest
Running org.axonframework.common.lock.LockFactoryTest
Tests run: 1, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.052 sec - in org.axonframework.common.lock.LockFactoryTest
Running org.axonframework.common.property.BeanPropertyAccessStrategyTest
Tests run: 4, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.008 sec - in org.axonframework.common.property.BeanPropertyAccessStrategyTest
Running org.axonframework.common.property.DirectPropertyAccessStrategyTest
Tests run: 4, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.002 sec - in org.axonframework.common.property.DirectPropertyAccessStrategyTest
Running org.axonframework.common.property.PropertyAccessStrategyTest
Tests run: 5, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.006 sec - in org.axonframework.common.property.PropertyAccessStrategyTest
Running org.axonframework.common.property.UniformPropertyAccessStrategyTest
Tests run: 4, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.001 sec - in org.axonframework.common.property.UniformPropertyAccessStrategyTest
Running org.axonframework.common.AxonThreadFactoryTest
Tests run: 5, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.002 sec - in org.axonframework.common.AxonThreadFactoryTest
Running org.axonframework.common.CollectionUtilsTest
Tests run: 2, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.008 sec - in org.axonframework.common.CollectionUtilsTest
Running org.axonframework.common.caching.NoCacheTest
Tests run: 1, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.021 sec - in org.axonframework.common.caching.NoCacheTest
Running org.axonframework.common.caching.WeakReferenceCacheTest
Tests run: 2, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.246 sec - in org.axonframework.common.caching.WeakReferenceCacheTest
Running org.axonframework.common.ReflectionUtilsTest
Tests run: 11, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.007 sec - in org.axonframework.common.ReflectionUtilsTest
Running org.axonframework.common.DateTimeUtilsTest
Tests run: 1, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.023 sec - in org.axonframework.common.DateTimeUtilsTest
Running org.axonframework.serialization.json.JacksonSerializerTest
Tests run: 10, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 1.113 sec - in org.axonframework.serialization.json.JacksonSerializerTest
Running org.axonframework.serialization.json.JsonNodeToByteArrayConverterTest
Tests run: 1, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.003 sec - in org.axonframework.serialization.json.JsonNodeToByteArrayConverterTest
Running org.axonframework.serialization.json.ByteArrayToJsonNodeConverterTest
Tests run: 1, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0 sec - in org.axonframework.serialization.json.ByteArrayToJsonNodeConverterTest
Running org.axonframework.serialization.json.MetaDataDeserializerTest
Tests run: 20, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.09 sec - in org.axonframework.serialization.json.MetaDataDeserializerTest
Running org.axonframework.serialization.FixedValueRevisionResolverTest
Tests run: 1, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0 sec - in org.axonframework.serialization.FixedValueRevisionResolverTest
Running org.axonframework.serialization.upcasting.event.AbstractSingleEventUpcasterTest
Tests run: 4, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.376 sec - in org.axonframework.serialization.upcasting.event.AbstractSingleEventUpcasterTest
Running org.axonframework.serialization.upcasting.event.AbstractEventMultiUpcasterTest
Tests run: 4, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.028 sec - in org.axonframework.serialization.upcasting.event.AbstractEventMultiUpcasterTest
Running org.axonframework.serialization.upcasting.event.AbstractContextAwareSingleEventUpcasterTest
Tests run: 1, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.011 sec - in org.axonframework.serialization.upcasting.event.AbstractContextAwareSingleEventUpcasterTest
Running org.axonframework.serialization.upcasting.event.EventUpcasterChainTest
Tests run: 1, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.02 sec - in org.axonframework.serialization.upcasting.event.EventUpcasterChainTest
Running org.axonframework.serialization.upcasting.event.AbstractContextAwareEventMultiUpcasterTest
Tests run: 1, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.013 sec - in org.axonframework.serialization.upcasting.event.AbstractContextAwareEventMultiUpcasterTest
Running org.axonframework.serialization.upcasting.GenericUpcasterChainTest
Tests run: 6, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.011 sec - in org.axonframework.serialization.upcasting.GenericUpcasterChainTest
Running org.axonframework.serialization.SerializedMessageTest
Tests run: 5, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.022 sec - in org.axonframework.serialization.SerializedMessageTest
Running org.axonframework.serialization.SerializedMetaDataValueTest
Tests run: 2, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0 sec - in org.axonframework.serialization.SerializedMetaDataValueTest
Running org.axonframework.serialization.xml.InputStreamToXomConverterTest
Tests run: 1, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.07 sec - in org.axonframework.serialization.xml.InputStreamToXomConverterTest
Running org.axonframework.serialization.xml.XomToStringConverterTest
Tests run: 2, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0 sec - in org.axonframework.serialization.xml.XomToStringConverterTest
Running org.axonframework.serialization.xml.XStreamSerializerTest
Tests run: 12, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.001 sec - in org.axonframework.serialization.xml.XStreamSerializerTest
Running org.axonframework.serialization.xml.Dom4JToByteArrayConverterTest
Tests run: 2, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0 sec - in org.axonframework.serialization.xml.Dom4JToByteArrayConverterTest
Running org.axonframework.serialization.xml.InputStreamToDom4jConverterTest
Tests run: 1, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.001 sec - in org.axonframework.serialization.xml.InputStreamToDom4jConverterTest
Running org.axonframework.serialization.MavenArtifactRevisionResolverTest
Tests run: 2, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.001 sec - in org.axonframework.serialization.MavenArtifactRevisionResolverTest
Running org.axonframework.serialization.JavaSerializerTest
Tests run: 5, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0 sec - in org.axonframework.serialization.JavaSerializerTest
Running org.axonframework.serialization.LazyDeserializingObjectTest
Tests run: 5, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0 sec - in org.axonframework.serialization.LazyDeserializingObjectTest
Running org.axonframework.serialization.converters.InputStreamToByteArrayConverterTest
Tests run: 1, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0 sec - in org.axonframework.serialization.converters.InputStreamToByteArrayConverterTest
Running org.axonframework.serialization.converters.StringToByteArrayConverterTest
Tests run: 1, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0 sec - in org.axonframework.serialization.converters.StringToByteArrayConverterTest
Running org.axonframework.serialization.converters.ByteArrayToStringConverterTest
Tests run: 1, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0 sec - in org.axonframework.serialization.converters.ByteArrayToStringConverterTest
Running org.axonframework.serialization.AnnotationRevisionResolverTest
Tests run: 2, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0 sec - in org.axonframework.serialization.AnnotationRevisionResolverTest
Running org.axonframework.serialization.SerializationAwareTest
Tests run: 5, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0 sec - in org.axonframework.serialization.SerializationAwareTest
Running org.axonframework.serialization.MessageSerializerTest
Tests run: 1, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0 sec - in org.axonframework.serialization.MessageSerializerTest
Running org.axonframework.serialization.ChainedConverterTest
Tests run: 6, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0 sec - in org.axonframework.serialization.ChainedConverterTest
Running org.axonframework.serialization.SerialVersionUIDRevisionResolverTest
Tests run: 2, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0 sec - in org.axonframework.serialization.SerialVersionUIDRevisionResolverTest
Running org.axonframework.queryhandling.annotation.AnnotationQueryHandlerAdapterTest
Tests run: 6, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.001 sec - in org.axonframework.queryhandling.annotation.AnnotationQueryHandlerAdapterTest
Running org.axonframework.queryhandling.DefaultQueryGatewayTest
Tests run: 3, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0 sec - in org.axonframework.queryhandling.DefaultQueryGatewayTest
Running org.axonframework.queryhandling.SubscriptionQueryTest
2018-10-05 14:34:48,137 [main] ERROR SimpleQueryBus                  - An error happened while trying to report an initial result. Query: GenericQueryMessage{payload={axonFrameworkCR}, metadata={}, messageIdentifier='3111e101-3ff9-42c9-9318-a36c3f580734', queryName='failingQuery', expectedResponseType='org.axonframework.queryhandling.responsetypes.InstanceResponseType@41ef1ea2'}
java.util.concurrent.CompletionException: java.lang.RuntimeException: oops
	at java.util.concurrent.CompletableFuture.encodeThrowable(CompletableFuture.java:292)
	at java.util.concurrent.CompletableFuture.completeThrowable(CompletableFuture.java:308)
	at java.util.concurrent.CompletableFuture.uniAccept(CompletableFuture.java:647)
	at java.util.concurrent.CompletableFuture.uniAcceptStage(CompletableFuture.java:669)
	at java.util.concurrent.CompletableFuture.thenAccept(CompletableFuture.java:1997)
	at org.axonframework.queryhandling.SimpleQueryBus.lambda$subscriptionQuery$7(SimpleQueryBus.java:246)
	at org.axonframework.queryhandling.MonoWrapper.lambda$create$0(MonoWrapper.java:62)
	at reactor.core.publisher.MonoCreate.subscribe(MonoCreate.java:53)
	at reactor.core.publisher.Mono.subscribe(Mono.java:3080)
	at reactor.core.publisher.Mono.subscribeWith(Mono.java:3188)
	at reactor.core.publisher.Mono.subscribe(Mono.java:3074)
	at reactor.core.publisher.Mono.subscribe(Mono.java:3041)
	at reactor.core.publisher.Mono.subscribe(Mono.java:3013)
	at org.axonframework.queryhandling.SubscriptionQueryResult.handle(SubscriptionQueryResult.java:59)
	at org.axonframework.queryhandling.SubscriptionQueryTest.testSubscriptionQueryResultHandleWhenThereIsAnErrorOnUpdate(SubscriptionQueryTest.java:706)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:50)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:47)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:325)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:78)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:57)
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:290)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288)
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:58)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:363)
	at org.apache.maven.surefire.junit4.JUnit4Provider.execute(JUnit4Provider.java:367)
	at org.apache.maven.surefire.junit4.JUnit4Provider.executeWithRerun(JUnit4Provider.java:274)
	at org.apache.maven.surefire.junit4.JUnit4Provider.executeTestSet(JUnit4Provider.java:238)
	at org.apache.maven.surefire.junit4.JUnit4Provider.invoke(JUnit4Provider.java:161)
	at org.apache.maven.surefire.booter.ForkedBooter.invokeProviderInSameClassLoader(ForkedBooter.java:290)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:242)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:121)
Caused by: java.lang.RuntimeException: oops
	at org.axonframework.queryhandling.SubscriptionQueryTest$ChatQueryHandler.<init>(SubscriptionQueryTest.java:720)
	at org.axonframework.queryhandling.SubscriptionQueryTest$ChatQueryHandler.<init>(SubscriptionQueryTest.java:717)
	at org.axonframework.queryhandling.SubscriptionQueryTest.<init>(SubscriptionQueryTest.java:50)
	at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
	at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:62)
	at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)
	at java.lang.reflect.Constructor.newInstance(Constructor.java:423)
	at org.junit.runners.BlockJUnit4ClassRunner.createTest(BlockJUnit4ClassRunner.java:217)
	at org.junit.runners.BlockJUnit4ClassRunner$1.runReflectiveCall(BlockJUnit4ClassRunner.java:266)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.BlockJUnit4ClassRunner.methodBlock(BlockJUnit4ClassRunner.java:263)
	... 15 more
2018-10-05 14:34:48,179 [main] INFO  SimpleQueryBus                  - An error occurred while trying to emit an update to a query 'chatMessages'. The subscription will be cancelled. Exception summary: reactor.core.Exceptions$ErrorCallbackNotImplemented: java.lang.IllegalStateException: oops
2018-10-05 14:34:48,210 [main] ERROR SimpleQueryBus                  - An error happened while trying to inform update handler about the error. Query: GenericQueryMessage{payload={axonFrameworkCR}, metadata={}, messageIdentifier='abb7bc0e-c5b8-4649-8357-461e69727ab8', queryName='chatMessages', expectedResponseType='org.axonframework.queryhandling.responsetypes.MultipleInstancesResponseType@9b23822'}
2018-10-05 14:34:48,213 [main] ERROR SimpleQueryBus                  - An error happened while trying to inform update handler about the error. Query: GenericQueryMessage{payload={axonFrameworkCR}, metadata={}, messageIdentifier='cb51cf92-754e-4236-9c25-d92e1255832a', queryName='chatMessages', expectedResponseType='org.axonframework.queryhandling.responsetypes.MultipleInstancesResponseType@1a01d7f0'}
2018-10-05 14:34:48,750 [main] ERROR SimpleQueryBus                  - An error happened while trying to report an initial result. Query: GenericQueryMessage{payload={axonFrameworkCR}, metadata={}, messageIdentifier='d8af840c-7a4a-40b1-b058-ea9e99fbae81', queryName='failingQuery', expectedResponseType='org.axonframework.queryhandling.responsetypes.InstanceResponseType@14447be'}
java.util.concurrent.CompletionException: java.lang.RuntimeException: oops
	at java.util.concurrent.CompletableFuture.encodeThrowable(CompletableFuture.java:292)
	at java.util.concurrent.CompletableFuture.completeThrowable(CompletableFuture.java:308)
	at java.util.concurrent.CompletableFuture.uniAccept(CompletableFuture.java:647)
	at java.util.concurrent.CompletableFuture.uniAcceptStage(CompletableFuture.java:669)
	at java.util.concurrent.CompletableFuture.thenAccept(CompletableFuture.java:1997)
	at org.axonframework.queryhandling.SimpleQueryBus.lambda$subscriptionQuery$7(SimpleQueryBus.java:246)
	at org.axonframework.queryhandling.MonoWrapper.lambda$create$0(MonoWrapper.java:62)
	at reactor.core.publisher.MonoCreate.subscribe(MonoCreate.java:53)
	at reactor.core.publisher.Mono.subscribe(Mono.java:3080)
	at reactor.test.DefaultStepVerifierBuilder$DefaultStepVerifier.verify(DefaultStepVerifierBuilder.java:728)
	at reactor.test.DefaultStepVerifierBuilder$DefaultStepVerifier.verify(DefaultStepVerifierBuilder.java:700)
	at org.axonframework.queryhandling.SubscriptionQueryTest.testSubscribingQueryHandlerFailing(SubscriptionQueryTest.java:373)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:50)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:47)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:325)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:78)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:57)
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:290)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288)
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:58)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:363)
	at org.apache.maven.surefire.junit4.JUnit4Provider.execute(JUnit4Provider.java:367)
	at org.apache.maven.surefire.junit4.JUnit4Provider.executeWithRerun(JUnit4Provider.java:274)
	at org.apache.maven.surefire.junit4.JUnit4Provider.executeTestSet(JUnit4Provider.java:238)
	at org.apache.maven.surefire.junit4.JUnit4Provider.invoke(JUnit4Provider.java:161)
	at org.apache.maven.surefire.booter.ForkedBooter.invokeProviderInSameClassLoader(ForkedBooter.java:290)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:242)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:121)
Caused by: java.lang.RuntimeException: oops
	at org.axonframework.queryhandling.SubscriptionQueryTest$ChatQueryHandler.<init>(SubscriptionQueryTest.java:720)
	at org.axonframework.queryhandling.SubscriptionQueryTest$ChatQueryHandler.<init>(SubscriptionQueryTest.java:717)
	at org.axonframework.queryhandling.SubscriptionQueryTest.<init>(SubscriptionQueryTest.java:50)
	at sun.reflect.GeneratedConstructorAccessor67.newInstance(Unknown Source)
	at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)
	at java.lang.reflect.Constructor.newInstance(Constructor.java:423)
	at org.junit.runners.BlockJUnit4ClassRunner.createTest(BlockJUnit4ClassRunner.java:217)
	at org.junit.runners.BlockJUnit4ClassRunner$1.runReflectiveCall(BlockJUnit4ClassRunner.java:266)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.BlockJUnit4ClassRunner.methodBlock(BlockJUnit4ClassRunner.java:263)
	... 15 more
2018-10-05 14:34:48,753 [main] ERROR SimpleQueryBus                  - An error happened while trying to report an initial result. Query: GenericQueryMessage{payload={axonFrameworkCR}, metadata={}, messageIdentifier='9b0f5ff3-c627-4d0a-82cc-37f379d41536', queryName='failingQuery', expectedResponseType='org.axonframework.queryhandling.responsetypes.InstanceResponseType@8a6631b'}
java.util.concurrent.CompletionException: java.lang.RuntimeException: oops
	at java.util.concurrent.CompletableFuture.encodeThrowable(CompletableFuture.java:292)
	at java.util.concurrent.CompletableFuture.completeThrowable(CompletableFuture.java:308)
	at java.util.concurrent.CompletableFuture.uniAccept(CompletableFuture.java:647)
	at java.util.concurrent.CompletableFuture.uniAcceptStage(CompletableFuture.java:669)
	at java.util.concurrent.CompletableFuture.thenAccept(CompletableFuture.java:1997)
	at org.axonframework.queryhandling.SimpleQueryBus.lambda$subscriptionQuery$7(SimpleQueryBus.java:246)
	at org.axonframework.queryhandling.MonoWrapper.lambda$create$0(MonoWrapper.java:62)
	at reactor.core.publisher.MonoCreate.subscribe(MonoCreate.java:53)
	at reactor.core.publisher.Mono.subscribe(Mono.java:3080)
	at reactor.core.publisher.Mono.subscribeWith(Mono.java:3188)
	at reactor.core.publisher.Mono.subscribe(Mono.java:3074)
	at reactor.core.publisher.Mono.subscribe(Mono.java:3041)
	at reactor.core.publisher.Mono.subscribe(Mono.java:3013)
	at org.axonframework.queryhandling.SubscriptionQueryResult.handle(SubscriptionQueryResult.java:59)
	at org.axonframework.queryhandling.SubscriptionQueryTest.testSubscriptionQueryResultHandleWhenThereIsAnErrorOnInitialResult(SubscriptionQueryTest.java:683)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:50)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:47)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:325)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:78)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:57)
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:290)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288)
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:58)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:363)
	at org.apache.maven.surefire.junit4.JUnit4Provider.execute(JUnit4Provider.java:367)
	at org.apache.maven.surefire.junit4.JUnit4Provider.executeWithRerun(JUnit4Provider.java:274)
	at org.apache.maven.surefire.junit4.JUnit4Provider.executeTestSet(JUnit4Provider.java:238)
	at org.apache.maven.surefire.junit4.JUnit4Provider.invoke(JUnit4Provider.java:161)
	at org.apache.maven.surefire.booter.ForkedBooter.invokeProviderInSameClassLoader(ForkedBooter.java:290)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:242)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:121)
Caused by: java.lang.RuntimeException: oops
	at org.axonframework.queryhandling.SubscriptionQueryTest$ChatQueryHandler.<init>(SubscriptionQueryTest.java:720)
	at org.axonframework.queryhandling.SubscriptionQueryTest$ChatQueryHandler.<init>(SubscriptionQueryTest.java:717)
	at org.axonframework.queryhandling.SubscriptionQueryTest.<init>(SubscriptionQueryTest.java:50)
	at sun.reflect.GeneratedConstructorAccessor67.newInstance(Unknown Source)
	at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)
	at java.lang.reflect.Constructor.newInstance(Constructor.java:423)
	at org.junit.runners.BlockJUnit4ClassRunner.createTest(BlockJUnit4ClassRunner.java:217)
	at org.junit.runners.BlockJUnit4ClassRunner$1.runReflectiveCall(BlockJUnit4ClassRunner.java:266)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.BlockJUnit4ClassRunner.methodBlock(BlockJUnit4ClassRunner.java:263)
	... 15 more
Tests run: 22, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 1.39 sec - in org.axonframework.queryhandling.SubscriptionQueryTest
Running org.axonframework.queryhandling.responsetypes.ResponseTypesJacksonSerializationTest
Tests run: 2, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.009 sec - in org.axonframework.queryhandling.responsetypes.ResponseTypesJacksonSerializationTest
Running org.axonframework.queryhandling.responsetypes.InstanceResponseTypeTest
Tests run: 36, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.008 sec - in org.axonframework.queryhandling.responsetypes.InstanceResponseTypeTest
Running org.axonframework.queryhandling.responsetypes.MultipleInstancesResponseTypeTest
2018-10-05 14:34:49,789 [main] INFO  MultipleInstancesResponseType   - The given response is an Iterable without any contents, hence we cannot verify if the contained type is assignable to the expected type.
Tests run: 46, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.01 sec - in org.axonframework.queryhandling.responsetypes.MultipleInstancesResponseTypeTest
Running org.axonframework.queryhandling.QueryEventHandlingTest
Tests run: 1, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.053 sec - in org.axonframework.queryhandling.QueryEventHandlingTest
Running org.axonframework.queryhandling.FutureAsResponseTypeToQueryHandlersTest
Tests run: 6, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 3.017 sec - in org.axonframework.queryhandling.FutureAsResponseTypeToQueryHandlersTest
Running org.axonframework.queryhandling.SimpleQueryBusTest
Tests run: 24, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.078 sec - in org.axonframework.queryhandling.SimpleQueryBusTest
Running org.axonframework.eventhandling.SimpleEventBusTest
2018-10-05 14:34:52,962 [main] INFO  AbstractEventBus                - EventProcessor [Mock for Consumer, hashCode: 327170708] not added. It was already subscribed
2018-10-05 14:34:52,962 [main] INFO  AbstractEventBus                - EventListener Mock for Consumer, hashCode: 189215452 not removed. It was already unsubscribed
Tests run: 1, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.011 sec - in org.axonframework.eventhandling.SimpleEventBusTest
Running org.axonframework.eventhandling.saga.repository.jpa.JpaSagaStoreTest
2018-10-05 14:34:53,043 [main] INFO  DefaultTestContextBootstrapper  - Loaded default TestExecutionListener class names from location [META-INF/spring.factories]: [org.springframework.test.context.web.ServletTestExecutionListener, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener, org.springframework.test.context.support.DependencyInjectionTestExecutionListener, org.springframework.test.context.support.DirtiesContextTestExecutionListener, org.springframework.test.context.transaction.TransactionalTestExecutionListener, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener]
2018-10-05 14:34:53,060 [main] INFO  DefaultTestContextBootstrapper  - Using TestExecutionListeners: [org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener@631c6d11, org.springframework.test.context.support.DependencyInjectionTestExecutionListener@65be88ae, org.springframework.test.context.support.DirtiesContextTestExecutionListener@62ade015, org.springframework.test.context.transaction.TransactionalTestExecutionListener@70ede57d, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener@70997a94]
2018-10-05 14:34:53,113 [main] INFO  XmlBeanDefinitionReader         - Loading XML bean definitions from class path resource [META-INF/spring/saga-repository-test.xml]
2018-10-05 14:34:53,371 [main] INFO  XmlBeanDefinitionReader         - Loading XML bean definitions from class path resource [META-INF/spring/db-context.xml]
2018-10-05 14:34:53,407 [main] INFO  GenericApplicationContext       - Refreshing org.springframework.context.support.GenericApplicationContext@35787726: startup date [Fri Oct 05 14:34:53 CEST 2018]; root of context hierarchy
2018-10-05 14:34:53,524 [main] INFO  redAnnotationBeanPostProcessor  - JSR-330 'javax.inject.Inject' annotation found and supported for autowiring
2018-10-05 14:34:53,694 [main] INFO  DriverManagerDataSource         - Loaded JDBC driver: org.hsqldb.jdbcDriver
2018-10-05 14:34:53,775 [main] INFO  tainerEntityManagerFactoryBean  - Building JPA container EntityManagerFactory for persistence unit 'eventStore'
2018-10-05 14:34:53,795 [main] INFO  LogHelper                       - HHH000204: Processing PersistenceUnitInfo [
	name: eventStore
	...]
2018-10-05 14:34:53,862 [main] INFO  Version                         - HHH000412: Hibernate Core {5.1.0.Final}
2018-10-05 14:34:53,863 [main] INFO  Environment                     - HHH000206: hibernate.properties not found
2018-10-05 14:34:53,865 [main] INFO  Environment                     - HHH000021: Bytecode provider name : javassist
2018-10-05 14:34:53,903 [main] INFO  Version                         - HCANN000001: Hibernate Commons Annotations {5.0.1.Final}
2018-10-05 14:34:54,509 [main] INFO  Dialect                         - HHH000400: Using dialect: org.hibernate.dialect.HSQLDialect
2018-10-05 14:34:55,000 [main] INFO  Version                         - HV000001: Hibernate Validator 5.2.4.Final
2018-10-05 14:34:55,342 [main] INFO  ractorJdbcDatabaseMetaDataImpl  - HHH000262: Table not found: AssociationValueEntry
2018-10-05 14:34:55,344 [main] INFO  ractorJdbcDatabaseMetaDataImpl  - HHH000262: Table not found: AssociationValueEntry
2018-10-05 14:34:55,349 [main] INFO  ractorJdbcDatabaseMetaDataImpl  - HHH000262: Table not found: CustomDomainEventEntry
2018-10-05 14:34:55,350 [main] INFO  ractorJdbcDatabaseMetaDataImpl  - HHH000262: Table not found: CustomDomainEventEntry
2018-10-05 14:34:55,357 [main] INFO  ractorJdbcDatabaseMetaDataImpl  - HHH000262: Table not found: CustomSagaEntry
2018-10-05 14:34:55,358 [main] INFO  ractorJdbcDatabaseMetaDataImpl  - HHH000262: Table not found: CustomSagaEntry
2018-10-05 14:34:55,362 [main] INFO  ractorJdbcDatabaseMetaDataImpl  - HHH000262: Table not found: CustomSnapshotEventEntry
2018-10-05 14:34:55,363 [main] INFO  ractorJdbcDatabaseMetaDataImpl  - HHH000262: Table not found: CustomSnapshotEventEntry
2018-10-05 14:34:55,368 [main] INFO  ractorJdbcDatabaseMetaDataImpl  - HHH000262: Table not found: DomainEventEntry
2018-10-05 14:34:55,369 [main] INFO  ractorJdbcDatabaseMetaDataImpl  - HHH000262: Table not found: DomainEventEntry
2018-10-05 14:34:55,374 [main] INFO  ractorJdbcDatabaseMetaDataImpl  - HHH000262: Table not found: JpaAggregate
2018-10-05 14:34:55,375 [main] INFO  ractorJdbcDatabaseMetaDataImpl  - HHH000262: Table not found: JpaAggregate
2018-10-05 14:34:55,378 [main] INFO  ractorJdbcDatabaseMetaDataImpl  - HHH000262: Table not found: SagaEntry
2018-10-05 14:34:55,378 [main] INFO  ractorJdbcDatabaseMetaDataImpl  - HHH000262: Table not found: SagaEntry
2018-10-05 14:34:55,381 [main] INFO  ractorJdbcDatabaseMetaDataImpl  - HHH000262: Table not found: SnapshotEventEntry
2018-10-05 14:34:55,382 [main] INFO  ractorJdbcDatabaseMetaDataImpl  - HHH000262: Table not found: SnapshotEventEntry
2018-10-05 14:34:55,386 [main] INFO  ractorJdbcDatabaseMetaDataImpl  - HHH000262: Table not found: StubAggregate
2018-10-05 14:34:55,387 [main] INFO  ractorJdbcDatabaseMetaDataImpl  - HHH000262: Table not found: StubAggregate
2018-10-05 14:34:55,584 [main] INFO  tainerEntityManagerFactoryBean  - Initialized JPA EntityManagerFactory for persistence unit 'eventStore'
2018-10-05 14:34:55,841 [main] INFO  TransactionContext              - Began transaction (1) for test context [DefaultTestContext@581e8969 testClass = JpaSagaStoreTest, testInstance = org.axonframework.eventhandling.saga.repository.jpa.JpaSagaStoreTest@767b9d66, testMethod = testEndSaga@JpaSagaStoreTest, testException = [null], mergedContextConfiguration = [MergedContextConfiguration@687fd6e testClass = JpaSagaStoreTest, locations = '{classpath:/META-INF/spring/saga-repository-test.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], contextLoader = 'org.springframework.test.context.support.DelegatingSmartContextLoader', parent = [null]], attributes = map[[empty]]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@4790b897]; rollback [true]
2018-10-05 14:34:55,861 [main] INFO  ueryTranslatorFactoryInitiator  - HHH000397: Using ASTQueryTranslatorFactory
2018-10-05 14:34:56,097 [main] INFO  TransactionContext              - Rolled back transaction for test context [DefaultTestContext@581e8969 testClass = JpaSagaStoreTest, testInstance = org.axonframework.eventhandling.saga.repository.jpa.JpaSagaStoreTest@767b9d66, testMethod = testEndSaga@JpaSagaStoreTest, testException = [null], mergedContextConfiguration = [MergedContextConfiguration@687fd6e testClass = JpaSagaStoreTest, locations = '{classpath:/META-INF/spring/saga-repository-test.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], contextLoader = 'org.springframework.test.context.support.DelegatingSmartContextLoader', parent = [null]], attributes = map[[empty]]].
2018-10-05 14:34:56,098 [main] INFO  GenericApplicationContext       - Closing org.springframework.context.support.GenericApplicationContext@35787726: startup date [Fri Oct 05 14:34:53 CEST 2018]; root of context hierarchy
2018-10-05 14:34:56,100 [main] INFO  tainerEntityManagerFactoryBean  - Closing JPA EntityManagerFactory for persistence unit 'eventStore'
2018-10-05 14:34:56,101 [main] INFO  XmlBeanDefinitionReader         - Loading XML bean definitions from class path resource [META-INF/spring/saga-repository-test.xml]
2018-10-05 14:34:56,127 [main] INFO  XmlBeanDefinitionReader         - Loading XML bean definitions from class path resource [META-INF/spring/db-context.xml]
2018-10-05 14:34:56,149 [main] INFO  GenericApplicationContext       - Refreshing org.springframework.context.support.GenericApplicationContext@331ad6eb: startup date [Fri Oct 05 14:34:56 CEST 2018]; root of context hierarchy
2018-10-05 14:34:56,163 [main] INFO  redAnnotationBeanPostProcessor  - JSR-330 'javax.inject.Inject' annotation found and supported for autowiring
2018-10-05 14:34:56,201 [main] INFO  DriverManagerDataSource         - Loaded JDBC driver: org.hsqldb.jdbcDriver
2018-10-05 14:34:56,211 [main] INFO  tainerEntityManagerFactoryBean  - Building JPA container EntityManagerFactory for persistence unit 'eventStore'
2018-10-05 14:34:56,211 [main] INFO  LogHelper                       - HHH000204: Processing PersistenceUnitInfo [
	name: eventStore
	...]
2018-10-05 14:34:56,291 [main] INFO  Dialect                         - HHH000400: Using dialect: org.hibernate.dialect.HSQLDialect
2018-10-05 14:34:56,520 [main] INFO  tainerEntityManagerFactoryBean  - Initialized JPA EntityManagerFactory for persistence unit 'eventStore'
2018-10-05 14:34:56,561 [main] INFO  TransactionContext              - Began transaction (1) for test context [DefaultTestContext@581e8969 testClass = JpaSagaStoreTest, testInstance = org.axonframework.eventhandling.saga.repository.jpa.JpaSagaStoreTest@7f5f7731, testMethod = testAddingAnInactiveSagaDoesntStoreIt@JpaSagaStoreTest, testException = [null], mergedContextConfiguration = [MergedContextConfiguration@687fd6e testClass = JpaSagaStoreTest, locations = '{classpath:/META-INF/spring/saga-repository-test.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], contextLoader = 'org.springframework.test.context.support.DelegatingSmartContextLoader', parent = [null]], attributes = map[[empty]]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@7aaf6bfd]; rollback [true]
2018-10-05 14:34:56,564 [main] INFO  ueryTranslatorFactoryInitiator  - HHH000397: Using ASTQueryTranslatorFactory
2018-10-05 14:34:56,591 [main] INFO  TransactionContext              - Rolled back transaction for test context [DefaultTestContext@581e8969 testClass = JpaSagaStoreTest, testInstance = org.axonframework.eventhandling.saga.repository.jpa.JpaSagaStoreTest@7f5f7731, testMethod = testAddingAnInactiveSagaDoesntStoreIt@JpaSagaStoreTest, testException = [null], mergedContextConfiguration = [MergedContextConfiguration@687fd6e testClass = JpaSagaStoreTest, locations = '{classpath:/META-INF/spring/saga-repository-test.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], contextLoader = 'org.springframework.test.context.support.DelegatingSmartContextLoader', parent = [null]], attributes = map[[empty]]].
2018-10-05 14:34:56,592 [main] INFO  GenericApplicationContext       - Closing org.springframework.context.support.GenericApplicationContext@331ad6eb: startup date [Fri Oct 05 14:34:56 CEST 2018]; root of context hierarchy
2018-10-05 14:34:56,592 [main] INFO  tainerEntityManagerFactoryBean  - Closing JPA EntityManagerFactory for persistence unit 'eventStore'
2018-10-05 14:34:56,593 [main] INFO  XmlBeanDefinitionReader         - Loading XML bean definitions from class path resource [META-INF/spring/saga-repository-test.xml]
2018-10-05 14:34:56,612 [main] INFO  XmlBeanDefinitionReader         - Loading XML bean definitions from class path resource [META-INF/spring/db-context.xml]
2018-10-05 14:34:56,630 [main] INFO  GenericApplicationContext       - Refreshing org.springframework.context.support.GenericApplicationContext@4f1a5b93: startup date [Fri Oct 05 14:34:56 CEST 2018]; root of context hierarchy
2018-10-05 14:34:56,640 [main] INFO  redAnnotationBeanPostProcessor  - JSR-330 'javax.inject.Inject' annotation found and supported for autowiring
2018-10-05 14:34:56,666 [main] INFO  DriverManagerDataSource         - Loaded JDBC driver: org.hsqldb.jdbcDriver
2018-10-05 14:34:56,674 [main] INFO  tainerEntityManagerFactoryBean  - Building JPA container EntityManagerFactory for persistence unit 'eventStore'
2018-10-05 14:34:56,674 [main] INFO  LogHelper                       - HHH000204: Processing PersistenceUnitInfo [
	name: eventStore
	...]
2018-10-05 14:34:56,727 [main] INFO  Dialect                         - HHH000400: Using dialect: org.hibernate.dialect.HSQLDialect
2018-10-05 14:34:56,865 [main] INFO  tainerEntityManagerFactoryBean  - Initialized JPA EntityManagerFactory for persistence unit 'eventStore'
2018-10-05 14:34:56,903 [main] INFO  TransactionContext              - Began transaction (1) for test context [DefaultTestContext@581e8969 testClass = JpaSagaStoreTest, testInstance = org.axonframework.eventhandling.saga.repository.jpa.JpaSagaStoreTest@66f5770e, testMethod = testLoadSaga_AssociationValueRemoved@JpaSagaStoreTest, testException = [null], mergedContextConfiguration = [MergedContextConfiguration@687fd6e testClass = JpaSagaStoreTest, locations = '{classpath:/META-INF/spring/saga-repository-test.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], contextLoader = 'org.springframework.test.context.support.DelegatingSmartContextLoader', parent = [null]], attributes = map[[empty]]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@1885905b]; rollback [true]
2018-10-05 14:34:56,906 [main] INFO  ueryTranslatorFactoryInitiator  - HHH000397: Using ASTQueryTranslatorFactory
2018-10-05 14:34:56,935 [main] INFO  TransactionContext              - Rolled back transaction for test context [DefaultTestContext@581e8969 testClass = JpaSagaStoreTest, testInstance = org.axonframework.eventhandling.saga.repository.jpa.JpaSagaStoreTest@66f5770e, testMethod = testLoadSaga_AssociationValueRemoved@JpaSagaStoreTest, testException = [null], mergedContextConfiguration = [MergedContextConfiguration@687fd6e testClass = JpaSagaStoreTest, locations = '{classpath:/META-INF/spring/saga-repository-test.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], contextLoader = 'org.springframework.test.context.support.DelegatingSmartContextLoader', parent = [null]], attributes = map[[empty]]].
2018-10-05 14:34:56,935 [main] INFO  GenericApplicationContext       - Closing org.springframework.context.support.GenericApplicationContext@4f1a5b93: startup date [Fri Oct 05 14:34:56 CEST 2018]; root of context hierarchy
2018-10-05 14:34:56,936 [main] INFO  tainerEntityManagerFactoryBean  - Closing JPA EntityManagerFactory for persistence unit 'eventStore'
2018-10-05 14:34:56,936 [main] INFO  XmlBeanDefinitionReader         - Loading XML bean definitions from class path resource [META-INF/spring/saga-repository-test.xml]
2018-10-05 14:34:56,955 [main] INFO  XmlBeanDefinitionReader         - Loading XML bean definitions from class path resource [META-INF/spring/db-context.xml]
2018-10-05 14:34:56,972 [main] INFO  GenericApplicationContext       - Refreshing org.springframework.context.support.GenericApplicationContext@56226064: startup date [Fri Oct 05 14:34:56 CEST 2018]; root of context hierarchy
2018-10-05 14:34:56,981 [main] INFO  redAnnotationBeanPostProcessor  - JSR-330 'javax.inject.Inject' annotation found and supported for autowiring
2018-10-05 14:34:57,008 [main] INFO  DriverManagerDataSource         - Loaded JDBC driver: org.hsqldb.jdbcDriver
2018-10-05 14:34:57,016 [main] INFO  tainerEntityManagerFactoryBean  - Building JPA container EntityManagerFactory for persistence unit 'eventStore'
2018-10-05 14:34:57,016 [main] INFO  LogHelper                       - HHH000204: Processing PersistenceUnitInfo [
	name: eventStore
	...]
2018-10-05 14:34:57,067 [main] INFO  Dialect                         - HHH000400: Using dialect: org.hibernate.dialect.HSQLDialect
2018-10-05 14:34:57,198 [main] INFO  tainerEntityManagerFactoryBean  - Initialized JPA EntityManagerFactory for persistence unit 'eventStore'
2018-10-05 14:34:57,239 [main] INFO  TransactionContext              - Began transaction (1) for test context [DefaultTestContext@581e8969 testClass = JpaSagaStoreTest, testInstance = org.axonframework.eventhandling.saga.repository.jpa.JpaSagaStoreTest@34114276, testMethod = testStoreSagaWithCustomEntity@JpaSagaStoreTest, testException = [null], mergedContextConfiguration = [MergedContextConfiguration@687fd6e testClass = JpaSagaStoreTest, locations = '{classpath:/META-INF/spring/saga-repository-test.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], contextLoader = 'org.springframework.test.context.support.DelegatingSmartContextLoader', parent = [null]], attributes = map[[empty]]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@34be7efb]; rollback [true]
2018-10-05 14:34:57,242 [main] INFO  ueryTranslatorFactoryInitiator  - HHH000397: Using ASTQueryTranslatorFactory
2018-10-05 14:34:57,312 [main] INFO  TransactionContext              - Rolled back transaction for test context [DefaultTestContext@581e8969 testClass = JpaSagaStoreTest, testInstance = org.axonframework.eventhandling.saga.repository.jpa.JpaSagaStoreTest@34114276, testMethod = testStoreSagaWithCustomEntity@JpaSagaStoreTest, testException = [null], mergedContextConfiguration = [MergedContextConfiguration@687fd6e testClass = JpaSagaStoreTest, locations = '{classpath:/META-INF/spring/saga-repository-test.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], contextLoader = 'org.springframework.test.context.support.DelegatingSmartContextLoader', parent = [null]], attributes = map[[empty]]].
2018-10-05 14:34:57,315 [main] INFO  GenericApplicationContext       - Closing org.springframework.context.support.GenericApplicationContext@56226064: startup date [Fri Oct 05 14:34:56 CEST 2018]; root of context hierarchy
2018-10-05 14:34:57,316 [main] INFO  tainerEntityManagerFactoryBean  - Closing JPA EntityManagerFactory for persistence unit 'eventStore'
2018-10-05 14:34:57,317 [main] INFO  XmlBeanDefinitionReader         - Loading XML bean definitions from class path resource [META-INF/spring/saga-repository-test.xml]
2018-10-05 14:34:57,342 [main] INFO  XmlBeanDefinitionReader         - Loading XML bean definitions from class path resource [META-INF/spring/db-context.xml]
2018-10-05 14:34:57,366 [main] INFO  GenericApplicationContext       - Refreshing org.springframework.context.support.GenericApplicationContext@3555d804: startup date [Fri Oct 05 14:34:57 CEST 2018]; root of context hierarchy
2018-10-05 14:34:57,378 [main] INFO  redAnnotationBeanPostProcessor  - JSR-330 'javax.inject.Inject' annotation found and supported for autowiring
2018-10-05 14:34:57,407 [main] INFO  DriverManagerDataSource         - Loaded JDBC driver: org.hsqldb.jdbcDriver
2018-10-05 14:34:57,415 [main] INFO  tainerEntityManagerFactoryBean  - Building JPA container EntityManagerFactory for persistence unit 'eventStore'
2018-10-05 14:34:57,415 [main] INFO  LogHelper                       - HHH000204: Processing PersistenceUnitInfo [
	name: eventStore
	...]
2018-10-05 14:34:57,468 [main] INFO  Dialect                         - HHH000400: Using dialect: org.hibernate.dialect.HSQLDialect
2018-10-05 14:34:57,643 [main] INFO  tainerEntityManagerFactoryBean  - Initialized JPA EntityManagerFactory for persistence unit 'eventStore'
2018-10-05 14:34:57,676 [main] INFO  TransactionContext              - Began transaction (1) for test context [DefaultTestContext@581e8969 testClass = JpaSagaStoreTest, testInstance = org.axonframework.eventhandling.saga.repository.jpa.JpaSagaStoreTest@25762f04, testMethod = testAddAndLoadSaga_ByAssociationValue@JpaSagaStoreTest, testException = [null], mergedContextConfiguration = [MergedContextConfiguration@687fd6e testClass = JpaSagaStoreTest, locations = '{classpath:/META-INF/spring/saga-repository-test.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], contextLoader = 'org.springframework.test.context.support.DelegatingSmartContextLoader', parent = [null]], attributes = map[[empty]]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@15a591d9]; rollback [true]
2018-10-05 14:34:57,679 [main] INFO  ueryTranslatorFactoryInitiator  - HHH000397: Using ASTQueryTranslatorFactory
2018-10-05 14:34:57,712 [main] INFO  TransactionContext              - Rolled back transaction for test context [DefaultTestContext@581e8969 testClass = JpaSagaStoreTest, testInstance = org.axonframework.eventhandling.saga.repository.jpa.JpaSagaStoreTest@25762f04, testMethod = testAddAndLoadSaga_ByAssociationValue@JpaSagaStoreTest, testException = [null], mergedContextConfiguration = [MergedContextConfiguration@687fd6e testClass = JpaSagaStoreTest, locations = '{classpath:/META-INF/spring/saga-repository-test.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], contextLoader = 'org.springframework.test.context.support.DelegatingSmartContextLoader', parent = [null]], attributes = map[[empty]]].
2018-10-05 14:34:57,712 [main] INFO  GenericApplicationContext       - Closing org.springframework.context.support.GenericApplicationContext@3555d804: startup date [Fri Oct 05 14:34:57 CEST 2018]; root of context hierarchy
2018-10-05 14:34:57,713 [main] INFO  tainerEntityManagerFactoryBean  - Closing JPA EntityManagerFactory for persistence unit 'eventStore'
2018-10-05 14:34:57,714 [main] INFO  XmlBeanDefinitionReader         - Loading XML bean definitions from class path resource [META-INF/spring/saga-repository-test.xml]
2018-10-05 14:34:57,740 [main] INFO  XmlBeanDefinitionReader         - Loading XML bean definitions from class path resource [META-INF/spring/db-context.xml]
2018-10-05 14:34:57,764 [main] INFO  GenericApplicationContext       - Refreshing org.springframework.context.support.GenericApplicationContext@77b01226: startup date [Fri Oct 05 14:34:57 CEST 2018]; root of context hierarchy
2018-10-05 14:34:57,776 [main] INFO  redAnnotationBeanPostProcessor  - JSR-330 'javax.inject.Inject' annotation found and supported for autowiring
2018-10-05 14:34:57,812 [main] INFO  DriverManagerDataSource         - Loaded JDBC driver: org.hsqldb.jdbcDriver
2018-10-05 14:34:57,821 [main] INFO  tainerEntityManagerFactoryBean  - Building JPA container EntityManagerFactory for persistence unit 'eventStore'
2018-10-05 14:34:57,821 [main] INFO  LogHelper                       - HHH000204: Processing PersistenceUnitInfo [
	name: eventStore
	...]
2018-10-05 14:34:57,873 [main] INFO  Dialect                         - HHH000400: Using dialect: org.hibernate.dialect.HSQLDialect
2018-10-05 14:34:58,027 [main] INFO  tainerEntityManagerFactoryBean  - Initialized JPA EntityManagerFactory for persistence unit 'eventStore'
2018-10-05 14:34:58,058 [main] INFO  TransactionContext              - Began transaction (1) for test context [DefaultTestContext@581e8969 testClass = JpaSagaStoreTest, testInstance = org.axonframework.eventhandling.saga.repository.jpa.JpaSagaStoreTest@634d56eb, testMethod = testAddAndLoadSaga_ByIdentifier@JpaSagaStoreTest, testException = [null], mergedContextConfiguration = [MergedContextConfiguration@687fd6e testClass = JpaSagaStoreTest, locations = '{classpath:/META-INF/spring/saga-repository-test.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], contextLoader = 'org.springframework.test.context.support.DelegatingSmartContextLoader', parent = [null]], attributes = map[[empty]]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@46ae897c]; rollback [true]
2018-10-05 14:34:58,061 [main] INFO  ueryTranslatorFactoryInitiator  - HHH000397: Using ASTQueryTranslatorFactory
2018-10-05 14:34:58,082 [main] INFO  TransactionContext              - Rolled back transaction for test context [DefaultTestContext@581e8969 testClass = JpaSagaStoreTest, testInstance = org.axonframework.eventhandling.saga.repository.jpa.JpaSagaStoreTest@634d56eb, testMethod = testAddAndLoadSaga_ByIdentifier@JpaSagaStoreTest, testException = [null], mergedContextConfiguration = [MergedContextConfiguration@687fd6e testClass = JpaSagaStoreTest, locations = '{classpath:/META-INF/spring/saga-repository-test.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], contextLoader = 'org.springframework.test.context.support.DelegatingSmartContextLoader', parent = [null]], attributes = map[[empty]]].
2018-10-05 14:34:58,082 [main] INFO  GenericApplicationContext       - Closing org.springframework.context.support.GenericApplicationContext@77b01226: startup date [Fri Oct 05 14:34:57 CEST 2018]; root of context hierarchy
2018-10-05 14:34:58,082 [main] INFO  tainerEntityManagerFactoryBean  - Closing JPA EntityManagerFactory for persistence unit 'eventStore'
Tests run: 6, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 5.119 sec - in org.axonframework.eventhandling.saga.repository.jpa.JpaSagaStoreTest
Running org.axonframework.eventhandling.saga.repository.jdbc.JdbcSagaStoreTest
Tests run: 3, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.133 sec - in org.axonframework.eventhandling.saga.repository.jdbc.JdbcSagaStoreTest
Running org.axonframework.eventhandling.saga.repository.AnnotatedSagaRepositoryTest
Tests run: 5, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.027 sec - in org.axonframework.eventhandling.saga.repository.AnnotatedSagaRepositoryTest
Running org.axonframework.eventhandling.saga.repository.LockingSagaRepositoryTest
Tests run: 2, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.049 sec - in org.axonframework.eventhandling.saga.repository.LockingSagaRepositoryTest
Running org.axonframework.eventhandling.saga.repository.CachingSagaStoreTest
Tests run: 5, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.266 sec - in org.axonframework.eventhandling.saga.repository.CachingSagaStoreTest
Running org.axonframework.eventhandling.saga.repository.AssociationValueMapTest
Tests run: 3, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.121 sec - in org.axonframework.eventhandling.saga.repository.AssociationValueMapTest
Running org.axonframework.eventhandling.saga.SimpleResourceInjectorTest
Tests run: 4, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.008 sec - in org.axonframework.eventhandling.saga.SimpleResourceInjectorTest
Running org.axonframework.eventhandling.saga.AnnotatedSagaTest
Tests run: 7, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.024 sec - in org.axonframework.eventhandling.saga.AnnotatedSagaTest
Running org.axonframework.eventhandling.saga.AnnotatedSagaManagerTest
Tests run: 11, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.089 sec - in org.axonframework.eventhandling.saga.AnnotatedSagaManagerTest
Running org.axonframework.eventhandling.saga.SagaManagerTest
Tests run: 5, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.027 sec - in org.axonframework.eventhandling.saga.SagaManagerTest
Running org.axonframework.eventhandling.saga.metamodel.AnnotationSagaMetaModelFactoryTest
Tests run: 1, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.002 sec - in org.axonframework.eventhandling.saga.metamodel.AnnotationSagaMetaModelFactoryTest
Running org.axonframework.eventhandling.saga.AssociationValuesImplTest
Tests run: 8, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.001 sec - in org.axonframework.eventhandling.saga.AssociationValuesImplTest
Running org.axonframework.eventhandling.async.SequentialPerAggregatePolicyTest
Tests run: 1, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.001 sec - in org.axonframework.eventhandling.async.SequentialPerAggregatePolicyTest
Running org.axonframework.eventhandling.async.FullConcurrencyPolicyTest
Tests run: 1, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0 sec - in org.axonframework.eventhandling.async.FullConcurrencyPolicyTest
Running org.axonframework.eventhandling.async.AsynchronousEventProcessorConcurrencyTest
Tests run: 1, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 4.023 sec - in org.axonframework.eventhandling.async.AsynchronousEventProcessorConcurrencyTest
Running org.axonframework.eventhandling.async.SequentialPolicyTest
Tests run: 1, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0 sec - in org.axonframework.eventhandling.async.SequentialPolicyTest
Running org.axonframework.eventhandling.async.AsynchronousEventProcessingStrategyTest
Tests run: 3, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.019 sec - in org.axonframework.eventhandling.async.AsynchronousEventProcessingStrategyTest
Running org.axonframework.eventhandling.GenericEventMessageTest
Tests run: 5, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.002 sec - in org.axonframework.eventhandling.GenericEventMessageTest
Running org.axonframework.eventhandling.TrackingEventProcessorTest_MultiThreaded
2018-10-05 14:35:03,140 [main] INFO  TrackingEventProcessor          - Shutdown state set for Processor 'test'. Awaiting termination...
2018-10-05 14:35:03,158 [EventProcessor[test]-0] INFO  TrackingEventProcessor          - Dispatching new tracking segment worker: TrackingSegmentWorker{processor=test, segment=Segment[0/1]}
2018-10-05 14:35:03,167 [EventProcessor[test]-0] INFO  TrackingEventProcessor          - Using current Thread for last segment worker: TrackingSegmentWorker{processor=test, segment=Segment[1/1]}
2018-10-05 14:35:03,168 [EventProcessor[test]-0] INFO  TrackingEventProcessor          - Fetched token: IndexTrackingToken{globalIndex=2} for segment: Segment[1/1]
2018-10-05 14:35:03,168 [EventProcessor[test]-1] INFO  TrackingEventProcessor          - Fetched token: IndexTrackingToken{globalIndex=1} for segment: Segment[0/1]
2018-10-05 14:35:03,170 [main] INFO  TrackingEventProcessor          - Shutdown state set for Processor 'test'. Awaiting termination...
2018-10-05 14:35:04,191 [EventProcessor[test]-0] INFO  TrackingEventProcessor          - Dispatching new tracking segment worker: TrackingSegmentWorker{processor=test, segment=Segment[0/0]}
2018-10-05 14:35:04,196 [EventProcessor[test]-1] INFO  TrackingEventProcessor          - Fetched token: IndexTrackingToken{globalIndex=0} for segment: Segment[0/0]
2018-10-05 14:35:04,219 [main] INFO  TrackingEventProcessor          - Shutdown state set for Processor 'test'. Awaiting termination...
2018-10-05 14:35:05,219 [EventProcessor[test]-0] INFO  TrackingEventProcessor          - Dispatching new tracking segment worker: TrackingSegmentWorker{processor=test, segment=Segment[0/1]}
2018-10-05 14:35:05,223 [EventProcessor[test]-0] INFO  TrackingEventProcessor          - Using current Thread for last segment worker: TrackingSegmentWorker{processor=test, segment=Segment[1/1]}
2018-10-05 14:35:05,224 [EventProcessor[test]-0] INFO  TrackingEventProcessor          - Fetched token: IndexTrackingToken{globalIndex=-1} for segment: Segment[1/1]
2018-10-05 14:35:05,229 [EventProcessor[test]-1] INFO  TrackingEventProcessor          - Fetched token: IndexTrackingToken{globalIndex=-1} for segment: Segment[0/1]
2018-10-05 14:35:05,236 [main] INFO  TrackingEventProcessor          - Shutdown state set for Processor 'test'. Awaiting termination...
2018-10-05 14:35:06,242 [EventProcessor[test]-0] INFO  TrackingEventProcessor          - Dispatching new tracking segment worker: TrackingSegmentWorker{processor=test, segment=Segment[0/1]}
2018-10-05 14:35:06,246 [EventProcessor[test]-0] INFO  TrackingEventProcessor          - Using current Thread for last segment worker: TrackingSegmentWorker{processor=test, segment=Segment[1/1]}
2018-10-05 14:35:06,246 [EventProcessor[test]-0] INFO  TrackingEventProcessor          - Fetched token: IndexTrackingToken{globalIndex=-1} for segment: Segment[1/1]
2018-10-05 14:35:06,250 [EventProcessor[test]-1] INFO  TrackingEventProcessor          - Fetched token: IndexTrackingToken{globalIndex=-1} for segment: Segment[0/1]
2018-10-05 14:35:06,260 [main] INFO  TrackingEventProcessor          - Shutdown state set for Processor 'test'. Awaiting termination...
2018-10-05 14:35:07,269 [EventProcessor[test]-0] INFO  TrackingEventProcessor          - Using current Thread for last segment worker: TrackingSegmentWorker{processor=test, segment=Segment[0/1]}
2018-10-05 14:35:07,271 [EventProcessor[test]-0] INFO  TrackingEventProcessor          - Fetched token: IndexTrackingToken{globalIndex=1} for segment: Segment[0/1]
2018-10-05 14:35:07,464 [main] INFO  TrackingEventProcessor          - Shutdown state set for Processor 'test'. Awaiting termination...
2018-10-05 14:35:08,278 [EventProcessor[test]-0] INFO  TrackingEventProcessor          - Dispatching new tracking segment worker: TrackingSegmentWorker{processor=test, segment=Segment[0/3]}
2018-10-05 14:35:08,280 [EventProcessor[test]-0] INFO  TrackingEventProcessor          - Using current Thread for last segment worker: TrackingSegmentWorker{processor=test, segment=Segment[1/1]}
2018-10-05 14:35:08,281 [EventProcessor[test]-0] INFO  TrackingEventProcessor          - Fetched token: IndexTrackingToken{globalIndex=-1} for segment: Segment[1/1]
2018-10-05 14:35:08,288 [EventProcessor[test]-1] INFO  TrackingEventProcessor          - Fetched token: IndexTrackingToken{globalIndex=-1} for segment: Segment[0/3]
2018-10-05 14:35:08,292 [main] INFO  TrackingEventProcessor          - Shutdown state set for Processor 'test'. Awaiting termination...
2018-10-05 14:35:08,298 [EventProcessor[test]-0] INFO  TrackingEventProcessor          - Dispatching new tracking segment worker: TrackingSegmentWorker{processor=test, segment=Segment[0/3]}
2018-10-05 14:35:08,301 [EventProcessor[test]-0] INFO  TrackingEventProcessor          - Using current Thread for last segment worker: TrackingSegmentWorker{processor=test, segment=Segment[1/1]}
2018-10-05 14:35:08,301 [EventProcessor[test]-0] INFO  TrackingEventProcessor          - Fetched token: IndexTrackingToken{globalIndex=2} for segment: Segment[1/1]
2018-10-05 14:35:08,301 [EventProcessor[test]-1] INFO  TrackingEventProcessor          - Fetched token: IndexTrackingToken{globalIndex=1} for segment: Segment[0/3]
2018-10-05 14:35:09,302 [EventProcessor[test]-1] INFO  TrackingEventProcessor          - No Worker Launcher active. Using current thread to assign segments.
2018-10-05 14:35:09,303 [EventProcessor[test]-1] INFO  TrackingEventProcessor          - Using current Thread for last segment worker: TrackingSegmentWorker{processor=test, segment=Segment[2/3]}
2018-10-05 14:35:09,303 [EventProcessor[test]-1] INFO  TrackingEventProcessor          - Fetched token: IndexTrackingToken{globalIndex=2} for segment: Segment[2/3]
2018-10-05 14:35:09,303 [main] INFO  TrackingEventProcessor          - Shutdown state set for Processor 'test'. Awaiting termination...
2018-10-05 14:35:10,306 [EventProcessor[test]-0] INFO  TrackingEventProcessor          - Dispatching new tracking segment worker: TrackingSegmentWorker{processor=test, segment=Segment[0/3]}
2018-10-05 14:35:10,308 [EventProcessor[test]-0] INFO  TrackingEventProcessor          - Using current Thread for last segment worker: TrackingSegmentWorker{processor=test, segment=Segment[1/3]}
2018-10-05 14:35:10,309 [EventProcessor[test]-0] INFO  TrackingEventProcessor          - Fetched token: null for segment: Segment[1/3]
2018-10-05 14:35:10,312 [EventProcessor[test]-1] INFO  TrackingEventProcessor          - Fetched token: null for segment: Segment[0/3]
2018-10-05 14:35:10,505 [main] INFO  TrackingEventProcessor          - Shutdown state set for Processor 'test'. Awaiting termination...
2018-10-05 14:35:11,385 [EventProcessor[test]-0] INFO  TrackingEventProcessor          - Using current Thread for last segment worker: TrackingSegmentWorker{processor=test, segment=Segment[0/0]}
2018-10-05 14:35:11,385 [EventProcessor[test]-0] INFO  TrackingEventProcessor          - Fetched token: IndexTrackingToken{globalIndex=-1} for segment: Segment[0/0]
2018-10-05 14:35:11,387 [EventProcessor[test]-0] WARN  TrackingEventProcessor          - Error occurred. Starting retry mode.
org.axonframework.common.MockException: Mock
2018-10-05 14:35:11,388 [EventProcessor[test]-0] WARN  TrackingEventProcessor          - Releasing claim on token and preparing for retry in 1s
2018-10-05 14:35:12,389 [EventProcessor[test]-0] INFO  TrackingEventProcessor          - Fetched token: IndexTrackingToken{globalIndex=-1} for segment: Segment[0/0]
2018-10-05 14:35:12,395 [main] INFO  TrackingEventProcessor          - Shutdown state set for Processor 'test'. Awaiting termination...
2018-10-05 14:35:13,403 [EventProcessor[test]-0] INFO  TrackingEventProcessor          - Dispatching new tracking segment worker: TrackingSegmentWorker{processor=test, segment=Segment[0/1]}
2018-10-05 14:35:13,406 [EventProcessor[test]-0] INFO  TrackingEventProcessor          - Using current Thread for last segment worker: TrackingSegmentWorker{processor=test, segment=Segment[1/1]}
2018-10-05 14:35:13,406 [EventProcessor[test]-0] INFO  TrackingEventProcessor          - Fetched token: IndexTrackingToken{globalIndex=-1} for segment: Segment[1/1]
2018-10-05 14:35:13,410 [EventProcessor[test]-1] INFO  TrackingEventProcessor          - Fetched token: IndexTrackingToken{globalIndex=-1} for segment: Segment[0/1]
2018-10-05 14:35:13,417 [Time-limited test] INFO  TrackingEventProcessor          - Shutdown state set for Processor 'test'. Awaiting termination...
2018-10-05 14:35:14,426 [EventProcessor[test]-2] INFO  TrackingEventProcessor          - Dispatching new tracking segment worker: TrackingSegmentWorker{processor=test, segment=Segment[0/1]}
2018-10-05 14:35:14,426 [EventProcessor[test]-2] INFO  TrackingEventProcessor          - Using current Thread for last segment worker: TrackingSegmentWorker{processor=test, segment=Segment[1/1]}
2018-10-05 14:35:14,426 [EventProcessor[test]-2] INFO  TrackingEventProcessor          - Fetched token: IndexTrackingToken{globalIndex=1} for segment: Segment[1/1]
2018-10-05 14:35:14,426 [EventProcessor[test]-3] INFO  TrackingEventProcessor          - Fetched token: IndexTrackingToken{globalIndex=1} for segment: Segment[0/1]
2018-10-05 14:35:14,432 [main] INFO  TrackingEventProcessor          - Shutdown state set for Processor 'test'. Awaiting termination...
2018-10-05 14:35:15,434 [EventProcessor[test]-0] INFO  TrackingEventProcessor          - Dispatching new tracking segment worker: TrackingSegmentWorker{processor=test, segment=Segment[0/1]}
2018-10-05 14:35:15,436 [EventProcessor[test]-0] INFO  TrackingEventProcessor          - Using current Thread for last segment worker: TrackingSegmentWorker{processor=test, segment=Segment[1/1]}
2018-10-05 14:35:15,436 [EventProcessor[test]-0] INFO  TrackingEventProcessor          - Fetched token: null for segment: Segment[1/1]
2018-10-05 14:35:15,440 [EventProcessor[test]-1] INFO  TrackingEventProcessor          - Fetched token: null for segment: Segment[0/1]
2018-10-05 14:35:15,441 [main] INFO  TrackingEventProcessor          - Shutdown state set for Processor 'test'. Awaiting termination...
2018-10-05 14:35:16,445 [EventProcessor[test]-0] INFO  TrackingEventProcessor          - Dispatching new tracking segment worker: TrackingSegmentWorker{processor=test, segment=Segment[0/7]}
2018-10-05 14:35:16,447 [EventProcessor[test]-0] INFO  TrackingEventProcessor          - Dispatching new tracking segment worker: TrackingSegmentWorker{processor=test, segment=Segment[1/7]}
2018-10-05 14:35:16,447 [EventProcessor[test]-0] INFO  TrackingEventProcessor          - Dispatching new tracking segment worker: TrackingSegmentWorker{processor=test, segment=Segment[2/3]}
2018-10-05 14:35:16,451 [EventProcessor[test]-1] INFO  TrackingEventProcessor          - Fetched token: null for segment: Segment[0/7]
2018-10-05 14:35:16,452 [EventProcessor[test]-0] INFO  TrackingEventProcessor          - Dispatching new tracking segment worker: TrackingSegmentWorker{processor=test, segment=Segment[3/3]}
2018-10-05 14:35:16,452 [EventProcessor[test]-2] INFO  TrackingEventProcessor          - Fetched token: null for segment: Segment[1/7]
2018-10-05 14:35:16,452 [EventProcessor[test]-3] INFO  TrackingEventProcessor          - Fetched token: null for segment: Segment[2/3]
2018-10-05 14:35:16,453 [EventProcessor[test]-0] INFO  TrackingEventProcessor          - Dispatching new tracking segment worker: TrackingSegmentWorker{processor=test, segment=Segment[4/7]}
2018-10-05 14:35:16,453 [EventProcessor[test]-0] INFO  TrackingEventProcessor          - Using current Thread for last segment worker: TrackingSegmentWorker{processor=test, segment=Segment[5/7]}
2018-10-05 14:35:16,453 [main] INFO  TrackingEventProcessor          - Shutdown state set for Processor 'test'. Awaiting termination...
2018-10-05 14:35:16,453 [EventProcessor[test]-0] INFO  TrackingEventProcessor          - Fetched token: null for segment: Segment[5/7]
2018-10-05 14:35:16,453 [EventProcessor[test]-5] INFO  TrackingEventProcessor          - Fetched token: null for segment: Segment[4/7]
2018-10-05 14:35:16,454 [EventProcessor[test]-4] INFO  TrackingEventProcessor          - Fetched token: null for segment: Segment[3/3]
2018-10-05 14:35:17,457 [EventProcessor[test]-0] INFO  TrackingEventProcessor          - Dispatching new tracking segment worker: TrackingSegmentWorker{processor=test, segment=Segment[0/1]}
2018-10-05 14:35:17,459 [EventProcessor[test]-0] INFO  TrackingEventProcessor          - Using current Thread for last segment worker: TrackingSegmentWorker{processor=test, segment=Segment[1/1]}
2018-10-05 14:35:17,460 [EventProcessor[test]-0] INFO  TrackingEventProcessor          - Fetched token: IndexTrackingToken{globalIndex=-1} for segment: Segment[1/1]
2018-10-05 14:35:17,460 [EventProcessor[test]-1] INFO  TrackingEventProcessor          - Fetched token: IndexTrackingToken{globalIndex=-1} for segment: Segment[0/1]
2018-10-05 14:35:17,464 [main] INFO  TrackingEventProcessor          - Shutdown state set for Processor 'test'. Awaiting termination...
2018-10-05 14:35:18,466 [EventProcessor[test]-0] INFO  TrackingEventProcessor          - Dispatching new tracking segment worker: TrackingSegmentWorker{processor=test, segment=Segment[0/1]}
2018-10-05 14:35:18,469 [EventProcessor[test]-0] INFO  TrackingEventProcessor          - Using current Thread for last segment worker: TrackingSegmentWorker{processor=test, segment=Segment[1/1]}
2018-10-05 14:35:18,469 [EventProcessor[test]-0] INFO  TrackingEventProcessor          - Fetched token: IndexTrackingToken{globalIndex=2} for segment: Segment[1/1]
2018-10-05 14:35:18,469 [EventProcessor[test]-1] INFO  TrackingEventProcessor          - Fetched token: IndexTrackingToken{globalIndex=1} for segment: Segment[0/1]
2018-10-05 14:35:18,687 [main] INFO  TrackingEventProcessor          - Shutdown state set for Processor 'test'. Awaiting termination...
Tests run: 15, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 16.778 sec - in org.axonframework.eventhandling.TrackingEventProcessorTest_MultiThreaded
Running org.axonframework.eventhandling.SimpleEventHandlerInvokerTest
Tests run: 2, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.004 sec - in org.axonframework.eventhandling.SimpleEventHandlerInvokerTest
Running org.axonframework.eventhandling.ReplayTokenTest
Tests run: 3, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.031 sec - in org.axonframework.eventhandling.ReplayTokenTest
Running org.axonframework.eventhandling.TrackingEventProcessorTest
2018-10-05 14:35:19,741 [EventProcessor[test]-0] INFO  TrackingEventProcessor          - Using current Thread for last segment worker: TrackingSegmentWorker{processor=test, segment=Segment[0/0]}
2018-10-05 14:35:19,741 [main] INFO  TrackingEventProcessor          - Shutdown state set for Processor 'test'. Awaiting termination...
2018-10-05 14:35:19,741 [EventProcessor[test]-0] INFO  TrackingEventProcessor          - Fetched token: null for segment: Segment[0/0]
2018-10-05 14:35:20,747 [EventProcessor[test]-0] INFO  TrackingEventProcessor          - Using current Thread for last segment worker: TrackingSegmentWorker{processor=test, segment=Segment[0/0]}
2018-10-05 14:35:20,748 [EventProcessor[test]-0] INFO  TrackingEventProcessor          - Fetched token: IndexTrackingToken{globalIndex=-1} for segment: Segment[0/0]
2018-10-05 14:35:20,751 [main] INFO  TrackingEventProcessor          - Shutdown state set for Processor 'test'. Awaiting termination...
2018-10-05 14:35:20,758 [EventProcessor[test]-1] INFO  TrackingEventProcessor          - Using current Thread for last segment worker: TrackingSegmentWorker{processor=test, segment=Segment[0/0]}
2018-10-05 14:35:20,760 [EventProcessor[test]-1] INFO  TrackingEventProcessor          - Fetched token: ReplayToken{currentToken=IndexTrackingToken{globalIndex=1}, tokenAtReset=IndexTrackingToken{globalIndex=3}} for segment: Segment[0/0]
2018-10-05 14:35:20,771 [main] INFO  TrackingEventProcessor          - Shutdown state set for Processor 'test'. Awaiting termination...
2018-10-05 14:35:21,776 [EventProcessor[test]-0] INFO  TrackingEventProcessor          - An error occurred while attempting to claim a token for segment: 0. Will retry later...
java.lang.RuntimeException: Faking a recoverable issue
	at org.axonframework.eventhandling.TrackingEventProcessor$WorkerLauncher.lambda$run$1(TrackingEventProcessor.java:760)
	at org.axonframework.eventhandling.TrackingEventProcessorTest.lambda$setUp$1(TrackingEventProcessorTest.java:127)
	at org.axonframework.eventhandling.TrackingEventProcessor$WorkerLauncher.run(TrackingEventProcessor.java:759)
	at org.axonframework.eventhandling.TrackingEventProcessor$CountingRunnable.run(TrackingEventProcessor.java:623)
	at java.lang.Thread.run(Thread.java:745)
2018-10-05 14:35:21,777 [EventProcessor[test]-0] INFO  TrackingEventProcessor          - Using current Thread for last segment worker: TrackingSegmentWorker{processor=test, segment=Segment[0/0]}
2018-10-05 14:35:21,778 [EventProcessor[test]-0] INFO  TrackingEventProcessor          - Fetched token: null for segment: Segment[0/0]
2018-10-05 14:35:21,975 [main] INFO  TrackingEventProcessor          - Shutdown state set for Processor 'test'. Awaiting termination...
2018-10-05 14:35:22,981 [EventProcessor[test]-0] INFO  TrackingEventProcessor          - Using current Thread for last segment worker: TrackingSegmentWorker{processor=test, segment=Segment[0/0]}
2018-10-05 14:35:22,981 [EventProcessor[test]-0] INFO  TrackingEventProcessor          - Fetched token: IndexTrackingToken{globalIndex=-1} for segment: Segment[0/0]
2018-10-05 14:35:22,983 [main] INFO  TrackingEventProcessor          - Shutdown state set for Processor 'test'. Awaiting termination...
2018-10-05 14:35:22,989 [EventProcessor[test]-1] INFO  TrackingEventProcessor          - Using current Thread for last segment worker: TrackingSegmentWorker{processor=test, segment=Segment[0/0]}
2018-10-05 14:35:22,989 [EventProcessor[test]-1] INFO  TrackingEventProcessor          - Fetched token: ReplayToken{currentToken=IndexTrackingToken{globalIndex=-1}, tokenAtReset=IndexTrackingToken{globalIndex=3}} for segment: Segment[0/0]
2018-10-05 14:35:22,992 [main] INFO  TrackingEventProcessor          - Shutdown state set for Processor 'test'. Awaiting termination...
2018-10-05 14:35:23,999 [EventProcessor[test]-0] WARN  TrackingEventProcessor          - Fetch Segments for Processor 'test' failed: Faking issue during fetchSegments. Preparing for retry in 1s
2018-10-05 14:35:24,000 [EventProcessor[test]-0] WARN  TrackingEventProcessor          - Fetch Segments for Processor 'test' failed: Could not initialize segments. Some segments were already present.. Preparing for retry in 1s
2018-10-05 14:35:24,000 [EventProcessor[test]-0] INFO  TrackingEventProcessor          - Using current Thread for last segment worker: TrackingSegmentWorker{processor=test, segment=Segment[0/0]}
2018-10-05 14:35:24,000 [EventProcessor[test]-0] INFO  TrackingEventProcessor          - Fetched token: null for segment: Segment[0/0]
2018-10-05 14:35:26,497 [main] INFO  TrackingEventProcessor          - Shutdown state set for Processor 'test'. Awaiting termination...
2018-10-05 14:35:27,007 [EventProcessor[test]-0] INFO  TrackingEventProcessor          - Using current Thread for last segment worker: TrackingSegmentWorker{processor=test, segment=Segment[0/0]}
2018-10-05 14:35:27,007 [EventProcessor[test]-0] INFO  TrackingEventProcessor          - Fetched token: null for segment: Segment[0/0]
2018-10-05 14:35:27,209 [main] INFO  TrackingEventProcessor          - Shutdown state set for Processor 'test'. Awaiting termination...
2018-10-05 14:35:28,214 [EventProcessor[test]-0] INFO  TrackingEventProcessor          - Using current Thread for last segment worker: TrackingSegmentWorker{processor=test, segment=Segment[0/0]}
2018-10-05 14:35:28,214 [EventProcessor[test]-0] INFO  TrackingEventProcessor          - Fetched token: null for segment: Segment[0/0]
2018-10-05 14:35:28,416 [main] INFO  TrackingEventProcessor          - Shutdown state set for Processor 'test'. Awaiting termination...
2018-10-05 14:35:28,416 [EventProcessor[test]-0] WARN  TrackingEventProcessor          - Error occurred. Starting retry mode.
org.axonframework.common.MockException: Mock
2018-10-05 14:35:28,416 [EventProcessor[test]-0] WARN  TrackingEventProcessor          - Releasing claim on token and preparing for retry in 1s
2018-10-05 14:35:28,423 [EventProcessor[test]-0] INFO  TrackingEventProcessor          - Using current Thread for last segment worker: TrackingSegmentWorker{processor=test, segment=Segment[0/0]}
2018-10-05 14:35:28,423 [EventProcessor[test]-0] INFO  TrackingEventProcessor          - Fetched token: null for segment: Segment[0/0]
2018-10-05 14:35:28,424 [EventProcessor[test]-0] WARN  TrackingEventProcessor          - Error occurred. Starting retry mode.
org.axonframework.common.MockException: Mock
2018-10-05 14:35:28,424 [EventProcessor[test]-0] WARN  TrackingEventProcessor          - Releasing claim on token and preparing for retry in 1s
2018-10-05 14:35:28,622 [main] INFO  TrackingEventProcessor          - Shutdown state set for Processor 'test'. Awaiting termination...
2018-10-05 14:35:28,630 [EventProcessor[test]-0] INFO  TrackingEventProcessor          - Using current Thread for last segment worker: TrackingSegmentWorker{processor=test, segment=Segment[0/0]}
2018-10-05 14:35:28,630 [EventProcessor[test]-0] INFO  TrackingEventProcessor          - Fetched token: IndexTrackingToken{globalIndex=0} for segment: Segment[0/0]
2018-10-05 14:35:28,829 [main] INFO  TrackingEventProcessor          - Shutdown state set for Processor 'test'. Awaiting termination...
2018-10-05 14:35:29,640 [EventProcessor[test]-0] INFO  TrackingEventProcessor          - Using current Thread for last segment worker: TrackingSegmentWorker{processor=test, segment=Segment[0/0]}
2018-10-05 14:35:29,640 [EventProcessor[test]-0] INFO  TrackingEventProcessor          - Fetched token: null for segment: Segment[0/0]
2018-10-05 14:35:29,841 [main] INFO  TrackingEventProcessor          - Shutdown state set for Processor 'test'. Awaiting termination...
2018-10-05 14:35:30,847 [EventProcessor[test]-0] INFO  TrackingEventProcessor          - Using current Thread for last segment worker: TrackingSegmentWorker{processor=test, segment=Segment[0/0]}
2018-10-05 14:35:30,848 [EventProcessor[test]-0] INFO  TrackingEventProcessor          - Fetched token: null for segment: Segment[0/0]
2018-10-05 14:35:31,048 [main] INFO  TrackingEventProcessor          - Shutdown state set for Processor 'test'. Awaiting termination...
2018-10-05 14:35:32,054 [main] INFO  TrackingEventProcessor          - Shutdown state set for Processor 'test'. Awaiting termination...
2018-10-05 14:35:32,059 [EventProcessor[test]-1] INFO  TrackingEventProcessor          - Using current Thread for last segment worker: TrackingSegmentWorker{processor=test, segment=Segment[0/0]}
2018-10-05 14:35:32,060 [EventProcessor[test]-1] INFO  TrackingEventProcessor          - Fetched token: IndexTrackingToken{globalIndex=-1} for segment: Segment[0/0]
2018-10-05 14:35:32,062 [main] INFO  TrackingEventProcessor          - Shutdown state set for Processor 'test'. Awaiting termination...
2018-10-05 14:35:32,067 [EventProcessor[test]-0] ERROR TrackingEventProcessor          - An unrecoverable error has occurred wile attempting to claim a token for segment: 0. Shutting down processor [test].
org.axonframework.serialization.SerializationException: Faking a serialization issue
	at org.axonframework.eventhandling.TrackingEventProcessor$WorkerLauncher.lambda$run$1(TrackingEventProcessor.java:760)
	at org.axonframework.eventhandling.TrackingEventProcessorTest.lambda$setUp$1(TrackingEventProcessorTest.java:127)
	at org.axonframework.eventhandling.TrackingEventProcessor$WorkerLauncher.run(TrackingEventProcessor.java:759)
	at org.axonframework.eventhandling.TrackingEventProcessor$CountingRunnable.run(TrackingEventProcessor.java:623)
	at java.lang.Thread.run(Thread.java:745)
2018-10-05 14:35:32,075 [EventProcessor[test]-0] INFO  TrackingEventProcessor          - Using current Thread for last segment worker: TrackingSegmentWorker{processor=test, segment=Segment[0/0]}
2018-10-05 14:35:32,075 [EventProcessor[test]-0] INFO  TrackingEventProcessor          - Fetched token: null for segment: Segment[0/0]
2018-10-05 14:35:32,276 [main] INFO  TrackingEventProcessor          - Shutdown state set for Processor 'test'. Awaiting termination...
2018-10-05 14:35:33,310 [EventProcessor[test]-0] INFO  TrackingEventProcessor          - Using current Thread for last segment worker: TrackingSegmentWorker{processor=test, segment=Segment[0/0]}
2018-10-05 14:35:33,311 [EventProcessor[test]-0] INFO  TrackingEventProcessor          - Fetched token: null for segment: Segment[0/0]
2018-10-05 14:35:33,312 [main] INFO  TrackingEventProcessor          - Shutdown state set for Processor 'test'. Awaiting termination...
2018-10-05 14:35:33,316 [EventProcessor[test]-1] INFO  TrackingEventProcessor          - Using current Thread for last segment worker: TrackingSegmentWorker{processor=test, segment=Segment[0/0]}
2018-10-05 14:35:33,317 [EventProcessor[test]-1] INFO  TrackingEventProcessor          - Fetched token: ReplayToken{currentToken=null, tokenAtReset=GapAwareTrackingToken{index=5, gaps=[3, 4]}} for segment: Segment[0/0]
2018-10-05 14:35:33,320 [main] INFO  TrackingEventProcessor          - Shutdown state set for Processor 'test'. Awaiting termination...
2018-10-05 14:35:33,324 [EventProcessor[test]-0] INFO  TrackingEventProcessor          - Using current Thread for last segment worker: TrackingSegmentWorker{processor=test, segment=Segment[0/0]}
2018-10-05 14:35:33,324 [EventProcessor[test]-0] INFO  TrackingEventProcessor          - Fetched token: IndexTrackingToken{globalIndex=-1} for segment: Segment[0/0]
2018-10-05 14:35:33,326 [EventProcessor[test]-0] WARN  TrackingEventProcessor          - Error occurred. Starting retry mode.
org.axonframework.common.MockException: Mock
2018-10-05 14:35:33,326 [EventProcessor[test]-0] WARN  TrackingEventProcessor          - Releasing claim on token and preparing for retry in 1s
2018-10-05 14:35:34,326 [EventProcessor[test]-0] INFO  TrackingEventProcessor          - Fetched token: IndexTrackingToken{globalIndex=-1} for segment: Segment[0/0]
2018-10-05 14:35:34,329 [main] INFO  TrackingEventProcessor          - Shutdown state set for Processor 'test'. Awaiting termination...
2018-10-05 14:35:35,333 [EventProcessor[test]-0] INFO  TrackingEventProcessor          - Using current Thread for last segment worker: TrackingSegmentWorker{processor=test, segment=Segment[0/0]}
2018-10-05 14:35:35,333 [EventProcessor[test]-0] INFO  TrackingEventProcessor          - No Worker Launcher active. Using current thread to assign segments.
2018-10-05 14:35:45,334 [main] INFO  TrackingEventProcessor          - Shutdown state set for Processor 'test'. Awaiting termination...
2018-10-05 14:35:45,334 [EventProcessor[test]-0] INFO  TrackingEventProcessor          - Using current Thread for last segment worker: TrackingSegmentWorker{processor=test, segment=Segment[0/0]}
2018-10-05 14:35:45,339 [EventProcessor[test]-0] INFO  TrackingEventProcessor          - Using current Thread for last segment worker: TrackingSegmentWorker{processor=test, segment=Segment[0/0]}
2018-10-05 14:35:45,339 [EventProcessor[test]-0] INFO  TrackingEventProcessor          - Fetched token: null for segment: Segment[0/0]
2018-10-05 14:35:45,540 [main] INFO  TrackingEventProcessor          - Shutdown state set for Processor 'test'. Awaiting termination...
2018-10-05 14:35:46,546 [EventProcessor[test]-0] INFO  TrackingEventProcessor          - Using current Thread for last segment worker: TrackingSegmentWorker{processor=test, segment=Segment[0/0]}
2018-10-05 14:35:46,546 [EventProcessor[test]-0] INFO  TrackingEventProcessor          - Fetched token: IndexTrackingToken{globalIndex=1} for segment: Segment[0/0]
2018-10-05 14:35:46,548 [main] INFO  TrackingEventProcessor          - Shutdown state set for Processor 'test'. Awaiting termination...
2018-10-05 14:35:46,551 [EventProcessor[test]-1] INFO  TrackingEventProcessor          - Using current Thread for last segment worker: TrackingSegmentWorker{processor=test, segment=Segment[0/0]}
2018-10-05 14:35:46,551 [EventProcessor[test]-1] INFO  TrackingEventProcessor          - Fetched token: ReplayToken{currentToken=IndexTrackingToken{globalIndex=1}, tokenAtReset=IndexTrackingToken{globalIndex=3}} for segment: Segment[0/0]
2018-10-05 14:35:46,554 [main] INFO  TrackingEventProcessor          - Shutdown state set for Processor 'test'. Awaiting termination...
2018-10-05 14:35:47,558 [EventProcessor[test]-0] INFO  TrackingEventProcessor          - Using current Thread for last segment worker: TrackingSegmentWorker{processor=test, segment=Segment[0/0]}
2018-10-05 14:35:47,559 [EventProcessor[test]-0] INFO  TrackingEventProcessor          - Fetched token: null for segment: Segment[0/0]
2018-10-05 14:35:47,759 [Time-limited test] INFO  TrackingEventProcessor          - Shutdown state set for Processor 'test'. Awaiting termination...
2018-10-05 14:35:48,763 [EventProcessor[test]-1] INFO  TrackingEventProcessor          - Using current Thread for last segment worker: TrackingSegmentWorker{processor=test, segment=Segment[0/0]}
2018-10-05 14:35:48,764 [EventProcessor[test]-1] INFO  TrackingEventProcessor          - Fetched token: IndexTrackingToken{globalIndex=1} for segment: Segment[0/0]
2018-10-05 14:35:49,765 [main] INFO  TrackingEventProcessor          - Shutdown state set for Processor 'test'. Awaiting termination...
2018-10-05 14:35:50,767 [EventProcessor[test]-0] INFO  TrackingEventProcessor          - Using current Thread for last segment worker: TrackingSegmentWorker{processor=test, segment=Segment[0/0]}
2018-10-05 14:35:50,768 [EventProcessor[test]-0] INFO  TrackingEventProcessor          - No Worker Launcher active. Using current thread to assign segments.
2018-10-05 14:35:50,768 [main] INFO  TrackingEventProcessor          - Shutdown state set for Processor 'test'. Awaiting termination...
Tests run: 24, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 31.06 sec - in org.axonframework.eventhandling.TrackingEventProcessorTest
Running org.axonframework.eventhandling.replay.ReplayParameterResolverFactoryTest
Tests run: 1, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.001 sec - in org.axonframework.eventhandling.replay.ReplayParameterResolverFactoryTest
Running org.axonframework.eventhandling.replay.ReplayAwareMessageHandlerWrapperTest
Tests run: 1, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.003 sec - in org.axonframework.eventhandling.replay.ReplayAwareMessageHandlerWrapperTest
Running org.axonframework.eventhandling.AnnotatedParameterResolverFactoryTest
Tests run: 3, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.002 sec - in org.axonframework.eventhandling.AnnotatedParameterResolverFactoryTest
Running org.axonframework.eventhandling.ConcludesBatchParameterResolverFactoryTest
Tests run: 6, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.004 sec - in org.axonframework.eventhandling.ConcludesBatchParameterResolverFactoryTest
Running org.axonframework.eventhandling.scheduling.java.SimpleEventSchedulerTest
Tests run: 3, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.188 sec - in org.axonframework.eventhandling.scheduling.java.SimpleEventSchedulerTest
Running org.axonframework.eventhandling.scheduling.ScheduleTokenJacksonSerializationTest
Tests run: 2, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.004 sec - in org.axonframework.eventhandling.scheduling.ScheduleTokenJacksonSerializationTest
Running org.axonframework.eventhandling.scheduling.quartz.QuartzEventSchedulerTest
2018-10-05 14:35:51,018 [main] INFO  StdSchedulerFactory             - Using default implementation for ThreadExecutor
2018-10-05 14:35:51,021 [main] INFO  SimpleThreadPool                - Job execution threads will use class loader of thread: main
2018-10-05 14:35:51,034 [main] INFO  SchedulerSignalerImpl           - Initialized Scheduler Signaller of type: class org.quartz.core.SchedulerSignalerImpl
2018-10-05 14:35:51,035 [main] INFO  QuartzScheduler                 - Quartz Scheduler v.2.2.1 created.
2018-10-05 14:35:51,036 [main] INFO  RAMJobStore                     - RAMJobStore initialized.
2018-10-05 14:35:51,037 [main] INFO  QuartzScheduler                 - Scheduler meta-data: Quartz Scheduler (v2.2.1) 'DefaultQuartzScheduler' with instanceId 'NON_CLUSTERED'
  Scheduler class: 'org.quartz.core.QuartzScheduler' - running locally.
  NOT STARTED.
  Currently in standby mode.
  Number of jobs executed: 0
  Using thread pool 'org.quartz.simpl.SimpleThreadPool' - with 10 threads.
  Using job-store 'org.quartz.simpl.RAMJobStore' - which does not support persistence. and is not clustered.

2018-10-05 14:35:51,037 [main] INFO  StdSchedulerFactory             - Quartz scheduler 'DefaultQuartzScheduler' initialized from default resource file in Quartz package: 'quartz.properties'
2018-10-05 14:35:51,037 [main] INFO  StdSchedulerFactory             - Quartz scheduler version: 2.2.1
2018-10-05 14:35:51,037 [main] INFO  QuartzScheduler                 - Scheduler DefaultQuartzScheduler_$_NON_CLUSTERED started.
2018-10-05 14:35:51,091 [DefaultQuartzScheduler_Worker-1] INFO  FireEventJob                    - Job successfully executed. Scheduled Event [Object] has been published.
2018-10-05 14:35:51,093 [main] INFO  QuartzScheduler                 - Scheduler DefaultQuartzScheduler_$_NON_CLUSTERED shutting down.
2018-10-05 14:35:51,095 [main] INFO  QuartzScheduler                 - Scheduler DefaultQuartzScheduler_$_NON_CLUSTERED paused.
2018-10-05 14:35:51,596 [main] INFO  QuartzScheduler                 - Scheduler DefaultQuartzScheduler_$_NON_CLUSTERED shutdown complete.
2018-10-05 14:35:51,604 [main] INFO  StdSchedulerFactory             - Using default implementation for ThreadExecutor
2018-10-05 14:35:51,604 [main] INFO  SimpleThreadPool                - Job execution threads will use class loader of thread: main
2018-10-05 14:35:51,606 [main] INFO  SchedulerSignalerImpl           - Initialized Scheduler Signaller of type: class org.quartz.core.SchedulerSignalerImpl
2018-10-05 14:35:51,607 [main] INFO  QuartzScheduler                 - Quartz Scheduler v.2.2.1 created.
2018-10-05 14:35:51,607 [main] INFO  RAMJobStore                     - RAMJobStore initialized.
2018-10-05 14:35:51,607 [main] INFO  QuartzScheduler                 - Scheduler meta-data: Quartz Scheduler (v2.2.1) 'DefaultQuartzScheduler' with instanceId 'NON_CLUSTERED'
  Scheduler class: 'org.quartz.core.QuartzScheduler' - running locally.
  NOT STARTED.
  Currently in standby mode.
  Number of jobs executed: 0
  Using thread pool 'org.quartz.simpl.SimpleThreadPool' - with 10 threads.
  Using job-store 'org.quartz.simpl.RAMJobStore' - which does not support persistence. and is not clustered.

2018-10-05 14:35:51,607 [main] INFO  StdSchedulerFactory             - Quartz scheduler 'DefaultQuartzScheduler' initialized from default resource file in Quartz package: 'quartz.properties'
2018-10-05 14:35:51,607 [main] INFO  StdSchedulerFactory             - Quartz scheduler version: 2.2.1
2018-10-05 14:35:51,607 [main] INFO  QuartzScheduler                 - Scheduler DefaultQuartzScheduler_$_NON_CLUSTERED started.
2018-10-05 14:35:51,652 [DefaultQuartzScheduler_Worker-1] ERROR FireEventJob                    - Exception occurred while publishing scheduled event [java.lang.Object]
org.axonframework.common.MockException: Mock
2018-10-05 14:35:51,656 [DefaultQuartzScheduler_Worker-1] INFO  JobRunShell                     - Job TestGroup.event-a21a0638-7571-4c8e-b032-890d7fb2bedf threw a JobExecutionException: 
org.quartz.JobExecutionException: org.axonframework.common.MockException: Mock [See nested exception: org.axonframework.common.MockException: Mock]
	at org.axonframework.eventhandling.scheduling.quartz.FireEventJob.execute(FireEventJob.java:87)
	at org.quartz.core.JobRunShell.run(JobRunShell.java:202)
	at org.quartz.simpl.SimpleThreadPool$WorkerThread.run(SimpleThreadPool.java:573)
Caused by: org.axonframework.common.MockException: Mock
2018-10-05 14:35:51,657 [main] INFO  QuartzScheduler                 - Scheduler DefaultQuartzScheduler_$_NON_CLUSTERED shutting down.
2018-10-05 14:35:51,657 [main] INFO  QuartzScheduler                 - Scheduler DefaultQuartzScheduler_$_NON_CLUSTERED paused.
2018-10-05 14:35:52,159 [main] INFO  QuartzScheduler                 - Scheduler DefaultQuartzScheduler_$_NON_CLUSTERED shutdown complete.
2018-10-05 14:35:52,166 [main] INFO  StdSchedulerFactory             - Using default implementation for ThreadExecutor
2018-10-05 14:35:52,166 [main] INFO  SimpleThreadPool                - Job execution threads will use class loader of thread: main
2018-10-05 14:35:52,168 [main] INFO  SchedulerSignalerImpl           - Initialized Scheduler Signaller of type: class org.quartz.core.SchedulerSignalerImpl
2018-10-05 14:35:52,168 [main] INFO  QuartzScheduler                 - Quartz Scheduler v.2.2.1 created.
2018-10-05 14:35:52,168 [main] INFO  RAMJobStore                     - RAMJobStore initialized.
2018-10-05 14:35:52,169 [main] INFO  QuartzScheduler                 - Scheduler meta-data: Quartz Scheduler (v2.2.1) 'DefaultQuartzScheduler' with instanceId 'NON_CLUSTERED'
  Scheduler class: 'org.quartz.core.QuartzScheduler' - running locally.
  NOT STARTED.
  Currently in standby mode.
  Number of jobs executed: 0
  Using thread pool 'org.quartz.simpl.SimpleThreadPool' - with 10 threads.
  Using job-store 'org.quartz.simpl.RAMJobStore' - which does not support persistence. and is not clustered.

2018-10-05 14:35:52,169 [main] INFO  StdSchedulerFactory             - Quartz scheduler 'DefaultQuartzScheduler' initialized from default resource file in Quartz package: 'quartz.properties'
2018-10-05 14:35:52,169 [main] INFO  StdSchedulerFactory             - Quartz scheduler version: 2.2.1
2018-10-05 14:35:52,169 [main] INFO  QuartzScheduler                 - Scheduler DefaultQuartzScheduler_$_NON_CLUSTERED started.
2018-10-05 14:35:52,213 [DefaultQuartzScheduler_Worker-1] INFO  FireEventJob                    - Job successfully executed. Scheduled Event [Object] has been published.
2018-10-05 14:35:52,217 [main] INFO  QuartzScheduler                 - Scheduler DefaultQuartzScheduler_$_NON_CLUSTERED shutting down.
2018-10-05 14:35:52,217 [main] INFO  QuartzScheduler                 - Scheduler DefaultQuartzScheduler_$_NON_CLUSTERED paused.
2018-10-05 14:35:52,717 [main] INFO  QuartzScheduler                 - Scheduler DefaultQuartzScheduler_$_NON_CLUSTERED shutdown complete.
2018-10-05 14:35:52,724 [main] INFO  StdSchedulerFactory             - Using default implementation for ThreadExecutor
2018-10-05 14:35:52,724 [main] INFO  SimpleThreadPool                - Job execution threads will use class loader of thread: main
2018-10-05 14:35:52,726 [main] INFO  SchedulerSignalerImpl           - Initialized Scheduler Signaller of type: class org.quartz.core.SchedulerSignalerImpl
2018-10-05 14:35:52,726 [main] INFO  QuartzScheduler                 - Quartz Scheduler v.2.2.1 created.
2018-10-05 14:35:52,726 [main] INFO  RAMJobStore                     - RAMJobStore initialized.
2018-10-05 14:35:52,726 [main] INFO  QuartzScheduler                 - Scheduler meta-data: Quartz Scheduler (v2.2.1) 'DefaultQuartzScheduler' with instanceId 'NON_CLUSTERED'
  Scheduler class: 'org.quartz.core.QuartzScheduler' - running locally.
  NOT STARTED.
  Currently in standby mode.
  Number of jobs executed: 0
  Using thread pool 'org.quartz.simpl.SimpleThreadPool' - with 10 threads.
  Using job-store 'org.quartz.simpl.RAMJobStore' - which does not support persistence. and is not clustered.

2018-10-05 14:35:52,727 [main] INFO  StdSchedulerFactory             - Quartz scheduler 'DefaultQuartzScheduler' initialized from default resource file in Quartz package: 'quartz.properties'
2018-10-05 14:35:52,727 [main] INFO  StdSchedulerFactory             - Quartz scheduler version: 2.2.1
2018-10-05 14:35:52,727 [main] INFO  QuartzScheduler                 - Scheduler DefaultQuartzScheduler_$_NON_CLUSTERED started.
2018-10-05 14:35:52,731 [main] INFO  QuartzScheduler                 - Scheduler DefaultQuartzScheduler_$_NON_CLUSTERED shutting down.
2018-10-05 14:35:52,731 [main] INFO  QuartzScheduler                 - Scheduler DefaultQuartzScheduler_$_NON_CLUSTERED paused.
2018-10-05 14:35:53,232 [main] INFO  QuartzScheduler                 - Scheduler DefaultQuartzScheduler_$_NON_CLUSTERED shutdown complete.
Tests run: 4, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 2.252 sec - in org.axonframework.eventhandling.scheduling.quartz.QuartzEventSchedulerTest
Running org.axonframework.eventhandling.scheduling.quartz.DirectEventJobDataBinderTest
Tests run: 6, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.104 sec - in org.axonframework.eventhandling.scheduling.quartz.DirectEventJobDataBinderTest
Running org.axonframework.eventhandling.SubscribingEventProcessorTest
Tests run: 1, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.001 sec - in org.axonframework.eventhandling.SubscribingEventProcessorTest
Running org.axonframework.eventhandling.SegmentTest
Tests run: 11, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 2.669 sec - in org.axonframework.eventhandling.SegmentTest
Running org.axonframework.eventhandling.DirectEventProcessingStrategyTest
Tests run: 1, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.001 sec - in org.axonframework.eventhandling.DirectEventProcessingStrategyTest
Running org.axonframework.eventhandling.tokenstore.jdbc.JdbcTokenStoreTest
2018-10-05 14:35:56,019 [main] INFO  AbstractContextLoader           - Could not detect default resource locations for test class [org.axonframework.eventhandling.tokenstore.jdbc.JdbcTokenStoreTest]: no resource found for suffixes {-context.xml}.
2018-10-05 14:35:56,021 [main] INFO  ctDelegatingSmartContextLoader  - AnnotationConfigContextLoader detected default configuration classes for context configuration [ContextConfigurationAttributes@4203190 declaringClass = 'org.axonframework.eventhandling.tokenstore.jdbc.JdbcTokenStoreTest', classes = '{class org.axonframework.eventhandling.tokenstore.jdbc.JdbcTokenStoreTest$Context}', locations = '{}', inheritLocations = true, initializers = '{}', inheritInitializers = true, name = [null], contextLoaderClass = 'org.springframework.test.context.ContextLoader'].
2018-10-05 14:35:56,022 [main] INFO  DefaultTestContextBootstrapper  - Loaded default TestExecutionListener class names from location [META-INF/spring.factories]: [org.springframework.test.context.web.ServletTestExecutionListener, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener, org.springframework.test.context.support.DependencyInjectionTestExecutionListener, org.springframework.test.context.support.DirtiesContextTestExecutionListener, org.springframework.test.context.transaction.TransactionalTestExecutionListener, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener]
2018-10-05 14:35:56,023 [main] INFO  DefaultTestContextBootstrapper  - Using TestExecutionListeners: [org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener@72f5fb36, org.springframework.test.context.support.DependencyInjectionTestExecutionListener@300b839c, org.springframework.test.context.support.DirtiesContextTestExecutionListener@352288bc, org.springframework.test.context.transaction.TransactionalTestExecutionListener@33acec5e, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener@6edd8d56]
2018-10-05 14:35:56,034 [main] INFO  GenericApplicationContext       - Refreshing org.springframework.context.support.GenericApplicationContext@2360ebe2: startup date [Fri Oct 05 14:35:56 CEST 2018]; root of context hierarchy
2018-10-05 14:35:56,074 [main] INFO  redAnnotationBeanPostProcessor  - JSR-330 'javax.inject.Inject' annotation found and supported for autowiring
2018-10-05 14:35:56,245 [main] WARN  JdbcTokenStore                  - Releasing claim of token stealing/0 failed. It was owned by another node.
2018-10-05 14:35:56,268 [main] INFO  TransactionContext              - Began transaction (1) for test context [DefaultTestContext@6c7f3af6 testClass = JdbcTokenStoreTest, testInstance = org.axonframework.eventhandling.tokenstore.jdbc.JdbcTokenStoreTest@3285c141, testMethod = testInitializeTokensWhileAlreadyPresent@JdbcTokenStoreTest, testException = [null], mergedContextConfiguration = [MergedContextConfiguration@440d45c5 testClass = JdbcTokenStoreTest, locations = '{}', classes = '{class org.axonframework.eventhandling.tokenstore.jdbc.JdbcTokenStoreTest$Context}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], contextLoader = 'org.springframework.test.context.support.DelegatingSmartContextLoader', parent = [null]], attributes = map[[empty]]]; transaction manager [org.springframework.jdbc.datasource.DataSourceTransactionManager@4414ee28]; rollback [true]
2018-10-05 14:35:56,276 [main] INFO  TransactionContext              - Rolled back transaction for test context [DefaultTestContext@6c7f3af6 testClass = JdbcTokenStoreTest, testInstance = org.axonframework.eventhandling.tokenstore.jdbc.JdbcTokenStoreTest@3285c141, testMethod = testInitializeTokensWhileAlreadyPresent@JdbcTokenStoreTest, testException = [null], mergedContextConfiguration = [MergedContextConfiguration@440d45c5 testClass = JdbcTokenStoreTest, locations = '{}', classes = '{class org.axonframework.eventhandling.tokenstore.jdbc.JdbcTokenStoreTest$Context}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], contextLoader = 'org.springframework.test.context.support.DelegatingSmartContextLoader', parent = [null]], attributes = map[[empty]]].
2018-10-05 14:35:56,283 [main] INFO  TransactionContext              - Began transaction (1) for test context [DefaultTestContext@6c7f3af6 testClass = JdbcTokenStoreTest, testInstance = org.axonframework.eventhandling.tokenstore.jdbc.JdbcTokenStoreTest@69815126, testMethod = testInitializeTokens@JdbcTokenStoreTest, testException = [null], mergedContextConfiguration = [MergedContextConfiguration@440d45c5 testClass = JdbcTokenStoreTest, locations = '{}', classes = '{class org.axonframework.eventhandling.tokenstore.jdbc.JdbcTokenStoreTest$Context}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], contextLoader = 'org.springframework.test.context.support.DelegatingSmartContextLoader', parent = [null]], attributes = map[[empty]]]; transaction manager [org.springframework.jdbc.datasource.DataSourceTransactionManager@4414ee28]; rollback [true]
2018-10-05 14:35:56,291 [main] INFO  TransactionContext              - Rolled back transaction for test context [DefaultTestContext@6c7f3af6 testClass = JdbcTokenStoreTest, testInstance = org.axonframework.eventhandling.tokenstore.jdbc.JdbcTokenStoreTest@69815126, testMethod = testInitializeTokens@JdbcTokenStoreTest, testException = [null], mergedContextConfiguration = [MergedContextConfiguration@440d45c5 testClass = JdbcTokenStoreTest, locations = '{}', classes = '{class org.axonframework.eventhandling.tokenstore.jdbc.JdbcTokenStoreTest$Context}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], contextLoader = 'org.springframework.test.context.support.DelegatingSmartContextLoader', parent = [null]], attributes = map[[empty]]].
2018-10-05 14:35:56,293 [main] INFO  TransactionContext              - Began transaction (1) for test context [DefaultTestContext@6c7f3af6 testClass = JdbcTokenStoreTest, testInstance = org.axonframework.eventhandling.tokenstore.jdbc.JdbcTokenStoreTest@2202e978, testMethod = testQuerySegments@JdbcTokenStoreTest, testException = [null], mergedContextConfiguration = [MergedContextConfiguration@440d45c5 testClass = JdbcTokenStoreTest, locations = '{}', classes = '{class org.axonframework.eventhandling.tokenstore.jdbc.JdbcTokenStoreTest$Context}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], contextLoader = 'org.springframework.test.context.support.DelegatingSmartContextLoader', parent = [null]], attributes = map[[empty]]]; transaction manager [org.springframework.jdbc.datasource.DataSourceTransactionManager@4414ee28]; rollback [true]
2018-10-05 14:35:56,306 [main] INFO  TransactionContext              - Rolled back transaction for test context [DefaultTestContext@6c7f3af6 testClass = JdbcTokenStoreTest, testInstance = org.axonframework.eventhandling.tokenstore.jdbc.JdbcTokenStoreTest@2202e978, testMethod = testQuerySegments@JdbcTokenStoreTest, testException = [null], mergedContextConfiguration = [MergedContextConfiguration@440d45c5 testClass = JdbcTokenStoreTest, locations = '{}', classes = '{class org.axonframework.eventhandling.tokenstore.jdbc.JdbcTokenStoreTest$Context}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], contextLoader = 'org.springframework.test.context.support.DelegatingSmartContextLoader', parent = [null]], attributes = map[[empty]]].
2018-10-05 14:35:56,329 [main] INFO  TransactionContext              - Began transaction (1) for test context [DefaultTestContext@6c7f3af6 testClass = JdbcTokenStoreTest, testInstance = org.axonframework.eventhandling.tokenstore.jdbc.JdbcTokenStoreTest@6ed2aa8a, testMethod = testInitializeTokensAtGivenPosition@JdbcTokenStoreTest, testException = [null], mergedContextConfiguration = [MergedContextConfiguration@440d45c5 testClass = JdbcTokenStoreTest, locations = '{}', classes = '{class org.axonframework.eventhandling.tokenstore.jdbc.JdbcTokenStoreTest$Context}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], contextLoader = 'org.springframework.test.context.support.DelegatingSmartContextLoader', parent = [null]], attributes = map[[empty]]]; transaction manager [org.springframework.jdbc.datasource.DataSourceTransactionManager@4414ee28]; rollback [true]
2018-10-05 14:35:56,350 [main] INFO  TransactionContext              - Rolled back transaction for test context [DefaultTestContext@6c7f3af6 testClass = JdbcTokenStoreTest, testInstance = org.axonframework.eventhandling.tokenstore.jdbc.JdbcTokenStoreTest@6ed2aa8a, testMethod = testInitializeTokensAtGivenPosition@JdbcTokenStoreTest, testException = [null], mergedContextConfiguration = [MergedContextConfiguration@440d45c5 testClass = JdbcTokenStoreTest, locations = '{}', classes = '{class org.axonframework.eventhandling.tokenstore.jdbc.JdbcTokenStoreTest$Context}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], contextLoader = 'org.springframework.test.context.support.DelegatingSmartContextLoader', parent = [null]], attributes = map[[empty]]].
Tests run: 11, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.346 sec - in org.axonframework.eventhandling.tokenstore.jdbc.JdbcTokenStoreTest
Running org.axonframework.eventhandling.tokenstore.jpa.JpaTokenStoreTest
2018-10-05 14:35:56,367 [main] INFO  AbstractContextLoader           - Could not detect default resource locations for test class [org.axonframework.eventhandling.tokenstore.jpa.JpaTokenStoreTest]: no resource found for suffixes {-context.xml}.
2018-10-05 14:35:56,368 [main] INFO  ctDelegatingSmartContextLoader  - AnnotationConfigContextLoader detected default configuration classes for context configuration [ContextConfigurationAttributes@56e589e5 declaringClass = 'org.axonframework.eventhandling.tokenstore.jpa.JpaTokenStoreTest', classes = '{class org.axonframework.eventhandling.tokenstore.jpa.JpaTokenStoreTest$Context}', locations = '{}', inheritLocations = true, initializers = '{}', inheritInitializers = true, name = [null], contextLoaderClass = 'org.springframework.test.context.ContextLoader'].
2018-10-05 14:35:56,368 [main] INFO  DefaultTestContextBootstrapper  - Loaded default TestExecutionListener class names from location [META-INF/spring.factories]: [org.springframework.test.context.web.ServletTestExecutionListener, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener, org.springframework.test.context.support.DependencyInjectionTestExecutionListener, org.springframework.test.context.support.DirtiesContextTestExecutionListener, org.springframework.test.context.transaction.TransactionalTestExecutionListener, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener]
2018-10-05 14:35:56,369 [main] INFO  DefaultTestContextBootstrapper  - Using TestExecutionListeners: [org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener@6992a147, org.springframework.test.context.support.DependencyInjectionTestExecutionListener@f3ae18f, org.springframework.test.context.support.DirtiesContextTestExecutionListener@4b548913, org.springframework.test.context.transaction.TransactionalTestExecutionListener@31048b3d, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener@4d609cc3]
2018-10-05 14:35:56,370 [main] INFO  GenericApplicationContext       - Refreshing org.springframework.context.support.GenericApplicationContext@7a7d25ca: startup date [Fri Oct 05 14:35:56 CEST 2018]; root of context hierarchy
2018-10-05 14:35:56,384 [main] INFO  redAnnotationBeanPostProcessor  - JSR-330 'javax.inject.Inject' annotation found and supported for autowiring
2018-10-05 14:35:56,414 [main] INFO  Dialect                         - HHH000400: Using dialect: org.hibernate.dialect.HSQLDialect
2018-10-05 14:35:56,446 [main] INFO  tainerEntityManagerFactoryBean  - Building JPA container EntityManagerFactory for persistence unit 'default'
2018-10-05 14:35:56,447 [main] INFO  LogHelper                       - HHH000204: Processing PersistenceUnitInfo [
	name: default
	...]
2018-10-05 14:35:56,513 [main] WARN  connections                     - HHH10001002: Using Hibernate built-in connection pool (not for production use!)
2018-10-05 14:35:56,514 [main] INFO  connections                     - HHH10001005: using driver [null] at URL [jdbc:hsqldb:mem:testdb]
2018-10-05 14:35:56,514 [main] INFO  connections                     - HHH10001001: Connection properties: {}
2018-10-05 14:35:56,514 [main] INFO  connections                     - HHH10001003: Autocommit mode: false
2018-10-05 14:35:56,517 [main] INFO  rManagerConnectionProviderImpl  - HHH000115: Hibernate connection pool size: 20 (min=1)
Hibernate: drop table TokenEntry if exists
Hibernate: create table TokenEntry (processorName varchar(255) not null, segment integer not null, owner varchar(255), timestamp varchar(255) not null, token blob(10000), tokenType varchar(255), primary key (processorName, segment))
2018-10-05 14:35:56,569 [main] INFO  SchemaCreatorImpl               - HHH000476: Executing import script 'org.hibernate.tool.schema.internal.exec.ScriptSourceInputNonExistentImpl@5da08e9a'
2018-10-05 14:35:56,575 [main] INFO  tainerEntityManagerFactoryBean  - Initialized JPA EntityManagerFactory for persistence unit 'default'
2018-10-05 14:35:56,639 [main] INFO  TransactionContext              - Began transaction (1) for test context [DefaultTestContext@16a4e4c9 testClass = JpaTokenStoreTest, testInstance = org.axonframework.eventhandling.tokenstore.jpa.JpaTokenStoreTest@4b90f49d, testMethod = testStealToken@JpaTokenStoreTest, testException = [null], mergedContextConfiguration = [MergedContextConfiguration@c54e23b testClass = JpaTokenStoreTest, locations = '{}', classes = '{class org.axonframework.eventhandling.tokenstore.jpa.JpaTokenStoreTest$Context}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], contextLoader = 'org.springframework.test.context.support.DelegatingSmartContextLoader', parent = [null]], attributes = map[[empty]]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@3726fc3b]; rollback [true]
Hibernate: select tokenentry0_.processorName as processo1_0_0_, tokenentry0_.segment as segment2_0_0_, tokenentry0_.owner as owner3_0_0_, tokenentry0_.timestamp as timestam4_0_0_, tokenentry0_.token as token5_0_0_, tokenentry0_.tokenType as tokenTyp6_0_0_ from TokenEntry tokenentry0_ where tokenentry0_.processorName=? and tokenentry0_.segment=? for update
Hibernate: insert into TokenEntry (owner, timestamp, token, tokenType, processorName, segment) values (?, ?, ?, ?, ?, ?)
Hibernate: select processorName from TokenEntry where processorName =? and segment =? for update
2018-10-05 14:35:56,645 [main] INFO  ueryTranslatorFactoryInitiator  - HHH000397: Using ASTQueryTranslatorFactory
Hibernate: update TokenEntry set owner=?, timestamp=?, token=?, tokenType=? where processorName=? and segment=?
Hibernate: update TokenEntry set owner=null where owner=? and processorName=? and segment=?
2018-10-05 14:35:56,653 [main] WARN  JpaTokenStore                   - Releasing claim of token stealing/0 failed. It was not owned by local
Hibernate: select processorName from TokenEntry where processorName =? and segment =? for update
2018-10-05 14:35:56,655 [main] INFO  TransactionContext              - Rolled back transaction for test context [DefaultTestContext@16a4e4c9 testClass = JpaTokenStoreTest, testInstance = org.axonframework.eventhandling.tokenstore.jpa.JpaTokenStoreTest@4b90f49d, testMethod = testStealToken@JpaTokenStoreTest, testException = [null], mergedContextConfiguration = [MergedContextConfiguration@c54e23b testClass = JpaTokenStoreTest, locations = '{}', classes = '{class org.axonframework.eventhandling.tokenstore.jpa.JpaTokenStoreTest$Context}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], contextLoader = 'org.springframework.test.context.support.DelegatingSmartContextLoader', parent = [null]], attributes = map[[empty]]].
Hibernate: select tokenentry0_.processorName as processo1_0_0_, tokenentry0_.segment as segment2_0_0_, tokenentry0_.owner as owner3_0_0_, tokenentry0_.timestamp as timestam4_0_0_, tokenentry0_.token as token5_0_0_, tokenentry0_.tokenType as tokenTyp6_0_0_ from TokenEntry tokenentry0_ where tokenentry0_.processorName=? and tokenentry0_.segment=? for update
Hibernate: insert into TokenEntry (owner, timestamp, token, tokenType, processorName, segment) values (?, ?, ?, ?, ?, ?)
Hibernate: select processorName from TokenEntry where processorName =? and segment =? for update
Hibernate: update TokenEntry set owner=?, timestamp=?, token=?, tokenType=? where processorName=? and segment=?
Hibernate: select tokenentry0_.processorName as processo1_0_0_, tokenentry0_.segment as segment2_0_0_, tokenentry0_.owner as owner3_0_0_, tokenentry0_.timestamp as timestam4_0_0_, tokenentry0_.token as token5_0_0_, tokenentry0_.tokenType as tokenTyp6_0_0_ from TokenEntry tokenentry0_ where tokenentry0_.processorName=? and tokenentry0_.segment=? for update
Hibernate: update TokenEntry set owner=?, timestamp=?, token=?, tokenType=? where processorName=? and segment=?
Hibernate: select tokenentry0_.processorName as processo1_0_0_, tokenentry0_.segment as segment2_0_0_, tokenentry0_.owner as owner3_0_0_, tokenentry0_.timestamp as timestam4_0_0_, tokenentry0_.token as token5_0_0_, tokenentry0_.tokenType as tokenTyp6_0_0_ from TokenEntry tokenentry0_ where tokenentry0_.processorName=? and tokenentry0_.segment=? for update
Hibernate: update TokenEntry set owner=?, timestamp=?, token=?, tokenType=? where processorName=? and segment=?
2018-10-05 14:35:56,677 [main] INFO  TransactionContext              - Began transaction (1) for test context [DefaultTestContext@16a4e4c9 testClass = JpaTokenStoreTest, testInstance = org.axonframework.eventhandling.tokenstore.jpa.JpaTokenStoreTest@1c8746a0, testMethod = testInitializeTokensWhileAlreadyPresent@JpaTokenStoreTest, testException = [null], mergedContextConfiguration = [MergedContextConfiguration@c54e23b testClass = JpaTokenStoreTest, locations = '{}', classes = '{class org.axonframework.eventhandling.tokenstore.jpa.JpaTokenStoreTest$Context}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], contextLoader = 'org.springframework.test.context.support.DelegatingSmartContextLoader', parent = [null]], attributes = map[[empty]]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@3726fc3b]; rollback [true]
Hibernate: select tokenentry0_.processorName as processo1_0_0_, tokenentry0_.segment as segment2_0_0_, tokenentry0_.owner as owner3_0_0_, tokenentry0_.timestamp as timestam4_0_0_, tokenentry0_.token as token5_0_0_, tokenentry0_.tokenType as tokenTyp6_0_0_ from TokenEntry tokenentry0_ where tokenentry0_.processorName=? and tokenentry0_.segment=? for update
Hibernate: insert into TokenEntry (owner, timestamp, token, tokenType, processorName, segment) values (?, ?, ?, ?, ?, ?)
Hibernate: select tokenentry0_.segment as col_0_0_ from TokenEntry tokenentry0_ where tokenentry0_.processorName=? order by tokenentry0_.segment ASC
2018-10-05 14:35:56,685 [main] INFO  TransactionContext              - Rolled back transaction for test context [DefaultTestContext@16a4e4c9 testClass = JpaTokenStoreTest, testInstance = org.axonframework.eventhandling.tokenstore.jpa.JpaTokenStoreTest@1c8746a0, testMethod = testInitializeTokensWhileAlreadyPresent@JpaTokenStoreTest, testException = [null], mergedContextConfiguration = [MergedContextConfiguration@c54e23b testClass = JpaTokenStoreTest, locations = '{}', classes = '{class org.axonframework.eventhandling.tokenstore.jpa.JpaTokenStoreTest$Context}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], contextLoader = 'org.springframework.test.context.support.DelegatingSmartContextLoader', parent = [null]], attributes = map[[empty]]].
2018-10-05 14:35:56,687 [main] INFO  TransactionContext              - Began transaction (1) for test context [DefaultTestContext@16a4e4c9 testClass = JpaTokenStoreTest, testInstance = org.axonframework.eventhandling.tokenstore.jpa.JpaTokenStoreTest@316987c4, testMethod = testStealingFromOtherThreadFailsWithRowLock@JpaTokenStoreTest, testException = [null], mergedContextConfiguration = [MergedContextConfiguration@c54e23b testClass = JpaTokenStoreTest, locations = '{}', classes = '{class org.axonframework.eventhandling.tokenstore.jpa.JpaTokenStoreTest$Context}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], contextLoader = 'org.springframework.test.context.support.DelegatingSmartContextLoader', parent = [null]], attributes = map[[empty]]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@3726fc3b]; rollback [true]
Hibernate: select tokenentry0_.processorName as processo1_0_0_, tokenentry0_.segment as segment2_0_0_, tokenentry0_.owner as owner3_0_0_, tokenentry0_.timestamp as timestam4_0_0_, tokenentry0_.token as token5_0_0_, tokenentry0_.tokenType as tokenTyp6_0_0_ from TokenEntry tokenentry0_ where tokenentry0_.processorName=? and tokenentry0_.segment=? for update
Hibernate: insert into TokenEntry (owner, timestamp, token, tokenType, processorName, segment) values (?, ?, ?, ?, ?, ?)
Hibernate: select tokenentry0_.processorName as processo1_0_0_, tokenentry0_.segment as segment2_0_0_, tokenentry0_.owner as owner3_0_0_, tokenentry0_.timestamp as timestam4_0_0_, tokenentry0_.token as token5_0_0_, tokenentry0_.tokenType as tokenTyp6_0_0_ from TokenEntry tokenentry0_ where tokenentry0_.processorName=? and tokenentry0_.segment=? for update
2018-10-05 14:35:56,952 [main] INFO  TransactionContext              - Rolled back transaction for test context [DefaultTestContext@16a4e4c9 testClass = JpaTokenStoreTest, testInstance = org.axonframework.eventhandling.tokenstore.jpa.JpaTokenStoreTest@316987c4, testMethod = testStealingFromOtherThreadFailsWithRowLock@JpaTokenStoreTest, testException = [null], mergedContextConfiguration = [MergedContextConfiguration@c54e23b testClass = JpaTokenStoreTest, locations = '{}', classes = '{class org.axonframework.eventhandling.tokenstore.jpa.JpaTokenStoreTest$Context}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], contextLoader = 'org.springframework.test.context.support.DelegatingSmartContextLoader', parent = [null]], attributes = map[[empty]]].
Hibernate: insert into TokenEntry (owner, timestamp, token, tokenType, processorName, segment) values (?, ?, ?, ?, ?, ?)
2018-10-05 14:35:56,956 [main] INFO  TransactionContext              - Began transaction (1) for test context [DefaultTestContext@16a4e4c9 testClass = JpaTokenStoreTest, testInstance = org.axonframework.eventhandling.tokenstore.jpa.JpaTokenStoreTest@5f1d270a, testMethod = testInitializeTokens@JpaTokenStoreTest, testException = [null], mergedContextConfiguration = [MergedContextConfiguration@c54e23b testClass = JpaTokenStoreTest, locations = '{}', classes = '{class org.axonframework.eventhandling.tokenstore.jpa.JpaTokenStoreTest$Context}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], contextLoader = 'org.springframework.test.context.support.DelegatingSmartContextLoader', parent = [null]], attributes = map[[empty]]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@3726fc3b]; rollback [true]
Hibernate: select tokenentry0_.segment as col_0_0_ from TokenEntry tokenentry0_ where tokenentry0_.processorName=? order by tokenentry0_.segment ASC
Hibernate: insert into TokenEntry (owner, timestamp, token, tokenType, processorName, segment) values (?, ?, ?, ?, ?, ?)
Hibernate: insert into TokenEntry (owner, timestamp, token, tokenType, processorName, segment) values (?, ?, ?, ?, ?, ?)
Hibernate: insert into TokenEntry (owner, timestamp, token, tokenType, processorName, segment) values (?, ?, ?, ?, ?, ?)
Hibernate: insert into TokenEntry (owner, timestamp, token, tokenType, processorName, segment) values (?, ?, ?, ?, ?, ?)
Hibernate: insert into TokenEntry (owner, timestamp, token, tokenType, processorName, segment) values (?, ?, ?, ?, ?, ?)
Hibernate: insert into TokenEntry (owner, timestamp, token, tokenType, processorName, segment) values (?, ?, ?, ?, ?, ?)
Hibernate: insert into TokenEntry (owner, timestamp, token, tokenType, processorName, segment) values (?, ?, ?, ?, ?, ?)
Hibernate: select tokenentry0_.segment as col_0_0_ from TokenEntry tokenentry0_ where tokenentry0_.processorName=? order by tokenentry0_.segment ASC
2018-10-05 14:35:56,965 [main] INFO  TransactionContext              - Rolled back transaction for test context [DefaultTestContext@16a4e4c9 testClass = JpaTokenStoreTest, testInstance = org.axonframework.eventhandling.tokenstore.jpa.JpaTokenStoreTest@5f1d270a, testMethod = testInitializeTokens@JpaTokenStoreTest, testException = [null], mergedContextConfiguration = [MergedContextConfiguration@c54e23b testClass = JpaTokenStoreTest, locations = '{}', classes = '{class org.axonframework.eventhandling.tokenstore.jpa.JpaTokenStoreTest$Context}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], contextLoader = 'org.springframework.test.context.support.DelegatingSmartContextLoader', parent = [null]], attributes = map[[empty]]].
2018-10-05 14:35:56,970 [main] INFO  TransactionContext              - Began transaction (1) for test context [DefaultTestContext@16a4e4c9 testClass = JpaTokenStoreTest, testInstance = org.axonframework.eventhandling.tokenstore.jpa.JpaTokenStoreTest@436867c3, testMethod = testQuerySegments@JpaTokenStoreTest, testException = [null], mergedContextConfiguration = [MergedContextConfiguration@c54e23b testClass = JpaTokenStoreTest, locations = '{}', classes = '{class org.axonframework.eventhandling.tokenstore.jpa.JpaTokenStoreTest$Context}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], contextLoader = 'org.springframework.test.context.support.DelegatingSmartContextLoader', parent = [null]], attributes = map[[empty]]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@3726fc3b]; rollback [true]
Hibernate: select tokenentry0_.processorName as processo1_0_0_, tokenentry0_.segment as segment2_0_0_, tokenentry0_.owner as owner3_0_0_, tokenentry0_.timestamp as timestam4_0_0_, tokenentry0_.token as token5_0_0_, tokenentry0_.tokenType as tokenTyp6_0_0_ from TokenEntry tokenentry0_ where tokenentry0_.processorName=? and tokenentry0_.segment=? for update
Hibernate: insert into TokenEntry (owner, timestamp, token, tokenType, processorName, segment) values (?, ?, ?, ?, ?, ?)
Hibernate: select tokenentry0_.processorName as processo1_0_0_, tokenentry0_.segment as segment2_0_0_, tokenentry0_.owner as owner3_0_0_, tokenentry0_.timestamp as timestam4_0_0_, tokenentry0_.token as token5_0_0_, tokenentry0_.tokenType as tokenTyp6_0_0_ from TokenEntry tokenentry0_ where tokenentry0_.processorName=? and tokenentry0_.segment=? for update
Hibernate: insert into TokenEntry (owner, timestamp, token, tokenType, processorName, segment) values (?, ?, ?, ?, ?, ?)
Hibernate: select tokenentry0_.processorName as processo1_0_0_, tokenentry0_.segment as segment2_0_0_, tokenentry0_.owner as owner3_0_0_, tokenentry0_.timestamp as timestam4_0_0_, tokenentry0_.token as token5_0_0_, tokenentry0_.tokenType as tokenTyp6_0_0_ from TokenEntry tokenentry0_ where tokenentry0_.processorName=? and tokenentry0_.segment=? for update
Hibernate: insert into TokenEntry (owner, timestamp, token, tokenType, processorName, segment) values (?, ?, ?, ?, ?, ?)
Hibernate: update TokenEntry set owner=?, timestamp=?, token=?, tokenType=? where processorName=? and segment=?
Hibernate: select tokenentry0_.processorName as processo1_0_0_, tokenentry0_.segment as segment2_0_0_, tokenentry0_.owner as owner3_0_0_, tokenentry0_.timestamp as timestam4_0_0_, tokenentry0_.token as token5_0_0_, tokenentry0_.tokenType as tokenTyp6_0_0_ from TokenEntry tokenentry0_ where tokenentry0_.processorName=? and tokenentry0_.segment=? for update
Hibernate: insert into TokenEntry (owner, timestamp, token, tokenType, processorName, segment) values (?, ?, ?, ?, ?, ?)
Hibernate: update TokenEntry set owner=?, timestamp=?, token=?, tokenType=? where processorName=? and segment=?
Hibernate: update TokenEntry set owner=?, timestamp=?, token=?, tokenType=? where processorName=? and segment=?
Hibernate: select tokenentry0_.segment as col_0_0_ from TokenEntry tokenentry0_ where tokenentry0_.processorName=? order by tokenentry0_.segment ASC
Hibernate: select tokenentry0_.segment as col_0_0_ from TokenEntry tokenentry0_ where tokenentry0_.processorName=? order by tokenentry0_.segment ASC
Hibernate: select tokenentry0_.segment as col_0_0_ from TokenEntry tokenentry0_ where tokenentry0_.processorName=? order by tokenentry0_.segment ASC
2018-10-05 14:35:56,989 [main] INFO  TransactionContext              - Rolled back transaction for test context [DefaultTestContext@16a4e4c9 testClass = JpaTokenStoreTest, testInstance = org.axonframework.eventhandling.tokenstore.jpa.JpaTokenStoreTest@436867c3, testMethod = testQuerySegments@JpaTokenStoreTest, testException = [null], mergedContextConfiguration = [MergedContextConfiguration@c54e23b testClass = JpaTokenStoreTest, locations = '{}', classes = '{class org.axonframework.eventhandling.tokenstore.jpa.JpaTokenStoreTest$Context}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], contextLoader = 'org.springframework.test.context.support.DelegatingSmartContextLoader', parent = [null]], attributes = map[[empty]]].
2018-10-05 14:35:56,992 [main] INFO  TransactionContext              - Began transaction (1) for test context [DefaultTestContext@16a4e4c9 testClass = JpaTokenStoreTest, testInstance = org.axonframework.eventhandling.tokenstore.jpa.JpaTokenStoreTest@17da6e45, testMethod = testClaimTokenConcurrently@JpaTokenStoreTest, testException = [null], mergedContextConfiguration = [MergedContextConfiguration@c54e23b testClass = JpaTokenStoreTest, locations = '{}', classes = '{class org.axonframework.eventhandling.tokenstore.jpa.JpaTokenStoreTest$Context}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], contextLoader = 'org.springframework.test.context.support.DelegatingSmartContextLoader', parent = [null]], attributes = map[[empty]]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@3726fc3b]; rollback [true]
Hibernate: select tokenentry0_.processorName as processo1_0_0_, tokenentry0_.segment as segment2_0_0_, tokenentry0_.owner as owner3_0_0_, tokenentry0_.timestamp as timestam4_0_0_, tokenentry0_.token as token5_0_0_, tokenentry0_.tokenType as tokenTyp6_0_0_ from TokenEntry tokenentry0_ where tokenentry0_.processorName=? and tokenentry0_.segment=? for update
Hibernate: insert into TokenEntry (owner, timestamp, token, tokenType, processorName, segment) values (?, ?, ?, ?, ?, ?)
Hibernate: select processorName from TokenEntry where processorName =? and segment =? for update
2018-10-05 14:35:56,995 [main] INFO  TransactionContext              - Rolled back transaction for test context [DefaultTestContext@16a4e4c9 testClass = JpaTokenStoreTest, testInstance = org.axonframework.eventhandling.tokenstore.jpa.JpaTokenStoreTest@17da6e45, testMethod = testClaimTokenConcurrently@JpaTokenStoreTest, testException = [null], mergedContextConfiguration = [MergedContextConfiguration@c54e23b testClass = JpaTokenStoreTest, locations = '{}', classes = '{class org.axonframework.eventhandling.tokenstore.jpa.JpaTokenStoreTest$Context}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], contextLoader = 'org.springframework.test.context.support.DelegatingSmartContextLoader', parent = [null]], attributes = map[[empty]]].
2018-10-05 14:35:56,997 [main] INFO  TransactionContext              - Began transaction (1) for test context [DefaultTestContext@16a4e4c9 testClass = JpaTokenStoreTest, testInstance = org.axonframework.eventhandling.tokenstore.jpa.JpaTokenStoreTest@4d79651d, testMethod = testExtendingLostClaimFails@JpaTokenStoreTest, testException = [null], mergedContextConfiguration = [MergedContextConfiguration@c54e23b testClass = JpaTokenStoreTest, locations = '{}', classes = '{class org.axonframework.eventhandling.tokenstore.jpa.JpaTokenStoreTest$Context}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], contextLoader = 'org.springframework.test.context.support.DelegatingSmartContextLoader', parent = [null]], attributes = map[[empty]]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@3726fc3b]; rollback [true]
Hibernate: select tokenentry0_.processorName as processo1_0_0_, tokenentry0_.segment as segment2_0_0_, tokenentry0_.owner as owner3_0_0_, tokenentry0_.timestamp as timestam4_0_0_, tokenentry0_.token as token5_0_0_, tokenentry0_.tokenType as tokenTyp6_0_0_ from TokenEntry tokenentry0_ where tokenentry0_.processorName=? and tokenentry0_.segment=? for update
Hibernate: insert into TokenEntry (owner, timestamp, token, tokenType, processorName, segment) values (?, ?, ?, ?, ?, ?)
Hibernate: update TokenEntry set timestamp=? where processorName=? and segment=? and owner=?
2018-10-05 14:35:57,004 [main] WARN  SqlExceptionHelper              - SQL Warning Code: -1100, SQLState: 02000
2018-10-05 14:35:57,004 [main] WARN  SqlExceptionHelper              - no data
2018-10-05 14:35:57,004 [main] INFO  TransactionContext              - Rolled back transaction for test context [DefaultTestContext@16a4e4c9 testClass = JpaTokenStoreTest, testInstance = org.axonframework.eventhandling.tokenstore.jpa.JpaTokenStoreTest@4d79651d, testMethod = testExtendingLostClaimFails@JpaTokenStoreTest, testException = [null], mergedContextConfiguration = [MergedContextConfiguration@c54e23b testClass = JpaTokenStoreTest, locations = '{}', classes = '{class org.axonframework.eventhandling.tokenstore.jpa.JpaTokenStoreTest$Context}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], contextLoader = 'org.springframework.test.context.support.DelegatingSmartContextLoader', parent = [null]], attributes = map[[empty]]].
2018-10-05 14:35:57,006 [main] INFO  TransactionContext              - Began transaction (1) for test context [DefaultTestContext@16a4e4c9 testClass = JpaTokenStoreTest, testInstance = org.axonframework.eventhandling.tokenstore.jpa.JpaTokenStoreTest@27ae6f9e, testMethod = testUpdateNullToken@JpaTokenStoreTest, testException = [null], mergedContextConfiguration = [MergedContextConfiguration@c54e23b testClass = JpaTokenStoreTest, locations = '{}', classes = '{class org.axonframework.eventhandling.tokenstore.jpa.JpaTokenStoreTest$Context}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], contextLoader = 'org.springframework.test.context.support.DelegatingSmartContextLoader', parent = [null]], attributes = map[[empty]]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@3726fc3b]; rollback [true]
Hibernate: select tokenentry0_.processorName as processo1_0_0_, tokenentry0_.segment as segment2_0_0_, tokenentry0_.owner as owner3_0_0_, tokenentry0_.timestamp as timestam4_0_0_, tokenentry0_.token as token5_0_0_, tokenentry0_.tokenType as tokenTyp6_0_0_ from TokenEntry tokenentry0_ where tokenentry0_.processorName=? and tokenentry0_.segment=? for update
Hibernate: insert into TokenEntry (owner, timestamp, token, tokenType, processorName, segment) values (?, ?, ?, ?, ?, ?)
Hibernate: update TokenEntry set owner=?, timestamp=?, token=?, tokenType=? where processorName=? and segment=?
Hibernate: select tokenentry0_.processorName as processo1_0_, tokenentry0_.segment as segment2_0_, tokenentry0_.owner as owner3_0_, tokenentry0_.timestamp as timestam4_0_, tokenentry0_.token as token5_0_, tokenentry0_.tokenType as tokenTyp6_0_ from TokenEntry tokenentry0_ where tokenentry0_.processorName=?
2018-10-05 14:35:57,018 [main] INFO  TransactionContext              - Rolled back transaction for test context [DefaultTestContext@16a4e4c9 testClass = JpaTokenStoreTest, testInstance = org.axonframework.eventhandling.tokenstore.jpa.JpaTokenStoreTest@27ae6f9e, testMethod = testUpdateNullToken@JpaTokenStoreTest, testException = [null], mergedContextConfiguration = [MergedContextConfiguration@c54e23b testClass = JpaTokenStoreTest, locations = '{}', classes = '{class org.axonframework.eventhandling.tokenstore.jpa.JpaTokenStoreTest$Context}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], contextLoader = 'org.springframework.test.context.support.DelegatingSmartContextLoader', parent = [null]], attributes = map[[empty]]].
2018-10-05 14:35:57,020 [main] INFO  TransactionContext              - Began transaction (1) for test context [DefaultTestContext@16a4e4c9 testClass = JpaTokenStoreTest, testInstance = org.axonframework.eventhandling.tokenstore.jpa.JpaTokenStoreTest@70ba01be, testMethod = testInitializeTokensAtGivenPosition@JpaTokenStoreTest, testException = [null], mergedContextConfiguration = [MergedContextConfiguration@c54e23b testClass = JpaTokenStoreTest, locations = '{}', classes = '{class org.axonframework.eventhandling.tokenstore.jpa.JpaTokenStoreTest$Context}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], contextLoader = 'org.springframework.test.context.support.DelegatingSmartContextLoader', parent = [null]], attributes = map[[empty]]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@3726fc3b]; rollback [true]
Hibernate: select tokenentry0_.segment as col_0_0_ from TokenEntry tokenentry0_ where tokenentry0_.processorName=? order by tokenentry0_.segment ASC
Hibernate: insert into TokenEntry (owner, timestamp, token, tokenType, processorName, segment) values (?, ?, ?, ?, ?, ?)
Hibernate: insert into TokenEntry (owner, timestamp, token, tokenType, processorName, segment) values (?, ?, ?, ?, ?, ?)
Hibernate: insert into TokenEntry (owner, timestamp, token, tokenType, processorName, segment) values (?, ?, ?, ?, ?, ?)
Hibernate: insert into TokenEntry (owner, timestamp, token, tokenType, processorName, segment) values (?, ?, ?, ?, ?, ?)
Hibernate: insert into TokenEntry (owner, timestamp, token, tokenType, processorName, segment) values (?, ?, ?, ?, ?, ?)
Hibernate: insert into TokenEntry (owner, timestamp, token, tokenType, processorName, segment) values (?, ?, ?, ?, ?, ?)
Hibernate: insert into TokenEntry (owner, timestamp, token, tokenType, processorName, segment) values (?, ?, ?, ?, ?, ?)
Hibernate: select tokenentry0_.segment as col_0_0_ from TokenEntry tokenentry0_ where tokenentry0_.processorName=? order by tokenentry0_.segment ASC
Hibernate: select processorName from TokenEntry where processorName =? and segment =? for update
Hibernate: select processorName from TokenEntry where processorName =? and segment =? for update
Hibernate: select processorName from TokenEntry where processorName =? and segment =? for update
Hibernate: select processorName from TokenEntry where processorName =? and segment =? for update
Hibernate: select processorName from TokenEntry where processorName =? and segment =? for update
Hibernate: select processorName from TokenEntry where processorName =? and segment =? for update
Hibernate: select processorName from TokenEntry where processorName =? and segment =? for update
2018-10-05 14:35:57,041 [main] INFO  TransactionContext              - Rolled back transaction for test context [DefaultTestContext@16a4e4c9 testClass = JpaTokenStoreTest, testInstance = org.axonframework.eventhandling.tokenstore.jpa.JpaTokenStoreTest@70ba01be, testMethod = testInitializeTokensAtGivenPosition@JpaTokenStoreTest, testException = [null], mergedContextConfiguration = [MergedContextConfiguration@c54e23b testClass = JpaTokenStoreTest, locations = '{}', classes = '{class org.axonframework.eventhandling.tokenstore.jpa.JpaTokenStoreTest$Context}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], contextLoader = 'org.springframework.test.context.support.DelegatingSmartContextLoader', parent = [null]], attributes = map[[empty]]].
2018-10-05 14:35:57,043 [main] INFO  TransactionContext              - Began transaction (1) for test context [DefaultTestContext@16a4e4c9 testClass = JpaTokenStoreTest, testInstance = org.axonframework.eventhandling.tokenstore.jpa.JpaTokenStoreTest@1a6ab328, testMethod = testClaimAndUpdateToken@JpaTokenStoreTest, testException = [null], mergedContextConfiguration = [MergedContextConfiguration@c54e23b testClass = JpaTokenStoreTest, locations = '{}', classes = '{class org.axonframework.eventhandling.tokenstore.jpa.JpaTokenStoreTest$Context}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], contextLoader = 'org.springframework.test.context.support.DelegatingSmartContextLoader', parent = [null]], attributes = map[[empty]]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@3726fc3b]; rollback [true]
Hibernate: select tokenentry0_.processorName as processo1_0_0_, tokenentry0_.segment as segment2_0_0_, tokenentry0_.owner as owner3_0_0_, tokenentry0_.timestamp as timestam4_0_0_, tokenentry0_.token as token5_0_0_, tokenentry0_.tokenType as tokenTyp6_0_0_ from TokenEntry tokenentry0_ where tokenentry0_.processorName=? and tokenentry0_.segment=? for update
Hibernate: insert into TokenEntry (owner, timestamp, token, tokenType, processorName, segment) values (?, ?, ?, ?, ?, ?)
Hibernate: select processorName from TokenEntry where processorName =? and segment =? for update
Hibernate: update TokenEntry set owner=?, timestamp=?, token=?, tokenType=? where processorName=? and segment=?
Hibernate: select tokenentry0_.processorName as processo1_0_, tokenentry0_.segment as segment2_0_, tokenentry0_.owner as owner3_0_, tokenentry0_.timestamp as timestam4_0_, tokenentry0_.token as token5_0_, tokenentry0_.tokenType as tokenTyp6_0_ from TokenEntry tokenentry0_ where tokenentry0_.processorName=?
Hibernate: update TokenEntry set owner=null where owner=? and processorName=? and segment=?
Hibernate: select tokenentry0_.processorName as processo1_0_0_, tokenentry0_.segment as segment2_0_0_, tokenentry0_.owner as owner3_0_0_, tokenentry0_.timestamp as timestam4_0_0_, tokenentry0_.token as token5_0_0_, tokenentry0_.tokenType as tokenTyp6_0_0_ from TokenEntry tokenentry0_ where tokenentry0_.processorName=? and tokenentry0_.segment=?
2018-10-05 14:35:57,051 [main] INFO  TransactionContext              - Rolled back transaction for test context [DefaultTestContext@16a4e4c9 testClass = JpaTokenStoreTest, testInstance = org.axonframework.eventhandling.tokenstore.jpa.JpaTokenStoreTest@1a6ab328, testMethod = testClaimAndUpdateToken@JpaTokenStoreTest, testException = [null], mergedContextConfiguration = [MergedContextConfiguration@c54e23b testClass = JpaTokenStoreTest, locations = '{}', classes = '{class org.axonframework.eventhandling.tokenstore.jpa.JpaTokenStoreTest$Context}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], contextLoader = 'org.springframework.test.context.support.DelegatingSmartContextLoader', parent = [null]], attributes = map[[empty]]].
Tests run: 11, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.689 sec - in org.axonframework.eventhandling.tokenstore.jpa.JpaTokenStoreTest
Running org.axonframework.eventhandling.tokenstore.inmemory.InMemoryTokenStoreTest
Tests run: 6, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.001 sec - in org.axonframework.eventhandling.tokenstore.inmemory.InMemoryTokenStoreTest
Running org.axonframework.eventhandling.AbstractEventBusTest
Tests run: 8, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.218 sec - in org.axonframework.eventhandling.AbstractEventBusTest
Running org.axonframework.eventhandling.AbstractEventProcessorTest
Tests run: 1, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.002 sec - in org.axonframework.eventhandling.AbstractEventProcessorTest
Running org.axonframework.eventhandling.AnnotationEventListenerAdapterTest
Tests run: 1, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.004 sec - in org.axonframework.eventhandling.AnnotationEventListenerAdapterTest
Running org.axonframework.eventhandling.TimestampParameterResolverFactoryTest
Tests run: 4, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0 sec - in org.axonframework.eventhandling.TimestampParameterResolverFactoryTest
Running org.axonframework.eventhandling.MultiEventHandlerInvokerTest
Tests run: 9, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.023 sec - in org.axonframework.eventhandling.MultiEventHandlerInvokerTest
Running org.axonframework.commandhandling.conflictresolution.ConflictResolutionTest
Tests run: 3, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.016 sec - in org.axonframework.commandhandling.conflictresolution.ConflictResolutionTest
Running org.axonframework.commandhandling.conflictresolution.ConflictResolutionIntegrationTest
Tests run: 4, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.096 sec - in org.axonframework.commandhandling.conflictresolution.ConflictResolutionIntegrationTest
Running org.axonframework.commandhandling.conflictresolution.DefaultConflictResolverTest
Tests run: 7, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.009 sec - in org.axonframework.commandhandling.conflictresolution.DefaultConflictResolverTest
Running org.axonframework.commandhandling.conflictresolution.ConflictsTest
Tests run: 2, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.001 sec - in org.axonframework.commandhandling.conflictresolution.ConflictsTest
Running org.axonframework.commandhandling.model.LockingRepositoryTest
Tests run: 4, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.15 sec - in org.axonframework.commandhandling.model.LockingRepositoryTest
Running org.axonframework.commandhandling.model.inspection.AnnotatedAggregateMetaModelFactoryTest
Tests run: 15, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.052 sec - in org.axonframework.commandhandling.model.inspection.AnnotatedAggregateMetaModelFactoryTest
Running org.axonframework.commandhandling.model.inspection.ModelInspectorTest
Tests run: 14, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.031 sec - in org.axonframework.commandhandling.model.inspection.ModelInspectorTest
Running org.axonframework.commandhandling.model.GenericJpaRepositoryTest
Tests run: 11, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.079 sec - in org.axonframework.commandhandling.model.GenericJpaRepositoryTest
Running org.axonframework.commandhandling.model.EntityEventForwardingModelInspectorTest
Tests run: 5, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.012 sec - in org.axonframework.commandhandling.model.EntityEventForwardingModelInspectorTest
Running org.axonframework.commandhandling.model.EventSourcingRepositoryTest
Tests run: 3, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.007 sec - in org.axonframework.commandhandling.model.EventSourcingRepositoryTest
Running org.axonframework.commandhandling.model.AbstractRepositoryTest
Tests run: 9, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.073 sec - in org.axonframework.commandhandling.model.AbstractRepositoryTest
Running org.axonframework.commandhandling.model.AggregateScopeDescriptorSerializationTest
Tests run: 3, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.015 sec - in org.axonframework.commandhandling.model.AggregateScopeDescriptorSerializationTest
Running org.axonframework.commandhandling.model.JpaRepositoryIntegrationTest
2018-10-05 14:35:57,864 [main] INFO  DefaultTestContextBootstrapper  - Loaded default TestExecutionListener class names from location [META-INF/spring.factories]: [org.springframework.test.context.web.ServletTestExecutionListener, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener, org.springframework.test.context.support.DependencyInjectionTestExecutionListener, org.springframework.test.context.support.DirtiesContextTestExecutionListener, org.springframework.test.context.transaction.TransactionalTestExecutionListener, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener]
2018-10-05 14:35:57,865 [main] INFO  DefaultTestContextBootstrapper  - Using TestExecutionListeners: [org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener@5a36a405, org.springframework.test.context.support.DependencyInjectionTestExecutionListener@45b7b254, org.springframework.test.context.support.DirtiesContextTestExecutionListener@76320633, org.springframework.test.context.transaction.TransactionalTestExecutionListener@5100fe55, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener@3ef97efc]
2018-10-05 14:35:57,866 [main] INFO  XmlBeanDefinitionReader         - Loading XML bean definitions from class path resource [META-INF/spring/jpa-repository-context.xml]
2018-10-05 14:35:57,880 [main] INFO  XmlBeanDefinitionReader         - Loading XML bean definitions from class path resource [META-INF/spring/db-context.xml]
2018-10-05 14:35:57,904 [main] INFO  GenericApplicationContext       - Refreshing org.springframework.context.support.GenericApplicationContext@46244e65: startup date [Fri Oct 05 14:35:57 CEST 2018]; root of context hierarchy
2018-10-05 14:35:57,919 [main] INFO  redAnnotationBeanPostProcessor  - JSR-330 'javax.inject.Inject' annotation found and supported for autowiring
2018-10-05 14:35:57,956 [main] INFO  DriverManagerDataSource         - Loaded JDBC driver: org.hsqldb.jdbcDriver
2018-10-05 14:35:57,966 [main] INFO  tainerEntityManagerFactoryBean  - Building JPA container EntityManagerFactory for persistence unit 'eventStore'
2018-10-05 14:35:57,966 [main] INFO  LogHelper                       - HHH000204: Processing PersistenceUnitInfo [
	name: eventStore
	...]
2018-10-05 14:35:58,038 [main] INFO  Dialect                         - HHH000400: Using dialect: org.hibernate.dialect.HSQLDialect
2018-10-05 14:35:58,223 [main] INFO  tainerEntityManagerFactoryBean  - Initialized JPA EntityManagerFactory for persistence unit 'eventStore'
2018-10-05 14:35:58,312 [main] INFO  TransactionContext              - Began transaction (1) for test context [DefaultTestContext@aba3735 testClass = JpaRepositoryIntegrationTest, testInstance = org.axonframework.commandhandling.model.JpaRepositoryIntegrationTest@16bba8ae, testMethod = testUpdateAnAggregate@JpaRepositoryIntegrationTest, testException = [null], mergedContextConfiguration = [MergedContextConfiguration@7c689379 testClass = JpaRepositoryIntegrationTest, locations = '{classpath:/META-INF/spring/jpa-repository-context.xml, classpath:/META-INF/spring/db-context.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], contextLoader = 'org.springframework.test.context.support.DelegatingSmartContextLoader', parent = [null]], attributes = map[[empty]]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@5135b459]; rollback [true]
2018-10-05 14:35:58,319 [main] INFO  TransactionContext              - Rolled back transaction for test context [DefaultTestContext@aba3735 testClass = JpaRepositoryIntegrationTest, testInstance = org.axonframework.commandhandling.model.JpaRepositoryIntegrationTest@16bba8ae, testMethod = testUpdateAnAggregate@JpaRepositoryIntegrationTest, testException = [null], mergedContextConfiguration = [MergedContextConfiguration@7c689379 testClass = JpaRepositoryIntegrationTest, locations = '{classpath:/META-INF/spring/jpa-repository-context.xml, classpath:/META-INF/spring/db-context.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], contextLoader = 'org.springframework.test.context.support.DelegatingSmartContextLoader', parent = [null]], attributes = map[[empty]]].
2018-10-05 14:35:58,322 [main] INFO  TransactionContext              - Began transaction (1) for test context [DefaultTestContext@aba3735 testClass = JpaRepositoryIntegrationTest, testInstance = org.axonframework.commandhandling.model.JpaRepositoryIntegrationTest@21590b35, testMethod = testStoreAndLoadNewAggregate@JpaRepositoryIntegrationTest, testException = [null], mergedContextConfiguration = [MergedContextConfiguration@7c689379 testClass = JpaRepositoryIntegrationTest, locations = '{classpath:/META-INF/spring/jpa-repository-context.xml, classpath:/META-INF/spring/db-context.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], contextLoader = 'org.springframework.test.context.support.DelegatingSmartContextLoader', parent = [null]], attributes = map[[empty]]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@5135b459]; rollback [true]
2018-10-05 14:35:58,324 [main] INFO  ueryTranslatorFactoryInitiator  - HHH000397: Using ASTQueryTranslatorFactory
2018-10-05 14:35:58,328 [main] INFO  TransactionContext              - Rolled back transaction for test context [DefaultTestContext@aba3735 testClass = JpaRepositoryIntegrationTest, testInstance = org.axonframework.commandhandling.model.JpaRepositoryIntegrationTest@21590b35, testMethod = testStoreAndLoadNewAggregate@JpaRepositoryIntegrationTest, testException = [null], mergedContextConfiguration = [MergedContextConfiguration@7c689379 testClass = JpaRepositoryIntegrationTest, locations = '{classpath:/META-INF/spring/jpa-repository-context.xml, classpath:/META-INF/spring/db-context.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], contextLoader = 'org.springframework.test.context.support.DelegatingSmartContextLoader', parent = [null]], attributes = map[[empty]]].
2018-10-05 14:35:58,330 [main] INFO  TransactionContext              - Began transaction (1) for test context [DefaultTestContext@aba3735 testClass = JpaRepositoryIntegrationTest, testInstance = org.axonframework.commandhandling.model.JpaRepositoryIntegrationTest@30a0a440, testMethod = testDeleteAnAggregate@JpaRepositoryIntegrationTest, testException = [null], mergedContextConfiguration = [MergedContextConfiguration@7c689379 testClass = JpaRepositoryIntegrationTest, locations = '{classpath:/META-INF/spring/jpa-repository-context.xml, classpath:/META-INF/spring/db-context.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], contextLoader = 'org.springframework.test.context.support.DelegatingSmartContextLoader', parent = [null]], attributes = map[[empty]]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@5135b459]; rollback [true]
2018-10-05 14:35:58,341 [main] INFO  TransactionContext              - Rolled back transaction for test context [DefaultTestContext@aba3735 testClass = JpaRepositoryIntegrationTest, testInstance = org.axonframework.commandhandling.model.JpaRepositoryIntegrationTest@30a0a440, testMethod = testDeleteAnAggregate@JpaRepositoryIntegrationTest, testException = [null], mergedContextConfiguration = [MergedContextConfiguration@7c689379 testClass = JpaRepositoryIntegrationTest, locations = '{classpath:/META-INF/spring/jpa-repository-context.xml, classpath:/META-INF/spring/db-context.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], contextLoader = 'org.springframework.test.context.support.DelegatingSmartContextLoader', parent = [null]], attributes = map[[empty]]].
Tests run: 3, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.478 sec - in org.axonframework.commandhandling.model.JpaRepositoryIntegrationTest
Running org.axonframework.commandhandling.model.AnnotatedAggregateTest
Tests run: 1, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.006 sec - in org.axonframework.commandhandling.model.AnnotatedAggregateTest
Running org.axonframework.commandhandling.gateway.CommandGatewayFactoryTest
Tests run: 30, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.214 sec - in org.axonframework.commandhandling.gateway.CommandGatewayFactoryTest
Running org.axonframework.commandhandling.gateway.DefaultCommandGatewayTest
2018-10-05 14:35:58,575 [main] WARN  DefaultCommandGateway           - Command 'java.lang.String' resulted in java.lang.RuntimeException(java.lang.RuntimeException)
Tests run: 10, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.023 sec - in org.axonframework.commandhandling.gateway.DefaultCommandGatewayTest
Running org.axonframework.commandhandling.disruptor.DisruptorRepositoryTest
Tests run: 1, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.033 sec - in org.axonframework.commandhandling.disruptor.DisruptorRepositoryTest
Running org.axonframework.commandhandling.disruptor.DisruptorCommandBusTest_MultiThreaded
2018-10-05 14:35:58,696 [DisruptorCommandBus-4] INFO  DisruptorCommandBus             - Reset notification for 3e030a59-6917-4fa7-8435-7cbfc8cc9ccd received. The aggregate is removed from the blacklist
2018-10-05 14:35:58,696 [DisruptorCommandBus-3] INFO  DisruptorCommandBus             - Reset notification for 9d93bf1b-232e-4344-8496-4d2ab982f17e received. The aggregate is removed from the blacklist
2018-10-05 14:35:58,698 [DisruptorCommandBus-3] INFO  DisruptorCommandBus             - Reset notification for 226967a7-5045-431b-9ff4-5eb917d7572b received. The aggregate is removed from the blacklist
2018-10-05 14:35:58,700 [DisruptorCommandBus-4] INFO  DisruptorCommandBus             - Reset notification for e12592e0-d343-4e27-a290-c182c1dfe397 received. The aggregate is removed from the blacklist
2018-10-05 14:35:58,702 [DisruptorCommandBus-4] INFO  DisruptorCommandBus             - Reset notification for 43a568f9-e54b-4482-9a87-6615f3142ce4 received. The aggregate is removed from the blacklist
2018-10-05 14:35:58,702 [DisruptorCommandBus-4] INFO  DisruptorCommandBus             - Reset notification for 351869c3-2793-4e76-bba7-11f9ee6e0d6c received. The aggregate is removed from the blacklist
2018-10-05 14:35:58,702 [DisruptorCommandBus-4] INFO  DisruptorCommandBus             - Reset notification for eb3d0a8d-db72-402c-9933-bef49305795c received. The aggregate is removed from the blacklist
2018-10-05 14:35:58,710 [DisruptorCommandBus-4] INFO  DisruptorCommandBus             - Reset notification for 2211deac-ba23-49c8-9dbe-790678d31531 received. The aggregate is removed from the blacklist
2018-10-05 14:35:58,710 [DisruptorCommandBus-4] INFO  DisruptorCommandBus             - Reset notification for 9d983318-2655-49db-a6b7-864604e65c30 received. The aggregate is removed from the blacklist
2018-10-05 14:35:58,710 [DisruptorCommandBus-3] INFO  DisruptorCommandBus             - Reset notification for 0819c53e-3a6d-45cc-a0c9-b5d31c2008c1 received. The aggregate is removed from the blacklist
Tests run: 1, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 1.257 sec - in org.axonframework.commandhandling.disruptor.DisruptorCommandBusTest_MultiThreaded
Running org.axonframework.commandhandling.disruptor.DisruptorCommandBusTest
2018-10-05 14:36:01,936 [pool-20-thread-4] INFO  DisruptorCommandBus             - Reset notification for b40cbfb6-65ab-414c-ad75-901b732edb2b received. The aggregate is removed from the blacklist
2018-10-05 14:36:01,952 [pool-20-thread-4] INFO  DisruptorCommandBus             - Reset notification for b40cbfb6-65ab-414c-ad75-901b732edb2b received. The aggregate is removed from the blacklist
2018-10-05 14:36:01,970 [pool-20-thread-4] INFO  DisruptorCommandBus             - Reset notification for b40cbfb6-65ab-414c-ad75-901b732edb2b received. The aggregate is removed from the blacklist
2018-10-05 14:36:01,986 [pool-20-thread-4] INFO  DisruptorCommandBus             - Reset notification for b40cbfb6-65ab-414c-ad75-901b732edb2b received. The aggregate is removed from the blacklist
2018-10-05 14:36:02,011 [pool-20-thread-4] INFO  DisruptorCommandBus             - Reset notification for b40cbfb6-65ab-414c-ad75-901b732edb2b received. The aggregate is removed from the blacklist
2018-10-05 14:36:02,023 [pool-20-thread-4] INFO  DisruptorCommandBus             - Reset notification for b40cbfb6-65ab-414c-ad75-901b732edb2b received. The aggregate is removed from the blacklist
2018-10-05 14:36:02,035 [pool-20-thread-4] INFO  DisruptorCommandBus             - Reset notification for b40cbfb6-65ab-414c-ad75-901b732edb2b received. The aggregate is removed from the blacklist
2018-10-05 14:36:02,045 [pool-20-thread-4] INFO  DisruptorCommandBus             - Reset notification for b40cbfb6-65ab-414c-ad75-901b732edb2b received. The aggregate is removed from the blacklist
2018-10-05 14:36:02,053 [pool-20-thread-4] INFO  DisruptorCommandBus             - Reset notification for b40cbfb6-65ab-414c-ad75-901b732edb2b received. The aggregate is removed from the blacklist
2018-10-05 14:36:02,066 [pool-20-thread-4] INFO  DisruptorCommandBus             - Reset notification for b40cbfb6-65ab-414c-ad75-901b732edb2b received. The aggregate is removed from the blacklist
2018-10-05 14:36:03,341 [DisruptorCommandBus-3] INFO  DisruptorCommandBus             - An error occurred while handling a command [org.axonframework.commandhandling.disruptor.DisruptorCommandBusTest$ErrorCommand].
org.axonframework.common.MockException: This is a failing event. EventStore refuses to store that
2018-10-05 14:36:03,341 [DisruptorCommandBus-4] INFO  DisruptorCommandBus             - An error occurred while handling a command [org.axonframework.commandhandling.disruptor.DisruptorCommandBusTest$ErrorCommand].
org.axonframework.common.MockException: This is a failing event. EventStore refuses to store that
2018-10-05 14:36:03,343 [DisruptorCommandBus-1] INFO  DisruptorCommandBus             - Reset notification for 56e1823a-c66c-4b1c-a25e-2b5cc431548d received. The aggregate is removed from the blacklist
2018-10-05 14:36:03,345 [DisruptorCommandBus-1] INFO  DisruptorCommandBus             - Reset notification for d9fa2748-f986-4c42-a7fc-f431c418fe88 received. The aggregate is removed from the blacklist
2018-10-05 14:36:06,646 [pool-22-thread-4] INFO  DisruptorCommandBus             - Reset notification for 22f910d1-27d6-4eaa-ad7a-47f45fb2d331 received. The aggregate is removed from the blacklist
2018-10-05 14:36:06,657 [pool-22-thread-4] INFO  DisruptorCommandBus             - Reset notification for 22f910d1-27d6-4eaa-ad7a-47f45fb2d331 received. The aggregate is removed from the blacklist
2018-10-05 14:36:06,675 [pool-22-thread-4] INFO  DisruptorCommandBus             - Reset notification for 22f910d1-27d6-4eaa-ad7a-47f45fb2d331 received. The aggregate is removed from the blacklist
2018-10-05 14:36:06,686 [pool-22-thread-4] INFO  DisruptorCommandBus             - Reset notification for 22f910d1-27d6-4eaa-ad7a-47f45fb2d331 received. The aggregate is removed from the blacklist
2018-10-05 14:36:06,697 [pool-22-thread-4] INFO  DisruptorCommandBus             - Reset notification for 22f910d1-27d6-4eaa-ad7a-47f45fb2d331 received. The aggregate is removed from the blacklist
2018-10-05 14:36:06,712 [pool-22-thread-4] INFO  DisruptorCommandBus             - Reset notification for 22f910d1-27d6-4eaa-ad7a-47f45fb2d331 received. The aggregate is removed from the blacklist
2018-10-05 14:36:06,731 [pool-22-thread-4] INFO  DisruptorCommandBus             - Reset notification for 22f910d1-27d6-4eaa-ad7a-47f45fb2d331 received. The aggregate is removed from the blacklist
2018-10-05 14:36:06,744 [pool-22-thread-4] INFO  DisruptorCommandBus             - Reset notification for 22f910d1-27d6-4eaa-ad7a-47f45fb2d331 received. The aggregate is removed from the blacklist
2018-10-05 14:36:06,755 [pool-22-thread-4] INFO  DisruptorCommandBus             - Reset notification for 22f910d1-27d6-4eaa-ad7a-47f45fb2d331 received. The aggregate is removed from the blacklist
2018-10-05 14:36:06,768 [pool-22-thread-4] INFO  DisruptorCommandBus             - Reset notification for 22f910d1-27d6-4eaa-ad7a-47f45fb2d331 received. The aggregate is removed from the blacklist
2018-10-05 14:36:09,294 [DisruptorCommandBus-1] INFO  DisruptorCommandBus             - Reset notification for 156440c7-0fa6-4b9d-b14c-0f415ed678e8 received. The aggregate is removed from the blacklist
2018-10-05 14:36:09,294 [DisruptorCommandBus-2] WARN  DisruptorCommandBus             - Failed sending message [GenericDeadlineMessage{payload={org.axonframework.commandhandling.disruptor.DisruptorCommandBusTest$FailingEvent@6d59202c}, metadata={}, messageIdentifier='1a8da96a-7d85-488b-9492-d969aadf8f84', timestamp='2018-10-05T12:36:09.294Z}] to aggregate with id [156440c7-0fa6-4b9d-b14c-0f415ed678e8]
2018-10-05 14:36:15,948 [pool-25-thread-4] INFO  DisruptorCommandBus             - Reset notification for b1f295aa-32d0-4307-81b7-9a2f25741f6a received. The aggregate is removed from the blacklist
2018-10-05 14:36:15,957 [pool-25-thread-4] INFO  DisruptorCommandBus             - Reset notification for b1f295aa-32d0-4307-81b7-9a2f25741f6a received. The aggregate is removed from the blacklist
2018-10-05 14:36:15,965 [pool-25-thread-4] INFO  DisruptorCommandBus             - Reset notification for b1f295aa-32d0-4307-81b7-9a2f25741f6a received. The aggregate is removed from the blacklist
2018-10-05 14:36:15,974 [pool-25-thread-4] INFO  DisruptorCommandBus             - Reset notification for b1f295aa-32d0-4307-81b7-9a2f25741f6a received. The aggregate is removed from the blacklist
2018-10-05 14:36:15,980 [pool-25-thread-4] INFO  DisruptorCommandBus             - Reset notification for b1f295aa-32d0-4307-81b7-9a2f25741f6a received. The aggregate is removed from the blacklist
2018-10-05 14:36:15,991 [pool-25-thread-4] INFO  DisruptorCommandBus             - Reset notification for b1f295aa-32d0-4307-81b7-9a2f25741f6a received. The aggregate is removed from the blacklist
2018-10-05 14:36:15,996 [pool-25-thread-4] INFO  DisruptorCommandBus             - Reset notification for b1f295aa-32d0-4307-81b7-9a2f25741f6a received. The aggregate is removed from the blacklist
2018-10-05 14:36:15,999 [pool-25-thread-4] INFO  DisruptorCommandBus             - Reset notification for b1f295aa-32d0-4307-81b7-9a2f25741f6a received. The aggregate is removed from the blacklist
2018-10-05 14:36:16,001 [pool-25-thread-4] INFO  DisruptorCommandBus             - Reset notification for b1f295aa-32d0-4307-81b7-9a2f25741f6a received. The aggregate is removed from the blacklist
2018-10-05 14:36:16,006 [pool-25-thread-4] INFO  DisruptorCommandBus             - Reset notification for b1f295aa-32d0-4307-81b7-9a2f25741f6a received. The aggregate is removed from the blacklist
Tests run: 17, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 19.388 sec - in org.axonframework.commandhandling.disruptor.DisruptorCommandBusTest
Running org.axonframework.commandhandling.disruptor.CommandHandlerInvokerTest
Tests run: 10, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.04 sec - in org.axonframework.commandhandling.disruptor.CommandHandlerInvokerTest
Running org.axonframework.commandhandling.disruptor.DisruptorConfigurationTest
Tests run: 2, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0 sec - in org.axonframework.commandhandling.disruptor.DisruptorConfigurationTest
Running org.axonframework.commandhandling.AggregateAnnotationCommandHandlerTest
2018-10-05 14:36:19,386 [main] INFO  LoggingCallback                 - Command executed successfully: org.axonframework.commandhandling.AggregateAnnotationCommandHandlerTest$CreateCommand
2018-10-05 14:36:19,420 [main] INFO  LoggingCallback                 - Command executed successfully: org.axonframework.commandhandling.AggregateAnnotationCommandHandlerTest$CreateFactoryMethodCommand
Tests run: 22, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.188 sec - in org.axonframework.commandhandling.AggregateAnnotationCommandHandlerTest
Running org.axonframework.commandhandling.distributed.commandfilter.CommandFilterTest
Tests run: 4, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.003 sec - in org.axonframework.commandhandling.distributed.commandfilter.CommandFilterTest
Running org.axonframework.commandhandling.distributed.ConsistentHashTest
Tests run: 7, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.013 sec - in org.axonframework.commandhandling.distributed.ConsistentHashTest
Running org.axonframework.commandhandling.distributed.AnnotationRoutingStrategyTest
Tests run: 2, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.004 sec - in org.axonframework.commandhandling.distributed.AnnotationRoutingStrategyTest
Running org.axonframework.commandhandling.distributed.DistributedCommandBusTest
Tests run: 7, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.035 sec - in org.axonframework.commandhandling.distributed.DistributedCommandBusTest
Running org.axonframework.commandhandling.distributed.CommandCallbackRepositoryTest
Tests run: 3, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.001 sec - in org.axonframework.commandhandling.distributed.CommandCallbackRepositoryTest
Running org.axonframework.commandhandling.AnnotationCommandHandlerAdapterTest
Tests run: 6, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.079 sec - in org.axonframework.commandhandling.AnnotationCommandHandlerAdapterTest
Running org.axonframework.commandhandling.AnnotationCommandTargetResolverTest
Tests run: 10, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0 sec - in org.axonframework.commandhandling.AnnotationCommandTargetResolverTest
Running org.axonframework.commandhandling.CommandHandlerInterceptorTest
Tests run: 8, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0 sec - in org.axonframework.commandhandling.CommandHandlerInterceptorTest
Running org.axonframework.commandhandling.SimpleCommandBusTest
Tests run: 10, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0 sec - in org.axonframework.commandhandling.SimpleCommandBusTest
Running org.axonframework.commandhandling.SpawningNewAggregateTest
2018-10-05 14:36:19,782 [main] INFO  LoggingCallback                 - Command executed successfully: org.axonframework.commandhandling.SpawningNewAggregateTest$CreateAggregate1Command
Tests run: 3, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.028 sec - in org.axonframework.commandhandling.SpawningNewAggregateTest
Running org.axonframework.commandhandling.CurrentUnitOfWorkParameterResolverFactoryTest
Tests run: 4, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.066 sec - in org.axonframework.commandhandling.CurrentUnitOfWorkParameterResolverFactoryTest
Running org.axonframework.commandhandling.CommandHandlingTest
Tests run: 1, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.002 sec - in org.axonframework.commandhandling.CommandHandlingTest
Running org.axonframework.commandhandling.callbacks.VoidCallbackTest
Tests run: 1, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0 sec - in org.axonframework.commandhandling.callbacks.VoidCallbackTest
Running org.axonframework.commandhandling.callbacks.FutureCallbackTest
Tests run: 4, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.005 sec - in org.axonframework.commandhandling.callbacks.FutureCallbackTest
Running org.axonframework.commandhandling.AsynchronousCommandBusTest
2018-10-05 14:36:19,883 [main] INFO  LoggingCallback                 - Command executed successfully: java.lang.Object
Tests run: 5, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.018 sec - in org.axonframework.commandhandling.AsynchronousCommandBusTest
Running org.axonframework.commandhandling.GenericCommandMessageTest
Tests run: 4, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0 sec - in org.axonframework.commandhandling.GenericCommandMessageTest
Running org.axonframework.messaging.unitofwork.BatchingUnitOfWorkTest
Tests run: 3, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.005 sec - in org.axonframework.messaging.unitofwork.BatchingUnitOfWorkTest
Running org.axonframework.messaging.unitofwork.CurrentUnitOfWorkTest
Tests run: 3, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0 sec - in org.axonframework.messaging.unitofwork.CurrentUnitOfWorkTest
Running org.axonframework.messaging.unitofwork.RollbackConfigurationTypeTest
Tests run: 3, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0 sec - in org.axonframework.messaging.unitofwork.RollbackConfigurationTypeTest
Running org.axonframework.messaging.unitofwork.UnitOfWorkNestingTest
Tests run: 6, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.006 sec - in org.axonframework.messaging.unitofwork.UnitOfWorkNestingTest
Running org.axonframework.messaging.unitofwork.AbstractUnitOfWorkTest
Tests run: 7, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.066 sec - in org.axonframework.messaging.unitofwork.AbstractUnitOfWorkTest
Running org.axonframework.messaging.unitofwork.ExecutionResultTest
Tests run: 3, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0 sec - in org.axonframework.messaging.unitofwork.ExecutionResultTest
Running org.axonframework.messaging.annotation.HandlerComparatorTest
Tests run: 4, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.001 sec - in org.axonframework.messaging.annotation.HandlerComparatorTest
Running org.axonframework.messaging.annotation.SimpleResourceParameterResolverFactoryTest
Tests run: 4, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0 sec - in org.axonframework.messaging.annotation.SimpleResourceParameterResolverFactoryTest
Running org.axonframework.messaging.annotation.MultiParameterResolverFactoryTest
Tests run: 3, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.016 sec - in org.axonframework.messaging.annotation.MultiParameterResolverFactoryTest
Running org.axonframework.messaging.annotation.MessageIdentifierParameterResolverFactoryTest
Tests run: 4, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.001 sec - in org.axonframework.messaging.annotation.MessageIdentifierParameterResolverFactoryTest
Running org.axonframework.messaging.GenericMessageTest
Tests run: 1, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.001 sec - in org.axonframework.messaging.GenericMessageTest
Running org.axonframework.messaging.DefaultInterceptorChainTest
Tests run: 1, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.001 sec - in org.axonframework.messaging.DefaultInterceptorChainTest
Running org.axonframework.messaging.interceptors.TransactionManagingInterceptorTest
Tests run: 2, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.006 sec - in org.axonframework.messaging.interceptors.TransactionManagingInterceptorTest
Running org.axonframework.messaging.interceptors.BeanValidationInterceptorTest
Tests run: 5, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.092 sec - in org.axonframework.messaging.interceptors.BeanValidationInterceptorTest
Running org.axonframework.messaging.interceptors.CorrelationDataInterceptorTest
Tests run: 1, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.008 sec - in org.axonframework.messaging.interceptors.CorrelationDataInterceptorTest
Running org.axonframework.messaging.interceptors.LoggingInterceptorTest
Tests run: 5, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.082 sec - in org.axonframework.messaging.interceptors.LoggingInterceptorTest
Running org.axonframework.messaging.HeadersTests
Tests run: 11, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.031 sec - in org.axonframework.messaging.HeadersTests
Running org.axonframework.messaging.correlation.MetaDataValueTest
Tests run: 18, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.014 sec - in org.axonframework.messaging.correlation.MetaDataValueTest
Running org.axonframework.messaging.correlation.SimpleCorrelationDataProviderTest
Tests run: 1, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.001 sec - in org.axonframework.messaging.correlation.SimpleCorrelationDataProviderTest
Running org.axonframework.messaging.MetaDataTest
Tests run: 1, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0 sec - in org.axonframework.messaging.MetaDataTest
Running org.axonframework.eventsourcing.eventstore.EmbeddedEventStoreTest
2018-10-05 14:36:20,485 [main] WARN  AbstractEventStore              - Error reading snapshot for aggregate [aggregate]. Reconstructing from entire event stream.
org.axonframework.common.MockException: Mock
2018-10-05 14:36:21,176 [EmbeddedEventStore-1] WARN  EmbeddedEventStore              - An event processor fell behind the tail end of the event store cache. This usually indicates a badly performing event processor.
Tests run: 16, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 1.015 sec - in org.axonframework.eventsourcing.eventstore.EmbeddedEventStoreTest
Running org.axonframework.eventsourcing.eventstore.jdbc.MysqlJdbcEventStorageEngineTest
Tests run: 1, Failures: 0, Errors: 0, Skipped: 1, Time elapsed: 0.18 sec - in org.axonframework.eventsourcing.eventstore.jdbc.MysqlJdbcEventStorageEngineTest
Running org.axonframework.eventsourcing.eventstore.jdbc.JdbcEventStorageEngineTest
Tests run: 27, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.607 sec - in org.axonframework.eventsourcing.eventstore.jdbc.JdbcEventStorageEngineTest
Running org.axonframework.eventsourcing.eventstore.EqualRevisionPredicateTest
Tests run: 5, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.02 sec - in org.axonframework.eventsourcing.eventstore.EqualRevisionPredicateTest
Running org.axonframework.eventsourcing.eventstore.FilteringDomainEventStreamTest
Tests run: 2, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.001 sec - in org.axonframework.eventsourcing.eventstore.FilteringDomainEventStreamTest
Running org.axonframework.eventsourcing.eventstore.jpa.DomainEventEntryTest
Tests run: 1, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.003 sec - in org.axonframework.eventsourcing.eventstore.jpa.DomainEventEntryTest
Running org.axonframework.eventsourcing.eventstore.jpa.JpaEventStorageEngineTest
2018-10-05 14:36:22,078 [main] INFO  DefaultTestContextBootstrapper  - Loaded default TestExecutionListener class names from location [META-INF/spring.factories]: [org.springframework.test.context.web.ServletTestExecutionListener, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener, org.springframework.test.context.support.DependencyInjectionTestExecutionListener, org.springframework.test.context.support.DirtiesContextTestExecutionListener, org.springframework.test.context.transaction.TransactionalTestExecutionListener, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener]
2018-10-05 14:36:22,079 [main] INFO  DefaultTestContextBootstrapper  - Using TestExecutionListeners: [org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener@465652a2, org.springframework.test.context.support.DependencyInjectionTestExecutionListener@4469046b, org.springframework.test.context.support.DirtiesContextTestExecutionListener@73b68d98, org.springframework.test.context.transaction.TransactionalTestExecutionListener@69af6978, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener@1d18e5ad]
2018-10-05 14:36:22,079 [main] INFO  XmlBeanDefinitionReader         - Loading XML bean definitions from class path resource [META-INF/spring/db-context.xml]
2018-10-05 14:36:22,102 [main] INFO  GenericApplicationContext       - Refreshing org.springframework.context.support.GenericApplicationContext@11def039: startup date [Fri Oct 05 14:36:22 CEST 2018]; root of context hierarchy
2018-10-05 14:36:22,113 [main] INFO  redAnnotationBeanPostProcessor  - JSR-330 'javax.inject.Inject' annotation found and supported for autowiring
2018-10-05 14:36:22,147 [main] INFO  DriverManagerDataSource         - Loaded JDBC driver: org.hsqldb.jdbcDriver
2018-10-05 14:36:22,156 [main] INFO  tainerEntityManagerFactoryBean  - Building JPA container EntityManagerFactory for persistence unit 'eventStore'
2018-10-05 14:36:22,157 [main] INFO  LogHelper                       - HHH000204: Processing PersistenceUnitInfo [
	name: eventStore
	...]
2018-10-05 14:36:22,228 [main] INFO  Dialect                         - HHH000400: Using dialect: org.hibernate.dialect.HSQLDialect
2018-10-05 14:36:22,397 [main] WARN  EntityManagerFactoryRegistry    - HHH000436: Entity manager factory name (eventStore) is already registered.  If entity manager will be clustered or passivated, specify a unique value for property 'hibernate.ejb.entitymanager_factory_name'
2018-10-05 14:36:22,397 [main] INFO  tainerEntityManagerFactoryBean  - Initialized JPA EntityManagerFactory for persistence unit 'eventStore'
2018-10-05 14:36:22,478 [main] INFO  TransactionContext              - Began transaction (1) for test context [DefaultTestContext@f563fc1 testClass = JpaEventStorageEngineTest, testInstance = org.axonframework.eventsourcing.eventstore.jpa.JpaEventStorageEngineTest@520ac5da, testMethod = testStoreTwoExactSameSnapshots@JpaEventStorageEngineTest, testException = [null], mergedContextConfiguration = [MergedContextConfiguration@15554017 testClass = JpaEventStorageEngineTest, locations = '{classpath:/META-INF/spring/db-context.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], contextLoader = 'org.springframework.test.context.support.DelegatingSmartContextLoader', parent = [null]], attributes = map[[empty]]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@55b89b11]; rollback [true]
2018-10-05 14:36:22,483 [main] INFO  ueryTranslatorFactoryInitiator  - HHH000397: Using ASTQueryTranslatorFactory
2018-10-05 14:36:22,502 [main] WARN  SqlExceptionHelper              - SQL Warning Code: -1100, SQLState: 02000
2018-10-05 14:36:22,502 [main] WARN  SqlExceptionHelper              - no data
2018-10-05 14:36:22,502 [main] INFO  TransactionContext              - Rolled back transaction for test context [DefaultTestContext@f563fc1 testClass = JpaEventStorageEngineTest, testInstance = org.axonframework.eventsourcing.eventstore.jpa.JpaEventStorageEngineTest@520ac5da, testMethod = testStoreTwoExactSameSnapshots@JpaEventStorageEngineTest, testException = [null], mergedContextConfiguration = [MergedContextConfiguration@15554017 testClass = JpaEventStorageEngineTest, locations = '{classpath:/META-INF/spring/db-context.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], contextLoader = 'org.springframework.test.context.support.DelegatingSmartContextLoader', parent = [null]], attributes = map[[empty]]].
2018-10-05 14:36:22,507 [main] INFO  TransactionContext              - Began transaction (1) for test context [DefaultTestContext@f563fc1 testClass = JpaEventStorageEngineTest, testInstance = org.axonframework.eventsourcing.eventstore.jpa.JpaEventStorageEngineTest@5496cd02, testMethod = testEventsWithUnknownPayloadTypeAreSkipped@JpaEventStorageEngineTest, testException = [null], mergedContextConfiguration = [MergedContextConfiguration@15554017 testClass = JpaEventStorageEngineTest, locations = '{classpath:/META-INF/spring/db-context.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], contextLoader = 'org.springframework.test.context.support.DelegatingSmartContextLoader', parent = [null]], attributes = map[[empty]]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@55b89b11]; rollback [true]
2018-10-05 14:36:22,564 [main] INFO  TransactionContext              - Rolled back transaction for test context [DefaultTestContext@f563fc1 testClass = JpaEventStorageEngineTest, testInstance = org.axonframework.eventsourcing.eventstore.jpa.JpaEventStorageEngineTest@5496cd02, testMethod = testEventsWithUnknownPayloadTypeAreSkipped@JpaEventStorageEngineTest, testException = [null], mergedContextConfiguration = [MergedContextConfiguration@15554017 testClass = JpaEventStorageEngineTest, locations = '{classpath:/META-INF/spring/db-context.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], contextLoader = 'org.springframework.test.context.support.DelegatingSmartContextLoader', parent = [null]], attributes = map[[empty]]].
2018-10-05 14:36:22,573 [main] INFO  TransactionContext              - Began transaction (1) for test context [DefaultTestContext@f563fc1 testClass = JpaEventStorageEngineTest, testInstance = org.axonframework.eventsourcing.eventstore.jpa.JpaEventStorageEngineTest@7817824d, testMethod = testStoreEventsWithCustomEntity@JpaEventStorageEngineTest, testException = [null], mergedContextConfiguration = [MergedContextConfiguration@15554017 testClass = JpaEventStorageEngineTest, locations = '{classpath:/META-INF/spring/db-context.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], contextLoader = 'org.springframework.test.context.support.DelegatingSmartContextLoader', parent = [null]], attributes = map[[empty]]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@55b89b11]; rollback [true]
2018-10-05 14:36:22,620 [main] INFO  TransactionContext              - Rolled back transaction for test context [DefaultTestContext@f563fc1 testClass = JpaEventStorageEngineTest, testInstance = org.axonframework.eventsourcing.eventstore.jpa.JpaEventStorageEngineTest@7817824d, testMethod = testStoreEventsWithCustomEntity@JpaEventStorageEngineTest, testException = [null], mergedContextConfiguration = [MergedContextConfiguration@15554017 testClass = JpaEventStorageEngineTest, locations = '{classpath:/META-INF/spring/db-context.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], contextLoader = 'org.springframework.test.context.support.DelegatingSmartContextLoader', parent = [null]], attributes = map[[empty]]].
2018-10-05 14:36:22,621 [main] INFO  GenericApplicationContext       - Closing org.springframework.context.support.GenericApplicationContext@11def039: startup date [Fri Oct 05 14:36:22 CEST 2018]; root of context hierarchy
2018-10-05 14:36:22,622 [main] INFO  tainerEntityManagerFactoryBean  - Closing JPA EntityManagerFactory for persistence unit 'eventStore'
2018-10-05 14:36:22,623 [main] INFO  XmlBeanDefinitionReader         - Loading XML bean definitions from class path resource [META-INF/spring/db-context.xml]
2018-10-05 14:36:22,642 [main] INFO  GenericApplicationContext       - Refreshing org.springframework.context.support.GenericApplicationContext@4c963d59: startup date [Fri Oct 05 14:36:22 CEST 2018]; root of context hierarchy
2018-10-05 14:36:22,653 [main] INFO  redAnnotationBeanPostProcessor  - JSR-330 'javax.inject.Inject' annotation found and supported for autowiring
2018-10-05 14:36:22,686 [main] INFO  DriverManagerDataSource         - Loaded JDBC driver: org.hsqldb.jdbcDriver
2018-10-05 14:36:22,695 [main] INFO  tainerEntityManagerFactoryBean  - Building JPA container EntityManagerFactory for persistence unit 'eventStore'
2018-10-05 14:36:22,695 [main] INFO  LogHelper                       - HHH000204: Processing PersistenceUnitInfo [
	name: eventStore
	...]
2018-10-05 14:36:22,767 [main] INFO  Dialect                         - HHH000400: Using dialect: org.hibernate.dialect.HSQLDialect
2018-10-05 14:36:22,931 [main] WARN  EntityManagerFactoryRegistry    - HHH000436: Entity manager factory name (eventStore) is already registered.  If entity manager will be clustered or passivated, specify a unique value for property 'hibernate.ejb.entitymanager_factory_name'
2018-10-05 14:36:22,931 [main] INFO  tainerEntityManagerFactoryBean  - Initialized JPA EntityManagerFactory for persistence unit 'eventStore'
2018-10-05 14:36:22,972 [main] INFO  TransactionContext              - Began transaction (1) for test context [DefaultTestContext@f563fc1 testClass = JpaEventStorageEngineTest, testInstance = org.axonframework.eventsourcing.eventstore.jpa.JpaEventStorageEngineTest@46bb0567, testMethod = testStoreAndLoadEventsFromDatastore@JpaEventStorageEngineTest, testException = [null], mergedContextConfiguration = [MergedContextConfiguration@15554017 testClass = JpaEventStorageEngineTest, locations = '{classpath:/META-INF/spring/db-context.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], contextLoader = 'org.springframework.test.context.support.DelegatingSmartContextLoader', parent = [null]], attributes = map[[empty]]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@4a4a1973]; rollback [true]
2018-10-05 14:36:22,975 [main] INFO  ueryTranslatorFactoryInitiator  - HHH000397: Using ASTQueryTranslatorFactory
2018-10-05 14:36:22,989 [main] INFO  TransactionContext              - Rolled back transaction for test context [DefaultTestContext@f563fc1 testClass = JpaEventStorageEngineTest, testInstance = org.axonframework.eventsourcing.eventstore.jpa.JpaEventStorageEngineTest@46bb0567, testMethod = testStoreAndLoadEventsFromDatastore@JpaEventStorageEngineTest, testException = [null], mergedContextConfiguration = [MergedContextConfiguration@15554017 testClass = JpaEventStorageEngineTest, locations = '{classpath:/META-INF/spring/db-context.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], contextLoader = 'org.springframework.test.context.support.DelegatingSmartContextLoader', parent = [null]], attributes = map[[empty]]].
2018-10-05 14:36:22,993 [main] INFO  TransactionContext              - Began transaction (1) for test context [DefaultTestContext@f563fc1 testClass = JpaEventStorageEngineTest, testInstance = org.axonframework.eventsourcing.eventstore.jpa.JpaEventStorageEngineTest@102a1a4, testMethod = testLoadLastSequenceNumber@JpaEventStorageEngineTest, testException = [null], mergedContextConfiguration = [MergedContextConfiguration@15554017 testClass = JpaEventStorageEngineTest, locations = '{classpath:/META-INF/spring/db-context.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], contextLoader = 'org.springframework.test.context.support.DelegatingSmartContextLoader', parent = [null]], attributes = map[[empty]]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@4a4a1973]; rollback [true]
2018-10-05 14:36:23,011 [main] INFO  TransactionContext              - Rolled back transaction for test context [DefaultTestContext@f563fc1 testClass = JpaEventStorageEngineTest, testInstance = org.axonframework.eventsourcing.eventstore.jpa.JpaEventStorageEngineTest@102a1a4, testMethod = testLoadLastSequenceNumber@JpaEventStorageEngineTest, testException = [null], mergedContextConfiguration = [MergedContextConfiguration@15554017 testClass = JpaEventStorageEngineTest, locations = '{classpath:/META-INF/spring/db-context.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], contextLoader = 'org.springframework.test.context.support.DelegatingSmartContextLoader', parent = [null]], attributes = map[[empty]]].
2018-10-05 14:36:23,015 [main] INFO  TransactionContext              - Began transaction (1) for test context [DefaultTestContext@f563fc1 testClass = JpaEventStorageEngineTest, testInstance = org.axonframework.eventsourcing.eventstore.jpa.JpaEventStorageEngineTest@3e9f0660, testMethod = testOldGapsAreRemovedFromProvidedTrackingToken@JpaEventStorageEngineTest, testException = [null], mergedContextConfiguration = [MergedContextConfiguration@15554017 testClass = JpaEventStorageEngineTest, locations = '{classpath:/META-INF/spring/db-context.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], contextLoader = 'org.springframework.test.context.support.DelegatingSmartContextLoader', parent = [null]], attributes = map[[empty]]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@4a4a1973]; rollback [true]
2018-10-05 14:36:23,065 [main] INFO  TransactionContext              - Rolled back transaction for test context [DefaultTestContext@f563fc1 testClass = JpaEventStorageEngineTest, testInstance = org.axonframework.eventsourcing.eventstore.jpa.JpaEventStorageEngineTest@3e9f0660, testMethod = testOldGapsAreRemovedFromProvidedTrackingToken@JpaEventStorageEngineTest, testException = [null], mergedContextConfiguration = [MergedContextConfiguration@15554017 testClass = JpaEventStorageEngineTest, locations = '{classpath:/META-INF/spring/db-context.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], contextLoader = 'org.springframework.test.context.support.DelegatingSmartContextLoader', parent = [null]], attributes = map[[empty]]].
2018-10-05 14:36:23,066 [main] INFO  GenericApplicationContext       - Closing org.springframework.context.support.GenericApplicationContext@4c963d59: startup date [Fri Oct 05 14:36:22 CEST 2018]; root of context hierarchy
2018-10-05 14:36:23,067 [main] INFO  tainerEntityManagerFactoryBean  - Closing JPA EntityManagerFactory for persistence unit 'eventStore'
2018-10-05 14:36:23,068 [main] INFO  XmlBeanDefinitionReader         - Loading XML bean definitions from class path resource [META-INF/spring/db-context.xml]
2018-10-05 14:36:23,088 [main] INFO  GenericApplicationContext       - Refreshing org.springframework.context.support.GenericApplicationContext@70d5f272: startup date [Fri Oct 05 14:36:23 CEST 2018]; root of context hierarchy
2018-10-05 14:36:23,099 [main] INFO  redAnnotationBeanPostProcessor  - JSR-330 'javax.inject.Inject' annotation found and supported for autowiring
2018-10-05 14:36:23,132 [main] INFO  DriverManagerDataSource         - Loaded JDBC driver: org.hsqldb.jdbcDriver
2018-10-05 14:36:23,141 [main] INFO  tainerEntityManagerFactoryBean  - Building JPA container EntityManagerFactory for persistence unit 'eventStore'
2018-10-05 14:36:23,141 [main] INFO  LogHelper                       - HHH000204: Processing PersistenceUnitInfo [
	name: eventStore
	...]
2018-10-05 14:36:23,214 [main] INFO  Dialect                         - HHH000400: Using dialect: org.hibernate.dialect.HSQLDialect
2018-10-05 14:36:23,368 [main] WARN  EntityManagerFactoryRegistry    - HHH000436: Entity manager factory name (eventStore) is already registered.  If entity manager will be clustered or passivated, specify a unique value for property 'hibernate.ejb.entitymanager_factory_name'
2018-10-05 14:36:23,369 [main] INFO  tainerEntityManagerFactoryBean  - Initialized JPA EntityManagerFactory for persistence unit 'eventStore'
2018-10-05 14:36:23,408 [main] INFO  TransactionContext              - Began transaction (1) for test context [DefaultTestContext@f563fc1 testClass = JpaEventStorageEngineTest, testInstance = org.axonframework.eventsourcing.eventstore.jpa.JpaEventStorageEngineTest@7116f350, testMethod = testGapsForVeryOldEventsAreNotIncluded@JpaEventStorageEngineTest, testException = [null], mergedContextConfiguration = [MergedContextConfiguration@15554017 testClass = JpaEventStorageEngineTest, locations = '{classpath:/META-INF/spring/db-context.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], contextLoader = 'org.springframework.test.context.support.DelegatingSmartContextLoader', parent = [null]], attributes = map[[empty]]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@5c6eb961]; rollback [true]
2018-10-05 14:36:23,412 [main] INFO  ueryTranslatorFactoryInitiator  - HHH000397: Using ASTQueryTranslatorFactory
2018-10-05 14:36:23,438 [main] INFO  TransactionContext              - Rolled back transaction for test context [DefaultTestContext@f563fc1 testClass = JpaEventStorageEngineTest, testInstance = org.axonframework.eventsourcing.eventstore.jpa.JpaEventStorageEngineTest@7116f350, testMethod = testGapsForVeryOldEventsAreNotIncluded@JpaEventStorageEngineTest, testException = [null], mergedContextConfiguration = [MergedContextConfiguration@15554017 testClass = JpaEventStorageEngineTest, locations = '{classpath:/META-INF/spring/db-context.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], contextLoader = 'org.springframework.test.context.support.DelegatingSmartContextLoader', parent = [null]], attributes = map[[empty]]].
2018-10-05 14:36:23,442 [main] INFO  TransactionContext              - Began transaction (1) for test context [DefaultTestContext@f563fc1 testClass = JpaEventStorageEngineTest, testInstance = org.axonframework.eventsourcing.eventstore.jpa.JpaEventStorageEngineTest@2a670af9, testMethod = testUnknownSerializedTypeCausesException@JpaEventStorageEngineTest, testException = [null], mergedContextConfiguration = [MergedContextConfiguration@15554017 testClass = JpaEventStorageEngineTest, locations = '{classpath:/META-INF/spring/db-context.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], contextLoader = 'org.springframework.test.context.support.DelegatingSmartContextLoader', parent = [null]], attributes = map[[empty]]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@5c6eb961]; rollback [true]
2018-10-05 14:36:23,459 [main] INFO  TransactionContext              - Rolled back transaction for test context [DefaultTestContext@f563fc1 testClass = JpaEventStorageEngineTest, testInstance = org.axonframework.eventsourcing.eventstore.jpa.JpaEventStorageEngineTest@2a670af9, testMethod = testUnknownSerializedTypeCausesException@JpaEventStorageEngineTest, testException = [null], mergedContextConfiguration = [MergedContextConfiguration@15554017 testClass = JpaEventStorageEngineTest, locations = '{classpath:/META-INF/spring/db-context.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], contextLoader = 'org.springframework.test.context.support.DelegatingSmartContextLoader', parent = [null]], attributes = map[[empty]]].
2018-10-05 14:36:23,463 [main] INFO  TransactionContext              - Began transaction (1) for test context [DefaultTestContext@f563fc1 testClass = JpaEventStorageEngineTest, testInstance = org.axonframework.eventsourcing.eventstore.jpa.JpaEventStorageEngineTest@31809f2b, testMethod = testLoad_LargeAmountOfEvents@BatchingEventStorageEngineTest, testException = [null], mergedContextConfiguration = [MergedContextConfiguration@15554017 testClass = JpaEventStorageEngineTest, locations = '{classpath:/META-INF/spring/db-context.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], contextLoader = 'org.springframework.test.context.support.DelegatingSmartContextLoader', parent = [null]], attributes = map[[empty]]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@5c6eb961]; rollback [true]
2018-10-05 14:36:23,587 [EmbeddedEventStore-0] ERROR EmbeddedEventStore              - Failed to read events from the underlying event storage
java.lang.IllegalStateException: EntityManagerFactory is closed
	at org.hibernate.jpa.internal.EntityManagerFactoryImpl.validateNotClosed(EntityManagerFactoryImpl.java:367)
	at org.hibernate.jpa.internal.EntityManagerFactoryImpl.internalCreateEntityManager(EntityManagerFactoryImpl.java:316)
	at org.hibernate.jpa.internal.EntityManagerFactoryImpl.createEntityManager(EntityManagerFactoryImpl.java:286)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.invokeProxyMethod(AbstractEntityManagerFactoryBean.java:476)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean$ManagedEntityManagerFactoryInvocationHandler.invoke(AbstractEntityManagerFactoryBean.java:655)
	at com.sun.proxy.$Proxy66.createEntityManager(Unknown Source)
	at org.springframework.orm.jpa.SharedEntityManagerCreator$SharedEntityManagerInvocationHandler.invoke(SharedEntityManagerCreator.java:298)
	at com.sun.proxy.$Proxy67.createQuery(Unknown Source)
	at org.axonframework.eventsourcing.eventstore.jpa.JpaEventStorageEngine.lambda$fetchTrackedEvents$1(JpaEventStorageEngine.java:240)
	at org.axonframework.common.transaction.TransactionManager.fetchInTransaction(TransactionManager.java:67)
	at org.axonframework.eventsourcing.eventstore.jpa.JpaEventStorageEngine.fetchTrackedEvents(JpaEventStorageEngine.java:230)
	at org.axonframework.eventsourcing.eventstore.BatchingEventStorageEngine.lambda$readEventData$1(BatchingEventStorageEngine.java:154)
	at org.axonframework.eventsourcing.eventstore.BatchingEventStorageEngine$EventStreamSpliterator.tryAdvance(BatchingEventStorageEngine.java:192)
	at java.util.Spliterator.forEachRemaining(Spliterator.java:326)
	at java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:481)
	at java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:471)
	at java.util.stream.ForEachOps$ForEachOp.evaluateSequential(ForEachOps.java:151)
	at java.util.stream.ForEachOps$ForEachOp$OfRef.evaluateSequential(ForEachOps.java:174)
	at java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)
	at java.util.stream.ReferencePipeline.forEach(ReferencePipeline.java:418)
	at org.axonframework.eventsourcing.eventstore.EmbeddedEventStore$EventProducer.fetchData(EmbeddedEventStore.java:265)
	at org.axonframework.eventsourcing.eventstore.EmbeddedEventStore$EventProducer.run(EmbeddedEventStore.java:231)
	at org.axonframework.eventsourcing.eventstore.EmbeddedEventStore$EventProducer.access$2000(EmbeddedEventStore.java:210)
	at org.axonframework.eventsourcing.eventstore.EmbeddedEventStore.lambda$ensureProducerStarted$0(EmbeddedEventStore.java:160)
	at java.lang.Thread.run(Thread.java:745)
2018-10-05 14:36:23,628 [main] INFO  TransactionContext              - Rolled back transaction for test context [DefaultTestContext@f563fc1 testClass = JpaEventStorageEngineTest, testInstance = org.axonframework.eventsourcing.eventstore.jpa.JpaEventStorageEngineTest@31809f2b, testMethod = testLoad_LargeAmountOfEvents@BatchingEventStorageEngineTest, testException = [null], mergedContextConfiguration = [MergedContextConfiguration@15554017 testClass = JpaEventStorageEngineTest, locations = '{classpath:/META-INF/spring/db-context.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], contextLoader = 'org.springframework.test.context.support.DelegatingSmartContextLoader', parent = [null]], attributes = map[[empty]]].
2018-10-05 14:36:23,633 [main] INFO  TransactionContext              - Began transaction (1) for test context [DefaultTestContext@f563fc1 testClass = JpaEventStorageEngineTest, testInstance = org.axonframework.eventsourcing.eventstore.jpa.JpaEventStorageEngineTest@12e7664b, testMethod = testStoreDuplicateEventWithoutExceptionResolver@AbstractEventStorageEngineTest, testException = [null], mergedContextConfiguration = [MergedContextConfiguration@15554017 testClass = JpaEventStorageEngineTest, locations = '{classpath:/META-INF/spring/db-context.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], contextLoader = 'org.springframework.test.context.support.DelegatingSmartContextLoader', parent = [null]], attributes = map[[empty]]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@5c6eb961]; rollback [true]
2018-10-05 14:36:23,640 [main] WARN  SqlExceptionHelper              - SQL Error: -104, SQLState: 23505
2018-10-05 14:36:23,640 [main] ERROR SqlExceptionHelper              - integrity constraint violation: unique constraint or index violation; UKDG43IA27YPO1JOVW2X64VBWV8 table: DOMAINEVENTENTRY
2018-10-05 14:36:23,641 [main] INFO  AbstractBatchImpl               - HHH000010: On release of batch it still contained JDBC statements
2018-10-05 14:36:23,642 [main] INFO  TransactionContext              - Rolled back transaction for test context [DefaultTestContext@f563fc1 testClass = JpaEventStorageEngineTest, testInstance = org.axonframework.eventsourcing.eventstore.jpa.JpaEventStorageEngineTest@12e7664b, testMethod = testStoreDuplicateEventWithoutExceptionResolver@AbstractEventStorageEngineTest, testException = [null], mergedContextConfiguration = [MergedContextConfiguration@15554017 testClass = JpaEventStorageEngineTest, locations = '{classpath:/META-INF/spring/db-context.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], contextLoader = 'org.springframework.test.context.support.DelegatingSmartContextLoader', parent = [null]], attributes = map[[empty]]].
2018-10-05 14:36:23,643 [main] INFO  GenericApplicationContext       - Closing org.springframework.context.support.GenericApplicationContext@70d5f272: startup date [Fri Oct 05 14:36:23 CEST 2018]; root of context hierarchy
2018-10-05 14:36:23,643 [main] INFO  tainerEntityManagerFactoryBean  - Closing JPA EntityManagerFactory for persistence unit 'eventStore'
2018-10-05 14:36:23,643 [main] INFO  XmlBeanDefinitionReader         - Loading XML bean definitions from class path resource [META-INF/spring/db-context.xml]
2018-10-05 14:36:23,657 [main] INFO  GenericApplicationContext       - Refreshing org.springframework.context.support.GenericApplicationContext@6ecd9708: startup date [Fri Oct 05 14:36:23 CEST 2018]; root of context hierarchy
2018-10-05 14:36:23,664 [main] INFO  redAnnotationBeanPostProcessor  - JSR-330 'javax.inject.Inject' annotation found and supported for autowiring
2018-10-05 14:36:23,686 [main] INFO  DriverManagerDataSource         - Loaded JDBC driver: org.hsqldb.jdbcDriver
2018-10-05 14:36:23,693 [main] INFO  tainerEntityManagerFactoryBean  - Building JPA container EntityManagerFactory for persistence unit 'eventStore'
2018-10-05 14:36:23,693 [main] INFO  LogHelper                       - HHH000204: Processing PersistenceUnitInfo [
	name: eventStore
	...]
2018-10-05 14:36:23,740 [main] INFO  Dialect                         - HHH000400: Using dialect: org.hibernate.dialect.HSQLDialect
2018-10-05 14:36:23,838 [main] WARN  EntityManagerFactoryRegistry    - HHH000436: Entity manager factory name (eventStore) is already registered.  If entity manager will be clustered or passivated, specify a unique value for property 'hibernate.ejb.entitymanager_factory_name'
2018-10-05 14:36:23,838 [main] INFO  tainerEntityManagerFactoryBean  - Initialized JPA EntityManagerFactory for persistence unit 'eventStore'
2018-10-05 14:36:23,864 [main] INFO  TransactionContext              - Began transaction (1) for test context [DefaultTestContext@f563fc1 testClass = JpaEventStorageEngineTest, testInstance = org.axonframework.eventsourcing.eventstore.jpa.JpaEventStorageEngineTest@4a45042a, testMethod = testStoreDuplicateEventWithExceptionTranslator@AbstractEventStorageEngineTest, testException = [null], mergedContextConfiguration = [MergedContextConfiguration@15554017 testClass = JpaEventStorageEngineTest, locations = '{classpath:/META-INF/spring/db-context.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], contextLoader = 'org.springframework.test.context.support.DelegatingSmartContextLoader', parent = [null]], attributes = map[[empty]]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@6bce1a7f]; rollback [true]
2018-10-05 14:36:23,867 [main] INFO  ueryTranslatorFactoryInitiator  - HHH000397: Using ASTQueryTranslatorFactory
2018-10-05 14:36:23,871 [main] WARN  SqlExceptionHelper              - SQL Error: -104, SQLState: 23505
2018-10-05 14:36:23,871 [main] ERROR SqlExceptionHelper              - integrity constraint violation: unique constraint or index violation; UKDG43IA27YPO1JOVW2X64VBWV8 table: DOMAINEVENTENTRY
2018-10-05 14:36:23,871 [main] INFO  AbstractBatchImpl               - HHH000010: On release of batch it still contained JDBC statements
2018-10-05 14:36:23,871 [main] INFO  TransactionContext              - Rolled back transaction for test context [DefaultTestContext@f563fc1 testClass = JpaEventStorageEngineTest, testInstance = org.axonframework.eventsourcing.eventstore.jpa.JpaEventStorageEngineTest@4a45042a, testMethod = testStoreDuplicateEventWithExceptionTranslator@AbstractEventStorageEngineTest, testException = [null], mergedContextConfiguration = [MergedContextConfiguration@15554017 testClass = JpaEventStorageEngineTest, locations = '{classpath:/META-INF/spring/db-context.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], contextLoader = 'org.springframework.test.context.support.DelegatingSmartContextLoader', parent = [null]], attributes = map[[empty]]].
2018-10-05 14:36:23,872 [main] INFO  GenericApplicationContext       - Closing org.springframework.context.support.GenericApplicationContext@6ecd9708: startup date [Fri Oct 05 14:36:23 CEST 2018]; root of context hierarchy
2018-10-05 14:36:23,872 [main] INFO  tainerEntityManagerFactoryBean  - Closing JPA EntityManagerFactory for persistence unit 'eventStore'
2018-10-05 14:36:23,873 [main] INFO  XmlBeanDefinitionReader         - Loading XML bean definitions from class path resource [META-INF/spring/db-context.xml]
2018-10-05 14:36:23,885 [main] INFO  GenericApplicationContext       - Refreshing org.springframework.context.support.GenericApplicationContext@1182ec58: startup date [Fri Oct 05 14:36:23 CEST 2018]; root of context hierarchy
2018-10-05 14:36:23,892 [main] INFO  redAnnotationBeanPostProcessor  - JSR-330 'javax.inject.Inject' annotation found and supported for autowiring
2018-10-05 14:36:23,917 [main] INFO  DriverManagerDataSource         - Loaded JDBC driver: org.hsqldb.jdbcDriver
2018-10-05 14:36:23,923 [main] INFO  tainerEntityManagerFactoryBean  - Building JPA container EntityManagerFactory for persistence unit 'eventStore'
2018-10-05 14:36:23,923 [main] INFO  LogHelper                       - HHH000204: Processing PersistenceUnitInfo [
	name: eventStore
	...]
2018-10-05 14:36:24,029 [main] INFO  Dialect                         - HHH000400: Using dialect: org.hibernate.dialect.HSQLDialect
2018-10-05 14:36:24,146 [main] WARN  EntityManagerFactoryRegistry    - HHH000436: Entity manager factory name (eventStore) is already registered.  If entity manager will be clustered or passivated, specify a unique value for property 'hibernate.ejb.entitymanager_factory_name'
2018-10-05 14:36:24,146 [main] INFO  tainerEntityManagerFactoryBean  - Initialized JPA EntityManagerFactory for persistence unit 'eventStore'
2018-10-05 14:36:24,173 [main] INFO  TransactionContext              - Began transaction (1) for test context [DefaultTestContext@f563fc1 testClass = JpaEventStorageEngineTest, testInstance = org.axonframework.eventsourcing.eventstore.jpa.JpaEventStorageEngineTest@8a325ca, testMethod = testStoreAndLoadEventsWithUpcaster@AbstractEventStorageEngineTest, testException = [null], mergedContextConfiguration = [MergedContextConfiguration@15554017 testClass = JpaEventStorageEngineTest, locations = '{classpath:/META-INF/spring/db-context.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], contextLoader = 'org.springframework.test.context.support.DelegatingSmartContextLoader', parent = [null]], attributes = map[[empty]]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@52b11deb]; rollback [true]
2018-10-05 14:36:24,176 [main] INFO  ueryTranslatorFactoryInitiator  - HHH000397: Using ASTQueryTranslatorFactory
2018-10-05 14:36:24,191 [main] INFO  TransactionContext              - Rolled back transaction for test context [DefaultTestContext@f563fc1 testClass = JpaEventStorageEngineTest, testInstance = org.axonframework.eventsourcing.eventstore.jpa.JpaEventStorageEngineTest@8a325ca, testMethod = testStoreAndLoadEventsWithUpcaster@AbstractEventStorageEngineTest, testException = [null], mergedContextConfiguration = [MergedContextConfiguration@15554017 testClass = JpaEventStorageEngineTest, locations = '{classpath:/META-INF/spring/db-context.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], contextLoader = 'org.springframework.test.context.support.DelegatingSmartContextLoader', parent = [null]], attributes = map[[empty]]].
2018-10-05 14:36:24,192 [main] INFO  GenericApplicationContext       - Closing org.springframework.context.support.GenericApplicationContext@1182ec58: startup date [Fri Oct 05 14:36:23 CEST 2018]; root of context hierarchy
2018-10-05 14:36:24,192 [main] INFO  tainerEntityManagerFactoryBean  - Closing JPA EntityManagerFactory for persistence unit 'eventStore'
2018-10-05 14:36:24,193 [main] INFO  XmlBeanDefinitionReader         - Loading XML bean definitions from class path resource [META-INF/spring/db-context.xml]
2018-10-05 14:36:24,209 [main] INFO  GenericApplicationContext       - Refreshing org.springframework.context.support.GenericApplicationContext@57f778e9: startup date [Fri Oct 05 14:36:24 CEST 2018]; root of context hierarchy
2018-10-05 14:36:24,218 [main] INFO  redAnnotationBeanPostProcessor  - JSR-330 'javax.inject.Inject' annotation found and supported for autowiring
2018-10-05 14:36:24,246 [main] INFO  DriverManagerDataSource         - Loaded JDBC driver: org.hsqldb.jdbcDriver
2018-10-05 14:36:24,252 [main] INFO  tainerEntityManagerFactoryBean  - Building JPA container EntityManagerFactory for persistence unit 'eventStore'
2018-10-05 14:36:24,252 [main] INFO  LogHelper                       - HHH000204: Processing PersistenceUnitInfo [
	name: eventStore
	...]
2018-10-05 14:36:24,298 [main] INFO  Dialect                         - HHH000400: Using dialect: org.hibernate.dialect.HSQLDialect
2018-10-05 14:36:24,417 [main] WARN  EntityManagerFactoryRegistry    - HHH000436: Entity manager factory name (eventStore) is already registered.  If entity manager will be clustered or passivated, specify a unique value for property 'hibernate.ejb.entitymanager_factory_name'
2018-10-05 14:36:24,417 [main] INFO  tainerEntityManagerFactoryBean  - Initialized JPA EntityManagerFactory for persistence unit 'eventStore'
2018-10-05 14:36:24,442 [main] INFO  TransactionContext              - Began transaction (1) for test context [DefaultTestContext@f563fc1 testClass = JpaEventStorageEngineTest, testInstance = org.axonframework.eventsourcing.eventstore.jpa.JpaEventStorageEngineTest@60a64104, testMethod = testUniqueKeyConstraintOnEventIdentifier@AbstractEventStorageEngineTest, testException = [null], mergedContextConfiguration = [MergedContextConfiguration@15554017 testClass = JpaEventStorageEngineTest, locations = '{classpath:/META-INF/spring/db-context.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], contextLoader = 'org.springframework.test.context.support.DelegatingSmartContextLoader', parent = [null]], attributes = map[[empty]]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@2a94a702]; rollback [true]
2018-10-05 14:36:24,446 [main] INFO  ueryTranslatorFactoryInitiator  - HHH000397: Using ASTQueryTranslatorFactory
2018-10-05 14:36:24,449 [main] WARN  SqlExceptionHelper              - SQL Error: -104, SQLState: 23505
2018-10-05 14:36:24,449 [main] ERROR SqlExceptionHelper              - integrity constraint violation: unique constraint or index violation; UK_K5LT6D2792AMNLOO7Q91NJP0V table: DOMAINEVENTENTRY
2018-10-05 14:36:24,450 [main] INFO  AbstractBatchImpl               - HHH000010: On release of batch it still contained JDBC statements
2018-10-05 14:36:24,450 [main] INFO  TransactionContext              - Rolled back transaction for test context [DefaultTestContext@f563fc1 testClass = JpaEventStorageEngineTest, testInstance = org.axonframework.eventsourcing.eventstore.jpa.JpaEventStorageEngineTest@60a64104, testMethod = testUniqueKeyConstraintOnEventIdentifier@AbstractEventStorageEngineTest, testException = [null], mergedContextConfiguration = [MergedContextConfiguration@15554017 testClass = JpaEventStorageEngineTest, locations = '{classpath:/META-INF/spring/db-context.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], contextLoader = 'org.springframework.test.context.support.DelegatingSmartContextLoader', parent = [null]], attributes = map[[empty]]].
2018-10-05 14:36:24,451 [main] INFO  GenericApplicationContext       - Closing org.springframework.context.support.GenericApplicationContext@57f778e9: startup date [Fri Oct 05 14:36:24 CEST 2018]; root of context hierarchy
2018-10-05 14:36:24,451 [main] INFO  tainerEntityManagerFactoryBean  - Closing JPA EntityManagerFactory for persistence unit 'eventStore'
2018-10-05 14:36:24,452 [main] INFO  XmlBeanDefinitionReader         - Loading XML bean definitions from class path resource [META-INF/spring/db-context.xml]
2018-10-05 14:36:24,467 [main] INFO  GenericApplicationContext       - Refreshing org.springframework.context.support.GenericApplicationContext@315f4718: startup date [Fri Oct 05 14:36:24 CEST 2018]; root of context hierarchy
2018-10-05 14:36:24,477 [main] INFO  redAnnotationBeanPostProcessor  - JSR-330 'javax.inject.Inject' annotation found and supported for autowiring
2018-10-05 14:36:24,501 [main] INFO  DriverManagerDataSource         - Loaded JDBC driver: org.hsqldb.jdbcDriver
2018-10-05 14:36:24,507 [main] INFO  tainerEntityManagerFactoryBean  - Building JPA container EntityManagerFactory for persistence unit 'eventStore'
2018-10-05 14:36:24,507 [main] INFO  LogHelper                       - HHH000204: Processing PersistenceUnitInfo [
	name: eventStore
	...]
2018-10-05 14:36:24,553 [main] INFO  Dialect                         - HHH000400: Using dialect: org.hibernate.dialect.HSQLDialect
2018-10-05 14:36:24,593 [EmbeddedEventStore-0] ERROR EmbeddedEventStore              - Failed to read events from the underlying event storage
java.lang.IllegalStateException: EntityManagerFactory is closed
	at org.hibernate.jpa.internal.EntityManagerFactoryImpl.validateNotClosed(EntityManagerFactoryImpl.java:367)
	at org.hibernate.jpa.internal.EntityManagerFactoryImpl.internalCreateEntityManager(EntityManagerFactoryImpl.java:316)
	at org.hibernate.jpa.internal.EntityManagerFactoryImpl.createEntityManager(EntityManagerFactoryImpl.java:286)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.invokeProxyMethod(AbstractEntityManagerFactoryBean.java:476)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean$ManagedEntityManagerFactoryInvocationHandler.invoke(AbstractEntityManagerFactoryBean.java:655)
	at com.sun.proxy.$Proxy66.createEntityManager(Unknown Source)
	at org.springframework.orm.jpa.SharedEntityManagerCreator$SharedEntityManagerInvocationHandler.invoke(SharedEntityManagerCreator.java:298)
	at com.sun.proxy.$Proxy67.createQuery(Unknown Source)
	at org.axonframework.eventsourcing.eventstore.jpa.JpaEventStorageEngine.lambda$fetchTrackedEvents$1(JpaEventStorageEngine.java:240)
	at org.axonframework.common.transaction.TransactionManager.fetchInTransaction(TransactionManager.java:67)
	at org.axonframework.eventsourcing.eventstore.jpa.JpaEventStorageEngine.fetchTrackedEvents(JpaEventStorageEngine.java:230)
	at org.axonframework.eventsourcing.eventstore.BatchingEventStorageEngine.lambda$readEventData$1(BatchingEventStorageEngine.java:154)
	at org.axonframework.eventsourcing.eventstore.BatchingEventStorageEngine$EventStreamSpliterator.tryAdvance(BatchingEventStorageEngine.java:192)
	at java.util.Spliterator.forEachRemaining(Spliterator.java:326)
	at java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:481)
	at java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:471)
	at java.util.stream.ForEachOps$ForEachOp.evaluateSequential(ForEachOps.java:151)
	at java.util.stream.ForEachOps$ForEachOp$OfRef.evaluateSequential(ForEachOps.java:174)
	at java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)
	at java.util.stream.ReferencePipeline.forEach(ReferencePipeline.java:418)
	at org.axonframework.eventsourcing.eventstore.EmbeddedEventStore$EventProducer.fetchData(EmbeddedEventStore.java:265)
	at org.axonframework.eventsourcing.eventstore.EmbeddedEventStore$EventProducer.run(EmbeddedEventStore.java:231)
	at org.axonframework.eventsourcing.eventstore.EmbeddedEventStore$EventProducer.access$2000(EmbeddedEventStore.java:210)
	at org.axonframework.eventsourcing.eventstore.EmbeddedEventStore.lambda$ensureProducerStarted$0(EmbeddedEventStore.java:160)
	at java.lang.Thread.run(Thread.java:745)
2018-10-05 14:36:24,679 [main] WARN  EntityManagerFactoryRegistry    - HHH000436: Entity manager factory name (eventStore) is already registered.  If entity manager will be clustered or passivated, specify a unique value for property 'hibernate.ejb.entitymanager_factory_name'
2018-10-05 14:36:24,679 [main] INFO  tainerEntityManagerFactoryBean  - Initialized JPA EntityManagerFactory for persistence unit 'eventStore'
2018-10-05 14:36:24,705 [main] INFO  TransactionContext              - Began transaction (1) for test context [DefaultTestContext@f563fc1 testClass = JpaEventStorageEngineTest, testInstance = org.axonframework.eventsourcing.eventstore.jpa.JpaEventStorageEngineTest@3fb75c24, testMethod = testCreateTokenAtExactTime@EventStorageEngineTest, testException = [null], mergedContextConfiguration = [MergedContextConfiguration@15554017 testClass = JpaEventStorageEngineTest, locations = '{classpath:/META-INF/spring/db-context.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], contextLoader = 'org.springframework.test.context.support.DelegatingSmartContextLoader', parent = [null]], attributes = map[[empty]]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@9a6c67c]; rollback [true]
2018-10-05 14:36:24,708 [main] INFO  ueryTranslatorFactoryInitiator  - HHH000397: Using ASTQueryTranslatorFactory
2018-10-05 14:36:24,725 [main] INFO  TransactionContext              - Rolled back transaction for test context [DefaultTestContext@f563fc1 testClass = JpaEventStorageEngineTest, testInstance = org.axonframework.eventsourcing.eventstore.jpa.JpaEventStorageEngineTest@3fb75c24, testMethod = testCreateTokenAtExactTime@EventStorageEngineTest, testException = [null], mergedContextConfiguration = [MergedContextConfiguration@15554017 testClass = JpaEventStorageEngineTest, locations = '{classpath:/META-INF/spring/db-context.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], contextLoader = 'org.springframework.test.context.support.DelegatingSmartContextLoader', parent = [null]], attributes = map[[empty]]].
2018-10-05 14:36:24,728 [main] INFO  TransactionContext              - Began transaction (1) for test context [DefaultTestContext@f563fc1 testClass = JpaEventStorageEngineTest, testInstance = org.axonframework.eventsourcing.eventstore.jpa.JpaEventStorageEngineTest@30cdd6f9, testMethod = testCreateHeadToken@EventStorageEngineTest, testException = [null], mergedContextConfiguration = [MergedContextConfiguration@15554017 testClass = JpaEventStorageEngineTest, locations = '{classpath:/META-INF/spring/db-context.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], contextLoader = 'org.springframework.test.context.support.DelegatingSmartContextLoader', parent = [null]], attributes = map[[empty]]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@9a6c67c]; rollback [true]
2018-10-05 14:36:24,740 [main] INFO  TransactionContext              - Rolled back transaction for test context [DefaultTestContext@f563fc1 testClass = JpaEventStorageEngineTest, testInstance = org.axonframework.eventsourcing.eventstore.jpa.JpaEventStorageEngineTest@30cdd6f9, testMethod = testCreateHeadToken@EventStorageEngineTest, testException = [null], mergedContextConfiguration = [MergedContextConfiguration@15554017 testClass = JpaEventStorageEngineTest, locations = '{classpath:/META-INF/spring/db-context.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], contextLoader = 'org.springframework.test.context.support.DelegatingSmartContextLoader', parent = [null]], attributes = map[[empty]]].
2018-10-05 14:36:24,743 [main] INFO  TransactionContext              - Began transaction (1) for test context [DefaultTestContext@f563fc1 testClass = JpaEventStorageEngineTest, testInstance = org.axonframework.eventsourcing.eventstore.jpa.JpaEventStorageEngineTest@646a3bc5, testMethod = testCreateTailToken@EventStorageEngineTest, testException = [null], mergedContextConfiguration = [MergedContextConfiguration@15554017 testClass = JpaEventStorageEngineTest, locations = '{classpath:/META-INF/spring/db-context.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], contextLoader = 'org.springframework.test.context.support.DelegatingSmartContextLoader', parent = [null]], attributes = map[[empty]]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@9a6c67c]; rollback [true]
2018-10-05 14:36:24,755 [main] INFO  TransactionContext              - Rolled back transaction for test context [DefaultTestContext@f563fc1 testClass = JpaEventStorageEngineTest, testInstance = org.axonframework.eventsourcing.eventstore.jpa.JpaEventStorageEngineTest@646a3bc5, testMethod = testCreateTailToken@EventStorageEngineTest, testException = [null], mergedContextConfiguration = [MergedContextConfiguration@15554017 testClass = JpaEventStorageEngineTest, locations = '{classpath:/META-INF/spring/db-context.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], contextLoader = 'org.springframework.test.context.support.DelegatingSmartContextLoader', parent = [null]], attributes = map[[empty]]].
2018-10-05 14:36:24,758 [main] INFO  TransactionContext              - Began transaction (1) for test context [DefaultTestContext@f563fc1 testClass = JpaEventStorageEngineTest, testInstance = org.axonframework.eventsourcing.eventstore.jpa.JpaEventStorageEngineTest@2fce34e4, testMethod = testLoadNonExistent@EventStorageEngineTest, testException = [null], mergedContextConfiguration = [MergedContextConfiguration@15554017 testClass = JpaEventStorageEngineTest, locations = '{classpath:/META-INF/spring/db-context.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], contextLoader = 'org.springframework.test.context.support.DelegatingSmartContextLoader', parent = [null]], attributes = map[[empty]]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@9a6c67c]; rollback [true]
2018-10-05 14:36:24,766 [main] INFO  TransactionContext              - Rolled back transaction for test context [DefaultTestContext@f563fc1 testClass = JpaEventStorageEngineTest, testInstance = org.axonframework.eventsourcing.eventstore.jpa.JpaEventStorageEngineTest@2fce34e4, testMethod = testLoadNonExistent@EventStorageEngineTest, testException = [null], mergedContextConfiguration = [MergedContextConfiguration@15554017 testClass = JpaEventStorageEngineTest, locations = '{classpath:/META-INF/spring/db-context.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], contextLoader = 'org.springframework.test.context.support.DelegatingSmartContextLoader', parent = [null]], attributes = map[[empty]]].
2018-10-05 14:36:24,769 [main] INFO  TransactionContext              - Began transaction (1) for test context [DefaultTestContext@f563fc1 testClass = JpaEventStorageEngineTest, testInstance = org.axonframework.eventsourcing.eventstore.jpa.JpaEventStorageEngineTest@3d91d937, testMethod = testCreateTokenAt@EventStorageEngineTest, testException = [null], mergedContextConfiguration = [MergedContextConfiguration@15554017 testClass = JpaEventStorageEngineTest, locations = '{classpath:/META-INF/spring/db-context.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], contextLoader = 'org.springframework.test.context.support.DelegatingSmartContextLoader', parent = [null]], attributes = map[[empty]]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@9a6c67c]; rollback [true]
2018-10-05 14:36:24,777 [main] INFO  TransactionContext              - Rolled back transaction for test context [DefaultTestContext@f563fc1 testClass = JpaEventStorageEngineTest, testInstance = org.axonframework.eventsourcing.eventstore.jpa.JpaEventStorageEngineTest@3d91d937, testMethod = testCreateTokenAt@EventStorageEngineTest, testException = [null], mergedContextConfiguration = [MergedContextConfiguration@15554017 testClass = JpaEventStorageEngineTest, locations = '{classpath:/META-INF/spring/db-context.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], contextLoader = 'org.springframework.test.context.support.DelegatingSmartContextLoader', parent = [null]], attributes = map[[empty]]].
2018-10-05 14:36:24,779 [main] INFO  TransactionContext              - Began transaction (1) for test context [DefaultTestContext@f563fc1 testClass = JpaEventStorageEngineTest, testInstance = org.axonframework.eventsourcing.eventstore.jpa.JpaEventStorageEngineTest@4f9d220b, testMethod = testLoadPartialStreamOfTrackedEvents@EventStorageEngineTest, testException = [null], mergedContextConfiguration = [MergedContextConfiguration@15554017 testClass = JpaEventStorageEngineTest, locations = '{classpath:/META-INF/spring/db-context.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], contextLoader = 'org.springframework.test.context.support.DelegatingSmartContextLoader', parent = [null]], attributes = map[[empty]]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@9a6c67c]; rollback [true]
2018-10-05 14:36:24,807 [main] INFO  TransactionContext              - Rolled back transaction for test context [DefaultTestContext@f563fc1 testClass = JpaEventStorageEngineTest, testInstance = org.axonframework.eventsourcing.eventstore.jpa.JpaEventStorageEngineTest@4f9d220b, testMethod = testLoadPartialStreamOfTrackedEvents@EventStorageEngineTest, testException = [null], mergedContextConfiguration = [MergedContextConfiguration@15554017 testClass = JpaEventStorageEngineTest, locations = '{classpath:/META-INF/spring/db-context.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], contextLoader = 'org.springframework.test.context.support.DelegatingSmartContextLoader', parent = [null]], attributes = map[[empty]]].
2018-10-05 14:36:24,809 [main] INFO  TransactionContext              - Began transaction (1) for test context [DefaultTestContext@f563fc1 testClass = JpaEventStorageEngineTest, testInstance = org.axonframework.eventsourcing.eventstore.jpa.JpaEventStorageEngineTest@1cad885b, testMethod = testStoreAndLoadEvents@EventStorageEngineTest, testException = [null], mergedContextConfiguration = [MergedContextConfiguration@15554017 testClass = JpaEventStorageEngineTest, locations = '{classpath:/META-INF/spring/db-context.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], contextLoader = 'org.springframework.test.context.support.DelegatingSmartContextLoader', parent = [null]], attributes = map[[empty]]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@9a6c67c]; rollback [true]
2018-10-05 14:36:24,819 [main] INFO  TransactionContext              - Rolled back transaction for test context [DefaultTestContext@f563fc1 testClass = JpaEventStorageEngineTest, testInstance = org.axonframework.eventsourcing.eventstore.jpa.JpaEventStorageEngineTest@1cad885b, testMethod = testStoreAndLoadEvents@EventStorageEngineTest, testException = [null], mergedContextConfiguration = [MergedContextConfiguration@15554017 testClass = JpaEventStorageEngineTest, locations = '{classpath:/META-INF/spring/db-context.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], contextLoader = 'org.springframework.test.context.support.DelegatingSmartContextLoader', parent = [null]], attributes = map[[empty]]].
2018-10-05 14:36:24,821 [main] INFO  TransactionContext              - Began transaction (1) for test context [DefaultTestContext@f563fc1 testClass = JpaEventStorageEngineTest, testInstance = org.axonframework.eventsourcing.eventstore.jpa.JpaEventStorageEngineTest@549d1a11, testMethod = testCreateTokenWithUnorderedEvents@EventStorageEngineTest, testException = [null], mergedContextConfiguration = [MergedContextConfiguration@15554017 testClass = JpaEventStorageEngineTest, locations = '{classpath:/META-INF/spring/db-context.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], contextLoader = 'org.springframework.test.context.support.DelegatingSmartContextLoader', parent = [null]], attributes = map[[empty]]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@9a6c67c]; rollback [true]
2018-10-05 14:36:24,831 [main] INFO  TransactionContext              - Rolled back transaction for test context [DefaultTestContext@f563fc1 testClass = JpaEventStorageEngineTest, testInstance = org.axonframework.eventsourcing.eventstore.jpa.JpaEventStorageEngineTest@549d1a11, testMethod = testCreateTokenWithUnorderedEvents@EventStorageEngineTest, testException = [null], mergedContextConfiguration = [MergedContextConfiguration@15554017 testClass = JpaEventStorageEngineTest, locations = '{classpath:/META-INF/spring/db-context.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], contextLoader = 'org.springframework.test.context.support.DelegatingSmartContextLoader', parent = [null]], attributes = map[[empty]]].
2018-10-05 14:36:24,833 [main] INFO  TransactionContext              - Began transaction (1) for test context [DefaultTestContext@f563fc1 testClass = JpaEventStorageEngineTest, testInstance = org.axonframework.eventsourcing.eventstore.jpa.JpaEventStorageEngineTest@78500fc9, testMethod = testReturnedEventMessageBehavior@EventStorageEngineTest, testException = [null], mergedContextConfiguration = [MergedContextConfiguration@15554017 testClass = JpaEventStorageEngineTest, locations = '{classpath:/META-INF/spring/db-context.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], contextLoader = 'org.springframework.test.context.support.DelegatingSmartContextLoader', parent = [null]], attributes = map[[empty]]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@9a6c67c]; rollback [true]
2018-10-05 14:36:24,840 [main] INFO  TransactionContext              - Rolled back transaction for test context [DefaultTestContext@f563fc1 testClass = JpaEventStorageEngineTest, testInstance = org.axonframework.eventsourcing.eventstore.jpa.JpaEventStorageEngineTest@78500fc9, testMethod = testReturnedEventMessageBehavior@EventStorageEngineTest, testException = [null], mergedContextConfiguration = [MergedContextConfiguration@15554017 testClass = JpaEventStorageEngineTest, locations = '{classpath:/META-INF/spring/db-context.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], contextLoader = 'org.springframework.test.context.support.DelegatingSmartContextLoader', parent = [null]], attributes = map[[empty]]].
2018-10-05 14:36:24,842 [main] INFO  TransactionContext              - Began transaction (1) for test context [DefaultTestContext@f563fc1 testClass = JpaEventStorageEngineTest, testInstance = org.axonframework.eventsourcing.eventstore.jpa.JpaEventStorageEngineTest@2ce01617, testMethod = testReadPartialStream@EventStorageEngineTest, testException = [null], mergedContextConfiguration = [MergedContextConfiguration@15554017 testClass = JpaEventStorageEngineTest, locations = '{classpath:/META-INF/spring/db-context.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], contextLoader = 'org.springframework.test.context.support.DelegatingSmartContextLoader', parent = [null]], attributes = map[[empty]]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@9a6c67c]; rollback [true]
2018-10-05 14:36:24,851 [main] INFO  TransactionContext              - Rolled back transaction for test context [DefaultTestContext@f563fc1 testClass = JpaEventStorageEngineTest, testInstance = org.axonframework.eventsourcing.eventstore.jpa.JpaEventStorageEngineTest@2ce01617, testMethod = testReadPartialStream@EventStorageEngineTest, testException = [null], mergedContextConfiguration = [MergedContextConfiguration@15554017 testClass = JpaEventStorageEngineTest, locations = '{classpath:/META-INF/spring/db-context.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], contextLoader = 'org.springframework.test.context.support.DelegatingSmartContextLoader', parent = [null]], attributes = map[[empty]]].
2018-10-05 14:36:24,854 [main] INFO  TransactionContext              - Began transaction (1) for test context [DefaultTestContext@f563fc1 testClass = JpaEventStorageEngineTest, testInstance = org.axonframework.eventsourcing.eventstore.jpa.JpaEventStorageEngineTest@22059c63, testMethod = testLoadTrackedEvents@EventStorageEngineTest, testException = [null], mergedContextConfiguration = [MergedContextConfiguration@15554017 testClass = JpaEventStorageEngineTest, locations = '{classpath:/META-INF/spring/db-context.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], contextLoader = 'org.springframework.test.context.support.DelegatingSmartContextLoader', parent = [null]], attributes = map[[empty]]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@9a6c67c]; rollback [true]
2018-10-05 14:36:24,889 [main] INFO  TransactionContext              - Rolled back transaction for test context [DefaultTestContext@f563fc1 testClass = JpaEventStorageEngineTest, testInstance = org.axonframework.eventsourcing.eventstore.jpa.JpaEventStorageEngineTest@22059c63, testMethod = testLoadTrackedEvents@EventStorageEngineTest, testException = [null], mergedContextConfiguration = [MergedContextConfiguration@15554017 testClass = JpaEventStorageEngineTest, locations = '{classpath:/META-INF/spring/db-context.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], contextLoader = 'org.springframework.test.context.support.DelegatingSmartContextLoader', parent = [null]], attributes = map[[empty]]].
2018-10-05 14:36:24,892 [main] INFO  TransactionContext              - Began transaction (1) for test context [DefaultTestContext@f563fc1 testClass = JpaEventStorageEngineTest, testInstance = org.axonframework.eventsourcing.eventstore.jpa.JpaEventStorageEngineTest@4740e12f, testMethod = testStoreAndLoadEventsArray@EventStorageEngineTest, testException = [null], mergedContextConfiguration = [MergedContextConfiguration@15554017 testClass = JpaEventStorageEngineTest, locations = '{classpath:/META-INF/spring/db-context.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], contextLoader = 'org.springframework.test.context.support.DelegatingSmartContextLoader', parent = [null]], attributes = map[[empty]]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@9a6c67c]; rollback [true]
2018-10-05 14:36:24,898 [main] INFO  TransactionContext              - Rolled back transaction for test context [DefaultTestContext@f563fc1 testClass = JpaEventStorageEngineTest, testInstance = org.axonframework.eventsourcing.eventstore.jpa.JpaEventStorageEngineTest@4740e12f, testMethod = testStoreAndLoadEventsArray@EventStorageEngineTest, testException = [null], mergedContextConfiguration = [MergedContextConfiguration@15554017 testClass = JpaEventStorageEngineTest, locations = '{classpath:/META-INF/spring/db-context.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], contextLoader = 'org.springframework.test.context.support.DelegatingSmartContextLoader', parent = [null]], attributes = map[[empty]]].
2018-10-05 14:36:24,900 [main] INFO  TransactionContext              - Began transaction (1) for test context [DefaultTestContext@f563fc1 testClass = JpaEventStorageEngineTest, testInstance = org.axonframework.eventsourcing.eventstore.jpa.JpaEventStorageEngineTest@4124e201, testMethod = testStoreAndLoadApplicationEvent@EventStorageEngineTest, testException = [null], mergedContextConfiguration = [MergedContextConfiguration@15554017 testClass = JpaEventStorageEngineTest, locations = '{classpath:/META-INF/spring/db-context.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], contextLoader = 'org.springframework.test.context.support.DelegatingSmartContextLoader', parent = [null]], attributes = map[[empty]]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@9a6c67c]; rollback [true]
2018-10-05 14:36:24,918 [main] INFO  TransactionContext              - Rolled back transaction for test context [DefaultTestContext@f563fc1 testClass = JpaEventStorageEngineTest, testInstance = org.axonframework.eventsourcing.eventstore.jpa.JpaEventStorageEngineTest@4124e201, testMethod = testStoreAndLoadApplicationEvent@EventStorageEngineTest, testException = [null], mergedContextConfiguration = [MergedContextConfiguration@15554017 testClass = JpaEventStorageEngineTest, locations = '{classpath:/META-INF/spring/db-context.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], contextLoader = 'org.springframework.test.context.support.DelegatingSmartContextLoader', parent = [null]], attributes = map[[empty]]].
2018-10-05 14:36:24,922 [main] INFO  TransactionContext              - Began transaction (1) for test context [DefaultTestContext@f563fc1 testClass = JpaEventStorageEngineTest, testInstance = org.axonframework.eventsourcing.eventstore.jpa.JpaEventStorageEngineTest@5246532, testMethod = testStoreAndLoadSnapshot@EventStorageEngineTest, testException = [null], mergedContextConfiguration = [MergedContextConfiguration@15554017 testClass = JpaEventStorageEngineTest, locations = '{classpath:/META-INF/spring/db-context.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], contextLoader = 'org.springframework.test.context.support.DelegatingSmartContextLoader', parent = [null]], attributes = map[[empty]]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@9a6c67c]; rollback [true]
2018-10-05 14:36:24,937 [main] INFO  TransactionContext              - Rolled back transaction for test context [DefaultTestContext@f563fc1 testClass = JpaEventStorageEngineTest, testInstance = org.axonframework.eventsourcing.eventstore.jpa.JpaEventStorageEngineTest@5246532, testMethod = testStoreAndLoadSnapshot@EventStorageEngineTest, testException = [null], mergedContextConfiguration = [MergedContextConfiguration@15554017 testClass = JpaEventStorageEngineTest, locations = '{classpath:/META-INF/spring/db-context.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], contextLoader = 'org.springframework.test.context.support.DelegatingSmartContextLoader', parent = [null]], attributes = map[[empty]]].
Tests run: 27, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 2.863 sec - in org.axonframework.eventsourcing.eventstore.jpa.JpaEventStorageEngineTest
Running org.axonframework.eventsourcing.eventstore.jpa.SQLErrorCodesResolverTest
Tests run: 12, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.167 sec - in org.axonframework.eventsourcing.eventstore.jpa.SQLErrorCodesResolverTest
Running org.axonframework.eventsourcing.eventstore.jpa.SQLStateResolverTest
Tests run: 4, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.001 sec - in org.axonframework.eventsourcing.eventstore.jpa.SQLStateResolverTest
Running org.axonframework.eventsourcing.eventstore.ConcatenatingDomainEventStreamTest
Tests run: 3, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0 sec - in org.axonframework.eventsourcing.eventstore.ConcatenatingDomainEventStreamTest
Running org.axonframework.eventsourcing.eventstore.TrackingTokenSerializationTest
Tests run: 3, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.027 sec - in org.axonframework.eventsourcing.eventstore.TrackingTokenSerializationTest
Running org.axonframework.eventsourcing.eventstore.SequenceEventStorageEngineTest
Tests run: 11, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.023 sec - in org.axonframework.eventsourcing.eventstore.SequenceEventStorageEngineTest
Running org.axonframework.eventsourcing.eventstore.EventUtilsTest
Tests run: 4, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.002 sec - in org.axonframework.eventsourcing.eventstore.EventUtilsTest
Running org.axonframework.eventsourcing.eventstore.GapAwareTrackingTokenTest
2018-10-05 14:36:25,596 [EmbeddedEventStore-0] ERROR EmbeddedEventStore              - Failed to read events from the underlying event storage
java.lang.IllegalStateException: EntityManagerFactory is closed
	at org.hibernate.jpa.internal.EntityManagerFactoryImpl.validateNotClosed(EntityManagerFactoryImpl.java:367)
	at org.hibernate.jpa.internal.EntityManagerFactoryImpl.internalCreateEntityManager(EntityManagerFactoryImpl.java:316)
	at org.hibernate.jpa.internal.EntityManagerFactoryImpl.createEntityManager(EntityManagerFactoryImpl.java:286)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.invokeProxyMethod(AbstractEntityManagerFactoryBean.java:476)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean$ManagedEntityManagerFactoryInvocationHandler.invoke(AbstractEntityManagerFactoryBean.java:655)
	at com.sun.proxy.$Proxy66.createEntityManager(Unknown Source)
	at org.springframework.orm.jpa.SharedEntityManagerCreator$SharedEntityManagerInvocationHandler.invoke(SharedEntityManagerCreator.java:298)
	at com.sun.proxy.$Proxy67.createQuery(Unknown Source)
	at org.axonframework.eventsourcing.eventstore.jpa.JpaEventStorageEngine.lambda$fetchTrackedEvents$1(JpaEventStorageEngine.java:240)
	at org.axonframework.common.transaction.TransactionManager.fetchInTransaction(TransactionManager.java:67)
	at org.axonframework.eventsourcing.eventstore.jpa.JpaEventStorageEngine.fetchTrackedEvents(JpaEventStorageEngine.java:230)
	at org.axonframework.eventsourcing.eventstore.BatchingEventStorageEngine.lambda$readEventData$1(BatchingEventStorageEngine.java:154)
	at org.axonframework.eventsourcing.eventstore.BatchingEventStorageEngine$EventStreamSpliterator.tryAdvance(BatchingEventStorageEngine.java:192)
	at java.util.Spliterator.forEachRemaining(Spliterator.java:326)
	at java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:481)
	at java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:471)
	at java.util.stream.ForEachOps$ForEachOp.evaluateSequential(ForEachOps.java:151)
	at java.util.stream.ForEachOps$ForEachOp$OfRef.evaluateSequential(ForEachOps.java:174)
	at java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)
	at java.util.stream.ReferencePipeline.forEach(ReferencePipeline.java:418)
	at org.axonframework.eventsourcing.eventstore.EmbeddedEventStore$EventProducer.fetchData(EmbeddedEventStore.java:265)
	at org.axonframework.eventsourcing.eventstore.EmbeddedEventStore$EventProducer.run(EmbeddedEventStore.java:231)
	at org.axonframework.eventsourcing.eventstore.EmbeddedEventStore$EventProducer.access$2000(EmbeddedEventStore.java:210)
	at org.axonframework.eventsourcing.eventstore.EmbeddedEventStore.lambda$ensureProducerStarted$0(EmbeddedEventStore.java:160)
	at java.lang.Thread.run(Thread.java:745)
Tests run: 12, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 1.034 sec - in org.axonframework.eventsourcing.eventstore.GapAwareTrackingTokenTest
Running org.axonframework.eventsourcing.eventstore.inmemory.InMemoryEventStorageEngineTest
Tests run: 14, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.015 sec - in org.axonframework.eventsourcing.eventstore.inmemory.InMemoryEventStorageEngineTest
Running org.axonframework.eventsourcing.eventstore.GlobalSequenceTrackingTokenTest
Tests run: 1, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0 sec - in org.axonframework.eventsourcing.eventstore.GlobalSequenceTrackingTokenTest
Running org.axonframework.eventsourcing.eventstore.TrackingTokenParameterResolverFactoryTest
Tests run: 1, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0 sec - in org.axonframework.eventsourcing.eventstore.TrackingTokenParameterResolverFactoryTest
Running org.axonframework.eventsourcing.AbstractSnapshotterTest
Tests run: 5, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.057 sec - in org.axonframework.eventsourcing.AbstractSnapshotterTest
Running org.axonframework.eventsourcing.NestedUnitOfWorkTest
Tests run: 1, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.01 sec - in org.axonframework.eventsourcing.NestedUnitOfWorkTest
Running org.axonframework.eventsourcing.EventCountSnapshotTriggerDefinitionTest
Tests run: 3, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.01 sec - in org.axonframework.eventsourcing.EventCountSnapshotTriggerDefinitionTest
Running org.axonframework.eventsourcing.GenericDomainEventMessageTest
Tests run: 4, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0 sec - in org.axonframework.eventsourcing.GenericDomainEventMessageTest
Running org.axonframework.eventsourcing.CachingRepositoryWithNestedUnitOfWorkTest
Tests run: 4, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.063 sec - in org.axonframework.eventsourcing.CachingRepositoryWithNestedUnitOfWorkTest
Running org.axonframework.eventsourcing.EventSourcingRepositoryIntegrationTest
Tests run: 1, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.014 sec - in org.axonframework.eventsourcing.EventSourcingRepositoryIntegrationTest
Running org.axonframework.eventsourcing.GenericAggregateFactoryTest
Tests run: 3, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.001 sec - in org.axonframework.eventsourcing.GenericAggregateFactoryTest
Running org.axonframework.eventsourcing.EventSourcingRepositoryTest
Tests run: 5, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.008 sec - in org.axonframework.eventsourcing.EventSourcingRepositoryTest
Running org.axonframework.eventsourcing.AggregateSnapshotterTest
Tests run: 3, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.015 sec - in org.axonframework.eventsourcing.AggregateSnapshotterTest
Running org.axonframework.eventsourcing.CachingEventSourcingRepositoryTest
Tests run: 3, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.008 sec - in org.axonframework.eventsourcing.CachingEventSourcingRepositoryTest
Running org.axonframework.eventsourcing.DomainEventStreamTest
Tests run: 4, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0 sec - in org.axonframework.eventsourcing.DomainEventStreamTest
Running org.axonframework.eventsourcing.FilteringEventStorageEngineTest
Tests run: 6, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.002 sec - in org.axonframework.eventsourcing.FilteringEventStorageEngineTest
Running org.axonframework.eventsourcing.NoSnapshotTriggerDefinitionTest
Tests run: 1, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0 sec - in org.axonframework.eventsourcing.NoSnapshotTriggerDefinitionTest
Running org.axonframework.config.ConfigurationScopeAwareProviderTest
Tests run: 4, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.112 sec - in org.axonframework.config.ConfigurationScopeAwareProviderTest
Running org.axonframework.config.EventHandlingConfigurationTest
2018-10-05 14:36:26,542 [EventProcessor[tracking]-0] INFO  TrackingEventProcessor          - Using current Thread for last segment worker: TrackingSegmentWorker{processor=tracking, segment=Segment[0/0]}
2018-10-05 14:36:26,544 [EventProcessor[tracking]-0] INFO  TrackingEventProcessor          - Fetched token: IndexTrackingToken{globalIndex=-1} for segment: Segment[0/0]
2018-10-05 14:36:26,545 [main] INFO  TrackingEventProcessor          - Shutdown state set for Processor 'tracking'. Awaiting termination...
2018-10-05 14:36:26,601 [EmbeddedEventStore-0] ERROR EmbeddedEventStore              - Failed to read events from the underlying event storage
java.lang.IllegalStateException: EntityManagerFactory is closed
	at org.hibernate.jpa.internal.EntityManagerFactoryImpl.validateNotClosed(EntityManagerFactoryImpl.java:367)
	at org.hibernate.jpa.internal.EntityManagerFactoryImpl.internalCreateEntityManager(EntityManagerFactoryImpl.java:316)
	at org.hibernate.jpa.internal.EntityManagerFactoryImpl.createEntityManager(EntityManagerFactoryImpl.java:286)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.invokeProxyMethod(AbstractEntityManagerFactoryBean.java:476)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean$ManagedEntityManagerFactoryInvocationHandler.invoke(AbstractEntityManagerFactoryBean.java:655)
	at com.sun.proxy.$Proxy66.createEntityManager(Unknown Source)
	at org.springframework.orm.jpa.SharedEntityManagerCreator$SharedEntityManagerInvocationHandler.invoke(SharedEntityManagerCreator.java:298)
	at com.sun.proxy.$Proxy67.createQuery(Unknown Source)
	at org.axonframework.eventsourcing.eventstore.jpa.JpaEventStorageEngine.lambda$fetchTrackedEvents$1(JpaEventStorageEngine.java:240)
	at org.axonframework.common.transaction.TransactionManager.fetchInTransaction(TransactionManager.java:67)
	at org.axonframework.eventsourcing.eventstore.jpa.JpaEventStorageEngine.fetchTrackedEvents(JpaEventStorageEngine.java:230)
	at org.axonframework.eventsourcing.eventstore.BatchingEventStorageEngine.lambda$readEventData$1(BatchingEventStorageEngine.java:154)
	at org.axonframework.eventsourcing.eventstore.BatchingEventStorageEngine$EventStreamSpliterator.tryAdvance(BatchingEventStorageEngine.java:192)
	at java.util.Spliterator.forEachRemaining(Spliterator.java:326)
	at java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:481)
	at java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:471)
	at java.util.stream.ForEachOps$ForEachOp.evaluateSequential(ForEachOps.java:151)
	at java.util.stream.ForEachOps$ForEachOp$OfRef.evaluateSequential(ForEachOps.java:174)
	at java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)
	at java.util.stream.ReferencePipeline.forEach(ReferencePipeline.java:418)
	at org.axonframework.eventsourcing.eventstore.EmbeddedEventStore$EventProducer.fetchData(EmbeddedEventStore.java:265)
	at org.axonframework.eventsourcing.eventstore.EmbeddedEventStore$EventProducer.run(EmbeddedEventStore.java:231)
	at org.axonframework.eventsourcing.eventstore.EmbeddedEventStore$EventProducer.access$2000(EmbeddedEventStore.java:210)
	at org.axonframework.eventsourcing.eventstore.EmbeddedEventStore.lambda$ensureProducerStarted$0(EmbeddedEventStore.java:160)
	at java.lang.Thread.run(Thread.java:745)
2018-10-05 14:36:27,559 [EventProcessor[concurrent]-0] INFO  TrackingEventProcessor          - Using current Thread for last segment worker: TrackingSegmentWorker{processor=concurrent, segment=Segment[0/0]}
2018-10-05 14:36:27,559 [EventProcessor[concurrent]-0] INFO  TrackingEventProcessor          - Fetched token: null for segment: Segment[0/0]
2018-10-05 14:36:27,568 [EventProcessor[tracking]-0] INFO  TrackingEventProcessor          - Using current Thread for last segment worker: TrackingSegmentWorker{processor=tracking, segment=Segment[0/0]}
2018-10-05 14:36:27,568 [EventProcessor[tracking]-0] INFO  TrackingEventProcessor          - Fetched token: IndexTrackingToken{globalIndex=-1} for segment: Segment[0/0]
2018-10-05 14:36:27,569 [main] INFO  TrackingEventProcessor          - Shutdown state set for Processor 'tracking'. Awaiting termination...
2018-10-05 14:36:27,602 [EmbeddedEventStore-0] ERROR EmbeddedEventStore              - Failed to read events from the underlying event storage
java.lang.IllegalStateException: EntityManagerFactory is closed
	at org.hibernate.jpa.internal.EntityManagerFactoryImpl.validateNotClosed(EntityManagerFactoryImpl.java:367)
	at org.hibernate.jpa.internal.EntityManagerFactoryImpl.internalCreateEntityManager(EntityManagerFactoryImpl.java:316)
	at org.hibernate.jpa.internal.EntityManagerFactoryImpl.createEntityManager(EntityManagerFactoryImpl.java:286)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.invokeProxyMethod(AbstractEntityManagerFactoryBean.java:476)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean$ManagedEntityManagerFactoryInvocationHandler.invoke(AbstractEntityManagerFactoryBean.java:655)
	at com.sun.proxy.$Proxy66.createEntityManager(Unknown Source)
	at org.springframework.orm.jpa.SharedEntityManagerCreator$SharedEntityManagerInvocationHandler.invoke(SharedEntityManagerCreator.java:298)
	at com.sun.proxy.$Proxy67.createQuery(Unknown Source)
	at org.axonframework.eventsourcing.eventstore.jpa.JpaEventStorageEngine.lambda$fetchTrackedEvents$1(JpaEventStorageEngine.java:240)
	at org.axonframework.common.transaction.TransactionManager.fetchInTransaction(TransactionManager.java:67)
	at org.axonframework.eventsourcing.eventstore.jpa.JpaEventStorageEngine.fetchTrackedEvents(JpaEventStorageEngine.java:230)
	at org.axonframework.eventsourcing.eventstore.BatchingEventStorageEngine.lambda$readEventData$1(BatchingEventStorageEngine.java:154)
	at org.axonframework.eventsourcing.eventstore.BatchingEventStorageEngine$EventStreamSpliterator.tryAdvance(BatchingEventStorageEngine.java:192)
	at java.util.Spliterator.forEachRemaining(Spliterator.java:326)
	at java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:481)
	at java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:471)
	at java.util.stream.ForEachOps$ForEachOp.evaluateSequential(ForEachOps.java:151)
	at java.util.stream.ForEachOps$ForEachOp$OfRef.evaluateSequential(ForEachOps.java:174)
	at java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)
	at java.util.stream.ReferencePipeline.forEach(ReferencePipeline.java:418)
	at org.axonframework.eventsourcing.eventstore.EmbeddedEventStore$EventProducer.fetchData(EmbeddedEventStore.java:265)
	at org.axonframework.eventsourcing.eventstore.EmbeddedEventStore$EventProducer.run(EmbeddedEventStore.java:231)
	at org.axonframework.eventsourcing.eventstore.EmbeddedEventStore$EventProducer.access$2000(EmbeddedEventStore.java:210)
	at org.axonframework.eventsourcing.eventstore.EmbeddedEventStore.lambda$ensureProducerStarted$0(EmbeddedEventStore.java:160)
	at java.lang.Thread.run(Thread.java:745)
2018-10-05 14:36:28,578 [EventProcessor[tracking]-0] INFO  TrackingEventProcessor          - Using current Thread for last segment worker: TrackingSegmentWorker{processor=tracking, segment=Segment[0/0]}
2018-10-05 14:36:28,578 [EventProcessor[tracking]-0] INFO  TrackingEventProcessor          - Fetched token: null for segment: Segment[0/0]
2018-10-05 14:36:28,579 [main] INFO  TrackingEventProcessor          - Shutdown state set for Processor 'tracking'. Awaiting termination...
2018-10-05 14:36:28,582 [EventProcessor[tracking]-0] INFO  TrackingEventProcessor          - Using current Thread for last segment worker: TrackingSegmentWorker{processor=tracking, segment=Segment[0/0]}
2018-10-05 14:36:28,582 [EventProcessor[tracking]-0] INFO  TrackingEventProcessor          - Fetched token: IndexTrackingToken{globalIndex=-1} for segment: Segment[0/0]
2018-10-05 14:36:28,583 [main] INFO  TrackingEventProcessor          - Shutdown state set for Processor 'tracking'. Awaiting termination...
2018-10-05 14:36:28,586 [EventProcessor[tracking]-0] INFO  TrackingEventProcessor          - Using current Thread for last segment worker: TrackingSegmentWorker{processor=tracking, segment=Segment[0/0]}
2018-10-05 14:36:28,587 [EventProcessor[tracking]-0] INFO  TrackingEventProcessor          - Fetched token: IndexTrackingToken{globalIndex=-1} for segment: Segment[0/0]
2018-10-05 14:36:28,587 [main] INFO  TrackingEventProcessor          - Shutdown state set for Processor 'tracking'. Awaiting termination...
2018-10-05 14:36:28,602 [EmbeddedEventStore-0] ERROR EmbeddedEventStore              - Failed to read events from the underlying event storage
java.lang.IllegalStateException: EntityManagerFactory is closed
	at org.hibernate.jpa.internal.EntityManagerFactoryImpl.validateNotClosed(EntityManagerFactoryImpl.java:367)
	at org.hibernate.jpa.internal.EntityManagerFactoryImpl.internalCreateEntityManager(EntityManagerFactoryImpl.java:316)
	at org.hibernate.jpa.internal.EntityManagerFactoryImpl.createEntityManager(EntityManagerFactoryImpl.java:286)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.invokeProxyMethod(AbstractEntityManagerFactoryBean.java:476)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean$ManagedEntityManagerFactoryInvocationHandler.invoke(AbstractEntityManagerFactoryBean.java:655)
	at com.sun.proxy.$Proxy66.createEntityManager(Unknown Source)
	at org.springframework.orm.jpa.SharedEntityManagerCreator$SharedEntityManagerInvocationHandler.invoke(SharedEntityManagerCreator.java:298)
	at com.sun.proxy.$Proxy67.createQuery(Unknown Source)
	at org.axonframework.eventsourcing.eventstore.jpa.JpaEventStorageEngine.lambda$fetchTrackedEvents$1(JpaEventStorageEngine.java:240)
	at org.axonframework.common.transaction.TransactionManager.fetchInTransaction(TransactionManager.java:67)
	at org.axonframework.eventsourcing.eventstore.jpa.JpaEventStorageEngine.fetchTrackedEvents(JpaEventStorageEngine.java:230)
	at org.axonframework.eventsourcing.eventstore.BatchingEventStorageEngine.lambda$readEventData$1(BatchingEventStorageEngine.java:154)
	at org.axonframework.eventsourcing.eventstore.BatchingEventStorageEngine$EventStreamSpliterator.tryAdvance(BatchingEventStorageEngine.java:192)
	at java.util.Spliterator.forEachRemaining(Spliterator.java:326)
	at java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:481)
	at java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:471)
	at java.util.stream.ForEachOps$ForEachOp.evaluateSequential(ForEachOps.java:151)
	at java.util.stream.ForEachOps$ForEachOp$OfRef.evaluateSequential(ForEachOps.java:174)
	at java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)
	at java.util.stream.ReferencePipeline.forEach(ReferencePipeline.java:418)
	at org.axonframework.eventsourcing.eventstore.EmbeddedEventStore$EventProducer.fetchData(EmbeddedEventStore.java:265)
	at org.axonframework.eventsourcing.eventstore.EmbeddedEventStore$EventProducer.run(EmbeddedEventStore.java:231)
	at org.axonframework.eventsourcing.eventstore.EmbeddedEventStore$EventProducer.access$2000(EmbeddedEventStore.java:210)
	at org.axonframework.eventsourcing.eventstore.EmbeddedEventStore.lambda$ensureProducerStarted$0(EmbeddedEventStore.java:160)
	at java.lang.Thread.run(Thread.java:745)
Tests run: 10, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 3.058 sec - in org.axonframework.config.EventHandlingConfigurationTest
Running org.axonframework.config.MessageMonitorFactoryBuilderTest
Tests run: 3, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.012 sec - in org.axonframework.config.MessageMonitorFactoryBuilderTest
Running org.axonframework.config.SingleEventProcessorAssigningToMultipleInvokersTest
2018-10-05 14:36:29,603 [EmbeddedEventStore-0] ERROR EmbeddedEventStore              - Failed to read events from the underlying event storage
java.lang.IllegalStateException: EntityManagerFactory is closed
	at org.hibernate.jpa.internal.EntityManagerFactoryImpl.validateNotClosed(EntityManagerFactoryImpl.java:367)
	at org.hibernate.jpa.internal.EntityManagerFactoryImpl.internalCreateEntityManager(EntityManagerFactoryImpl.java:316)
	at org.hibernate.jpa.internal.EntityManagerFactoryImpl.createEntityManager(EntityManagerFactoryImpl.java:286)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.invokeProxyMethod(AbstractEntityManagerFactoryBean.java:476)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean$ManagedEntityManagerFactoryInvocationHandler.invoke(AbstractEntityManagerFactoryBean.java:655)
	at com.sun.proxy.$Proxy66.createEntityManager(Unknown Source)
	at org.springframework.orm.jpa.SharedEntityManagerCreator$SharedEntityManagerInvocationHandler.invoke(SharedEntityManagerCreator.java:298)
	at com.sun.proxy.$Proxy67.createQuery(Unknown Source)
	at org.axonframework.eventsourcing.eventstore.jpa.JpaEventStorageEngine.lambda$fetchTrackedEvents$1(JpaEventStorageEngine.java:240)
	at org.axonframework.common.transaction.TransactionManager.fetchInTransaction(TransactionManager.java:67)
	at org.axonframework.eventsourcing.eventstore.jpa.JpaEventStorageEngine.fetchTrackedEvents(JpaEventStorageEngine.java:230)
	at org.axonframework.eventsourcing.eventstore.BatchingEventStorageEngine.lambda$readEventData$1(BatchingEventStorageEngine.java:154)
	at org.axonframework.eventsourcing.eventstore.BatchingEventStorageEngine$EventStreamSpliterator.tryAdvance(BatchingEventStorageEngine.java:192)
	at java.util.Spliterator.forEachRemaining(Spliterator.java:326)
	at java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:481)
	at java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:471)
	at java.util.stream.ForEachOps$ForEachOp.evaluateSequential(ForEachOps.java:151)
	at java.util.stream.ForEachOps$ForEachOp$OfRef.evaluateSequential(ForEachOps.java:174)
	at java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)
	at java.util.stream.ReferencePipeline.forEach(ReferencePipeline.java:418)
	at org.axonframework.eventsourcing.eventstore.EmbeddedEventStore$EventProducer.fetchData(EmbeddedEventStore.java:265)
	at org.axonframework.eventsourcing.eventstore.EmbeddedEventStore$EventProducer.run(EmbeddedEventStore.java:231)
	at org.axonframework.eventsourcing.eventstore.EmbeddedEventStore$EventProducer.access$2000(EmbeddedEventStore.java:210)
	at org.axonframework.eventsourcing.eventstore.EmbeddedEventStore.lambda$ensureProducerStarted$0(EmbeddedEventStore.java:160)
	at java.lang.Thread.run(Thread.java:745)
Tests run: 5, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.028 sec - in org.axonframework.config.SingleEventProcessorAssigningToMultipleInvokersTest
Running org.axonframework.config.SagaConfigurationTest
Tests run: 3, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.057 sec - in org.axonframework.config.SagaConfigurationTest
Running org.axonframework.config.DefaultConfigurerTest
2018-10-05 14:36:29,729 [main] INFO  LogHelper                       - HHH000204: Processing PersistenceUnitInfo [
	name: eventStore
	...]
2018-10-05 14:36:29,782 [main] WARN  connections                     - HHH10001002: Using Hibernate built-in connection pool (not for production use!)
2018-10-05 14:36:29,782 [main] INFO  connections                     - HHH10001005: using driver [null] at URL [jdbc:hsqldb:mem:axontest]
2018-10-05 14:36:29,782 [main] INFO  connections                     - HHH10001001: Connection properties: {}
2018-10-05 14:36:29,782 [main] INFO  connections                     - HHH10001003: Autocommit mode: false
2018-10-05 14:36:29,783 [main] INFO  rManagerConnectionProviderImpl  - HHH000115: Hibernate connection pool size: 20 (min=1)
2018-10-05 14:36:29,797 [main] INFO  Dialect                         - HHH000400: Using dialect: org.hibernate.dialect.HSQLDialect
2018-10-05 14:36:29,840 [main] WARN  ExceptionHandlerLoggedImpl      - GenerationTarget encountered exception accepting command : Unable to execute command [drop sequence hibernate_sequence]
org.hibernate.tool.schema.spi.CommandAcceptanceException: Unable to execute command [drop sequence hibernate_sequence]
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:63)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.applySqlString(SchemaDropperImpl.java:370)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.applySqlStrings(SchemaDropperImpl.java:355)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.dropFromMetadata(SchemaDropperImpl.java:245)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.performDrop(SchemaDropperImpl.java:153)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.doDrop(SchemaDropperImpl.java:125)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.doDrop(SchemaDropperImpl.java:111)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.performDatabaseAction(SchemaManagementToolCoordinator.java:137)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.process(SchemaManagementToolCoordinator.java:64)
	at org.hibernate.internal.SessionFactoryImpl.<init>(SessionFactoryImpl.java:458)
	at org.hibernate.boot.internal.SessionFactoryBuilderImpl.build(SessionFactoryBuilderImpl.java:465)
	at org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.build(EntityManagerFactoryBuilderImpl.java:881)
	at org.hibernate.jpa.HibernatePersistenceProvider.createEntityManagerFactory(HibernatePersistenceProvider.java:58)
	at javax.persistence.Persistence.createEntityManagerFactory(Persistence.java:55)
	at org.axonframework.config.DefaultConfigurerTest.setUp(DefaultConfigurerTest.java:67)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:50)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:47)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:24)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:325)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:78)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:57)
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:290)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288)
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:58)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:363)
	at org.apache.maven.surefire.junit4.JUnit4Provider.execute(JUnit4Provider.java:367)
	at org.apache.maven.surefire.junit4.JUnit4Provider.executeWithRerun(JUnit4Provider.java:274)
	at org.apache.maven.surefire.junit4.JUnit4Provider.executeTestSet(JUnit4Provider.java:238)
	at org.apache.maven.surefire.junit4.JUnit4Provider.invoke(JUnit4Provider.java:161)
	at org.apache.maven.surefire.booter.ForkedBooter.invokeProviderInSameClassLoader(ForkedBooter.java:290)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:242)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:121)
Caused by: java.sql.SQLSyntaxErrorException: user lacks privilege or object not found: HIBERNATE_SEQUENCE in statement [drop sequence hibernate_sequence]
	at org.hsqldb.jdbc.JDBCUtil.sqlException(Unknown Source)
	at org.hsqldb.jdbc.JDBCUtil.sqlException(Unknown Source)
	at org.hsqldb.jdbc.JDBCStatement.fetchResult(Unknown Source)
	at org.hsqldb.jdbc.JDBCStatement.execute(Unknown Source)
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:51)
	... 39 more
Caused by: org.hsqldb.HsqlException: user lacks privilege or object not found: HIBERNATE_SEQUENCE
	at org.hsqldb.error.Error.error(Unknown Source)
	at org.hsqldb.error.Error.error(Unknown Source)
	at org.hsqldb.StatementSchema.getResult(Unknown Source)
	at org.hsqldb.StatementSchema.execute(Unknown Source)
	at org.hsqldb.Session.executeCompiledStatement(Unknown Source)
	at org.hsqldb.Session.executeDirectStatement(Unknown Source)
	at org.hsqldb.Session.execute(Unknown Source)
	... 42 more
2018-10-05 14:36:29,847 [main] INFO  SchemaCreatorImpl               - HHH000476: Executing import script 'org.hibernate.tool.schema.internal.exec.ScriptSourceInputNonExistentImpl@5da08e9a'
2018-10-05 14:36:29,854 [main] WARN  EntityManagerFactoryRegistry    - HHH000436: Entity manager factory name (eventStore) is already registered.  If entity manager will be clustered or passivated, specify a unique value for property 'hibernate.ejb.entitymanager_factory_name'
2018-10-05 14:36:29,857 [EventProcessor[org.axonframework.config]-0] INFO  TrackingEventProcessor          - Dispatching new tracking segment worker: TrackingSegmentWorker{processor=org.axonframework.config, segment=Segment[0/1]}
2018-10-05 14:36:29,857 [EventProcessor[org.axonframework.config]-0] INFO  TrackingEventProcessor          - Using current Thread for last segment worker: TrackingSegmentWorker{processor=org.axonframework.config, segment=Segment[1/1]}
2018-10-05 14:36:29,857 [EventProcessor[org.axonframework.config]-0] INFO  TrackingEventProcessor          - Fetched token: null for segment: Segment[1/1]
2018-10-05 14:36:29,857 [EventProcessor[org.axonframework.config]-1] INFO  TrackingEventProcessor          - Fetched token: null for segment: Segment[0/1]
2018-10-05 14:36:29,858 [main] INFO  TrackingEventProcessor          - Shutdown state set for Processor 'org.axonframework.config'. Awaiting termination...
2018-10-05 14:36:30,604 [EmbeddedEventStore-0] ERROR EmbeddedEventStore              - Failed to read events from the underlying event storage
java.lang.IllegalStateException: EntityManagerFactory is closed
	at org.hibernate.jpa.internal.EntityManagerFactoryImpl.validateNotClosed(EntityManagerFactoryImpl.java:367)
	at org.hibernate.jpa.internal.EntityManagerFactoryImpl.internalCreateEntityManager(EntityManagerFactoryImpl.java:316)
	at org.hibernate.jpa.internal.EntityManagerFactoryImpl.createEntityManager(EntityManagerFactoryImpl.java:286)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.invokeProxyMethod(AbstractEntityManagerFactoryBean.java:476)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean$ManagedEntityManagerFactoryInvocationHandler.invoke(AbstractEntityManagerFactoryBean.java:655)
	at com.sun.proxy.$Proxy66.createEntityManager(Unknown Source)
	at org.springframework.orm.jpa.SharedEntityManagerCreator$SharedEntityManagerInvocationHandler.invoke(SharedEntityManagerCreator.java:298)
	at com.sun.proxy.$Proxy67.createQuery(Unknown Source)
	at org.axonframework.eventsourcing.eventstore.jpa.JpaEventStorageEngine.lambda$fetchTrackedEvents$1(JpaEventStorageEngine.java:240)
	at org.axonframework.common.transaction.TransactionManager.fetchInTransaction(TransactionManager.java:67)
	at org.axonframework.eventsourcing.eventstore.jpa.JpaEventStorageEngine.fetchTrackedEvents(JpaEventStorageEngine.java:230)
	at org.axonframework.eventsourcing.eventstore.BatchingEventStorageEngine.lambda$readEventData$1(BatchingEventStorageEngine.java:154)
	at org.axonframework.eventsourcing.eventstore.BatchingEventStorageEngine$EventStreamSpliterator.tryAdvance(BatchingEventStorageEngine.java:192)
	at java.util.Spliterator.forEachRemaining(Spliterator.java:326)
	at java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:481)
	at java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:471)
	at java.util.stream.ForEachOps$ForEachOp.evaluateSequential(ForEachOps.java:151)
	at java.util.stream.ForEachOps$ForEachOp$OfRef.evaluateSequential(ForEachOps.java:174)
	at java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)
	at java.util.stream.ReferencePipeline.forEach(ReferencePipeline.java:418)
	at org.axonframework.eventsourcing.eventstore.EmbeddedEventStore$EventProducer.fetchData(EmbeddedEventStore.java:265)
	at org.axonframework.eventsourcing.eventstore.EmbeddedEventStore$EventProducer.run(EmbeddedEventStore.java:231)
	at org.axonframework.eventsourcing.eventstore.EmbeddedEventStore$EventProducer.access$2000(EmbeddedEventStore.java:210)
	at org.axonframework.eventsourcing.eventstore.EmbeddedEventStore.lambda$ensureProducerStarted$0(EmbeddedEventStore.java:160)
	at java.lang.Thread.run(Thread.java:745)
2018-10-05 14:36:30,866 [main] INFO  LogHelper                       - HHH000204: Processing PersistenceUnitInfo [
	name: eventStore
	...]
2018-10-05 14:36:30,931 [main] WARN  connections                     - HHH10001002: Using Hibernate built-in connection pool (not for production use!)
2018-10-05 14:36:30,932 [main] INFO  connections                     - HHH10001005: using driver [null] at URL [jdbc:hsqldb:mem:axontest]
2018-10-05 14:36:30,932 [main] INFO  connections                     - HHH10001001: Connection properties: {}
2018-10-05 14:36:30,932 [main] INFO  connections                     - HHH10001003: Autocommit mode: false
2018-10-05 14:36:30,932 [main] INFO  rManagerConnectionProviderImpl  - HHH000115: Hibernate connection pool size: 20 (min=1)
2018-10-05 14:36:30,932 [main] INFO  Dialect                         - HHH000400: Using dialect: org.hibernate.dialect.HSQLDialect
2018-10-05 14:36:30,986 [main] INFO  SchemaCreatorImpl               - HHH000476: Executing import script 'org.hibernate.tool.schema.internal.exec.ScriptSourceInputNonExistentImpl@5da08e9a'
2018-10-05 14:36:30,994 [main] WARN  EntityManagerFactoryRegistry    - HHH000436: Entity manager factory name (eventStore) is already registered.  If entity manager will be clustered or passivated, specify a unique value for property 'hibernate.ejb.entitymanager_factory_name'
2018-10-05 14:36:31,017 [main] INFO  LogHelper                       - HHH000204: Processing PersistenceUnitInfo [
	name: eventStore
	...]
2018-10-05 14:36:31,081 [main] WARN  connections                     - HHH10001002: Using Hibernate built-in connection pool (not for production use!)
2018-10-05 14:36:31,081 [main] INFO  connections                     - HHH10001005: using driver [null] at URL [jdbc:hsqldb:mem:axontest]
2018-10-05 14:36:31,081 [main] INFO  connections                     - HHH10001001: Connection properties: {}
2018-10-05 14:36:31,081 [main] INFO  connections                     - HHH10001003: Autocommit mode: false
2018-10-05 14:36:31,081 [main] INFO  rManagerConnectionProviderImpl  - HHH000115: Hibernate connection pool size: 20 (min=1)
2018-10-05 14:36:31,082 [main] INFO  Dialect                         - HHH000400: Using dialect: org.hibernate.dialect.HSQLDialect
2018-10-05 14:36:31,151 [main] INFO  SchemaCreatorImpl               - HHH000476: Executing import script 'org.hibernate.tool.schema.internal.exec.ScriptSourceInputNonExistentImpl@5da08e9a'
2018-10-05 14:36:31,161 [main] WARN  EntityManagerFactoryRegistry    - HHH000436: Entity manager factory name (eventStore) is already registered.  If entity manager will be clustered or passivated, specify a unique value for property 'hibernate.ejb.entitymanager_factory_name'
2018-10-05 14:36:31,173 [main] INFO  ueryTranslatorFactoryInitiator  - HHH000397: Using ASTQueryTranslatorFactory
2018-10-05 14:36:31,191 [main] INFO  LogHelper                       - HHH000204: Processing PersistenceUnitInfo [
	name: eventStore
	...]
2018-10-05 14:36:31,240 [main] WARN  connections                     - HHH10001002: Using Hibernate built-in connection pool (not for production use!)
2018-10-05 14:36:31,241 [main] INFO  connections                     - HHH10001005: using driver [null] at URL [jdbc:hsqldb:mem:axontest]
2018-10-05 14:36:31,241 [main] INFO  connections                     - HHH10001001: Connection properties: {}
2018-10-05 14:36:31,241 [main] INFO  connections                     - HHH10001003: Autocommit mode: false
2018-10-05 14:36:31,241 [main] INFO  rManagerConnectionProviderImpl  - HHH000115: Hibernate connection pool size: 20 (min=1)
2018-10-05 14:36:31,241 [main] INFO  Dialect                         - HHH000400: Using dialect: org.hibernate.dialect.HSQLDialect
2018-10-05 14:36:31,306 [main] INFO  SchemaCreatorImpl               - HHH000476: Executing import script 'org.hibernate.tool.schema.internal.exec.ScriptSourceInputNonExistentImpl@5da08e9a'
2018-10-05 14:36:31,312 [main] WARN  EntityManagerFactoryRegistry    - HHH000436: Entity manager factory name (eventStore) is already registered.  If entity manager will be clustered or passivated, specify a unique value for property 'hibernate.ejb.entitymanager_factory_name'
2018-10-05 14:36:31,315 [EventProcessor[org.axonframework.config]-0] INFO  TrackingEventProcessor          - Dispatching new tracking segment worker: TrackingSegmentWorker{processor=org.axonframework.config, segment=Segment[0/1]}
2018-10-05 14:36:31,315 [EventProcessor[org.axonframework.config]-0] INFO  TrackingEventProcessor          - Using current Thread for last segment worker: TrackingSegmentWorker{processor=org.axonframework.config, segment=Segment[1/1]}
2018-10-05 14:36:31,315 [main] INFO  TrackingEventProcessor          - Shutdown state set for Processor 'org.axonframework.config'. Awaiting termination...
2018-10-05 14:36:31,315 [EventProcessor[org.axonframework.config]-0] WARN  TrackingEventProcessor          - Error occurred. Starting retry mode.
java.lang.NullPointerException
	at org.axonframework.eventhandling.TrackingEventProcessor.checkSegmentCaughtUp(TrackingEventProcessor.java:296)
	at org.axonframework.eventhandling.TrackingEventProcessor.processBatch(TrackingEventProcessor.java:248)
	at org.axonframework.eventhandling.TrackingEventProcessor.processingLoop(TrackingEventProcessor.java:213)
	at org.axonframework.eventhandling.TrackingEventProcessor$TrackingSegmentWorker.run(TrackingEventProcessor.java:696)
	at org.axonframework.eventhandling.TrackingEventProcessor$WorkerLauncher.run(TrackingEventProcessor.java:793)
	at org.axonframework.eventhandling.TrackingEventProcessor$CountingRunnable.run(TrackingEventProcessor.java:623)
	at java.lang.Thread.run(Thread.java:745)
2018-10-05 14:36:31,315 [EventProcessor[org.axonframework.config]-0] WARN  TrackingEventProcessor          - Releasing claim on token and preparing for retry in 1s
2018-10-05 14:36:31,322 [main] INFO  LogHelper                       - HHH000204: Processing PersistenceUnitInfo [
	name: eventStore
	...]
2018-10-05 14:36:31,368 [main] WARN  connections                     - HHH10001002: Using Hibernate built-in connection pool (not for production use!)
2018-10-05 14:36:31,368 [main] INFO  connections                     - HHH10001005: using driver [null] at URL [jdbc:hsqldb:mem:axontest]
2018-10-05 14:36:31,368 [main] INFO  connections                     - HHH10001001: Connection properties: {}
2018-10-05 14:36:31,368 [main] INFO  connections                     - HHH10001003: Autocommit mode: false
2018-10-05 14:36:31,368 [main] INFO  rManagerConnectionProviderImpl  - HHH000115: Hibernate connection pool size: 20 (min=1)
2018-10-05 14:36:31,369 [main] INFO  Dialect                         - HHH000400: Using dialect: org.hibernate.dialect.HSQLDialect
2018-10-05 14:36:31,418 [main] INFO  SchemaCreatorImpl               - HHH000476: Executing import script 'org.hibernate.tool.schema.internal.exec.ScriptSourceInputNonExistentImpl@5da08e9a'
2018-10-05 14:36:31,426 [main] WARN  EntityManagerFactoryRegistry    - HHH000436: Entity manager factory name (eventStore) is already registered.  If entity manager will be clustered or passivated, specify a unique value for property 'hibernate.ejb.entitymanager_factory_name'
2018-10-05 14:36:31,431 [main] INFO  LogHelper                       - HHH000204: Processing PersistenceUnitInfo [
	name: eventStore
	...]
2018-10-05 14:36:31,477 [main] WARN  connections                     - HHH10001002: Using Hibernate built-in connection pool (not for production use!)
2018-10-05 14:36:31,477 [main] INFO  connections                     - HHH10001005: using driver [null] at URL [jdbc:hsqldb:mem:axontest]
2018-10-05 14:36:31,477 [main] INFO  connections                     - HHH10001001: Connection properties: {}
2018-10-05 14:36:31,477 [main] INFO  connections                     - HHH10001003: Autocommit mode: false
2018-10-05 14:36:31,477 [main] INFO  rManagerConnectionProviderImpl  - HHH000115: Hibernate connection pool size: 20 (min=1)
2018-10-05 14:36:31,478 [main] INFO  Dialect                         - HHH000400: Using dialect: org.hibernate.dialect.HSQLDialect
2018-10-05 14:36:31,537 [main] INFO  SchemaCreatorImpl               - HHH000476: Executing import script 'org.hibernate.tool.schema.internal.exec.ScriptSourceInputNonExistentImpl@5da08e9a'
2018-10-05 14:36:31,547 [main] WARN  EntityManagerFactoryRegistry    - HHH000436: Entity manager factory name (eventStore) is already registered.  If entity manager will be clustered or passivated, specify a unique value for property 'hibernate.ejb.entitymanager_factory_name'
2018-10-05 14:36:31,562 [main] INFO  LogHelper                       - HHH000204: Processing PersistenceUnitInfo [
	name: eventStore
	...]
2018-10-05 14:36:31,605 [EmbeddedEventStore-0] ERROR EmbeddedEventStore              - Failed to read events from the underlying event storage
java.lang.IllegalStateException: EntityManagerFactory is closed
	at org.hibernate.jpa.internal.EntityManagerFactoryImpl.validateNotClosed(EntityManagerFactoryImpl.java:367)
	at org.hibernate.jpa.internal.EntityManagerFactoryImpl.internalCreateEntityManager(EntityManagerFactoryImpl.java:316)
	at org.hibernate.jpa.internal.EntityManagerFactoryImpl.createEntityManager(EntityManagerFactoryImpl.java:286)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.invokeProxyMethod(AbstractEntityManagerFactoryBean.java:476)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean$ManagedEntityManagerFactoryInvocationHandler.invoke(AbstractEntityManagerFactoryBean.java:655)
	at com.sun.proxy.$Proxy66.createEntityManager(Unknown Source)
	at org.springframework.orm.jpa.SharedEntityManagerCreator$SharedEntityManagerInvocationHandler.invoke(SharedEntityManagerCreator.java:298)
	at com.sun.proxy.$Proxy67.createQuery(Unknown Source)
	at org.axonframework.eventsourcing.eventstore.jpa.JpaEventStorageEngine.lambda$fetchTrackedEvents$1(JpaEventStorageEngine.java:240)
	at org.axonframework.common.transaction.TransactionManager.fetchInTransaction(TransactionManager.java:67)
	at org.axonframework.eventsourcing.eventstore.jpa.JpaEventStorageEngine.fetchTrackedEvents(JpaEventStorageEngine.java:230)
	at org.axonframework.eventsourcing.eventstore.BatchingEventStorageEngine.lambda$readEventData$1(BatchingEventStorageEngine.java:154)
	at org.axonframework.eventsourcing.eventstore.BatchingEventStorageEngine$EventStreamSpliterator.tryAdvance(BatchingEventStorageEngine.java:192)
	at java.util.Spliterator.forEachRemaining(Spliterator.java:326)
	at java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:481)
	at java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:471)
	at java.util.stream.ForEachOps$ForEachOp.evaluateSequential(ForEachOps.java:151)
	at java.util.stream.ForEachOps$ForEachOp$OfRef.evaluateSequential(ForEachOps.java:174)
	at java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)
	at java.util.stream.ReferencePipeline.forEach(ReferencePipeline.java:418)
	at org.axonframework.eventsourcing.eventstore.EmbeddedEventStore$EventProducer.fetchData(EmbeddedEventStore.java:265)
	at org.axonframework.eventsourcing.eventstore.EmbeddedEventStore$EventProducer.run(EmbeddedEventStore.java:231)
	at org.axonframework.eventsourcing.eventstore.EmbeddedEventStore$EventProducer.access$2000(EmbeddedEventStore.java:210)
	at org.axonframework.eventsourcing.eventstore.EmbeddedEventStore.lambda$ensureProducerStarted$0(EmbeddedEventStore.java:160)
	at java.lang.Thread.run(Thread.java:745)
2018-10-05 14:36:31,607 [main] WARN  connections                     - HHH10001002: Using Hibernate built-in connection pool (not for production use!)
2018-10-05 14:36:31,608 [main] INFO  connections                     - HHH10001005: using driver [null] at URL [jdbc:hsqldb:mem:axontest]
2018-10-05 14:36:31,608 [main] INFO  connections                     - HHH10001001: Connection properties: {}
2018-10-05 14:36:31,608 [main] INFO  connections                     - HHH10001003: Autocommit mode: false
2018-10-05 14:36:31,608 [main] INFO  rManagerConnectionProviderImpl  - HHH000115: Hibernate connection pool size: 20 (min=1)
2018-10-05 14:36:31,608 [main] INFO  Dialect                         - HHH000400: Using dialect: org.hibernate.dialect.HSQLDialect
2018-10-05 14:36:31,657 [main] INFO  SchemaCreatorImpl               - HHH000476: Executing import script 'org.hibernate.tool.schema.internal.exec.ScriptSourceInputNonExistentImpl@5da08e9a'
2018-10-05 14:36:31,664 [main] WARN  EntityManagerFactoryRegistry    - HHH000436: Entity manager factory name (eventStore) is already registered.  If entity manager will be clustered or passivated, specify a unique value for property 'hibernate.ejb.entitymanager_factory_name'
2018-10-05 14:36:31,672 [main] INFO  LogHelper                       - HHH000204: Processing PersistenceUnitInfo [
	name: eventStore
	...]
2018-10-05 14:36:31,726 [main] WARN  connections                     - HHH10001002: Using Hibernate built-in connection pool (not for production use!)
2018-10-05 14:36:31,726 [main] INFO  connections                     - HHH10001005: using driver [null] at URL [jdbc:hsqldb:mem:axontest]
2018-10-05 14:36:31,726 [main] INFO  connections                     - HHH10001001: Connection properties: {}
2018-10-05 14:36:31,726 [main] INFO  connections                     - HHH10001003: Autocommit mode: false
2018-10-05 14:36:31,726 [main] INFO  rManagerConnectionProviderImpl  - HHH000115: Hibernate connection pool size: 20 (min=1)
2018-10-05 14:36:31,726 [main] INFO  Dialect                         - HHH000400: Using dialect: org.hibernate.dialect.HSQLDialect
2018-10-05 14:36:31,782 [main] INFO  SchemaCreatorImpl               - HHH000476: Executing import script 'org.hibernate.tool.schema.internal.exec.ScriptSourceInputNonExistentImpl@5da08e9a'
2018-10-05 14:36:31,793 [main] WARN  EntityManagerFactoryRegistry    - HHH000436: Entity manager factory name (eventStore) is already registered.  If entity manager will be clustered or passivated, specify a unique value for property 'hibernate.ejb.entitymanager_factory_name'
2018-10-05 14:36:31,855 [main] INFO  LogHelper                       - HHH000204: Processing PersistenceUnitInfo [
	name: eventStore
	...]
2018-10-05 14:36:31,915 [main] WARN  connections                     - HHH10001002: Using Hibernate built-in connection pool (not for production use!)
2018-10-05 14:36:31,915 [main] INFO  connections                     - HHH10001005: using driver [null] at URL [jdbc:hsqldb:mem:axontest]
2018-10-05 14:36:31,915 [main] INFO  connections                     - HHH10001001: Connection properties: {}
2018-10-05 14:36:31,915 [main] INFO  connections                     - HHH10001003: Autocommit mode: false
2018-10-05 14:36:31,915 [main] INFO  rManagerConnectionProviderImpl  - HHH000115: Hibernate connection pool size: 20 (min=1)
2018-10-05 14:36:31,915 [main] INFO  Dialect                         - HHH000400: Using dialect: org.hibernate.dialect.HSQLDialect
2018-10-05 14:36:31,966 [main] INFO  SchemaCreatorImpl               - HHH000476: Executing import script 'org.hibernate.tool.schema.internal.exec.ScriptSourceInputNonExistentImpl@5da08e9a'
2018-10-05 14:36:31,974 [main] WARN  EntityManagerFactoryRegistry    - HHH000436: Entity manager factory name (eventStore) is already registered.  If entity manager will be clustered or passivated, specify a unique value for property 'hibernate.ejb.entitymanager_factory_name'
2018-10-05 14:36:31,979 [main] INFO  LogHelper                       - HHH000204: Processing PersistenceUnitInfo [
	name: eventStore
	...]
2018-10-05 14:36:32,026 [main] WARN  connections                     - HHH10001002: Using Hibernate built-in connection pool (not for production use!)
2018-10-05 14:36:32,026 [main] INFO  connections                     - HHH10001005: using driver [null] at URL [jdbc:hsqldb:mem:axontest]
2018-10-05 14:36:32,026 [main] INFO  connections                     - HHH10001001: Connection properties: {}
2018-10-05 14:36:32,026 [main] INFO  connections                     - HHH10001003: Autocommit mode: false
2018-10-05 14:36:32,027 [main] INFO  rManagerConnectionProviderImpl  - HHH000115: Hibernate connection pool size: 20 (min=1)
2018-10-05 14:36:32,027 [main] INFO  Dialect                         - HHH000400: Using dialect: org.hibernate.dialect.HSQLDialect
2018-10-05 14:36:32,081 [main] INFO  SchemaCreatorImpl               - HHH000476: Executing import script 'org.hibernate.tool.schema.internal.exec.ScriptSourceInputNonExistentImpl@5da08e9a'
2018-10-05 14:36:32,091 [main] WARN  EntityManagerFactoryRegistry    - HHH000436: Entity manager factory name (eventStore) is already registered.  If entity manager will be clustered or passivated, specify a unique value for property 'hibernate.ejb.entitymanager_factory_name'
2018-10-05 14:36:32,097 [main] INFO  LogHelper                       - HHH000204: Processing PersistenceUnitInfo [
	name: eventStore
	...]
2018-10-05 14:36:32,166 [main] WARN  connections                     - HHH10001002: Using Hibernate built-in connection pool (not for production use!)
2018-10-05 14:36:32,166 [main] INFO  connections                     - HHH10001005: using driver [null] at URL [jdbc:hsqldb:mem:axontest]
2018-10-05 14:36:32,167 [main] INFO  connections                     - HHH10001001: Connection properties: {}
2018-10-05 14:36:32,167 [main] INFO  connections                     - HHH10001003: Autocommit mode: false
2018-10-05 14:36:32,167 [main] INFO  rManagerConnectionProviderImpl  - HHH000115: Hibernate connection pool size: 20 (min=1)
2018-10-05 14:36:32,167 [main] INFO  Dialect                         - HHH000400: Using dialect: org.hibernate.dialect.HSQLDialect
2018-10-05 14:36:32,227 [main] INFO  SchemaCreatorImpl               - HHH000476: Executing import script 'org.hibernate.tool.schema.internal.exec.ScriptSourceInputNonExistentImpl@5da08e9a'
2018-10-05 14:36:32,237 [main] WARN  EntityManagerFactoryRegistry    - HHH000436: Entity manager factory name (eventStore) is already registered.  If entity manager will be clustered or passivated, specify a unique value for property 'hibernate.ejb.entitymanager_factory_name'
2018-10-05 14:36:32,273 [main] INFO  LogHelper                       - HHH000204: Processing PersistenceUnitInfo [
	name: eventStore
	...]
2018-10-05 14:36:32,344 [main] WARN  connections                     - HHH10001002: Using Hibernate built-in connection pool (not for production use!)
2018-10-05 14:36:32,344 [main] INFO  connections                     - HHH10001005: using driver [null] at URL [jdbc:hsqldb:mem:axontest]
2018-10-05 14:36:32,344 [main] INFO  connections                     - HHH10001001: Connection properties: {}
2018-10-05 14:36:32,345 [main] INFO  connections                     - HHH10001003: Autocommit mode: false
2018-10-05 14:36:32,345 [main] INFO  rManagerConnectionProviderImpl  - HHH000115: Hibernate connection pool size: 20 (min=1)
2018-10-05 14:36:32,345 [main] INFO  Dialect                         - HHH000400: Using dialect: org.hibernate.dialect.HSQLDialect
2018-10-05 14:36:32,404 [main] INFO  SchemaCreatorImpl               - HHH000476: Executing import script 'org.hibernate.tool.schema.internal.exec.ScriptSourceInputNonExistentImpl@5da08e9a'
2018-10-05 14:36:32,414 [main] WARN  EntityManagerFactoryRegistry    - HHH000436: Entity manager factory name (eventStore) is already registered.  If entity manager will be clustered or passivated, specify a unique value for property 'hibernate.ejb.entitymanager_factory_name'
Tests run: 12, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 2.745 sec - in org.axonframework.config.DefaultConfigurerTest
Running org.axonframework.config.ConfigurationParameterResolverFactoryTest
Tests run: 2, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0 sec - in org.axonframework.config.ConfigurationParameterResolverFactoryTest
Running org.axonframework.config.ConfigurationResourceInjectorTest
Tests run: 1, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.002 sec - in org.axonframework.config.ConfigurationResourceInjectorTest
Running org.axonframework.deadline.SimpleDeadlineManagerTest
2018-10-05 14:36:32,606 [EmbeddedEventStore-0] ERROR EmbeddedEventStore              - Failed to read events from the underlying event storage
java.lang.IllegalStateException: EntityManagerFactory is closed
	at org.hibernate.jpa.internal.EntityManagerFactoryImpl.validateNotClosed(EntityManagerFactoryImpl.java:367)
	at org.hibernate.jpa.internal.EntityManagerFactoryImpl.internalCreateEntityManager(EntityManagerFactoryImpl.java:316)
	at org.hibernate.jpa.internal.EntityManagerFactoryImpl.createEntityManager(EntityManagerFactoryImpl.java:286)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.invokeProxyMethod(AbstractEntityManagerFactoryBean.java:476)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean$ManagedEntityManagerFactoryInvocationHandler.invoke(AbstractEntityManagerFactoryBean.java:655)
	at com.sun.proxy.$Proxy66.createEntityManager(Unknown Source)
	at org.springframework.orm.jpa.SharedEntityManagerCreator$SharedEntityManagerInvocationHandler.invoke(SharedEntityManagerCreator.java:298)
	at com.sun.proxy.$Proxy67.createQuery(Unknown Source)
	at org.axonframework.eventsourcing.eventstore.jpa.JpaEventStorageEngine.lambda$fetchTrackedEvents$1(JpaEventStorageEngine.java:240)
	at org.axonframework.common.transaction.TransactionManager.fetchInTransaction(TransactionManager.java:67)
	at org.axonframework.eventsourcing.eventstore.jpa.JpaEventStorageEngine.fetchTrackedEvents(JpaEventStorageEngine.java:230)
	at org.axonframework.eventsourcing.eventstore.BatchingEventStorageEngine.lambda$readEventData$1(BatchingEventStorageEngine.java:154)
	at org.axonframework.eventsourcing.eventstore.BatchingEventStorageEngine$EventStreamSpliterator.tryAdvance(BatchingEventStorageEngine.java:192)
	at java.util.Spliterator.forEachRemaining(Spliterator.java:326)
	at java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:481)
	at java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:471)
	at java.util.stream.ForEachOps$ForEachOp.evaluateSequential(ForEachOps.java:151)
	at java.util.stream.ForEachOps$ForEachOp$OfRef.evaluateSequential(ForEachOps.java:174)
	at java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)
	at java.util.stream.ReferencePipeline.forEach(ReferencePipeline.java:418)
	at org.axonframework.eventsourcing.eventstore.EmbeddedEventStore$EventProducer.fetchData(EmbeddedEventStore.java:265)
	at org.axonframework.eventsourcing.eventstore.EmbeddedEventStore$EventProducer.run(EmbeddedEventStore.java:231)
	at org.axonframework.eventsourcing.eventstore.EmbeddedEventStore$EventProducer.access$2000(EmbeddedEventStore.java:210)
	at org.axonframework.eventsourcing.eventstore.EmbeddedEventStore.lambda$ensureProducerStarted$0(EmbeddedEventStore.java:160)
	at java.lang.Thread.run(Thread.java:745)
Tests run: 9, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.815 sec - in org.axonframework.deadline.SimpleDeadlineManagerTest
Running org.axonframework.deadline.quartz.QuartzDeadlineManagerTest
2018-10-05 14:36:33,259 [main] INFO  StdSchedulerFactory             - Using default implementation for ThreadExecutor
2018-10-05 14:36:33,259 [main] INFO  SimpleThreadPool                - Job execution threads will use class loader of thread: main
2018-10-05 14:36:33,261 [main] INFO  SchedulerSignalerImpl           - Initialized Scheduler Signaller of type: class org.quartz.core.SchedulerSignalerImpl
2018-10-05 14:36:33,261 [main] INFO  QuartzScheduler                 - Quartz Scheduler v.2.2.1 created.
2018-10-05 14:36:33,261 [main] INFO  RAMJobStore                     - RAMJobStore initialized.
2018-10-05 14:36:33,261 [main] INFO  QuartzScheduler                 - Scheduler meta-data: Quartz Scheduler (v2.2.1) 'DefaultQuartzScheduler' with instanceId 'NON_CLUSTERED'
  Scheduler class: 'org.quartz.core.QuartzScheduler' - running locally.
  NOT STARTED.
  Currently in standby mode.
  Number of jobs executed: 0
  Using thread pool 'org.quartz.simpl.SimpleThreadPool' - with 10 threads.
  Using job-store 'org.quartz.simpl.RAMJobStore' - which does not support persistence. and is not clustered.

2018-10-05 14:36:33,261 [main] INFO  StdSchedulerFactory             - Quartz scheduler 'DefaultQuartzScheduler' initialized from default resource file in Quartz package: 'quartz.properties'
2018-10-05 14:36:33,261 [main] INFO  StdSchedulerFactory             - Quartz scheduler version: 2.2.1
2018-10-05 14:36:33,265 [main] INFO  QuartzScheduler                 - Scheduler DefaultQuartzScheduler_$_NON_CLUSTERED started.
2018-10-05 14:36:33,389 [DefaultQuartzScheduler_Worker-1] INFO  DeadlineJob                     - Job successfully executed. Deadline message [Void] processed.
2018-10-05 14:36:33,394 [main] INFO  QuartzScheduler                 - Scheduler DefaultQuartzScheduler_$_NON_CLUSTERED started.
2018-10-05 14:36:33,518 [DefaultQuartzScheduler_Worker-2] INFO  DeadlineJob                     - Job successfully executed. Deadline message [DeadlinePayload] processed.
2018-10-05 14:36:33,523 [main] INFO  QuartzScheduler                 - Scheduler DefaultQuartzScheduler_$_NON_CLUSTERED started.
2018-10-05 14:36:33,607 [EmbeddedEventStore-0] ERROR EmbeddedEventStore              - Failed to read events from the underlying event storage
java.lang.IllegalStateException: EntityManagerFactory is closed
	at org.hibernate.jpa.internal.EntityManagerFactoryImpl.validateNotClosed(EntityManagerFactoryImpl.java:367)
	at org.hibernate.jpa.internal.EntityManagerFactoryImpl.internalCreateEntityManager(EntityManagerFactoryImpl.java:316)
	at org.hibernate.jpa.internal.EntityManagerFactoryImpl.createEntityManager(EntityManagerFactoryImpl.java:286)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.invokeProxyMethod(AbstractEntityManagerFactoryBean.java:476)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean$ManagedEntityManagerFactoryInvocationHandler.invoke(AbstractEntityManagerFactoryBean.java:655)
	at com.sun.proxy.$Proxy66.createEntityManager(Unknown Source)
	at org.springframework.orm.jpa.SharedEntityManagerCreator$SharedEntityManagerInvocationHandler.invoke(SharedEntityManagerCreator.java:298)
	at com.sun.proxy.$Proxy67.createQuery(Unknown Source)
	at org.axonframework.eventsourcing.eventstore.jpa.JpaEventStorageEngine.lambda$fetchTrackedEvents$1(JpaEventStorageEngine.java:240)
	at org.axonframework.common.transaction.TransactionManager.fetchInTransaction(TransactionManager.java:67)
	at org.axonframework.eventsourcing.eventstore.jpa.JpaEventStorageEngine.fetchTrackedEvents(JpaEventStorageEngine.java:230)
	at org.axonframework.eventsourcing.eventstore.BatchingEventStorageEngine.lambda$readEventData$1(BatchingEventStorageEngine.java:154)
	at org.axonframework.eventsourcing.eventstore.BatchingEventStorageEngine$EventStreamSpliterator.tryAdvance(BatchingEventStorageEngine.java:192)
	at java.util.Spliterator.forEachRemaining(Spliterator.java:326)
	at java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:481)
	at java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:471)
	at java.util.stream.ForEachOps$ForEachOp.evaluateSequential(ForEachOps.java:151)
	at java.util.stream.ForEachOps$ForEachOp$OfRef.evaluateSequential(ForEachOps.java:174)
	at java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)
	at java.util.stream.ReferencePipeline.forEach(ReferencePipeline.java:418)
	at org.axonframework.eventsourcing.eventstore.EmbeddedEventStore$EventProducer.fetchData(EmbeddedEventStore.java:265)
	at org.axonframework.eventsourcing.eventstore.EmbeddedEventStore$EventProducer.run(EmbeddedEventStore.java:231)
	at org.axonframework.eventsourcing.eventstore.EmbeddedEventStore$EventProducer.access$2000(EmbeddedEventStore.java:210)
	at org.axonframework.eventsourcing.eventstore.EmbeddedEventStore.lambda$ensureProducerStarted$0(EmbeddedEventStore.java:160)
	at java.lang.Thread.run(Thread.java:745)
2018-10-05 14:36:33,637 [DefaultQuartzScheduler_Worker-3] INFO  DeadlineJob                     - Job successfully executed. Deadline message [DeadlinePayload] processed.
2018-10-05 14:36:33,640 [main] INFO  QuartzScheduler                 - Scheduler DefaultQuartzScheduler_$_NON_CLUSTERED started.
2018-10-05 14:36:33,647 [main] INFO  QuartzScheduler                 - Scheduler DefaultQuartzScheduler_$_NON_CLUSTERED started.
2018-10-05 14:36:33,719 [DefaultQuartzScheduler_Worker-4] INFO  DeadlineJob                     - Job successfully executed. Deadline message [EntityDeadlinePayload] processed.
2018-10-05 14:36:33,763 [DefaultQuartzScheduler_Worker-5] INFO  DeadlineJob                     - Job successfully executed. Deadline message [DeadlinePayload] processed.
2018-10-05 14:36:33,765 [main] INFO  QuartzScheduler                 - Scheduler DefaultQuartzScheduler_$_NON_CLUSTERED started.
2018-10-05 14:36:33,882 [DefaultQuartzScheduler_Worker-6] INFO  DeadlineJob                     - Job successfully executed. Deadline message [String] processed.
2018-10-05 14:36:33,886 [main] INFO  QuartzScheduler                 - Scheduler DefaultQuartzScheduler_$_NON_CLUSTERED started.
2018-10-05 14:36:34,007 [DefaultQuartzScheduler_Worker-7] INFO  DeadlineJob                     - Job successfully executed. Deadline message [Void] processed.
2018-10-05 14:36:34,011 [main] INFO  QuartzScheduler                 - Scheduler DefaultQuartzScheduler_$_NON_CLUSTERED started.
2018-10-05 14:36:34,129 [DefaultQuartzScheduler_Worker-8] INFO  DeadlineJob                     - Job successfully executed. Deadline message [String] processed.
2018-10-05 14:36:34,133 [main] INFO  QuartzScheduler                 - Scheduler DefaultQuartzScheduler_$_NON_CLUSTERED started.
Tests run: 9, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.879 sec - in org.axonframework.deadline.quartz.QuartzDeadlineManagerTest
Running org.axonframework.deadline.quartz.DeadlineJobDataBinderTest
Tests run: 9, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.016 sec - in org.axonframework.deadline.quartz.DeadlineJobDataBinderTest
Running org.axonframework.monitoring.MultiMessageMonitorTest
Tests run: 3, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.004 sec - in org.axonframework.monitoring.MultiMessageMonitorTest
2018-10-05 14:36:34,164 [Thread-31] INFO  GenericApplicationContext       - Closing org.springframework.context.support.GenericApplicationContext@2360ebe2: startup date [Fri Oct 05 14:35:56 CEST 2018]; root of context hierarchy
2018-10-05 14:36:34,164 [Thread-66] INFO  GenericApplicationContext       - Closing org.springframework.context.support.GenericApplicationContext@315f4718: startup date [Fri Oct 05 14:36:24 CEST 2018]; root of context hierarchy
2018-10-05 14:36:34,166 [Thread-33] INFO  GenericApplicationContext       - Closing org.springframework.context.support.GenericApplicationContext@46244e65: startup date [Fri Oct 05 14:35:57 CEST 2018]; root of context hierarchy
2018-10-05 14:36:34,174 [Thread-32] INFO  GenericApplicationContext       - Closing org.springframework.context.support.GenericApplicationContext@7a7d25ca: startup date [Fri Oct 05 14:35:56 CEST 2018]; root of context hierarchy
2018-10-05 14:36:34,175 [Thread-66] INFO  tainerEntityManagerFactoryBean  - Closing JPA EntityManagerFactory for persistence unit 'eventStore'
2018-10-05 14:36:34,175 [Thread-33] INFO  tainerEntityManagerFactoryBean  - Closing JPA EntityManagerFactory for persistence unit 'eventStore'
2018-10-05 14:36:34,187 [Thread-32] INFO  tainerEntityManagerFactoryBean  - Closing JPA EntityManagerFactory for persistence unit 'default'
2018-10-05 14:36:34,188 [Thread-32] INFO  pperImpl$DelayedDropActionImpl  - HHH000477: Starting delayed drop of schema as part of SessionFactory shut-down'
Hibernate: drop table TokenEntry if exists
2018-10-05 14:36:34,211 [Thread-32] INFO  connections                     - HHH10001008: Cleaning up connection pool [jdbc:hsqldb:mem:testdb]

Results :

Tests run: 1142, Failures: 0, Errors: 0, Skipped: 1

[INFO]                                                                         
[INFO] ------------------------------------------------------------------------
[INFO] Building Axon Framework Distributed CommandBus JGroups 3.4-SNAPSHOT
[INFO] ------------------------------------------------------------------------
[INFO] 
[INFO] --- maven-resources-plugin:3.0.2:resources (default-resources) @ axon-distributed-commandbus-jgroups ---
[INFO] Using 'UTF-8' encoding to copy filtered resources.
[INFO] skip non existing resourceDirectory /root/workspace/AxonFramework/AxonFramework/437597512/distributed-commandbus-jgroups/src/main/resources
[INFO] 
[INFO] --- maven-compiler-plugin:3.5.1:compile (default-compile) @ axon-distributed-commandbus-jgroups ---
[INFO] Nothing to compile - all classes are up to date
[INFO] 
[INFO] --- maven-resources-plugin:3.0.2:testResources (default-testResources) @ axon-distributed-commandbus-jgroups ---
[INFO] Using 'UTF-8' encoding to copy filtered resources.
[INFO] Copying 4 resources
[INFO] 
[INFO] --- maven-compiler-plugin:3.5.1:testCompile (default-testCompile) @ axon-distributed-commandbus-jgroups ---
[INFO] Nothing to compile - all classes are up to date
[INFO] 
[INFO] --- maven-surefire-plugin:2.19.1:test (default-test) @ axon-distributed-commandbus-jgroups ---

-------------------------------------------------------
 T E S T S
-------------------------------------------------------
Running org.axonframework.jgroups.commandhandling.JGroupsConnectorTest
Tests run: 11, Failures: 0, Errors: 11, Skipped: 0, Time elapsed: 0.203 sec <<< FAILURE! - in org.axonframework.jgroups.commandhandling.JGroupsConnectorTest
testRingsProperlySynchronized_ChannelAlreadyConnectedToOtherCluster(org.axonframework.jgroups.commandhandling.JGroupsConnectorTest)  Time elapsed: 0.112 sec  <<< ERROR!
java.lang.ExceptionInInitializerError
	at org.axonframework.jgroups.commandhandling.JGroupsConnectorTest.createChannel(JGroupsConnectorTest.java:444)
	at org.axonframework.jgroups.commandhandling.JGroupsConnectorTest.setUp(JGroupsConnectorTest.java:71)
Caused by: java.lang.NullPointerException
	at org.axonframework.jgroups.commandhandling.JGroupsConnectorTest.createChannel(JGroupsConnectorTest.java:444)
	at org.axonframework.jgroups.commandhandling.JGroupsConnectorTest.setUp(JGroupsConnectorTest.java:71)

testUpdatesToMemberShipProcessedInOrder(org.axonframework.jgroups.commandhandling.JGroupsConnectorTest)  Time elapsed: 0 sec  <<< ERROR!
java.lang.NoClassDefFoundError: Could not initialize class org.jgroups.conf.XmlConfigurator
	at org.axonframework.jgroups.commandhandling.JGroupsConnectorTest.createChannel(JGroupsConnectorTest.java:444)
	at org.axonframework.jgroups.commandhandling.JGroupsConnectorTest.setUp(JGroupsConnectorTest.java:71)

testUnserializableResponseConvertedToNull(org.axonframework.jgroups.commandhandling.JGroupsConnectorTest)  Time elapsed: 0.001 sec  <<< ERROR!
java.lang.NoClassDefFoundError: Could not initialize class org.jgroups.conf.XmlConfigurator
	at org.axonframework.jgroups.commandhandling.JGroupsConnectorTest.createChannel(JGroupsConnectorTest.java:444)
	at org.axonframework.jgroups.commandhandling.JGroupsConnectorTest.setUp(JGroupsConnectorTest.java:71)

testDisconnectClosesJChannelConnection(org.axonframework.jgroups.commandhandling.JGroupsConnectorTest)  Time elapsed: 0.002 sec  <<< ERROR!
java.lang.NoClassDefFoundError: Could not initialize class org.jgroups.conf.XmlConfigurator
	at org.axonframework.jgroups.commandhandling.JGroupsConnectorTest.createChannel(JGroupsConnectorTest.java:444)
	at org.axonframework.jgroups.commandhandling.JGroupsConnectorTest.setUp(JGroupsConnectorTest.java:71)

testConnectAndDispatchMessagesWaitingOnCallback(org.axonframework.jgroups.commandhandling.JGroupsConnectorTest)  Time elapsed: 0.001 sec  <<< ERROR!
java.lang.NoClassDefFoundError: Could not initialize class org.jgroups.conf.XmlConfigurator
	at org.axonframework.jgroups.commandhandling.JGroupsConnectorTest.createChannel(JGroupsConnectorTest.java:444)
	at org.axonframework.jgroups.commandhandling.JGroupsConnectorTest.setUp(JGroupsConnectorTest.java:71)

testRingsProperlySynchronized_ChannelAlreadyConnected(org.axonframework.jgroups.commandhandling.JGroupsConnectorTest)  Time elapsed: 0.001 sec  <<< ERROR!
java.lang.NoClassDefFoundError: Could not initialize class org.jgroups.conf.XmlConfigurator
	at org.axonframework.jgroups.commandhandling.JGroupsConnectorTest.createChannel(JGroupsConnectorTest.java:444)
	at org.axonframework.jgroups.commandhandling.JGroupsConnectorTest.setUp(JGroupsConnectorTest.java:71)

testJoinMessageReceivedForDisconnectedHost(org.axonframework.jgroups.commandhandling.JGroupsConnectorTest)  Time elapsed: 0.001 sec  <<< ERROR!
java.lang.NoClassDefFoundError: Could not initialize class org.jgroups.conf.XmlConfigurator
	at org.axonframework.jgroups.commandhandling.JGroupsConnectorTest.createChannel(JGroupsConnectorTest.java:444)
	at org.axonframework.jgroups.commandhandling.JGroupsConnectorTest.setUp(JGroupsConnectorTest.java:71)

testConnectAndDispatchMessages_Balanced(org.axonframework.jgroups.commandhandling.JGroupsConnectorTest)  Time elapsed: 0.001 sec  <<< ERROR!
java.lang.NoClassDefFoundError: Could not initialize class org.jgroups.conf.XmlConfigurator
	at org.axonframework.jgroups.commandhandling.JGroupsConnectorTest.createChannel(JGroupsConnectorTest.java:444)
	at org.axonframework.jgroups.commandhandling.JGroupsConnectorTest.setUp(JGroupsConnectorTest.java:71)

testSetupOfReplyingCallback(org.axonframework.jgroups.commandhandling.JGroupsConnectorTest)  Time elapsed: 0.001 sec  <<< ERROR!
java.lang.NoClassDefFoundError: Could not initialize class org.jgroups.conf.XmlConfigurator
	at org.axonframework.jgroups.commandhandling.JGroupsConnectorTest.createChannel(JGroupsConnectorTest.java:444)
	at org.axonframework.jgroups.commandhandling.JGroupsConnectorTest.setUp(JGroupsConnectorTest.java:71)

testConnectAndDispatchMessages_SingleCandidate(org.axonframework.jgroups.commandhandling.JGroupsConnectorTest)  Time elapsed: 0.002 sec  <<< ERROR!
java.lang.NoClassDefFoundError: Could not initialize class org.jgroups.conf.XmlConfigurator
	at org.axonframework.jgroups.commandhandling.JGroupsConnectorTest.createChannel(JGroupsConnectorTest.java:444)
	at org.axonframework.jgroups.commandhandling.JGroupsConnectorTest.setUp(JGroupsConnectorTest.java:71)

testConnectAndDispatchMessages_CustomCommandName(org.axonframework.jgroups.commandhandling.JGroupsConnectorTest)  Time elapsed: 0.001 sec  <<< ERROR!
java.lang.NoClassDefFoundError: Could not initialize class org.jgroups.conf.XmlConfigurator
	at org.axonframework.jgroups.commandhandling.JGroupsConnectorTest.createChannel(JGroupsConnectorTest.java:444)
	at org.axonframework.jgroups.commandhandling.JGroupsConnectorTest.setUp(JGroupsConnectorTest.java:71)

Running org.axonframework.jgroups.commandhandling.JgroupsConnectorTest_Gossip
Tests run: 2, Failures: 0, Errors: 2, Skipped: 0, Time elapsed: 0.001 sec <<< FAILURE! - in org.axonframework.jgroups.commandhandling.JgroupsConnectorTest_Gossip
testConnectorRecoversWhenGossipRouterReconnects(org.axonframework.jgroups.commandhandling.JgroupsConnectorTest_Gossip)  Time elapsed: 0 sec  <<< ERROR!
java.lang.NoClassDefFoundError: Could not initialize class org.jgroups.conf.XmlConfigurator
	at org.axonframework.jgroups.commandhandling.JgroupsConnectorTest_Gossip.createChannel(JgroupsConnectorTest_Gossip.java:159)
	at org.axonframework.jgroups.commandhandling.JgroupsConnectorTest_Gossip.setUp(JgroupsConnectorTest_Gossip.java:67)

testDistributedCommandBusInvokesCallbackOnSerializationFailure(org.axonframework.jgroups.commandhandling.JgroupsConnectorTest_Gossip)  Time elapsed: 0 sec  <<< ERROR!
java.lang.NoClassDefFoundError: Could not initialize class org.jgroups.conf.XmlConfigurator
	at org.axonframework.jgroups.commandhandling.JgroupsConnectorTest_Gossip.createChannel(JgroupsConnectorTest_Gossip.java:159)
	at org.axonframework.jgroups.commandhandling.JgroupsConnectorTest_Gossip.setUp(JgroupsConnectorTest_Gossip.java:67)


Results :

Tests in error: 
  JGroupsConnectorTest.setUp:71->createChannel:444  NoClassDefFound Could not i...
  JGroupsConnectorTest.setUp:71->createChannel:444  NoClassDefFound Could not i...
  JGroupsConnectorTest.setUp:71->createChannel:444  NoClassDefFound Could not i...
  JGroupsConnectorTest.setUp:71->createChannel:444  NoClassDefFound Could not i...
  JGroupsConnectorTest.setUp:71->createChannel:444  NoClassDefFound Could not i...
  JGroupsConnectorTest.setUp:71->createChannel:444  NoClassDefFound Could not i...
  JGroupsConnectorTest.setUp:71->createChannel:444  NoClassDefFound Could not i...
  JGroupsConnectorTest.setUp:71->createChannel:444  ExceptionInInitializer
  JGroupsConnectorTest.setUp:71->createChannel:444  NoClassDefFound Could not i...
  JGroupsConnectorTest.setUp:71->createChannel:444  NoClassDefFound Could not i...
  JGroupsConnectorTest.setUp:71->createChannel:444  NoClassDefFound Could not i...
  JgroupsConnectorTest_Gossip.setUp:67->createChannel:159  NoClassDefFound Coul...
  JgroupsConnectorTest_Gossip.setUp:67->createChannel:159  NoClassDefFound Coul...

Tests run: 13, Failures: 0, Errors: 13, Skipped: 0

[INFO] ------------------------------------------------------------------------
[INFO] Reactor Summary:
[INFO] 
[INFO] Axon Framework ..................................... SUCCESS [  0.004 s]
[INFO] Axon Framework core ................................ SUCCESS [02:12 min]
[INFO] Axon Framework Distributed CommandBus JGroups ...... FAILURE [  1.168 s]
[INFO] Axon Framework Spring Support ...................... SKIPPED
[INFO] Axon AMQP .......................................... SKIPPED
[INFO] Axon Kafka ......................................... SKIPPED
[INFO] Axon Framework Distributed CommandBus Spring Cloud . SKIPPED
[INFO] Axon Metrics ....................................... SKIPPED
[INFO] Axon Framework Spring Boot Support ................. SKIPPED
[INFO] Axon Framework Test Fixtures ....................... SKIPPED
[INFO] Axon MongoDB Components ............................ SKIPPED
[INFO] Axon Integration tests ............................. SKIPPED
[INFO] Spring Boot Starter module for Axon Framework ...... SKIPPED
[INFO] Spring Boot Starter module for Axon with JGroups Distributed Command Bus SKIPPED
[INFO] Axon Legacy Components ............................. SKIPPED
[INFO] ------------------------------------------------------------------------
[INFO] BUILD FAILURE
[INFO] ------------------------------------------------------------------------
[INFO] Total time: 02:16 min
[INFO] Finished at: 2018-10-05T14:36:35+02:00
[INFO] Final Memory: 54M/769M
[INFO] ------------------------------------------------------------------------
[ERROR] Failed to execute goal org.apache.maven.plugins:maven-surefire-plugin:2.19.1:test (default-test) on project axon-distributed-commandbus-jgroups: There are test failures.
[ERROR] 
[ERROR] Please refer to /root/workspace/AxonFramework/AxonFramework/437597512/distributed-commandbus-jgroups/target/surefire-reports for the individual test results.
[ERROR] -> [Help 1]
[ERROR] 
[ERROR] To see the full stack trace of the errors, re-run Maven with the -e switch.
[ERROR] Re-run Maven using the -X switch to enable full debug logging.
[ERROR] 
[ERROR] For more information about the errors and possible solutions, please read the following articles:
[ERROR] [Help 1] http://cwiki.apache.org/confluence/display/MAVEN/MojoFailureException
[ERROR] 
[ERROR] After correcting the problems, you can resume the build with the command
[ERROR]   mvn <goals> -rf :axon-distributed-commandbus-jgroups
