[INFO] Scanning for projects...
[INFO]                                                                         
[INFO] ------------------------------------------------------------------------
[INFO] Building Voting for restaurants 1.0-SNAPSHOT
[INFO] ------------------------------------------------------------------------
[INFO] 
[INFO] --- maven-resources-plugin:2.6:resources (default-resources) @ votingforrestaurants ---
[INFO] Using 'UTF-8' encoding to copy filtered resources.
[INFO] Copying 11 resources
[INFO] 
[INFO] --- maven-compiler-plugin:3.7.0:compile (default-compile) @ votingforrestaurants ---
[INFO] Nothing to compile - all classes are up to date
[INFO] 
[INFO] --- maven-resources-plugin:2.6:testResources (default-testResources) @ votingforrestaurants ---
[INFO] Using 'UTF-8' encoding to copy filtered resources.
[INFO] Copying 2 resources
[INFO] 
[INFO] --- maven-compiler-plugin:3.7.0:testCompile (default-testCompile) @ votingforrestaurants ---
[INFO] Nothing to compile - all classes are up to date
[INFO] 
[INFO] --- maven-surefire-plugin:2.20.1:test (default-test) @ votingforrestaurants ---
[INFO] Downloading: https://repo.maven.apache.org/maven2/org/apache/maven/surefire/surefire-junit4/2.20.1/surefire-junit4-2.20.1.pom
[INFO] Downloaded: https://repo.maven.apache.org/maven2/org/apache/maven/surefire/surefire-junit4/2.20.1/surefire-junit4-2.20.1.pom (4 KB at 7.9 KB/sec)
[INFO] Downloading: https://repo.maven.apache.org/maven2/org/apache/maven/surefire/surefire-providers/2.20.1/surefire-providers-2.20.1.pom
[INFO] Downloaded: https://repo.maven.apache.org/maven2/org/apache/maven/surefire/surefire-providers/2.20.1/surefire-providers-2.20.1.pom (3 KB at 123.0 KB/sec)
[INFO] Downloading: https://repo.maven.apache.org/maven2/org/apache/maven/surefire/surefire-junit4/2.20.1/surefire-junit4-2.20.1.jar
[INFO] Downloaded: https://repo.maven.apache.org/maven2/org/apache/maven/surefire/surefire-junit4/2.20.1/surefire-junit4-2.20.1.jar (81 KB at 1164.5 KB/sec)
[INFO] 
[INFO] -------------------------------------------------------
[INFO]  T E S T S
[INFO] -------------------------------------------------------
[INFO] Running ru.neustupov.votingforrestaurants.web.restaurant.AdminRestaurantRestControllerTest
21:20:40.427 DEBUG o.s.data.jpa.repository.query.JpaQueryFactory.fromQueryAnnotation:55 - Looking up query for method getByUserIdAndDate
21:20:40.558 DEBUG o.s.data.jpa.repository.query.JpaQueryFactory.fromQueryAnnotation:55 - Looking up query for method getAll
21:20:40.565 DEBUG o.s.data.jpa.repository.query.JpaQueryFactory.fromQueryAnnotation:55 - Looking up query for method getByUserIdAndRestId
21:20:40.572 DEBUG o.s.data.jpa.repository.query.JpaQueryFactory.fromQueryAnnotation:55 - Looking up query for method getAllByUserId
21:20:40.578 DEBUG o.s.data.jpa.repository.query.JpaQueryFactory.fromQueryAnnotation:55 - Looking up query for method getWithRestaurantAndUser
21:20:40.585 DEBUG o.s.data.jpa.repository.query.JpaQueryFactory.fromQueryAnnotation:55 - Looking up query for method getWithUser
21:20:40.588 DEBUG o.s.data.jpa.repository.query.JpaQueryFactory.fromQueryAnnotation:55 - Looking up query for method getAllByRestaurantId
21:20:40.594 DEBUG o.s.data.jpa.repository.query.JpaQueryFactory.fromQueryAnnotation:55 - Looking up query for method delete
21:20:40.604 DEBUG o.s.data.jpa.repository.query.JpaQueryFactory.fromQueryAnnotation:55 - Looking up query for method getAllForCurrentDate
21:20:40.610 DEBUG o.s.data.jpa.repository.query.JpaQueryFactory.fromQueryAnnotation:55 - Looking up query for method getWithRestaurant
21:20:40.651 DEBUG o.s.data.jpa.repository.query.JpaQueryFactory.fromQueryAnnotation:55 - Looking up query for method getWithVotesAndMenus
21:20:40.656 DEBUG o.s.data.jpa.repository.query.JpaQueryFactory.fromQueryAnnotation:55 - Looking up query for method delete
21:20:40.660 DEBUG o.s.data.jpa.repository.query.JpaQueryFactory.fromQueryAnnotation:55 - Looking up query for method getWithVotes
21:20:40.663 DEBUG o.s.data.jpa.repository.query.JpaQueryFactory.fromQueryAnnotation:55 - Looking up query for method getWithMenus
21:20:40.684 DEBUG o.s.data.jpa.repository.query.JpaQueryFactory.fromQueryAnnotation:55 - Looking up query for method getAll
21:20:40.690 DEBUG o.s.data.jpa.repository.query.JpaQueryFactory.fromQueryAnnotation:55 - Looking up query for method getWithMenu
21:20:40.697 DEBUG o.s.data.jpa.repository.query.JpaQueryFactory.fromQueryAnnotation:55 - Looking up query for method delete
21:20:40.720 DEBUG o.s.data.jpa.repository.query.JpaQueryFactory.fromQueryAnnotation:55 - Looking up query for method getWithRestaurant
21:20:40.725 DEBUG o.s.data.jpa.repository.query.JpaQueryFactory.fromQueryAnnotation:55 - Looking up query for method delete
21:20:40.730 DEBUG o.s.data.jpa.repository.query.JpaQueryFactory.fromQueryAnnotation:55 - Looking up query for method getWithRestaurantAndMeals
21:20:40.732 DEBUG o.s.data.jpa.repository.query.JpaQueryFactory.fromQueryAnnotation:55 - Looking up query for method getAll
21:20:40.738 DEBUG o.s.data.jpa.repository.query.JpaQueryFactory.fromQueryAnnotation:55 - Looking up query for method findByRestaurantIdAndAddDate
21:20:40.761 DEBUG o.s.data.jpa.repository.query.JpaQueryFactory.fromQueryAnnotation:55 - Looking up query for method getWithVotes
21:20:40.766 DEBUG o.s.data.jpa.repository.query.JpaQueryFactory.fromQueryAnnotation:55 - Looking up query for method delete
21:20:40.770 DEBUG o.s.data.jpa.repository.query.JpaQueryFactory.fromQueryAnnotation:55 - Looking up query for method getAll
21:20:40.779 DEBUG o.s.data.jpa.repository.query.JpaQueryFactory.fromQueryAnnotation:55 - Looking up query for method getByEmail
21:20:40.780 DEBUG o.s.data.jpa.repository.query.NamedQuery.lookupFrom:122 - Looking up named query User.getByEmail
21:20:40.782 DEBUG o.s.data.jpa.repository.query.NamedQuery.hasNamedQuery:104 - Did not find named query User.getByEmail
21:20:40.875 DEBUG o.springframework.jdbc.datasource.DataSourceUtils.doGetConnection:114 - Fetching JDBC Connection from DataSource
21:20:40.877 INFO  o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:442 - Executing SQL script from class path resource [db/initDB_hsql.sql]
21:20:40.884 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 0 returned as update count for SQL: DROP TABLE user_roles IF EXISTS
21:20:40.885 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 0 returned as update count for SQL: DROP TABLE votes IF EXISTS
21:20:40.885 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 0 returned as update count for SQL: DROP TABLE users IF EXISTS
21:20:40.886 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 0 returned as update count for SQL: DROP TABLE meals IF EXISTS
21:20:40.886 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 0 returned as update count for SQL: DROP TABLE menus IF EXISTS
21:20:40.886 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 0 returned as update count for SQL: DROP TABLE restaurants IF EXISTS
21:20:40.887 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 0 returned as update count for SQL: DROP SEQUENCE global_seq IF EXISTS
21:20:40.888 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 0 returned as update count for SQL: CREATE SEQUENCE GLOBAL_SEQ AS INTEGER START WITH 100000
21:20:40.890 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 0 returned as update count for SQL: CREATE TABLE USERS ( id INTEGER GENERATED BY DEFAULT AS SEQUENCE GLOBAL_SEQ PRIMARY KEY, name VARCHAR(255) NOT NULL, email VARCHAR(255) NOT NULL, password VARCHAR(255) NOT NULL, registered TIMESTAMP DEFAULT now() NOT NULL, enabled BOOLEAN DEFAULT TRUE NOT NULL, CONSTRAINT users_unique_email_idx UNIQUE (email) )
21:20:40.892 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 0 returned as update count for SQL: CREATE TABLE USER_ROLES ( user_id INTEGER NOT NULL, role VARCHAR(255), CONSTRAINT user_roles_idx UNIQUE (user_id, role), FOREIGN KEY (user_id) REFERENCES USERS (id) ON DELETE CASCADE )
21:20:40.893 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 0 returned as update count for SQL: CREATE TABLE RESTAURANTS ( id INTEGER GENERATED BY DEFAULT AS SEQUENCE GLOBAL_SEQ PRIMARY KEY, name VARCHAR(255) NOT NULL, CONSTRAINT restaurant_name_idx UNIQUE (name) )
21:20:40.895 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 0 returned as update count for SQL: CREATE TABLE VOTES ( id INTEGER GENERATED BY DEFAULT AS SEQUENCE GLOBAL_SEQ NOT NULL, user_id INTEGER NOT NULL, date DATE DEFAULT CURRENT_DATE NOT NULL, restaurant INTEGER NOT NULL, FOREIGN KEY (user_id) REFERENCES users (id) ON DELETE CASCADE, FOREIGN KEY (restaurant) REFERENCES restaurants (id) ON DELETE CASCADE, CONSTRAINT votes_unique_user_date_idx UNIQUE (user_id, date) )
21:20:40.896 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 0 returned as update count for SQL: CREATE TABLE MENUS ( id INTEGER GENERATED BY DEFAULT AS SEQUENCE GLOBAL_SEQ PRIMARY KEY, id_rest INTEGER NOT NULL, add_date DATE DEFAULT CURRENT_DATE NOT NULL, FOREIGN KEY (id_rest) REFERENCES RESTAURANTS (id) ON DELETE CASCADE, CONSTRAINT menus_unique_id_datetime_idx UNIQUE (id_rest, add_date) )
21:20:40.897 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 0 returned as update count for SQL: CREATE TABLE MEALS ( id INTEGER GENERATED BY DEFAULT AS SEQUENCE GLOBAL_SEQ, id_menu INTEGER NOT NULL, name VARCHAR(255) NOT NULL, price INT NOT NULL, FOREIGN KEY (id_menu) REFERENCES MENUS (id) ON DELETE CASCADE )
21:20:40.898 INFO  o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:508 - Executed SQL script from class path resource [db/initDB_hsql.sql] in 20 ms.
21:20:40.898 INFO  o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:442 - Executing SQL script from class path resource [db/populateDB.sql]
21:20:40.904 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 0 returned as update count for SQL: DELETE FROM user_roles
21:20:40.904 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:477 - SQLWarning ignored: SQL state '02000', error code '-1100', message [no data]
21:20:40.905 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 0 returned as update count for SQL: DELETE FROM votes
21:20:40.906 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:477 - SQLWarning ignored: SQL state '02000', error code '-1100', message [no data]
21:20:40.906 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 0 returned as update count for SQL: DELETE FROM users
21:20:40.906 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:477 - SQLWarning ignored: SQL state '02000', error code '-1100', message [no data]
21:20:40.907 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 0 returned as update count for SQL: DELETE FROM meals
21:20:40.907 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:477 - SQLWarning ignored: SQL state '02000', error code '-1100', message [no data]
21:20:40.908 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 0 returned as update count for SQL: DELETE FROM menus
21:20:40.908 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:477 - SQLWarning ignored: SQL state '02000', error code '-1100', message [no data]
21:20:40.908 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 0 returned as update count for SQL: DELETE FROM restaurants
21:20:40.909 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:477 - SQLWarning ignored: SQL state '02000', error code '-1100', message [no data]
21:20:40.909 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 0 returned as update count for SQL: ALTER SEQUENCE global_seq RESTART WITH 100000
21:20:40.911 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 2 returned as update count for SQL: INSERT INTO USERS (name, email, password) VALUES ('User', 'user@yandex.ru', '{noop}password'), ('Admin', 'admin@yandex.ru','{noop}admin')
21:20:40.912 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 3 returned as update count for SQL: INSERT INTO USER_ROLES (role, user_id) VALUES ('ROLE_USER', 100000), ('ROLE_ADMIN', 100001), ('ROLE_USER', 100001)
21:20:40.913 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 5 returned as update count for SQL: INSERT INTO RESTAURANTS (NAME) VALUES ('Russia'), ('Ukraine'), ('U Kolyana'), ('Almaz'), ('Fart')
21:20:40.916 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 7 returned as update count for SQL: INSERT INTO MENUS (ID_REST, ADD_DATE) VALUES (100002, '2015-05-01'), (100003, '2015-05-02'), (100004, '2015-05-03'), (100005, '2015-05-01'), (100006, '2015-05-02'), (100002, '2015-05-02'), (100002, CURRENT_DATE)
21:20:40.918 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 7 returned as update count for SQL: INSERT INTO MEALS (ID_MENU, NAME, PRICE) VALUES (100007, 'Apple', 5), (100008, 'Juice', 10), (100009, 'Potato', 20), (100010, 'Bananas', 30), (100011, 'Bread', 40), (100007, 'Bottle of water', 50), (100013, 'Mango', 100)
21:20:40.920 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 6 returned as update count for SQL: INSERT INTO VOTES (USER_ID, DATE, RESTAURANT) VALUES (100000, '2015-05-01', 100002), (100000, '2015-05-02', 100003), (100000, '2015-05-03', 100004), (100001, '2015-05-01', 100005), (100001, '2015-05-02', 100006), (100001, '2015-05-03', 100002)
21:20:40.921 INFO  o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:508 - Executed SQL script from class path resource [db/populateDB.sql] in 23 ms.
21:20:40.921 DEBUG o.springframework.jdbc.datasource.DataSourceUtils.doReleaseConnection:340 - Returning JDBC Connection to DataSource
Hibernate: 
    /* select
        generatedAlias0 
    from
        User as generatedAlias0 
    where
        generatedAlias0.email=:param0 */ select
            user0_.id as id1_4_,
            user0_.name as name2_4_,
            user0_.email as email3_4_,
            user0_.enabled as enabled4_4_,
            user0_.password as password5_4_,
            user0_.registered as register6_4_ 
        from
            users user0_ 
        where
            user0_.email=?
Hibernate: 
    select
        roles0_.user_id as user_id1_3_0_,
        roles0_.role as role2_3_0_ 
    from
        user_roles roles0_ 
    where
        roles0_.user_id=?
21:20:44.192 WARN  r.n.votingforrestaurants.web.ExceptionInfoHandler.logAndGetErrorInfo:80 - VALIDATION_ERROR at request  http://localhost/rest/admin/restaurants/100002: org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument at index 0 in method: public void ru.neustupov.votingforrestaurants.web.restaurant.AdminRestaurantRestController.update(ru.neustupov.votingforrestaurants.model.Restaurant,int), with 1 error(s): [Field error in object 'restaurant' on field 'name': rejected value [null]; codes [NotBlank.restaurant.name,NotBlank.name,NotBlank.java.lang.String,NotBlank]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [restaurant.name,name]; arguments []; default message [name]]; default message [не может быть пусто]] 
21:20:44.195 WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver.doResolveHandlerMethodException:410 - Failed to invoke @ExceptionHandler method: public ru.neustupov.votingforrestaurants.util.exception.ErrorInfo ru.neustupov.votingforrestaurants.web.ExceptionInfoHandler.bindValidationError(javax.servlet.http.HttpServletRequest,java.lang.Exception)
org.springframework.context.NoSuchMessageException: No message found under code 'error.validationError' for locale 'ru'.
	at org.springframework.context.support.AbstractMessageSource.getMessage(AbstractMessageSource.java:161)
	at ru.neustupov.votingforrestaurants.web.MessageUtil.getMessage(MessageUtil.java:23)
	at ru.neustupov.votingforrestaurants.web.MessageUtil.getMessage(MessageUtil.java:27)
	at ru.neustupov.votingforrestaurants.web.ExceptionInfoHandler.logAndGetErrorInfo(ExceptionInfoHandler.java:83)
	at ru.neustupov.votingforrestaurants.web.ExceptionInfoHandler.bindValidationError(ExceptionInfoHandler.java:60)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:209)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:136)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:102)
	at org.springframework.web.servlet.mvc.method.annotation.ExceptionHandlerExceptionResolver.doResolveHandlerMethodException(ExceptionHandlerExceptionResolver.java:403)
	at org.springframework.web.servlet.handler.AbstractHandlerMethodExceptionResolver.doResolveException(AbstractHandlerMethodExceptionResolver.java:61)
	at org.springframework.web.servlet.handler.AbstractHandlerExceptionResolver.resolveException(AbstractHandlerExceptionResolver.java:140)
	at org.springframework.web.servlet.DispatcherServlet.processHandlerException(DispatcherServlet.java:1255)
	at org.springframework.test.web.servlet.TestDispatcherServlet.processHandlerException(TestDispatcherServlet.java:113)
	at org.springframework.web.servlet.DispatcherServlet.processDispatchResult(DispatcherServlet.java:1062)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1008)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:925)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:978)
	at org.springframework.web.servlet.FrameworkServlet.doPut(FrameworkServlet.java:892)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:663)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:855)
	at org.springframework.test.web.servlet.TestDispatcherServlet.service(TestDispatcherServlet.java:66)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:741)
	at org.springframework.mock.web.MockFilterChain$ServletFilterProxy.doFilter(MockFilterChain.java:166)
	at org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:133)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:320)
	at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:127)
	at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:91)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:119)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:111)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:170)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.authentication.www.BasicAuthenticationFilter.doFilterInternal(BasicAuthenticationFilter.java:215)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:64)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:56)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:105)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:215)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:178)
	at org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:133)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:200)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:133)
	at org.springframework.test.web.servlet.MockMvc.perform(MockMvc.java:166)
	at ru.neustupov.votingforrestaurants.web.restaurant.AdminRestaurantRestControllerTest.testUpdateInvalid(AdminRestaurantRestControllerTest.java:133)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:50)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:47)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.springframework.test.context.junit4.statements.RunBeforeTestExecutionCallbacks.evaluate(RunBeforeTestExecutionCallbacks.java:73)
	at org.springframework.test.context.junit4.statements.RunAfterTestExecutionCallbacks.evaluate(RunAfterTestExecutionCallbacks.java:83)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.springframework.test.context.junit4.statements.RunBeforeTestMethodCallbacks.evaluate(RunBeforeTestMethodCallbacks.java:75)
	at org.springframework.test.context.junit4.statements.RunAfterTestMethodCallbacks.evaluate(RunAfterTestMethodCallbacks.java:86)
	at org.springframework.test.context.junit4.statements.SpringRepeat.evaluate(SpringRepeat.java:84)
	at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:325)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:251)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:97)
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:290)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288)
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:58)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268)
	at org.springframework.test.context.junit4.statements.RunBeforeTestClassCallbacks.evaluate(RunBeforeTestClassCallbacks.java:61)
	at org.springframework.test.context.junit4.statements.RunAfterTestClassCallbacks.evaluate(RunAfterTestClassCallbacks.java:70)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:363)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.run(SpringJUnit4ClassRunner.java:190)
	at org.apache.maven.surefire.junit4.JUnit4Provider.execute(JUnit4Provider.java:369)
	at org.apache.maven.surefire.junit4.JUnit4Provider.executeWithRerun(JUnit4Provider.java:275)
	at org.apache.maven.surefire.junit4.JUnit4Provider.executeTestSet(JUnit4Provider.java:239)
	at org.apache.maven.surefire.junit4.JUnit4Provider.invoke(JUnit4Provider.java:160)
	at org.apache.maven.surefire.booter.ForkedBooter.invokeProviderInSameClassLoader(ForkedBooter.java:373)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:334)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:119)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:407)

MockHttpServletRequest:
      HTTP Method = PUT
      Request URI = /rest/admin/restaurants/100002
       Parameters = {}
          Headers = {Content-Type=[application/json;charset=UTF-8], Authorization=[Basic YWRtaW5AeWFuZGV4LnJ1OmFkbWlu]}
             Body = {}
    Session Attrs = {}

Handler:
             Type = ru.neustupov.votingforrestaurants.web.restaurant.AdminRestaurantRestController
           Method = public void ru.neustupov.votingforrestaurants.web.restaurant.AdminRestaurantRestController.update(ru.neustupov.votingforrestaurants.model.Restaurant,int)

Async:
    Async started = false
     Async result = null

Resolved Exception:
             Type = org.springframework.web.bind.MethodArgumentNotValidException

ModelAndView:
        View name = null
             View = null
            Model = null

FlashMap:
       Attributes = null

MockHttpServletResponse:
           Status = 400
    Error message = null
          Headers = {Cache-Control=[no-cache, no-store, max-age=0, must-revalidate], Pragma=[no-cache], Expires=[0], X-XSS-Protection=[1; mode=block], X-Frame-Options=[DENY], X-Content-Type-Options=[nosniff]}
     Content type = null
             Body = 
    Forwarded URL = null
   Redirected URL = null
          Cookies = []
Hibernate: 
    /* select
        generatedAlias0 
    from
        User as generatedAlias0 
    where
        generatedAlias0.email=:param0 */ select
            user0_.id as id1_4_,
            user0_.name as name2_4_,
            user0_.email as email3_4_,
            user0_.enabled as enabled4_4_,
            user0_.password as password5_4_,
            user0_.registered as register6_4_ 
        from
            users user0_ 
        where
            user0_.email=?
Hibernate: 
    select
        roles0_.user_id as user_id1_3_0_,
        roles0_.role as role2_3_0_ 
    from
        user_roles roles0_ 
    where
        roles0_.user_id=?
Hibernate: 
    /* select
        generatedAlias0 
    from
        User as generatedAlias0 
    where
        generatedAlias0.email=:param0 */ select
            user0_.id as id1_4_,
            user0_.name as name2_4_,
            user0_.email as email3_4_,
            user0_.enabled as enabled4_4_,
            user0_.password as password5_4_,
            user0_.registered as register6_4_ 
        from
            users user0_ 
        where
            user0_.email=?
Hibernate: 
    select
        roles0_.user_id as user_id1_3_0_,
        roles0_.role as role2_3_0_ 
    from
        user_roles roles0_ 
    where
        roles0_.user_id=?
21:20:44.243 INFO  r.n.v.web.restaurant.AbstractRestaurantController.delete:35 - delete restaurant 1
Hibernate: 
    /* DELETE 
    FROM
        Restaurant r 
    WHERE
        r.id=:id */ delete 
        from
            restaurants 
        where
            id=?
21:20:44.265 WARN  r.n.votingforrestaurants.web.ExceptionInfoHandler.logAndGetErrorInfo:80 - DATA_NOT_FOUND at request  http://localhost/rest/admin/restaurants/1: Not found entity with id=1
21:20:44.265 WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver.doResolveHandlerMethodException:410 - Failed to invoke @ExceptionHandler method: public ru.neustupov.votingforrestaurants.util.exception.ErrorInfo ru.neustupov.votingforrestaurants.web.ExceptionInfoHandler.handleError(javax.servlet.http.HttpServletRequest,ru.neustupov.votingforrestaurants.util.exception.NotFoundException)
org.springframework.context.NoSuchMessageException: No message found under code 'error.dataNotFound' for locale 'ru'.
	at org.springframework.context.support.AbstractMessageSource.getMessage(AbstractMessageSource.java:161)
	at ru.neustupov.votingforrestaurants.web.MessageUtil.getMessage(MessageUtil.java:23)
	at ru.neustupov.votingforrestaurants.web.MessageUtil.getMessage(MessageUtil.java:27)
	at ru.neustupov.votingforrestaurants.web.ExceptionInfoHandler.logAndGetErrorInfo(ExceptionInfoHandler.java:83)
	at ru.neustupov.votingforrestaurants.web.ExceptionInfoHandler.handleError(ExceptionInfoHandler.java:41)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:209)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:136)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:102)
	at org.springframework.web.servlet.mvc.method.annotation.ExceptionHandlerExceptionResolver.doResolveHandlerMethodException(ExceptionHandlerExceptionResolver.java:403)
	at org.springframework.web.servlet.handler.AbstractHandlerMethodExceptionResolver.doResolveException(AbstractHandlerMethodExceptionResolver.java:61)
	at org.springframework.web.servlet.handler.AbstractHandlerExceptionResolver.resolveException(AbstractHandlerExceptionResolver.java:140)
	at org.springframework.web.servlet.DispatcherServlet.processHandlerException(DispatcherServlet.java:1255)
	at org.springframework.test.web.servlet.TestDispatcherServlet.processHandlerException(TestDispatcherServlet.java:113)
	at org.springframework.web.servlet.DispatcherServlet.processDispatchResult(DispatcherServlet.java:1062)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1008)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:925)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:978)
	at org.springframework.web.servlet.FrameworkServlet.doDelete(FrameworkServlet.java:903)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:666)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:855)
	at org.springframework.test.web.servlet.TestDispatcherServlet.service(TestDispatcherServlet.java:66)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:741)
	at org.springframework.mock.web.MockFilterChain$ServletFilterProxy.doFilter(MockFilterChain.java:166)
	at org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:133)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:320)
	at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:127)
	at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:91)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:119)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:111)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:170)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.authentication.www.BasicAuthenticationFilter.doFilterInternal(BasicAuthenticationFilter.java:215)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:64)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:56)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:105)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:215)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:178)
	at org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:133)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:200)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:133)
	at org.springframework.test.web.servlet.MockMvc.perform(MockMvc.java:166)
	at ru.neustupov.votingforrestaurants.web.restaurant.AdminRestaurantRestControllerTest.testDeleteNotFound(AdminRestaurantRestControllerTest.java:111)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:50)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:47)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.springframework.test.context.junit4.statements.RunBeforeTestExecutionCallbacks.evaluate(RunBeforeTestExecutionCallbacks.java:73)
	at org.springframework.test.context.junit4.statements.RunAfterTestExecutionCallbacks.evaluate(RunAfterTestExecutionCallbacks.java:83)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.springframework.test.context.junit4.statements.RunBeforeTestMethodCallbacks.evaluate(RunBeforeTestMethodCallbacks.java:75)
	at org.springframework.test.context.junit4.statements.RunAfterTestMethodCallbacks.evaluate(RunAfterTestMethodCallbacks.java:86)
	at org.springframework.test.context.junit4.statements.SpringRepeat.evaluate(SpringRepeat.java:84)
	at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:325)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:251)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:97)
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:290)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288)
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:58)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268)
	at org.springframework.test.context.junit4.statements.RunBeforeTestClassCallbacks.evaluate(RunBeforeTestClassCallbacks.java:61)
	at org.springframework.test.context.junit4.statements.RunAfterTestClassCallbacks.evaluate(RunAfterTestClassCallbacks.java:70)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:363)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.run(SpringJUnit4ClassRunner.java:190)
	at org.apache.maven.surefire.junit4.JUnit4Provider.execute(JUnit4Provider.java:369)
	at org.apache.maven.surefire.junit4.JUnit4Provider.executeWithRerun(JUnit4Provider.java:275)
	at org.apache.maven.surefire.junit4.JUnit4Provider.executeTestSet(JUnit4Provider.java:239)
	at org.apache.maven.surefire.junit4.JUnit4Provider.invoke(JUnit4Provider.java:160)
	at org.apache.maven.surefire.booter.ForkedBooter.invokeProviderInSameClassLoader(ForkedBooter.java:373)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:334)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:119)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:407)
21:20:44.267 WARN  o.h.e.j.s.SqlExceptionHelper$StandardWarningHandler.logWarning:217 - SQL Warning Code: -1100, SQLState: 02000
21:20:44.267 WARN  o.h.e.j.s.SqlExceptionHelper$StandardWarningHandler.logWarning:218 - no data
Hibernate: 
    /* select
        generatedAlias0 
    from
        User as generatedAlias0 
    where
        generatedAlias0.email=:param0 */ select
            user0_.id as id1_4_,
            user0_.name as name2_4_,
            user0_.email as email3_4_,
            user0_.enabled as enabled4_4_,
            user0_.password as password5_4_,
            user0_.registered as register6_4_ 
        from
            users user0_ 
        where
            user0_.email=?
Hibernate: 
    select
        roles0_.user_id as user_id1_3_0_,
        roles0_.role as role2_3_0_ 
    from
        user_roles roles0_ 
    where
        roles0_.user_id=?
21:20:44.285 INFO  r.n.v.web.restaurant.AbstractRestaurantController.get:30 - get restaurant 100002
Hibernate: 
    select
        restaurant0_.id as id1_2_0_,
        restaurant0_.name as name2_2_0_ 
    from
        restaurants restaurant0_ 
    where
        restaurant0_.id=?

MockHttpServletRequest:
      HTTP Method = GET
      Request URI = /rest/admin/restaurants/100002
       Parameters = {}
          Headers = {Authorization=[Basic YWRtaW5AeWFuZGV4LnJ1OmFkbWlu]}
             Body = null
    Session Attrs = {}

Handler:
             Type = ru.neustupov.votingforrestaurants.web.restaurant.AdminRestaurantRestController
           Method = public ru.neustupov.votingforrestaurants.model.Restaurant ru.neustupov.votingforrestaurants.web.restaurant.AdminRestaurantRestController.get(int)

Async:
    Async started = false
     Async result = null

Resolved Exception:
             Type = null

ModelAndView:
        View name = null
             View = null
            Model = null

FlashMap:
       Attributes = null

MockHttpServletResponse:
           Status = 200
    Error message = null
          Headers = {Cache-Control=[no-cache, no-store, max-age=0, must-revalidate], Pragma=[no-cache], Expires=[0], X-XSS-Protection=[1; mode=block], X-Frame-Options=[DENY], X-Content-Type-Options=[nosniff], Content-Type=[application/json;charset=UTF-8]}
     Content type = application/json;charset=UTF-8
             Body = {"id":100002,"name":"Russia","menus":null,"votes":null}
    Forwarded URL = null
   Redirected URL = null
          Cookies = []
Hibernate: 
    /* select
        generatedAlias0 
    from
        User as generatedAlias0 
    where
        generatedAlias0.email=:param0 */ select
            user0_.id as id1_4_,
            user0_.name as name2_4_,
            user0_.email as email3_4_,
            user0_.enabled as enabled4_4_,
            user0_.password as password5_4_,
            user0_.registered as register6_4_ 
        from
            users user0_ 
        where
            user0_.email=?
Hibernate: 
    select
        roles0_.user_id as user_id1_3_0_,
        roles0_.role as role2_3_0_ 
    from
        user_roles roles0_ 
    where
        roles0_.user_id=?
21:20:44.354 INFO  r.n.v.web.restaurant.AbstractRestaurantController.get:30 - get restaurant 1
Hibernate: 
    select
        restaurant0_.id as id1_2_0_,
        restaurant0_.name as name2_2_0_ 
    from
        restaurants restaurant0_ 
    where
        restaurant0_.id=?
21:20:44.356 WARN  r.n.votingforrestaurants.web.ExceptionInfoHandler.logAndGetErrorInfo:80 - DATA_NOT_FOUND at request  http://localhost/rest/admin/restaurants/1: Not found entity with id=1
21:20:44.357 WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver.doResolveHandlerMethodException:410 - Failed to invoke @ExceptionHandler method: public ru.neustupov.votingforrestaurants.util.exception.ErrorInfo ru.neustupov.votingforrestaurants.web.ExceptionInfoHandler.handleError(javax.servlet.http.HttpServletRequest,ru.neustupov.votingforrestaurants.util.exception.NotFoundException)
org.springframework.context.NoSuchMessageException: No message found under code 'error.dataNotFound' for locale 'ru'.
	at org.springframework.context.support.AbstractMessageSource.getMessage(AbstractMessageSource.java:161)
	at ru.neustupov.votingforrestaurants.web.MessageUtil.getMessage(MessageUtil.java:23)
	at ru.neustupov.votingforrestaurants.web.MessageUtil.getMessage(MessageUtil.java:27)
	at ru.neustupov.votingforrestaurants.web.ExceptionInfoHandler.logAndGetErrorInfo(ExceptionInfoHandler.java:83)
	at ru.neustupov.votingforrestaurants.web.ExceptionInfoHandler.handleError(ExceptionInfoHandler.java:41)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:209)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:136)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:102)
	at org.springframework.web.servlet.mvc.method.annotation.ExceptionHandlerExceptionResolver.doResolveHandlerMethodException(ExceptionHandlerExceptionResolver.java:403)
	at org.springframework.web.servlet.handler.AbstractHandlerMethodExceptionResolver.doResolveException(AbstractHandlerMethodExceptionResolver.java:61)
	at org.springframework.web.servlet.handler.AbstractHandlerExceptionResolver.resolveException(AbstractHandlerExceptionResolver.java:140)
	at org.springframework.web.servlet.DispatcherServlet.processHandlerException(DispatcherServlet.java:1255)
	at org.springframework.test.web.servlet.TestDispatcherServlet.processHandlerException(TestDispatcherServlet.java:113)
	at org.springframework.web.servlet.DispatcherServlet.processDispatchResult(DispatcherServlet.java:1062)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1008)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:925)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:978)
	at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:870)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:634)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:855)
	at org.springframework.test.web.servlet.TestDispatcherServlet.service(TestDispatcherServlet.java:66)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:741)
	at org.springframework.mock.web.MockFilterChain$ServletFilterProxy.doFilter(MockFilterChain.java:166)
	at org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:133)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:320)
	at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:127)
	at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:91)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:119)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:111)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:170)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.authentication.www.BasicAuthenticationFilter.doFilterInternal(BasicAuthenticationFilter.java:215)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:64)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:56)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:105)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:215)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:178)
	at org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:133)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:200)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:133)
	at org.springframework.test.web.servlet.MockMvc.perform(MockMvc.java:166)
	at ru.neustupov.votingforrestaurants.web.restaurant.AdminRestaurantRestControllerTest.testGetNotFound(AdminRestaurantRestControllerTest.java:103)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:50)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:47)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.springframework.test.context.junit4.statements.RunBeforeTestExecutionCallbacks.evaluate(RunBeforeTestExecutionCallbacks.java:73)
	at org.springframework.test.context.junit4.statements.RunAfterTestExecutionCallbacks.evaluate(RunAfterTestExecutionCallbacks.java:83)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.springframework.test.context.junit4.statements.RunBeforeTestMethodCallbacks.evaluate(RunBeforeTestMethodCallbacks.java:75)
	at org.springframework.test.context.junit4.statements.RunAfterTestMethodCallbacks.evaluate(RunAfterTestMethodCallbacks.java:86)
	at org.springframework.test.context.junit4.statements.SpringRepeat.evaluate(SpringRepeat.java:84)
	at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:325)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:251)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:97)
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:290)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288)
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:58)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268)
	at org.springframework.test.context.junit4.statements.RunBeforeTestClassCallbacks.evaluate(RunBeforeTestClassCallbacks.java:61)
	at org.springframework.test.context.junit4.statements.RunAfterTestClassCallbacks.evaluate(RunAfterTestClassCallbacks.java:70)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:363)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.run(SpringJUnit4ClassRunner.java:190)
	at org.apache.maven.surefire.junit4.JUnit4Provider.execute(JUnit4Provider.java:369)
	at org.apache.maven.surefire.junit4.JUnit4Provider.executeWithRerun(JUnit4Provider.java:275)
	at org.apache.maven.surefire.junit4.JUnit4Provider.executeTestSet(JUnit4Provider.java:239)
	at org.apache.maven.surefire.junit4.JUnit4Provider.invoke(JUnit4Provider.java:160)
	at org.apache.maven.surefire.booter.ForkedBooter.invokeProviderInSameClassLoader(ForkedBooter.java:373)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:334)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:119)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:407)
Hibernate: 
    /* select
        generatedAlias0 
    from
        User as generatedAlias0 
    where
        generatedAlias0.email=:param0 */ select
            user0_.id as id1_4_,
            user0_.name as name2_4_,
            user0_.email as email3_4_,
            user0_.enabled as enabled4_4_,
            user0_.password as password5_4_,
            user0_.registered as register6_4_ 
        from
            users user0_ 
        where
            user0_.email=?
Hibernate: 
    select
        roles0_.user_id as user_id1_3_0_,
        roles0_.role as role2_3_0_ 
    from
        user_roles roles0_ 
    where
        roles0_.user_id=?
21:20:44.429 WARN  r.n.votingforrestaurants.web.ExceptionInfoHandler.logAndGetErrorInfo:80 - VALIDATION_ERROR at request  http://localhost/rest/admin/restaurants/100002: org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument at index 0 in method: public void ru.neustupov.votingforrestaurants.web.restaurant.AdminRestaurantRestController.update(ru.neustupov.votingforrestaurants.model.Restaurant,int), with 1 error(s): [Field error in object 'restaurant' on field 'name': rejected value [<script>alert(123)</script>]; codes [SafeHtml.restaurant.name,SafeHtml.name,SafeHtml.java.lang.String,SafeHtml]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [restaurant.name,name]; arguments []; default message [name],[Ljava.lang.String;@340fc1aa,[Lorg.hibernate.validator.constraints.SafeHtml$Tag;@34a33343,org.springframework.validation.beanvalidation.SpringValidatorAdapter$ResolvableAttribute@98722ef,RELAXED]; default message [может содержать небезопасный html контент]] 
21:20:44.430 WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver.doResolveHandlerMethodException:410 - Failed to invoke @ExceptionHandler method: public ru.neustupov.votingforrestaurants.util.exception.ErrorInfo ru.neustupov.votingforrestaurants.web.ExceptionInfoHandler.bindValidationError(javax.servlet.http.HttpServletRequest,java.lang.Exception)
org.springframework.context.NoSuchMessageException: No message found under code 'error.validationError' for locale 'ru'.
	at org.springframework.context.support.AbstractMessageSource.getMessage(AbstractMessageSource.java:161)
	at ru.neustupov.votingforrestaurants.web.MessageUtil.getMessage(MessageUtil.java:23)
	at ru.neustupov.votingforrestaurants.web.MessageUtil.getMessage(MessageUtil.java:27)
	at ru.neustupov.votingforrestaurants.web.ExceptionInfoHandler.logAndGetErrorInfo(ExceptionInfoHandler.java:83)
	at ru.neustupov.votingforrestaurants.web.ExceptionInfoHandler.bindValidationError(ExceptionInfoHandler.java:60)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:209)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:136)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:102)
	at org.springframework.web.servlet.mvc.method.annotation.ExceptionHandlerExceptionResolver.doResolveHandlerMethodException(ExceptionHandlerExceptionResolver.java:403)
	at org.springframework.web.servlet.handler.AbstractHandlerMethodExceptionResolver.doResolveException(AbstractHandlerMethodExceptionResolver.java:61)
	at org.springframework.web.servlet.handler.AbstractHandlerExceptionResolver.resolveException(AbstractHandlerExceptionResolver.java:140)
	at org.springframework.web.servlet.DispatcherServlet.processHandlerException(DispatcherServlet.java:1255)
	at org.springframework.test.web.servlet.TestDispatcherServlet.processHandlerException(TestDispatcherServlet.java:113)
	at org.springframework.web.servlet.DispatcherServlet.processDispatchResult(DispatcherServlet.java:1062)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1008)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:925)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:978)
	at org.springframework.web.servlet.FrameworkServlet.doPut(FrameworkServlet.java:892)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:663)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:855)
	at org.springframework.test.web.servlet.TestDispatcherServlet.service(TestDispatcherServlet.java:66)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:741)
	at org.springframework.mock.web.MockFilterChain$ServletFilterProxy.doFilter(MockFilterChain.java:166)
	at org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:133)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:320)
	at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:127)
	at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:91)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:119)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:111)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:170)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.authentication.www.BasicAuthenticationFilter.doFilterInternal(BasicAuthenticationFilter.java:215)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:64)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:56)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:105)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:215)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:178)
	at org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:133)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:200)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:133)
	at org.springframework.test.web.servlet.MockMvc.perform(MockMvc.java:166)
	at ru.neustupov.votingforrestaurants.web.restaurant.AdminRestaurantRestControllerTest.testUpdateHtmlUnsafe(AdminRestaurantRestControllerTest.java:146)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:50)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:47)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.springframework.test.context.junit4.statements.RunBeforeTestExecutionCallbacks.evaluate(RunBeforeTestExecutionCallbacks.java:73)
	at org.springframework.test.context.junit4.statements.RunAfterTestExecutionCallbacks.evaluate(RunAfterTestExecutionCallbacks.java:83)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.springframework.test.context.junit4.statements.RunBeforeTestMethodCallbacks.evaluate(RunBeforeTestMethodCallbacks.java:75)
	at org.springframework.test.context.junit4.statements.RunAfterTestMethodCallbacks.evaluate(RunAfterTestMethodCallbacks.java:86)
	at org.springframework.test.context.junit4.statements.SpringRepeat.evaluate(SpringRepeat.java:84)
	at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:325)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:251)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:97)
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:290)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288)
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:58)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268)
	at org.springframework.test.context.junit4.statements.RunBeforeTestClassCallbacks.evaluate(RunBeforeTestClassCallbacks.java:61)
	at org.springframework.test.context.junit4.statements.RunAfterTestClassCallbacks.evaluate(RunAfterTestClassCallbacks.java:70)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:363)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.run(SpringJUnit4ClassRunner.java:190)
	at org.apache.maven.surefire.junit4.JUnit4Provider.execute(JUnit4Provider.java:369)
	at org.apache.maven.surefire.junit4.JUnit4Provider.executeWithRerun(JUnit4Provider.java:275)
	at org.apache.maven.surefire.junit4.JUnit4Provider.executeTestSet(JUnit4Provider.java:239)
	at org.apache.maven.surefire.junit4.JUnit4Provider.invoke(JUnit4Provider.java:160)
	at org.apache.maven.surefire.booter.ForkedBooter.invokeProviderInSameClassLoader(ForkedBooter.java:373)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:334)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:119)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:407)

MockHttpServletRequest:
      HTTP Method = PUT
      Request URI = /rest/admin/restaurants/100002
       Parameters = {}
          Headers = {Content-Type=[application/json;charset=UTF-8], Authorization=[Basic YWRtaW5AeWFuZGV4LnJ1OmFkbWlu]}
             Body = {"id":100002,"name":"<script>alert(123)</script>"}
    Session Attrs = {}

Handler:
             Type = ru.neustupov.votingforrestaurants.web.restaurant.AdminRestaurantRestController
           Method = public void ru.neustupov.votingforrestaurants.web.restaurant.AdminRestaurantRestController.update(ru.neustupov.votingforrestaurants.model.Restaurant,int)

Async:
    Async started = false
     Async result = null

Resolved Exception:
             Type = org.springframework.web.bind.MethodArgumentNotValidException

ModelAndView:
        View name = null
             View = null
            Model = null

FlashMap:
       Attributes = null

MockHttpServletResponse:
           Status = 400
    Error message = null
          Headers = {Cache-Control=[no-cache, no-store, max-age=0, must-revalidate], Pragma=[no-cache], Expires=[0], X-XSS-Protection=[1; mode=block], X-Frame-Options=[DENY], X-Content-Type-Options=[nosniff]}
     Content type = null
             Body = 
    Forwarded URL = null
   Redirected URL = null
          Cookies = []
Hibernate: 
    /* select
        generatedAlias0 
    from
        User as generatedAlias0 
    where
        generatedAlias0.email=:param0 */ select
            user0_.id as id1_4_,
            user0_.name as name2_4_,
            user0_.email as email3_4_,
            user0_.enabled as enabled4_4_,
            user0_.password as password5_4_,
            user0_.registered as register6_4_ 
        from
            users user0_ 
        where
            user0_.email=?
Hibernate: 
    select
        roles0_.user_id as user_id1_3_0_,
        roles0_.role as role2_3_0_ 
    from
        user_roles roles0_ 
    where
        roles0_.user_id=?
21:20:44.452 INFO  r.n.v.web.restaurant.AbstractRestaurantController.create:46 - create restaurant Rostov
Hibernate: 
    call next value for global_seq
Hibernate: 
    /* insert ru.neustupov.votingforrestaurants.model.Restaurant
        */ insert 
        into
            restaurants
            (name, id) 
        values
            (?, ?)
Hibernate: 
    /* select
        generatedAlias0 
    from
        Restaurant as generatedAlias0 */ select
            restaurant0_.id as id1_2_,
            restaurant0_.name as name2_2_ 
        from
            restaurants restaurant0_
Hibernate: 
    /* select
        generatedAlias0 
    from
        User as generatedAlias0 
    where
        generatedAlias0.email=:param0 */ select
            user0_.id as id1_4_,
            user0_.name as name2_4_,
            user0_.email as email3_4_,
            user0_.enabled as enabled4_4_,
            user0_.password as password5_4_,
            user0_.registered as register6_4_ 
        from
            users user0_ 
        where
            user0_.email=?
Hibernate: 
    select
        roles0_.user_id as user_id1_3_0_,
        roles0_.role as role2_3_0_ 
    from
        user_roles roles0_ 
    where
        roles0_.user_id=?
21:20:44.582 INFO  r.n.v.web.restaurant.AbstractRestaurantController.delete:35 - delete restaurant 100002
Hibernate: 
    /* DELETE 
    FROM
        Restaurant r 
    WHERE
        r.id=:id */ delete 
        from
            restaurants 
        where
            id=?

MockHttpServletRequest:
      HTTP Method = DELETE
      Request URI = /rest/admin/restaurants/100002
       Parameters = {}
          Headers = {Authorization=[Basic YWRtaW5AeWFuZGV4LnJ1OmFkbWlu]}
             Body = null
    Session Attrs = {}

Handler:
             Type = ru.neustupov.votingforrestaurants.web.restaurant.AdminRestaurantRestController
           Method = public void ru.neustupov.votingforrestaurants.web.restaurant.AdminRestaurantRestController.delete(int)

Async:
    Async started = false
     Async result = null

Resolved Exception:
             Type = null

ModelAndView:
        View name = null
             View = null
            Model = null

FlashMap:
       Attributes = null

MockHttpServletResponse:
           Status = 204
    Error message = null
          Headers = {Cache-Control=[no-cache, no-store, max-age=0, must-revalidate], Pragma=[no-cache], Expires=[0], X-XSS-Protection=[1; mode=block], X-Frame-Options=[DENY], X-Content-Type-Options=[nosniff]}
     Content type = null
             Body = 
    Forwarded URL = null
   Redirected URL = null
          Cookies = []
Hibernate: 
    /* select
        generatedAlias0 
    from
        Restaurant as generatedAlias0 */ select
            restaurant0_.id as id1_2_,
            restaurant0_.name as name2_2_ 
        from
            restaurants restaurant0_
Hibernate: 
    /* select
        generatedAlias0 
    from
        User as generatedAlias0 
    where
        generatedAlias0.email=:param0 */ select
            user0_.id as id1_4_,
            user0_.name as name2_4_,
            user0_.email as email3_4_,
            user0_.enabled as enabled4_4_,
            user0_.password as password5_4_,
            user0_.registered as register6_4_ 
        from
            users user0_ 
        where
            user0_.email=?
Hibernate: 
    select
        roles0_.user_id as user_id1_3_0_,
        roles0_.role as role2_3_0_ 
    from
        user_roles roles0_ 
    where
        roles0_.user_id=?
21:20:44.609 INFO  r.n.v.web.restaurant.AbstractRestaurantController.getAll:40 - getAll restaurants {}
Hibernate: 
    /* select
        generatedAlias0 
    from
        Restaurant as generatedAlias0 */ select
            restaurant0_.id as id1_2_,
            restaurant0_.name as name2_2_ 
        from
            restaurants restaurant0_
Hibernate: 
    /* SELECT
        v 
    FROM
        Vote v 
    WHERE
        v.date=CURRENT_DATE  */ select
            vote0_.id as id1_5_,
            vote0_.date as date2_5_,
            vote0_.restaurant as restaura3_5_,
            vote0_.user_id as user_id4_5_ 
        from
            votes vote0_ 
        where
            vote0_.date=CURRENT_DATE
[{"id":100002,"name":"Russia","numberOfVotes":0},{"id":100003,"name":"Ukraine","numberOfVotes":0},{"id":100004,"name":"U Kolyana","numberOfVotes":0},{"id":100005,"name":"Almaz","numberOfVotes":0},{"id":100006,"name":"Fart","numberOfVotes":0}]
Hibernate: 
    /* select
        generatedAlias0 
    from
        User as generatedAlias0 
    where
        generatedAlias0.email=:param0 */ select
            user0_.id as id1_4_,
            user0_.name as name2_4_,
            user0_.email as email3_4_,
            user0_.enabled as enabled4_4_,
            user0_.password as password5_4_,
            user0_.registered as register6_4_ 
        from
            users user0_ 
        where
            user0_.email=?
Hibernate: 
    select
        roles0_.user_id as user_id1_3_0_,
        roles0_.role as role2_3_0_ 
    from
        user_roles roles0_ 
    where
        roles0_.user_id=?
21:20:44.655 INFO  r.n.v.web.restaurant.AbstractRestaurantController.update:52 - update restaurant 100002
Hibernate: 
    /* load ru.neustupov.votingforrestaurants.model.Restaurant */ select
        restaurant0_.id as id1_2_0_,
        restaurant0_.name as name2_2_0_ 
    from
        restaurants restaurant0_ 
    where
        restaurant0_.id=?
Hibernate: 
    /* select
        generatedAlias0 
    from
        User as generatedAlias0 
    where
        generatedAlias0.email=:param0 */ select
            user0_.id as id1_4_,
            user0_.name as name2_4_,
            user0_.email as email3_4_,
            user0_.enabled as enabled4_4_,
            user0_.password as password5_4_,
            user0_.registered as register6_4_ 
        from
            users user0_ 
        where
            user0_.email=?
Hibernate: 
    select
        roles0_.user_id as user_id1_3_0_,
        roles0_.role as role2_3_0_ 
    from
        user_roles roles0_ 
    where
        roles0_.user_id=?
21:20:44.679 WARN  r.n.votingforrestaurants.web.ExceptionInfoHandler.logAndGetErrorInfo:80 - VALIDATION_ERROR at request  http://localhost/rest/admin/restaurants/: org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument at index 0 in method: public org.springframework.http.ResponseEntity<ru.neustupov.votingforrestaurants.model.Restaurant> ru.neustupov.votingforrestaurants.web.restaurant.AdminRestaurantRestController.createWithLocation(ru.neustupov.votingforrestaurants.model.Restaurant), with 1 error(s): [Field error in object 'restaurant' on field 'name': rejected value [null]; codes [NotBlank.restaurant.name,NotBlank.name,NotBlank.java.lang.String,NotBlank]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [restaurant.name,name]; arguments []; default message [name]]; default message [не может быть пусто]] 
21:20:44.680 WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver.doResolveHandlerMethodException:410 - Failed to invoke @ExceptionHandler method: public ru.neustupov.votingforrestaurants.util.exception.ErrorInfo ru.neustupov.votingforrestaurants.web.ExceptionInfoHandler.bindValidationError(javax.servlet.http.HttpServletRequest,java.lang.Exception)
org.springframework.context.NoSuchMessageException: No message found under code 'error.validationError' for locale 'ru'.
	at org.springframework.context.support.AbstractMessageSource.getMessage(AbstractMessageSource.java:161)
	at ru.neustupov.votingforrestaurants.web.MessageUtil.getMessage(MessageUtil.java:23)
	at ru.neustupov.votingforrestaurants.web.MessageUtil.getMessage(MessageUtil.java:27)
	at ru.neustupov.votingforrestaurants.web.ExceptionInfoHandler.logAndGetErrorInfo(ExceptionInfoHandler.java:83)
	at ru.neustupov.votingforrestaurants.web.ExceptionInfoHandler.bindValidationError(ExceptionInfoHandler.java:60)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:209)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:136)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:102)
	at org.springframework.web.servlet.mvc.method.annotation.ExceptionHandlerExceptionResolver.doResolveHandlerMethodException(ExceptionHandlerExceptionResolver.java:403)
	at org.springframework.web.servlet.handler.AbstractHandlerMethodExceptionResolver.doResolveException(AbstractHandlerMethodExceptionResolver.java:61)
	at org.springframework.web.servlet.handler.AbstractHandlerExceptionResolver.resolveException(AbstractHandlerExceptionResolver.java:140)
	at org.springframework.web.servlet.DispatcherServlet.processHandlerException(DispatcherServlet.java:1255)
	at org.springframework.test.web.servlet.TestDispatcherServlet.processHandlerException(TestDispatcherServlet.java:113)
	at org.springframework.web.servlet.DispatcherServlet.processDispatchResult(DispatcherServlet.java:1062)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1008)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:925)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:978)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:881)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:660)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:855)
	at org.springframework.test.web.servlet.TestDispatcherServlet.service(TestDispatcherServlet.java:66)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:741)
	at org.springframework.mock.web.MockFilterChain$ServletFilterProxy.doFilter(MockFilterChain.java:166)
	at org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:133)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:320)
	at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:127)
	at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:91)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:119)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:111)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:170)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.authentication.www.BasicAuthenticationFilter.doFilterInternal(BasicAuthenticationFilter.java:215)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:64)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:56)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:105)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:215)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:178)
	at org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:133)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:200)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:133)
	at org.springframework.test.web.servlet.MockMvc.perform(MockMvc.java:166)
	at ru.neustupov.votingforrestaurants.web.restaurant.AdminRestaurantRestControllerTest.testCreateInvalid(AdminRestaurantRestControllerTest.java:120)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:50)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:47)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.springframework.test.context.junit4.statements.RunBeforeTestExecutionCallbacks.evaluate(RunBeforeTestExecutionCallbacks.java:73)
	at org.springframework.test.context.junit4.statements.RunAfterTestExecutionCallbacks.evaluate(RunAfterTestExecutionCallbacks.java:83)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.springframework.test.context.junit4.statements.RunBeforeTestMethodCallbacks.evaluate(RunBeforeTestMethodCallbacks.java:75)
	at org.springframework.test.context.junit4.statements.RunAfterTestMethodCallbacks.evaluate(RunAfterTestMethodCallbacks.java:86)
	at org.springframework.test.context.junit4.statements.SpringRepeat.evaluate(SpringRepeat.java:84)
	at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:325)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:251)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:97)
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:290)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288)
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:58)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268)
	at org.springframework.test.context.junit4.statements.RunBeforeTestClassCallbacks.evaluate(RunBeforeTestClassCallbacks.java:61)
	at org.springframework.test.context.junit4.statements.RunAfterTestClassCallbacks.evaluate(RunAfterTestClassCallbacks.java:70)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:363)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.run(SpringJUnit4ClassRunner.java:190)
	at org.apache.maven.surefire.junit4.JUnit4Provider.execute(JUnit4Provider.java:369)
	at org.apache.maven.surefire.junit4.JUnit4Provider.executeWithRerun(JUnit4Provider.java:275)
	at org.apache.maven.surefire.junit4.JUnit4Provider.executeTestSet(JUnit4Provider.java:239)
	at org.apache.maven.surefire.junit4.JUnit4Provider.invoke(JUnit4Provider.java:160)
	at org.apache.maven.surefire.booter.ForkedBooter.invokeProviderInSameClassLoader(ForkedBooter.java:373)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:334)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:119)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:407)

MockHttpServletRequest:
      HTTP Method = POST
      Request URI = /rest/admin/restaurants/
       Parameters = {}
          Headers = {Content-Type=[application/json;charset=UTF-8], Authorization=[Basic YWRtaW5AeWFuZGV4LnJ1OmFkbWlu]}
             Body = {}
    Session Attrs = {}

Handler:
             Type = ru.neustupov.votingforrestaurants.web.restaurant.AdminRestaurantRestController
           Method = public org.springframework.http.ResponseEntity<ru.neustupov.votingforrestaurants.model.Restaurant> ru.neustupov.votingforrestaurants.web.restaurant.AdminRestaurantRestController.createWithLocation(ru.neustupov.votingforrestaurants.model.Restaurant)

Async:
    Async started = false
     Async result = null

Resolved Exception:
             Type = org.springframework.web.bind.MethodArgumentNotValidException

ModelAndView:
        View name = null
             View = null
            Model = null

FlashMap:
       Attributes = null

MockHttpServletResponse:
           Status = 400
    Error message = null
          Headers = {Cache-Control=[no-cache, no-store, max-age=0, must-revalidate], Pragma=[no-cache], Expires=[0], X-XSS-Protection=[1; mode=block], X-Frame-Options=[DENY], X-Content-Type-Options=[nosniff]}
     Content type = null
             Body = 
    Forwarded URL = null
   Redirected URL = null
          Cookies = []
[ERROR] Tests run: 12, Failures: 3, Errors: 2, Skipped: 0, Time elapsed: 9.477 s <<< FAILURE! - in ru.neustupov.votingforrestaurants.web.restaurant.AdminRestaurantRestControllerTest
[ERROR] testUpdateInvalid(ru.neustupov.votingforrestaurants.web.restaurant.AdminRestaurantRestControllerTest)  Time elapsed: 0.545 s  <<< FAILURE!
java.lang.AssertionError: Status expected:<422> but was:<400>
	at ru.neustupov.votingforrestaurants.web.restaurant.AdminRestaurantRestControllerTest.testUpdateInvalid(AdminRestaurantRestControllerTest.java:138)

[ERROR] testDeleteNotFound(ru.neustupov.votingforrestaurants.web.restaurant.AdminRestaurantRestControllerTest)  Time elapsed: 0.037 s  <<< ERROR!
org.springframework.web.util.NestedServletException: Request processing failed; nested exception is Not found entity with id=1
	at ru.neustupov.votingforrestaurants.web.restaurant.AdminRestaurantRestControllerTest.testDeleteNotFound(AdminRestaurantRestControllerTest.java:111)
Caused by: ru.neustupov.votingforrestaurants.util.exception.NotFoundException: Not found entity with id=1
	at ru.neustupov.votingforrestaurants.web.restaurant.AdminRestaurantRestControllerTest.testDeleteNotFound(AdminRestaurantRestControllerTest.java:111)

[ERROR] testGetNotFound(ru.neustupov.votingforrestaurants.web.restaurant.AdminRestaurantRestControllerTest)  Time elapsed: 0.012 s  <<< ERROR!
org.springframework.web.util.NestedServletException: Request processing failed; nested exception is Not found entity with id=1
	at ru.neustupov.votingforrestaurants.web.restaurant.AdminRestaurantRestControllerTest.testGetNotFound(AdminRestaurantRestControllerTest.java:103)
Caused by: ru.neustupov.votingforrestaurants.util.exception.NotFoundException: Not found entity with id=1
	at ru.neustupov.votingforrestaurants.web.restaurant.AdminRestaurantRestControllerTest.testGetNotFound(AdminRestaurantRestControllerTest.java:103)

[ERROR] testUpdateHtmlUnsafe(ru.neustupov.votingforrestaurants.web.restaurant.AdminRestaurantRestControllerTest)  Time elapsed: 0.073 s  <<< FAILURE!
java.lang.AssertionError: Status expected:<422> but was:<400>
	at ru.neustupov.votingforrestaurants.web.restaurant.AdminRestaurantRestControllerTest.testUpdateHtmlUnsafe(AdminRestaurantRestControllerTest.java:151)

[ERROR] testCreateInvalid(ru.neustupov.votingforrestaurants.web.restaurant.AdminRestaurantRestControllerTest)  Time elapsed: 0.019 s  <<< FAILURE!
java.lang.AssertionError: Status expected:<422> but was:<400>
	at ru.neustupov.votingforrestaurants.web.restaurant.AdminRestaurantRestControllerTest.testCreateInvalid(AdminRestaurantRestControllerTest.java:125)

[INFO] Running ru.neustupov.votingforrestaurants.web.MenuControllerTest

MockHttpServletRequest:
      HTTP Method = GET
      Request URI = /menus
       Parameters = {restId=[100002]}
          Headers = {Authorization=[Basic YWRtaW5AeWFuZGV4LnJ1OmFkbWlu]}
             Body = null
    Session Attrs = {SPRING_SECURITY_SAVED_REQUEST=DefaultSavedRequest[http://localhost/menus]}

Handler:
             Type = null

Async:
    Async started = false
     Async result = null

Resolved Exception:
             Type = null

ModelAndView:
        View name = null
             View = null
            Model = null

FlashMap:
       Attributes = null

MockHttpServletResponse:
           Status = 302
    Error message = null
          Headers = {Cache-Control=[no-cache, no-store, max-age=0, must-revalidate], Pragma=[no-cache], Expires=[0], X-XSS-Protection=[1; mode=block], X-Frame-Options=[DENY], X-Content-Type-Options=[nosniff], Location=[http://localhost/login]}
     Content type = null
             Body = 
    Forwarded URL = null
   Redirected URL = http://localhost/login
          Cookies = []

MockHttpServletRequest:
      HTTP Method = GET
      Request URI = /getTodaysMenuWithMeals
       Parameters = {restId=[100002]}
          Headers = {Authorization=[Basic YWRtaW5AeWFuZGV4LnJ1OmFkbWlu]}
             Body = null
    Session Attrs = {SPRING_SECURITY_SAVED_REQUEST=DefaultSavedRequest[http://localhost/getTodaysMenuWithMeals]}

Handler:
             Type = null

Async:
    Async started = false
     Async result = null

Resolved Exception:
             Type = null

ModelAndView:
        View name = null
             View = null
            Model = null

FlashMap:
       Attributes = null

MockHttpServletResponse:
           Status = 302
    Error message = null
          Headers = {Cache-Control=[no-cache, no-store, max-age=0, must-revalidate], Pragma=[no-cache], Expires=[0], X-XSS-Protection=[1; mode=block], X-Frame-Options=[DENY], X-Content-Type-Options=[nosniff], Location=[http://localhost/login]}
     Content type = null
             Body = 
    Forwarded URL = null
   Redirected URL = http://localhost/login
          Cookies = []

MockHttpServletRequest:
      HTTP Method = GET
      Request URI = /ajax/admin/menus
       Parameters = {restId=[100002]}
          Headers = {Authorization=[Basic YWRtaW5AeWFuZGV4LnJ1OmFkbWlu]}
             Body = null
    Session Attrs = {SPRING_SECURITY_SAVED_REQUEST=DefaultSavedRequest[http://localhost/ajax/admin/menus]}

Handler:
             Type = null

Async:
    Async started = false
     Async result = null

Resolved Exception:
             Type = null

ModelAndView:
        View name = null
             View = null
            Model = null

FlashMap:
       Attributes = null

MockHttpServletResponse:
           Status = 302
    Error message = null
          Headers = {Cache-Control=[no-cache, no-store, max-age=0, must-revalidate], Pragma=[no-cache], Expires=[0], X-XSS-Protection=[1; mode=block], X-Frame-Options=[DENY], X-Content-Type-Options=[nosniff], Location=[http://localhost/login]}
     Content type = null
             Body = 
    Forwarded URL = null
   Redirected URL = http://localhost/login
          Cookies = []
[WARNING] Tests run: 4, Failures: 0, Errors: 0, Skipped: 1, Time elapsed: 0.014 s - in ru.neustupov.votingforrestaurants.web.MenuControllerTest
[INFO] Running ru.neustupov.votingforrestaurants.web.InMemoryAdminRestControllerSpringTest
21:20:45.190 INFO  r.n.v.web.user.AbstractUserController.delete:41 - delete 10
21:20:45.191 INFO  r.n.v.web.user.AbstractUserController.delete:41 - delete 100000
21:20:45.191 INFO  r.n.v.web.user.AbstractUserController.getAll:25 - getAll
[INFO] Tests run: 2, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.422 s - in ru.neustupov.votingforrestaurants.web.InMemoryAdminRestControllerSpringTest
[INFO] Running ru.neustupov.votingforrestaurants.web.user.AdminRestControllerTest
Hibernate: 
    /* select
        generatedAlias0 
    from
        User as generatedAlias0 
    where
        generatedAlias0.email=:param0 */ select
            user0_.id as id1_4_,
            user0_.name as name2_4_,
            user0_.email as email3_4_,
            user0_.enabled as enabled4_4_,
            user0_.password as password5_4_,
            user0_.registered as register6_4_ 
        from
            users user0_ 
        where
            user0_.email=?
Hibernate: 
    select
        roles0_.user_id as user_id1_3_0_,
        roles0_.role as role2_3_0_ 
    from
        user_roles roles0_ 
    where
        roles0_.user_id=?
21:20:45.270 WARN  r.n.votingforrestaurants.web.ExceptionInfoHandler.logAndGetErrorInfo:80 - VALIDATION_ERROR at request  http://localhost/rest/admin/users/100000: org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument at index 0 in method: public void ru.neustupov.votingforrestaurants.web.user.AdminRestController.update(ru.neustupov.votingforrestaurants.model.User,int), with 3 error(s): [Field error in object 'user' on field 'name': rejected value []; codes [NotBlank.user.name,NotBlank.name,NotBlank.java.lang.String,NotBlank]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [user.name,name]; arguments []; default message [name]]; default message [не может быть пусто]] [Field error in object 'user' on field 'password': rejected value [null]; codes [NotBlank.user.password,NotBlank.password,NotBlank.java.lang.String,NotBlank]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [user.password,password]; arguments []; default message [password]]; default message [не может быть пусто]] [Field error in object 'user' on field 'name': rejected value []; codes [Size.user.name,Size.name,Size.java.lang.String,Size]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [user.name,name]; arguments []; default message [name],100,2]; default message [размер должен быть между 2 и 100]] 
21:20:45.270 WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver.doResolveHandlerMethodException:410 - Failed to invoke @ExceptionHandler method: public ru.neustupov.votingforrestaurants.util.exception.ErrorInfo ru.neustupov.votingforrestaurants.web.ExceptionInfoHandler.bindValidationError(javax.servlet.http.HttpServletRequest,java.lang.Exception)
org.springframework.context.NoSuchMessageException: No message found under code 'error.validationError' for locale 'ru'.
	at org.springframework.context.support.AbstractMessageSource.getMessage(AbstractMessageSource.java:161)
	at ru.neustupov.votingforrestaurants.web.MessageUtil.getMessage(MessageUtil.java:23)
	at ru.neustupov.votingforrestaurants.web.MessageUtil.getMessage(MessageUtil.java:27)
	at ru.neustupov.votingforrestaurants.web.ExceptionInfoHandler.logAndGetErrorInfo(ExceptionInfoHandler.java:83)
	at ru.neustupov.votingforrestaurants.web.ExceptionInfoHandler.bindValidationError(ExceptionInfoHandler.java:60)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:209)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:136)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:102)
	at org.springframework.web.servlet.mvc.method.annotation.ExceptionHandlerExceptionResolver.doResolveHandlerMethodException(ExceptionHandlerExceptionResolver.java:403)
	at org.springframework.web.servlet.handler.AbstractHandlerMethodExceptionResolver.doResolveException(AbstractHandlerMethodExceptionResolver.java:61)
	at org.springframework.web.servlet.handler.AbstractHandlerExceptionResolver.resolveException(AbstractHandlerExceptionResolver.java:140)
	at org.springframework.web.servlet.DispatcherServlet.processHandlerException(DispatcherServlet.java:1255)
	at org.springframework.test.web.servlet.TestDispatcherServlet.processHandlerException(TestDispatcherServlet.java:113)
	at org.springframework.web.servlet.DispatcherServlet.processDispatchResult(DispatcherServlet.java:1062)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1008)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:925)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:978)
	at org.springframework.web.servlet.FrameworkServlet.doPut(FrameworkServlet.java:892)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:663)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:855)
	at org.springframework.test.web.servlet.TestDispatcherServlet.service(TestDispatcherServlet.java:66)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:741)
	at org.springframework.mock.web.MockFilterChain$ServletFilterProxy.doFilter(MockFilterChain.java:166)
	at org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:133)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:320)
	at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:127)
	at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:91)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:119)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:111)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:170)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.authentication.www.BasicAuthenticationFilter.doFilterInternal(BasicAuthenticationFilter.java:215)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:64)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:56)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:105)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:215)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:178)
	at org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:133)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:200)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:133)
	at org.springframework.test.web.servlet.MockMvc.perform(MockMvc.java:166)
	at ru.neustupov.votingforrestaurants.web.user.AdminRestControllerTest.testUpdateInvalid(AdminRestControllerTest.java:145)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:50)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:47)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.springframework.test.context.junit4.statements.RunBeforeTestExecutionCallbacks.evaluate(RunBeforeTestExecutionCallbacks.java:73)
	at org.springframework.test.context.junit4.statements.RunAfterTestExecutionCallbacks.evaluate(RunAfterTestExecutionCallbacks.java:83)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.springframework.test.context.junit4.statements.RunBeforeTestMethodCallbacks.evaluate(RunBeforeTestMethodCallbacks.java:75)
	at org.springframework.test.context.junit4.statements.RunAfterTestMethodCallbacks.evaluate(RunAfterTestMethodCallbacks.java:86)
	at org.springframework.test.context.junit4.statements.SpringRepeat.evaluate(SpringRepeat.java:84)
	at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:325)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:251)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:97)
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:290)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288)
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:58)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268)
	at org.springframework.test.context.junit4.statements.RunBeforeTestClassCallbacks.evaluate(RunBeforeTestClassCallbacks.java:61)
	at org.springframework.test.context.junit4.statements.RunAfterTestClassCallbacks.evaluate(RunAfterTestClassCallbacks.java:70)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:363)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.run(SpringJUnit4ClassRunner.java:190)
	at org.apache.maven.surefire.junit4.JUnit4Provider.execute(JUnit4Provider.java:369)
	at org.apache.maven.surefire.junit4.JUnit4Provider.executeWithRerun(JUnit4Provider.java:275)
	at org.apache.maven.surefire.junit4.JUnit4Provider.executeTestSet(JUnit4Provider.java:239)
	at org.apache.maven.surefire.junit4.JUnit4Provider.invoke(JUnit4Provider.java:160)
	at org.apache.maven.surefire.booter.ForkedBooter.invokeProviderInSameClassLoader(ForkedBooter.java:373)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:334)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:119)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:407)
Hibernate: 
    /* select
        generatedAlias0 
    from
        User as generatedAlias0 
    where
        generatedAlias0.email=:param0 */ select
            user0_.id as id1_4_,
            user0_.name as name2_4_,
            user0_.email as email3_4_,
            user0_.enabled as enabled4_4_,
            user0_.password as password5_4_,
            user0_.registered as register6_4_ 
        from
            users user0_ 
        where
            user0_.email=?
Hibernate: 
    select
        roles0_.user_id as user_id1_3_0_,
        roles0_.role as role2_3_0_ 
    from
        user_roles roles0_ 
    where
        roles0_.user_id=?
Hibernate: 
    /* select
        generatedAlias0 
    from
        User as generatedAlias0 
    where
        generatedAlias0.email=:param0 */ select
            user0_.id as id1_4_,
            user0_.name as name2_4_,
            user0_.email as email3_4_,
            user0_.enabled as enabled4_4_,
            user0_.password as password5_4_,
            user0_.registered as register6_4_ 
        from
            users user0_ 
        where
            user0_.email=?
Hibernate: 
    select
        roles0_.user_id as user_id1_3_0_,
        roles0_.role as role2_3_0_ 
    from
        user_roles roles0_ 
    where
        roles0_.user_id=?
21:20:45.289 INFO  r.n.v.web.user.AbstractUserController.delete:41 - delete 1
Hibernate: 
    /* DELETE 
    FROM
        User u 
    WHERE
        u.id=:id */ delete 
        from
            users 
        where
            id=?
21:20:45.292 WARN  r.n.votingforrestaurants.web.ExceptionInfoHandler.logAndGetErrorInfo:80 - DATA_NOT_FOUND at request  http://localhost/rest/admin/users/1: Not found entity with id=1
21:20:45.293 WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver.doResolveHandlerMethodException:410 - Failed to invoke @ExceptionHandler method: public ru.neustupov.votingforrestaurants.util.exception.ErrorInfo ru.neustupov.votingforrestaurants.web.ExceptionInfoHandler.handleError(javax.servlet.http.HttpServletRequest,ru.neustupov.votingforrestaurants.util.exception.NotFoundException)
org.springframework.context.NoSuchMessageException: No message found under code 'error.dataNotFound' for locale 'ru'.
	at org.springframework.context.support.AbstractMessageSource.getMessage(AbstractMessageSource.java:161)
	at ru.neustupov.votingforrestaurants.web.MessageUtil.getMessage(MessageUtil.java:23)
	at ru.neustupov.votingforrestaurants.web.MessageUtil.getMessage(MessageUtil.java:27)
	at ru.neustupov.votingforrestaurants.web.ExceptionInfoHandler.logAndGetErrorInfo(ExceptionInfoHandler.java:83)
	at ru.neustupov.votingforrestaurants.web.ExceptionInfoHandler.handleError(ExceptionInfoHandler.java:41)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:209)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:136)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:102)
	at org.springframework.web.servlet.mvc.method.annotation.ExceptionHandlerExceptionResolver.doResolveHandlerMethodException(ExceptionHandlerExceptionResolver.java:403)
	at org.springframework.web.servlet.handler.AbstractHandlerMethodExceptionResolver.doResolveException(AbstractHandlerMethodExceptionResolver.java:61)
	at org.springframework.web.servlet.handler.AbstractHandlerExceptionResolver.resolveException(AbstractHandlerExceptionResolver.java:140)
	at org.springframework.web.servlet.DispatcherServlet.processHandlerException(DispatcherServlet.java:1255)
	at org.springframework.test.web.servlet.TestDispatcherServlet.processHandlerException(TestDispatcherServlet.java:113)
	at org.springframework.web.servlet.DispatcherServlet.processDispatchResult(DispatcherServlet.java:1062)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1008)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:925)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:978)
	at org.springframework.web.servlet.FrameworkServlet.doDelete(FrameworkServlet.java:903)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:666)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:855)
	at org.springframework.test.web.servlet.TestDispatcherServlet.service(TestDispatcherServlet.java:66)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:741)
	at org.springframework.mock.web.MockFilterChain$ServletFilterProxy.doFilter(MockFilterChain.java:166)
	at org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:133)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:320)
	at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:127)
	at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:91)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:119)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:111)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:170)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.authentication.www.BasicAuthenticationFilter.doFilterInternal(BasicAuthenticationFilter.java:215)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:64)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:56)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:105)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:215)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:178)
	at org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:133)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:200)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:133)
	at org.springframework.test.web.servlet.MockMvc.perform(MockMvc.java:166)
	at ru.neustupov.votingforrestaurants.web.user.AdminRestControllerTest.testDeleteNotFound(AdminRestControllerTest.java:123)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:50)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:47)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.springframework.test.context.junit4.statements.RunBeforeTestExecutionCallbacks.evaluate(RunBeforeTestExecutionCallbacks.java:73)
	at org.springframework.test.context.junit4.statements.RunAfterTestExecutionCallbacks.evaluate(RunAfterTestExecutionCallbacks.java:83)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.springframework.test.context.junit4.statements.RunBeforeTestMethodCallbacks.evaluate(RunBeforeTestMethodCallbacks.java:75)
	at org.springframework.test.context.junit4.statements.RunAfterTestMethodCallbacks.evaluate(RunAfterTestMethodCallbacks.java:86)
	at org.springframework.test.context.junit4.statements.SpringRepeat.evaluate(SpringRepeat.java:84)
	at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:325)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:251)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:97)
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:290)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288)
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:58)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268)
	at org.springframework.test.context.junit4.statements.RunBeforeTestClassCallbacks.evaluate(RunBeforeTestClassCallbacks.java:61)
	at org.springframework.test.context.junit4.statements.RunAfterTestClassCallbacks.evaluate(RunAfterTestClassCallbacks.java:70)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:363)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.run(SpringJUnit4ClassRunner.java:190)
	at org.apache.maven.surefire.junit4.JUnit4Provider.execute(JUnit4Provider.java:369)
	at org.apache.maven.surefire.junit4.JUnit4Provider.executeWithRerun(JUnit4Provider.java:275)
	at org.apache.maven.surefire.junit4.JUnit4Provider.executeTestSet(JUnit4Provider.java:239)
	at org.apache.maven.surefire.junit4.JUnit4Provider.invoke(JUnit4Provider.java:160)
	at org.apache.maven.surefire.booter.ForkedBooter.invokeProviderInSameClassLoader(ForkedBooter.java:373)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:334)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:119)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:407)
21:20:45.294 WARN  o.h.e.j.s.SqlExceptionHelper$StandardWarningHandler.logWarning:217 - SQL Warning Code: -1100, SQLState: 02000
21:20:45.294 WARN  o.h.e.j.s.SqlExceptionHelper$StandardWarningHandler.logWarning:218 - no data
Hibernate: 
    /* select
        generatedAlias0 
    from
        User as generatedAlias0 
    where
        generatedAlias0.email=:param0 */ select
            user0_.id as id1_4_,
            user0_.name as name2_4_,
            user0_.email as email3_4_,
            user0_.enabled as enabled4_4_,
            user0_.password as password5_4_,
            user0_.registered as register6_4_ 
        from
            users user0_ 
        where
            user0_.email=?
Hibernate: 
    select
        roles0_.user_id as user_id1_3_0_,
        roles0_.role as role2_3_0_ 
    from
        user_roles roles0_ 
    where
        roles0_.user_id=?
21:20:45.308 INFO  r.n.v.web.user.AbstractUserController.get:30 - get 100001

MockHttpServletRequest:
      HTTP Method = GET
      Request URI = /rest/admin/users/100001
       Parameters = {}
          Headers = {Authorization=[Basic YWRtaW5AeWFuZGV4LnJ1OmFkbWlu]}
             Body = null
    Session Attrs = {}

Handler:
             Type = ru.neustupov.votingforrestaurants.web.user.AdminRestController
           Method = public ru.neustupov.votingforrestaurants.model.User ru.neustupov.votingforrestaurants.web.user.AdminRestController.get(int)

Async:
    Async started = false
     Async result = null

Resolved Exception:
             Type = null

ModelAndView:
        View name = null
             View = null
            Model = null

FlashMap:
       Attributes = null

MockHttpServletResponse:
           Status = 200
    Error message = null
          Headers = {Cache-Control=[no-cache, no-store, max-age=0, must-revalidate], Pragma=[no-cache], Expires=[0], X-XSS-Protection=[1; mode=block], X-Frame-Options=[DENY], X-Content-Type-Options=[nosniff], Content-Type=[application/json;charset=UTF-8]}
     Content type = application/json;charset=UTF-8
             Body = {"id":100001,"name":"Admin","email":"admin@yandex.ru","registered":"2018-05-21T19:20:40.910+0000","enabled":true,"roles":["ROLE_ADMIN","ROLE_USER"],"votes":null}
    Forwarded URL = null
   Redirected URL = null
          Cookies = []
Hibernate: 
    /* select
        generatedAlias0 
    from
        User as generatedAlias0 
    where
        generatedAlias0.email=:param0 */ select
            user0_.id as id1_4_,
            user0_.name as name2_4_,
            user0_.email as email3_4_,
            user0_.enabled as enabled4_4_,
            user0_.password as password5_4_,
            user0_.registered as register6_4_ 
        from
            users user0_ 
        where
            user0_.email=?
Hibernate: 
    select
        roles0_.user_id as user_id1_3_0_,
        roles0_.role as role2_3_0_ 
    from
        user_roles roles0_ 
    where
        roles0_.user_id=?
21:20:45.327 INFO  r.n.v.web.user.AbstractUserController.get:30 - get 1
Hibernate: 
    select
        user0_.id as id1_4_0_,
        user0_.name as name2_4_0_,
        user0_.email as email3_4_0_,
        user0_.enabled as enabled4_4_0_,
        user0_.password as password5_4_0_,
        user0_.registered as register6_4_0_,
        roles1_.user_id as user_id1_3_1_,
        roles1_.role as role2_3_1_ 
    from
        users user0_ 
    left outer join
        user_roles roles1_ 
            on user0_.id=roles1_.user_id 
    where
        user0_.id=?
21:20:45.330 WARN  r.n.votingforrestaurants.web.ExceptionInfoHandler.logAndGetErrorInfo:80 - DATA_NOT_FOUND at request  http://localhost/rest/admin/users/1: Not found entity with id=1
21:20:45.330 WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver.doResolveHandlerMethodException:410 - Failed to invoke @ExceptionHandler method: public ru.neustupov.votingforrestaurants.util.exception.ErrorInfo ru.neustupov.votingforrestaurants.web.ExceptionInfoHandler.handleError(javax.servlet.http.HttpServletRequest,ru.neustupov.votingforrestaurants.util.exception.NotFoundException)
org.springframework.context.NoSuchMessageException: No message found under code 'error.dataNotFound' for locale 'ru'.
	at org.springframework.context.support.AbstractMessageSource.getMessage(AbstractMessageSource.java:161)
	at ru.neustupov.votingforrestaurants.web.MessageUtil.getMessage(MessageUtil.java:23)
	at ru.neustupov.votingforrestaurants.web.MessageUtil.getMessage(MessageUtil.java:27)
	at ru.neustupov.votingforrestaurants.web.ExceptionInfoHandler.logAndGetErrorInfo(ExceptionInfoHandler.java:83)
	at ru.neustupov.votingforrestaurants.web.ExceptionInfoHandler.handleError(ExceptionInfoHandler.java:41)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:209)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:136)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:102)
	at org.springframework.web.servlet.mvc.method.annotation.ExceptionHandlerExceptionResolver.doResolveHandlerMethodException(ExceptionHandlerExceptionResolver.java:403)
	at org.springframework.web.servlet.handler.AbstractHandlerMethodExceptionResolver.doResolveException(AbstractHandlerMethodExceptionResolver.java:61)
	at org.springframework.web.servlet.handler.AbstractHandlerExceptionResolver.resolveException(AbstractHandlerExceptionResolver.java:140)
	at org.springframework.web.servlet.DispatcherServlet.processHandlerException(DispatcherServlet.java:1255)
	at org.springframework.test.web.servlet.TestDispatcherServlet.processHandlerException(TestDispatcherServlet.java:113)
	at org.springframework.web.servlet.DispatcherServlet.processDispatchResult(DispatcherServlet.java:1062)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1008)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:925)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:978)
	at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:870)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:634)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:855)
	at org.springframework.test.web.servlet.TestDispatcherServlet.service(TestDispatcherServlet.java:66)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:741)
	at org.springframework.mock.web.MockFilterChain$ServletFilterProxy.doFilter(MockFilterChain.java:166)
	at org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:133)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:320)
	at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:127)
	at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:91)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:119)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:111)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:170)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.authentication.www.BasicAuthenticationFilter.doFilterInternal(BasicAuthenticationFilter.java:215)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:64)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:56)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:105)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:215)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:178)
	at org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:133)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:200)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:133)
	at org.springframework.test.web.servlet.MockMvc.perform(MockMvc.java:166)
	at ru.neustupov.votingforrestaurants.web.user.AdminRestControllerTest.testGetNotFound(AdminRestControllerTest.java:115)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:50)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:47)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.springframework.test.context.junit4.statements.RunBeforeTestExecutionCallbacks.evaluate(RunBeforeTestExecutionCallbacks.java:73)
	at org.springframework.test.context.junit4.statements.RunAfterTestExecutionCallbacks.evaluate(RunAfterTestExecutionCallbacks.java:83)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.springframework.test.context.junit4.statements.RunBeforeTestMethodCallbacks.evaluate(RunBeforeTestMethodCallbacks.java:75)
	at org.springframework.test.context.junit4.statements.RunAfterTestMethodCallbacks.evaluate(RunAfterTestMethodCallbacks.java:86)
	at org.springframework.test.context.junit4.statements.SpringRepeat.evaluate(SpringRepeat.java:84)
	at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:325)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:251)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:97)
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:290)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288)
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:58)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268)
	at org.springframework.test.context.junit4.statements.RunBeforeTestClassCallbacks.evaluate(RunBeforeTestClassCallbacks.java:61)
	at org.springframework.test.context.junit4.statements.RunAfterTestClassCallbacks.evaluate(RunAfterTestClassCallbacks.java:70)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:363)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.run(SpringJUnit4ClassRunner.java:190)
	at org.apache.maven.surefire.junit4.JUnit4Provider.execute(JUnit4Provider.java:369)
	at org.apache.maven.surefire.junit4.JUnit4Provider.executeWithRerun(JUnit4Provider.java:275)
	at org.apache.maven.surefire.junit4.JUnit4Provider.executeTestSet(JUnit4Provider.java:239)
	at org.apache.maven.surefire.junit4.JUnit4Provider.invoke(JUnit4Provider.java:160)
	at org.apache.maven.surefire.booter.ForkedBooter.invokeProviderInSameClassLoader(ForkedBooter.java:373)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:334)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:119)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:407)
Hibernate: 
    /* select
        generatedAlias0 
    from
        User as generatedAlias0 
    where
        generatedAlias0.email=:param0 */ select
            user0_.id as id1_4_,
            user0_.name as name2_4_,
            user0_.email as email3_4_,
            user0_.enabled as enabled4_4_,
            user0_.password as password5_4_,
            user0_.registered as register6_4_ 
        from
            users user0_ 
        where
            user0_.email=?
Hibernate: 
    select
        roles0_.user_id as user_id1_3_0_,
        roles0_.role as role2_3_0_ 
    from
        user_roles roles0_ 
    where
        roles0_.user_id=?
21:20:45.342 WARN  r.n.votingforrestaurants.web.ExceptionInfoHandler.logAndGetErrorInfo:80 - VALIDATION_ERROR at request  http://localhost/rest/admin/users/100000: org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument at index 0 in method: public void ru.neustupov.votingforrestaurants.web.user.AdminRestController.update(ru.neustupov.votingforrestaurants.model.User,int), with 2 error(s): [Field error in object 'user' on field 'name': rejected value [<script>alert(123)</script>]; codes [SafeHtml.user.name,SafeHtml.name,SafeHtml.java.lang.String,SafeHtml]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [user.name,name]; arguments []; default message [name],[Ljava.lang.String;@340fc1aa,[Lorg.hibernate.validator.constraints.SafeHtml$Tag;@34a33343,org.springframework.validation.beanvalidation.SpringValidatorAdapter$ResolvableAttribute@62dc1203,RELAXED]; default message [может содержать небезопасный html контент]] [Field error in object 'user' on field 'password': rejected value [null]; codes [NotBlank.user.password,NotBlank.password,NotBlank.java.lang.String,NotBlank]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [user.password,password]; arguments []; default message [password]]; default message [не может быть пусто]] 
21:20:45.343 WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver.doResolveHandlerMethodException:410 - Failed to invoke @ExceptionHandler method: public ru.neustupov.votingforrestaurants.util.exception.ErrorInfo ru.neustupov.votingforrestaurants.web.ExceptionInfoHandler.bindValidationError(javax.servlet.http.HttpServletRequest,java.lang.Exception)
org.springframework.context.NoSuchMessageException: No message found under code 'error.validationError' for locale 'ru'.
	at org.springframework.context.support.AbstractMessageSource.getMessage(AbstractMessageSource.java:161)
	at ru.neustupov.votingforrestaurants.web.MessageUtil.getMessage(MessageUtil.java:23)
	at ru.neustupov.votingforrestaurants.web.MessageUtil.getMessage(MessageUtil.java:27)
	at ru.neustupov.votingforrestaurants.web.ExceptionInfoHandler.logAndGetErrorInfo(ExceptionInfoHandler.java:83)
	at ru.neustupov.votingforrestaurants.web.ExceptionInfoHandler.bindValidationError(ExceptionInfoHandler.java:60)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:209)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:136)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:102)
	at org.springframework.web.servlet.mvc.method.annotation.ExceptionHandlerExceptionResolver.doResolveHandlerMethodException(ExceptionHandlerExceptionResolver.java:403)
	at org.springframework.web.servlet.handler.AbstractHandlerMethodExceptionResolver.doResolveException(AbstractHandlerMethodExceptionResolver.java:61)
	at org.springframework.web.servlet.handler.AbstractHandlerExceptionResolver.resolveException(AbstractHandlerExceptionResolver.java:140)
	at org.springframework.web.servlet.DispatcherServlet.processHandlerException(DispatcherServlet.java:1255)
	at org.springframework.test.web.servlet.TestDispatcherServlet.processHandlerException(TestDispatcherServlet.java:113)
	at org.springframework.web.servlet.DispatcherServlet.processDispatchResult(DispatcherServlet.java:1062)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1008)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:925)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:978)
	at org.springframework.web.servlet.FrameworkServlet.doPut(FrameworkServlet.java:892)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:663)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:855)
	at org.springframework.test.web.servlet.TestDispatcherServlet.service(TestDispatcherServlet.java:66)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:741)
	at org.springframework.mock.web.MockFilterChain$ServletFilterProxy.doFilter(MockFilterChain.java:166)
	at org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:133)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:320)
	at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:127)
	at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:91)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:119)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:111)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:170)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.authentication.www.BasicAuthenticationFilter.doFilterInternal(BasicAuthenticationFilter.java:215)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:64)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:56)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:105)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:215)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:178)
	at org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:133)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:200)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:133)
	at org.springframework.test.web.servlet.MockMvc.perform(MockMvc.java:166)
	at ru.neustupov.votingforrestaurants.web.user.AdminRestControllerTest.testUpdateHtmlUnsafe(AdminRestControllerTest.java:159)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:50)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:47)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.springframework.test.context.junit4.statements.RunBeforeTestExecutionCallbacks.evaluate(RunBeforeTestExecutionCallbacks.java:73)
	at org.springframework.test.context.junit4.statements.RunAfterTestExecutionCallbacks.evaluate(RunAfterTestExecutionCallbacks.java:83)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.springframework.test.context.junit4.statements.RunBeforeTestMethodCallbacks.evaluate(RunBeforeTestMethodCallbacks.java:75)
	at org.springframework.test.context.junit4.statements.RunAfterTestMethodCallbacks.evaluate(RunAfterTestMethodCallbacks.java:86)
	at org.springframework.test.context.junit4.statements.SpringRepeat.evaluate(SpringRepeat.java:84)
	at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:325)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:251)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:97)
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:290)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288)
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:58)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268)
	at org.springframework.test.context.junit4.statements.RunBeforeTestClassCallbacks.evaluate(RunBeforeTestClassCallbacks.java:61)
	at org.springframework.test.context.junit4.statements.RunAfterTestClassCallbacks.evaluate(RunAfterTestClassCallbacks.java:70)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:363)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.run(SpringJUnit4ClassRunner.java:190)
	at org.apache.maven.surefire.junit4.JUnit4Provider.execute(JUnit4Provider.java:369)
	at org.apache.maven.surefire.junit4.JUnit4Provider.executeWithRerun(JUnit4Provider.java:275)
	at org.apache.maven.surefire.junit4.JUnit4Provider.executeTestSet(JUnit4Provider.java:239)
	at org.apache.maven.surefire.junit4.JUnit4Provider.invoke(JUnit4Provider.java:160)
	at org.apache.maven.surefire.booter.ForkedBooter.invokeProviderInSameClassLoader(ForkedBooter.java:373)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:334)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:119)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:407)

MockHttpServletRequest:
      HTTP Method = PUT
      Request URI = /rest/admin/users/100000
       Parameters = {}
          Headers = {Content-Type=[application/json;charset=UTF-8], Authorization=[Basic YWRtaW5AeWFuZGV4LnJ1OmFkbWlu]}
             Body = {"id":100000,"name":"<script>alert(123)</script>","email":"user@yandex.ru","registered":"2018-05-21T19:20:43.740+0000","enabled":true,"roles":["ROLE_USER"]}
    Session Attrs = {}

Handler:
             Type = ru.neustupov.votingforrestaurants.web.user.AdminRestController
           Method = public void ru.neustupov.votingforrestaurants.web.user.AdminRestController.update(ru.neustupov.votingforrestaurants.model.User,int)

Async:
    Async started = false
     Async result = null

Resolved Exception:
             Type = org.springframework.web.bind.MethodArgumentNotValidException

ModelAndView:
        View name = null
             View = null
            Model = null

FlashMap:
       Attributes = null

MockHttpServletResponse:
           Status = 400
    Error message = null
          Headers = {Cache-Control=[no-cache, no-store, max-age=0, must-revalidate], Pragma=[no-cache], Expires=[0], X-XSS-Protection=[1; mode=block], X-Frame-Options=[DENY], X-Content-Type-Options=[nosniff]}
     Content type = null
             Body = 
    Forwarded URL = null
   Redirected URL = null
          Cookies = []
Hibernate: 
    /* select
        generatedAlias0 
    from
        User as generatedAlias0 
    where
        generatedAlias0.email=:param0 */ select
            user0_.id as id1_4_,
            user0_.name as name2_4_,
            user0_.email as email3_4_,
            user0_.enabled as enabled4_4_,
            user0_.password as password5_4_,
            user0_.registered as register6_4_ 
        from
            users user0_ 
        where
            user0_.email=?
Hibernate: 
    select
        roles0_.user_id as user_id1_3_0_,
        roles0_.role as role2_3_0_ 
    from
        user_roles roles0_ 
    where
        roles0_.user_id=?
21:20:45.358 INFO  r.n.v.web.user.AbstractUserController.getByMail:63 - getByEmail admin@yandex.ru
Hibernate: 
    /* select
        generatedAlias0 
    from
        User as generatedAlias0 
    where
        generatedAlias0.email=:param0 */ select
            user0_.id as id1_4_,
            user0_.name as name2_4_,
            user0_.email as email3_4_,
            user0_.enabled as enabled4_4_,
            user0_.password as password5_4_,
            user0_.registered as register6_4_ 
        from
            users user0_ 
        where
            user0_.email=?
Hibernate: 
    /* select
        generatedAlias0 
    from
        User as generatedAlias0 
    where
        generatedAlias0.email=:param0 */ select
            user0_.id as id1_4_,
            user0_.name as name2_4_,
            user0_.email as email3_4_,
            user0_.enabled as enabled4_4_,
            user0_.password as password5_4_,
            user0_.registered as register6_4_ 
        from
            users user0_ 
        where
            user0_.email=?
Hibernate: 
    select
        roles0_.user_id as user_id1_3_0_,
        roles0_.role as role2_3_0_ 
    from
        user_roles roles0_ 
    where
        roles0_.user_id=?
21:20:45.371 INFO  r.n.v.web.user.AbstractUserController.create:35 - create Entity ru.neustupov.votingforrestaurants.model.User (null, 'New')
Hibernate: 
    call next value for global_seq
Hibernate: 
    /* insert ru.neustupov.votingforrestaurants.model.User
        */ insert 
        into
            users
            (name, email, enabled, password, registered, id) 
        values
            (?, ?, ?, ?, ?, ?)
Hibernate: 
    /* insert collection
        row ru.neustupov.votingforrestaurants.model.User.roles */ insert 
        into
            user_roles
            (user_id, role) 
        values
            (?, ?)
Hibernate: 
    /* insert collection
        row ru.neustupov.votingforrestaurants.model.User.roles */ insert 
        into
            user_roles
            (user_id, role) 
        values
            (?, ?)
Hibernate: 
    /* SELECT
        DISTINCT u 
    FROM
        User u 
    LEFT JOIN
        FETCH u.roles 
    ORDER BY
        u.name */ select
            distinct user0_.id as id1_4_,
            user0_.name as name2_4_,
            user0_.email as email3_4_,
            user0_.enabled as enabled4_4_,
            user0_.password as password5_4_,
            user0_.registered as register6_4_,
            roles1_.user_id as user_id1_3_0__,
            roles1_.role as role2_3_0__ 
        from
            users user0_ 
        left outer join
            user_roles roles1_ 
                on user0_.id=roles1_.user_id 
        order by
            user0_.name
Hibernate: 
    /* select
        generatedAlias0 
    from
        User as generatedAlias0 
    where
        generatedAlias0.email=:param0 */ select
            user0_.id as id1_4_,
            user0_.name as name2_4_,
            user0_.email as email3_4_,
            user0_.enabled as enabled4_4_,
            user0_.password as password5_4_,
            user0_.registered as register6_4_ 
        from
            users user0_ 
        where
            user0_.email=?
Hibernate: 
    select
        roles0_.user_id as user_id1_3_0_,
        roles0_.role as role2_3_0_ 
    from
        user_roles roles0_ 
    where
        roles0_.user_id=?
21:20:45.502 INFO  r.n.v.web.user.AbstractUserController.delete:41 - delete 100000
Hibernate: 
    /* DELETE 
    FROM
        User u 
    WHERE
        u.id=:id */ delete 
        from
            users 
        where
            id=?

MockHttpServletRequest:
      HTTP Method = DELETE
      Request URI = /rest/admin/users/100000
       Parameters = {}
          Headers = {Authorization=[Basic YWRtaW5AeWFuZGV4LnJ1OmFkbWlu]}
             Body = null
    Session Attrs = {}

Handler:
             Type = ru.neustupov.votingforrestaurants.web.user.AdminRestController
           Method = public void ru.neustupov.votingforrestaurants.web.user.AdminRestController.delete(int)

Async:
    Async started = false
     Async result = null

Resolved Exception:
             Type = null

ModelAndView:
        View name = null
             View = null
            Model = null

FlashMap:
       Attributes = null

MockHttpServletResponse:
           Status = 204
    Error message = null
          Headers = {Cache-Control=[no-cache, no-store, max-age=0, must-revalidate], Pragma=[no-cache], Expires=[0], X-XSS-Protection=[1; mode=block], X-Frame-Options=[DENY], X-Content-Type-Options=[nosniff]}
     Content type = null
             Body = 
    Forwarded URL = null
   Redirected URL = null
          Cookies = []
Hibernate: 
    /* SELECT
        DISTINCT u 
    FROM
        User u 
    LEFT JOIN
        FETCH u.roles 
    ORDER BY
        u.name */ select
            distinct user0_.id as id1_4_,
            user0_.name as name2_4_,
            user0_.email as email3_4_,
            user0_.enabled as enabled4_4_,
            user0_.password as password5_4_,
            user0_.registered as register6_4_,
            roles1_.user_id as user_id1_3_0__,
            roles1_.role as role2_3_0__ 
        from
            users user0_ 
        left outer join
            user_roles roles1_ 
                on user0_.id=roles1_.user_id 
        order by
            user0_.name
Hibernate: 
    /* select
        generatedAlias0 
    from
        User as generatedAlias0 
    where
        generatedAlias0.email=:param0 */ select
            user0_.id as id1_4_,
            user0_.name as name2_4_,
            user0_.email as email3_4_,
            user0_.enabled as enabled4_4_,
            user0_.password as password5_4_,
            user0_.registered as register6_4_ 
        from
            users user0_ 
        where
            user0_.email=?
Hibernate: 
    select
        roles0_.user_id as user_id1_3_0_,
        roles0_.role as role2_3_0_ 
    from
        user_roles roles0_ 
    where
        roles0_.user_id=?
21:20:45.521 INFO  r.n.v.web.user.AbstractUserController.getAll:25 - getAll
Hibernate: 
    /* SELECT
        DISTINCT u 
    FROM
        User u 
    LEFT JOIN
        FETCH u.roles 
    ORDER BY
        u.name */ select
            distinct user0_.id as id1_4_,
            user0_.name as name2_4_,
            user0_.email as email3_4_,
            user0_.enabled as enabled4_4_,
            user0_.password as password5_4_,
            user0_.registered as register6_4_,
            roles1_.user_id as user_id1_3_0__,
            roles1_.role as role2_3_0__ 
        from
            users user0_ 
        left outer join
            user_roles roles1_ 
                on user0_.id=roles1_.user_id 
        order by
            user0_.name
[{"id":100001,"name":"Admin","email":"admin@yandex.ru","registered":"2018-05-21T19:20:40.910+0000","enabled":true,"roles":["ROLE_ADMIN","ROLE_USER"],"votes":null},{"id":100000,"name":"User","email":"user@yandex.ru","registered":"2018-05-21T19:20:40.910+0000","enabled":true,"roles":["ROLE_USER"],"votes":null}]
Hibernate: 
    /* select
        generatedAlias0 
    from
        User as generatedAlias0 
    where
        generatedAlias0.email=:param0 */ select
            user0_.id as id1_4_,
            user0_.name as name2_4_,
            user0_.email as email3_4_,
            user0_.enabled as enabled4_4_,
            user0_.password as password5_4_,
            user0_.registered as register6_4_ 
        from
            users user0_ 
        where
            user0_.email=?
Hibernate: 
    select
        roles0_.user_id as user_id1_3_0_,
        roles0_.role as role2_3_0_ 
    from
        user_roles roles0_ 
    where
        roles0_.user_id=?
21:20:45.545 INFO  r.n.v.web.user.AbstractUserController.update:46 - update Entity ru.neustupov.votingforrestaurants.model.User (100000, 'UpdatedName') with id=100000
Hibernate: 
    /* load ru.neustupov.votingforrestaurants.model.User */ select
        user0_.id as id1_4_0_,
        user0_.name as name2_4_0_,
        user0_.email as email3_4_0_,
        user0_.enabled as enabled4_4_0_,
        user0_.password as password5_4_0_,
        user0_.registered as register6_4_0_ 
    from
        users user0_ 
    where
        user0_.id=?
Hibernate: 
    select
        roles0_.user_id as user_id1_3_0_,
        roles0_.role as role2_3_0_ 
    from
        user_roles roles0_ 
    where
        roles0_.user_id=?
Hibernate: 
    /* select
        generatedAlias0 
    from
        User as generatedAlias0 
    where
        generatedAlias0.email=:param0 */ select
            user0_.id as id1_4_,
            user0_.name as name2_4_,
            user0_.email as email3_4_,
            user0_.enabled as enabled4_4_,
            user0_.password as password5_4_,
            user0_.registered as register6_4_ 
        from
            users user0_ 
        where
            user0_.email=?
Hibernate: 
    select
        roles0_.user_id as user_id1_3_0_,
        roles0_.role as role2_3_0_ 
    from
        user_roles roles0_ 
    where
        roles0_.user_id=?
21:20:45.663 WARN  r.n.votingforrestaurants.web.ExceptionInfoHandler.logAndGetErrorInfo:80 - VALIDATION_ERROR at request  http://localhost/rest/admin/users/: org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument at index 0 in method: public org.springframework.http.ResponseEntity<ru.neustupov.votingforrestaurants.model.User> ru.neustupov.votingforrestaurants.web.user.AdminRestController.createWithLocation(ru.neustupov.votingforrestaurants.model.User), with 2 error(s): [Field error in object 'user' on field 'password': rejected value [null]; codes [NotBlank.user.password,NotBlank.password,NotBlank.java.lang.String,NotBlank]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [user.password,password]; arguments []; default message [password]]; default message [не может быть пусто]] [Field error in object 'user' on field 'name': rejected value [null]; codes [NotBlank.user.name,NotBlank.name,NotBlank.java.lang.String,NotBlank]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [user.name,name]; arguments []; default message [name]]; default message [не может быть пусто]] 
21:20:45.664 WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver.doResolveHandlerMethodException:410 - Failed to invoke @ExceptionHandler method: public ru.neustupov.votingforrestaurants.util.exception.ErrorInfo ru.neustupov.votingforrestaurants.web.ExceptionInfoHandler.bindValidationError(javax.servlet.http.HttpServletRequest,java.lang.Exception)
org.springframework.context.NoSuchMessageException: No message found under code 'error.validationError' for locale 'ru'.
	at org.springframework.context.support.AbstractMessageSource.getMessage(AbstractMessageSource.java:161)
	at ru.neustupov.votingforrestaurants.web.MessageUtil.getMessage(MessageUtil.java:23)
	at ru.neustupov.votingforrestaurants.web.MessageUtil.getMessage(MessageUtil.java:27)
	at ru.neustupov.votingforrestaurants.web.ExceptionInfoHandler.logAndGetErrorInfo(ExceptionInfoHandler.java:83)
	at ru.neustupov.votingforrestaurants.web.ExceptionInfoHandler.bindValidationError(ExceptionInfoHandler.java:60)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:209)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:136)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:102)
	at org.springframework.web.servlet.mvc.method.annotation.ExceptionHandlerExceptionResolver.doResolveHandlerMethodException(ExceptionHandlerExceptionResolver.java:403)
	at org.springframework.web.servlet.handler.AbstractHandlerMethodExceptionResolver.doResolveException(AbstractHandlerMethodExceptionResolver.java:61)
	at org.springframework.web.servlet.handler.AbstractHandlerExceptionResolver.resolveException(AbstractHandlerExceptionResolver.java:140)
	at org.springframework.web.servlet.DispatcherServlet.processHandlerException(DispatcherServlet.java:1255)
	at org.springframework.test.web.servlet.TestDispatcherServlet.processHandlerException(TestDispatcherServlet.java:113)
	at org.springframework.web.servlet.DispatcherServlet.processDispatchResult(DispatcherServlet.java:1062)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1008)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:925)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:978)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:881)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:660)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:855)
	at org.springframework.test.web.servlet.TestDispatcherServlet.service(TestDispatcherServlet.java:66)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:741)
	at org.springframework.mock.web.MockFilterChain$ServletFilterProxy.doFilter(MockFilterChain.java:166)
	at org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:133)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:320)
	at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:127)
	at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:91)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:119)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:111)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:170)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.authentication.www.BasicAuthenticationFilter.doFilterInternal(BasicAuthenticationFilter.java:215)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:64)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:56)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:105)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:215)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:178)
	at org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:133)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:200)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:133)
	at org.springframework.test.web.servlet.MockMvc.perform(MockMvc.java:166)
	at ru.neustupov.votingforrestaurants.web.user.AdminRestControllerTest.testCreateInvalid(AdminRestControllerTest.java:132)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:50)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:47)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.springframework.test.context.junit4.statements.RunBeforeTestExecutionCallbacks.evaluate(RunBeforeTestExecutionCallbacks.java:73)
	at org.springframework.test.context.junit4.statements.RunAfterTestExecutionCallbacks.evaluate(RunAfterTestExecutionCallbacks.java:83)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.springframework.test.context.junit4.statements.RunBeforeTestMethodCallbacks.evaluate(RunBeforeTestMethodCallbacks.java:75)
	at org.springframework.test.context.junit4.statements.RunAfterTestMethodCallbacks.evaluate(RunAfterTestMethodCallbacks.java:86)
	at org.springframework.test.context.junit4.statements.SpringRepeat.evaluate(SpringRepeat.java:84)
	at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:325)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:251)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:97)
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:290)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288)
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:58)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268)
	at org.springframework.test.context.junit4.statements.RunBeforeTestClassCallbacks.evaluate(RunBeforeTestClassCallbacks.java:61)
	at org.springframework.test.context.junit4.statements.RunAfterTestClassCallbacks.evaluate(RunAfterTestClassCallbacks.java:70)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:363)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.run(SpringJUnit4ClassRunner.java:190)
	at org.apache.maven.surefire.junit4.JUnit4Provider.execute(JUnit4Provider.java:369)
	at org.apache.maven.surefire.junit4.JUnit4Provider.executeWithRerun(JUnit4Provider.java:275)
	at org.apache.maven.surefire.junit4.JUnit4Provider.executeTestSet(JUnit4Provider.java:239)
	at org.apache.maven.surefire.junit4.JUnit4Provider.invoke(JUnit4Provider.java:160)
	at org.apache.maven.surefire.booter.ForkedBooter.invokeProviderInSameClassLoader(ForkedBooter.java:373)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:334)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:119)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:407)
[ERROR] Tests run: 13, Failures: 3, Errors: 2, Skipped: 0, Time elapsed: 0.466 s <<< FAILURE! - in ru.neustupov.votingforrestaurants.web.user.AdminRestControllerTest
[ERROR] testUpdateInvalid(ru.neustupov.votingforrestaurants.web.user.AdminRestControllerTest)  Time elapsed: 0.05 s  <<< FAILURE!
java.lang.AssertionError: Status expected:<422> but was:<400>
	at ru.neustupov.votingforrestaurants.web.user.AdminRestControllerTest.testUpdateInvalid(AdminRestControllerTest.java:149)

[ERROR] testDeleteNotFound(ru.neustupov.votingforrestaurants.web.user.AdminRestControllerTest)  Time elapsed: 0.013 s  <<< ERROR!
org.springframework.web.util.NestedServletException: Request processing failed; nested exception is Not found entity with id=1
	at ru.neustupov.votingforrestaurants.web.user.AdminRestControllerTest.testDeleteNotFound(AdminRestControllerTest.java:123)
Caused by: ru.neustupov.votingforrestaurants.util.exception.NotFoundException: Not found entity with id=1
	at ru.neustupov.votingforrestaurants.web.user.AdminRestControllerTest.testDeleteNotFound(AdminRestControllerTest.java:123)

[ERROR] testGetNotFound(ru.neustupov.votingforrestaurants.web.user.AdminRestControllerTest)  Time elapsed: 0.014 s  <<< ERROR!
org.springframework.web.util.NestedServletException: Request processing failed; nested exception is Not found entity with id=1
	at ru.neustupov.votingforrestaurants.web.user.AdminRestControllerTest.testGetNotFound(AdminRestControllerTest.java:115)
Caused by: ru.neustupov.votingforrestaurants.util.exception.NotFoundException: Not found entity with id=1
	at ru.neustupov.votingforrestaurants.web.user.AdminRestControllerTest.testGetNotFound(AdminRestControllerTest.java:115)

[ERROR] testUpdateHtmlUnsafe(ru.neustupov.votingforrestaurants.web.user.AdminRestControllerTest)  Time elapsed: 0.012 s  <<< FAILURE!
java.lang.AssertionError: Status expected:<422> but was:<400>
	at ru.neustupov.votingforrestaurants.web.user.AdminRestControllerTest.testUpdateHtmlUnsafe(AdminRestControllerTest.java:164)

[ERROR] testCreateInvalid(ru.neustupov.votingforrestaurants.web.user.AdminRestControllerTest)  Time elapsed: 0.01 s  <<< FAILURE!
java.lang.AssertionError: Status expected:<422> but was:<400>
	at ru.neustupov.votingforrestaurants.web.user.AdminRestControllerTest.testCreateInvalid(AdminRestControllerTest.java:136)

[INFO] Running ru.neustupov.votingforrestaurants.web.user.ProfileRestControllerTest
Hibernate: 
    /* select
        generatedAlias0 
    from
        User as generatedAlias0 
    where
        generatedAlias0.email=:param0 */ select
            user0_.id as id1_4_,
            user0_.name as name2_4_,
            user0_.email as email3_4_,
            user0_.enabled as enabled4_4_,
            user0_.password as password5_4_,
            user0_.registered as register6_4_ 
        from
            users user0_ 
        where
            user0_.email=?
Hibernate: 
    select
        roles0_.user_id as user_id1_3_0_,
        roles0_.role as role2_3_0_ 
    from
        user_roles roles0_ 
    where
        roles0_.user_id=?
21:20:45.692 INFO  r.n.v.web.user.AbstractUserController.get:30 - get 100000
{"id":100000,"name":"User","email":"user@yandex.ru","registered":"2018-05-21T19:20:40.910+0000","enabled":true,"roles":["ROLE_USER"],"votes":null}
Hibernate: 
    /* select
        generatedAlias0 
    from
        User as generatedAlias0 
    where
        generatedAlias0.email=:param0 */ select
            user0_.id as id1_4_,
            user0_.name as name2_4_,
            user0_.email as email3_4_,
            user0_.enabled as enabled4_4_,
            user0_.password as password5_4_,
            user0_.registered as register6_4_ 
        from
            users user0_ 
        where
            user0_.email=?
Hibernate: 
    select
        roles0_.user_id as user_id1_3_0_,
        roles0_.role as role2_3_0_ 
    from
        user_roles roles0_ 
    where
        roles0_.user_id=?
21:20:45.703 INFO  r.n.v.web.user.AbstractUserController.delete:41 - delete 100000
Hibernate: 
    /* DELETE 
    FROM
        User u 
    WHERE
        u.id=:id */ delete 
        from
            users 
        where
            id=?
Hibernate: 
    /* SELECT
        DISTINCT u 
    FROM
        User u 
    LEFT JOIN
        FETCH u.roles 
    ORDER BY
        u.name */ select
            distinct user0_.id as id1_4_,
            user0_.name as name2_4_,
            user0_.email as email3_4_,
            user0_.enabled as enabled4_4_,
            user0_.password as password5_4_,
            user0_.registered as register6_4_,
            roles1_.user_id as user_id1_3_0__,
            roles1_.role as role2_3_0__ 
        from
            users user0_ 
        left outer join
            user_roles roles1_ 
                on user0_.id=roles1_.user_id 
        order by
            user0_.name
Hibernate: 
    /* select
        generatedAlias0 
    from
        User as generatedAlias0 
    where
        generatedAlias0.email=:param0 */ select
            user0_.id as id1_4_,
            user0_.name as name2_4_,
            user0_.email as email3_4_,
            user0_.enabled as enabled4_4_,
            user0_.password as password5_4_,
            user0_.registered as register6_4_ 
        from
            users user0_ 
        where
            user0_.email=?
Hibernate: 
    select
        roles0_.user_id as user_id1_3_0_,
        roles0_.role as role2_3_0_ 
    from
        user_roles roles0_ 
    where
        roles0_.user_id=?
21:20:45.727 INFO  r.n.v.web.user.AbstractUserController.update:52 - update UserTo{id=null, name='newName', email='user@yandex.ru'} with id=100000

MockHttpServletRequest:
      HTTP Method = PUT
      Request URI = /rest/profile
       Parameters = {}
          Headers = {Content-Type=[application/json;charset=UTF-8], Authorization=[Basic dXNlckB5YW5kZXgucnU6cGFzc3dvcmQ=]}
             Body = {"name":"newName","email":"user@yandex.ru","password":"newPassword"}
    Session Attrs = {}

Handler:
             Type = ru.neustupov.votingforrestaurants.web.user.ProfileRestController
           Method = public void ru.neustupov.votingforrestaurants.web.user.ProfileRestController.update(ru.neustupov.votingforrestaurants.to.UserTo,ru.neustupov.votingforrestaurants.AuthorizedUser)

Async:
    Async started = false
     Async result = null

Resolved Exception:
             Type = null

ModelAndView:
        View name = null
             View = null
            Model = null

FlashMap:
       Attributes = null

MockHttpServletResponse:
           Status = 200
    Error message = null
          Headers = {Cache-Control=[no-cache, no-store, max-age=0, must-revalidate], Pragma=[no-cache], Expires=[0], X-XSS-Protection=[1; mode=block], X-Frame-Options=[DENY], X-Content-Type-Options=[nosniff]}
     Content type = null
             Body = 
    Forwarded URL = null
   Redirected URL = null
          Cookies = []
Hibernate: 
    /* update
        ru.neustupov.votingforrestaurants.model.User */ update
            users 
        set
            name=?,
            email=?,
            enabled=?,
            password=?,
            registered=? 
        where
            id=?
Hibernate: 
    /* select
        generatedAlias0 
    from
        User as generatedAlias0 
    where
        generatedAlias0.email=:param0 */ select
            user0_.id as id1_4_,
            user0_.name as name2_4_,
            user0_.email as email3_4_,
            user0_.enabled as enabled4_4_,
            user0_.password as password5_4_,
            user0_.registered as register6_4_ 
        from
            users user0_ 
        where
            user0_.email=?
[INFO] Tests run: 4, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.167 s - in ru.neustupov.votingforrestaurants.web.user.ProfileRestControllerTest
[INFO] Running ru.neustupov.votingforrestaurants.web.vote.AdminVoteRestControllerTest
Hibernate: 
    /* select
        generatedAlias0 
    from
        User as generatedAlias0 
    where
        generatedAlias0.email=:param0 */ select
            user0_.id as id1_4_,
            user0_.name as name2_4_,
            user0_.email as email3_4_,
            user0_.enabled as enabled4_4_,
            user0_.password as password5_4_,
            user0_.registered as register6_4_ 
        from
            users user0_ 
        where
            user0_.email=?
Hibernate: 
    select
        roles0_.user_id as user_id1_3_0_,
        roles0_.role as role2_3_0_ 
    from
        user_roles roles0_ 
    where
        roles0_.user_id=?
21:20:45.888 WARN  r.n.votingforrestaurants.web.ExceptionInfoHandler.logAndGetErrorInfo:80 - VALIDATION_ERROR at request  http://localhost/rest/admin/votes/100021: org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument at index 1 in method: public void ru.neustupov.votingforrestaurants.web.vote.AdminVoteRestController.update(int,ru.neustupov.votingforrestaurants.model.Vote,int), with 3 error(s): [Field error in object 'vote' on field 'date': rejected value [null]; codes [NotNull.vote.date,NotNull.date,NotNull.java.util.Date,NotNull]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [vote.date,date]; arguments []; default message [date]]; default message [должно быть задано]] [Field error in object 'vote' on field 'user': rejected value [null]; codes [NotNull.vote.user,NotNull.user,NotNull.ru.neustupov.votingforrestaurants.model.User,NotNull]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [vote.user,user]; arguments []; default message [user]]; default message [должно быть задано]] [Field error in object 'vote' on field 'restaurant': rejected value [null]; codes [NotNull.vote.restaurant,NotNull.restaurant,NotNull.ru.neustupov.votingforrestaurants.model.Restaurant,NotNull]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [vote.restaurant,restaurant]; arguments []; default message [restaurant]]; default message [должно быть задано]] 
21:20:45.889 WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver.doResolveHandlerMethodException:410 - Failed to invoke @ExceptionHandler method: public ru.neustupov.votingforrestaurants.util.exception.ErrorInfo ru.neustupov.votingforrestaurants.web.ExceptionInfoHandler.bindValidationError(javax.servlet.http.HttpServletRequest,java.lang.Exception)
org.springframework.context.NoSuchMessageException: No message found under code 'error.validationError' for locale 'ru'.
	at org.springframework.context.support.AbstractMessageSource.getMessage(AbstractMessageSource.java:161)
	at ru.neustupov.votingforrestaurants.web.MessageUtil.getMessage(MessageUtil.java:23)
	at ru.neustupov.votingforrestaurants.web.MessageUtil.getMessage(MessageUtil.java:27)
	at ru.neustupov.votingforrestaurants.web.ExceptionInfoHandler.logAndGetErrorInfo(ExceptionInfoHandler.java:83)
	at ru.neustupov.votingforrestaurants.web.ExceptionInfoHandler.bindValidationError(ExceptionInfoHandler.java:60)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:209)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:136)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:102)
	at org.springframework.web.servlet.mvc.method.annotation.ExceptionHandlerExceptionResolver.doResolveHandlerMethodException(ExceptionHandlerExceptionResolver.java:403)
	at org.springframework.web.servlet.handler.AbstractHandlerMethodExceptionResolver.doResolveException(AbstractHandlerMethodExceptionResolver.java:61)
	at org.springframework.web.servlet.handler.AbstractHandlerExceptionResolver.resolveException(AbstractHandlerExceptionResolver.java:140)
	at org.springframework.web.servlet.DispatcherServlet.processHandlerException(DispatcherServlet.java:1255)
	at org.springframework.test.web.servlet.TestDispatcherServlet.processHandlerException(TestDispatcherServlet.java:113)
	at org.springframework.web.servlet.DispatcherServlet.processDispatchResult(DispatcherServlet.java:1062)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1008)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:925)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:978)
	at org.springframework.web.servlet.FrameworkServlet.doPut(FrameworkServlet.java:892)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:663)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:855)
	at org.springframework.test.web.servlet.TestDispatcherServlet.service(TestDispatcherServlet.java:66)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:741)
	at org.springframework.mock.web.MockFilterChain$ServletFilterProxy.doFilter(MockFilterChain.java:166)
	at org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:133)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:320)
	at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:127)
	at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:91)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:119)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:111)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:170)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.authentication.www.BasicAuthenticationFilter.doFilterInternal(BasicAuthenticationFilter.java:215)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:64)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:56)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:105)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:215)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:178)
	at org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:133)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:200)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:133)
	at org.springframework.test.web.servlet.MockMvc.perform(MockMvc.java:166)
	at ru.neustupov.votingforrestaurants.web.vote.AdminVoteRestControllerTest.testUpdateInvalid(AdminVoteRestControllerTest.java:130)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:50)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:47)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.springframework.test.context.junit4.statements.RunBeforeTestExecutionCallbacks.evaluate(RunBeforeTestExecutionCallbacks.java:73)
	at org.springframework.test.context.junit4.statements.RunAfterTestExecutionCallbacks.evaluate(RunAfterTestExecutionCallbacks.java:83)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.springframework.test.context.junit4.statements.RunBeforeTestMethodCallbacks.evaluate(RunBeforeTestMethodCallbacks.java:75)
	at org.springframework.test.context.junit4.statements.RunAfterTestMethodCallbacks.evaluate(RunAfterTestMethodCallbacks.java:86)
	at org.springframework.test.context.junit4.statements.SpringRepeat.evaluate(SpringRepeat.java:84)
	at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:325)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:251)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:97)
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:290)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288)
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:58)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268)
	at org.springframework.test.context.junit4.statements.RunBeforeTestClassCallbacks.evaluate(RunBeforeTestClassCallbacks.java:61)
	at org.springframework.test.context.junit4.statements.RunAfterTestClassCallbacks.evaluate(RunAfterTestClassCallbacks.java:70)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:363)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.run(SpringJUnit4ClassRunner.java:190)
	at org.apache.maven.surefire.junit4.JUnit4Provider.execute(JUnit4Provider.java:369)
	at org.apache.maven.surefire.junit4.JUnit4Provider.executeWithRerun(JUnit4Provider.java:275)
	at org.apache.maven.surefire.junit4.JUnit4Provider.executeTestSet(JUnit4Provider.java:239)
	at org.apache.maven.surefire.junit4.JUnit4Provider.invoke(JUnit4Provider.java:160)
	at org.apache.maven.surefire.booter.ForkedBooter.invokeProviderInSameClassLoader(ForkedBooter.java:373)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:334)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:119)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:407)

MockHttpServletRequest:
      HTTP Method = PUT
      Request URI = /rest/admin/votes/100021
       Parameters = {}
          Headers = {Content-Type=[application/json;charset=UTF-8], Authorization=[Basic YWRtaW5AeWFuZGV4LnJ1OmFkbWlu]}
             Body = {}
    Session Attrs = {}

Handler:
             Type = ru.neustupov.votingforrestaurants.web.vote.AdminVoteRestController
           Method = public void ru.neustupov.votingforrestaurants.web.vote.AdminVoteRestController.update(int,ru.neustupov.votingforrestaurants.model.Vote,int)

Async:
    Async started = false
     Async result = null

Resolved Exception:
             Type = org.springframework.web.bind.MethodArgumentNotValidException

ModelAndView:
        View name = null
             View = null
            Model = null

FlashMap:
       Attributes = null

MockHttpServletResponse:
           Status = 400
    Error message = null
          Headers = {Cache-Control=[no-cache, no-store, max-age=0, must-revalidate], Pragma=[no-cache], Expires=[0], X-XSS-Protection=[1; mode=block], X-Frame-Options=[DENY], X-Content-Type-Options=[nosniff]}
     Content type = null
             Body = 
    Forwarded URL = null
   Redirected URL = null
          Cookies = []
Hibernate: 
    /* select
        generatedAlias0 
    from
        User as generatedAlias0 
    where
        generatedAlias0.email=:param0 */ select
            user0_.id as id1_4_,
            user0_.name as name2_4_,
            user0_.email as email3_4_,
            user0_.enabled as enabled4_4_,
            user0_.password as password5_4_,
            user0_.registered as register6_4_ 
        from
            users user0_ 
        where
            user0_.email=?
Hibernate: 
    select
        roles0_.user_id as user_id1_3_0_,
        roles0_.role as role2_3_0_ 
    from
        user_roles roles0_ 
    where
        roles0_.user_id=?
21:20:45.903 INFO  r.n.v.web.vote.AbstractVoteController.delete:44 - delete vote 1 for user 100001
Hibernate: 
    /* DELETE 
    FROM
        Vote v 
    WHERE
        v.id=:id 
        AND v.user.id=:userId */ delete 
        from
            votes 
        where
            id=? 
            and user_id=?
21:20:45.907 WARN  r.n.votingforrestaurants.web.ExceptionInfoHandler.logAndGetErrorInfo:80 - DATA_NOT_FOUND at request  http://localhost/rest/admin/votes/1: Not found entity with id=1
21:20:45.908 WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver.doResolveHandlerMethodException:410 - Failed to invoke @ExceptionHandler method: public ru.neustupov.votingforrestaurants.util.exception.ErrorInfo ru.neustupov.votingforrestaurants.web.ExceptionInfoHandler.handleError(javax.servlet.http.HttpServletRequest,ru.neustupov.votingforrestaurants.util.exception.NotFoundException)
org.springframework.context.NoSuchMessageException: No message found under code 'error.dataNotFound' for locale 'ru'.
	at org.springframework.context.support.AbstractMessageSource.getMessage(AbstractMessageSource.java:161)
	at ru.neustupov.votingforrestaurants.web.MessageUtil.getMessage(MessageUtil.java:23)
	at ru.neustupov.votingforrestaurants.web.MessageUtil.getMessage(MessageUtil.java:27)
	at ru.neustupov.votingforrestaurants.web.ExceptionInfoHandler.logAndGetErrorInfo(ExceptionInfoHandler.java:83)
	at ru.neustupov.votingforrestaurants.web.ExceptionInfoHandler.handleError(ExceptionInfoHandler.java:41)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:209)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:136)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:102)
	at org.springframework.web.servlet.mvc.method.annotation.ExceptionHandlerExceptionResolver.doResolveHandlerMethodException(ExceptionHandlerExceptionResolver.java:403)
	at org.springframework.web.servlet.handler.AbstractHandlerMethodExceptionResolver.doResolveException(AbstractHandlerMethodExceptionResolver.java:61)
	at org.springframework.web.servlet.handler.AbstractHandlerExceptionResolver.resolveException(AbstractHandlerExceptionResolver.java:140)
	at org.springframework.web.servlet.DispatcherServlet.processHandlerException(DispatcherServlet.java:1255)
	at org.springframework.test.web.servlet.TestDispatcherServlet.processHandlerException(TestDispatcherServlet.java:113)
	at org.springframework.web.servlet.DispatcherServlet.processDispatchResult(DispatcherServlet.java:1062)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1008)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:925)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:978)
	at org.springframework.web.servlet.FrameworkServlet.doDelete(FrameworkServlet.java:903)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:666)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:855)
	at org.springframework.test.web.servlet.TestDispatcherServlet.service(TestDispatcherServlet.java:66)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:741)
	at org.springframework.mock.web.MockFilterChain$ServletFilterProxy.doFilter(MockFilterChain.java:166)
	at org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:133)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:320)
	at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:127)
	at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:91)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:119)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:111)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:170)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.authentication.www.BasicAuthenticationFilter.doFilterInternal(BasicAuthenticationFilter.java:215)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:64)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:56)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:105)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:215)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:178)
	at org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:133)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:200)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:133)
	at org.springframework.test.web.servlet.MockMvc.perform(MockMvc.java:166)
	at ru.neustupov.votingforrestaurants.web.vote.AdminVoteRestControllerTest.testDeleteNotFound(AdminVoteRestControllerTest.java:108)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:50)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:47)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.springframework.test.context.junit4.statements.RunBeforeTestExecutionCallbacks.evaluate(RunBeforeTestExecutionCallbacks.java:73)
	at org.springframework.test.context.junit4.statements.RunAfterTestExecutionCallbacks.evaluate(RunAfterTestExecutionCallbacks.java:83)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.springframework.test.context.junit4.statements.RunBeforeTestMethodCallbacks.evaluate(RunBeforeTestMethodCallbacks.java:75)
	at org.springframework.test.context.junit4.statements.RunAfterTestMethodCallbacks.evaluate(RunAfterTestMethodCallbacks.java:86)
	at org.springframework.test.context.junit4.statements.SpringRepeat.evaluate(SpringRepeat.java:84)
	at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:325)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:251)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:97)
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:290)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288)
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:58)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268)
	at org.springframework.test.context.junit4.statements.RunBeforeTestClassCallbacks.evaluate(RunBeforeTestClassCallbacks.java:61)
	at org.springframework.test.context.junit4.statements.RunAfterTestClassCallbacks.evaluate(RunAfterTestClassCallbacks.java:70)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:363)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.run(SpringJUnit4ClassRunner.java:190)
	at org.apache.maven.surefire.junit4.JUnit4Provider.execute(JUnit4Provider.java:369)
	at org.apache.maven.surefire.junit4.JUnit4Provider.executeWithRerun(JUnit4Provider.java:275)
	at org.apache.maven.surefire.junit4.JUnit4Provider.executeTestSet(JUnit4Provider.java:239)
	at org.apache.maven.surefire.junit4.JUnit4Provider.invoke(JUnit4Provider.java:160)
	at org.apache.maven.surefire.booter.ForkedBooter.invokeProviderInSameClassLoader(ForkedBooter.java:373)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:334)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:119)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:407)
21:20:45.910 WARN  o.h.e.j.s.SqlExceptionHelper$StandardWarningHandler.logWarning:217 - SQL Warning Code: -1100, SQLState: 02000
21:20:45.910 WARN  o.h.e.j.s.SqlExceptionHelper$StandardWarningHandler.logWarning:218 - no data
Hibernate: 
    /* select
        generatedAlias0 
    from
        User as generatedAlias0 
    where
        generatedAlias0.email=:param0 */ select
            user0_.id as id1_4_,
            user0_.name as name2_4_,
            user0_.email as email3_4_,
            user0_.enabled as enabled4_4_,
            user0_.password as password5_4_,
            user0_.registered as register6_4_ 
        from
            users user0_ 
        where
            user0_.email=?
Hibernate: 
    select
        roles0_.user_id as user_id1_3_0_,
        roles0_.role as role2_3_0_ 
    from
        user_roles roles0_ 
    where
        roles0_.user_id=?
21:20:45.920 INFO  r.n.v.web.vote.AbstractVoteController.get:38 - get vote 100024 for user 100001
Hibernate: 
    select
        vote0_.id as id1_5_0_,
        vote0_.date as date2_5_0_,
        vote0_.restaurant as restaura3_5_0_,
        vote0_.user_id as user_id4_5_0_ 
    from
        votes vote0_ 
    where
        vote0_.id=?

MockHttpServletRequest:
      HTTP Method = GET
      Request URI = /rest/admin/votes/100024
       Parameters = {}
          Headers = {Authorization=[Basic YWRtaW5AeWFuZGV4LnJ1OmFkbWlu]}
             Body = null
    Session Attrs = {}

Handler:
             Type = ru.neustupov.votingforrestaurants.web.vote.AdminVoteRestController
           Method = public ru.neustupov.votingforrestaurants.model.Vote ru.neustupov.votingforrestaurants.web.vote.AdminVoteRestController.get(int)

Async:
    Async started = false
     Async result = null

Resolved Exception:
             Type = null

ModelAndView:
        View name = null
             View = null
            Model = null

FlashMap:
       Attributes = null

MockHttpServletResponse:
           Status = 200
    Error message = null
          Headers = {Cache-Control=[no-cache, no-store, max-age=0, must-revalidate], Pragma=[no-cache], Expires=[0], X-XSS-Protection=[1; mode=block], X-Frame-Options=[DENY], X-Content-Type-Options=[nosniff], Content-Type=[application/json;charset=UTF-8]}
     Content type = application/json;charset=UTF-8
             Body = {"id":100024,"user":{"id":100001,"name":"Admin","email":"admin@yandex.ru","registered":"2018-05-21T19:20:40.910+0000","enabled":true,"roles":["ROLE_ADMIN","ROLE_USER"],"votes":null},"date":"2015-04-30T22:00:00.000+0000","restaurant":null}
    Forwarded URL = null
   Redirected URL = null
          Cookies = []
Hibernate: 
    /* select
        generatedAlias0 
    from
        User as generatedAlias0 
    where
        generatedAlias0.email=:param0 */ select
            user0_.id as id1_4_,
            user0_.name as name2_4_,
            user0_.email as email3_4_,
            user0_.enabled as enabled4_4_,
            user0_.password as password5_4_,
            user0_.registered as register6_4_ 
        from
            users user0_ 
        where
            user0_.email=?
Hibernate: 
    select
        roles0_.user_id as user_id1_3_0_,
        roles0_.role as role2_3_0_ 
    from
        user_roles roles0_ 
    where
        roles0_.user_id=?
21:20:45.944 INFO  r.n.v.web.vote.AbstractVoteController.get:38 - get vote 1 for user 100001
Hibernate: 
    select
        vote0_.id as id1_5_0_,
        vote0_.date as date2_5_0_,
        vote0_.restaurant as restaura3_5_0_,
        vote0_.user_id as user_id4_5_0_ 
    from
        votes vote0_ 
    where
        vote0_.id=?
21:20:45.946 WARN  r.n.votingforrestaurants.web.ExceptionInfoHandler.logAndGetErrorInfo:80 - DATA_NOT_FOUND at request  http://localhost/rest/admin/votes/1: Not found entity with id=1
21:20:45.946 WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver.doResolveHandlerMethodException:410 - Failed to invoke @ExceptionHandler method: public ru.neustupov.votingforrestaurants.util.exception.ErrorInfo ru.neustupov.votingforrestaurants.web.ExceptionInfoHandler.handleError(javax.servlet.http.HttpServletRequest,ru.neustupov.votingforrestaurants.util.exception.NotFoundException)
org.springframework.context.NoSuchMessageException: No message found under code 'error.dataNotFound' for locale 'ru'.
	at org.springframework.context.support.AbstractMessageSource.getMessage(AbstractMessageSource.java:161)
	at ru.neustupov.votingforrestaurants.web.MessageUtil.getMessage(MessageUtil.java:23)
	at ru.neustupov.votingforrestaurants.web.MessageUtil.getMessage(MessageUtil.java:27)
	at ru.neustupov.votingforrestaurants.web.ExceptionInfoHandler.logAndGetErrorInfo(ExceptionInfoHandler.java:83)
	at ru.neustupov.votingforrestaurants.web.ExceptionInfoHandler.handleError(ExceptionInfoHandler.java:41)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:209)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:136)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:102)
	at org.springframework.web.servlet.mvc.method.annotation.ExceptionHandlerExceptionResolver.doResolveHandlerMethodException(ExceptionHandlerExceptionResolver.java:403)
	at org.springframework.web.servlet.handler.AbstractHandlerMethodExceptionResolver.doResolveException(AbstractHandlerMethodExceptionResolver.java:61)
	at org.springframework.web.servlet.handler.AbstractHandlerExceptionResolver.resolveException(AbstractHandlerExceptionResolver.java:140)
	at org.springframework.web.servlet.DispatcherServlet.processHandlerException(DispatcherServlet.java:1255)
	at org.springframework.test.web.servlet.TestDispatcherServlet.processHandlerException(TestDispatcherServlet.java:113)
	at org.springframework.web.servlet.DispatcherServlet.processDispatchResult(DispatcherServlet.java:1062)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1008)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:925)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:978)
	at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:870)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:634)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:855)
	at org.springframework.test.web.servlet.TestDispatcherServlet.service(TestDispatcherServlet.java:66)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:741)
	at org.springframework.mock.web.MockFilterChain$ServletFilterProxy.doFilter(MockFilterChain.java:166)
	at org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:133)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:320)
	at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:127)
	at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:91)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:119)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:111)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:170)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.authentication.www.BasicAuthenticationFilter.doFilterInternal(BasicAuthenticationFilter.java:215)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:64)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:56)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:105)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:215)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:178)
	at org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:133)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:200)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:133)
	at org.springframework.test.web.servlet.MockMvc.perform(MockMvc.java:166)
	at ru.neustupov.votingforrestaurants.web.vote.AdminVoteRestControllerTest.testGetNotFound(AdminVoteRestControllerTest.java:100)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:50)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:47)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.springframework.test.context.junit4.statements.RunBeforeTestExecutionCallbacks.evaluate(RunBeforeTestExecutionCallbacks.java:73)
	at org.springframework.test.context.junit4.statements.RunAfterTestExecutionCallbacks.evaluate(RunAfterTestExecutionCallbacks.java:83)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.springframework.test.context.junit4.statements.RunBeforeTestMethodCallbacks.evaluate(RunBeforeTestMethodCallbacks.java:75)
	at org.springframework.test.context.junit4.statements.RunAfterTestMethodCallbacks.evaluate(RunAfterTestMethodCallbacks.java:86)
	at org.springframework.test.context.junit4.statements.SpringRepeat.evaluate(SpringRepeat.java:84)
	at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:325)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:251)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:97)
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:290)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288)
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:58)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268)
	at org.springframework.test.context.junit4.statements.RunBeforeTestClassCallbacks.evaluate(RunBeforeTestClassCallbacks.java:61)
	at org.springframework.test.context.junit4.statements.RunAfterTestClassCallbacks.evaluate(RunAfterTestClassCallbacks.java:70)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:363)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.run(SpringJUnit4ClassRunner.java:190)
	at org.apache.maven.surefire.junit4.JUnit4Provider.execute(JUnit4Provider.java:369)
	at org.apache.maven.surefire.junit4.JUnit4Provider.executeWithRerun(JUnit4Provider.java:275)
	at org.apache.maven.surefire.junit4.JUnit4Provider.executeTestSet(JUnit4Provider.java:239)
	at org.apache.maven.surefire.junit4.JUnit4Provider.invoke(JUnit4Provider.java:160)
	at org.apache.maven.surefire.booter.ForkedBooter.invokeProviderInSameClassLoader(ForkedBooter.java:373)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:334)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:119)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:407)
Hibernate: 
    /* select
        generatedAlias0 
    from
        User as generatedAlias0 
    where
        generatedAlias0.email=:param0 */ select
            user0_.id as id1_4_,
            user0_.name as name2_4_,
            user0_.email as email3_4_,
            user0_.enabled as enabled4_4_,
            user0_.password as password5_4_,
            user0_.registered as register6_4_ 
        from
            users user0_ 
        where
            user0_.email=?
Hibernate: 
    select
        roles0_.user_id as user_id1_3_0_,
        roles0_.role as role2_3_0_ 
    from
        user_roles roles0_ 
    where
        roles0_.user_id=?
21:20:45.959 INFO  r.n.v.web.vote.AbstractVoteController.create:61 - create AbstractBaseEntity{id=null} for user 100001
Hibernate: 
    call next value for global_seq
Hibernate: 
    /* insert ru.neustupov.votingforrestaurants.model.Vote
        */ insert 
        into
            votes
            (date, restaurant, user_id, id) 
        values
            (?, ?, ?, ?)
Hibernate: 
    /* SELECT
        v 
    FROM
        Vote v */ select
            vote0_.id as id1_5_0_,
            restaurant1_.id as id1_2_1_,
            user2_.id as id1_4_2_,
            vote0_.date as date2_5_0_,
            vote0_.restaurant as restaura3_5_0_,
            vote0_.user_id as user_id4_5_0_,
            restaurant1_.name as name2_2_1_,
            user2_.name as name2_4_2_,
            user2_.email as email3_4_2_,
            user2_.enabled as enabled4_4_2_,
            user2_.password as password5_4_2_,
            user2_.registered as register6_4_2_ 
        from
            votes vote0_ 
        left outer join
            restaurants restaurant1_ 
                on vote0_.restaurant=restaurant1_.id 
        left outer join
            users user2_ 
                on vote0_.user_id=user2_.id
Hibernate: 
    select
        roles0_.user_id as user_id1_3_0_,
        roles0_.role as role2_3_0_ 
    from
        user_roles roles0_ 
    where
        roles0_.user_id=?
Hibernate: 
    /* select
        generatedAlias0 
    from
        User as generatedAlias0 
    where
        generatedAlias0.email=:param0 */ select
            user0_.id as id1_4_,
            user0_.name as name2_4_,
            user0_.email as email3_4_,
            user0_.enabled as enabled4_4_,
            user0_.password as password5_4_,
            user0_.registered as register6_4_ 
        from
            users user0_ 
        where
            user0_.email=?
Hibernate: 
    select
        roles0_.user_id as user_id1_3_0_,
        roles0_.role as role2_3_0_ 
    from
        user_roles roles0_ 
    where
        roles0_.user_id=?
21:20:45.990 INFO  r.n.v.web.vote.AbstractVoteController.delete:44 - delete vote 100024 for user 100001
Hibernate: 
    /* DELETE 
    FROM
        Vote v 
    WHERE
        v.id=:id 
        AND v.user.id=:userId */ delete 
        from
            votes 
        where
            id=? 
            and user_id=?

MockHttpServletRequest:
      HTTP Method = DELETE
      Request URI = /rest/admin/votes/100024
       Parameters = {}
          Headers = {Authorization=[Basic YWRtaW5AeWFuZGV4LnJ1OmFkbWlu]}
             Body = null
    Session Attrs = {}

Handler:
             Type = ru.neustupov.votingforrestaurants.web.vote.AdminVoteRestController
           Method = public void ru.neustupov.votingforrestaurants.web.vote.AdminVoteRestController.delete(int)

Async:
    Async started = false
     Async result = null

Resolved Exception:
             Type = null

ModelAndView:
        View name = null
             View = null
            Model = null

FlashMap:
       Attributes = null

MockHttpServletResponse:
           Status = 204
    Error message = null
          Headers = {Cache-Control=[no-cache, no-store, max-age=0, must-revalidate], Pragma=[no-cache], Expires=[0], X-XSS-Protection=[1; mode=block], X-Frame-Options=[DENY], X-Content-Type-Options=[nosniff]}
     Content type = null
             Body = 
    Forwarded URL = null
   Redirected URL = null
          Cookies = []
Hibernate: 
    /* SELECT
        v 
    FROM
        Vote v */ select
            vote0_.id as id1_5_0_,
            restaurant1_.id as id1_2_1_,
            user2_.id as id1_4_2_,
            vote0_.date as date2_5_0_,
            vote0_.restaurant as restaura3_5_0_,
            vote0_.user_id as user_id4_5_0_,
            restaurant1_.name as name2_2_1_,
            user2_.name as name2_4_2_,
            user2_.email as email3_4_2_,
            user2_.enabled as enabled4_4_2_,
            user2_.password as password5_4_2_,
            user2_.registered as register6_4_2_ 
        from
            votes vote0_ 
        left outer join
            restaurants restaurant1_ 
                on vote0_.restaurant=restaurant1_.id 
        left outer join
            users user2_ 
                on vote0_.user_id=user2_.id
Hibernate: 
    select
        roles0_.user_id as user_id1_3_0_,
        roles0_.role as role2_3_0_ 
    from
        user_roles roles0_ 
    where
        roles0_.user_id=?
Hibernate: 
    /* select
        generatedAlias0 
    from
        User as generatedAlias0 
    where
        generatedAlias0.email=:param0 */ select
            user0_.id as id1_4_,
            user0_.name as name2_4_,
            user0_.email as email3_4_,
            user0_.enabled as enabled4_4_,
            user0_.password as password5_4_,
            user0_.registered as register6_4_ 
        from
            users user0_ 
        where
            user0_.email=?
Hibernate: 
    select
        roles0_.user_id as user_id1_3_0_,
        roles0_.role as role2_3_0_ 
    from
        user_roles roles0_ 
    where
        roles0_.user_id=?
21:20:46.014 INFO  r.n.v.web.vote.AbstractVoteController.getAll:49 - getAll votes
Hibernate: 
    /* SELECT
        v 
    FROM
        Vote v */ select
            vote0_.id as id1_5_0_,
            restaurant1_.id as id1_2_1_,
            user2_.id as id1_4_2_,
            vote0_.date as date2_5_0_,
            vote0_.restaurant as restaura3_5_0_,
            vote0_.user_id as user_id4_5_0_,
            restaurant1_.name as name2_2_1_,
            user2_.name as name2_4_2_,
            user2_.email as email3_4_2_,
            user2_.enabled as enabled4_4_2_,
            user2_.password as password5_4_2_,
            user2_.registered as register6_4_2_ 
        from
            votes vote0_ 
        left outer join
            restaurants restaurant1_ 
                on vote0_.restaurant=restaurant1_.id 
        left outer join
            users user2_ 
                on vote0_.user_id=user2_.id
Hibernate: 
    select
        roles0_.user_id as user_id1_3_0_,
        roles0_.role as role2_3_0_ 
    from
        user_roles roles0_ 
    where
        roles0_.user_id=?
[{"id":100021,"user":{"id":100000,"name":"User","email":"user@yandex.ru","registered":"2018-05-21T19:20:40.910+0000","enabled":true,"roles":["ROLE_USER"],"votes":null},"date":"2015-04-30T22:00:00.000+0000","restaurant":{"id":100002,"name":"Russia","menus":null,"votes":null}},{"id":100022,"user":{"id":100000,"name":"User","email":"user@yandex.ru","registered":"2018-05-21T19:20:40.910+0000","enabled":true,"roles":["ROLE_USER"],"votes":null},"date":"2015-05-01T22:00:00.000+0000","restaurant":{"id":100003,"name":"Ukraine","menus":null,"votes":null}},{"id":100023,"user":{"id":100000,"name":"User","email":"user@yandex.ru","registered":"2018-05-21T19:20:40.910+0000","enabled":true,"roles":["ROLE_USER"],"votes":null},"date":"2015-05-02T22:00:00.000+0000","restaurant":{"id":100004,"name":"U Kolyana","menus":null,"votes":null}},{"id":100024,"user":{"id":100001,"name":"Admin","email":"admin@yandex.ru","registered":"2018-05-21T19:20:40.910+0000","enabled":true,"roles":["ROLE_ADMIN","ROLE_USER"],"votes":null},"date":"2015-04-30T22:00:00.000+0000","restaurant":{"id":100005,"name":"Almaz","menus":null,"votes":null}},{"id":100025,"user":{"id":100001,"name":"Admin","email":"admin@yandex.ru","registered":"2018-05-21T19:20:40.910+0000","enabled":true,"roles":["ROLE_ADMIN","ROLE_USER"],"votes":null},"date":"2015-05-01T22:00:00.000+0000","restaurant":{"id":100006,"name":"Fart","menus":null,"votes":null}},{"id":100026,"user":{"id":100001,"name":"Admin","email":"admin@yandex.ru","registered":"2018-05-21T19:20:40.910+0000","enabled":true,"roles":["ROLE_ADMIN","ROLE_USER"],"votes":null},"date":"2015-05-02T22:00:00.000+0000","restaurant":{"id":100002,"name":"Russia","menus":null,"votes":null}}]
Hibernate: 
    /* select
        generatedAlias0 
    from
        User as generatedAlias0 
    where
        generatedAlias0.email=:param0 */ select
            user0_.id as id1_4_,
            user0_.name as name2_4_,
            user0_.email as email3_4_,
            user0_.enabled as enabled4_4_,
            user0_.password as password5_4_,
            user0_.registered as register6_4_ 
        from
            users user0_ 
        where
            user0_.email=?
Hibernate: 
    select
        roles0_.user_id as user_id1_3_0_,
        roles0_.role as role2_3_0_ 
    from
        user_roles roles0_ 
    where
        roles0_.user_id=?
21:20:46.040 WARN  r.n.votingforrestaurants.web.ExceptionInfoHandler.logAndGetErrorInfo:80 - VALIDATION_ERROR at request  http://localhost/rest/admin/votes/: org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument at index 0 in method: public org.springframework.http.ResponseEntity<ru.neustupov.votingforrestaurants.model.Vote> ru.neustupov.votingforrestaurants.web.vote.AdminVoteRestController.createWithLocation(ru.neustupov.votingforrestaurants.model.Vote,int), with 3 error(s): [Field error in object 'vote' on field 'date': rejected value [null]; codes [NotNull.vote.date,NotNull.date,NotNull.java.util.Date,NotNull]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [vote.date,date]; arguments []; default message [date]]; default message [должно быть задано]] [Field error in object 'vote' on field 'restaurant': rejected value [null]; codes [NotNull.vote.restaurant,NotNull.restaurant,NotNull.ru.neustupov.votingforrestaurants.model.Restaurant,NotNull]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [vote.restaurant,restaurant]; arguments []; default message [restaurant]]; default message [должно быть задано]] [Field error in object 'vote' on field 'user': rejected value [null]; codes [NotNull.vote.user,NotNull.user,NotNull.ru.neustupov.votingforrestaurants.model.User,NotNull]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [vote.user,user]; arguments []; default message [user]]; default message [должно быть задано]] 
21:20:46.040 WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver.doResolveHandlerMethodException:410 - Failed to invoke @ExceptionHandler method: public ru.neustupov.votingforrestaurants.util.exception.ErrorInfo ru.neustupov.votingforrestaurants.web.ExceptionInfoHandler.bindValidationError(javax.servlet.http.HttpServletRequest,java.lang.Exception)
org.springframework.context.NoSuchMessageException: No message found under code 'error.validationError' for locale 'ru'.
	at org.springframework.context.support.AbstractMessageSource.getMessage(AbstractMessageSource.java:161)
	at ru.neustupov.votingforrestaurants.web.MessageUtil.getMessage(MessageUtil.java:23)
	at ru.neustupov.votingforrestaurants.web.MessageUtil.getMessage(MessageUtil.java:27)
	at ru.neustupov.votingforrestaurants.web.ExceptionInfoHandler.logAndGetErrorInfo(ExceptionInfoHandler.java:83)
	at ru.neustupov.votingforrestaurants.web.ExceptionInfoHandler.bindValidationError(ExceptionInfoHandler.java:60)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:209)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:136)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:102)
	at org.springframework.web.servlet.mvc.method.annotation.ExceptionHandlerExceptionResolver.doResolveHandlerMethodException(ExceptionHandlerExceptionResolver.java:403)
	at org.springframework.web.servlet.handler.AbstractHandlerMethodExceptionResolver.doResolveException(AbstractHandlerMethodExceptionResolver.java:61)
	at org.springframework.web.servlet.handler.AbstractHandlerExceptionResolver.resolveException(AbstractHandlerExceptionResolver.java:140)
	at org.springframework.web.servlet.DispatcherServlet.processHandlerException(DispatcherServlet.java:1255)
	at org.springframework.test.web.servlet.TestDispatcherServlet.processHandlerException(TestDispatcherServlet.java:113)
	at org.springframework.web.servlet.DispatcherServlet.processDispatchResult(DispatcherServlet.java:1062)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1008)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:925)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:978)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:881)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:660)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:855)
	at org.springframework.test.web.servlet.TestDispatcherServlet.service(TestDispatcherServlet.java:66)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:741)
	at org.springframework.mock.web.MockFilterChain$ServletFilterProxy.doFilter(MockFilterChain.java:166)
	at org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:133)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:320)
	at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:127)
	at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:91)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:119)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:111)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:170)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.authentication.www.BasicAuthenticationFilter.doFilterInternal(BasicAuthenticationFilter.java:215)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:64)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:56)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:105)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:215)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:178)
	at org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:133)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:200)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:133)
	at org.springframework.test.web.servlet.MockMvc.perform(MockMvc.java:166)
	at ru.neustupov.votingforrestaurants.web.vote.AdminVoteRestControllerTest.testCreateInvalid(AdminVoteRestControllerTest.java:117)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:50)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:47)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.springframework.test.context.junit4.statements.RunBeforeTestExecutionCallbacks.evaluate(RunBeforeTestExecutionCallbacks.java:73)
	at org.springframework.test.context.junit4.statements.RunAfterTestExecutionCallbacks.evaluate(RunAfterTestExecutionCallbacks.java:83)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.springframework.test.context.junit4.statements.RunBeforeTestMethodCallbacks.evaluate(RunBeforeTestMethodCallbacks.java:75)
	at org.springframework.test.context.junit4.statements.RunAfterTestMethodCallbacks.evaluate(RunAfterTestMethodCallbacks.java:86)
	at org.springframework.test.context.junit4.statements.SpringRepeat.evaluate(SpringRepeat.java:84)
	at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:325)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:251)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:97)
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:290)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288)
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:58)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268)
	at org.springframework.test.context.junit4.statements.RunBeforeTestClassCallbacks.evaluate(RunBeforeTestClassCallbacks.java:61)
	at org.springframework.test.context.junit4.statements.RunAfterTestClassCallbacks.evaluate(RunAfterTestClassCallbacks.java:70)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:363)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.run(SpringJUnit4ClassRunner.java:190)
	at org.apache.maven.surefire.junit4.JUnit4Provider.execute(JUnit4Provider.java:369)
	at org.apache.maven.surefire.junit4.JUnit4Provider.executeWithRerun(JUnit4Provider.java:275)
	at org.apache.maven.surefire.junit4.JUnit4Provider.executeTestSet(JUnit4Provider.java:239)
	at org.apache.maven.surefire.junit4.JUnit4Provider.invoke(JUnit4Provider.java:160)
	at org.apache.maven.surefire.booter.ForkedBooter.invokeProviderInSameClassLoader(ForkedBooter.java:373)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:334)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:119)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:407)

MockHttpServletRequest:
      HTTP Method = POST
      Request URI = /rest/admin/votes/
       Parameters = {}
          Headers = {Content-Type=[application/json;charset=UTF-8], Authorization=[Basic YWRtaW5AeWFuZGV4LnJ1OmFkbWlu]}
             Body = {}
    Session Attrs = {}

Handler:
             Type = ru.neustupov.votingforrestaurants.web.vote.AdminVoteRestController
           Method = public org.springframework.http.ResponseEntity<ru.neustupov.votingforrestaurants.model.Vote> ru.neustupov.votingforrestaurants.web.vote.AdminVoteRestController.createWithLocation(ru.neustupov.votingforrestaurants.model.Vote,int)

Async:
    Async started = false
     Async result = null

Resolved Exception:
             Type = org.springframework.web.bind.MethodArgumentNotValidException

ModelAndView:
        View name = null
             View = null
            Model = null

FlashMap:
       Attributes = null

MockHttpServletResponse:
           Status = 400
    Error message = null
          Headers = {Cache-Control=[no-cache, no-store, max-age=0, must-revalidate], Pragma=[no-cache], Expires=[0], X-XSS-Protection=[1; mode=block], X-Frame-Options=[DENY], X-Content-Type-Options=[nosniff]}
     Content type = null
             Body = 
    Forwarded URL = null
   Redirected URL = null
          Cookies = []
[ERROR] Tests run: 9, Failures: 2, Errors: 2, Skipped: 1, Time elapsed: 0.199 s <<< FAILURE! - in ru.neustupov.votingforrestaurants.web.vote.AdminVoteRestControllerTest
[ERROR] testUpdateInvalid(ru.neustupov.votingforrestaurants.web.vote.AdminVoteRestControllerTest)  Time elapsed: 0.027 s  <<< FAILURE!
java.lang.AssertionError: Status expected:<422> but was:<400>
	at ru.neustupov.votingforrestaurants.web.vote.AdminVoteRestControllerTest.testUpdateInvalid(AdminVoteRestControllerTest.java:135)

[ERROR] testDeleteNotFound(ru.neustupov.votingforrestaurants.web.vote.AdminVoteRestControllerTest)  Time elapsed: 0.016 s  <<< ERROR!
org.springframework.web.util.NestedServletException: Request processing failed; nested exception is Not found entity with id=1
	at ru.neustupov.votingforrestaurants.web.vote.AdminVoteRestControllerTest.testDeleteNotFound(AdminVoteRestControllerTest.java:108)
Caused by: ru.neustupov.votingforrestaurants.util.exception.NotFoundException: Not found entity with id=1
	at ru.neustupov.votingforrestaurants.web.vote.AdminVoteRestControllerTest.testDeleteNotFound(AdminVoteRestControllerTest.java:108)

[ERROR] testGetNotFound(ru.neustupov.votingforrestaurants.web.vote.AdminVoteRestControllerTest)  Time elapsed: 0.012 s  <<< ERROR!
org.springframework.web.util.NestedServletException: Request processing failed; nested exception is Not found entity with id=1
	at ru.neustupov.votingforrestaurants.web.vote.AdminVoteRestControllerTest.testGetNotFound(AdminVoteRestControllerTest.java:100)
Caused by: ru.neustupov.votingforrestaurants.util.exception.NotFoundException: Not found entity with id=1
	at ru.neustupov.votingforrestaurants.web.vote.AdminVoteRestControllerTest.testGetNotFound(AdminVoteRestControllerTest.java:100)

[ERROR] testCreateInvalid(ru.neustupov.votingforrestaurants.web.vote.AdminVoteRestControllerTest)  Time elapsed: 0.013 s  <<< FAILURE!
java.lang.AssertionError: Status expected:<422> but was:<400>
	at ru.neustupov.votingforrestaurants.web.vote.AdminVoteRestControllerTest.testCreateInvalid(AdminVoteRestControllerTest.java:122)

[INFO] Running ru.neustupov.votingforrestaurants.web.meal.AdminMealRestControllerTest
Hibernate: 
    /* select
        generatedAlias0 
    from
        User as generatedAlias0 
    where
        generatedAlias0.email=:param0 */ select
            user0_.id as id1_4_,
            user0_.name as name2_4_,
            user0_.email as email3_4_,
            user0_.enabled as enabled4_4_,
            user0_.password as password5_4_,
            user0_.registered as register6_4_ 
        from
            users user0_ 
        where
            user0_.email=?
Hibernate: 
    select
        roles0_.user_id as user_id1_3_0_,
        roles0_.role as role2_3_0_ 
    from
        user_roles roles0_ 
    where
        roles0_.user_id=?
21:20:46.094 WARN  r.n.votingforrestaurants.web.ExceptionInfoHandler.logAndGetErrorInfo:80 - VALIDATION_ERROR at request  http://localhost/rest/admin/meals/100014: org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument at index 1 in method: public void ru.neustupov.votingforrestaurants.web.meal.AdminMealRestController.update(int,ru.neustupov.votingforrestaurants.model.Meal,int), with 1 error(s): [Field error in object 'meal' on field 'name': rejected value [null]; codes [NotBlank.meal.name,NotBlank.name,NotBlank.java.lang.String,NotBlank]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [meal.name,name]; arguments []; default message [name]]; default message [не может быть пусто]] 
21:20:46.094 WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver.doResolveHandlerMethodException:410 - Failed to invoke @ExceptionHandler method: public ru.neustupov.votingforrestaurants.util.exception.ErrorInfo ru.neustupov.votingforrestaurants.web.ExceptionInfoHandler.bindValidationError(javax.servlet.http.HttpServletRequest,java.lang.Exception)
org.springframework.context.NoSuchMessageException: No message found under code 'error.validationError' for locale 'ru'.
	at org.springframework.context.support.AbstractMessageSource.getMessage(AbstractMessageSource.java:161)
	at ru.neustupov.votingforrestaurants.web.MessageUtil.getMessage(MessageUtil.java:23)
	at ru.neustupov.votingforrestaurants.web.MessageUtil.getMessage(MessageUtil.java:27)
	at ru.neustupov.votingforrestaurants.web.ExceptionInfoHandler.logAndGetErrorInfo(ExceptionInfoHandler.java:83)
	at ru.neustupov.votingforrestaurants.web.ExceptionInfoHandler.bindValidationError(ExceptionInfoHandler.java:60)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:209)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:136)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:102)
	at org.springframework.web.servlet.mvc.method.annotation.ExceptionHandlerExceptionResolver.doResolveHandlerMethodException(ExceptionHandlerExceptionResolver.java:403)
	at org.springframework.web.servlet.handler.AbstractHandlerMethodExceptionResolver.doResolveException(AbstractHandlerMethodExceptionResolver.java:61)
	at org.springframework.web.servlet.handler.AbstractHandlerExceptionResolver.resolveException(AbstractHandlerExceptionResolver.java:140)
	at org.springframework.web.servlet.DispatcherServlet.processHandlerException(DispatcherServlet.java:1255)
	at org.springframework.test.web.servlet.TestDispatcherServlet.processHandlerException(TestDispatcherServlet.java:113)
	at org.springframework.web.servlet.DispatcherServlet.processDispatchResult(DispatcherServlet.java:1062)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1008)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:925)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:978)
	at org.springframework.web.servlet.FrameworkServlet.doPut(FrameworkServlet.java:892)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:663)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:855)
	at org.springframework.test.web.servlet.TestDispatcherServlet.service(TestDispatcherServlet.java:66)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:741)
	at org.springframework.mock.web.MockFilterChain$ServletFilterProxy.doFilter(MockFilterChain.java:166)
	at org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:133)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:320)
	at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:127)
	at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:91)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:119)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:111)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:170)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.authentication.www.BasicAuthenticationFilter.doFilterInternal(BasicAuthenticationFilter.java:215)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:64)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:56)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:105)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:215)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:178)
	at org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:133)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:200)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:133)
	at org.springframework.test.web.servlet.MockMvc.perform(MockMvc.java:166)
	at ru.neustupov.votingforrestaurants.web.meal.AdminMealRestControllerTest.testUpdateInvalid(AdminMealRestControllerTest.java:143)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:50)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:47)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.springframework.test.context.junit4.statements.RunBeforeTestExecutionCallbacks.evaluate(RunBeforeTestExecutionCallbacks.java:73)
	at org.springframework.test.context.junit4.statements.RunAfterTestExecutionCallbacks.evaluate(RunAfterTestExecutionCallbacks.java:83)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.springframework.test.context.junit4.statements.RunBeforeTestMethodCallbacks.evaluate(RunBeforeTestMethodCallbacks.java:75)
	at org.springframework.test.context.junit4.statements.RunAfterTestMethodCallbacks.evaluate(RunAfterTestMethodCallbacks.java:86)
	at org.springframework.test.context.junit4.statements.SpringRepeat.evaluate(SpringRepeat.java:84)
	at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:325)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:251)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:97)
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:290)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288)
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:58)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268)
	at org.springframework.test.context.junit4.statements.RunBeforeTestClassCallbacks.evaluate(RunBeforeTestClassCallbacks.java:61)
	at org.springframework.test.context.junit4.statements.RunAfterTestClassCallbacks.evaluate(RunAfterTestClassCallbacks.java:70)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:363)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.run(SpringJUnit4ClassRunner.java:190)
	at org.apache.maven.surefire.junit4.JUnit4Provider.execute(JUnit4Provider.java:369)
	at org.apache.maven.surefire.junit4.JUnit4Provider.executeWithRerun(JUnit4Provider.java:275)
	at org.apache.maven.surefire.junit4.JUnit4Provider.executeTestSet(JUnit4Provider.java:239)
	at org.apache.maven.surefire.junit4.JUnit4Provider.invoke(JUnit4Provider.java:160)
	at org.apache.maven.surefire.booter.ForkedBooter.invokeProviderInSameClassLoader(ForkedBooter.java:373)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:334)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:119)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:407)

MockHttpServletRequest:
      HTTP Method = PUT
      Request URI = /rest/admin/meals/100014
       Parameters = {}
          Headers = {Content-Type=[application/json;charset=UTF-8], Authorization=[Basic YWRtaW5AeWFuZGV4LnJ1OmFkbWlu]}
             Body = {"id":100014,"price":10}
    Session Attrs = {}

Handler:
             Type = ru.neustupov.votingforrestaurants.web.meal.AdminMealRestController
           Method = public void ru.neustupov.votingforrestaurants.web.meal.AdminMealRestController.update(int,ru.neustupov.votingforrestaurants.model.Meal,int)

Async:
    Async started = false
     Async result = null

Resolved Exception:
             Type = org.springframework.web.bind.MethodArgumentNotValidException

ModelAndView:
        View name = null
             View = null
            Model = null

FlashMap:
       Attributes = null

MockHttpServletResponse:
           Status = 400
    Error message = null
          Headers = {Cache-Control=[no-cache, no-store, max-age=0, must-revalidate], Pragma=[no-cache], Expires=[0], X-XSS-Protection=[1; mode=block], X-Frame-Options=[DENY], X-Content-Type-Options=[nosniff]}
     Content type = null
             Body = 
    Forwarded URL = null
   Redirected URL = null
          Cookies = []
Hibernate: 
    /* select
        generatedAlias0 
    from
        User as generatedAlias0 
    where
        generatedAlias0.email=:param0 */ select
            user0_.id as id1_4_,
            user0_.name as name2_4_,
            user0_.email as email3_4_,
            user0_.enabled as enabled4_4_,
            user0_.password as password5_4_,
            user0_.registered as register6_4_ 
        from
            users user0_ 
        where
            user0_.email=?
Hibernate: 
    select
        roles0_.user_id as user_id1_3_0_,
        roles0_.role as role2_3_0_ 
    from
        user_roles roles0_ 
    where
        roles0_.user_id=?
Hibernate: 
    /* select
        generatedAlias0 
    from
        User as generatedAlias0 
    where
        generatedAlias0.email=:param0 */ select
            user0_.id as id1_4_,
            user0_.name as name2_4_,
            user0_.email as email3_4_,
            user0_.enabled as enabled4_4_,
            user0_.password as password5_4_,
            user0_.registered as register6_4_ 
        from
            users user0_ 
        where
            user0_.email=?
Hibernate: 
    select
        roles0_.user_id as user_id1_3_0_,
        roles0_.role as role2_3_0_ 
    from
        user_roles roles0_ 
    where
        roles0_.user_id=?
21:20:46.112 INFO  r.n.v.web.meal.AbstractMealController.delete:28 - delete meal 1 for menu 100007
Hibernate: 
    /* DELETE 
    FROM
        Meal m 
    WHERE
        m.id=:id 
        AND m.menu.id=:menuId */ delete 
        from
            meals 
        where
            id=? 
            and id_menu=?
21:20:46.115 WARN  r.n.votingforrestaurants.web.ExceptionInfoHandler.logAndGetErrorInfo:80 - DATA_NOT_FOUND at request  http://localhost/rest/admin/meals/1: Not found entity with id=1
21:20:46.115 WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver.doResolveHandlerMethodException:410 - Failed to invoke @ExceptionHandler method: public ru.neustupov.votingforrestaurants.util.exception.ErrorInfo ru.neustupov.votingforrestaurants.web.ExceptionInfoHandler.handleError(javax.servlet.http.HttpServletRequest,ru.neustupov.votingforrestaurants.util.exception.NotFoundException)
org.springframework.context.NoSuchMessageException: No message found under code 'error.dataNotFound' for locale 'ru'.
	at org.springframework.context.support.AbstractMessageSource.getMessage(AbstractMessageSource.java:161)
	at ru.neustupov.votingforrestaurants.web.MessageUtil.getMessage(MessageUtil.java:23)
	at ru.neustupov.votingforrestaurants.web.MessageUtil.getMessage(MessageUtil.java:27)
	at ru.neustupov.votingforrestaurants.web.ExceptionInfoHandler.logAndGetErrorInfo(ExceptionInfoHandler.java:83)
	at ru.neustupov.votingforrestaurants.web.ExceptionInfoHandler.handleError(ExceptionInfoHandler.java:41)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:209)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:136)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:102)
	at org.springframework.web.servlet.mvc.method.annotation.ExceptionHandlerExceptionResolver.doResolveHandlerMethodException(ExceptionHandlerExceptionResolver.java:403)
	at org.springframework.web.servlet.handler.AbstractHandlerMethodExceptionResolver.doResolveException(AbstractHandlerMethodExceptionResolver.java:61)
	at org.springframework.web.servlet.handler.AbstractHandlerExceptionResolver.resolveException(AbstractHandlerExceptionResolver.java:140)
	at org.springframework.web.servlet.DispatcherServlet.processHandlerException(DispatcherServlet.java:1255)
	at org.springframework.test.web.servlet.TestDispatcherServlet.processHandlerException(TestDispatcherServlet.java:113)
	at org.springframework.web.servlet.DispatcherServlet.processDispatchResult(DispatcherServlet.java:1062)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1008)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:925)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:978)
	at org.springframework.web.servlet.FrameworkServlet.doDelete(FrameworkServlet.java:903)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:666)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:855)
	at org.springframework.test.web.servlet.TestDispatcherServlet.service(TestDispatcherServlet.java:66)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:741)
	at org.springframework.mock.web.MockFilterChain$ServletFilterProxy.doFilter(MockFilterChain.java:166)
	at org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:133)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:320)
	at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:127)
	at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:91)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:119)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:111)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:170)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.authentication.www.BasicAuthenticationFilter.doFilterInternal(BasicAuthenticationFilter.java:215)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:64)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:56)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:105)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:215)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:178)
	at org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:133)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:200)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:133)
	at org.springframework.test.web.servlet.MockMvc.perform(MockMvc.java:166)
	at ru.neustupov.votingforrestaurants.web.meal.AdminMealRestControllerTest.testDeleteNotFound(AdminMealRestControllerTest.java:120)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:50)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:47)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.springframework.test.context.junit4.statements.RunBeforeTestExecutionCallbacks.evaluate(RunBeforeTestExecutionCallbacks.java:73)
	at org.springframework.test.context.junit4.statements.RunAfterTestExecutionCallbacks.evaluate(RunAfterTestExecutionCallbacks.java:83)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.springframework.test.context.junit4.statements.RunBeforeTestMethodCallbacks.evaluate(RunBeforeTestMethodCallbacks.java:75)
	at org.springframework.test.context.junit4.statements.RunAfterTestMethodCallbacks.evaluate(RunAfterTestMethodCallbacks.java:86)
	at org.springframework.test.context.junit4.statements.SpringRepeat.evaluate(SpringRepeat.java:84)
	at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:325)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:251)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:97)
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:290)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288)
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:58)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268)
	at org.springframework.test.context.junit4.statements.RunBeforeTestClassCallbacks.evaluate(RunBeforeTestClassCallbacks.java:61)
	at org.springframework.test.context.junit4.statements.RunAfterTestClassCallbacks.evaluate(RunAfterTestClassCallbacks.java:70)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:363)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.run(SpringJUnit4ClassRunner.java:190)
	at org.apache.maven.surefire.junit4.JUnit4Provider.execute(JUnit4Provider.java:369)
	at org.apache.maven.surefire.junit4.JUnit4Provider.executeWithRerun(JUnit4Provider.java:275)
	at org.apache.maven.surefire.junit4.JUnit4Provider.executeTestSet(JUnit4Provider.java:239)
	at org.apache.maven.surefire.junit4.JUnit4Provider.invoke(JUnit4Provider.java:160)
	at org.apache.maven.surefire.booter.ForkedBooter.invokeProviderInSameClassLoader(ForkedBooter.java:373)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:334)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:119)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:407)
21:20:46.116 WARN  o.h.e.j.s.SqlExceptionHelper$StandardWarningHandler.logWarning:217 - SQL Warning Code: -1100, SQLState: 02000
21:20:46.117 WARN  o.h.e.j.s.SqlExceptionHelper$StandardWarningHandler.logWarning:218 - no data
Hibernate: 
    /* select
        generatedAlias0 
    from
        User as generatedAlias0 
    where
        generatedAlias0.email=:param0 */ select
            user0_.id as id1_4_,
            user0_.name as name2_4_,
            user0_.email as email3_4_,
            user0_.enabled as enabled4_4_,
            user0_.password as password5_4_,
            user0_.registered as register6_4_ 
        from
            users user0_ 
        where
            user0_.email=?
Hibernate: 
    select
        roles0_.user_id as user_id1_3_0_,
        roles0_.role as role2_3_0_ 
    from
        user_roles roles0_ 
    where
        roles0_.user_id=?
21:20:46.126 INFO  r.n.v.web.meal.AbstractMealController.get:33 - get meal 100014 for menu 100007
Hibernate: 
    select
        meal0_.id as id1_0_0_,
        meal0_.name as name2_0_0_,
        meal0_.id_menu as id_menu4_0_0_,
        meal0_.price as price3_0_0_ 
    from
        meals meal0_ 
    where
        meal0_.id=?

MockHttpServletRequest:
      HTTP Method = GET
      Request URI = /rest/admin/meals/100014
       Parameters = {menuId=[100007]}
          Headers = {Authorization=[Basic YWRtaW5AeWFuZGV4LnJ1OmFkbWlu]}
             Body = null
    Session Attrs = {}

Handler:
             Type = ru.neustupov.votingforrestaurants.web.meal.AdminMealRestController
           Method = public ru.neustupov.votingforrestaurants.model.Meal ru.neustupov.votingforrestaurants.web.meal.AdminMealRestController.get(int,int)

Async:
    Async started = false
     Async result = null

Resolved Exception:
             Type = null

ModelAndView:
        View name = null
             View = null
            Model = null

FlashMap:
       Attributes = null

MockHttpServletResponse:
           Status = 200
    Error message = null
          Headers = {Cache-Control=[no-cache, no-store, max-age=0, must-revalidate], Pragma=[no-cache], Expires=[0], X-XSS-Protection=[1; mode=block], X-Frame-Options=[DENY], X-Content-Type-Options=[nosniff], Content-Type=[application/json;charset=UTF-8]}
     Content type = application/json;charset=UTF-8
             Body = {"id":100014,"name":"Apple","price":5,"menu":null}
    Forwarded URL = null
   Redirected URL = null
          Cookies = []
Hibernate: 
    /* select
        generatedAlias0 
    from
        User as generatedAlias0 
    where
        generatedAlias0.email=:param0 */ select
            user0_.id as id1_4_,
            user0_.name as name2_4_,
            user0_.email as email3_4_,
            user0_.enabled as enabled4_4_,
            user0_.password as password5_4_,
            user0_.registered as register6_4_ 
        from
            users user0_ 
        where
            user0_.email=?
Hibernate: 
    select
        roles0_.user_id as user_id1_3_0_,
        roles0_.role as role2_3_0_ 
    from
        user_roles roles0_ 
    where
        roles0_.user_id=?
21:20:46.140 INFO  r.n.v.web.meal.AbstractMealController.get:33 - get meal 1 for menu 100007
Hibernate: 
    select
        meal0_.id as id1_0_0_,
        meal0_.name as name2_0_0_,
        meal0_.id_menu as id_menu4_0_0_,
        meal0_.price as price3_0_0_ 
    from
        meals meal0_ 
    where
        meal0_.id=?
21:20:46.142 WARN  r.n.votingforrestaurants.web.ExceptionInfoHandler.logAndGetErrorInfo:80 - DATA_NOT_FOUND at request  http://localhost/rest/admin/meals/1: Not found entity with id=1
21:20:46.143 WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver.doResolveHandlerMethodException:410 - Failed to invoke @ExceptionHandler method: public ru.neustupov.votingforrestaurants.util.exception.ErrorInfo ru.neustupov.votingforrestaurants.web.ExceptionInfoHandler.handleError(javax.servlet.http.HttpServletRequest,ru.neustupov.votingforrestaurants.util.exception.NotFoundException)
org.springframework.context.NoSuchMessageException: No message found under code 'error.dataNotFound' for locale 'ru'.
	at org.springframework.context.support.AbstractMessageSource.getMessage(AbstractMessageSource.java:161)
	at ru.neustupov.votingforrestaurants.web.MessageUtil.getMessage(MessageUtil.java:23)
	at ru.neustupov.votingforrestaurants.web.MessageUtil.getMessage(MessageUtil.java:27)
	at ru.neustupov.votingforrestaurants.web.ExceptionInfoHandler.logAndGetErrorInfo(ExceptionInfoHandler.java:83)
	at ru.neustupov.votingforrestaurants.web.ExceptionInfoHandler.handleError(ExceptionInfoHandler.java:41)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:209)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:136)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:102)
	at org.springframework.web.servlet.mvc.method.annotation.ExceptionHandlerExceptionResolver.doResolveHandlerMethodException(ExceptionHandlerExceptionResolver.java:403)
	at org.springframework.web.servlet.handler.AbstractHandlerMethodExceptionResolver.doResolveException(AbstractHandlerMethodExceptionResolver.java:61)
	at org.springframework.web.servlet.handler.AbstractHandlerExceptionResolver.resolveException(AbstractHandlerExceptionResolver.java:140)
	at org.springframework.web.servlet.DispatcherServlet.processHandlerException(DispatcherServlet.java:1255)
	at org.springframework.test.web.servlet.TestDispatcherServlet.processHandlerException(TestDispatcherServlet.java:113)
	at org.springframework.web.servlet.DispatcherServlet.processDispatchResult(DispatcherServlet.java:1062)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1008)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:925)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:978)
	at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:870)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:634)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:855)
	at org.springframework.test.web.servlet.TestDispatcherServlet.service(TestDispatcherServlet.java:66)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:741)
	at org.springframework.mock.web.MockFilterChain$ServletFilterProxy.doFilter(MockFilterChain.java:166)
	at org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:133)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:320)
	at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:127)
	at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:91)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:119)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:111)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:170)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.authentication.www.BasicAuthenticationFilter.doFilterInternal(BasicAuthenticationFilter.java:215)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:64)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:56)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:105)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:215)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:178)
	at org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:133)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:200)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:133)
	at org.springframework.test.web.servlet.MockMvc.perform(MockMvc.java:166)
	at ru.neustupov.votingforrestaurants.web.meal.AdminMealRestControllerTest.testGetNotFound(AdminMealRestControllerTest.java:111)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:50)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:47)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.springframework.test.context.junit4.statements.RunBeforeTestExecutionCallbacks.evaluate(RunBeforeTestExecutionCallbacks.java:73)
	at org.springframework.test.context.junit4.statements.RunAfterTestExecutionCallbacks.evaluate(RunAfterTestExecutionCallbacks.java:83)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.springframework.test.context.junit4.statements.RunBeforeTestMethodCallbacks.evaluate(RunBeforeTestMethodCallbacks.java:75)
	at org.springframework.test.context.junit4.statements.RunAfterTestMethodCallbacks.evaluate(RunAfterTestMethodCallbacks.java:86)
	at org.springframework.test.context.junit4.statements.SpringRepeat.evaluate(SpringRepeat.java:84)
	at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:325)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:251)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:97)
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:290)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288)
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:58)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268)
	at org.springframework.test.context.junit4.statements.RunBeforeTestClassCallbacks.evaluate(RunBeforeTestClassCallbacks.java:61)
	at org.springframework.test.context.junit4.statements.RunAfterTestClassCallbacks.evaluate(RunAfterTestClassCallbacks.java:70)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:363)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.run(SpringJUnit4ClassRunner.java:190)
	at org.apache.maven.surefire.junit4.JUnit4Provider.execute(JUnit4Provider.java:369)
	at org.apache.maven.surefire.junit4.JUnit4Provider.executeWithRerun(JUnit4Provider.java:275)
	at org.apache.maven.surefire.junit4.JUnit4Provider.executeTestSet(JUnit4Provider.java:239)
	at org.apache.maven.surefire.junit4.JUnit4Provider.invoke(JUnit4Provider.java:160)
	at org.apache.maven.surefire.booter.ForkedBooter.invokeProviderInSameClassLoader(ForkedBooter.java:373)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:334)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:119)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:407)
Hibernate: 
    /* select
        generatedAlias0 
    from
        User as generatedAlias0 
    where
        generatedAlias0.email=:param0 */ select
            user0_.id as id1_4_,
            user0_.name as name2_4_,
            user0_.email as email3_4_,
            user0_.enabled as enabled4_4_,
            user0_.password as password5_4_,
            user0_.registered as register6_4_ 
        from
            users user0_ 
        where
            user0_.email=?
Hibernate: 
    select
        roles0_.user_id as user_id1_3_0_,
        roles0_.role as role2_3_0_ 
    from
        user_roles roles0_ 
    where
        roles0_.user_id=?
21:20:46.153 WARN  r.n.votingforrestaurants.web.ExceptionInfoHandler.logAndGetErrorInfo:80 - VALIDATION_ERROR at request  http://localhost/rest/admin/meals/100014: org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument at index 1 in method: public void ru.neustupov.votingforrestaurants.web.meal.AdminMealRestController.update(int,ru.neustupov.votingforrestaurants.model.Meal,int), with 1 error(s): [Field error in object 'meal' on field 'name': rejected value [<script>alert(123)</script>]; codes [SafeHtml.meal.name,SafeHtml.name,SafeHtml.java.lang.String,SafeHtml]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [meal.name,name]; arguments []; default message [name],[Ljava.lang.String;@340fc1aa,[Lorg.hibernate.validator.constraints.SafeHtml$Tag;@34a33343,org.springframework.validation.beanvalidation.SpringValidatorAdapter$ResolvableAttribute@644e6a8e,RELAXED]; default message [может содержать небезопасный html контент]] 
21:20:46.154 WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver.doResolveHandlerMethodException:410 - Failed to invoke @ExceptionHandler method: public ru.neustupov.votingforrestaurants.util.exception.ErrorInfo ru.neustupov.votingforrestaurants.web.ExceptionInfoHandler.bindValidationError(javax.servlet.http.HttpServletRequest,java.lang.Exception)
org.springframework.context.NoSuchMessageException: No message found under code 'error.validationError' for locale 'ru'.
	at org.springframework.context.support.AbstractMessageSource.getMessage(AbstractMessageSource.java:161)
	at ru.neustupov.votingforrestaurants.web.MessageUtil.getMessage(MessageUtil.java:23)
	at ru.neustupov.votingforrestaurants.web.MessageUtil.getMessage(MessageUtil.java:27)
	at ru.neustupov.votingforrestaurants.web.ExceptionInfoHandler.logAndGetErrorInfo(ExceptionInfoHandler.java:83)
	at ru.neustupov.votingforrestaurants.web.ExceptionInfoHandler.bindValidationError(ExceptionInfoHandler.java:60)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:209)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:136)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:102)
	at org.springframework.web.servlet.mvc.method.annotation.ExceptionHandlerExceptionResolver.doResolveHandlerMethodException(ExceptionHandlerExceptionResolver.java:403)
	at org.springframework.web.servlet.handler.AbstractHandlerMethodExceptionResolver.doResolveException(AbstractHandlerMethodExceptionResolver.java:61)
	at org.springframework.web.servlet.handler.AbstractHandlerExceptionResolver.resolveException(AbstractHandlerExceptionResolver.java:140)
	at org.springframework.web.servlet.DispatcherServlet.processHandlerException(DispatcherServlet.java:1255)
	at org.springframework.test.web.servlet.TestDispatcherServlet.processHandlerException(TestDispatcherServlet.java:113)
	at org.springframework.web.servlet.DispatcherServlet.processDispatchResult(DispatcherServlet.java:1062)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1008)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:925)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:978)
	at org.springframework.web.servlet.FrameworkServlet.doPut(FrameworkServlet.java:892)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:663)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:855)
	at org.springframework.test.web.servlet.TestDispatcherServlet.service(TestDispatcherServlet.java:66)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:741)
	at org.springframework.mock.web.MockFilterChain$ServletFilterProxy.doFilter(MockFilterChain.java:166)
	at org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:133)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:320)
	at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:127)
	at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:91)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:119)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:111)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:170)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.authentication.www.BasicAuthenticationFilter.doFilterInternal(BasicAuthenticationFilter.java:215)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:64)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:56)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:105)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:215)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:178)
	at org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:133)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:200)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:133)
	at org.springframework.test.web.servlet.MockMvc.perform(MockMvc.java:166)
	at ru.neustupov.votingforrestaurants.web.meal.AdminMealRestControllerTest.testUpdateHtmlUnsafe(AdminMealRestControllerTest.java:156)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:50)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:47)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.springframework.test.context.junit4.statements.RunBeforeTestExecutionCallbacks.evaluate(RunBeforeTestExecutionCallbacks.java:73)
	at org.springframework.test.context.junit4.statements.RunAfterTestExecutionCallbacks.evaluate(RunAfterTestExecutionCallbacks.java:83)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.springframework.test.context.junit4.statements.RunBeforeTestMethodCallbacks.evaluate(RunBeforeTestMethodCallbacks.java:75)
	at org.springframework.test.context.junit4.statements.RunAfterTestMethodCallbacks.evaluate(RunAfterTestMethodCallbacks.java:86)
	at org.springframework.test.context.junit4.statements.SpringRepeat.evaluate(SpringRepeat.java:84)
	at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:325)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:251)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:97)
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:290)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288)
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:58)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268)
	at org.springframework.test.context.junit4.statements.RunBeforeTestClassCallbacks.evaluate(RunBeforeTestClassCallbacks.java:61)
	at org.springframework.test.context.junit4.statements.RunAfterTestClassCallbacks.evaluate(RunAfterTestClassCallbacks.java:70)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:363)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.run(SpringJUnit4ClassRunner.java:190)
	at org.apache.maven.surefire.junit4.JUnit4Provider.execute(JUnit4Provider.java:369)
	at org.apache.maven.surefire.junit4.JUnit4Provider.executeWithRerun(JUnit4Provider.java:275)
	at org.apache.maven.surefire.junit4.JUnit4Provider.executeTestSet(JUnit4Provider.java:239)
	at org.apache.maven.surefire.junit4.JUnit4Provider.invoke(JUnit4Provider.java:160)
	at org.apache.maven.surefire.booter.ForkedBooter.invokeProviderInSameClassLoader(ForkedBooter.java:373)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:334)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:119)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:407)

MockHttpServletRequest:
      HTTP Method = PUT
      Request URI = /rest/admin/meals/100014
       Parameters = {menuId=[100007]}
          Headers = {Content-Type=[application/json;charset=UTF-8], Authorization=[Basic YWRtaW5AeWFuZGV4LnJ1OmFkbWlu]}
             Body = {"id":100014,"name":"<script>alert(123)</script>","price":10}
    Session Attrs = {}

Handler:
             Type = ru.neustupov.votingforrestaurants.web.meal.AdminMealRestController
           Method = public void ru.neustupov.votingforrestaurants.web.meal.AdminMealRestController.update(int,ru.neustupov.votingforrestaurants.model.Meal,int)

Async:
    Async started = false
     Async result = null

Resolved Exception:
             Type = org.springframework.web.bind.MethodArgumentNotValidException

ModelAndView:
        View name = null
             View = null
            Model = null

FlashMap:
       Attributes = null

MockHttpServletResponse:
           Status = 400
    Error message = null
          Headers = {Cache-Control=[no-cache, no-store, max-age=0, must-revalidate], Pragma=[no-cache], Expires=[0], X-XSS-Protection=[1; mode=block], X-Frame-Options=[DENY], X-Content-Type-Options=[nosniff]}
     Content type = null
             Body = 
    Forwarded URL = null
   Redirected URL = null
          Cookies = []
Hibernate: 
    /* select
        generatedAlias0 
    from
        User as generatedAlias0 
    where
        generatedAlias0.email=:param0 */ select
            user0_.id as id1_4_,
            user0_.name as name2_4_,
            user0_.email as email3_4_,
            user0_.enabled as enabled4_4_,
            user0_.password as password5_4_,
            user0_.registered as register6_4_ 
        from
            users user0_ 
        where
            user0_.email=?
Hibernate: 
    select
        roles0_.user_id as user_id1_3_0_,
        roles0_.role as role2_3_0_ 
    from
        user_roles roles0_ 
    where
        roles0_.user_id=?
21:20:46.165 INFO  r.n.v.web.meal.AbstractMealController.create:23 - create Entity ru.neustupov.votingforrestaurants.model.Meal (null, 'Potatoes') for menu 100007
Hibernate: 
    call next value for global_seq
Hibernate: 
    /* insert ru.neustupov.votingforrestaurants.model.Meal
        */ insert 
        into
            meals
            (name, id_menu, price, id) 
        values
            (?, ?, ?, ?)
Hibernate: 
    /* SELECT
        m 
    FROM
        Meal m 
    WHERE
        m.menu.id=:menuId */ select
            meal0_.id as id1_0_,
            meal0_.name as name2_0_,
            meal0_.id_menu as id_menu4_0_,
            meal0_.price as price3_0_ 
        from
            meals meal0_ 
        where
            meal0_.id_menu=?
Hibernate: 
    /* select
        generatedAlias0 
    from
        User as generatedAlias0 
    where
        generatedAlias0.email=:param0 */ select
            user0_.id as id1_4_,
            user0_.name as name2_4_,
            user0_.email as email3_4_,
            user0_.enabled as enabled4_4_,
            user0_.password as password5_4_,
            user0_.registered as register6_4_ 
        from
            users user0_ 
        where
            user0_.email=?
Hibernate: 
    select
        roles0_.user_id as user_id1_3_0_,
        roles0_.role as role2_3_0_ 
    from
        user_roles roles0_ 
    where
        roles0_.user_id=?
21:20:46.180 INFO  r.n.v.web.meal.AbstractMealController.delete:28 - delete meal 100014 for menu 100007
Hibernate: 
    /* DELETE 
    FROM
        Meal m 
    WHERE
        m.id=:id 
        AND m.menu.id=:menuId */ delete 
        from
            meals 
        where
            id=? 
            and id_menu=?

MockHttpServletRequest:
      HTTP Method = DELETE
      Request URI = /rest/admin/meals/100014
       Parameters = {menuId=[100007]}
          Headers = {Authorization=[Basic YWRtaW5AeWFuZGV4LnJ1OmFkbWlu]}
             Body = null
    Session Attrs = {}

Handler:
             Type = ru.neustupov.votingforrestaurants.web.meal.AdminMealRestController
           Method = public void ru.neustupov.votingforrestaurants.web.meal.AdminMealRestController.delete(int,int)

Async:
    Async started = false
     Async result = null

Resolved Exception:
             Type = null

ModelAndView:
        View name = null
             View = null
            Model = null

FlashMap:
       Attributes = null

MockHttpServletResponse:
           Status = 204
    Error message = null
          Headers = {Cache-Control=[no-cache, no-store, max-age=0, must-revalidate], Pragma=[no-cache], Expires=[0], X-XSS-Protection=[1; mode=block], X-Frame-Options=[DENY], X-Content-Type-Options=[nosniff]}
     Content type = null
             Body = 
    Forwarded URL = null
   Redirected URL = null
          Cookies = []
Hibernate: 
    /* SELECT
        m 
    FROM
        Meal m 
    WHERE
        m.menu.id=:menuId */ select
            meal0_.id as id1_0_,
            meal0_.name as name2_0_,
            meal0_.id_menu as id_menu4_0_,
            meal0_.price as price3_0_ 
        from
            meals meal0_ 
        where
            meal0_.id_menu=?
Hibernate: 
    /* select
        generatedAlias0 
    from
        User as generatedAlias0 
    where
        generatedAlias0.email=:param0 */ select
            user0_.id as id1_4_,
            user0_.name as name2_4_,
            user0_.email as email3_4_,
            user0_.enabled as enabled4_4_,
            user0_.password as password5_4_,
            user0_.registered as register6_4_ 
        from
            users user0_ 
        where
            user0_.email=?
Hibernate: 
    select
        roles0_.user_id as user_id1_3_0_,
        roles0_.role as role2_3_0_ 
    from
        user_roles roles0_ 
    where
        roles0_.user_id=?
21:20:46.195 INFO  r.n.v.web.meal.AbstractMealController.getAll:50 - getAll meals for menu 100007
Hibernate: 
    /* SELECT
        m 
    FROM
        Meal m 
    WHERE
        m.menu.id=:menuId */ select
            meal0_.id as id1_0_,
            meal0_.name as name2_0_,
            meal0_.id_menu as id_menu4_0_,
            meal0_.price as price3_0_ 
        from
            meals meal0_ 
        where
            meal0_.id_menu=?
[{"id":100014,"name":"Apple","price":5,"menu":null},{"id":100019,"name":"Bottle of water","price":50,"menu":null}]
Hibernate: 
    /* select
        generatedAlias0 
    from
        User as generatedAlias0 
    where
        generatedAlias0.email=:param0 */ select
            user0_.id as id1_4_,
            user0_.name as name2_4_,
            user0_.email as email3_4_,
            user0_.enabled as enabled4_4_,
            user0_.password as password5_4_,
            user0_.registered as register6_4_ 
        from
            users user0_ 
        where
            user0_.email=?
Hibernate: 
    select
        roles0_.user_id as user_id1_3_0_,
        roles0_.role as role2_3_0_ 
    from
        user_roles roles0_ 
    where
        roles0_.user_id=?
21:20:46.213 INFO  r.n.v.web.meal.AbstractMealController.update:39 - update Entity ru.neustupov.votingforrestaurants.model.Meal (100014, 'UpdatedName') with id = 100014 for menu 100007
Hibernate: 
    select
        meal0_.id as id1_0_0_,
        meal0_.name as name2_0_0_,
        meal0_.id_menu as id_menu4_0_0_,
        meal0_.price as price3_0_0_ 
    from
        meals meal0_ 
    where
        meal0_.id=?
Hibernate: 
    /* select
        generatedAlias0 
    from
        User as generatedAlias0 
    where
        generatedAlias0.email=:param0 */ select
            user0_.id as id1_4_,
            user0_.name as name2_4_,
            user0_.email as email3_4_,
            user0_.enabled as enabled4_4_,
            user0_.password as password5_4_,
            user0_.registered as register6_4_ 
        from
            users user0_ 
        where
            user0_.email=?
Hibernate: 
    select
        roles0_.user_id as user_id1_3_0_,
        roles0_.role as role2_3_0_ 
    from
        user_roles roles0_ 
    where
        roles0_.user_id=?
21:20:46.227 WARN  r.n.votingforrestaurants.web.ExceptionInfoHandler.logAndGetErrorInfo:80 - VALIDATION_ERROR at request  http://localhost/rest/admin/meals/: org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument at index 0 in method: public org.springframework.http.ResponseEntity<ru.neustupov.votingforrestaurants.model.Meal> ru.neustupov.votingforrestaurants.web.meal.AdminMealRestController.createWithLocation(ru.neustupov.votingforrestaurants.model.Meal,int), with 1 error(s): [Field error in object 'meal' on field 'price': rejected value [null]; codes [NotNull.meal.price,NotNull.price,NotNull.java.lang.Integer,NotNull]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [meal.price,price]; arguments []; default message [price]]; default message [должно быть задано]] 
21:20:46.228 WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver.doResolveHandlerMethodException:410 - Failed to invoke @ExceptionHandler method: public ru.neustupov.votingforrestaurants.util.exception.ErrorInfo ru.neustupov.votingforrestaurants.web.ExceptionInfoHandler.bindValidationError(javax.servlet.http.HttpServletRequest,java.lang.Exception)
org.springframework.context.NoSuchMessageException: No message found under code 'error.validationError' for locale 'ru'.
	at org.springframework.context.support.AbstractMessageSource.getMessage(AbstractMessageSource.java:161)
	at ru.neustupov.votingforrestaurants.web.MessageUtil.getMessage(MessageUtil.java:23)
	at ru.neustupov.votingforrestaurants.web.MessageUtil.getMessage(MessageUtil.java:27)
	at ru.neustupov.votingforrestaurants.web.ExceptionInfoHandler.logAndGetErrorInfo(ExceptionInfoHandler.java:83)
	at ru.neustupov.votingforrestaurants.web.ExceptionInfoHandler.bindValidationError(ExceptionInfoHandler.java:60)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:209)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:136)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:102)
	at org.springframework.web.servlet.mvc.method.annotation.ExceptionHandlerExceptionResolver.doResolveHandlerMethodException(ExceptionHandlerExceptionResolver.java:403)
	at org.springframework.web.servlet.handler.AbstractHandlerMethodExceptionResolver.doResolveException(AbstractHandlerMethodExceptionResolver.java:61)
	at org.springframework.web.servlet.handler.AbstractHandlerExceptionResolver.resolveException(AbstractHandlerExceptionResolver.java:140)
	at org.springframework.web.servlet.DispatcherServlet.processHandlerException(DispatcherServlet.java:1255)
	at org.springframework.test.web.servlet.TestDispatcherServlet.processHandlerException(TestDispatcherServlet.java:113)
	at org.springframework.web.servlet.DispatcherServlet.processDispatchResult(DispatcherServlet.java:1062)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1008)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:925)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:978)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:881)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:660)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:855)
	at org.springframework.test.web.servlet.TestDispatcherServlet.service(TestDispatcherServlet.java:66)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:741)
	at org.springframework.mock.web.MockFilterChain$ServletFilterProxy.doFilter(MockFilterChain.java:166)
	at org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:133)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:320)
	at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:127)
	at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:91)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:119)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:111)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:170)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.authentication.www.BasicAuthenticationFilter.doFilterInternal(BasicAuthenticationFilter.java:215)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:64)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:56)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:105)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:215)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:178)
	at org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:133)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:200)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:133)
	at org.springframework.test.web.servlet.MockMvc.perform(MockMvc.java:166)
	at ru.neustupov.votingforrestaurants.web.meal.AdminMealRestControllerTest.testCreateInvalid(AdminMealRestControllerTest.java:130)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:50)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:47)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.springframework.test.context.junit4.statements.RunBeforeTestExecutionCallbacks.evaluate(RunBeforeTestExecutionCallbacks.java:73)
	at org.springframework.test.context.junit4.statements.RunAfterTestExecutionCallbacks.evaluate(RunAfterTestExecutionCallbacks.java:83)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.springframework.test.context.junit4.statements.RunBeforeTestMethodCallbacks.evaluate(RunBeforeTestMethodCallbacks.java:75)
	at org.springframework.test.context.junit4.statements.RunAfterTestMethodCallbacks.evaluate(RunAfterTestMethodCallbacks.java:86)
	at org.springframework.test.context.junit4.statements.SpringRepeat.evaluate(SpringRepeat.java:84)
	at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:325)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:251)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:97)
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:290)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288)
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:58)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268)
	at org.springframework.test.context.junit4.statements.RunBeforeTestClassCallbacks.evaluate(RunBeforeTestClassCallbacks.java:61)
	at org.springframework.test.context.junit4.statements.RunAfterTestClassCallbacks.evaluate(RunAfterTestClassCallbacks.java:70)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:363)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.run(SpringJUnit4ClassRunner.java:190)
	at org.apache.maven.surefire.junit4.JUnit4Provider.execute(JUnit4Provider.java:369)
	at org.apache.maven.surefire.junit4.JUnit4Provider.executeWithRerun(JUnit4Provider.java:275)
	at org.apache.maven.surefire.junit4.JUnit4Provider.executeTestSet(JUnit4Provider.java:239)
	at org.apache.maven.surefire.junit4.JUnit4Provider.invoke(JUnit4Provider.java:160)
	at org.apache.maven.surefire.booter.ForkedBooter.invokeProviderInSameClassLoader(ForkedBooter.java:373)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:334)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:119)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:407)

MockHttpServletRequest:
      HTTP Method = POST
      Request URI = /rest/admin/meals/
       Parameters = {}
          Headers = {Content-Type=[application/json;charset=UTF-8], Authorization=[Basic YWRtaW5AeWFuZGV4LnJ1OmFkbWlu]}
             Body = {"name":"Dummy"}
    Session Attrs = {}

Handler:
             Type = ru.neustupov.votingforrestaurants.web.meal.AdminMealRestController
           Method = public org.springframework.http.ResponseEntity<ru.neustupov.votingforrestaurants.model.Meal> ru.neustupov.votingforrestaurants.web.meal.AdminMealRestController.createWithLocation(ru.neustupov.votingforrestaurants.model.Meal,int)

Async:
    Async started = false
     Async result = null

Resolved Exception:
             Type = org.springframework.web.bind.MethodArgumentNotValidException

ModelAndView:
        View name = null
             View = null
            Model = null

FlashMap:
       Attributes = null

MockHttpServletResponse:
           Status = 400
    Error message = null
          Headers = {Cache-Control=[no-cache, no-store, max-age=0, must-revalidate], Pragma=[no-cache], Expires=[0], X-XSS-Protection=[1; mode=block], X-Frame-Options=[DENY], X-Content-Type-Options=[nosniff]}
     Content type = null
             Body = 
    Forwarded URL = null
   Redirected URL = null
          Cookies = []
[ERROR] Tests run: 12, Failures: 3, Errors: 2, Skipped: 0, Time elapsed: 0.181 s <<< FAILURE! - in ru.neustupov.votingforrestaurants.web.meal.AdminMealRestControllerTest
[ERROR] testUpdateInvalid(ru.neustupov.votingforrestaurants.web.meal.AdminMealRestControllerTest)  Time elapsed: 0.023 s  <<< FAILURE!
java.lang.AssertionError: Status expected:<422> but was:<400>
	at ru.neustupov.votingforrestaurants.web.meal.AdminMealRestControllerTest.testUpdateInvalid(AdminMealRestControllerTest.java:148)

[ERROR] testDeleteNotFound(ru.neustupov.votingforrestaurants.web.meal.AdminMealRestControllerTest)  Time elapsed: 0.011 s  <<< ERROR!
org.springframework.web.util.NestedServletException: Request processing failed; nested exception is Not found entity with id=1
	at ru.neustupov.votingforrestaurants.web.meal.AdminMealRestControllerTest.testDeleteNotFound(AdminMealRestControllerTest.java:120)
Caused by: ru.neustupov.votingforrestaurants.util.exception.NotFoundException: Not found entity with id=1
	at ru.neustupov.votingforrestaurants.web.meal.AdminMealRestControllerTest.testDeleteNotFound(AdminMealRestControllerTest.java:120)

[ERROR] testGetNotFound(ru.neustupov.votingforrestaurants.web.meal.AdminMealRestControllerTest)  Time elapsed: 0.009 s  <<< ERROR!
org.springframework.web.util.NestedServletException: Request processing failed; nested exception is Not found entity with id=1
	at ru.neustupov.votingforrestaurants.web.meal.AdminMealRestControllerTest.testGetNotFound(AdminMealRestControllerTest.java:111)
Caused by: ru.neustupov.votingforrestaurants.util.exception.NotFoundException: Not found entity with id=1
	at ru.neustupov.votingforrestaurants.web.meal.AdminMealRestControllerTest.testGetNotFound(AdminMealRestControllerTest.java:111)

[ERROR] testUpdateHtmlUnsafe(ru.neustupov.votingforrestaurants.web.meal.AdminMealRestControllerTest)  Time elapsed: 0.01 s  <<< FAILURE!
java.lang.AssertionError: Status expected:<422> but was:<400>
	at ru.neustupov.votingforrestaurants.web.meal.AdminMealRestControllerTest.testUpdateHtmlUnsafe(AdminMealRestControllerTest.java:162)

[ERROR] testCreateInvalid(ru.neustupov.votingforrestaurants.web.meal.AdminMealRestControllerTest)  Time elapsed: 0.012 s  <<< FAILURE!
java.lang.AssertionError: Status expected:<422> but was:<400>
	at ru.neustupov.votingforrestaurants.web.meal.AdminMealRestControllerTest.testCreateInvalid(AdminMealRestControllerTest.java:135)

[INFO] Running ru.neustupov.votingforrestaurants.web.ResourceControllerTest

MockHttpServletRequest:
      HTTP Method = GET
      Request URI = /resources/css/style.css
       Parameters = {}
          Headers = {}
             Body = null
    Session Attrs = {}

Handler:
             Type = org.springframework.web.servlet.resource.ResourceHttpRequestHandler

Async:
    Async started = false
     Async result = null

Resolved Exception:
             Type = null

ModelAndView:
        View name = null
             View = null
            Model = null

FlashMap:
       Attributes = null

MockHttpServletResponse:
           Status = 200
    Error message = null
          Headers = {Last-Modified=[Mon, 21 May 2018 19:20:14 GMT], Content-Length=[807], Content-Type=[text/css;charset=UTF-8], Accept-Ranges=[bytes]}
     Content type = text/css
             Body = .disabled {
    opacity: 0.3;
}

.footer {
    padding-bottom: 15px;
}

.fa {
    cursor: pointer;
}

/*https://getbootstrap.com/docs/4.0/examples/sticky-footer/sticky-footer.css*/
html {
    position: relative;
    min-height: 100%;
}
body {
    margin-bottom: 60px; /* Margin bottom by footer height */
}
.footer {
    position: absolute;
    bottom: 0;
    width: 100%;
    height: 60px; /* Set the fixed height of the footer here */
    line-height: 60px; /* Vertically center the text there */
    background-color: #f5f5f5;
}

.error, .message {
    padding: 10px;
    border-radius: 4px;
    font-size: 16px;
}

.error {
    color: #a94442;
    background-color: #f2dede;
    border: 1px solid #ebccd1;
}

.message {
    color: #2f9635;
    background-color: #c6fbc2;
    border: 1px solid #9feba6;
}
    Forwarded URL = null
   Redirected URL = null
          Cookies = []
[INFO] Tests run: 1, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.047 s - in ru.neustupov.votingforrestaurants.web.ResourceControllerTest
[INFO] Running ru.neustupov.votingforrestaurants.web.MealControllerTest

MockHttpServletRequest:
      HTTP Method = GET
      Request URI = /meals
       Parameters = {menuId=[100007]}
          Headers = {Authorization=[Basic YWRtaW5AeWFuZGV4LnJ1OmFkbWlu]}
             Body = null
    Session Attrs = {SPRING_SECURITY_SAVED_REQUEST=DefaultSavedRequest[http://localhost/meals]}

Handler:
             Type = null

Async:
    Async started = false
     Async result = null

Resolved Exception:
             Type = null

ModelAndView:
        View name = null
             View = null
            Model = null

FlashMap:
       Attributes = null

MockHttpServletResponse:
           Status = 302
    Error message = null
          Headers = {Cache-Control=[no-cache, no-store, max-age=0, must-revalidate], Pragma=[no-cache], Expires=[0], X-XSS-Protection=[1; mode=block], X-Frame-Options=[DENY], X-Content-Type-Options=[nosniff], Location=[http://localhost/login]}
     Content type = null
             Body = 
    Forwarded URL = null
   Redirected URL = http://localhost/login
          Cookies = []

MockHttpServletRequest:
      HTTP Method = GET
      Request URI = /meals/update
       Parameters = {mealId=[100014], menuId=[100007], restId=[100002]}
          Headers = {Authorization=[Basic YWRtaW5AeWFuZGV4LnJ1OmFkbWlu]}
             Body = null
    Session Attrs = {SPRING_SECURITY_SAVED_REQUEST=DefaultSavedRequest[http://localhost/meals/update]}

Handler:
             Type = null

Async:
    Async started = false
     Async result = null

Resolved Exception:
             Type = null

ModelAndView:
        View name = null
             View = null
            Model = null

FlashMap:
       Attributes = null

MockHttpServletResponse:
           Status = 302
    Error message = null
          Headers = {Cache-Control=[no-cache, no-store, max-age=0, must-revalidate], Pragma=[no-cache], Expires=[0], X-XSS-Protection=[1; mode=block], X-Frame-Options=[DENY], X-Content-Type-Options=[nosniff], Location=[http://localhost/login]}
     Content type = null
             Body = 
    Forwarded URL = null
   Redirected URL = http://localhost/login
          Cookies = []
[WARNING] Tests run: 6, Failures: 0, Errors: 0, Skipped: 4, Time elapsed: 0.032 s - in ru.neustupov.votingforrestaurants.web.MealControllerTest
[INFO] Running ru.neustupov.votingforrestaurants.web.RootControllerTest
Hibernate: 
    /* select
        generatedAlias0 
    from
        User as generatedAlias0 
    where
        generatedAlias0.email=:param0 */ select
            user0_.id as id1_4_,
            user0_.name as name2_4_,
            user0_.email as email3_4_,
            user0_.enabled as enabled4_4_,
            user0_.password as password5_4_,
            user0_.registered as register6_4_ 
        from
            users user0_ 
        where
            user0_.email=?
Hibernate: 
    select
        roles0_.user_id as user_id1_3_0_,
        roles0_.role as role2_3_0_ 
    from
        user_roles roles0_ 
    where
        roles0_.user_id=?

MockHttpServletRequest:
      HTTP Method = GET
      Request URI = /users
       Parameters = {}
          Headers = {}
             Body = null
    Session Attrs = {SPRING_SECURITY_CONTEXT=org.springframework.security.core.context.SecurityContextImpl@7cada800: Authentication: org.springframework.security.authentication.UsernamePasswordAuthenticationToken@7cada800: Principal: UserTo{id=100001, name='Admin', email='admin@yandex.ru'}; Credentials: [PROTECTED]; Authenticated: true; Details: null; Granted Authorities: ROLE_ADMIN, ROLE_USER}

Handler:
             Type = ru.neustupov.votingforrestaurants.web.RootController
           Method = public java.lang.String ru.neustupov.votingforrestaurants.web.RootController.users()

Async:
    Async started = false
     Async result = null

Resolved Exception:
             Type = null

ModelAndView:
        View name = users
             View = null
            Model = null

FlashMap:
       Attributes = null

MockHttpServletResponse:
           Status = 200
    Error message = null
          Headers = {Cache-Control=[no-cache, no-store, max-age=0, must-revalidate], Pragma=[no-cache], Expires=[0], X-XSS-Protection=[1; mode=block], X-Frame-Options=[DENY], X-Content-Type-Options=[nosniff], Accept-Language=[ru]}
     Content type = null
             Body = 
    Forwarded URL = /WEB-INF/jsp/users.jsp
   Redirected URL = null
          Cookies = []
Hibernate: 
    /* select
        generatedAlias0 
    from
        User as generatedAlias0 
    where
        generatedAlias0.email=:param0 */ select
            user0_.id as id1_4_,
            user0_.name as name2_4_,
            user0_.email as email3_4_,
            user0_.enabled as enabled4_4_,
            user0_.password as password5_4_,
            user0_.registered as register6_4_ 
        from
            users user0_ 
        where
            user0_.email=?
Hibernate: 
    select
        roles0_.user_id as user_id1_3_0_,
        roles0_.role as role2_3_0_ 
    from
        user_roles roles0_ 
    where
        roles0_.user_id=?

MockHttpServletRequest:
      HTTP Method = GET
      Request URI = /
       Parameters = {}
          Headers = {}
             Body = null
    Session Attrs = {SPRING_SECURITY_CONTEXT=org.springframework.security.core.context.SecurityContextImpl@7cada800: Authentication: org.springframework.security.authentication.UsernamePasswordAuthenticationToken@7cada800: Principal: UserTo{id=100001, name='Admin', email='admin@yandex.ru'}; Credentials: [PROTECTED]; Authenticated: true; Details: null; Granted Authorities: ROLE_ADMIN, ROLE_USER}

Handler:
             Type = ru.neustupov.votingforrestaurants.web.RootController
           Method = public java.lang.String ru.neustupov.votingforrestaurants.web.RootController.root()

Async:
    Async started = false
     Async result = null

Resolved Exception:
             Type = null

ModelAndView:
        View name = redirect:restaurants
             View = null
            Model = null

FlashMap:
       Attributes = null

MockHttpServletResponse:
           Status = 302
    Error message = null
          Headers = {Cache-Control=[no-cache, no-store, max-age=0, must-revalidate], Pragma=[no-cache], Expires=[0], X-XSS-Protection=[1; mode=block], X-Frame-Options=[DENY], X-Content-Type-Options=[nosniff], Accept-Language=[ru], Location=[restaurants]}
     Content type = null
             Body = 
    Forwarded URL = null
   Redirected URL = restaurants
          Cookies = []
Hibernate: 
    /* select
        generatedAlias0 
    from
        User as generatedAlias0 
    where
        generatedAlias0.email=:param0 */ select
            user0_.id as id1_4_,
            user0_.name as name2_4_,
            user0_.email as email3_4_,
            user0_.enabled as enabled4_4_,
            user0_.password as password5_4_,
            user0_.registered as register6_4_ 
        from
            users user0_ 
        where
            user0_.email=?
Hibernate: 
    select
        roles0_.user_id as user_id1_3_0_,
        roles0_.role as role2_3_0_ 
    from
        user_roles roles0_ 
    where
        roles0_.user_id=?

MockHttpServletRequest:
      HTTP Method = GET
      Request URI = /profileRestaurants
       Parameters = {}
          Headers = {}
             Body = null
    Session Attrs = {SPRING_SECURITY_CONTEXT=org.springframework.security.core.context.SecurityContextImpl@7cada800: Authentication: org.springframework.security.authentication.UsernamePasswordAuthenticationToken@7cada800: Principal: UserTo{id=100001, name='Admin', email='admin@yandex.ru'}; Credentials: [PROTECTED]; Authenticated: true; Details: null; Granted Authorities: ROLE_ADMIN, ROLE_USER}

Handler:
             Type = ru.neustupov.votingforrestaurants.web.RootController
           Method = public java.lang.String ru.neustupov.votingforrestaurants.web.RootController.profileRestaurants()

Async:
    Async started = false
     Async result = null

Resolved Exception:
             Type = null

ModelAndView:
        View name = profileRestaurants
             View = null
            Model = null

FlashMap:
       Attributes = null

MockHttpServletResponse:
           Status = 200
    Error message = null
          Headers = {Cache-Control=[no-cache, no-store, max-age=0, must-revalidate], Pragma=[no-cache], Expires=[0], X-XSS-Protection=[1; mode=block], X-Frame-Options=[DENY], X-Content-Type-Options=[nosniff], Accept-Language=[ru]}
     Content type = null
             Body = 
    Forwarded URL = /WEB-INF/jsp/profileRestaurants.jsp
   Redirected URL = null
          Cookies = []

MockHttpServletRequest:
      HTTP Method = GET
      Request URI = /users
       Parameters = {}
          Headers = {}
             Body = null
    Session Attrs = {SPRING_SECURITY_SAVED_REQUEST=DefaultSavedRequest[http://localhost/users]}

Handler:
             Type = null

Async:
    Async started = false
     Async result = null

Resolved Exception:
             Type = null

ModelAndView:
        View name = null
             View = null
            Model = null

FlashMap:
       Attributes = null

MockHttpServletResponse:
           Status = 302
    Error message = null
          Headers = {Cache-Control=[no-cache, no-store, max-age=0, must-revalidate], Pragma=[no-cache], Expires=[0], X-XSS-Protection=[1; mode=block], X-Frame-Options=[DENY], X-Content-Type-Options=[nosniff], Location=[http://localhost/login]}
     Content type = null
             Body = 
    Forwarded URL = null
   Redirected URL = http://localhost/login
          Cookies = []
[WARNING] Tests run: 5, Failures: 0, Errors: 0, Skipped: 1, Time elapsed: 0.185 s - in ru.neustupov.votingforrestaurants.web.RootControllerTest
[INFO] Running ru.neustupov.votingforrestaurants.web.VoteControllerTest
Hibernate: 
    /* select
        generatedAlias0 
    from
        User as generatedAlias0 
    where
        generatedAlias0.email=:param0 */ select
            user0_.id as id1_4_,
            user0_.name as name2_4_,
            user0_.email as email3_4_,
            user0_.enabled as enabled4_4_,
            user0_.password as password5_4_,
            user0_.registered as register6_4_ 
        from
            users user0_ 
        where
            user0_.email=?
Hibernate: 
    select
        roles0_.user_id as user_id1_3_0_,
        roles0_.role as role2_3_0_ 
    from
        user_roles roles0_ 
    where
        roles0_.user_id=?

MockHttpServletRequest:
      HTTP Method = GET
      Request URI = /votes
       Parameters = {}
          Headers = {}
             Body = null
    Session Attrs = {SPRING_SECURITY_CONTEXT=org.springframework.security.core.context.SecurityContextImpl@7cada800: Authentication: org.springframework.security.authentication.UsernamePasswordAuthenticationToken@7cada800: Principal: UserTo{id=100001, name='Admin', email='admin@yandex.ru'}; Credentials: [PROTECTED]; Authenticated: true; Details: null; Granted Authorities: ROLE_ADMIN, ROLE_USER}

Handler:
             Type = ru.neustupov.votingforrestaurants.web.RootController
           Method = public java.lang.String ru.neustupov.votingforrestaurants.web.RootController.votes()

Async:
    Async started = false
     Async result = null

Resolved Exception:
             Type = null

ModelAndView:
        View name = votes
             View = null
            Model = null

FlashMap:
       Attributes = null

MockHttpServletResponse:
           Status = 200
    Error message = null
          Headers = {Cache-Control=[no-cache, no-store, max-age=0, must-revalidate], Pragma=[no-cache], Expires=[0], X-XSS-Protection=[1; mode=block], X-Frame-Options=[DENY], X-Content-Type-Options=[nosniff], Accept-Language=[ru]}
     Content type = null
             Body = 
    Forwarded URL = /WEB-INF/jsp/votes.jsp
   Redirected URL = null
          Cookies = []

MockHttpServletRequest:
      HTTP Method = POST
      Request URI = /ajax/admin/votes
       Parameters = {_csrf=[37efeb27-51b0-483e-bc6b-4c261ff5fcca]}
          Headers = {}
             Body = null
    Session Attrs = {}

Handler:
             Type = null

Async:
    Async started = false
     Async result = null

Resolved Exception:
             Type = null

ModelAndView:
        View name = null
             View = null
            Model = null

FlashMap:
       Attributes = null

MockHttpServletResponse:
           Status = 302
    Error message = null
          Headers = {Cache-Control=[no-cache, no-store, max-age=0, must-revalidate], Pragma=[no-cache], Expires=[0], X-XSS-Protection=[1; mode=block], X-Frame-Options=[DENY], X-Content-Type-Options=[nosniff], Location=[http://localhost/login]}
     Content type = null
             Body = 
    Forwarded URL = null
   Redirected URL = http://localhost/login
          Cookies = []
Hibernate: 
    /* select
        generatedAlias0 
    from
        User as generatedAlias0 
    where
        generatedAlias0.email=:param0 */ select
            user0_.id as id1_4_,
            user0_.name as name2_4_,
            user0_.email as email3_4_,
            user0_.enabled as enabled4_4_,
            user0_.password as password5_4_,
            user0_.registered as register6_4_ 
        from
            users user0_ 
        where
            user0_.email=?
Hibernate: 
    select
        roles0_.user_id as user_id1_3_0_,
        roles0_.role as role2_3_0_ 
    from
        user_roles roles0_ 
    where
        roles0_.user_id=?
21:20:46.544 ERROR r.n.v.web.GlobalControllerExceptionHandler.logAndGetExceptionView:37 - APP_ERROR at request http://localhost/votes
org.springframework.security.access.AccessDeniedException: Access is denied
	at org.springframework.security.access.vote.AffirmativeBased.decide(AffirmativeBased.java:84)
	at org.springframework.security.access.intercept.AbstractSecurityInterceptor.beforeInvocation(AbstractSecurityInterceptor.java:233)
	at org.springframework.security.access.intercept.aopalliance.MethodSecurityInterceptor.invoke(MethodSecurityInterceptor.java:65)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:185)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:689)
	at ru.neustupov.votingforrestaurants.web.RootController$$EnhancerBySpringCGLIB$$94815d72.votes(<generated>)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:209)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:136)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:102)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:871)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:777)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:991)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:925)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:978)
	at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:870)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:634)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:855)
	at org.springframework.test.web.servlet.TestDispatcherServlet.service(TestDispatcherServlet.java:66)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:741)
	at org.springframework.mock.web.MockFilterChain$ServletFilterProxy.doFilter(MockFilterChain.java:166)
	at org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:133)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:320)
	at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:127)
	at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:91)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:119)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:137)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:111)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:170)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:200)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.csrf.CsrfFilter.doFilterInternal(CsrfFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:64)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:56)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:105)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:215)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:178)
	at org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:133)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:200)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:133)
	at org.springframework.test.web.servlet.MockMvc.perform(MockMvc.java:166)
	at ru.neustupov.votingforrestaurants.web.VoteControllerTest.testVotesAccessDenied(VoteControllerTest.java:32)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:50)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:47)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.springframework.test.context.junit4.statements.RunBeforeTestExecutionCallbacks.evaluate(RunBeforeTestExecutionCallbacks.java:73)
	at org.springframework.test.context.junit4.statements.RunAfterTestExecutionCallbacks.evaluate(RunAfterTestExecutionCallbacks.java:83)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.springframework.test.context.junit4.statements.RunBeforeTestMethodCallbacks.evaluate(RunBeforeTestMethodCallbacks.java:75)
	at org.springframework.test.context.junit4.statements.RunAfterTestMethodCallbacks.evaluate(RunAfterTestMethodCallbacks.java:86)
	at org.springframework.test.context.junit4.statements.SpringRepeat.evaluate(SpringRepeat.java:84)
	at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:325)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:251)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:97)
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:290)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288)
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:58)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268)
	at org.springframework.test.context.junit4.statements.RunBeforeTestClassCallbacks.evaluate(RunBeforeTestClassCallbacks.java:61)
	at org.springframework.test.context.junit4.statements.RunAfterTestClassCallbacks.evaluate(RunAfterTestClassCallbacks.java:70)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:363)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.run(SpringJUnit4ClassRunner.java:190)
	at org.apache.maven.surefire.junit4.JUnit4Provider.execute(JUnit4Provider.java:369)
	at org.apache.maven.surefire.junit4.JUnit4Provider.executeWithRerun(JUnit4Provider.java:275)
	at org.apache.maven.surefire.junit4.JUnit4Provider.executeTestSet(JUnit4Provider.java:239)
	at org.apache.maven.surefire.junit4.JUnit4Provider.invoke(JUnit4Provider.java:160)
	at org.apache.maven.surefire.booter.ForkedBooter.invokeProviderInSameClassLoader(ForkedBooter.java:373)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:334)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:119)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:407)
21:20:46.546 WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver.doResolveHandlerMethodException:410 - Failed to invoke @ExceptionHandler method: public org.springframework.web.servlet.ModelAndView ru.neustupov.votingforrestaurants.web.GlobalControllerExceptionHandler.defaultErrorHandler(javax.servlet.http.HttpServletRequest,java.lang.Exception) throws java.lang.Exception
org.springframework.context.NoSuchMessageException: No message found under code 'error.appError' for locale 'ru'.
	at org.springframework.context.support.AbstractMessageSource.getMessage(AbstractMessageSource.java:161)
	at ru.neustupov.votingforrestaurants.web.MessageUtil.getMessage(MessageUtil.java:23)
	at ru.neustupov.votingforrestaurants.web.MessageUtil.getMessage(MessageUtil.java:27)
	at ru.neustupov.votingforrestaurants.web.GlobalControllerExceptionHandler.logAndGetExceptionView(GlobalControllerExceptionHandler.java:42)
	at ru.neustupov.votingforrestaurants.web.GlobalControllerExceptionHandler.defaultErrorHandler(GlobalControllerExceptionHandler.java:31)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:209)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:136)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:102)
	at org.springframework.web.servlet.mvc.method.annotation.ExceptionHandlerExceptionResolver.doResolveHandlerMethodException(ExceptionHandlerExceptionResolver.java:403)
	at org.springframework.web.servlet.handler.AbstractHandlerMethodExceptionResolver.doResolveException(AbstractHandlerMethodExceptionResolver.java:61)
	at org.springframework.web.servlet.handler.AbstractHandlerExceptionResolver.resolveException(AbstractHandlerExceptionResolver.java:140)
	at org.springframework.web.servlet.DispatcherServlet.processHandlerException(DispatcherServlet.java:1255)
	at org.springframework.test.web.servlet.TestDispatcherServlet.processHandlerException(TestDispatcherServlet.java:113)
	at org.springframework.web.servlet.DispatcherServlet.processDispatchResult(DispatcherServlet.java:1062)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1008)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:925)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:978)
	at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:870)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:634)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:855)
	at org.springframework.test.web.servlet.TestDispatcherServlet.service(TestDispatcherServlet.java:66)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:741)
	at org.springframework.mock.web.MockFilterChain$ServletFilterProxy.doFilter(MockFilterChain.java:166)
	at org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:133)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:320)
	at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:127)
	at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:91)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:119)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:137)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:111)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:170)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:200)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.csrf.CsrfFilter.doFilterInternal(CsrfFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:64)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:56)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:105)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:215)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:178)
	at org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:133)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:200)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:133)
	at org.springframework.test.web.servlet.MockMvc.perform(MockMvc.java:166)
	at ru.neustupov.votingforrestaurants.web.VoteControllerTest.testVotesAccessDenied(VoteControllerTest.java:32)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:50)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:47)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.springframework.test.context.junit4.statements.RunBeforeTestExecutionCallbacks.evaluate(RunBeforeTestExecutionCallbacks.java:73)
	at org.springframework.test.context.junit4.statements.RunAfterTestExecutionCallbacks.evaluate(RunAfterTestExecutionCallbacks.java:83)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.springframework.test.context.junit4.statements.RunBeforeTestMethodCallbacks.evaluate(RunBeforeTestMethodCallbacks.java:75)
	at org.springframework.test.context.junit4.statements.RunAfterTestMethodCallbacks.evaluate(RunAfterTestMethodCallbacks.java:86)
	at org.springframework.test.context.junit4.statements.SpringRepeat.evaluate(SpringRepeat.java:84)
	at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:325)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:251)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:97)
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:290)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288)
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:58)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268)
	at org.springframework.test.context.junit4.statements.RunBeforeTestClassCallbacks.evaluate(RunBeforeTestClassCallbacks.java:61)
	at org.springframework.test.context.junit4.statements.RunAfterTestClassCallbacks.evaluate(RunAfterTestClassCallbacks.java:70)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:363)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.run(SpringJUnit4ClassRunner.java:190)
	at org.apache.maven.surefire.junit4.JUnit4Provider.execute(JUnit4Provider.java:369)
	at org.apache.maven.surefire.junit4.JUnit4Provider.executeWithRerun(JUnit4Provider.java:275)
	at org.apache.maven.surefire.junit4.JUnit4Provider.executeTestSet(JUnit4Provider.java:239)
	at org.apache.maven.surefire.junit4.JUnit4Provider.invoke(JUnit4Provider.java:160)
	at org.apache.maven.surefire.booter.ForkedBooter.invokeProviderInSameClassLoader(ForkedBooter.java:373)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:334)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:119)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:407)

MockHttpServletRequest:
      HTTP Method = GET
      Request URI = /votes
       Parameters = {}
          Headers = {}
             Body = null
    Session Attrs = {org.springframework.security.web.csrf.HttpSessionCsrfTokenRepository.CSRF_TOKEN=org.springframework.security.web.csrf.DefaultCsrfToken@3b046e64, SPRING_SECURITY_CONTEXT=org.springframework.security.core.context.SecurityContextImpl@19a8c042: Authentication: org.springframework.security.authentication.UsernamePasswordAuthenticationToken@19a8c042: Principal: UserTo{id=100000, name='User', email='user@yandex.ru'}; Credentials: [PROTECTED]; Authenticated: true; Details: null; Granted Authorities: ROLE_USER}

Handler:
             Type = ru.neustupov.votingforrestaurants.web.RootController
           Method = public java.lang.String ru.neustupov.votingforrestaurants.web.RootController.votes()

Async:
    Async started = false
     Async result = null

Resolved Exception:
             Type = null

ModelAndView:
        View name = null
             View = null
            Model = null

FlashMap:
       Attributes = null

MockHttpServletResponse:
           Status = 403
    Error message = Forbidden
          Headers = {Cache-Control=[no-cache, no-store, max-age=0, must-revalidate], Pragma=[no-cache], Expires=[0], X-XSS-Protection=[1; mode=block], X-Frame-Options=[DENY], X-Content-Type-Options=[nosniff]}
     Content type = null
             Body = 
    Forwarded URL = null
   Redirected URL = null
          Cookies = []
[ERROR] Tests run: 3, Failures: 1, Errors: 0, Skipped: 0, Time elapsed: 0.037 s <<< FAILURE! - in ru.neustupov.votingforrestaurants.web.VoteControllerTest
[ERROR] testVotesAccessDenied(ru.neustupov.votingforrestaurants.web.VoteControllerTest)  Time elapsed: 0.011 s  <<< FAILURE!
java.lang.AssertionError: Forwarded URL expected:</WEB-INF/jsp/exception/exception.jsp> but was:<null>
	at ru.neustupov.votingforrestaurants.web.VoteControllerTest.testVotesAccessDenied(VoteControllerTest.java:35)

[INFO] Running ru.neustupov.votingforrestaurants.web.menu.AdminMenuRestControllerTest
Hibernate: 
    /* select
        generatedAlias0 
    from
        User as generatedAlias0 
    where
        generatedAlias0.email=:param0 */ select
            user0_.id as id1_4_,
            user0_.name as name2_4_,
            user0_.email as email3_4_,
            user0_.enabled as enabled4_4_,
            user0_.password as password5_4_,
            user0_.registered as register6_4_ 
        from
            users user0_ 
        where
            user0_.email=?
Hibernate: 
    select
        roles0_.user_id as user_id1_3_0_,
        roles0_.role as role2_3_0_ 
    from
        user_roles roles0_ 
    where
        roles0_.user_id=?
Hibernate: 
    /* select
        generatedAlias0 
    from
        User as generatedAlias0 
    where
        generatedAlias0.email=:param0 */ select
            user0_.id as id1_4_,
            user0_.name as name2_4_,
            user0_.email as email3_4_,
            user0_.enabled as enabled4_4_,
            user0_.password as password5_4_,
            user0_.registered as register6_4_ 
        from
            users user0_ 
        where
            user0_.email=?
Hibernate: 
    select
        roles0_.user_id as user_id1_3_0_,
        roles0_.role as role2_3_0_ 
    from
        user_roles roles0_ 
    where
        roles0_.user_id=?
21:20:46.586 INFO  r.n.v.web.menu.AbstractMenuController.delete:29 - delete menu 1 for restaurant 100002
Hibernate: 
    /* DELETE 
    FROM
        Menu m 
    WHERE
        m.id=:id 
        AND m.restaurant.id=:restId */ delete 
        from
            menus 
        where
            id=? 
            and id_rest=?
21:20:46.589 WARN  r.n.votingforrestaurants.web.ExceptionInfoHandler.logAndGetErrorInfo:80 - DATA_NOT_FOUND at request  http://localhost/rest/admin/menus/1: Not found entity with id=1
21:20:46.589 WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver.doResolveHandlerMethodException:410 - Failed to invoke @ExceptionHandler method: public ru.neustupov.votingforrestaurants.util.exception.ErrorInfo ru.neustupov.votingforrestaurants.web.ExceptionInfoHandler.handleError(javax.servlet.http.HttpServletRequest,ru.neustupov.votingforrestaurants.util.exception.NotFoundException)
org.springframework.context.NoSuchMessageException: No message found under code 'error.dataNotFound' for locale 'ru'.
	at org.springframework.context.support.AbstractMessageSource.getMessage(AbstractMessageSource.java:161)
	at ru.neustupov.votingforrestaurants.web.MessageUtil.getMessage(MessageUtil.java:23)
	at ru.neustupov.votingforrestaurants.web.MessageUtil.getMessage(MessageUtil.java:27)
	at ru.neustupov.votingforrestaurants.web.ExceptionInfoHandler.logAndGetErrorInfo(ExceptionInfoHandler.java:83)
	at ru.neustupov.votingforrestaurants.web.ExceptionInfoHandler.handleError(ExceptionInfoHandler.java:41)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:209)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:136)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:102)
	at org.springframework.web.servlet.mvc.method.annotation.ExceptionHandlerExceptionResolver.doResolveHandlerMethodException(ExceptionHandlerExceptionResolver.java:403)
	at org.springframework.web.servlet.handler.AbstractHandlerMethodExceptionResolver.doResolveException(AbstractHandlerMethodExceptionResolver.java:61)
	at org.springframework.web.servlet.handler.AbstractHandlerExceptionResolver.resolveException(AbstractHandlerExceptionResolver.java:140)
	at org.springframework.web.servlet.DispatcherServlet.processHandlerException(DispatcherServlet.java:1255)
	at org.springframework.test.web.servlet.TestDispatcherServlet.processHandlerException(TestDispatcherServlet.java:113)
	at org.springframework.web.servlet.DispatcherServlet.processDispatchResult(DispatcherServlet.java:1062)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1008)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:925)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:978)
	at org.springframework.web.servlet.FrameworkServlet.doDelete(FrameworkServlet.java:903)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:666)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:855)
	at org.springframework.test.web.servlet.TestDispatcherServlet.service(TestDispatcherServlet.java:66)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:741)
	at org.springframework.mock.web.MockFilterChain$ServletFilterProxy.doFilter(MockFilterChain.java:166)
	at org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:133)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:320)
	at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:127)
	at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:91)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:119)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:111)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:170)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.authentication.www.BasicAuthenticationFilter.doFilterInternal(BasicAuthenticationFilter.java:215)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:64)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:56)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:105)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:215)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:178)
	at org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:133)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:200)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:133)
	at org.springframework.test.web.servlet.MockMvc.perform(MockMvc.java:166)
	at ru.neustupov.votingforrestaurants.web.menu.AdminMenuRestControllerTest.testDeleteNotFound(AdminMenuRestControllerTest.java:120)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:50)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:47)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.springframework.test.context.junit4.statements.RunBeforeTestExecutionCallbacks.evaluate(RunBeforeTestExecutionCallbacks.java:73)
	at org.springframework.test.context.junit4.statements.RunAfterTestExecutionCallbacks.evaluate(RunAfterTestExecutionCallbacks.java:83)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.springframework.test.context.junit4.statements.RunBeforeTestMethodCallbacks.evaluate(RunBeforeTestMethodCallbacks.java:75)
	at org.springframework.test.context.junit4.statements.RunAfterTestMethodCallbacks.evaluate(RunAfterTestMethodCallbacks.java:86)
	at org.springframework.test.context.junit4.statements.SpringRepeat.evaluate(SpringRepeat.java:84)
	at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:325)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:251)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:97)
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:290)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288)
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:58)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268)
	at org.springframework.test.context.junit4.statements.RunBeforeTestClassCallbacks.evaluate(RunBeforeTestClassCallbacks.java:61)
	at org.springframework.test.context.junit4.statements.RunAfterTestClassCallbacks.evaluate(RunAfterTestClassCallbacks.java:70)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:363)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.run(SpringJUnit4ClassRunner.java:190)
	at org.apache.maven.surefire.junit4.JUnit4Provider.execute(JUnit4Provider.java:369)
	at org.apache.maven.surefire.junit4.JUnit4Provider.executeWithRerun(JUnit4Provider.java:275)
	at org.apache.maven.surefire.junit4.JUnit4Provider.executeTestSet(JUnit4Provider.java:239)
	at org.apache.maven.surefire.junit4.JUnit4Provider.invoke(JUnit4Provider.java:160)
	at org.apache.maven.surefire.booter.ForkedBooter.invokeProviderInSameClassLoader(ForkedBooter.java:373)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:334)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:119)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:407)
21:20:46.590 WARN  o.h.e.j.s.SqlExceptionHelper$StandardWarningHandler.logWarning:217 - SQL Warning Code: -1100, SQLState: 02000
21:20:46.591 WARN  o.h.e.j.s.SqlExceptionHelper$StandardWarningHandler.logWarning:218 - no data
Hibernate: 
    /* select
        generatedAlias0 
    from
        User as generatedAlias0 
    where
        generatedAlias0.email=:param0 */ select
            user0_.id as id1_4_,
            user0_.name as name2_4_,
            user0_.email as email3_4_,
            user0_.enabled as enabled4_4_,
            user0_.password as password5_4_,
            user0_.registered as register6_4_ 
        from
            users user0_ 
        where
            user0_.email=?
Hibernate: 
    select
        roles0_.user_id as user_id1_3_0_,
        roles0_.role as role2_3_0_ 
    from
        user_roles roles0_ 
    where
        roles0_.user_id=?
21:20:46.599 INFO  r.n.v.web.menu.AbstractMenuController.get:24 - get menu 100007 for restaurant 100002
Hibernate: 
    select
        menu0_.id as id1_1_0_,
        menu0_.add_date as add_date2_1_0_,
        menu0_.id_rest as id_rest3_1_0_ 
    from
        menus menu0_ 
    where
        menu0_.id=?

MockHttpServletRequest:
      HTTP Method = GET
      Request URI = /rest/admin/menus/100007
       Parameters = {restId=[100002]}
          Headers = {Authorization=[Basic YWRtaW5AeWFuZGV4LnJ1OmFkbWlu]}
             Body = null
    Session Attrs = {}

Handler:
             Type = ru.neustupov.votingforrestaurants.web.menu.AdminMenuRestController
           Method = public ru.neustupov.votingforrestaurants.model.Menu ru.neustupov.votingforrestaurants.web.menu.AdminMenuRestController.get(int,int)

Async:
    Async started = false
     Async result = null

Resolved Exception:
             Type = null

ModelAndView:
        View name = null
             View = null
            Model = null

FlashMap:
       Attributes = null

MockHttpServletResponse:
           Status = 200
    Error message = null
          Headers = {Cache-Control=[no-cache, no-store, max-age=0, must-revalidate], Pragma=[no-cache], Expires=[0], X-XSS-Protection=[1; mode=block], X-Frame-Options=[DENY], X-Content-Type-Options=[nosniff], Content-Type=[application/json;charset=UTF-8]}
     Content type = application/json;charset=UTF-8
             Body = {"id":100007,"addDate":"2015-05-01","meals":null,"restaurant":null}
    Forwarded URL = null
   Redirected URL = null
          Cookies = []
Hibernate: 
    /* select
        generatedAlias0 
    from
        User as generatedAlias0 
    where
        generatedAlias0.email=:param0 */ select
            user0_.id as id1_4_,
            user0_.name as name2_4_,
            user0_.email as email3_4_,
            user0_.enabled as enabled4_4_,
            user0_.password as password5_4_,
            user0_.registered as register6_4_ 
        from
            users user0_ 
        where
            user0_.email=?
Hibernate: 
    select
        roles0_.user_id as user_id1_3_0_,
        roles0_.role as role2_3_0_ 
    from
        user_roles roles0_ 
    where
        roles0_.user_id=?
21:20:46.621 INFO  r.n.v.web.menu.AbstractMenuController.get:24 - get menu 1 for restaurant 100002
Hibernate: 
    select
        menu0_.id as id1_1_0_,
        menu0_.add_date as add_date2_1_0_,
        menu0_.id_rest as id_rest3_1_0_ 
    from
        menus menu0_ 
    where
        menu0_.id=?
21:20:46.623 WARN  r.n.votingforrestaurants.web.ExceptionInfoHandler.logAndGetErrorInfo:80 - DATA_NOT_FOUND at request  http://localhost/rest/admin/menus/1: Not found entity with id=1
21:20:46.624 WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver.doResolveHandlerMethodException:410 - Failed to invoke @ExceptionHandler method: public ru.neustupov.votingforrestaurants.util.exception.ErrorInfo ru.neustupov.votingforrestaurants.web.ExceptionInfoHandler.handleError(javax.servlet.http.HttpServletRequest,ru.neustupov.votingforrestaurants.util.exception.NotFoundException)
org.springframework.context.NoSuchMessageException: No message found under code 'error.dataNotFound' for locale 'ru'.
	at org.springframework.context.support.AbstractMessageSource.getMessage(AbstractMessageSource.java:161)
	at ru.neustupov.votingforrestaurants.web.MessageUtil.getMessage(MessageUtil.java:23)
	at ru.neustupov.votingforrestaurants.web.MessageUtil.getMessage(MessageUtil.java:27)
	at ru.neustupov.votingforrestaurants.web.ExceptionInfoHandler.logAndGetErrorInfo(ExceptionInfoHandler.java:83)
	at ru.neustupov.votingforrestaurants.web.ExceptionInfoHandler.handleError(ExceptionInfoHandler.java:41)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:209)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:136)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:102)
	at org.springframework.web.servlet.mvc.method.annotation.ExceptionHandlerExceptionResolver.doResolveHandlerMethodException(ExceptionHandlerExceptionResolver.java:403)
	at org.springframework.web.servlet.handler.AbstractHandlerMethodExceptionResolver.doResolveException(AbstractHandlerMethodExceptionResolver.java:61)
	at org.springframework.web.servlet.handler.AbstractHandlerExceptionResolver.resolveException(AbstractHandlerExceptionResolver.java:140)
	at org.springframework.web.servlet.DispatcherServlet.processHandlerException(DispatcherServlet.java:1255)
	at org.springframework.test.web.servlet.TestDispatcherServlet.processHandlerException(TestDispatcherServlet.java:113)
	at org.springframework.web.servlet.DispatcherServlet.processDispatchResult(DispatcherServlet.java:1062)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1008)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:925)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:978)
	at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:870)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:634)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:855)
	at org.springframework.test.web.servlet.TestDispatcherServlet.service(TestDispatcherServlet.java:66)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:741)
	at org.springframework.mock.web.MockFilterChain$ServletFilterProxy.doFilter(MockFilterChain.java:166)
	at org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:133)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:320)
	at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:127)
	at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:91)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:119)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:111)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:170)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.authentication.www.BasicAuthenticationFilter.doFilterInternal(BasicAuthenticationFilter.java:215)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:64)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:56)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:105)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:215)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:178)
	at org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:133)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:200)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:133)
	at org.springframework.test.web.servlet.MockMvc.perform(MockMvc.java:166)
	at ru.neustupov.votingforrestaurants.web.menu.AdminMenuRestControllerTest.testGetNotFound(AdminMenuRestControllerTest.java:111)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:50)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:47)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.springframework.test.context.junit4.statements.RunBeforeTestExecutionCallbacks.evaluate(RunBeforeTestExecutionCallbacks.java:73)
	at org.springframework.test.context.junit4.statements.RunAfterTestExecutionCallbacks.evaluate(RunAfterTestExecutionCallbacks.java:83)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.springframework.test.context.junit4.statements.RunBeforeTestMethodCallbacks.evaluate(RunBeforeTestMethodCallbacks.java:75)
	at org.springframework.test.context.junit4.statements.RunAfterTestMethodCallbacks.evaluate(RunAfterTestMethodCallbacks.java:86)
	at org.springframework.test.context.junit4.statements.SpringRepeat.evaluate(SpringRepeat.java:84)
	at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:325)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:251)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:97)
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:290)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288)
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:58)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268)
	at org.springframework.test.context.junit4.statements.RunBeforeTestClassCallbacks.evaluate(RunBeforeTestClassCallbacks.java:61)
	at org.springframework.test.context.junit4.statements.RunAfterTestClassCallbacks.evaluate(RunAfterTestClassCallbacks.java:70)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:363)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.run(SpringJUnit4ClassRunner.java:190)
	at org.apache.maven.surefire.junit4.JUnit4Provider.execute(JUnit4Provider.java:369)
	at org.apache.maven.surefire.junit4.JUnit4Provider.executeWithRerun(JUnit4Provider.java:275)
	at org.apache.maven.surefire.junit4.JUnit4Provider.executeTestSet(JUnit4Provider.java:239)
	at org.apache.maven.surefire.junit4.JUnit4Provider.invoke(JUnit4Provider.java:160)
	at org.apache.maven.surefire.booter.ForkedBooter.invokeProviderInSameClassLoader(ForkedBooter.java:373)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:334)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:119)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:407)
Hibernate: 
    /* select
        generatedAlias0 
    from
        User as generatedAlias0 
    where
        generatedAlias0.email=:param0 */ select
            user0_.id as id1_4_,
            user0_.name as name2_4_,
            user0_.email as email3_4_,
            user0_.enabled as enabled4_4_,
            user0_.password as password5_4_,
            user0_.registered as register6_4_ 
        from
            users user0_ 
        where
            user0_.email=?
Hibernate: 
    select
        roles0_.user_id as user_id1_3_0_,
        roles0_.role as role2_3_0_ 
    from
        user_roles roles0_ 
    where
        roles0_.user_id=?
21:20:46.637 INFO  r.n.v.web.menu.AbstractMenuController.create:45 - create AbstractBaseEntity{id=null} for restaurant 100002
Hibernate: 
    call next value for global_seq
Hibernate: 
    /* insert ru.neustupov.votingforrestaurants.model.Menu
        */ insert 
        into
            menus
            (add_date, id_rest, id) 
        values
            (?, ?, ?)
Hibernate: 
    /* SELECT
        m 
    FROM
        Menu m 
    WHERE
        m.restaurant.id=:restId 
    ORDER BY
        m.id */ select
            menu0_.id as id1_1_,
            menu0_.add_date as add_date2_1_,
            menu0_.id_rest as id_rest3_1_ 
        from
            menus menu0_ 
        where
            menu0_.id_rest=? 
        order by
            menu0_.id
Hibernate: 
    /* select
        generatedAlias0 
    from
        User as generatedAlias0 
    where
        generatedAlias0.email=:param0 */ select
            user0_.id as id1_4_,
            user0_.name as name2_4_,
            user0_.email as email3_4_,
            user0_.enabled as enabled4_4_,
            user0_.password as password5_4_,
            user0_.registered as register6_4_ 
        from
            users user0_ 
        where
            user0_.email=?
Hibernate: 
    select
        roles0_.user_id as user_id1_3_0_,
        roles0_.role as role2_3_0_ 
    from
        user_roles roles0_ 
    where
        roles0_.user_id=?
21:20:46.653 INFO  r.n.v.web.menu.AbstractMenuController.delete:29 - delete menu 100007 for restaurant 100002
Hibernate: 
    /* DELETE 
    FROM
        Menu m 
    WHERE
        m.id=:id 
        AND m.restaurant.id=:restId */ delete 
        from
            menus 
        where
            id=? 
            and id_rest=?

MockHttpServletRequest:
      HTTP Method = DELETE
      Request URI = /rest/admin/menus/100007
       Parameters = {restId=[100002]}
          Headers = {Authorization=[Basic YWRtaW5AeWFuZGV4LnJ1OmFkbWlu]}
             Body = null
    Session Attrs = {}

Handler:
             Type = ru.neustupov.votingforrestaurants.web.menu.AdminMenuRestController
           Method = public void ru.neustupov.votingforrestaurants.web.menu.AdminMenuRestController.delete(int,int)

Async:
    Async started = false
     Async result = null

Resolved Exception:
             Type = null

ModelAndView:
        View name = null
             View = null
            Model = null

FlashMap:
       Attributes = null

MockHttpServletResponse:
           Status = 204
    Error message = null
          Headers = {Cache-Control=[no-cache, no-store, max-age=0, must-revalidate], Pragma=[no-cache], Expires=[0], X-XSS-Protection=[1; mode=block], X-Frame-Options=[DENY], X-Content-Type-Options=[nosniff]}
     Content type = null
             Body = 
    Forwarded URL = null
   Redirected URL = null
          Cookies = []
Hibernate: 
    /* SELECT
        m 
    FROM
        Menu m 
    WHERE
        m.restaurant.id=:restId 
    ORDER BY
        m.id */ select
            menu0_.id as id1_1_,
            menu0_.add_date as add_date2_1_,
            menu0_.id_rest as id_rest3_1_ 
        from
            menus menu0_ 
        where
            menu0_.id_rest=? 
        order by
            menu0_.id
Hibernate: 
    /* select
        generatedAlias0 
    from
        User as generatedAlias0 
    where
        generatedAlias0.email=:param0 */ select
            user0_.id as id1_4_,
            user0_.name as name2_4_,
            user0_.email as email3_4_,
            user0_.enabled as enabled4_4_,
            user0_.password as password5_4_,
            user0_.registered as register6_4_ 
        from
            users user0_ 
        where
            user0_.email=?
Hibernate: 
    select
        roles0_.user_id as user_id1_3_0_,
        roles0_.role as role2_3_0_ 
    from
        user_roles roles0_ 
    where
        roles0_.user_id=?
21:20:46.666 INFO  r.n.v.web.menu.AbstractMenuController.getAll:34 - getAll menus for restaurant 100002
Hibernate: 
    /* SELECT
        m 
    FROM
        Menu m 
    WHERE
        m.restaurant.id=:restId 
    ORDER BY
        m.id */ select
            menu0_.id as id1_1_,
            menu0_.add_date as add_date2_1_,
            menu0_.id_rest as id_rest3_1_ 
        from
            menus menu0_ 
        where
            menu0_.id_rest=? 
        order by
            menu0_.id
[{"id":100007,"addDate":"2015-05-01","meals":null,"restaurant":null},{"id":100012,"addDate":"2015-05-02","meals":null,"restaurant":null},{"id":100013,"addDate":"2018-05-21","meals":null,"restaurant":null}]
Hibernate: 
    /* select
        generatedAlias0 
    from
        User as generatedAlias0 
    where
        generatedAlias0.email=:param0 */ select
            user0_.id as id1_4_,
            user0_.name as name2_4_,
            user0_.email as email3_4_,
            user0_.enabled as enabled4_4_,
            user0_.password as password5_4_,
            user0_.registered as register6_4_ 
        from
            users user0_ 
        where
            user0_.email=?
Hibernate: 
    select
        roles0_.user_id as user_id1_3_0_,
        roles0_.role as role2_3_0_ 
    from
        user_roles roles0_ 
    where
        roles0_.user_id=?
21:20:46.683 INFO  r.n.v.web.menu.AbstractMenuController.update:51 - update AbstractBaseEntity{id=100007} with id = 100007 for restaurant 100002
Hibernate: 
    select
        menu0_.id as id1_1_0_,
        menu0_.add_date as add_date2_1_0_,
        menu0_.id_rest as id_rest3_1_0_ 
    from
        menus menu0_ 
    where
        menu0_.id=?
[ERROR] Tests run: 9, Failures: 0, Errors: 2, Skipped: 0, Time elapsed: 0.133 s <<< FAILURE! - in ru.neustupov.votingforrestaurants.web.menu.AdminMenuRestControllerTest
[ERROR] testDeleteNotFound(ru.neustupov.votingforrestaurants.web.menu.AdminMenuRestControllerTest)  Time elapsed: 0.012 s  <<< ERROR!
org.springframework.web.util.NestedServletException: Request processing failed; nested exception is Not found entity with id=1
	at ru.neustupov.votingforrestaurants.web.menu.AdminMenuRestControllerTest.testDeleteNotFound(AdminMenuRestControllerTest.java:120)
Caused by: ru.neustupov.votingforrestaurants.util.exception.NotFoundException: Not found entity with id=1
	at ru.neustupov.votingforrestaurants.web.menu.AdminMenuRestControllerTest.testDeleteNotFound(AdminMenuRestControllerTest.java:120)

[ERROR] testGetNotFound(ru.neustupov.votingforrestaurants.web.menu.AdminMenuRestControllerTest)  Time elapsed: 0.01 s  <<< ERROR!
org.springframework.web.util.NestedServletException: Request processing failed; nested exception is Not found entity with id=1
	at ru.neustupov.votingforrestaurants.web.menu.AdminMenuRestControllerTest.testGetNotFound(AdminMenuRestControllerTest.java:111)
Caused by: ru.neustupov.votingforrestaurants.util.exception.NotFoundException: Not found entity with id=1
	at ru.neustupov.votingforrestaurants.web.menu.AdminMenuRestControllerTest.testGetNotFound(AdminMenuRestControllerTest.java:111)

[INFO] Running ru.neustupov.votingforrestaurants.web.RestaurantControllerTest

MockHttpServletRequest:
      HTTP Method = GET
      Request URI = /restaurants
       Parameters = {}
          Headers = {}
             Body = null
    Session Attrs = {org.springframework.security.web.csrf.HttpSessionCsrfTokenRepository.CSRF_TOKEN=org.springframework.security.web.csrf.DefaultCsrfToken@323c6f9c, SPRING_SECURITY_SAVED_REQUEST=DefaultSavedRequest[http://localhost/restaurants]}

Handler:
             Type = null

Async:
    Async started = false
     Async result = null

Resolved Exception:
             Type = null

ModelAndView:
        View name = null
             View = null
            Model = null

FlashMap:
       Attributes = null

MockHttpServletResponse:
           Status = 302
    Error message = null
          Headers = {Cache-Control=[no-cache, no-store, max-age=0, must-revalidate], Pragma=[no-cache], Expires=[0], X-XSS-Protection=[1; mode=block], X-Frame-Options=[DENY], X-Content-Type-Options=[nosniff], Location=[http://localhost/login]}
     Content type = null
             Body = 
    Forwarded URL = null
   Redirected URL = http://localhost/login
          Cookies = []

MockHttpServletRequest:
      HTTP Method = POST
      Request URI = /ajax/admin/restaurants
       Parameters = {name=[newRest], id=[], _csrf=[b950795b-cce4-4c5a-8fc6-c48e515ec4ea]}
          Headers = {Authorization=[Basic YWRtaW5AeWFuZGV4LnJ1OmFkbWlu]}
             Body = null
    Session Attrs = {}

Handler:
             Type = null

Async:
    Async started = false
     Async result = null

Resolved Exception:
             Type = null

ModelAndView:
        View name = null
             View = null
            Model = null

FlashMap:
       Attributes = null

MockHttpServletResponse:
           Status = 302
    Error message = null
          Headers = {Cache-Control=[no-cache, no-store, max-age=0, must-revalidate], Pragma=[no-cache], Expires=[0], X-XSS-Protection=[1; mode=block], X-Frame-Options=[DENY], X-Content-Type-Options=[nosniff], Location=[http://localhost/login]}
     Content type = null
             Body = 
    Forwarded URL = null
   Redirected URL = http://localhost/login
          Cookies = []
[WARNING] Tests run: 6, Failures: 0, Errors: 0, Skipped: 4, Time elapsed: 0.02 s - in ru.neustupov.votingforrestaurants.web.RestaurantControllerTest
[INFO] Running ru.neustupov.votingforrestaurants.web.json.JsonUtilTest
{"id":100000,"name":"User","email":"user@yandex.ru","registered":"2018-05-21T19:20:43.740+0000","enabled":true,"roles":["ROLE_USER"]}
{"id":100000,"name":"User","email":"user@yandex.ru","registered":"2018-05-21T19:20:43.740+0000","enabled":true,"roles":["ROLE_USER"],"password":"newPass"}
{"id":100014,"name":"Apple","price":5}
[{"id":100014,"name":"Apple","price":5},{"id":100015,"name":"Juice","price":10},{"id":100016,"name":"Potato","price":20},{"id":100017,"name":"Bananas","price":30},{"id":100018,"name":"Bread","price":40},{"id":100019,"name":"Bottle of water","price":50}]
[INFO] Tests run: 3, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.011 s - in ru.neustupov.votingforrestaurants.web.json.JsonUtilTest
[INFO] Running ru.neustupov.votingforrestaurants.service.VoteServiceTest
21:20:47.174 DEBUG o.s.data.jpa.repository.query.JpaQueryFactory.fromQueryAnnotation:55 - Looking up query for method getByUserIdAndDate
21:20:47.178 DEBUG o.s.data.jpa.repository.query.JpaQueryFactory.fromQueryAnnotation:55 - Looking up query for method getAll
21:20:47.181 DEBUG o.s.data.jpa.repository.query.JpaQueryFactory.fromQueryAnnotation:55 - Looking up query for method getByUserIdAndRestId
21:20:47.184 DEBUG o.s.data.jpa.repository.query.JpaQueryFactory.fromQueryAnnotation:55 - Looking up query for method getAllByUserId
21:20:47.187 DEBUG o.s.data.jpa.repository.query.JpaQueryFactory.fromQueryAnnotation:55 - Looking up query for method getWithRestaurantAndUser
21:20:47.190 DEBUG o.s.data.jpa.repository.query.JpaQueryFactory.fromQueryAnnotation:55 - Looking up query for method getWithUser
21:20:47.192 DEBUG o.s.data.jpa.repository.query.JpaQueryFactory.fromQueryAnnotation:55 - Looking up query for method getAllByRestaurantId
21:20:47.194 DEBUG o.s.data.jpa.repository.query.JpaQueryFactory.fromQueryAnnotation:55 - Looking up query for method delete
21:20:47.198 DEBUG o.s.data.jpa.repository.query.JpaQueryFactory.fromQueryAnnotation:55 - Looking up query for method getAllForCurrentDate
21:20:47.202 DEBUG o.s.data.jpa.repository.query.JpaQueryFactory.fromQueryAnnotation:55 - Looking up query for method getWithRestaurant
21:20:47.218 DEBUG o.s.data.jpa.repository.query.JpaQueryFactory.fromQueryAnnotation:55 - Looking up query for method getWithVotes
21:20:47.222 DEBUG o.s.data.jpa.repository.query.JpaQueryFactory.fromQueryAnnotation:55 - Looking up query for method delete
21:20:47.225 DEBUG o.s.data.jpa.repository.query.JpaQueryFactory.fromQueryAnnotation:55 - Looking up query for method getAll
21:20:47.229 DEBUG o.s.data.jpa.repository.query.JpaQueryFactory.fromQueryAnnotation:55 - Looking up query for method getByEmail
21:20:47.230 DEBUG o.s.data.jpa.repository.query.NamedQuery.lookupFrom:122 - Looking up named query User.getByEmail
21:20:47.230 DEBUG o.s.data.jpa.repository.query.NamedQuery.hasNamedQuery:104 - Did not find named query User.getByEmail
21:20:47.239 DEBUG o.s.data.jpa.repository.query.JpaQueryFactory.fromQueryAnnotation:55 - Looking up query for method getAll
21:20:47.243 DEBUG o.s.data.jpa.repository.query.JpaQueryFactory.fromQueryAnnotation:55 - Looking up query for method getWithMenu
21:20:47.247 DEBUG o.s.data.jpa.repository.query.JpaQueryFactory.fromQueryAnnotation:55 - Looking up query for method delete
21:20:47.260 DEBUG o.s.data.jpa.repository.query.JpaQueryFactory.fromQueryAnnotation:55 - Looking up query for method getWithVotesAndMenus
21:20:47.264 DEBUG o.s.data.jpa.repository.query.JpaQueryFactory.fromQueryAnnotation:55 - Looking up query for method delete
21:20:47.268 DEBUG o.s.data.jpa.repository.query.JpaQueryFactory.fromQueryAnnotation:55 - Looking up query for method getWithVotes
21:20:47.269 DEBUG o.s.data.jpa.repository.query.JpaQueryFactory.fromQueryAnnotation:55 - Looking up query for method getWithMenus
21:20:47.294 DEBUG o.s.data.jpa.repository.query.JpaQueryFactory.fromQueryAnnotation:55 - Looking up query for method getWithRestaurant
21:20:47.297 DEBUG o.s.data.jpa.repository.query.JpaQueryFactory.fromQueryAnnotation:55 - Looking up query for method delete
21:20:47.300 DEBUG o.s.data.jpa.repository.query.JpaQueryFactory.fromQueryAnnotation:55 - Looking up query for method getWithRestaurantAndMeals
21:20:47.302 DEBUG o.s.data.jpa.repository.query.JpaQueryFactory.fromQueryAnnotation:55 - Looking up query for method getAll
21:20:47.304 DEBUG o.s.data.jpa.repository.query.JpaQueryFactory.fromQueryAnnotation:55 - Looking up query for method findByRestaurantIdAndAddDate
21:20:47.316 DEBUG o.springframework.jdbc.datasource.DataSourceUtils.doGetConnection:114 - Fetching JDBC Connection from DataSource
21:20:47.317 INFO  o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:442 - Executing SQL script from class path resource [db/initDB_hsql.sql]
21:20:47.320 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 0 returned as update count for SQL: DROP TABLE user_roles IF EXISTS
21:20:47.321 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 0 returned as update count for SQL: DROP TABLE votes IF EXISTS
21:20:47.322 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 0 returned as update count for SQL: DROP TABLE users IF EXISTS
21:20:47.322 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 0 returned as update count for SQL: DROP TABLE meals IF EXISTS
21:20:47.323 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 0 returned as update count for SQL: DROP TABLE menus IF EXISTS
21:20:47.323 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 0 returned as update count for SQL: DROP TABLE restaurants IF EXISTS
21:20:47.323 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 0 returned as update count for SQL: DROP SEQUENCE global_seq IF EXISTS
21:20:47.324 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 0 returned as update count for SQL: CREATE SEQUENCE GLOBAL_SEQ AS INTEGER START WITH 100000
21:20:47.325 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 0 returned as update count for SQL: CREATE TABLE USERS ( id INTEGER GENERATED BY DEFAULT AS SEQUENCE GLOBAL_SEQ PRIMARY KEY, name VARCHAR(255) NOT NULL, email VARCHAR(255) NOT NULL, password VARCHAR(255) NOT NULL, registered TIMESTAMP DEFAULT now() NOT NULL, enabled BOOLEAN DEFAULT TRUE NOT NULL, CONSTRAINT users_unique_email_idx UNIQUE (email) )
21:20:47.325 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 0 returned as update count for SQL: CREATE TABLE USER_ROLES ( user_id INTEGER NOT NULL, role VARCHAR(255), CONSTRAINT user_roles_idx UNIQUE (user_id, role), FOREIGN KEY (user_id) REFERENCES USERS (id) ON DELETE CASCADE )
21:20:47.326 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 0 returned as update count for SQL: CREATE TABLE RESTAURANTS ( id INTEGER GENERATED BY DEFAULT AS SEQUENCE GLOBAL_SEQ PRIMARY KEY, name VARCHAR(255) NOT NULL, CONSTRAINT restaurant_name_idx UNIQUE (name) )
21:20:47.327 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 0 returned as update count for SQL: CREATE TABLE VOTES ( id INTEGER GENERATED BY DEFAULT AS SEQUENCE GLOBAL_SEQ NOT NULL, user_id INTEGER NOT NULL, date DATE DEFAULT CURRENT_DATE NOT NULL, restaurant INTEGER NOT NULL, FOREIGN KEY (user_id) REFERENCES users (id) ON DELETE CASCADE, FOREIGN KEY (restaurant) REFERENCES restaurants (id) ON DELETE CASCADE, CONSTRAINT votes_unique_user_date_idx UNIQUE (user_id, date) )
21:20:47.327 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 0 returned as update count for SQL: CREATE TABLE MENUS ( id INTEGER GENERATED BY DEFAULT AS SEQUENCE GLOBAL_SEQ PRIMARY KEY, id_rest INTEGER NOT NULL, add_date DATE DEFAULT CURRENT_DATE NOT NULL, FOREIGN KEY (id_rest) REFERENCES RESTAURANTS (id) ON DELETE CASCADE, CONSTRAINT menus_unique_id_datetime_idx UNIQUE (id_rest, add_date) )
21:20:47.328 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 0 returned as update count for SQL: CREATE TABLE MEALS ( id INTEGER GENERATED BY DEFAULT AS SEQUENCE GLOBAL_SEQ, id_menu INTEGER NOT NULL, name VARCHAR(255) NOT NULL, price INT NOT NULL, FOREIGN KEY (id_menu) REFERENCES MENUS (id) ON DELETE CASCADE )
21:20:47.328 INFO  o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:508 - Executed SQL script from class path resource [db/initDB_hsql.sql] in 11 ms.
21:20:47.328 INFO  o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:442 - Executing SQL script from class path resource [db/populateDB.sql]
21:20:47.329 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 0 returned as update count for SQL: DELETE FROM user_roles
21:20:47.330 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:477 - SQLWarning ignored: SQL state '02000', error code '-1100', message [no data]
21:20:47.330 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 0 returned as update count for SQL: DELETE FROM votes
21:20:47.330 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:477 - SQLWarning ignored: SQL state '02000', error code '-1100', message [no data]
21:20:47.330 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 0 returned as update count for SQL: DELETE FROM users
21:20:47.330 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:477 - SQLWarning ignored: SQL state '02000', error code '-1100', message [no data]
21:20:47.331 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 0 returned as update count for SQL: DELETE FROM meals
21:20:47.331 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:477 - SQLWarning ignored: SQL state '02000', error code '-1100', message [no data]
21:20:47.331 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 0 returned as update count for SQL: DELETE FROM menus
21:20:47.331 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:477 - SQLWarning ignored: SQL state '02000', error code '-1100', message [no data]
21:20:47.332 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 0 returned as update count for SQL: DELETE FROM restaurants
21:20:47.332 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:477 - SQLWarning ignored: SQL state '02000', error code '-1100', message [no data]
21:20:47.332 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 0 returned as update count for SQL: ALTER SEQUENCE global_seq RESTART WITH 100000
21:20:47.333 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 2 returned as update count for SQL: INSERT INTO USERS (name, email, password) VALUES ('User', 'user@yandex.ru', '{noop}password'), ('Admin', 'admin@yandex.ru','{noop}admin')
21:20:47.333 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 3 returned as update count for SQL: INSERT INTO USER_ROLES (role, user_id) VALUES ('ROLE_USER', 100000), ('ROLE_ADMIN', 100001), ('ROLE_USER', 100001)
21:20:47.333 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 5 returned as update count for SQL: INSERT INTO RESTAURANTS (NAME) VALUES ('Russia'), ('Ukraine'), ('U Kolyana'), ('Almaz'), ('Fart')
21:20:47.335 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 7 returned as update count for SQL: INSERT INTO MENUS (ID_REST, ADD_DATE) VALUES (100002, '2015-05-01'), (100003, '2015-05-02'), (100004, '2015-05-03'), (100005, '2015-05-01'), (100006, '2015-05-02'), (100002, '2015-05-02'), (100002, CURRENT_DATE)
21:20:47.335 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 7 returned as update count for SQL: INSERT INTO MEALS (ID_MENU, NAME, PRICE) VALUES (100007, 'Apple', 5), (100008, 'Juice', 10), (100009, 'Potato', 20), (100010, 'Bananas', 30), (100011, 'Bread', 40), (100007, 'Bottle of water', 50), (100013, 'Mango', 100)
21:20:47.337 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 6 returned as update count for SQL: INSERT INTO VOTES (USER_ID, DATE, RESTAURANT) VALUES (100000, '2015-05-01', 100002), (100000, '2015-05-02', 100003), (100000, '2015-05-03', 100004), (100001, '2015-05-01', 100005), (100001, '2015-05-02', 100006), (100001, '2015-05-03', 100002)
21:20:47.337 INFO  o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:508 - Executed SQL script from class path resource [db/populateDB.sql] in 9 ms.
21:20:47.337 DEBUG o.springframework.jdbc.datasource.DataSourceUtils.doReleaseConnection:340 - Returning JDBC Connection to DataSource
21:20:47.775 INFO  o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:442 - Executing SQL script from class path resource [db/populateDB.sql]
21:20:47.776 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 3 returned as update count for SQL: DELETE FROM user_roles
21:20:47.777 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 6 returned as update count for SQL: DELETE FROM votes
21:20:47.777 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 2 returned as update count for SQL: DELETE FROM users
21:20:47.778 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 7 returned as update count for SQL: DELETE FROM meals
21:20:47.778 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 7 returned as update count for SQL: DELETE FROM menus
21:20:47.778 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 5 returned as update count for SQL: DELETE FROM restaurants
21:20:47.803 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 0 returned as update count for SQL: ALTER SEQUENCE global_seq RESTART WITH 100000
21:20:47.804 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 2 returned as update count for SQL: INSERT INTO USERS (name, email, password) VALUES ('User', 'user@yandex.ru', '{noop}password'), ('Admin', 'admin@yandex.ru','{noop}admin')
21:20:47.804 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 3 returned as update count for SQL: INSERT INTO USER_ROLES (role, user_id) VALUES ('ROLE_USER', 100000), ('ROLE_ADMIN', 100001), ('ROLE_USER', 100001)
21:20:47.805 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 5 returned as update count for SQL: INSERT INTO RESTAURANTS (NAME) VALUES ('Russia'), ('Ukraine'), ('U Kolyana'), ('Almaz'), ('Fart')
21:20:47.806 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 7 returned as update count for SQL: INSERT INTO MENUS (ID_REST, ADD_DATE) VALUES (100002, '2015-05-01'), (100003, '2015-05-02'), (100004, '2015-05-03'), (100005, '2015-05-01'), (100006, '2015-05-02'), (100002, '2015-05-02'), (100002, CURRENT_DATE)
21:20:47.806 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 7 returned as update count for SQL: INSERT INTO MEALS (ID_MENU, NAME, PRICE) VALUES (100007, 'Apple', 5), (100008, 'Juice', 10), (100009, 'Potato', 20), (100010, 'Bananas', 30), (100011, 'Bread', 40), (100007, 'Bottle of water', 50), (100013, 'Mango', 100)
21:20:47.807 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 6 returned as update count for SQL: INSERT INTO VOTES (USER_ID, DATE, RESTAURANT) VALUES (100000, '2015-05-01', 100002), (100000, '2015-05-02', 100003), (100000, '2015-05-03', 100004), (100001, '2015-05-01', 100005), (100001, '2015-05-02', 100006), (100001, '2015-05-03', 100002)
21:20:47.808 INFO  o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:508 - Executed SQL script from class path resource [db/populateDB.sql] in 33 ms.
21:20:47.809 WARN  o.h.e.j.s.SqlExceptionHelper$StandardWarningHandler.logWarning:217 - SQL Warning Code: -1100, SQLState: 02000
21:20:47.809 WARN  o.h.e.j.s.SqlExceptionHelper$StandardWarningHandler.logWarning:218 - no data
Hibernate: 
    call next value for global_seq
Hibernate: 
    /* insert ru.neustupov.votingforrestaurants.model.Vote
        */ insert 
        into
            votes
            (date, restaurant, user_id, id) 
        values
            (?, ?, ?, ?)
21:20:47.818 DEBUG o.springframework.jdbc.datasource.DataSourceUtils.prepareConnectionForTransaction:176 - Setting JDBC Connection [ProxyConnection[PooledConnection[org.hsqldb.jdbc.JDBCConnection@45e35a0d]]] read-only
Hibernate: 
    /* SELECT
        v 
    FROM
        Vote v */ select
            vote0_.id as id1_5_0_,
            restaurant1_.id as id1_2_1_,
            user2_.id as id1_4_2_,
            vote0_.date as date2_5_0_,
            vote0_.restaurant as restaura3_5_0_,
            vote0_.user_id as user_id4_5_0_,
            restaurant1_.name as name2_2_1_,
            user2_.name as name2_4_2_,
            user2_.email as email3_4_2_,
            user2_.enabled as enabled4_4_2_,
            user2_.password as password5_4_2_,
            user2_.registered as register6_4_2_ 
        from
            votes vote0_ 
        left outer join
            restaurants restaurant1_ 
                on vote0_.restaurant=restaurant1_.id 
        left outer join
            users user2_ 
                on vote0_.user_id=user2_.id
Hibernate: 
    select
        roles0_.user_id as user_id1_3_0_,
        roles0_.role as role2_3_0_ 
    from
        user_roles roles0_ 
    where
        roles0_.user_id=?
Hibernate: 
    select
        roles0_.user_id as user_id1_3_0_,
        roles0_.role as role2_3_0_ 
    from
        user_roles roles0_ 
    where
        roles0_.user_id=?
21:20:47.824 DEBUG o.springframework.jdbc.datasource.DataSourceUtils.resetConnectionAfterTransaction:233 - Resetting read-only flag of JDBC Connection [ProxyConnection[PooledConnection[org.hsqldb.jdbc.JDBCConnection@45e35a0d]]]
21:20:47.827 INFO  o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:442 - Executing SQL script from class path resource [db/populateDB.sql]
21:20:47.828 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 3 returned as update count for SQL: DELETE FROM user_roles
21:20:47.828 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 7 returned as update count for SQL: DELETE FROM votes
21:20:47.829 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 2 returned as update count for SQL: DELETE FROM users
21:20:47.829 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 7 returned as update count for SQL: DELETE FROM meals
21:20:47.829 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 7 returned as update count for SQL: DELETE FROM menus
21:20:47.830 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 5 returned as update count for SQL: DELETE FROM restaurants
21:20:47.830 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 0 returned as update count for SQL: ALTER SEQUENCE global_seq RESTART WITH 100000
21:20:47.831 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 2 returned as update count for SQL: INSERT INTO USERS (name, email, password) VALUES ('User', 'user@yandex.ru', '{noop}password'), ('Admin', 'admin@yandex.ru','{noop}admin')
21:20:47.831 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 3 returned as update count for SQL: INSERT INTO USER_ROLES (role, user_id) VALUES ('ROLE_USER', 100000), ('ROLE_ADMIN', 100001), ('ROLE_USER', 100001)
21:20:47.832 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 5 returned as update count for SQL: INSERT INTO RESTAURANTS (NAME) VALUES ('Russia'), ('Ukraine'), ('U Kolyana'), ('Almaz'), ('Fart')
21:20:47.832 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 7 returned as update count for SQL: INSERT INTO MENUS (ID_REST, ADD_DATE) VALUES (100002, '2015-05-01'), (100003, '2015-05-02'), (100004, '2015-05-03'), (100005, '2015-05-01'), (100006, '2015-05-02'), (100002, '2015-05-02'), (100002, CURRENT_DATE)
21:20:47.833 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 7 returned as update count for SQL: INSERT INTO MEALS (ID_MENU, NAME, PRICE) VALUES (100007, 'Apple', 5), (100008, 'Juice', 10), (100009, 'Potato', 20), (100010, 'Bananas', 30), (100011, 'Bread', 40), (100007, 'Bottle of water', 50), (100013, 'Mango', 100)
21:20:47.834 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 6 returned as update count for SQL: INSERT INTO VOTES (USER_ID, DATE, RESTAURANT) VALUES (100000, '2015-05-01', 100002), (100000, '2015-05-02', 100003), (100000, '2015-05-03', 100004), (100001, '2015-05-01', 100005), (100001, '2015-05-02', 100006), (100001, '2015-05-03', 100002)
21:20:47.834 INFO  o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:508 - Executed SQL script from class path resource [db/populateDB.sql] in 7 ms.
Hibernate: 
    /* DELETE 
    FROM
        Vote v 
    WHERE
        v.id=:id 
        AND v.user.id=:userId */ delete 
        from
            votes 
        where
            id=? 
            and user_id=?
21:20:47.838 DEBUG o.springframework.jdbc.datasource.DataSourceUtils.prepareConnectionForTransaction:176 - Setting JDBC Connection [ProxyConnection[PooledConnection[org.hsqldb.jdbc.JDBCConnection@45e35a0d]]] read-only
Hibernate: 
    /* SELECT
        v 
    FROM
        Vote v */ select
            vote0_.id as id1_5_0_,
            restaurant1_.id as id1_2_1_,
            user2_.id as id1_4_2_,
            vote0_.date as date2_5_0_,
            vote0_.restaurant as restaura3_5_0_,
            vote0_.user_id as user_id4_5_0_,
            restaurant1_.name as name2_2_1_,
            user2_.name as name2_4_2_,
            user2_.email as email3_4_2_,
            user2_.enabled as enabled4_4_2_,
            user2_.password as password5_4_2_,
            user2_.registered as register6_4_2_ 
        from
            votes vote0_ 
        left outer join
            restaurants restaurant1_ 
                on vote0_.restaurant=restaurant1_.id 
        left outer join
            users user2_ 
                on vote0_.user_id=user2_.id
Hibernate: 
    select
        roles0_.user_id as user_id1_3_0_,
        roles0_.role as role2_3_0_ 
    from
        user_roles roles0_ 
    where
        roles0_.user_id=?
Hibernate: 
    select
        roles0_.user_id as user_id1_3_0_,
        roles0_.role as role2_3_0_ 
    from
        user_roles roles0_ 
    where
        roles0_.user_id=?
21:20:47.843 DEBUG o.springframework.jdbc.datasource.DataSourceUtils.resetConnectionAfterTransaction:233 - Resetting read-only flag of JDBC Connection [ProxyConnection[PooledConnection[org.hsqldb.jdbc.JDBCConnection@45e35a0d]]]
21:20:47.845 INFO  o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:442 - Executing SQL script from class path resource [db/populateDB.sql]
21:20:47.846 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 3 returned as update count for SQL: DELETE FROM user_roles
21:20:47.847 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 5 returned as update count for SQL: DELETE FROM votes
21:20:47.847 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 2 returned as update count for SQL: DELETE FROM users
21:20:47.847 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 7 returned as update count for SQL: DELETE FROM meals
21:20:47.848 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 7 returned as update count for SQL: DELETE FROM menus
21:20:47.848 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 5 returned as update count for SQL: DELETE FROM restaurants
21:20:47.849 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 0 returned as update count for SQL: ALTER SEQUENCE global_seq RESTART WITH 100000
21:20:47.849 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 2 returned as update count for SQL: INSERT INTO USERS (name, email, password) VALUES ('User', 'user@yandex.ru', '{noop}password'), ('Admin', 'admin@yandex.ru','{noop}admin')
21:20:47.849 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 3 returned as update count for SQL: INSERT INTO USER_ROLES (role, user_id) VALUES ('ROLE_USER', 100000), ('ROLE_ADMIN', 100001), ('ROLE_USER', 100001)
21:20:47.850 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 5 returned as update count for SQL: INSERT INTO RESTAURANTS (NAME) VALUES ('Russia'), ('Ukraine'), ('U Kolyana'), ('Almaz'), ('Fart')
21:20:47.851 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 7 returned as update count for SQL: INSERT INTO MENUS (ID_REST, ADD_DATE) VALUES (100002, '2015-05-01'), (100003, '2015-05-02'), (100004, '2015-05-03'), (100005, '2015-05-01'), (100006, '2015-05-02'), (100002, '2015-05-02'), (100002, CURRENT_DATE)
21:20:47.851 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 7 returned as update count for SQL: INSERT INTO MEALS (ID_MENU, NAME, PRICE) VALUES (100007, 'Apple', 5), (100008, 'Juice', 10), (100009, 'Potato', 20), (100010, 'Bananas', 30), (100011, 'Bread', 40), (100007, 'Bottle of water', 50), (100013, 'Mango', 100)
21:20:47.852 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 6 returned as update count for SQL: INSERT INTO VOTES (USER_ID, DATE, RESTAURANT) VALUES (100000, '2015-05-01', 100002), (100000, '2015-05-02', 100003), (100000, '2015-05-03', 100004), (100001, '2015-05-01', 100005), (100001, '2015-05-02', 100006), (100001, '2015-05-03', 100002)
21:20:47.852 INFO  o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:508 - Executed SQL script from class path resource [db/populateDB.sql] in 7 ms.
21:20:47.853 DEBUG o.springframework.jdbc.datasource.DataSourceUtils.prepareConnectionForTransaction:176 - Setting JDBC Connection [ProxyConnection[PooledConnection[org.hsqldb.jdbc.JDBCConnection@45e35a0d]]] read-only
Hibernate: 
    /* SELECT
        v 
    FROM
        Vote v */ select
            vote0_.id as id1_5_0_,
            restaurant1_.id as id1_2_1_,
            user2_.id as id1_4_2_,
            vote0_.date as date2_5_0_,
            vote0_.restaurant as restaura3_5_0_,
            vote0_.user_id as user_id4_5_0_,
            restaurant1_.name as name2_2_1_,
            user2_.name as name2_4_2_,
            user2_.email as email3_4_2_,
            user2_.enabled as enabled4_4_2_,
            user2_.password as password5_4_2_,
            user2_.registered as register6_4_2_ 
        from
            votes vote0_ 
        left outer join
            restaurants restaurant1_ 
                on vote0_.restaurant=restaurant1_.id 
        left outer join
            users user2_ 
                on vote0_.user_id=user2_.id
Hibernate: 
    select
        roles0_.user_id as user_id1_3_0_,
        roles0_.role as role2_3_0_ 
    from
        user_roles roles0_ 
    where
        roles0_.user_id=?
Hibernate: 
    select
        roles0_.user_id as user_id1_3_0_,
        roles0_.role as role2_3_0_ 
    from
        user_roles roles0_ 
    where
        roles0_.user_id=?
21:20:47.859 DEBUG o.springframework.jdbc.datasource.DataSourceUtils.resetConnectionAfterTransaction:233 - Resetting read-only flag of JDBC Connection [ProxyConnection[PooledConnection[org.hsqldb.jdbc.JDBCConnection@45e35a0d]]]
21:20:47.861 INFO  o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:442 - Executing SQL script from class path resource [db/populateDB.sql]
21:20:47.862 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 3 returned as update count for SQL: DELETE FROM user_roles
21:20:47.863 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 6 returned as update count for SQL: DELETE FROM votes
21:20:47.863 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 2 returned as update count for SQL: DELETE FROM users
21:20:47.863 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 7 returned as update count for SQL: DELETE FROM meals
21:20:47.864 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 7 returned as update count for SQL: DELETE FROM menus
21:20:47.864 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 5 returned as update count for SQL: DELETE FROM restaurants
21:20:47.865 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 0 returned as update count for SQL: ALTER SEQUENCE global_seq RESTART WITH 100000
21:20:47.865 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 2 returned as update count for SQL: INSERT INTO USERS (name, email, password) VALUES ('User', 'user@yandex.ru', '{noop}password'), ('Admin', 'admin@yandex.ru','{noop}admin')
21:20:47.865 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 3 returned as update count for SQL: INSERT INTO USER_ROLES (role, user_id) VALUES ('ROLE_USER', 100000), ('ROLE_ADMIN', 100001), ('ROLE_USER', 100001)
21:20:47.866 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 5 returned as update count for SQL: INSERT INTO RESTAURANTS (NAME) VALUES ('Russia'), ('Ukraine'), ('U Kolyana'), ('Almaz'), ('Fart')
21:20:47.867 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 7 returned as update count for SQL: INSERT INTO MENUS (ID_REST, ADD_DATE) VALUES (100002, '2015-05-01'), (100003, '2015-05-02'), (100004, '2015-05-03'), (100005, '2015-05-01'), (100006, '2015-05-02'), (100002, '2015-05-02'), (100002, CURRENT_DATE)
21:20:47.867 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 7 returned as update count for SQL: INSERT INTO MEALS (ID_MENU, NAME, PRICE) VALUES (100007, 'Apple', 5), (100008, 'Juice', 10), (100009, 'Potato', 20), (100010, 'Bananas', 30), (100011, 'Bread', 40), (100007, 'Bottle of water', 50), (100013, 'Mango', 100)
21:20:47.868 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 6 returned as update count for SQL: INSERT INTO VOTES (USER_ID, DATE, RESTAURANT) VALUES (100000, '2015-05-01', 100002), (100000, '2015-05-02', 100003), (100000, '2015-05-03', 100004), (100001, '2015-05-01', 100005), (100001, '2015-05-02', 100006), (100001, '2015-05-03', 100002)
21:20:47.868 INFO  o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:508 - Executed SQL script from class path resource [db/populateDB.sql] in 7 ms.
21:20:47.870 DEBUG o.springframework.jdbc.datasource.DataSourceUtils.prepareConnectionForTransaction:176 - Setting JDBC Connection [ProxyConnection[PooledConnection[org.hsqldb.jdbc.JDBCConnection@45e35a0d]]] read-only
Hibernate: 
    select
        vote0_.id as id1_5_0_,
        vote0_.date as date2_5_0_,
        vote0_.restaurant as restaura3_5_0_,
        vote0_.user_id as user_id4_5_0_ 
    from
        votes vote0_ 
    where
        vote0_.id=?
21:20:47.871 DEBUG o.springframework.jdbc.datasource.DataSourceUtils.resetConnectionAfterTransaction:233 - Resetting read-only flag of JDBC Connection [ProxyConnection[PooledConnection[org.hsqldb.jdbc.JDBCConnection@45e35a0d]]]
21:20:47.874 INFO  o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:442 - Executing SQL script from class path resource [db/populateDB.sql]
21:20:47.875 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 3 returned as update count for SQL: DELETE FROM user_roles
21:20:47.875 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 6 returned as update count for SQL: DELETE FROM votes
21:20:47.875 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 2 returned as update count for SQL: DELETE FROM users
21:20:47.876 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 7 returned as update count for SQL: DELETE FROM meals
21:20:47.876 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 7 returned as update count for SQL: DELETE FROM menus
21:20:47.876 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 5 returned as update count for SQL: DELETE FROM restaurants
21:20:47.877 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 0 returned as update count for SQL: ALTER SEQUENCE global_seq RESTART WITH 100000
21:20:47.877 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 2 returned as update count for SQL: INSERT INTO USERS (name, email, password) VALUES ('User', 'user@yandex.ru', '{noop}password'), ('Admin', 'admin@yandex.ru','{noop}admin')
21:20:47.878 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 3 returned as update count for SQL: INSERT INTO USER_ROLES (role, user_id) VALUES ('ROLE_USER', 100000), ('ROLE_ADMIN', 100001), ('ROLE_USER', 100001)
21:20:47.878 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 5 returned as update count for SQL: INSERT INTO RESTAURANTS (NAME) VALUES ('Russia'), ('Ukraine'), ('U Kolyana'), ('Almaz'), ('Fart')
21:20:47.879 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 7 returned as update count for SQL: INSERT INTO MENUS (ID_REST, ADD_DATE) VALUES (100002, '2015-05-01'), (100003, '2015-05-02'), (100004, '2015-05-03'), (100005, '2015-05-01'), (100006, '2015-05-02'), (100002, '2015-05-02'), (100002, CURRENT_DATE)
21:20:47.880 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 7 returned as update count for SQL: INSERT INTO MEALS (ID_MENU, NAME, PRICE) VALUES (100007, 'Apple', 5), (100008, 'Juice', 10), (100009, 'Potato', 20), (100010, 'Bananas', 30), (100011, 'Bread', 40), (100007, 'Bottle of water', 50), (100013, 'Mango', 100)
21:20:47.881 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 6 returned as update count for SQL: INSERT INTO VOTES (USER_ID, DATE, RESTAURANT) VALUES (100000, '2015-05-01', 100002), (100000, '2015-05-02', 100003), (100000, '2015-05-03', 100004), (100001, '2015-05-01', 100005), (100001, '2015-05-02', 100006), (100001, '2015-05-03', 100002)
21:20:47.881 INFO  o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:508 - Executed SQL script from class path resource [db/populateDB.sql] in 7 ms.
Hibernate: 
    /* DELETE 
    FROM
        Vote v 
    WHERE
        v.id=:id 
        AND v.user.id=:userId */ delete 
        from
            votes 
        where
            id=? 
            and user_id=?
21:20:47.883 WARN  o.h.e.j.s.SqlExceptionHelper$StandardWarningHandler.logWarning:217 - SQL Warning Code: -1100, SQLState: 02000
21:20:47.884 WARN  o.h.e.j.s.SqlExceptionHelper$StandardWarningHandler.logWarning:218 - no data
21:20:47.886 INFO  o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:442 - Executing SQL script from class path resource [db/populateDB.sql]
21:20:47.887 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 3 returned as update count for SQL: DELETE FROM user_roles
21:20:47.887 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 6 returned as update count for SQL: DELETE FROM votes
21:20:47.888 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 2 returned as update count for SQL: DELETE FROM users
21:20:47.888 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 7 returned as update count for SQL: DELETE FROM meals
21:20:47.888 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 7 returned as update count for SQL: DELETE FROM menus
21:20:47.889 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 5 returned as update count for SQL: DELETE FROM restaurants
21:20:47.889 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 0 returned as update count for SQL: ALTER SEQUENCE global_seq RESTART WITH 100000
21:20:47.890 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 2 returned as update count for SQL: INSERT INTO USERS (name, email, password) VALUES ('User', 'user@yandex.ru', '{noop}password'), ('Admin', 'admin@yandex.ru','{noop}admin')
21:20:47.890 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 3 returned as update count for SQL: INSERT INTO USER_ROLES (role, user_id) VALUES ('ROLE_USER', 100000), ('ROLE_ADMIN', 100001), ('ROLE_USER', 100001)
21:20:47.890 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 5 returned as update count for SQL: INSERT INTO RESTAURANTS (NAME) VALUES ('Russia'), ('Ukraine'), ('U Kolyana'), ('Almaz'), ('Fart')
21:20:47.891 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 7 returned as update count for SQL: INSERT INTO MENUS (ID_REST, ADD_DATE) VALUES (100002, '2015-05-01'), (100003, '2015-05-02'), (100004, '2015-05-03'), (100005, '2015-05-01'), (100006, '2015-05-02'), (100002, '2015-05-02'), (100002, CURRENT_DATE)
21:20:47.892 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 7 returned as update count for SQL: INSERT INTO MEALS (ID_MENU, NAME, PRICE) VALUES (100007, 'Apple', 5), (100008, 'Juice', 10), (100009, 'Potato', 20), (100010, 'Bananas', 30), (100011, 'Bread', 40), (100007, 'Bottle of water', 50), (100013, 'Mango', 100)
21:20:47.892 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 6 returned as update count for SQL: INSERT INTO VOTES (USER_ID, DATE, RESTAURANT) VALUES (100000, '2015-05-01', 100002), (100000, '2015-05-02', 100003), (100000, '2015-05-03', 100004), (100001, '2015-05-01', 100005), (100001, '2015-05-02', 100006), (100001, '2015-05-03', 100002)
21:20:47.893 INFO  o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:508 - Executed SQL script from class path resource [db/populateDB.sql] in 7 ms.
21:20:47.894 DEBUG o.springframework.jdbc.datasource.DataSourceUtils.prepareConnectionForTransaction:176 - Setting JDBC Connection [ProxyConnection[PooledConnection[org.hsqldb.jdbc.JDBCConnection@45e35a0d]]] read-only
Hibernate: 
    /* SELECT
        v 
    FROM
        Vote v 
    WHERE
        v.user.id=:userId 
        AND v.date=CURRENT_DATE  */ select
            vote0_.id as id1_5_,
            vote0_.date as date2_5_,
            vote0_.restaurant as restaura3_5_,
            vote0_.user_id as user_id4_5_ 
        from
            votes vote0_ 
        where
            vote0_.user_id=? 
            and vote0_.date=CURRENT_DATE
21:20:47.896 DEBUG o.springframework.jdbc.datasource.DataSourceUtils.resetConnectionAfterTransaction:233 - Resetting read-only flag of JDBC Connection [ProxyConnection[PooledConnection[org.hsqldb.jdbc.JDBCConnection@45e35a0d]]]
21:20:47.898 INFO  o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:442 - Executing SQL script from class path resource [db/populateDB.sql]
21:20:47.899 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 3 returned as update count for SQL: DELETE FROM user_roles
21:20:47.899 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 6 returned as update count for SQL: DELETE FROM votes
21:20:47.899 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 2 returned as update count for SQL: DELETE FROM users
21:20:47.900 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 7 returned as update count for SQL: DELETE FROM meals
21:20:47.900 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 7 returned as update count for SQL: DELETE FROM menus
21:20:47.900 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 5 returned as update count for SQL: DELETE FROM restaurants
21:20:47.901 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 0 returned as update count for SQL: ALTER SEQUENCE global_seq RESTART WITH 100000
21:20:47.901 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 2 returned as update count for SQL: INSERT INTO USERS (name, email, password) VALUES ('User', 'user@yandex.ru', '{noop}password'), ('Admin', 'admin@yandex.ru','{noop}admin')
21:20:47.902 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 3 returned as update count for SQL: INSERT INTO USER_ROLES (role, user_id) VALUES ('ROLE_USER', 100000), ('ROLE_ADMIN', 100001), ('ROLE_USER', 100001)
21:20:47.902 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 5 returned as update count for SQL: INSERT INTO RESTAURANTS (NAME) VALUES ('Russia'), ('Ukraine'), ('U Kolyana'), ('Almaz'), ('Fart')
21:20:47.903 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 7 returned as update count for SQL: INSERT INTO MENUS (ID_REST, ADD_DATE) VALUES (100002, '2015-05-01'), (100003, '2015-05-02'), (100004, '2015-05-03'), (100005, '2015-05-01'), (100006, '2015-05-02'), (100002, '2015-05-02'), (100002, CURRENT_DATE)
21:20:47.903 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 7 returned as update count for SQL: INSERT INTO MEALS (ID_MENU, NAME, PRICE) VALUES (100007, 'Apple', 5), (100008, 'Juice', 10), (100009, 'Potato', 20), (100010, 'Bananas', 30), (100011, 'Bread', 40), (100007, 'Bottle of water', 50), (100013, 'Mango', 100)
21:20:47.904 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 6 returned as update count for SQL: INSERT INTO VOTES (USER_ID, DATE, RESTAURANT) VALUES (100000, '2015-05-01', 100002), (100000, '2015-05-02', 100003), (100000, '2015-05-03', 100004), (100001, '2015-05-01', 100005), (100001, '2015-05-02', 100006), (100001, '2015-05-03', 100002)
21:20:47.904 INFO  o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:508 - Executed SQL script from class path resource [db/populateDB.sql] in 6 ms.
21:20:47.905 DEBUG o.springframework.jdbc.datasource.DataSourceUtils.prepareConnectionForTransaction:176 - Setting JDBC Connection [ProxyConnection[PooledConnection[org.hsqldb.jdbc.JDBCConnection@45e35a0d]]] read-only
Hibernate: 
    select
        vote0_.id as id1_5_0_,
        vote0_.date as date2_5_0_,
        vote0_.restaurant as restaura3_5_0_,
        vote0_.user_id as user_id4_5_0_ 
    from
        votes vote0_ 
    where
        vote0_.id=?
21:20:47.907 DEBUG o.springframework.jdbc.datasource.DataSourceUtils.resetConnectionAfterTransaction:233 - Resetting read-only flag of JDBC Connection [ProxyConnection[PooledConnection[org.hsqldb.jdbc.JDBCConnection@45e35a0d]]]
21:20:47.909 INFO  o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:442 - Executing SQL script from class path resource [db/populateDB.sql]
21:20:47.911 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 3 returned as update count for SQL: DELETE FROM user_roles
21:20:47.911 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 6 returned as update count for SQL: DELETE FROM votes
21:20:47.912 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 2 returned as update count for SQL: DELETE FROM users
21:20:47.912 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 7 returned as update count for SQL: DELETE FROM meals
21:20:47.912 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 7 returned as update count for SQL: DELETE FROM menus
21:20:47.913 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 5 returned as update count for SQL: DELETE FROM restaurants
21:20:47.913 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 0 returned as update count for SQL: ALTER SEQUENCE global_seq RESTART WITH 100000
21:20:47.914 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 2 returned as update count for SQL: INSERT INTO USERS (name, email, password) VALUES ('User', 'user@yandex.ru', '{noop}password'), ('Admin', 'admin@yandex.ru','{noop}admin')
21:20:47.914 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 3 returned as update count for SQL: INSERT INTO USER_ROLES (role, user_id) VALUES ('ROLE_USER', 100000), ('ROLE_ADMIN', 100001), ('ROLE_USER', 100001)
21:20:47.915 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 5 returned as update count for SQL: INSERT INTO RESTAURANTS (NAME) VALUES ('Russia'), ('Ukraine'), ('U Kolyana'), ('Almaz'), ('Fart')
21:20:47.916 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 7 returned as update count for SQL: INSERT INTO MENUS (ID_REST, ADD_DATE) VALUES (100002, '2015-05-01'), (100003, '2015-05-02'), (100004, '2015-05-03'), (100005, '2015-05-01'), (100006, '2015-05-02'), (100002, '2015-05-02'), (100002, CURRENT_DATE)
21:20:47.916 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 7 returned as update count for SQL: INSERT INTO MEALS (ID_MENU, NAME, PRICE) VALUES (100007, 'Apple', 5), (100008, 'Juice', 10), (100009, 'Potato', 20), (100010, 'Bananas', 30), (100011, 'Bread', 40), (100007, 'Bottle of water', 50), (100013, 'Mango', 100)
21:20:47.917 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 6 returned as update count for SQL: INSERT INTO VOTES (USER_ID, DATE, RESTAURANT) VALUES (100000, '2015-05-01', 100002), (100000, '2015-05-02', 100003), (100000, '2015-05-03', 100004), (100001, '2015-05-01', 100005), (100001, '2015-05-02', 100006), (100001, '2015-05-03', 100002)
21:20:47.917 INFO  o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:508 - Executed SQL script from class path resource [db/populateDB.sql] in 7 ms.
Hibernate: 
    call next value for global_seq
Hibernate: 
    /* insert ru.neustupov.votingforrestaurants.model.Vote
        */ insert 
        into
            votes
            (date, restaurant, user_id, id) 
        values
            (?, ?, ?, ?)
21:20:47.921 DEBUG o.springframework.jdbc.datasource.DataSourceUtils.prepareConnectionForTransaction:176 - Setting JDBC Connection [ProxyConnection[PooledConnection[org.hsqldb.jdbc.JDBCConnection@45e35a0d]]] read-only
Hibernate: 
    /* SELECT
        v 
    FROM
        Vote v 
    WHERE
        v.user.id=:userId 
        AND v.date=CURRENT_DATE  */ select
            vote0_.id as id1_5_,
            vote0_.date as date2_5_,
            vote0_.restaurant as restaura3_5_,
            vote0_.user_id as user_id4_5_ 
        from
            votes vote0_ 
        where
            vote0_.user_id=? 
            and vote0_.date=CURRENT_DATE
21:20:47.923 DEBUG o.springframework.jdbc.datasource.DataSourceUtils.resetConnectionAfterTransaction:233 - Resetting read-only flag of JDBC Connection [ProxyConnection[PooledConnection[org.hsqldb.jdbc.JDBCConnection@45e35a0d]]]
[INFO] Tests run: 8, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 1.197 s - in ru.neustupov.votingforrestaurants.service.VoteServiceTest
[INFO] Running ru.neustupov.votingforrestaurants.service.MealServiceTest
21:20:47.932 INFO  o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:442 - Executing SQL script from class path resource [db/populateDB.sql]
21:20:47.933 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 3 returned as update count for SQL: DELETE FROM user_roles
21:20:47.934 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 7 returned as update count for SQL: DELETE FROM votes
21:20:47.934 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 2 returned as update count for SQL: DELETE FROM users
21:20:47.934 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 7 returned as update count for SQL: DELETE FROM meals
21:20:47.934 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 7 returned as update count for SQL: DELETE FROM menus
21:20:47.935 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 5 returned as update count for SQL: DELETE FROM restaurants
21:20:47.935 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 0 returned as update count for SQL: ALTER SEQUENCE global_seq RESTART WITH 100000
21:20:47.936 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 2 returned as update count for SQL: INSERT INTO USERS (name, email, password) VALUES ('User', 'user@yandex.ru', '{noop}password'), ('Admin', 'admin@yandex.ru','{noop}admin')
21:20:47.936 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 3 returned as update count for SQL: INSERT INTO USER_ROLES (role, user_id) VALUES ('ROLE_USER', 100000), ('ROLE_ADMIN', 100001), ('ROLE_USER', 100001)
21:20:47.936 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 5 returned as update count for SQL: INSERT INTO RESTAURANTS (NAME) VALUES ('Russia'), ('Ukraine'), ('U Kolyana'), ('Almaz'), ('Fart')
21:20:47.937 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 7 returned as update count for SQL: INSERT INTO MENUS (ID_REST, ADD_DATE) VALUES (100002, '2015-05-01'), (100003, '2015-05-02'), (100004, '2015-05-03'), (100005, '2015-05-01'), (100006, '2015-05-02'), (100002, '2015-05-02'), (100002, CURRENT_DATE)
21:20:47.938 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 7 returned as update count for SQL: INSERT INTO MEALS (ID_MENU, NAME, PRICE) VALUES (100007, 'Apple', 5), (100008, 'Juice', 10), (100009, 'Potato', 20), (100010, 'Bananas', 30), (100011, 'Bread', 40), (100007, 'Bottle of water', 50), (100013, 'Mango', 100)
21:20:47.938 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 6 returned as update count for SQL: INSERT INTO VOTES (USER_ID, DATE, RESTAURANT) VALUES (100000, '2015-05-01', 100002), (100000, '2015-05-02', 100003), (100000, '2015-05-03', 100004), (100001, '2015-05-01', 100005), (100001, '2015-05-02', 100006), (100001, '2015-05-03', 100002)
21:20:47.938 INFO  o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:508 - Executed SQL script from class path resource [db/populateDB.sql] in 5 ms.
Hibernate: 
    select
        meal0_.id as id1_0_0_,
        meal0_.name as name2_0_0_,
        meal0_.id_menu as id_menu4_0_0_,
        meal0_.price as price3_0_0_ 
    from
        meals meal0_ 
    where
        meal0_.id=?
21:20:47.943 INFO  o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:442 - Executing SQL script from class path resource [db/populateDB.sql]
21:20:47.944 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 3 returned as update count for SQL: DELETE FROM user_roles
21:20:47.944 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 6 returned as update count for SQL: DELETE FROM votes
21:20:47.945 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 2 returned as update count for SQL: DELETE FROM users
21:20:47.945 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 7 returned as update count for SQL: DELETE FROM meals
21:20:47.945 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 7 returned as update count for SQL: DELETE FROM menus
21:20:47.946 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 5 returned as update count for SQL: DELETE FROM restaurants
21:20:47.946 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 0 returned as update count for SQL: ALTER SEQUENCE global_seq RESTART WITH 100000
21:20:47.946 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 2 returned as update count for SQL: INSERT INTO USERS (name, email, password) VALUES ('User', 'user@yandex.ru', '{noop}password'), ('Admin', 'admin@yandex.ru','{noop}admin')
21:20:47.947 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 3 returned as update count for SQL: INSERT INTO USER_ROLES (role, user_id) VALUES ('ROLE_USER', 100000), ('ROLE_ADMIN', 100001), ('ROLE_USER', 100001)
21:20:47.947 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 5 returned as update count for SQL: INSERT INTO RESTAURANTS (NAME) VALUES ('Russia'), ('Ukraine'), ('U Kolyana'), ('Almaz'), ('Fart')
21:20:47.948 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 7 returned as update count for SQL: INSERT INTO MENUS (ID_REST, ADD_DATE) VALUES (100002, '2015-05-01'), (100003, '2015-05-02'), (100004, '2015-05-03'), (100005, '2015-05-01'), (100006, '2015-05-02'), (100002, '2015-05-02'), (100002, CURRENT_DATE)
21:20:47.948 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 7 returned as update count for SQL: INSERT INTO MEALS (ID_MENU, NAME, PRICE) VALUES (100007, 'Apple', 5), (100008, 'Juice', 10), (100009, 'Potato', 20), (100010, 'Bananas', 30), (100011, 'Bread', 40), (100007, 'Bottle of water', 50), (100013, 'Mango', 100)
21:20:47.949 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 6 returned as update count for SQL: INSERT INTO VOTES (USER_ID, DATE, RESTAURANT) VALUES (100000, '2015-05-01', 100002), (100000, '2015-05-02', 100003), (100000, '2015-05-03', 100004), (100001, '2015-05-01', 100005), (100001, '2015-05-02', 100006), (100001, '2015-05-03', 100002)
21:20:47.949 INFO  o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:508 - Executed SQL script from class path resource [db/populateDB.sql] in 6 ms.
Hibernate: 
    call next value for global_seq
Hibernate: 
    /* insert ru.neustupov.votingforrestaurants.model.Meal
        */ insert 
        into
            meals
            (name, id_menu, price, id) 
        values
            (?, ?, ?, ?)
21:20:47.957 DEBUG o.springframework.jdbc.datasource.DataSourceUtils.prepareConnectionForTransaction:176 - Setting JDBC Connection [ProxyConnection[PooledConnection[org.hsqldb.jdbc.JDBCConnection@45e35a0d]]] read-only
Hibernate: 
    /* SELECT
        m 
    FROM
        Meal m 
    WHERE
        m.menu.id=:menuId */ select
            meal0_.id as id1_0_,
            meal0_.name as name2_0_,
            meal0_.id_menu as id_menu4_0_,
            meal0_.price as price3_0_ 
        from
            meals meal0_ 
        where
            meal0_.id_menu=?
21:20:47.959 DEBUG o.springframework.jdbc.datasource.DataSourceUtils.resetConnectionAfterTransaction:233 - Resetting read-only flag of JDBC Connection [ProxyConnection[PooledConnection[org.hsqldb.jdbc.JDBCConnection@45e35a0d]]]
21:20:47.962 INFO  o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:442 - Executing SQL script from class path resource [db/populateDB.sql]
21:20:47.963 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 3 returned as update count for SQL: DELETE FROM user_roles
21:20:47.963 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 6 returned as update count for SQL: DELETE FROM votes
21:20:47.963 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 2 returned as update count for SQL: DELETE FROM users
21:20:47.964 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 8 returned as update count for SQL: DELETE FROM meals
21:20:47.964 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 7 returned as update count for SQL: DELETE FROM menus
21:20:47.964 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 5 returned as update count for SQL: DELETE FROM restaurants
21:20:47.965 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 0 returned as update count for SQL: ALTER SEQUENCE global_seq RESTART WITH 100000
21:20:47.965 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 2 returned as update count for SQL: INSERT INTO USERS (name, email, password) VALUES ('User', 'user@yandex.ru', '{noop}password'), ('Admin', 'admin@yandex.ru','{noop}admin')
21:20:47.966 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 3 returned as update count for SQL: INSERT INTO USER_ROLES (role, user_id) VALUES ('ROLE_USER', 100000), ('ROLE_ADMIN', 100001), ('ROLE_USER', 100001)
21:20:47.966 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 5 returned as update count for SQL: INSERT INTO RESTAURANTS (NAME) VALUES ('Russia'), ('Ukraine'), ('U Kolyana'), ('Almaz'), ('Fart')
21:20:47.967 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 7 returned as update count for SQL: INSERT INTO MENUS (ID_REST, ADD_DATE) VALUES (100002, '2015-05-01'), (100003, '2015-05-02'), (100004, '2015-05-03'), (100005, '2015-05-01'), (100006, '2015-05-02'), (100002, '2015-05-02'), (100002, CURRENT_DATE)
21:20:47.967 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 7 returned as update count for SQL: INSERT INTO MEALS (ID_MENU, NAME, PRICE) VALUES (100007, 'Apple', 5), (100008, 'Juice', 10), (100009, 'Potato', 20), (100010, 'Bananas', 30), (100011, 'Bread', 40), (100007, 'Bottle of water', 50), (100013, 'Mango', 100)
21:20:47.968 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 6 returned as update count for SQL: INSERT INTO VOTES (USER_ID, DATE, RESTAURANT) VALUES (100000, '2015-05-01', 100002), (100000, '2015-05-02', 100003), (100000, '2015-05-03', 100004), (100001, '2015-05-01', 100005), (100001, '2015-05-02', 100006), (100001, '2015-05-03', 100002)
21:20:47.968 INFO  o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:508 - Executed SQL script from class path resource [db/populateDB.sql] in 6 ms.
Hibernate: 
    /* DELETE 
    FROM
        Meal m 
    WHERE
        m.id=:id 
        AND m.menu.id=:menuId */ delete 
        from
            meals 
        where
            id=? 
            and id_menu=?
21:20:47.971 DEBUG o.springframework.jdbc.datasource.DataSourceUtils.prepareConnectionForTransaction:176 - Setting JDBC Connection [ProxyConnection[PooledConnection[org.hsqldb.jdbc.JDBCConnection@45e35a0d]]] read-only
Hibernate: 
    /* SELECT
        m 
    FROM
        Meal m 
    WHERE
        m.menu.id=:menuId */ select
            meal0_.id as id1_0_,
            meal0_.name as name2_0_,
            meal0_.id_menu as id_menu4_0_,
            meal0_.price as price3_0_ 
        from
            meals meal0_ 
        where
            meal0_.id_menu=?
21:20:47.973 DEBUG o.springframework.jdbc.datasource.DataSourceUtils.resetConnectionAfterTransaction:233 - Resetting read-only flag of JDBC Connection [ProxyConnection[PooledConnection[org.hsqldb.jdbc.JDBCConnection@45e35a0d]]]
21:20:47.975 INFO  o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:442 - Executing SQL script from class path resource [db/populateDB.sql]
21:20:47.976 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 3 returned as update count for SQL: DELETE FROM user_roles
21:20:47.977 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 6 returned as update count for SQL: DELETE FROM votes
21:20:47.977 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 2 returned as update count for SQL: DELETE FROM users
21:20:47.977 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 6 returned as update count for SQL: DELETE FROM meals
21:20:47.977 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 7 returned as update count for SQL: DELETE FROM menus
21:20:47.978 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 5 returned as update count for SQL: DELETE FROM restaurants
21:20:47.978 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 0 returned as update count for SQL: ALTER SEQUENCE global_seq RESTART WITH 100000
21:20:47.979 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 2 returned as update count for SQL: INSERT INTO USERS (name, email, password) VALUES ('User', 'user@yandex.ru', '{noop}password'), ('Admin', 'admin@yandex.ru','{noop}admin')
21:20:47.979 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 3 returned as update count for SQL: INSERT INTO USER_ROLES (role, user_id) VALUES ('ROLE_USER', 100000), ('ROLE_ADMIN', 100001), ('ROLE_USER', 100001)
21:20:47.979 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 5 returned as update count for SQL: INSERT INTO RESTAURANTS (NAME) VALUES ('Russia'), ('Ukraine'), ('U Kolyana'), ('Almaz'), ('Fart')
21:20:47.980 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 7 returned as update count for SQL: INSERT INTO MENUS (ID_REST, ADD_DATE) VALUES (100002, '2015-05-01'), (100003, '2015-05-02'), (100004, '2015-05-03'), (100005, '2015-05-01'), (100006, '2015-05-02'), (100002, '2015-05-02'), (100002, CURRENT_DATE)
21:20:47.980 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 7 returned as update count for SQL: INSERT INTO MEALS (ID_MENU, NAME, PRICE) VALUES (100007, 'Apple', 5), (100008, 'Juice', 10), (100009, 'Potato', 20), (100010, 'Bananas', 30), (100011, 'Bread', 40), (100007, 'Bottle of water', 50), (100013, 'Mango', 100)
21:20:47.981 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 6 returned as update count for SQL: INSERT INTO VOTES (USER_ID, DATE, RESTAURANT) VALUES (100000, '2015-05-01', 100002), (100000, '2015-05-02', 100003), (100000, '2015-05-03', 100004), (100001, '2015-05-01', 100005), (100001, '2015-05-02', 100006), (100001, '2015-05-03', 100002)
21:20:47.981 INFO  o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:508 - Executed SQL script from class path resource [db/populateDB.sql] in 6 ms.
21:20:47.982 DEBUG o.springframework.jdbc.datasource.DataSourceUtils.prepareConnectionForTransaction:176 - Setting JDBC Connection [ProxyConnection[PooledConnection[org.hsqldb.jdbc.JDBCConnection@45e35a0d]]] read-only
Hibernate: 
    /* SELECT
        m 
    FROM
        Meal m 
    WHERE
        m.menu.id=:menuId */ select
            meal0_.id as id1_0_,
            meal0_.name as name2_0_,
            meal0_.id_menu as id_menu4_0_,
            meal0_.price as price3_0_ 
        from
            meals meal0_ 
        where
            meal0_.id_menu=?
21:20:47.984 DEBUG o.springframework.jdbc.datasource.DataSourceUtils.resetConnectionAfterTransaction:233 - Resetting read-only flag of JDBC Connection [ProxyConnection[PooledConnection[org.hsqldb.jdbc.JDBCConnection@45e35a0d]]]
21:20:47.986 INFO  o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:442 - Executing SQL script from class path resource [db/populateDB.sql]
21:20:47.987 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 3 returned as update count for SQL: DELETE FROM user_roles
21:20:47.987 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 6 returned as update count for SQL: DELETE FROM votes
21:20:47.987 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 2 returned as update count for SQL: DELETE FROM users
21:20:47.988 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 7 returned as update count for SQL: DELETE FROM meals
21:20:47.988 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 7 returned as update count for SQL: DELETE FROM menus
21:20:47.988 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 5 returned as update count for SQL: DELETE FROM restaurants
21:20:47.989 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 0 returned as update count for SQL: ALTER SEQUENCE global_seq RESTART WITH 100000
21:20:47.989 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 2 returned as update count for SQL: INSERT INTO USERS (name, email, password) VALUES ('User', 'user@yandex.ru', '{noop}password'), ('Admin', 'admin@yandex.ru','{noop}admin')
21:20:47.989 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 3 returned as update count for SQL: INSERT INTO USER_ROLES (role, user_id) VALUES ('ROLE_USER', 100000), ('ROLE_ADMIN', 100001), ('ROLE_USER', 100001)
21:20:47.990 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 5 returned as update count for SQL: INSERT INTO RESTAURANTS (NAME) VALUES ('Russia'), ('Ukraine'), ('U Kolyana'), ('Almaz'), ('Fart')
21:20:47.990 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 7 returned as update count for SQL: INSERT INTO MENUS (ID_REST, ADD_DATE) VALUES (100002, '2015-05-01'), (100003, '2015-05-02'), (100004, '2015-05-03'), (100005, '2015-05-01'), (100006, '2015-05-02'), (100002, '2015-05-02'), (100002, CURRENT_DATE)
21:20:47.991 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 7 returned as update count for SQL: INSERT INTO MEALS (ID_MENU, NAME, PRICE) VALUES (100007, 'Apple', 5), (100008, 'Juice', 10), (100009, 'Potato', 20), (100010, 'Bananas', 30), (100011, 'Bread', 40), (100007, 'Bottle of water', 50), (100013, 'Mango', 100)
21:20:47.991 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 6 returned as update count for SQL: INSERT INTO VOTES (USER_ID, DATE, RESTAURANT) VALUES (100000, '2015-05-01', 100002), (100000, '2015-05-02', 100003), (100000, '2015-05-03', 100004), (100001, '2015-05-01', 100005), (100001, '2015-05-02', 100006), (100001, '2015-05-03', 100002)
21:20:47.991 INFO  o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:508 - Executed SQL script from class path resource [db/populateDB.sql] in 5 ms.
Hibernate: 
    select
        meal0_.id as id1_0_0_,
        meal0_.name as name2_0_0_,
        meal0_.id_menu as id_menu4_0_0_,
        meal0_.price as price3_0_0_ 
    from
        meals meal0_ 
    where
        meal0_.id=?
Hibernate: 
    /* update
        ru.neustupov.votingforrestaurants.model.Meal */ update
            meals 
        set
            name=?,
            id_menu=?,
            price=? 
        where
            id=?
21:20:47.995 DEBUG o.springframework.jdbc.datasource.DataSourceUtils.prepareConnectionForTransaction:176 - Setting JDBC Connection [ProxyConnection[PooledConnection[org.hsqldb.jdbc.JDBCConnection@45e35a0d]]] read-only
Hibernate: 
    select
        meal0_.id as id1_0_0_,
        meal0_.name as name2_0_0_,
        meal0_.id_menu as id_menu4_0_0_,
        meal0_.price as price3_0_0_ 
    from
        meals meal0_ 
    where
        meal0_.id=?
21:20:47.997 DEBUG o.springframework.jdbc.datasource.DataSourceUtils.resetConnectionAfterTransaction:233 - Resetting read-only flag of JDBC Connection [ProxyConnection[PooledConnection[org.hsqldb.jdbc.JDBCConnection@45e35a0d]]]
21:20:47.999 INFO  o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:442 - Executing SQL script from class path resource [db/populateDB.sql]
21:20:48.000 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 3 returned as update count for SQL: DELETE FROM user_roles
21:20:48.000 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 6 returned as update count for SQL: DELETE FROM votes
21:20:48.000 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 2 returned as update count for SQL: DELETE FROM users
21:20:48.001 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 7 returned as update count for SQL: DELETE FROM meals
21:20:48.001 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 7 returned as update count for SQL: DELETE FROM menus
21:20:48.001 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 5 returned as update count for SQL: DELETE FROM restaurants
21:20:48.002 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 0 returned as update count for SQL: ALTER SEQUENCE global_seq RESTART WITH 100000
21:20:48.002 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 2 returned as update count for SQL: INSERT INTO USERS (name, email, password) VALUES ('User', 'user@yandex.ru', '{noop}password'), ('Admin', 'admin@yandex.ru','{noop}admin')
21:20:48.003 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 3 returned as update count for SQL: INSERT INTO USER_ROLES (role, user_id) VALUES ('ROLE_USER', 100000), ('ROLE_ADMIN', 100001), ('ROLE_USER', 100001)
21:20:48.003 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 5 returned as update count for SQL: INSERT INTO RESTAURANTS (NAME) VALUES ('Russia'), ('Ukraine'), ('U Kolyana'), ('Almaz'), ('Fart')
21:20:48.004 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 7 returned as update count for SQL: INSERT INTO MENUS (ID_REST, ADD_DATE) VALUES (100002, '2015-05-01'), (100003, '2015-05-02'), (100004, '2015-05-03'), (100005, '2015-05-01'), (100006, '2015-05-02'), (100002, '2015-05-02'), (100002, CURRENT_DATE)
21:20:48.004 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 7 returned as update count for SQL: INSERT INTO MEALS (ID_MENU, NAME, PRICE) VALUES (100007, 'Apple', 5), (100008, 'Juice', 10), (100009, 'Potato', 20), (100010, 'Bananas', 30), (100011, 'Bread', 40), (100007, 'Bottle of water', 50), (100013, 'Mango', 100)
21:20:48.005 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 6 returned as update count for SQL: INSERT INTO VOTES (USER_ID, DATE, RESTAURANT) VALUES (100000, '2015-05-01', 100002), (100000, '2015-05-02', 100003), (100000, '2015-05-03', 100004), (100001, '2015-05-01', 100005), (100001, '2015-05-02', 100006), (100001, '2015-05-03', 100002)
21:20:48.005 INFO  o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:508 - Executed SQL script from class path resource [db/populateDB.sql] in 6 ms.
Hibernate: 
    call next value for global_seq
21:20:48.009 ERROR org.hibernate.internal.ExceptionMapperStandardImpl.mapManagedFlushFailure:39 - HHH000346: Error during managed flush [Validation failed for classes [ru.neustupov.votingforrestaurants.model.Meal] during persist time for groups [ru.neustupov.votingforrestaurants.View$Persist, ]
List of constraint violations:[
	ConstraintViolationImpl{interpolatedMessage='must not be blank', propertyPath=name, rootBeanClass=class ru.neustupov.votingforrestaurants.model.Meal, messageTemplate='{javax.validation.constraints.NotBlank.message}'}
]]
Hibernate: 
    call next value for global_seq
21:20:48.016 ERROR org.hibernate.internal.ExceptionMapperStandardImpl.mapManagedFlushFailure:39 - HHH000346: Error during managed flush [Validation failed for classes [ru.neustupov.votingforrestaurants.model.Meal] during persist time for groups [ru.neustupov.votingforrestaurants.View$Persist, ]
List of constraint violations:[
	ConstraintViolationImpl{interpolatedMessage='must not be null', propertyPath=price, rootBeanClass=class ru.neustupov.votingforrestaurants.model.Meal, messageTemplate='{javax.validation.constraints.NotNull.message}'}
]]
21:20:48.018 INFO  o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:442 - Executing SQL script from class path resource [db/populateDB.sql]
21:20:48.019 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 3 returned as update count for SQL: DELETE FROM user_roles
21:20:48.019 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 6 returned as update count for SQL: DELETE FROM votes
21:20:48.019 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 2 returned as update count for SQL: DELETE FROM users
21:20:48.020 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 7 returned as update count for SQL: DELETE FROM meals
21:20:48.020 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 7 returned as update count for SQL: DELETE FROM menus
21:20:48.020 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 5 returned as update count for SQL: DELETE FROM restaurants
21:20:48.021 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 0 returned as update count for SQL: ALTER SEQUENCE global_seq RESTART WITH 100000
21:20:48.021 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 2 returned as update count for SQL: INSERT INTO USERS (name, email, password) VALUES ('User', 'user@yandex.ru', '{noop}password'), ('Admin', 'admin@yandex.ru','{noop}admin')
21:20:48.021 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 3 returned as update count for SQL: INSERT INTO USER_ROLES (role, user_id) VALUES ('ROLE_USER', 100000), ('ROLE_ADMIN', 100001), ('ROLE_USER', 100001)
21:20:48.022 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 5 returned as update count for SQL: INSERT INTO RESTAURANTS (NAME) VALUES ('Russia'), ('Ukraine'), ('U Kolyana'), ('Almaz'), ('Fart')
21:20:48.022 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 7 returned as update count for SQL: INSERT INTO MENUS (ID_REST, ADD_DATE) VALUES (100002, '2015-05-01'), (100003, '2015-05-02'), (100004, '2015-05-03'), (100005, '2015-05-01'), (100006, '2015-05-02'), (100002, '2015-05-02'), (100002, CURRENT_DATE)
21:20:48.023 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 7 returned as update count for SQL: INSERT INTO MEALS (ID_MENU, NAME, PRICE) VALUES (100007, 'Apple', 5), (100008, 'Juice', 10), (100009, 'Potato', 20), (100010, 'Bananas', 30), (100011, 'Bread', 40), (100007, 'Bottle of water', 50), (100013, 'Mango', 100)
21:20:48.023 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 6 returned as update count for SQL: INSERT INTO VOTES (USER_ID, DATE, RESTAURANT) VALUES (100000, '2015-05-01', 100002), (100000, '2015-05-02', 100003), (100000, '2015-05-03', 100004), (100001, '2015-05-01', 100005), (100001, '2015-05-02', 100006), (100001, '2015-05-03', 100002)
21:20:48.023 INFO  o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:508 - Executed SQL script from class path resource [db/populateDB.sql] in 5 ms.
21:20:48.024 DEBUG o.springframework.jdbc.datasource.DataSourceUtils.prepareConnectionForTransaction:176 - Setting JDBC Connection [ProxyConnection[PooledConnection[org.hsqldb.jdbc.JDBCConnection@45e35a0d]]] read-only
Hibernate: 
    select
        meal0_.id as id1_0_0_,
        meal0_.name as name2_0_0_,
        meal0_.id_menu as id_menu4_0_0_,
        meal0_.price as price3_0_0_ 
    from
        meals meal0_ 
    where
        meal0_.id=?
21:20:48.026 DEBUG o.springframework.jdbc.datasource.DataSourceUtils.resetConnectionAfterTransaction:233 - Resetting read-only flag of JDBC Connection [ProxyConnection[PooledConnection[org.hsqldb.jdbc.JDBCConnection@45e35a0d]]]
21:20:48.029 INFO  o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:442 - Executing SQL script from class path resource [db/populateDB.sql]
21:20:48.031 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 3 returned as update count for SQL: DELETE FROM user_roles
21:20:48.031 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 6 returned as update count for SQL: DELETE FROM votes
21:20:48.031 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 2 returned as update count for SQL: DELETE FROM users
21:20:48.032 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 7 returned as update count for SQL: DELETE FROM meals
21:20:48.032 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 7 returned as update count for SQL: DELETE FROM menus
21:20:48.032 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 5 returned as update count for SQL: DELETE FROM restaurants
21:20:48.033 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 0 returned as update count for SQL: ALTER SEQUENCE global_seq RESTART WITH 100000
21:20:48.033 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 2 returned as update count for SQL: INSERT INTO USERS (name, email, password) VALUES ('User', 'user@yandex.ru', '{noop}password'), ('Admin', 'admin@yandex.ru','{noop}admin')
21:20:48.033 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 3 returned as update count for SQL: INSERT INTO USER_ROLES (role, user_id) VALUES ('ROLE_USER', 100000), ('ROLE_ADMIN', 100001), ('ROLE_USER', 100001)
21:20:48.034 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 5 returned as update count for SQL: INSERT INTO RESTAURANTS (NAME) VALUES ('Russia'), ('Ukraine'), ('U Kolyana'), ('Almaz'), ('Fart')
21:20:48.034 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 7 returned as update count for SQL: INSERT INTO MENUS (ID_REST, ADD_DATE) VALUES (100002, '2015-05-01'), (100003, '2015-05-02'), (100004, '2015-05-03'), (100005, '2015-05-01'), (100006, '2015-05-02'), (100002, '2015-05-02'), (100002, CURRENT_DATE)
21:20:48.035 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 7 returned as update count for SQL: INSERT INTO MEALS (ID_MENU, NAME, PRICE) VALUES (100007, 'Apple', 5), (100008, 'Juice', 10), (100009, 'Potato', 20), (100010, 'Bananas', 30), (100011, 'Bread', 40), (100007, 'Bottle of water', 50), (100013, 'Mango', 100)
21:20:48.035 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 6 returned as update count for SQL: INSERT INTO VOTES (USER_ID, DATE, RESTAURANT) VALUES (100000, '2015-05-01', 100002), (100000, '2015-05-02', 100003), (100000, '2015-05-03', 100004), (100001, '2015-05-01', 100005), (100001, '2015-05-02', 100006), (100001, '2015-05-03', 100002)
21:20:48.035 INFO  o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:508 - Executed SQL script from class path resource [db/populateDB.sql] in 5 ms.
Hibernate: 
    /* DELETE 
    FROM
        Meal m 
    WHERE
        m.id=:id 
        AND m.menu.id=:menuId */ delete 
        from
            meals 
        where
            id=? 
            and id_menu=?
21:20:48.038 WARN  o.h.e.j.s.SqlExceptionHelper$StandardWarningHandler.logWarning:217 - SQL Warning Code: -1100, SQLState: 02000
21:20:48.038 WARN  o.h.e.j.s.SqlExceptionHelper$StandardWarningHandler.logWarning:218 - no data
21:20:48.040 INFO  o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:442 - Executing SQL script from class path resource [db/populateDB.sql]
21:20:48.041 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 3 returned as update count for SQL: DELETE FROM user_roles
21:20:48.041 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 6 returned as update count for SQL: DELETE FROM votes
21:20:48.042 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 2 returned as update count for SQL: DELETE FROM users
21:20:48.042 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 7 returned as update count for SQL: DELETE FROM meals
21:20:48.042 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 7 returned as update count for SQL: DELETE FROM menus
21:20:48.042 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 5 returned as update count for SQL: DELETE FROM restaurants
21:20:48.043 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 0 returned as update count for SQL: ALTER SEQUENCE global_seq RESTART WITH 100000
21:20:48.043 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 2 returned as update count for SQL: INSERT INTO USERS (name, email, password) VALUES ('User', 'user@yandex.ru', '{noop}password'), ('Admin', 'admin@yandex.ru','{noop}admin')
21:20:48.044 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 3 returned as update count for SQL: INSERT INTO USER_ROLES (role, user_id) VALUES ('ROLE_USER', 100000), ('ROLE_ADMIN', 100001), ('ROLE_USER', 100001)
21:20:48.044 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 5 returned as update count for SQL: INSERT INTO RESTAURANTS (NAME) VALUES ('Russia'), ('Ukraine'), ('U Kolyana'), ('Almaz'), ('Fart')
21:20:48.044 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 7 returned as update count for SQL: INSERT INTO MENUS (ID_REST, ADD_DATE) VALUES (100002, '2015-05-01'), (100003, '2015-05-02'), (100004, '2015-05-03'), (100005, '2015-05-01'), (100006, '2015-05-02'), (100002, '2015-05-02'), (100002, CURRENT_DATE)
21:20:48.045 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 7 returned as update count for SQL: INSERT INTO MEALS (ID_MENU, NAME, PRICE) VALUES (100007, 'Apple', 5), (100008, 'Juice', 10), (100009, 'Potato', 20), (100010, 'Bananas', 30), (100011, 'Bread', 40), (100007, 'Bottle of water', 50), (100013, 'Mango', 100)
21:20:48.045 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 6 returned as update count for SQL: INSERT INTO VOTES (USER_ID, DATE, RESTAURANT) VALUES (100000, '2015-05-01', 100002), (100000, '2015-05-02', 100003), (100000, '2015-05-03', 100004), (100001, '2015-05-01', 100005), (100001, '2015-05-02', 100006), (100001, '2015-05-03', 100002)
21:20:48.045 INFO  o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:508 - Executed SQL script from class path resource [db/populateDB.sql] in 5 ms.
21:20:48.046 DEBUG o.springframework.jdbc.datasource.DataSourceUtils.prepareConnectionForTransaction:176 - Setting JDBC Connection [ProxyConnection[PooledConnection[org.hsqldb.jdbc.JDBCConnection@45e35a0d]]] read-only
Hibernate: 
    select
        meal0_.id as id1_0_0_,
        meal0_.name as name2_0_0_,
        meal0_.id_menu as id_menu4_0_0_,
        meal0_.price as price3_0_0_ 
    from
        meals meal0_ 
    where
        meal0_.id=?
21:20:48.048 DEBUG o.springframework.jdbc.datasource.DataSourceUtils.resetConnectionAfterTransaction:233 - Resetting read-only flag of JDBC Connection [ProxyConnection[PooledConnection[org.hsqldb.jdbc.JDBCConnection@45e35a0d]]]
[INFO] Tests run: 9, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.12 s - in ru.neustupov.votingforrestaurants.service.MealServiceTest
[INFO] Running ru.neustupov.votingforrestaurants.service.RestaurantServiceTest
21:20:48.058 INFO  o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:442 - Executing SQL script from class path resource [db/populateDB.sql]
21:20:48.060 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 3 returned as update count for SQL: DELETE FROM user_roles
21:20:48.060 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 6 returned as update count for SQL: DELETE FROM votes
21:20:48.060 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 2 returned as update count for SQL: DELETE FROM users
21:20:48.060 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 7 returned as update count for SQL: DELETE FROM meals
21:20:48.061 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 7 returned as update count for SQL: DELETE FROM menus
21:20:48.061 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 5 returned as update count for SQL: DELETE FROM restaurants
21:20:48.061 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 0 returned as update count for SQL: ALTER SEQUENCE global_seq RESTART WITH 100000
21:20:48.062 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 2 returned as update count for SQL: INSERT INTO USERS (name, email, password) VALUES ('User', 'user@yandex.ru', '{noop}password'), ('Admin', 'admin@yandex.ru','{noop}admin')
21:20:48.062 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 3 returned as update count for SQL: INSERT INTO USER_ROLES (role, user_id) VALUES ('ROLE_USER', 100000), ('ROLE_ADMIN', 100001), ('ROLE_USER', 100001)
21:20:48.062 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 5 returned as update count for SQL: INSERT INTO RESTAURANTS (NAME) VALUES ('Russia'), ('Ukraine'), ('U Kolyana'), ('Almaz'), ('Fart')
21:20:48.063 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 7 returned as update count for SQL: INSERT INTO MENUS (ID_REST, ADD_DATE) VALUES (100002, '2015-05-01'), (100003, '2015-05-02'), (100004, '2015-05-03'), (100005, '2015-05-01'), (100006, '2015-05-02'), (100002, '2015-05-02'), (100002, CURRENT_DATE)
21:20:48.063 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 7 returned as update count for SQL: INSERT INTO MEALS (ID_MENU, NAME, PRICE) VALUES (100007, 'Apple', 5), (100008, 'Juice', 10), (100009, 'Potato', 20), (100010, 'Bananas', 30), (100011, 'Bread', 40), (100007, 'Bottle of water', 50), (100013, 'Mango', 100)
21:20:48.064 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 6 returned as update count for SQL: INSERT INTO VOTES (USER_ID, DATE, RESTAURANT) VALUES (100000, '2015-05-01', 100002), (100000, '2015-05-02', 100003), (100000, '2015-05-03', 100004), (100001, '2015-05-01', 100005), (100001, '2015-05-02', 100006), (100001, '2015-05-03', 100002)
21:20:48.064 INFO  o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:508 - Executed SQL script from class path resource [db/populateDB.sql] in 5 ms.
Hibernate: 
    call next value for global_seq
Hibernate: 
    /* insert ru.neustupov.votingforrestaurants.model.Restaurant
        */ insert 
        into
            restaurants
            (name, id) 
        values
            (?, ?)
21:20:48.069 WARN  org.hibernate.engine.jdbc.spi.SqlExceptionHelper.logExceptions:129 - SQL Error: -104, SQLState: 23505
21:20:48.069 ERROR org.hibernate.engine.jdbc.spi.SqlExceptionHelper.logExceptions:131 - integrity constraint violation: unique constraint or index violation; RESTAURANT_NAME_IDX table: RESTAURANTS
21:20:48.071 ERROR org.hibernate.internal.ExceptionMapperStandardImpl.mapManagedFlushFailure:39 - HHH000346: Error during managed flush [org.hibernate.exception.ConstraintViolationException: could not execute statement]
21:20:48.075 INFO  o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:442 - Executing SQL script from class path resource [db/populateDB.sql]
21:20:48.076 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 3 returned as update count for SQL: DELETE FROM user_roles
21:20:48.076 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 6 returned as update count for SQL: DELETE FROM votes
21:20:48.077 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 2 returned as update count for SQL: DELETE FROM users
21:20:48.077 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 7 returned as update count for SQL: DELETE FROM meals
21:20:48.077 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 7 returned as update count for SQL: DELETE FROM menus
21:20:48.077 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 5 returned as update count for SQL: DELETE FROM restaurants
21:20:48.078 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 0 returned as update count for SQL: ALTER SEQUENCE global_seq RESTART WITH 100000
21:20:48.078 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 2 returned as update count for SQL: INSERT INTO USERS (name, email, password) VALUES ('User', 'user@yandex.ru', '{noop}password'), ('Admin', 'admin@yandex.ru','{noop}admin')
21:20:48.078 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 3 returned as update count for SQL: INSERT INTO USER_ROLES (role, user_id) VALUES ('ROLE_USER', 100000), ('ROLE_ADMIN', 100001), ('ROLE_USER', 100001)
21:20:48.079 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 5 returned as update count for SQL: INSERT INTO RESTAURANTS (NAME) VALUES ('Russia'), ('Ukraine'), ('U Kolyana'), ('Almaz'), ('Fart')
21:20:48.079 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 7 returned as update count for SQL: INSERT INTO MENUS (ID_REST, ADD_DATE) VALUES (100002, '2015-05-01'), (100003, '2015-05-02'), (100004, '2015-05-03'), (100005, '2015-05-01'), (100006, '2015-05-02'), (100002, '2015-05-02'), (100002, CURRENT_DATE)
21:20:48.080 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 7 returned as update count for SQL: INSERT INTO MEALS (ID_MENU, NAME, PRICE) VALUES (100007, 'Apple', 5), (100008, 'Juice', 10), (100009, 'Potato', 20), (100010, 'Bananas', 30), (100011, 'Bread', 40), (100007, 'Bottle of water', 50), (100013, 'Mango', 100)
21:20:48.080 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 6 returned as update count for SQL: INSERT INTO VOTES (USER_ID, DATE, RESTAURANT) VALUES (100000, '2015-05-01', 100002), (100000, '2015-05-02', 100003), (100000, '2015-05-03', 100004), (100001, '2015-05-01', 100005), (100001, '2015-05-02', 100006), (100001, '2015-05-03', 100002)
21:20:48.080 INFO  o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:508 - Executed SQL script from class path resource [db/populateDB.sql] in 5 ms.
Hibernate: 
    call next value for global_seq
Hibernate: 
    /* insert ru.neustupov.votingforrestaurants.model.Restaurant
        */ insert 
        into
            restaurants
            (name, id) 
        values
            (?, ?)
21:20:48.084 DEBUG o.springframework.jdbc.datasource.DataSourceUtils.prepareConnectionForTransaction:176 - Setting JDBC Connection [ProxyConnection[PooledConnection[org.hsqldb.jdbc.JDBCConnection@45e35a0d]]] read-only
Hibernate: 
    /* select
        generatedAlias0 
    from
        Restaurant as generatedAlias0 */ select
            restaurant0_.id as id1_2_,
            restaurant0_.name as name2_2_ 
        from
            restaurants restaurant0_
21:20:48.087 DEBUG o.springframework.jdbc.datasource.DataSourceUtils.resetConnectionAfterTransaction:233 - Resetting read-only flag of JDBC Connection [ProxyConnection[PooledConnection[org.hsqldb.jdbc.JDBCConnection@45e35a0d]]]
21:20:48.089 INFO  o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:442 - Executing SQL script from class path resource [db/populateDB.sql]
21:20:48.090 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 3 returned as update count for SQL: DELETE FROM user_roles
21:20:48.091 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 6 returned as update count for SQL: DELETE FROM votes
21:20:48.091 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 2 returned as update count for SQL: DELETE FROM users
21:20:48.091 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 7 returned as update count for SQL: DELETE FROM meals
21:20:48.091 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 7 returned as update count for SQL: DELETE FROM menus
21:20:48.092 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 6 returned as update count for SQL: DELETE FROM restaurants
21:20:48.092 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 0 returned as update count for SQL: ALTER SEQUENCE global_seq RESTART WITH 100000
21:20:48.092 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 2 returned as update count for SQL: INSERT INTO USERS (name, email, password) VALUES ('User', 'user@yandex.ru', '{noop}password'), ('Admin', 'admin@yandex.ru','{noop}admin')
21:20:48.093 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 3 returned as update count for SQL: INSERT INTO USER_ROLES (role, user_id) VALUES ('ROLE_USER', 100000), ('ROLE_ADMIN', 100001), ('ROLE_USER', 100001)
21:20:48.093 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 5 returned as update count for SQL: INSERT INTO RESTAURANTS (NAME) VALUES ('Russia'), ('Ukraine'), ('U Kolyana'), ('Almaz'), ('Fart')
21:20:48.094 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 7 returned as update count for SQL: INSERT INTO MENUS (ID_REST, ADD_DATE) VALUES (100002, '2015-05-01'), (100003, '2015-05-02'), (100004, '2015-05-03'), (100005, '2015-05-01'), (100006, '2015-05-02'), (100002, '2015-05-02'), (100002, CURRENT_DATE)
21:20:48.094 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 7 returned as update count for SQL: INSERT INTO MEALS (ID_MENU, NAME, PRICE) VALUES (100007, 'Apple', 5), (100008, 'Juice', 10), (100009, 'Potato', 20), (100010, 'Bananas', 30), (100011, 'Bread', 40), (100007, 'Bottle of water', 50), (100013, 'Mango', 100)
21:20:48.094 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 6 returned as update count for SQL: INSERT INTO VOTES (USER_ID, DATE, RESTAURANT) VALUES (100000, '2015-05-01', 100002), (100000, '2015-05-02', 100003), (100000, '2015-05-03', 100004), (100001, '2015-05-01', 100005), (100001, '2015-05-02', 100006), (100001, '2015-05-03', 100002)
21:20:48.094 INFO  o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:508 - Executed SQL script from class path resource [db/populateDB.sql] in 5 ms.
Hibernate: 
    /* DELETE 
    FROM
        Restaurant r 
    WHERE
        r.id=:id */ delete 
        from
            restaurants 
        where
            id=?
21:20:48.098 DEBUG o.springframework.jdbc.datasource.DataSourceUtils.prepareConnectionForTransaction:176 - Setting JDBC Connection [ProxyConnection[PooledConnection[org.hsqldb.jdbc.JDBCConnection@45e35a0d]]] read-only
Hibernate: 
    /* select
        generatedAlias0 
    from
        Restaurant as generatedAlias0 */ select
            restaurant0_.id as id1_2_,
            restaurant0_.name as name2_2_ 
        from
            restaurants restaurant0_
21:20:48.100 DEBUG o.springframework.jdbc.datasource.DataSourceUtils.resetConnectionAfterTransaction:233 - Resetting read-only flag of JDBC Connection [ProxyConnection[PooledConnection[org.hsqldb.jdbc.JDBCConnection@45e35a0d]]]
21:20:48.103 INFO  o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:442 - Executing SQL script from class path resource [db/populateDB.sql]
21:20:48.104 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 3 returned as update count for SQL: DELETE FROM user_roles
21:20:48.104 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 4 returned as update count for SQL: DELETE FROM votes
21:20:48.104 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 2 returned as update count for SQL: DELETE FROM users
21:20:48.104 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 4 returned as update count for SQL: DELETE FROM meals
21:20:48.105 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 4 returned as update count for SQL: DELETE FROM menus
21:20:48.105 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 4 returned as update count for SQL: DELETE FROM restaurants
21:20:48.105 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 0 returned as update count for SQL: ALTER SEQUENCE global_seq RESTART WITH 100000
21:20:48.106 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 2 returned as update count for SQL: INSERT INTO USERS (name, email, password) VALUES ('User', 'user@yandex.ru', '{noop}password'), ('Admin', 'admin@yandex.ru','{noop}admin')
21:20:48.106 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 3 returned as update count for SQL: INSERT INTO USER_ROLES (role, user_id) VALUES ('ROLE_USER', 100000), ('ROLE_ADMIN', 100001), ('ROLE_USER', 100001)
21:20:48.106 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 5 returned as update count for SQL: INSERT INTO RESTAURANTS (NAME) VALUES ('Russia'), ('Ukraine'), ('U Kolyana'), ('Almaz'), ('Fart')
21:20:48.107 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 7 returned as update count for SQL: INSERT INTO MENUS (ID_REST, ADD_DATE) VALUES (100002, '2015-05-01'), (100003, '2015-05-02'), (100004, '2015-05-03'), (100005, '2015-05-01'), (100006, '2015-05-02'), (100002, '2015-05-02'), (100002, CURRENT_DATE)
21:20:48.107 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 7 returned as update count for SQL: INSERT INTO MEALS (ID_MENU, NAME, PRICE) VALUES (100007, 'Apple', 5), (100008, 'Juice', 10), (100009, 'Potato', 20), (100010, 'Bananas', 30), (100011, 'Bread', 40), (100007, 'Bottle of water', 50), (100013, 'Mango', 100)
21:20:48.108 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 6 returned as update count for SQL: INSERT INTO VOTES (USER_ID, DATE, RESTAURANT) VALUES (100000, '2015-05-01', 100002), (100000, '2015-05-02', 100003), (100000, '2015-05-03', 100004), (100001, '2015-05-01', 100005), (100001, '2015-05-02', 100006), (100001, '2015-05-03', 100002)
21:20:48.108 INFO  o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:508 - Executed SQL script from class path resource [db/populateDB.sql] in 5 ms.
21:20:48.109 DEBUG o.springframework.jdbc.datasource.DataSourceUtils.prepareConnectionForTransaction:176 - Setting JDBC Connection [ProxyConnection[PooledConnection[org.hsqldb.jdbc.JDBCConnection@45e35a0d]]] read-only
Hibernate: 
    /* select
        generatedAlias0 
    from
        Restaurant as generatedAlias0 */ select
            restaurant0_.id as id1_2_,
            restaurant0_.name as name2_2_ 
        from
            restaurants restaurant0_
21:20:48.111 DEBUG o.springframework.jdbc.datasource.DataSourceUtils.resetConnectionAfterTransaction:233 - Resetting read-only flag of JDBC Connection [ProxyConnection[PooledConnection[org.hsqldb.jdbc.JDBCConnection@45e35a0d]]]
21:20:48.113 INFO  o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:442 - Executing SQL script from class path resource [db/populateDB.sql]
21:20:48.115 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 3 returned as update count for SQL: DELETE FROM user_roles
21:20:48.115 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 6 returned as update count for SQL: DELETE FROM votes
21:20:48.115 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 2 returned as update count for SQL: DELETE FROM users
21:20:48.115 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 7 returned as update count for SQL: DELETE FROM meals
21:20:48.116 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 7 returned as update count for SQL: DELETE FROM menus
21:20:48.116 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 5 returned as update count for SQL: DELETE FROM restaurants
21:20:48.116 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 0 returned as update count for SQL: ALTER SEQUENCE global_seq RESTART WITH 100000
21:20:48.117 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 2 returned as update count for SQL: INSERT INTO USERS (name, email, password) VALUES ('User', 'user@yandex.ru', '{noop}password'), ('Admin', 'admin@yandex.ru','{noop}admin')
21:20:48.117 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 3 returned as update count for SQL: INSERT INTO USER_ROLES (role, user_id) VALUES ('ROLE_USER', 100000), ('ROLE_ADMIN', 100001), ('ROLE_USER', 100001)
21:20:48.117 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 5 returned as update count for SQL: INSERT INTO RESTAURANTS (NAME) VALUES ('Russia'), ('Ukraine'), ('U Kolyana'), ('Almaz'), ('Fart')
21:20:48.118 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 7 returned as update count for SQL: INSERT INTO MENUS (ID_REST, ADD_DATE) VALUES (100002, '2015-05-01'), (100003, '2015-05-02'), (100004, '2015-05-03'), (100005, '2015-05-01'), (100006, '2015-05-02'), (100002, '2015-05-02'), (100002, CURRENT_DATE)
21:20:48.118 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 7 returned as update count for SQL: INSERT INTO MEALS (ID_MENU, NAME, PRICE) VALUES (100007, 'Apple', 5), (100008, 'Juice', 10), (100009, 'Potato', 20), (100010, 'Bananas', 30), (100011, 'Bread', 40), (100007, 'Bottle of water', 50), (100013, 'Mango', 100)
21:20:48.118 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 6 returned as update count for SQL: INSERT INTO VOTES (USER_ID, DATE, RESTAURANT) VALUES (100000, '2015-05-01', 100002), (100000, '2015-05-02', 100003), (100000, '2015-05-03', 100004), (100001, '2015-05-01', 100005), (100001, '2015-05-02', 100006), (100001, '2015-05-03', 100002)
21:20:48.118 INFO  o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:508 - Executed SQL script from class path resource [db/populateDB.sql] in 4 ms.
Hibernate: 
    /* load ru.neustupov.votingforrestaurants.model.Restaurant */ select
        restaurant0_.id as id1_2_0_,
        restaurant0_.name as name2_2_0_ 
    from
        restaurants restaurant0_ 
    where
        restaurant0_.id=?
Hibernate: 
    /* update
        ru.neustupov.votingforrestaurants.model.Restaurant */ update
            restaurants 
        set
            name=? 
        where
            id=?
21:20:48.123 DEBUG o.springframework.jdbc.datasource.DataSourceUtils.prepareConnectionForTransaction:176 - Setting JDBC Connection [ProxyConnection[PooledConnection[org.hsqldb.jdbc.JDBCConnection@45e35a0d]]] read-only
Hibernate: 
    select
        restaurant0_.id as id1_2_0_,
        restaurant0_.name as name2_2_0_ 
    from
        restaurants restaurant0_ 
    where
        restaurant0_.id=?
21:20:48.125 DEBUG o.springframework.jdbc.datasource.DataSourceUtils.resetConnectionAfterTransaction:233 - Resetting read-only flag of JDBC Connection [ProxyConnection[PooledConnection[org.hsqldb.jdbc.JDBCConnection@45e35a0d]]]
21:20:48.127 INFO  o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:442 - Executing SQL script from class path resource [db/populateDB.sql]
21:20:48.128 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 3 returned as update count for SQL: DELETE FROM user_roles
21:20:48.129 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 6 returned as update count for SQL: DELETE FROM votes
21:20:48.129 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 2 returned as update count for SQL: DELETE FROM users
21:20:48.129 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 7 returned as update count for SQL: DELETE FROM meals
21:20:48.129 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 7 returned as update count for SQL: DELETE FROM menus
21:20:48.130 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 5 returned as update count for SQL: DELETE FROM restaurants
21:20:48.130 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 0 returned as update count for SQL: ALTER SEQUENCE global_seq RESTART WITH 100000
21:20:48.130 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 2 returned as update count for SQL: INSERT INTO USERS (name, email, password) VALUES ('User', 'user@yandex.ru', '{noop}password'), ('Admin', 'admin@yandex.ru','{noop}admin')
21:20:48.131 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 3 returned as update count for SQL: INSERT INTO USER_ROLES (role, user_id) VALUES ('ROLE_USER', 100000), ('ROLE_ADMIN', 100001), ('ROLE_USER', 100001)
21:20:48.131 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 5 returned as update count for SQL: INSERT INTO RESTAURANTS (NAME) VALUES ('Russia'), ('Ukraine'), ('U Kolyana'), ('Almaz'), ('Fart')
21:20:48.131 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 7 returned as update count for SQL: INSERT INTO MENUS (ID_REST, ADD_DATE) VALUES (100002, '2015-05-01'), (100003, '2015-05-02'), (100004, '2015-05-03'), (100005, '2015-05-01'), (100006, '2015-05-02'), (100002, '2015-05-02'), (100002, CURRENT_DATE)
21:20:48.132 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 7 returned as update count for SQL: INSERT INTO MEALS (ID_MENU, NAME, PRICE) VALUES (100007, 'Apple', 5), (100008, 'Juice', 10), (100009, 'Potato', 20), (100010, 'Bananas', 30), (100011, 'Bread', 40), (100007, 'Bottle of water', 50), (100013, 'Mango', 100)
21:20:48.132 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 6 returned as update count for SQL: INSERT INTO VOTES (USER_ID, DATE, RESTAURANT) VALUES (100000, '2015-05-01', 100002), (100000, '2015-05-02', 100003), (100000, '2015-05-03', 100004), (100001, '2015-05-01', 100005), (100001, '2015-05-02', 100006), (100001, '2015-05-03', 100002)
21:20:48.132 INFO  o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:508 - Executed SQL script from class path resource [db/populateDB.sql] in 5 ms.
Hibernate: 
    call next value for global_seq
21:20:48.135 ERROR org.hibernate.internal.ExceptionMapperStandardImpl.mapManagedFlushFailure:39 - HHH000346: Error during managed flush [Validation failed for classes [ru.neustupov.votingforrestaurants.model.Restaurant] during persist time for groups [ru.neustupov.votingforrestaurants.View$Persist, ]
List of constraint violations:[
	ConstraintViolationImpl{interpolatedMessage='must not be blank', propertyPath=name, rootBeanClass=class ru.neustupov.votingforrestaurants.model.Restaurant, messageTemplate='{javax.validation.constraints.NotBlank.message}'}
]]
21:20:48.137 INFO  o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:442 - Executing SQL script from class path resource [db/populateDB.sql]
21:20:48.138 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 3 returned as update count for SQL: DELETE FROM user_roles
21:20:48.139 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 6 returned as update count for SQL: DELETE FROM votes
21:20:48.139 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 2 returned as update count for SQL: DELETE FROM users
21:20:48.139 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 7 returned as update count for SQL: DELETE FROM meals
21:20:48.139 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 7 returned as update count for SQL: DELETE FROM menus
21:20:48.140 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 5 returned as update count for SQL: DELETE FROM restaurants
21:20:48.140 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 0 returned as update count for SQL: ALTER SEQUENCE global_seq RESTART WITH 100000
21:20:48.140 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 2 returned as update count for SQL: INSERT INTO USERS (name, email, password) VALUES ('User', 'user@yandex.ru', '{noop}password'), ('Admin', 'admin@yandex.ru','{noop}admin')
21:20:48.141 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 3 returned as update count for SQL: INSERT INTO USER_ROLES (role, user_id) VALUES ('ROLE_USER', 100000), ('ROLE_ADMIN', 100001), ('ROLE_USER', 100001)
21:20:48.141 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 5 returned as update count for SQL: INSERT INTO RESTAURANTS (NAME) VALUES ('Russia'), ('Ukraine'), ('U Kolyana'), ('Almaz'), ('Fart')
21:20:48.141 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 7 returned as update count for SQL: INSERT INTO MENUS (ID_REST, ADD_DATE) VALUES (100002, '2015-05-01'), (100003, '2015-05-02'), (100004, '2015-05-03'), (100005, '2015-05-01'), (100006, '2015-05-02'), (100002, '2015-05-02'), (100002, CURRENT_DATE)
21:20:48.142 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 7 returned as update count for SQL: INSERT INTO MEALS (ID_MENU, NAME, PRICE) VALUES (100007, 'Apple', 5), (100008, 'Juice', 10), (100009, 'Potato', 20), (100010, 'Bananas', 30), (100011, 'Bread', 40), (100007, 'Bottle of water', 50), (100013, 'Mango', 100)
21:20:48.142 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 6 returned as update count for SQL: INSERT INTO VOTES (USER_ID, DATE, RESTAURANT) VALUES (100000, '2015-05-01', 100002), (100000, '2015-05-02', 100003), (100000, '2015-05-03', 100004), (100001, '2015-05-01', 100005), (100001, '2015-05-02', 100006), (100001, '2015-05-03', 100002)
21:20:48.142 INFO  o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:508 - Executed SQL script from class path resource [db/populateDB.sql] in 4 ms.
21:20:48.143 DEBUG o.springframework.jdbc.datasource.DataSourceUtils.prepareConnectionForTransaction:176 - Setting JDBC Connection [ProxyConnection[PooledConnection[org.hsqldb.jdbc.JDBCConnection@45e35a0d]]] read-only
Hibernate: 
    select
        restaurant0_.id as id1_2_0_,
        restaurant0_.name as name2_2_0_ 
    from
        restaurants restaurant0_ 
    where
        restaurant0_.id=?
21:20:48.144 DEBUG o.springframework.jdbc.datasource.DataSourceUtils.resetConnectionAfterTransaction:233 - Resetting read-only flag of JDBC Connection [ProxyConnection[PooledConnection[org.hsqldb.jdbc.JDBCConnection@45e35a0d]]]
21:20:48.146 INFO  o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:442 - Executing SQL script from class path resource [db/populateDB.sql]
21:20:48.147 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 3 returned as update count for SQL: DELETE FROM user_roles
21:20:48.148 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 6 returned as update count for SQL: DELETE FROM votes
21:20:48.148 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 2 returned as update count for SQL: DELETE FROM users
21:20:48.148 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 7 returned as update count for SQL: DELETE FROM meals
21:20:48.148 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 7 returned as update count for SQL: DELETE FROM menus
21:20:48.149 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 5 returned as update count for SQL: DELETE FROM restaurants
21:20:48.149 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 0 returned as update count for SQL: ALTER SEQUENCE global_seq RESTART WITH 100000
21:20:48.149 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 2 returned as update count for SQL: INSERT INTO USERS (name, email, password) VALUES ('User', 'user@yandex.ru', '{noop}password'), ('Admin', 'admin@yandex.ru','{noop}admin')
21:20:48.150 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 3 returned as update count for SQL: INSERT INTO USER_ROLES (role, user_id) VALUES ('ROLE_USER', 100000), ('ROLE_ADMIN', 100001), ('ROLE_USER', 100001)
21:20:48.150 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 5 returned as update count for SQL: INSERT INTO RESTAURANTS (NAME) VALUES ('Russia'), ('Ukraine'), ('U Kolyana'), ('Almaz'), ('Fart')
21:20:48.150 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 7 returned as update count for SQL: INSERT INTO MENUS (ID_REST, ADD_DATE) VALUES (100002, '2015-05-01'), (100003, '2015-05-02'), (100004, '2015-05-03'), (100005, '2015-05-01'), (100006, '2015-05-02'), (100002, '2015-05-02'), (100002, CURRENT_DATE)
21:20:48.151 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 7 returned as update count for SQL: INSERT INTO MEALS (ID_MENU, NAME, PRICE) VALUES (100007, 'Apple', 5), (100008, 'Juice', 10), (100009, 'Potato', 20), (100010, 'Bananas', 30), (100011, 'Bread', 40), (100007, 'Bottle of water', 50), (100013, 'Mango', 100)
21:20:48.151 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 6 returned as update count for SQL: INSERT INTO VOTES (USER_ID, DATE, RESTAURANT) VALUES (100000, '2015-05-01', 100002), (100000, '2015-05-02', 100003), (100000, '2015-05-03', 100004), (100001, '2015-05-01', 100005), (100001, '2015-05-02', 100006), (100001, '2015-05-03', 100002)
21:20:48.151 INFO  o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:508 - Executed SQL script from class path resource [db/populateDB.sql] in 5 ms.
21:20:48.152 DEBUG o.springframework.jdbc.datasource.DataSourceUtils.prepareConnectionForTransaction:176 - Setting JDBC Connection [ProxyConnection[PooledConnection[org.hsqldb.jdbc.JDBCConnection@45e35a0d]]] read-only
Hibernate: 
    select
        restaurant0_.id as id1_2_0_,
        restaurant0_.name as name2_2_0_ 
    from
        restaurants restaurant0_ 
    where
        restaurant0_.id=?
21:20:48.153 DEBUG o.springframework.jdbc.datasource.DataSourceUtils.resetConnectionAfterTransaction:233 - Resetting read-only flag of JDBC Connection [ProxyConnection[PooledConnection[org.hsqldb.jdbc.JDBCConnection@45e35a0d]]]
21:20:48.155 INFO  o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:442 - Executing SQL script from class path resource [db/populateDB.sql]
21:20:48.156 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 3 returned as update count for SQL: DELETE FROM user_roles
21:20:48.157 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 6 returned as update count for SQL: DELETE FROM votes
21:20:48.157 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 2 returned as update count for SQL: DELETE FROM users
21:20:48.157 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 7 returned as update count for SQL: DELETE FROM meals
21:20:48.157 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 7 returned as update count for SQL: DELETE FROM menus
21:20:48.158 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 5 returned as update count for SQL: DELETE FROM restaurants
21:20:48.158 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 0 returned as update count for SQL: ALTER SEQUENCE global_seq RESTART WITH 100000
21:20:48.158 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 2 returned as update count for SQL: INSERT INTO USERS (name, email, password) VALUES ('User', 'user@yandex.ru', '{noop}password'), ('Admin', 'admin@yandex.ru','{noop}admin')
21:20:48.159 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 3 returned as update count for SQL: INSERT INTO USER_ROLES (role, user_id) VALUES ('ROLE_USER', 100000), ('ROLE_ADMIN', 100001), ('ROLE_USER', 100001)
21:20:48.159 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 5 returned as update count for SQL: INSERT INTO RESTAURANTS (NAME) VALUES ('Russia'), ('Ukraine'), ('U Kolyana'), ('Almaz'), ('Fart')
21:20:48.159 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 7 returned as update count for SQL: INSERT INTO MENUS (ID_REST, ADD_DATE) VALUES (100002, '2015-05-01'), (100003, '2015-05-02'), (100004, '2015-05-03'), (100005, '2015-05-01'), (100006, '2015-05-02'), (100002, '2015-05-02'), (100002, CURRENT_DATE)
21:20:48.160 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 7 returned as update count for SQL: INSERT INTO MEALS (ID_MENU, NAME, PRICE) VALUES (100007, 'Apple', 5), (100008, 'Juice', 10), (100009, 'Potato', 20), (100010, 'Bananas', 30), (100011, 'Bread', 40), (100007, 'Bottle of water', 50), (100013, 'Mango', 100)
21:20:48.160 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 6 returned as update count for SQL: INSERT INTO VOTES (USER_ID, DATE, RESTAURANT) VALUES (100000, '2015-05-01', 100002), (100000, '2015-05-02', 100003), (100000, '2015-05-03', 100004), (100001, '2015-05-01', 100005), (100001, '2015-05-02', 100006), (100001, '2015-05-03', 100002)
21:20:48.160 INFO  o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:508 - Executed SQL script from class path resource [db/populateDB.sql] in 4 ms.
Hibernate: 
    /* DELETE 
    FROM
        Restaurant r 
    WHERE
        r.id=:id */ delete 
        from
            restaurants 
        where
            id=?
21:20:48.162 WARN  o.h.e.j.s.SqlExceptionHelper$StandardWarningHandler.logWarning:217 - SQL Warning Code: -1100, SQLState: 02000
21:20:48.163 WARN  o.h.e.j.s.SqlExceptionHelper$StandardWarningHandler.logWarning:218 - no data
[INFO] Tests run: 9, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.112 s - in ru.neustupov.votingforrestaurants.service.RestaurantServiceTest
[INFO] Running ru.neustupov.votingforrestaurants.service.UserServiceTest
21:20:48.171 INFO  o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:442 - Executing SQL script from class path resource [db/populateDB.sql]
21:20:48.173 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 3 returned as update count for SQL: DELETE FROM user_roles
21:20:48.173 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 6 returned as update count for SQL: DELETE FROM votes
21:20:48.173 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 2 returned as update count for SQL: DELETE FROM users
21:20:48.173 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 7 returned as update count for SQL: DELETE FROM meals
21:20:48.173 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 7 returned as update count for SQL: DELETE FROM menus
21:20:48.174 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 5 returned as update count for SQL: DELETE FROM restaurants
21:20:48.174 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 0 returned as update count for SQL: ALTER SEQUENCE global_seq RESTART WITH 100000
21:20:48.175 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 2 returned as update count for SQL: INSERT INTO USERS (name, email, password) VALUES ('User', 'user@yandex.ru', '{noop}password'), ('Admin', 'admin@yandex.ru','{noop}admin')
21:20:48.175 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 3 returned as update count for SQL: INSERT INTO USER_ROLES (role, user_id) VALUES ('ROLE_USER', 100000), ('ROLE_ADMIN', 100001), ('ROLE_USER', 100001)
21:20:48.175 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 5 returned as update count for SQL: INSERT INTO RESTAURANTS (NAME) VALUES ('Russia'), ('Ukraine'), ('U Kolyana'), ('Almaz'), ('Fart')
21:20:48.176 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 7 returned as update count for SQL: INSERT INTO MENUS (ID_REST, ADD_DATE) VALUES (100002, '2015-05-01'), (100003, '2015-05-02'), (100004, '2015-05-03'), (100005, '2015-05-01'), (100006, '2015-05-02'), (100002, '2015-05-02'), (100002, CURRENT_DATE)
21:20:48.176 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 7 returned as update count for SQL: INSERT INTO MEALS (ID_MENU, NAME, PRICE) VALUES (100007, 'Apple', 5), (100008, 'Juice', 10), (100009, 'Potato', 20), (100010, 'Bananas', 30), (100011, 'Bread', 40), (100007, 'Bottle of water', 50), (100013, 'Mango', 100)
21:20:48.176 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 6 returned as update count for SQL: INSERT INTO VOTES (USER_ID, DATE, RESTAURANT) VALUES (100000, '2015-05-01', 100002), (100000, '2015-05-02', 100003), (100000, '2015-05-03', 100004), (100001, '2015-05-01', 100005), (100001, '2015-05-02', 100006), (100001, '2015-05-03', 100002)
21:20:48.177 INFO  o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:508 - Executed SQL script from class path resource [db/populateDB.sql] in 4 ms.
Hibernate: 
    call next value for global_seq
Hibernate: 
    /* insert ru.neustupov.votingforrestaurants.model.User
        */ insert 
        into
            users
            (name, email, enabled, password, registered, id) 
        values
            (?, ?, ?, ?, ?, ?)
Hibernate: 
    /* insert collection
        row ru.neustupov.votingforrestaurants.model.User.roles */ insert 
        into
            user_roles
            (user_id, role) 
        values
            (?, ?)
21:20:48.320 DEBUG o.springframework.jdbc.datasource.DataSourceUtils.prepareConnectionForTransaction:176 - Setting JDBC Connection [ProxyConnection[PooledConnection[org.hsqldb.jdbc.JDBCConnection@45e35a0d]]] read-only
Hibernate: 
    /* SELECT
        DISTINCT u 
    FROM
        User u 
    LEFT JOIN
        FETCH u.roles 
    ORDER BY
        u.name */ select
            distinct user0_.id as id1_4_,
            user0_.name as name2_4_,
            user0_.email as email3_4_,
            user0_.enabled as enabled4_4_,
            user0_.password as password5_4_,
            user0_.registered as register6_4_,
            roles1_.user_id as user_id1_3_0__,
            roles1_.role as role2_3_0__ 
        from
            users user0_ 
        left outer join
            user_roles roles1_ 
                on user0_.id=roles1_.user_id 
        order by
            user0_.name
21:20:48.323 DEBUG o.springframework.jdbc.datasource.DataSourceUtils.resetConnectionAfterTransaction:233 - Resetting read-only flag of JDBC Connection [ProxyConnection[PooledConnection[org.hsqldb.jdbc.JDBCConnection@45e35a0d]]]
21:20:48.325 INFO  o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:442 - Executing SQL script from class path resource [db/populateDB.sql]
21:20:48.326 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 4 returned as update count for SQL: DELETE FROM user_roles
21:20:48.326 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 6 returned as update count for SQL: DELETE FROM votes
21:20:48.327 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 3 returned as update count for SQL: DELETE FROM users
21:20:48.327 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 7 returned as update count for SQL: DELETE FROM meals
21:20:48.327 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 7 returned as update count for SQL: DELETE FROM menus
21:20:48.327 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 5 returned as update count for SQL: DELETE FROM restaurants
21:20:48.328 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 0 returned as update count for SQL: ALTER SEQUENCE global_seq RESTART WITH 100000
21:20:48.328 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 2 returned as update count for SQL: INSERT INTO USERS (name, email, password) VALUES ('User', 'user@yandex.ru', '{noop}password'), ('Admin', 'admin@yandex.ru','{noop}admin')
21:20:48.328 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 3 returned as update count for SQL: INSERT INTO USER_ROLES (role, user_id) VALUES ('ROLE_USER', 100000), ('ROLE_ADMIN', 100001), ('ROLE_USER', 100001)
21:20:48.328 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 5 returned as update count for SQL: INSERT INTO RESTAURANTS (NAME) VALUES ('Russia'), ('Ukraine'), ('U Kolyana'), ('Almaz'), ('Fart')
21:20:48.329 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 7 returned as update count for SQL: INSERT INTO MENUS (ID_REST, ADD_DATE) VALUES (100002, '2015-05-01'), (100003, '2015-05-02'), (100004, '2015-05-03'), (100005, '2015-05-01'), (100006, '2015-05-02'), (100002, '2015-05-02'), (100002, CURRENT_DATE)
21:20:48.329 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 7 returned as update count for SQL: INSERT INTO MEALS (ID_MENU, NAME, PRICE) VALUES (100007, 'Apple', 5), (100008, 'Juice', 10), (100009, 'Potato', 20), (100010, 'Bananas', 30), (100011, 'Bread', 40), (100007, 'Bottle of water', 50), (100013, 'Mango', 100)
21:20:48.329 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 6 returned as update count for SQL: INSERT INTO VOTES (USER_ID, DATE, RESTAURANT) VALUES (100000, '2015-05-01', 100002), (100000, '2015-05-02', 100003), (100000, '2015-05-03', 100004), (100001, '2015-05-01', 100005), (100001, '2015-05-02', 100006), (100001, '2015-05-03', 100002)
21:20:48.330 INFO  o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:508 - Executed SQL script from class path resource [db/populateDB.sql] in 5 ms.
Hibernate: 
    /* DELETE 
    FROM
        User u 
    WHERE
        u.id=:id */ delete 
        from
            users 
        where
            id=?
21:20:48.333 DEBUG o.springframework.jdbc.datasource.DataSourceUtils.prepareConnectionForTransaction:176 - Setting JDBC Connection [ProxyConnection[PooledConnection[org.hsqldb.jdbc.JDBCConnection@45e35a0d]]] read-only
Hibernate: 
    /* SELECT
        DISTINCT u 
    FROM
        User u 
    LEFT JOIN
        FETCH u.roles 
    ORDER BY
        u.name */ select
            distinct user0_.id as id1_4_,
            user0_.name as name2_4_,
            user0_.email as email3_4_,
            user0_.enabled as enabled4_4_,
            user0_.password as password5_4_,
            user0_.registered as register6_4_,
            roles1_.user_id as user_id1_3_0__,
            roles1_.role as role2_3_0__ 
        from
            users user0_ 
        left outer join
            user_roles roles1_ 
                on user0_.id=roles1_.user_id 
        order by
            user0_.name
21:20:48.335 DEBUG o.springframework.jdbc.datasource.DataSourceUtils.resetConnectionAfterTransaction:233 - Resetting read-only flag of JDBC Connection [ProxyConnection[PooledConnection[org.hsqldb.jdbc.JDBCConnection@45e35a0d]]]
21:20:48.337 INFO  o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:442 - Executing SQL script from class path resource [db/populateDB.sql]
21:20:48.338 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 2 returned as update count for SQL: DELETE FROM user_roles
21:20:48.338 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 3 returned as update count for SQL: DELETE FROM votes
21:20:48.338 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 1 returned as update count for SQL: DELETE FROM users
21:20:48.339 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 7 returned as update count for SQL: DELETE FROM meals
21:20:48.339 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 7 returned as update count for SQL: DELETE FROM menus
21:20:48.339 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 5 returned as update count for SQL: DELETE FROM restaurants
21:20:48.340 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 0 returned as update count for SQL: ALTER SEQUENCE global_seq RESTART WITH 100000
21:20:48.340 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 2 returned as update count for SQL: INSERT INTO USERS (name, email, password) VALUES ('User', 'user@yandex.ru', '{noop}password'), ('Admin', 'admin@yandex.ru','{noop}admin')
21:20:48.340 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 3 returned as update count for SQL: INSERT INTO USER_ROLES (role, user_id) VALUES ('ROLE_USER', 100000), ('ROLE_ADMIN', 100001), ('ROLE_USER', 100001)
21:20:48.341 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 5 returned as update count for SQL: INSERT INTO RESTAURANTS (NAME) VALUES ('Russia'), ('Ukraine'), ('U Kolyana'), ('Almaz'), ('Fart')
21:20:48.341 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 7 returned as update count for SQL: INSERT INTO MENUS (ID_REST, ADD_DATE) VALUES (100002, '2015-05-01'), (100003, '2015-05-02'), (100004, '2015-05-03'), (100005, '2015-05-01'), (100006, '2015-05-02'), (100002, '2015-05-02'), (100002, CURRENT_DATE)
21:20:48.342 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 7 returned as update count for SQL: INSERT INTO MEALS (ID_MENU, NAME, PRICE) VALUES (100007, 'Apple', 5), (100008, 'Juice', 10), (100009, 'Potato', 20), (100010, 'Bananas', 30), (100011, 'Bread', 40), (100007, 'Bottle of water', 50), (100013, 'Mango', 100)
21:20:48.342 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 6 returned as update count for SQL: INSERT INTO VOTES (USER_ID, DATE, RESTAURANT) VALUES (100000, '2015-05-01', 100002), (100000, '2015-05-02', 100003), (100000, '2015-05-03', 100004), (100001, '2015-05-01', 100005), (100001, '2015-05-02', 100006), (100001, '2015-05-03', 100002)
21:20:48.342 INFO  o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:508 - Executed SQL script from class path resource [db/populateDB.sql] in 5 ms.
21:20:48.344 DEBUG o.springframework.jdbc.datasource.DataSourceUtils.prepareConnectionForTransaction:176 - Setting JDBC Connection [ProxyConnection[PooledConnection[org.hsqldb.jdbc.JDBCConnection@45e35a0d]]] read-only
Hibernate: 
    /* SELECT
        DISTINCT u 
    FROM
        User u 
    LEFT JOIN
        FETCH u.roles 
    ORDER BY
        u.name */ select
            distinct user0_.id as id1_4_,
            user0_.name as name2_4_,
            user0_.email as email3_4_,
            user0_.enabled as enabled4_4_,
            user0_.password as password5_4_,
            user0_.registered as register6_4_,
            roles1_.user_id as user_id1_3_0__,
            roles1_.role as role2_3_0__ 
        from
            users user0_ 
        left outer join
            user_roles roles1_ 
                on user0_.id=roles1_.user_id 
        order by
            user0_.name
21:20:48.346 DEBUG o.springframework.jdbc.datasource.DataSourceUtils.resetConnectionAfterTransaction:233 - Resetting read-only flag of JDBC Connection [ProxyConnection[PooledConnection[org.hsqldb.jdbc.JDBCConnection@45e35a0d]]]
21:20:48.348 INFO  o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:442 - Executing SQL script from class path resource [db/populateDB.sql]
21:20:48.349 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 3 returned as update count for SQL: DELETE FROM user_roles
21:20:48.349 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 6 returned as update count for SQL: DELETE FROM votes
21:20:48.349 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 2 returned as update count for SQL: DELETE FROM users
21:20:48.350 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 7 returned as update count for SQL: DELETE FROM meals
21:20:48.350 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 7 returned as update count for SQL: DELETE FROM menus
21:20:48.350 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 5 returned as update count for SQL: DELETE FROM restaurants
21:20:48.350 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 0 returned as update count for SQL: ALTER SEQUENCE global_seq RESTART WITH 100000
21:20:48.351 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 2 returned as update count for SQL: INSERT INTO USERS (name, email, password) VALUES ('User', 'user@yandex.ru', '{noop}password'), ('Admin', 'admin@yandex.ru','{noop}admin')
21:20:48.351 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 3 returned as update count for SQL: INSERT INTO USER_ROLES (role, user_id) VALUES ('ROLE_USER', 100000), ('ROLE_ADMIN', 100001), ('ROLE_USER', 100001)
21:20:48.351 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 5 returned as update count for SQL: INSERT INTO RESTAURANTS (NAME) VALUES ('Russia'), ('Ukraine'), ('U Kolyana'), ('Almaz'), ('Fart')
21:20:48.352 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 7 returned as update count for SQL: INSERT INTO MENUS (ID_REST, ADD_DATE) VALUES (100002, '2015-05-01'), (100003, '2015-05-02'), (100004, '2015-05-03'), (100005, '2015-05-01'), (100006, '2015-05-02'), (100002, '2015-05-02'), (100002, CURRENT_DATE)
21:20:48.352 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 7 returned as update count for SQL: INSERT INTO MEALS (ID_MENU, NAME, PRICE) VALUES (100007, 'Apple', 5), (100008, 'Juice', 10), (100009, 'Potato', 20), (100010, 'Bananas', 30), (100011, 'Bread', 40), (100007, 'Bottle of water', 50), (100013, 'Mango', 100)
21:20:48.353 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 6 returned as update count for SQL: INSERT INTO VOTES (USER_ID, DATE, RESTAURANT) VALUES (100000, '2015-05-01', 100002), (100000, '2015-05-02', 100003), (100000, '2015-05-03', 100004), (100001, '2015-05-01', 100005), (100001, '2015-05-02', 100006), (100001, '2015-05-03', 100002)
21:20:48.353 INFO  o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:508 - Executed SQL script from class path resource [db/populateDB.sql] in 5 ms.
Hibernate: 
    /* load ru.neustupov.votingforrestaurants.model.User */ select
        user0_.id as id1_4_0_,
        user0_.name as name2_4_0_,
        user0_.email as email3_4_0_,
        user0_.enabled as enabled4_4_0_,
        user0_.password as password5_4_0_,
        user0_.registered as register6_4_0_ 
    from
        users user0_ 
    where
        user0_.id=?
Hibernate: 
    select
        roles0_.user_id as user_id1_3_0_,
        roles0_.role as role2_3_0_ 
    from
        user_roles roles0_ 
    where
        roles0_.user_id=?
Hibernate: 
    /* update
        ru.neustupov.votingforrestaurants.model.User */ update
            users 
        set
            name=?,
            email=?,
            enabled=?,
            password=?,
            registered=? 
        where
            id=?
Hibernate: 
    /* delete collection row ru.neustupov.votingforrestaurants.model.User.roles */ delete 
        from
            user_roles 
        where
            user_id=? 
            and role=?
Hibernate: 
    /* insert collection
        row ru.neustupov.votingforrestaurants.model.User.roles */ insert 
        into
            user_roles
            (user_id, role) 
        values
            (?, ?)
21:20:48.466 DEBUG o.springframework.jdbc.datasource.DataSourceUtils.prepareConnectionForTransaction:176 - Setting JDBC Connection [ProxyConnection[PooledConnection[org.hsqldb.jdbc.JDBCConnection@45e35a0d]]] read-only
Hibernate: 
    select
        user0_.id as id1_4_0_,
        user0_.name as name2_4_0_,
        user0_.email as email3_4_0_,
        user0_.enabled as enabled4_4_0_,
        user0_.password as password5_4_0_,
        user0_.registered as register6_4_0_,
        roles1_.user_id as user_id1_3_1_,
        roles1_.role as role2_3_1_ 
    from
        users user0_ 
    left outer join
        user_roles roles1_ 
            on user0_.id=roles1_.user_id 
    where
        user0_.id=?
21:20:48.467 DEBUG o.springframework.jdbc.datasource.DataSourceUtils.resetConnectionAfterTransaction:233 - Resetting read-only flag of JDBC Connection [ProxyConnection[PooledConnection[org.hsqldb.jdbc.JDBCConnection@45e35a0d]]]
21:20:48.469 INFO  o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:442 - Executing SQL script from class path resource [db/populateDB.sql]
21:20:48.470 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 3 returned as update count for SQL: DELETE FROM user_roles
21:20:48.470 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 6 returned as update count for SQL: DELETE FROM votes
21:20:48.470 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 2 returned as update count for SQL: DELETE FROM users
21:20:48.470 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 7 returned as update count for SQL: DELETE FROM meals
21:20:48.471 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 7 returned as update count for SQL: DELETE FROM menus
21:20:48.471 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 5 returned as update count for SQL: DELETE FROM restaurants
21:20:48.471 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 0 returned as update count for SQL: ALTER SEQUENCE global_seq RESTART WITH 100000
21:20:48.471 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 2 returned as update count for SQL: INSERT INTO USERS (name, email, password) VALUES ('User', 'user@yandex.ru', '{noop}password'), ('Admin', 'admin@yandex.ru','{noop}admin')
21:20:48.471 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 3 returned as update count for SQL: INSERT INTO USER_ROLES (role, user_id) VALUES ('ROLE_USER', 100000), ('ROLE_ADMIN', 100001), ('ROLE_USER', 100001)
21:20:48.472 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 5 returned as update count for SQL: INSERT INTO RESTAURANTS (NAME) VALUES ('Russia'), ('Ukraine'), ('U Kolyana'), ('Almaz'), ('Fart')
21:20:48.472 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 7 returned as update count for SQL: INSERT INTO MENUS (ID_REST, ADD_DATE) VALUES (100002, '2015-05-01'), (100003, '2015-05-02'), (100004, '2015-05-03'), (100005, '2015-05-01'), (100006, '2015-05-02'), (100002, '2015-05-02'), (100002, CURRENT_DATE)
21:20:48.472 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 7 returned as update count for SQL: INSERT INTO MEALS (ID_MENU, NAME, PRICE) VALUES (100007, 'Apple', 5), (100008, 'Juice', 10), (100009, 'Potato', 20), (100010, 'Bananas', 30), (100011, 'Bread', 40), (100007, 'Bottle of water', 50), (100013, 'Mango', 100)
21:20:48.473 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 6 returned as update count for SQL: INSERT INTO VOTES (USER_ID, DATE, RESTAURANT) VALUES (100000, '2015-05-01', 100002), (100000, '2015-05-02', 100003), (100000, '2015-05-03', 100004), (100001, '2015-05-01', 100005), (100001, '2015-05-02', 100006), (100001, '2015-05-03', 100002)
21:20:48.473 INFO  o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:508 - Executed SQL script from class path resource [db/populateDB.sql] in 4 ms.
Hibernate: 
    /* load ru.neustupov.votingforrestaurants.model.User */ select
        user0_.id as id1_4_0_,
        user0_.name as name2_4_0_,
        user0_.email as email3_4_0_,
        user0_.enabled as enabled4_4_0_,
        user0_.password as password5_4_0_,
        user0_.registered as register6_4_0_ 
    from
        users user0_ 
    where
        user0_.id=?
Hibernate: 
    call next value for global_seq
21:20:48.575 ERROR org.hibernate.internal.ExceptionMapperStandardImpl.mapManagedFlushFailure:39 - HHH000346: Error during managed flush [Validation failed for classes [ru.neustupov.votingforrestaurants.model.User] during persist time for groups [ru.neustupov.votingforrestaurants.View$Persist, ]
List of constraint violations:[
	ConstraintViolationImpl{interpolatedMessage='must not be blank', propertyPath=name, rootBeanClass=class ru.neustupov.votingforrestaurants.model.User, messageTemplate='{javax.validation.constraints.NotBlank.message}'}
]]
Hibernate: 
    /* load ru.neustupov.votingforrestaurants.model.User */ select
        user0_.id as id1_4_0_,
        user0_.name as name2_4_0_,
        user0_.email as email3_4_0_,
        user0_.enabled as enabled4_4_0_,
        user0_.password as password5_4_0_,
        user0_.registered as register6_4_0_ 
    from
        users user0_ 
    where
        user0_.id=?
Hibernate: 
    call next value for global_seq
21:20:48.674 ERROR org.hibernate.internal.ExceptionMapperStandardImpl.mapManagedFlushFailure:39 - HHH000346: Error during managed flush [Validation failed for classes [ru.neustupov.votingforrestaurants.model.User] during persist time for groups [ru.neustupov.votingforrestaurants.View$Persist, ]
List of constraint violations:[
	ConstraintViolationImpl{interpolatedMessage='must be a well-formed email address', propertyPath=email, rootBeanClass=class ru.neustupov.votingforrestaurants.model.User, messageTemplate='{javax.validation.constraints.Email.message}'}
]]
Hibernate: 
    /* load ru.neustupov.votingforrestaurants.model.User */ select
        user0_.id as id1_4_0_,
        user0_.name as name2_4_0_,
        user0_.email as email3_4_0_,
        user0_.enabled as enabled4_4_0_,
        user0_.password as password5_4_0_,
        user0_.registered as register6_4_0_ 
    from
        users user0_ 
    where
        user0_.id=?
Hibernate: 
    call next value for global_seq
21:20:48.676 ERROR org.hibernate.internal.ExceptionMapperStandardImpl.mapManagedFlushFailure:39 - HHH000346: Error during managed flush [Validation failed for classes [ru.neustupov.votingforrestaurants.model.User] during persist time for groups [ru.neustupov.votingforrestaurants.View$Persist, ]
List of constraint violations:[
	ConstraintViolationImpl{interpolatedMessage='size must be between 5 and 100', propertyPath=password, rootBeanClass=class ru.neustupov.votingforrestaurants.model.User, messageTemplate='{javax.validation.constraints.Size.message}'}
	ConstraintViolationImpl{interpolatedMessage='must not be blank', propertyPath=password, rootBeanClass=class ru.neustupov.votingforrestaurants.model.User, messageTemplate='{javax.validation.constraints.NotBlank.message}'}
]]
Hibernate: 
    /* load ru.neustupov.votingforrestaurants.model.User */ select
        user0_.id as id1_4_0_,
        user0_.name as name2_4_0_,
        user0_.email as email3_4_0_,
        user0_.enabled as enabled4_4_0_,
        user0_.password as password5_4_0_,
        user0_.registered as register6_4_0_ 
    from
        users user0_ 
    where
        user0_.id=?
Hibernate: 
    call next value for global_seq
21:20:48.774 ERROR org.hibernate.internal.ExceptionMapperStandardImpl.mapManagedFlushFailure:39 - HHH000346: Error during managed flush [Validation failed for classes [ru.neustupov.votingforrestaurants.model.User] during persist time for groups [ru.neustupov.votingforrestaurants.View$Persist, ]
List of constraint violations:[
	ConstraintViolationImpl{interpolatedMessage='must not be null', propertyPath=registered, rootBeanClass=class ru.neustupov.votingforrestaurants.model.User, messageTemplate='{javax.validation.constraints.NotNull.message}'}
]]
21:20:48.813 INFO  o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:442 - Executing SQL script from class path resource [db/populateDB.sql]
21:20:48.814 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 3 returned as update count for SQL: DELETE FROM user_roles
21:20:48.815 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 6 returned as update count for SQL: DELETE FROM votes
21:20:48.815 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 2 returned as update count for SQL: DELETE FROM users
21:20:48.815 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 7 returned as update count for SQL: DELETE FROM meals
21:20:48.816 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 7 returned as update count for SQL: DELETE FROM menus
21:20:48.816 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 5 returned as update count for SQL: DELETE FROM restaurants
21:20:48.816 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 0 returned as update count for SQL: ALTER SEQUENCE global_seq RESTART WITH 100000
21:20:48.817 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 2 returned as update count for SQL: INSERT INTO USERS (name, email, password) VALUES ('User', 'user@yandex.ru', '{noop}password'), ('Admin', 'admin@yandex.ru','{noop}admin')
21:20:48.817 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 3 returned as update count for SQL: INSERT INTO USER_ROLES (role, user_id) VALUES ('ROLE_USER', 100000), ('ROLE_ADMIN', 100001), ('ROLE_USER', 100001)
21:20:48.817 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 5 returned as update count for SQL: INSERT INTO RESTAURANTS (NAME) VALUES ('Russia'), ('Ukraine'), ('U Kolyana'), ('Almaz'), ('Fart')
21:20:48.818 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 7 returned as update count for SQL: INSERT INTO MENUS (ID_REST, ADD_DATE) VALUES (100002, '2015-05-01'), (100003, '2015-05-02'), (100004, '2015-05-03'), (100005, '2015-05-01'), (100006, '2015-05-02'), (100002, '2015-05-02'), (100002, CURRENT_DATE)
21:20:48.818 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 7 returned as update count for SQL: INSERT INTO MEALS (ID_MENU, NAME, PRICE) VALUES (100007, 'Apple', 5), (100008, 'Juice', 10), (100009, 'Potato', 20), (100010, 'Bananas', 30), (100011, 'Bread', 40), (100007, 'Bottle of water', 50), (100013, 'Mango', 100)
21:20:48.819 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 6 returned as update count for SQL: INSERT INTO VOTES (USER_ID, DATE, RESTAURANT) VALUES (100000, '2015-05-01', 100002), (100000, '2015-05-02', 100003), (100000, '2015-05-03', 100004), (100001, '2015-05-01', 100005), (100001, '2015-05-02', 100006), (100001, '2015-05-03', 100002)
21:20:48.819 INFO  o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:508 - Executed SQL script from class path resource [db/populateDB.sql] in 6 ms.
21:20:48.820 DEBUG o.springframework.jdbc.datasource.DataSourceUtils.prepareConnectionForTransaction:176 - Setting JDBC Connection [ProxyConnection[PooledConnection[org.hsqldb.jdbc.JDBCConnection@45e35a0d]]] read-only
Hibernate: 
    select
        user0_.id as id1_4_0_,
        user0_.name as name2_4_0_,
        user0_.email as email3_4_0_,
        user0_.enabled as enabled4_4_0_,
        user0_.password as password5_4_0_,
        user0_.registered as register6_4_0_,
        roles1_.user_id as user_id1_3_1_,
        roles1_.role as role2_3_1_ 
    from
        users user0_ 
    left outer join
        user_roles roles1_ 
            on user0_.id=roles1_.user_id 
    where
        user0_.id=?
21:20:48.821 DEBUG o.springframework.jdbc.datasource.DataSourceUtils.resetConnectionAfterTransaction:233 - Resetting read-only flag of JDBC Connection [ProxyConnection[PooledConnection[org.hsqldb.jdbc.JDBCConnection@45e35a0d]]]
21:20:48.823 INFO  o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:442 - Executing SQL script from class path resource [db/populateDB.sql]
21:20:48.824 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 3 returned as update count for SQL: DELETE FROM user_roles
21:20:48.824 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 6 returned as update count for SQL: DELETE FROM votes
21:20:48.825 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 2 returned as update count for SQL: DELETE FROM users
21:20:48.825 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 7 returned as update count for SQL: DELETE FROM meals
21:20:48.825 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 7 returned as update count for SQL: DELETE FROM menus
21:20:48.825 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 5 returned as update count for SQL: DELETE FROM restaurants
21:20:48.826 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 0 returned as update count for SQL: ALTER SEQUENCE global_seq RESTART WITH 100000
21:20:48.826 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 2 returned as update count for SQL: INSERT INTO USERS (name, email, password) VALUES ('User', 'user@yandex.ru', '{noop}password'), ('Admin', 'admin@yandex.ru','{noop}admin')
21:20:48.826 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 3 returned as update count for SQL: INSERT INTO USER_ROLES (role, user_id) VALUES ('ROLE_USER', 100000), ('ROLE_ADMIN', 100001), ('ROLE_USER', 100001)
21:20:48.827 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 5 returned as update count for SQL: INSERT INTO RESTAURANTS (NAME) VALUES ('Russia'), ('Ukraine'), ('U Kolyana'), ('Almaz'), ('Fart')
21:20:48.827 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 7 returned as update count for SQL: INSERT INTO MENUS (ID_REST, ADD_DATE) VALUES (100002, '2015-05-01'), (100003, '2015-05-02'), (100004, '2015-05-03'), (100005, '2015-05-01'), (100006, '2015-05-02'), (100002, '2015-05-02'), (100002, CURRENT_DATE)
21:20:48.827 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 7 returned as update count for SQL: INSERT INTO MEALS (ID_MENU, NAME, PRICE) VALUES (100007, 'Apple', 5), (100008, 'Juice', 10), (100009, 'Potato', 20), (100010, 'Bananas', 30), (100011, 'Bread', 40), (100007, 'Bottle of water', 50), (100013, 'Mango', 100)
21:20:48.828 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 6 returned as update count for SQL: INSERT INTO VOTES (USER_ID, DATE, RESTAURANT) VALUES (100000, '2015-05-01', 100002), (100000, '2015-05-02', 100003), (100000, '2015-05-03', 100004), (100001, '2015-05-01', 100005), (100001, '2015-05-02', 100006), (100001, '2015-05-03', 100002)
21:20:48.828 INFO  o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:508 - Executed SQL script from class path resource [db/populateDB.sql] in 5 ms.
21:20:48.829 DEBUG o.springframework.jdbc.datasource.DataSourceUtils.prepareConnectionForTransaction:176 - Setting JDBC Connection [ProxyConnection[PooledConnection[org.hsqldb.jdbc.JDBCConnection@45e35a0d]]] read-only
Hibernate: 
    select
        user0_.id as id1_4_0_,
        user0_.name as name2_4_0_,
        user0_.email as email3_4_0_,
        user0_.enabled as enabled4_4_0_,
        user0_.password as password5_4_0_,
        user0_.registered as register6_4_0_,
        roles1_.user_id as user_id1_3_1_,
        roles1_.role as role2_3_1_ 
    from
        users user0_ 
    left outer join
        user_roles roles1_ 
            on user0_.id=roles1_.user_id 
    where
        user0_.id=?
21:20:48.830 DEBUG o.springframework.jdbc.datasource.DataSourceUtils.resetConnectionAfterTransaction:233 - Resetting read-only flag of JDBC Connection [ProxyConnection[PooledConnection[org.hsqldb.jdbc.JDBCConnection@45e35a0d]]]
21:20:48.832 INFO  o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:442 - Executing SQL script from class path resource [db/populateDB.sql]
21:20:48.833 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 3 returned as update count for SQL: DELETE FROM user_roles
21:20:48.833 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 6 returned as update count for SQL: DELETE FROM votes
21:20:48.833 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 2 returned as update count for SQL: DELETE FROM users
21:20:48.834 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 7 returned as update count for SQL: DELETE FROM meals
21:20:48.834 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 7 returned as update count for SQL: DELETE FROM menus
21:20:48.834 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 5 returned as update count for SQL: DELETE FROM restaurants
21:20:48.834 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 0 returned as update count for SQL: ALTER SEQUENCE global_seq RESTART WITH 100000
21:20:48.835 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 2 returned as update count for SQL: INSERT INTO USERS (name, email, password) VALUES ('User', 'user@yandex.ru', '{noop}password'), ('Admin', 'admin@yandex.ru','{noop}admin')
21:20:48.835 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 3 returned as update count for SQL: INSERT INTO USER_ROLES (role, user_id) VALUES ('ROLE_USER', 100000), ('ROLE_ADMIN', 100001), ('ROLE_USER', 100001)
21:20:48.835 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 5 returned as update count for SQL: INSERT INTO RESTAURANTS (NAME) VALUES ('Russia'), ('Ukraine'), ('U Kolyana'), ('Almaz'), ('Fart')
21:20:48.836 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 7 returned as update count for SQL: INSERT INTO MENUS (ID_REST, ADD_DATE) VALUES (100002, '2015-05-01'), (100003, '2015-05-02'), (100004, '2015-05-03'), (100005, '2015-05-01'), (100006, '2015-05-02'), (100002, '2015-05-02'), (100002, CURRENT_DATE)
21:20:48.836 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 7 returned as update count for SQL: INSERT INTO MEALS (ID_MENU, NAME, PRICE) VALUES (100007, 'Apple', 5), (100008, 'Juice', 10), (100009, 'Potato', 20), (100010, 'Bananas', 30), (100011, 'Bread', 40), (100007, 'Bottle of water', 50), (100013, 'Mango', 100)
21:20:48.836 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 6 returned as update count for SQL: INSERT INTO VOTES (USER_ID, DATE, RESTAURANT) VALUES (100000, '2015-05-01', 100002), (100000, '2015-05-02', 100003), (100000, '2015-05-03', 100004), (100001, '2015-05-01', 100005), (100001, '2015-05-02', 100006), (100001, '2015-05-03', 100002)
21:20:48.836 INFO  o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:508 - Executed SQL script from class path resource [db/populateDB.sql] in 4 ms.
Hibernate: 
    /* DELETE 
    FROM
        User u 
    WHERE
        u.id=:id */ delete 
        from
            users 
        where
            id=?
21:20:48.838 WARN  o.h.e.j.s.SqlExceptionHelper$StandardWarningHandler.logWarning:217 - SQL Warning Code: -1100, SQLState: 02000
21:20:48.839 WARN  o.h.e.j.s.SqlExceptionHelper$StandardWarningHandler.logWarning:218 - no data
21:20:48.840 INFO  o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:442 - Executing SQL script from class path resource [db/populateDB.sql]
21:20:48.841 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 3 returned as update count for SQL: DELETE FROM user_roles
21:20:48.842 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 6 returned as update count for SQL: DELETE FROM votes
21:20:48.842 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 2 returned as update count for SQL: DELETE FROM users
21:20:48.842 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 7 returned as update count for SQL: DELETE FROM meals
21:20:48.842 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 7 returned as update count for SQL: DELETE FROM menus
21:20:48.842 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 5 returned as update count for SQL: DELETE FROM restaurants
21:20:48.843 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 0 returned as update count for SQL: ALTER SEQUENCE global_seq RESTART WITH 100000
21:20:48.843 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 2 returned as update count for SQL: INSERT INTO USERS (name, email, password) VALUES ('User', 'user@yandex.ru', '{noop}password'), ('Admin', 'admin@yandex.ru','{noop}admin')
21:20:48.843 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 3 returned as update count for SQL: INSERT INTO USER_ROLES (role, user_id) VALUES ('ROLE_USER', 100000), ('ROLE_ADMIN', 100001), ('ROLE_USER', 100001)
21:20:48.844 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 5 returned as update count for SQL: INSERT INTO RESTAURANTS (NAME) VALUES ('Russia'), ('Ukraine'), ('U Kolyana'), ('Almaz'), ('Fart')
21:20:48.844 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 7 returned as update count for SQL: INSERT INTO MENUS (ID_REST, ADD_DATE) VALUES (100002, '2015-05-01'), (100003, '2015-05-02'), (100004, '2015-05-03'), (100005, '2015-05-01'), (100006, '2015-05-02'), (100002, '2015-05-02'), (100002, CURRENT_DATE)
21:20:48.844 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 7 returned as update count for SQL: INSERT INTO MEALS (ID_MENU, NAME, PRICE) VALUES (100007, 'Apple', 5), (100008, 'Juice', 10), (100009, 'Potato', 20), (100010, 'Bananas', 30), (100011, 'Bread', 40), (100007, 'Bottle of water', 50), (100013, 'Mango', 100)
21:20:48.845 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 6 returned as update count for SQL: INSERT INTO VOTES (USER_ID, DATE, RESTAURANT) VALUES (100000, '2015-05-01', 100002), (100000, '2015-05-02', 100003), (100000, '2015-05-03', 100004), (100001, '2015-05-01', 100005), (100001, '2015-05-02', 100006), (100001, '2015-05-03', 100002)
21:20:48.845 INFO  o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:508 - Executed SQL script from class path resource [db/populateDB.sql] in 4 ms.
Hibernate: 
    call next value for global_seq
Hibernate: 
    /* insert ru.neustupov.votingforrestaurants.model.User
        */ insert 
        into
            users
            (name, email, enabled, password, registered, id) 
        values
            (?, ?, ?, ?, ?, ?)
21:20:48.946 WARN  org.hibernate.engine.jdbc.spi.SqlExceptionHelper.logExceptions:129 - SQL Error: -104, SQLState: 23505
21:20:48.946 ERROR org.hibernate.engine.jdbc.spi.SqlExceptionHelper.logExceptions:131 - integrity constraint violation: unique constraint or index violation; USERS_UNIQUE_EMAIL_IDX table: USERS
21:20:48.946 ERROR org.hibernate.internal.ExceptionMapperStandardImpl.mapManagedFlushFailure:39 - HHH000346: Error during managed flush [org.hibernate.exception.ConstraintViolationException: could not execute statement]
21:20:48.948 INFO  o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:442 - Executing SQL script from class path resource [db/populateDB.sql]
21:20:48.949 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 3 returned as update count for SQL: DELETE FROM user_roles
21:20:48.949 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 6 returned as update count for SQL: DELETE FROM votes
21:20:48.950 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 2 returned as update count for SQL: DELETE FROM users
21:20:48.950 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 7 returned as update count for SQL: DELETE FROM meals
21:20:48.950 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 7 returned as update count for SQL: DELETE FROM menus
21:20:48.950 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 5 returned as update count for SQL: DELETE FROM restaurants
21:20:48.951 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 0 returned as update count for SQL: ALTER SEQUENCE global_seq RESTART WITH 100000
21:20:48.951 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 2 returned as update count for SQL: INSERT INTO USERS (name, email, password) VALUES ('User', 'user@yandex.ru', '{noop}password'), ('Admin', 'admin@yandex.ru','{noop}admin')
21:20:48.951 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 3 returned as update count for SQL: INSERT INTO USER_ROLES (role, user_id) VALUES ('ROLE_USER', 100000), ('ROLE_ADMIN', 100001), ('ROLE_USER', 100001)
21:20:48.951 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 5 returned as update count for SQL: INSERT INTO RESTAURANTS (NAME) VALUES ('Russia'), ('Ukraine'), ('U Kolyana'), ('Almaz'), ('Fart')
21:20:48.952 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 7 returned as update count for SQL: INSERT INTO MENUS (ID_REST, ADD_DATE) VALUES (100002, '2015-05-01'), (100003, '2015-05-02'), (100004, '2015-05-03'), (100005, '2015-05-01'), (100006, '2015-05-02'), (100002, '2015-05-02'), (100002, CURRENT_DATE)
21:20:48.952 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 7 returned as update count for SQL: INSERT INTO MEALS (ID_MENU, NAME, PRICE) VALUES (100007, 'Apple', 5), (100008, 'Juice', 10), (100009, 'Potato', 20), (100010, 'Bananas', 30), (100011, 'Bread', 40), (100007, 'Bottle of water', 50), (100013, 'Mango', 100)
21:20:48.953 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 6 returned as update count for SQL: INSERT INTO VOTES (USER_ID, DATE, RESTAURANT) VALUES (100000, '2015-05-01', 100002), (100000, '2015-05-02', 100003), (100000, '2015-05-03', 100004), (100001, '2015-05-01', 100005), (100001, '2015-05-02', 100006), (100001, '2015-05-03', 100002)
21:20:48.953 INFO  o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:508 - Executed SQL script from class path resource [db/populateDB.sql] in 5 ms.
Hibernate: 
    select
        user0_.id as id1_4_0_,
        user0_.name as name2_4_0_,
        user0_.email as email3_4_0_,
        user0_.enabled as enabled4_4_0_,
        user0_.password as password5_4_0_,
        user0_.registered as register6_4_0_,
        roles1_.user_id as user_id1_3_1_,
        roles1_.role as role2_3_1_ 
    from
        users user0_ 
    left outer join
        user_roles roles1_ 
            on user0_.id=roles1_.user_id 
    where
        user0_.id=?
Hibernate: 
    /* update
        ru.neustupov.votingforrestaurants.model.User */ update
            users 
        set
            name=?,
            email=?,
            enabled=?,
            password=?,
            registered=? 
        where
            id=?
21:20:48.957 DEBUG o.springframework.jdbc.datasource.DataSourceUtils.prepareConnectionForTransaction:176 - Setting JDBC Connection [ProxyConnection[PooledConnection[org.hsqldb.jdbc.JDBCConnection@45e35a0d]]] read-only
Hibernate: 
    select
        user0_.id as id1_4_0_,
        user0_.name as name2_4_0_,
        user0_.email as email3_4_0_,
        user0_.enabled as enabled4_4_0_,
        user0_.password as password5_4_0_,
        user0_.registered as register6_4_0_,
        roles1_.user_id as user_id1_3_1_,
        roles1_.role as role2_3_1_ 
    from
        users user0_ 
    left outer join
        user_roles roles1_ 
            on user0_.id=roles1_.user_id 
    where
        user0_.id=?
21:20:48.958 DEBUG o.springframework.jdbc.datasource.DataSourceUtils.resetConnectionAfterTransaction:233 - Resetting read-only flag of JDBC Connection [ProxyConnection[PooledConnection[org.hsqldb.jdbc.JDBCConnection@45e35a0d]]]
Hibernate: 
    select
        user0_.id as id1_4_0_,
        user0_.name as name2_4_0_,
        user0_.email as email3_4_0_,
        user0_.enabled as enabled4_4_0_,
        user0_.password as password5_4_0_,
        user0_.registered as register6_4_0_,
        roles1_.user_id as user_id1_3_1_,
        roles1_.role as role2_3_1_ 
    from
        users user0_ 
    left outer join
        user_roles roles1_ 
            on user0_.id=roles1_.user_id 
    where
        user0_.id=?
Hibernate: 
    /* update
        ru.neustupov.votingforrestaurants.model.User */ update
            users 
        set
            name=?,
            email=?,
            enabled=?,
            password=?,
            registered=? 
        where
            id=?
21:20:48.962 DEBUG o.springframework.jdbc.datasource.DataSourceUtils.prepareConnectionForTransaction:176 - Setting JDBC Connection [ProxyConnection[PooledConnection[org.hsqldb.jdbc.JDBCConnection@45e35a0d]]] read-only
Hibernate: 
    select
        user0_.id as id1_4_0_,
        user0_.name as name2_4_0_,
        user0_.email as email3_4_0_,
        user0_.enabled as enabled4_4_0_,
        user0_.password as password5_4_0_,
        user0_.registered as register6_4_0_,
        roles1_.user_id as user_id1_3_1_,
        roles1_.role as role2_3_1_ 
    from
        users user0_ 
    left outer join
        user_roles roles1_ 
            on user0_.id=roles1_.user_id 
    where
        user0_.id=?
21:20:48.963 DEBUG o.springframework.jdbc.datasource.DataSourceUtils.resetConnectionAfterTransaction:233 - Resetting read-only flag of JDBC Connection [ProxyConnection[PooledConnection[org.hsqldb.jdbc.JDBCConnection@45e35a0d]]]
21:20:48.965 INFO  o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:442 - Executing SQL script from class path resource [db/populateDB.sql]
21:20:48.966 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 3 returned as update count for SQL: DELETE FROM user_roles
21:20:48.966 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 6 returned as update count for SQL: DELETE FROM votes
21:20:48.966 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 2 returned as update count for SQL: DELETE FROM users
21:20:48.966 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 7 returned as update count for SQL: DELETE FROM meals
21:20:48.967 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 7 returned as update count for SQL: DELETE FROM menus
21:20:48.967 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 5 returned as update count for SQL: DELETE FROM restaurants
21:20:48.967 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 0 returned as update count for SQL: ALTER SEQUENCE global_seq RESTART WITH 100000
21:20:48.967 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 2 returned as update count for SQL: INSERT INTO USERS (name, email, password) VALUES ('User', 'user@yandex.ru', '{noop}password'), ('Admin', 'admin@yandex.ru','{noop}admin')
21:20:48.968 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 3 returned as update count for SQL: INSERT INTO USER_ROLES (role, user_id) VALUES ('ROLE_USER', 100000), ('ROLE_ADMIN', 100001), ('ROLE_USER', 100001)
21:20:48.968 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 5 returned as update count for SQL: INSERT INTO RESTAURANTS (NAME) VALUES ('Russia'), ('Ukraine'), ('U Kolyana'), ('Almaz'), ('Fart')
21:20:48.969 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 7 returned as update count for SQL: INSERT INTO MENUS (ID_REST, ADD_DATE) VALUES (100002, '2015-05-01'), (100003, '2015-05-02'), (100004, '2015-05-03'), (100005, '2015-05-01'), (100006, '2015-05-02'), (100002, '2015-05-02'), (100002, CURRENT_DATE)
21:20:48.969 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 7 returned as update count for SQL: INSERT INTO MEALS (ID_MENU, NAME, PRICE) VALUES (100007, 'Apple', 5), (100008, 'Juice', 10), (100009, 'Potato', 20), (100010, 'Bananas', 30), (100011, 'Bread', 40), (100007, 'Bottle of water', 50), (100013, 'Mango', 100)
21:20:48.969 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 6 returned as update count for SQL: INSERT INTO VOTES (USER_ID, DATE, RESTAURANT) VALUES (100000, '2015-05-01', 100002), (100000, '2015-05-02', 100003), (100000, '2015-05-03', 100004), (100001, '2015-05-01', 100005), (100001, '2015-05-02', 100006), (100001, '2015-05-03', 100002)
21:20:48.969 INFO  o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:508 - Executed SQL script from class path resource [db/populateDB.sql] in 4 ms.
21:20:48.970 DEBUG o.springframework.jdbc.datasource.DataSourceUtils.prepareConnectionForTransaction:176 - Setting JDBC Connection [ProxyConnection[PooledConnection[org.hsqldb.jdbc.JDBCConnection@45e35a0d]]] read-only
Hibernate: 
    /* select
        generatedAlias0 
    from
        User as generatedAlias0 
    where
        generatedAlias0.email=:param0 */ select
            user0_.id as id1_4_,
            user0_.name as name2_4_,
            user0_.email as email3_4_,
            user0_.enabled as enabled4_4_,
            user0_.password as password5_4_,
            user0_.registered as register6_4_ 
        from
            users user0_ 
        where
            user0_.email=?
Hibernate: 
    select
        roles0_.user_id as user_id1_3_0_,
        roles0_.role as role2_3_0_ 
    from
        user_roles roles0_ 
    where
        roles0_.user_id=?
21:20:48.974 DEBUG o.springframework.jdbc.datasource.DataSourceUtils.resetConnectionAfterTransaction:233 - Resetting read-only flag of JDBC Connection [ProxyConnection[PooledConnection[org.hsqldb.jdbc.JDBCConnection@45e35a0d]]]
[INFO] Tests run: 11, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.808 s - in ru.neustupov.votingforrestaurants.service.UserServiceTest
[INFO] Running ru.neustupov.votingforrestaurants.service.MenuServiceTest
21:20:48.981 INFO  o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:442 - Executing SQL script from class path resource [db/populateDB.sql]
21:20:48.983 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 3 returned as update count for SQL: DELETE FROM user_roles
21:20:48.983 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 6 returned as update count for SQL: DELETE FROM votes
21:20:48.983 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 2 returned as update count for SQL: DELETE FROM users
21:20:48.983 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 7 returned as update count for SQL: DELETE FROM meals
21:20:48.983 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 7 returned as update count for SQL: DELETE FROM menus
21:20:48.984 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 5 returned as update count for SQL: DELETE FROM restaurants
21:20:48.984 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 0 returned as update count for SQL: ALTER SEQUENCE global_seq RESTART WITH 100000
21:20:48.984 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 2 returned as update count for SQL: INSERT INTO USERS (name, email, password) VALUES ('User', 'user@yandex.ru', '{noop}password'), ('Admin', 'admin@yandex.ru','{noop}admin')
21:20:48.985 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 3 returned as update count for SQL: INSERT INTO USER_ROLES (role, user_id) VALUES ('ROLE_USER', 100000), ('ROLE_ADMIN', 100001), ('ROLE_USER', 100001)
21:20:48.985 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 5 returned as update count for SQL: INSERT INTO RESTAURANTS (NAME) VALUES ('Russia'), ('Ukraine'), ('U Kolyana'), ('Almaz'), ('Fart')
21:20:48.985 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 7 returned as update count for SQL: INSERT INTO MENUS (ID_REST, ADD_DATE) VALUES (100002, '2015-05-01'), (100003, '2015-05-02'), (100004, '2015-05-03'), (100005, '2015-05-01'), (100006, '2015-05-02'), (100002, '2015-05-02'), (100002, CURRENT_DATE)
21:20:48.985 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 7 returned as update count for SQL: INSERT INTO MEALS (ID_MENU, NAME, PRICE) VALUES (100007, 'Apple', 5), (100008, 'Juice', 10), (100009, 'Potato', 20), (100010, 'Bananas', 30), (100011, 'Bread', 40), (100007, 'Bottle of water', 50), (100013, 'Mango', 100)
21:20:48.986 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 6 returned as update count for SQL: INSERT INTO VOTES (USER_ID, DATE, RESTAURANT) VALUES (100000, '2015-05-01', 100002), (100000, '2015-05-02', 100003), (100000, '2015-05-03', 100004), (100001, '2015-05-01', 100005), (100001, '2015-05-02', 100006), (100001, '2015-05-03', 100002)
21:20:48.986 INFO  o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:508 - Executed SQL script from class path resource [db/populateDB.sql] in 4 ms.
Hibernate: 
    call next value for global_seq
Hibernate: 
    /* insert ru.neustupov.votingforrestaurants.model.Menu
        */ insert 
        into
            menus
            (add_date, id_rest, id) 
        values
            (?, ?, ?)
21:20:48.992 DEBUG o.springframework.jdbc.datasource.DataSourceUtils.prepareConnectionForTransaction:176 - Setting JDBC Connection [ProxyConnection[PooledConnection[org.hsqldb.jdbc.JDBCConnection@45e35a0d]]] read-only
Hibernate: 
    /* SELECT
        m 
    FROM
        Menu m 
    WHERE
        m.restaurant.id=:restId 
    ORDER BY
        m.id */ select
            menu0_.id as id1_1_,
            menu0_.add_date as add_date2_1_,
            menu0_.id_rest as id_rest3_1_ 
        from
            menus menu0_ 
        where
            menu0_.id_rest=? 
        order by
            menu0_.id
21:20:48.995 DEBUG o.springframework.jdbc.datasource.DataSourceUtils.resetConnectionAfterTransaction:233 - Resetting read-only flag of JDBC Connection [ProxyConnection[PooledConnection[org.hsqldb.jdbc.JDBCConnection@45e35a0d]]]
21:20:48.997 INFO  o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:442 - Executing SQL script from class path resource [db/populateDB.sql]
21:20:48.998 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 3 returned as update count for SQL: DELETE FROM user_roles
21:20:48.999 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 6 returned as update count for SQL: DELETE FROM votes
21:20:48.999 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 2 returned as update count for SQL: DELETE FROM users
21:20:48.999 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 7 returned as update count for SQL: DELETE FROM meals
21:20:48.999 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 8 returned as update count for SQL: DELETE FROM menus
21:20:48.999 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 5 returned as update count for SQL: DELETE FROM restaurants
21:20:49.000 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 0 returned as update count for SQL: ALTER SEQUENCE global_seq RESTART WITH 100000
21:20:49.000 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 2 returned as update count for SQL: INSERT INTO USERS (name, email, password) VALUES ('User', 'user@yandex.ru', '{noop}password'), ('Admin', 'admin@yandex.ru','{noop}admin')
21:20:49.000 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 3 returned as update count for SQL: INSERT INTO USER_ROLES (role, user_id) VALUES ('ROLE_USER', 100000), ('ROLE_ADMIN', 100001), ('ROLE_USER', 100001)
21:20:49.001 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 5 returned as update count for SQL: INSERT INTO RESTAURANTS (NAME) VALUES ('Russia'), ('Ukraine'), ('U Kolyana'), ('Almaz'), ('Fart')
21:20:49.001 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 7 returned as update count for SQL: INSERT INTO MENUS (ID_REST, ADD_DATE) VALUES (100002, '2015-05-01'), (100003, '2015-05-02'), (100004, '2015-05-03'), (100005, '2015-05-01'), (100006, '2015-05-02'), (100002, '2015-05-02'), (100002, CURRENT_DATE)
21:20:49.001 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 7 returned as update count for SQL: INSERT INTO MEALS (ID_MENU, NAME, PRICE) VALUES (100007, 'Apple', 5), (100008, 'Juice', 10), (100009, 'Potato', 20), (100010, 'Bananas', 30), (100011, 'Bread', 40), (100007, 'Bottle of water', 50), (100013, 'Mango', 100)
21:20:49.002 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 6 returned as update count for SQL: INSERT INTO VOTES (USER_ID, DATE, RESTAURANT) VALUES (100000, '2015-05-01', 100002), (100000, '2015-05-02', 100003), (100000, '2015-05-03', 100004), (100001, '2015-05-01', 100005), (100001, '2015-05-02', 100006), (100001, '2015-05-03', 100002)
21:20:49.002 INFO  o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:508 - Executed SQL script from class path resource [db/populateDB.sql] in 5 ms.
Hibernate: 
    /* DELETE 
    FROM
        Menu m 
    WHERE
        m.id=:id 
        AND m.restaurant.id=:restId */ delete 
        from
            menus 
        where
            id=? 
            and id_rest=?
21:20:49.004 DEBUG o.springframework.jdbc.datasource.DataSourceUtils.prepareConnectionForTransaction:176 - Setting JDBC Connection [ProxyConnection[PooledConnection[org.hsqldb.jdbc.JDBCConnection@45e35a0d]]] read-only
Hibernate: 
    /* SELECT
        m 
    FROM
        Menu m 
    WHERE
        m.restaurant.id=:restId 
    ORDER BY
        m.id */ select
            menu0_.id as id1_1_,
            menu0_.add_date as add_date2_1_,
            menu0_.id_rest as id_rest3_1_ 
        from
            menus menu0_ 
        where
            menu0_.id_rest=? 
        order by
            menu0_.id
21:20:49.006 DEBUG o.springframework.jdbc.datasource.DataSourceUtils.resetConnectionAfterTransaction:233 - Resetting read-only flag of JDBC Connection [ProxyConnection[PooledConnection[org.hsqldb.jdbc.JDBCConnection@45e35a0d]]]
21:20:49.008 INFO  o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:442 - Executing SQL script from class path resource [db/populateDB.sql]
21:20:49.010 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 3 returned as update count for SQL: DELETE FROM user_roles
21:20:49.010 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 6 returned as update count for SQL: DELETE FROM votes
21:20:49.010 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 2 returned as update count for SQL: DELETE FROM users
21:20:49.010 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 5 returned as update count for SQL: DELETE FROM meals
21:20:49.011 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 6 returned as update count for SQL: DELETE FROM menus
21:20:49.011 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 5 returned as update count for SQL: DELETE FROM restaurants
21:20:49.012 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 0 returned as update count for SQL: ALTER SEQUENCE global_seq RESTART WITH 100000
21:20:49.012 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 2 returned as update count for SQL: INSERT INTO USERS (name, email, password) VALUES ('User', 'user@yandex.ru', '{noop}password'), ('Admin', 'admin@yandex.ru','{noop}admin')
21:20:49.012 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 3 returned as update count for SQL: INSERT INTO USER_ROLES (role, user_id) VALUES ('ROLE_USER', 100000), ('ROLE_ADMIN', 100001), ('ROLE_USER', 100001)
21:20:49.012 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 5 returned as update count for SQL: INSERT INTO RESTAURANTS (NAME) VALUES ('Russia'), ('Ukraine'), ('U Kolyana'), ('Almaz'), ('Fart')
21:20:49.013 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 7 returned as update count for SQL: INSERT INTO MENUS (ID_REST, ADD_DATE) VALUES (100002, '2015-05-01'), (100003, '2015-05-02'), (100004, '2015-05-03'), (100005, '2015-05-01'), (100006, '2015-05-02'), (100002, '2015-05-02'), (100002, CURRENT_DATE)
21:20:49.013 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 7 returned as update count for SQL: INSERT INTO MEALS (ID_MENU, NAME, PRICE) VALUES (100007, 'Apple', 5), (100008, 'Juice', 10), (100009, 'Potato', 20), (100010, 'Bananas', 30), (100011, 'Bread', 40), (100007, 'Bottle of water', 50), (100013, 'Mango', 100)
21:20:49.014 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 6 returned as update count for SQL: INSERT INTO VOTES (USER_ID, DATE, RESTAURANT) VALUES (100000, '2015-05-01', 100002), (100000, '2015-05-02', 100003), (100000, '2015-05-03', 100004), (100001, '2015-05-01', 100005), (100001, '2015-05-02', 100006), (100001, '2015-05-03', 100002)
21:20:49.014 INFO  o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:508 - Executed SQL script from class path resource [db/populateDB.sql] in 5 ms.
21:20:49.015 DEBUG o.springframework.jdbc.datasource.DataSourceUtils.prepareConnectionForTransaction:176 - Setting JDBC Connection [ProxyConnection[PooledConnection[org.hsqldb.jdbc.JDBCConnection@45e35a0d]]] read-only
Hibernate: 
    /* SELECT
        m 
    FROM
        Menu m 
    WHERE
        m.restaurant.id=:restId 
    ORDER BY
        m.id */ select
            menu0_.id as id1_1_,
            menu0_.add_date as add_date2_1_,
            menu0_.id_rest as id_rest3_1_ 
        from
            menus menu0_ 
        where
            menu0_.id_rest=? 
        order by
            menu0_.id
21:20:49.017 DEBUG o.springframework.jdbc.datasource.DataSourceUtils.resetConnectionAfterTransaction:233 - Resetting read-only flag of JDBC Connection [ProxyConnection[PooledConnection[org.hsqldb.jdbc.JDBCConnection@45e35a0d]]]
21:20:49.020 INFO  o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:442 - Executing SQL script from class path resource [db/populateDB.sql]
21:20:49.021 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 3 returned as update count for SQL: DELETE FROM user_roles
21:20:49.021 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 6 returned as update count for SQL: DELETE FROM votes
21:20:49.021 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 2 returned as update count for SQL: DELETE FROM users
21:20:49.022 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 7 returned as update count for SQL: DELETE FROM meals
21:20:49.022 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 7 returned as update count for SQL: DELETE FROM menus
21:20:49.022 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 5 returned as update count for SQL: DELETE FROM restaurants
21:20:49.023 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 0 returned as update count for SQL: ALTER SEQUENCE global_seq RESTART WITH 100000
21:20:49.023 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 2 returned as update count for SQL: INSERT INTO USERS (name, email, password) VALUES ('User', 'user@yandex.ru', '{noop}password'), ('Admin', 'admin@yandex.ru','{noop}admin')
21:20:49.023 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 3 returned as update count for SQL: INSERT INTO USER_ROLES (role, user_id) VALUES ('ROLE_USER', 100000), ('ROLE_ADMIN', 100001), ('ROLE_USER', 100001)
21:20:49.023 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 5 returned as update count for SQL: INSERT INTO RESTAURANTS (NAME) VALUES ('Russia'), ('Ukraine'), ('U Kolyana'), ('Almaz'), ('Fart')
21:20:49.024 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 7 returned as update count for SQL: INSERT INTO MENUS (ID_REST, ADD_DATE) VALUES (100002, '2015-05-01'), (100003, '2015-05-02'), (100004, '2015-05-03'), (100005, '2015-05-01'), (100006, '2015-05-02'), (100002, '2015-05-02'), (100002, CURRENT_DATE)
21:20:49.024 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 7 returned as update count for SQL: INSERT INTO MEALS (ID_MENU, NAME, PRICE) VALUES (100007, 'Apple', 5), (100008, 'Juice', 10), (100009, 'Potato', 20), (100010, 'Bananas', 30), (100011, 'Bread', 40), (100007, 'Bottle of water', 50), (100013, 'Mango', 100)
21:20:49.025 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 6 returned as update count for SQL: INSERT INTO VOTES (USER_ID, DATE, RESTAURANT) VALUES (100000, '2015-05-01', 100002), (100000, '2015-05-02', 100003), (100000, '2015-05-03', 100004), (100001, '2015-05-01', 100005), (100001, '2015-05-02', 100006), (100001, '2015-05-03', 100002)
21:20:49.025 INFO  o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:508 - Executed SQL script from class path resource [db/populateDB.sql] in 5 ms.
21:20:49.027 DEBUG o.springframework.jdbc.datasource.DataSourceUtils.prepareConnectionForTransaction:176 - Setting JDBC Connection [ProxyConnection[PooledConnection[org.hsqldb.jdbc.JDBCConnection@45e35a0d]]] read-only
Hibernate: 
    /* SELECT
        DISTINCT m 
    FROM
        Menu m 
    WHERE
        m.restaurant.id=:restId 
        AND m.addDate=:currDate */ select
            distinct menu0_.id as id1_1_0_,
            meals1_.id as id1_0_1_,
            menu0_.add_date as add_date2_1_0_,
            menu0_.id_rest as id_rest3_1_0_,
            meals1_.name as name2_0_1_,
            meals1_.id_menu as id_menu4_0_1_,
            meals1_.price as price3_0_1_,
            meals1_.id_menu as id_menu4_0_0__,
            meals1_.id as id1_0_0__ 
        from
            menus menu0_ 
        left outer join
            meals meals1_ 
                on menu0_.id=meals1_.id_menu 
        where
            menu0_.id_rest=? 
            and menu0_.add_date=?
21:20:49.032 DEBUG o.springframework.jdbc.datasource.DataSourceUtils.resetConnectionAfterTransaction:233 - Resetting read-only flag of JDBC Connection [ProxyConnection[PooledConnection[org.hsqldb.jdbc.JDBCConnection@45e35a0d]]]
21:20:49.034 INFO  o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:442 - Executing SQL script from class path resource [db/populateDB.sql]
21:20:49.036 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 3 returned as update count for SQL: DELETE FROM user_roles
21:20:49.036 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 6 returned as update count for SQL: DELETE FROM votes
21:20:49.036 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 2 returned as update count for SQL: DELETE FROM users
21:20:49.036 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 7 returned as update count for SQL: DELETE FROM meals
21:20:49.037 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 7 returned as update count for SQL: DELETE FROM menus
21:20:49.037 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 5 returned as update count for SQL: DELETE FROM restaurants
21:20:49.037 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 0 returned as update count for SQL: ALTER SEQUENCE global_seq RESTART WITH 100000
21:20:49.038 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 2 returned as update count for SQL: INSERT INTO USERS (name, email, password) VALUES ('User', 'user@yandex.ru', '{noop}password'), ('Admin', 'admin@yandex.ru','{noop}admin')
21:20:49.038 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 3 returned as update count for SQL: INSERT INTO USER_ROLES (role, user_id) VALUES ('ROLE_USER', 100000), ('ROLE_ADMIN', 100001), ('ROLE_USER', 100001)
21:20:49.038 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 5 returned as update count for SQL: INSERT INTO RESTAURANTS (NAME) VALUES ('Russia'), ('Ukraine'), ('U Kolyana'), ('Almaz'), ('Fart')
21:20:49.039 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 7 returned as update count for SQL: INSERT INTO MENUS (ID_REST, ADD_DATE) VALUES (100002, '2015-05-01'), (100003, '2015-05-02'), (100004, '2015-05-03'), (100005, '2015-05-01'), (100006, '2015-05-02'), (100002, '2015-05-02'), (100002, CURRENT_DATE)
21:20:49.039 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 7 returned as update count for SQL: INSERT INTO MEALS (ID_MENU, NAME, PRICE) VALUES (100007, 'Apple', 5), (100008, 'Juice', 10), (100009, 'Potato', 20), (100010, 'Bananas', 30), (100011, 'Bread', 40), (100007, 'Bottle of water', 50), (100013, 'Mango', 100)
21:20:49.040 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 6 returned as update count for SQL: INSERT INTO VOTES (USER_ID, DATE, RESTAURANT) VALUES (100000, '2015-05-01', 100002), (100000, '2015-05-02', 100003), (100000, '2015-05-03', 100004), (100001, '2015-05-01', 100005), (100001, '2015-05-02', 100006), (100001, '2015-05-03', 100002)
21:20:49.040 INFO  o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:508 - Executed SQL script from class path resource [db/populateDB.sql] in 6 ms.
21:20:49.041 DEBUG o.springframework.jdbc.datasource.DataSourceUtils.prepareConnectionForTransaction:176 - Setting JDBC Connection [ProxyConnection[PooledConnection[org.hsqldb.jdbc.JDBCConnection@45e35a0d]]] read-only
Hibernate: 
    select
        menu0_.id as id1_1_0_,
        menu0_.add_date as add_date2_1_0_,
        menu0_.id_rest as id_rest3_1_0_ 
    from
        menus menu0_ 
    where
        menu0_.id=?
21:20:49.043 DEBUG o.springframework.jdbc.datasource.DataSourceUtils.resetConnectionAfterTransaction:233 - Resetting read-only flag of JDBC Connection [ProxyConnection[PooledConnection[org.hsqldb.jdbc.JDBCConnection@45e35a0d]]]
21:20:49.045 INFO  o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:442 - Executing SQL script from class path resource [db/populateDB.sql]
21:20:49.046 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 3 returned as update count for SQL: DELETE FROM user_roles
21:20:49.047 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 6 returned as update count for SQL: DELETE FROM votes
21:20:49.047 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 2 returned as update count for SQL: DELETE FROM users
21:20:49.047 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 7 returned as update count for SQL: DELETE FROM meals
21:20:49.047 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 7 returned as update count for SQL: DELETE FROM menus
21:20:49.048 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 5 returned as update count for SQL: DELETE FROM restaurants
21:20:49.048 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 0 returned as update count for SQL: ALTER SEQUENCE global_seq RESTART WITH 100000
21:20:49.048 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 2 returned as update count for SQL: INSERT INTO USERS (name, email, password) VALUES ('User', 'user@yandex.ru', '{noop}password'), ('Admin', 'admin@yandex.ru','{noop}admin')
21:20:49.049 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 3 returned as update count for SQL: INSERT INTO USER_ROLES (role, user_id) VALUES ('ROLE_USER', 100000), ('ROLE_ADMIN', 100001), ('ROLE_USER', 100001)
21:20:49.049 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 5 returned as update count for SQL: INSERT INTO RESTAURANTS (NAME) VALUES ('Russia'), ('Ukraine'), ('U Kolyana'), ('Almaz'), ('Fart')
21:20:49.049 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 7 returned as update count for SQL: INSERT INTO MENUS (ID_REST, ADD_DATE) VALUES (100002, '2015-05-01'), (100003, '2015-05-02'), (100004, '2015-05-03'), (100005, '2015-05-01'), (100006, '2015-05-02'), (100002, '2015-05-02'), (100002, CURRENT_DATE)
21:20:49.050 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 7 returned as update count for SQL: INSERT INTO MEALS (ID_MENU, NAME, PRICE) VALUES (100007, 'Apple', 5), (100008, 'Juice', 10), (100009, 'Potato', 20), (100010, 'Bananas', 30), (100011, 'Bread', 40), (100007, 'Bottle of water', 50), (100013, 'Mango', 100)
21:20:49.050 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 6 returned as update count for SQL: INSERT INTO VOTES (USER_ID, DATE, RESTAURANT) VALUES (100000, '2015-05-01', 100002), (100000, '2015-05-02', 100003), (100000, '2015-05-03', 100004), (100001, '2015-05-01', 100005), (100001, '2015-05-02', 100006), (100001, '2015-05-03', 100002)
21:20:49.050 INFO  o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:508 - Executed SQL script from class path resource [db/populateDB.sql] in 5 ms.
Hibernate: 
    /* DELETE 
    FROM
        Menu m 
    WHERE
        m.id=:id 
        AND m.restaurant.id=:restId */ delete 
        from
            menus 
        where
            id=? 
            and id_rest=?
21:20:49.053 WARN  o.h.e.j.s.SqlExceptionHelper$StandardWarningHandler.logWarning:217 - SQL Warning Code: -1100, SQLState: 02000
21:20:49.053 WARN  o.h.e.j.s.SqlExceptionHelper$StandardWarningHandler.logWarning:218 - no data
21:20:49.055 INFO  o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:442 - Executing SQL script from class path resource [db/populateDB.sql]
21:20:49.057 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 3 returned as update count for SQL: DELETE FROM user_roles
21:20:49.057 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 6 returned as update count for SQL: DELETE FROM votes
21:20:49.057 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 2 returned as update count for SQL: DELETE FROM users
21:20:49.057 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 7 returned as update count for SQL: DELETE FROM meals
21:20:49.057 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 7 returned as update count for SQL: DELETE FROM menus
21:20:49.058 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 5 returned as update count for SQL: DELETE FROM restaurants
21:20:49.058 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 0 returned as update count for SQL: ALTER SEQUENCE global_seq RESTART WITH 100000
21:20:49.058 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 2 returned as update count for SQL: INSERT INTO USERS (name, email, password) VALUES ('User', 'user@yandex.ru', '{noop}password'), ('Admin', 'admin@yandex.ru','{noop}admin')
21:20:49.058 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 3 returned as update count for SQL: INSERT INTO USER_ROLES (role, user_id) VALUES ('ROLE_USER', 100000), ('ROLE_ADMIN', 100001), ('ROLE_USER', 100001)
21:20:49.058 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 5 returned as update count for SQL: INSERT INTO RESTAURANTS (NAME) VALUES ('Russia'), ('Ukraine'), ('U Kolyana'), ('Almaz'), ('Fart')
21:20:49.059 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 7 returned as update count for SQL: INSERT INTO MENUS (ID_REST, ADD_DATE) VALUES (100002, '2015-05-01'), (100003, '2015-05-02'), (100004, '2015-05-03'), (100005, '2015-05-01'), (100006, '2015-05-02'), (100002, '2015-05-02'), (100002, CURRENT_DATE)
21:20:49.059 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 7 returned as update count for SQL: INSERT INTO MEALS (ID_MENU, NAME, PRICE) VALUES (100007, 'Apple', 5), (100008, 'Juice', 10), (100009, 'Potato', 20), (100010, 'Bananas', 30), (100011, 'Bread', 40), (100007, 'Bottle of water', 50), (100013, 'Mango', 100)
21:20:49.059 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:474 - 6 returned as update count for SQL: INSERT INTO VOTES (USER_ID, DATE, RESTAURANT) VALUES (100000, '2015-05-01', 100002), (100000, '2015-05-02', 100003), (100000, '2015-05-03', 100004), (100001, '2015-05-01', 100005), (100001, '2015-05-02', 100006), (100001, '2015-05-03', 100002)
21:20:49.059 INFO  o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:508 - Executed SQL script from class path resource [db/populateDB.sql] in 3 ms.
21:20:49.060 DEBUG o.springframework.jdbc.datasource.DataSourceUtils.prepareConnectionForTransaction:176 - Setting JDBC Connection [ProxyConnection[PooledConnection[org.hsqldb.jdbc.JDBCConnection@45e35a0d]]] read-only
Hibernate: 
    select
        menu0_.id as id1_1_0_,
        menu0_.add_date as add_date2_1_0_,
        menu0_.id_rest as id_rest3_1_0_ 
    from
        menus menu0_ 
    where
        menu0_.id=?
21:20:49.062 DEBUG o.springframework.jdbc.datasource.DataSourceUtils.resetConnectionAfterTransaction:233 - Resetting read-only flag of JDBC Connection [ProxyConnection[PooledConnection[org.hsqldb.jdbc.JDBCConnection@45e35a0d]]]
[INFO] Tests run: 7, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.085 s - in ru.neustupov.votingforrestaurants.service.MenuServiceTest
21:20:49.076 DEBUG o.springframework.jdbc.datasource.DataSourceUtils.doGetConnection:114 - Fetching JDBC Connection from DataSource
21:20:49.077 DEBUG o.springframework.jdbc.datasource.DataSourceUtils.doReleaseConnection:340 - Returning JDBC Connection to DataSource
21:20:49.080 DEBUG o.springframework.jdbc.datasource.DataSourceUtils.doGetConnection:114 - Fetching JDBC Connection from DataSource
21:20:49.080 DEBUG o.springframework.jdbc.datasource.DataSourceUtils.doReleaseConnection:340 - Returning JDBC Connection to DataSource
[INFO] 
[INFO] Results:
[INFO] 
[ERROR] Failures: 
[ERROR]   VoteControllerTest.testVotesAccessDenied:35 Forwarded URL expected:</WEB-INF/jsp/exception/exception.jsp> but was:<null>
[ERROR]   AdminMealRestControllerTest.testCreateInvalid:135 Status expected:<422> but was:<400>
[ERROR]   AdminMealRestControllerTest.testUpdateHtmlUnsafe:162 Status expected:<422> but was:<400>
[ERROR]   AdminMealRestControllerTest.testUpdateInvalid:148 Status expected:<422> but was:<400>
[ERROR]   AdminRestaurantRestControllerTest.testCreateInvalid:125 Status expected:<422> but was:<400>
[ERROR]   AdminRestaurantRestControllerTest.testUpdateHtmlUnsafe:151 Status expected:<422> but was:<400>
[ERROR]   AdminRestaurantRestControllerTest.testUpdateInvalid:138 Status expected:<422> but was:<400>
[ERROR]   AdminRestControllerTest.testCreateInvalid:136 Status expected:<422> but was:<400>
[ERROR]   AdminRestControllerTest.testUpdateHtmlUnsafe:164 Status expected:<422> but was:<400>
[ERROR]   AdminRestControllerTest.testUpdateInvalid:149 Status expected:<422> but was:<400>
[ERROR]   AdminVoteRestControllerTest.testCreateInvalid:122 Status expected:<422> but was:<400>
[ERROR]   AdminVoteRestControllerTest.testUpdateInvalid:135 Status expected:<422> but was:<400>
[ERROR] Errors: 
[ERROR]   AdminMealRestControllerTest.testDeleteNotFound:120 » NestedServlet Request pro...
[ERROR]   AdminMealRestControllerTest.testGetNotFound:111 » NestedServlet Request proces...
[ERROR]   AdminMenuRestControllerTest.testDeleteNotFound:120 » NestedServlet Request pro...
[ERROR]   AdminMenuRestControllerTest.testGetNotFound:111 » NestedServlet Request proces...
[ERROR]   AdminRestaurantRestControllerTest.testDeleteNotFound:111 » NestedServlet Reque...
[ERROR]   AdminRestaurantRestControllerTest.testGetNotFound:103 » NestedServlet Request ...
[ERROR]   AdminRestControllerTest.testDeleteNotFound:123 » NestedServlet Request process...
[ERROR]   AdminRestControllerTest.testGetNotFound:115 » NestedServlet Request processing...
[ERROR]   AdminVoteRestControllerTest.testDeleteNotFound:108 » NestedServlet Request pro...
[ERROR]   AdminVoteRestControllerTest.testGetNotFound:100 » NestedServlet Request proces...
[INFO] 
[ERROR] Tests run: 133, Failures: 12, Errors: 10, Skipped: 11
[INFO] 
[INFO] ------------------------------------------------------------------------
[INFO] BUILD FAILURE
[INFO] ------------------------------------------------------------------------
[INFO] Total time: 16.780 s
[INFO] Finished at: 2018-05-21T21:20:49+02:00
[INFO] Final Memory: 15M/303M
[INFO] ------------------------------------------------------------------------
[ERROR] Failed to execute goal org.apache.maven.plugins:maven-surefire-plugin:2.20.1:test (default-test) on project votingforrestaurants: There are test failures.
[ERROR] 
[ERROR] Please refer to /root/workspace/neustupov/votingForRestaurants/381824058/target/surefire-reports for the individual test results.
[ERROR] Please refer to dump files (if any exist) [date]-jvmRun[N].dump, [date].dumpstream and [date]-jvmRun[N].dumpstream.
[ERROR] -> [Help 1]
[ERROR] 
[ERROR] To see the full stack trace of the errors, re-run Maven with the -e switch.
[ERROR] Re-run Maven using the -X switch to enable full debug logging.
[ERROR] 
[ERROR] For more information about the errors and possible solutions, please read the following articles:
[ERROR] [Help 1] http://cwiki.apache.org/confluence/display/MAVEN/MojoFailureException
