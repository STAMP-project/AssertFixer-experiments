[INFO] Scanning for projects...
[INFO]                                                                         
[INFO] ------------------------------------------------------------------------
[INFO] Building ranger 0.4.0
[INFO] ------------------------------------------------------------------------
[INFO] 
[INFO] --- maven-resources-plugin:2.6:resources (default-resources) @ ranger ---
[INFO] Using 'UTF-8' encoding to copy filtered resources.
[INFO] skip non existing resourceDirectory /root/workspace/flipkart-incubator/ranger/408516756/src/main/resources
[INFO] 
[INFO] --- maven-compiler-plugin:3.1:compile (default-compile) @ ranger ---
[INFO] Nothing to compile - all classes are up to date
[INFO] 
[INFO] --- maven-resources-plugin:2.6:testResources (default-testResources) @ ranger ---
[INFO] Using 'UTF-8' encoding to copy filtered resources.
[INFO] Copying 1 resource
[INFO] 
[INFO] --- maven-compiler-plugin:3.1:testCompile (default-testCompile) @ ranger ---
[INFO] Nothing to compile - all classes are up to date
[INFO] 
[INFO] --- maven-surefire-plugin:2.12.4:test (default-test) @ ranger ---
[INFO] Surefire report directory: /root/workspace/flipkart-incubator/ranger/408516756/target/surefire-reports
[INFO] Downloading: https://repo.maven.apache.org/maven2/org/apache/maven/surefire/surefire-junit4/2.12.4/surefire-junit4-2.12.4.pom
[INFO] Downloaded: https://repo.maven.apache.org/maven2/org/apache/maven/surefire/surefire-junit4/2.12.4/surefire-junit4-2.12.4.pom (3 KB at 5.5 KB/sec)
[INFO] Downloading: https://repo.maven.apache.org/maven2/org/apache/maven/surefire/surefire-providers/2.12.4/surefire-providers-2.12.4.pom
[INFO] Downloaded: https://repo.maven.apache.org/maven2/org/apache/maven/surefire/surefire-providers/2.12.4/surefire-providers-2.12.4.pom (3 KB at 104.2 KB/sec)
[INFO] Downloading: https://repo.maven.apache.org/maven2/org/apache/maven/surefire/surefire-junit4/2.12.4/surefire-junit4-2.12.4.jar
[INFO] Downloaded: https://repo.maven.apache.org/maven2/org/apache/maven/surefire/surefire-junit4/2.12.4/surefire-junit4-2.12.4.jar (37 KB at 643.9 KB/sec)

-------------------------------------------------------
 T E S T S
-------------------------------------------------------
Running com.flipkart.ranger.healthservice.ServiceHealthAggregatorTest
Tests run: 1, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 12.179 sec
Running com.flipkart.ranger.healthservice.monitor.sample.RotationStatusMonitorTest
Tests run: 2, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.001 sec
Running com.flipkart.ranger.healthservice.monitor.sample.PingCheckMonitorTest
Tests run: 2, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.907 sec
Running com.flipkart.ranger.healthservice.monitor.sample.DiskSpaceMonitorTest
Tests run: 1, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.002 sec
Running com.flipkart.ranger.healthservice.monitor.RollingWindowHealthQueueTest
Tests run: 7, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.004 sec
Running com.flipkart.ranger.healthservice.ServiceProviderIntegrationTest
2018-07-26 15:50:24 DEBUG flipkart:148 - preRegister called. Server=com.sun.jmx.mbeanserver.JmxMBeanServer@7ea179b4, name=log4j:logger=com.flipkart
2018-07-26 15:50:26 DEBUG ServiceProvider:76 - Connected to zookeeper
2018-07-26 15:50:26 DEBUG ServiceProvider:78 - Set initial node data on zookeeper.
2018-07-26 15:50:26 DEBUG HealthChecker:60 - Node is unhealthy for (localhost-1, 9000)
2018-07-26 15:50:26 DEBUG ServiceProvider:76 - Connected to zookeeper
2018-07-26 15:50:26 DEBUG ServiceProvider:78 - Set initial node data on zookeeper.
2018-07-26 15:50:26 DEBUG ServiceProvider:76 - Connected to zookeeper
2018-07-26 15:50:26 DEBUG HealthChecker:60 - Node is unhealthy for (localhost-2, 9000)
2018-07-26 15:50:26 DEBUG ServiceProvider:78 - Set initial node data on zookeeper.
2018-07-26 15:50:26 DEBUG HealthChecker:60 - Node is unhealthy for (localhost-3, 9000)
2018-07-26 15:50:26 DEBUG ServiceProvider:76 - Connected to zookeeper
2018-07-26 15:50:26 DEBUG ServiceProvider:78 - Set initial node data on zookeeper.
2018-07-26 15:50:26 DEBUG HealthChecker:60 - Node is unhealthy for (localhost-4, 9000)
2018-07-26 15:50:26 DEBUG AbstractServiceRegistryUpdater:38 - Connected to zookeeper cluster
2018-07-26 15:50:26 INFO  AbstractServiceRegistryUpdater:62 - Started polling zookeeper for changes
2018-07-26 15:50:26 DEBUG ServiceFinder:79 - ServiceFinder Scheduler Started
created file
2018-07-26 15:50:26 DEBUG AbstractServiceRegistryUpdater:41 - Setting nodelist of size: 0
2018-07-26 15:50:27 DEBUG HealthChecker:60 - Node is healthy for (localhost-1, 9000)
2018-07-26 15:50:27 DEBUG HealthChecker:60 - Node is healthy for (localhost-2, 9000)
2018-07-26 15:50:27 DEBUG HealthChecker:60 - Node is healthy for (localhost-3, 9000)
2018-07-26 15:50:27 DEBUG HealthChecker:60 - Node is unhealthy for (localhost-4, 9000)
2018-07-26 15:50:27 DEBUG AbstractServiceRegistryUpdater:41 - Setting nodelist of size: 3
2018-07-26 15:50:28 DEBUG HealthChecker:60 - Node is healthy for (localhost-1, 9000)
2018-07-26 15:50:28 DEBUG HealthChecker:60 - Node is healthy for (localhost-2, 9000)
2018-07-26 15:50:28 DEBUG HealthChecker:60 - Node is healthy for (localhost-3, 9000)
2018-07-26 15:50:28 DEBUG HealthChecker:60 - Node is unhealthy for (localhost-4, 9000)
2018-07-26 15:50:28 DEBUG AbstractServiceRegistryUpdater:41 - Setting nodelist of size: 3
2018-07-26 15:50:29 DEBUG HealthChecker:60 - Node is healthy for (localhost-1, 9000)
2018-07-26 15:50:29 DEBUG HealthChecker:60 - Node is healthy for (localhost-2, 9000)
2018-07-26 15:50:29 DEBUG HealthChecker:60 - Node is healthy for (localhost-3, 9000)
2018-07-26 15:50:29 DEBUG HealthChecker:60 - Node is unhealthy for (localhost-4, 9000)
2018-07-26 15:50:29 DEBUG AbstractServiceRegistryUpdater:41 - Setting nodelist of size: 3
2018-07-26 15:50:30 DEBUG HealthChecker:60 - Node is healthy for (localhost-1, 9000)
2018-07-26 15:50:30 DEBUG HealthChecker:60 - Node is healthy for (localhost-2, 9000)
2018-07-26 15:50:30 DEBUG HealthChecker:60 - Node is healthy for (localhost-3, 9000)
2018-07-26 15:50:30 DEBUG AbstractServiceRegistryUpdater:41 - Setting nodelist of size: 3
2018-07-26 15:50:30 DEBUG HealthChecker:60 - Node is unhealthy for (localhost-4, 9000)
2018-07-26 15:50:31 DEBUG HealthChecker:60 - Node is healthy for (localhost-1, 9000)
2018-07-26 15:50:31 DEBUG HealthChecker:60 - Node is healthy for (localhost-2, 9000)
2018-07-26 15:50:31 DEBUG HealthChecker:60 - Node is healthy for (localhost-3, 9000)
2018-07-26 15:50:31 DEBUG AbstractServiceRegistryUpdater:41 - Setting nodelist of size: 3
2018-07-26 15:50:31 DEBUG HealthChecker:60 - Node is unhealthy for (localhost-4, 9000)
2018-07-26 15:50:32 DEBUG HealthChecker:60 - Node is healthy for (localhost-1, 9000)
2018-07-26 15:50:32 DEBUG HealthChecker:60 - Node is healthy for (localhost-2, 9000)
2018-07-26 15:50:32 DEBUG AbstractServiceRegistryUpdater:41 - Setting nodelist of size: 3
2018-07-26 15:50:32 DEBUG HealthChecker:60 - Node is healthy for (localhost-3, 9000)
2018-07-26 15:50:32 DEBUG HealthChecker:60 - Node is unhealthy for (localhost-4, 9000)
2018-07-26 15:50:33 DEBUG HealthChecker:60 - Node is healthy for (localhost-1, 9000)
2018-07-26 15:50:33 DEBUG HealthChecker:60 - Node is healthy for (localhost-2, 9000)
2018-07-26 15:50:33 DEBUG AbstractServiceRegistryUpdater:41 - Setting nodelist of size: 3
2018-07-26 15:50:33 DEBUG HealthChecker:60 - Node is healthy for (localhost-3, 9000)
2018-07-26 15:50:33 DEBUG HealthChecker:60 - Node is unhealthy for (localhost-4, 9000)
2018-07-26 15:50:34 DEBUG HealthChecker:60 - Node is healthy for (localhost-1, 9000)
all = [com.flipkart.ranger.model.ServiceNode@47987356, com.flipkart.ranger.model.ServiceNode@22ef9844, com.flipkart.ranger.model.ServiceNode@6283d8b8]
deleted file
2018-07-26 15:50:34 DEBUG HealthChecker:60 - Node is healthy for (localhost-2, 9000)
2018-07-26 15:50:34 DEBUG AbstractServiceRegistryUpdater:41 - Setting nodelist of size: 3
2018-07-26 15:50:34 DEBUG HealthChecker:60 - Node is healthy for (localhost-3, 9000)
2018-07-26 15:50:34 DEBUG HealthChecker:60 - Node is unhealthy for (localhost-4, 9000)
2018-07-26 15:50:35 DEBUG HealthChecker:60 - Node is unhealthy for (localhost-1, 9000)
2018-07-26 15:50:35 DEBUG AbstractServiceRegistryUpdater:41 - Setting nodelist of size: 2
2018-07-26 15:50:35 DEBUG HealthChecker:60 - Node is unhealthy for (localhost-2, 9000)
2018-07-26 15:50:35 DEBUG HealthChecker:60 - Node is unhealthy for (localhost-3, 9000)
2018-07-26 15:50:35 DEBUG HealthChecker:60 - Node is unhealthy for (localhost-4, 9000)
2018-07-26 15:50:36 DEBUG HealthChecker:60 - Node is unhealthy for (localhost-1, 9000)
2018-07-26 15:50:36 DEBUG AbstractServiceRegistryUpdater:41 - Setting nodelist of size: 0
2018-07-26 15:50:36 DEBUG HealthChecker:60 - Node is unhealthy for (localhost-2, 9000)
2018-07-26 15:50:36 DEBUG HealthChecker:60 - Node is unhealthy for (localhost-3, 9000)
2018-07-26 15:50:36 DEBUG HealthChecker:60 - Node is unhealthy for (localhost-4, 9000)
2018-07-26 15:50:37 DEBUG HealthChecker:60 - Node is unhealthy for (localhost-1, 9000)
2018-07-26 15:50:37 DEBUG AbstractServiceRegistryUpdater:41 - Setting nodelist of size: 0
2018-07-26 15:50:37 DEBUG HealthChecker:60 - Node is unhealthy for (localhost-2, 9000)
2018-07-26 15:50:37 DEBUG HealthChecker:60 - Node is unhealthy for (localhost-3, 9000)
2018-07-26 15:50:38 DEBUG HealthChecker:60 - Node is unhealthy for (localhost-4, 9000)
2018-07-26 15:50:38 DEBUG AbstractServiceRegistryUpdater:41 - Setting nodelist of size: 0
2018-07-26 15:50:38 DEBUG HealthChecker:60 - Node is unhealthy for (localhost-1, 9000)
2018-07-26 15:50:38 DEBUG HealthChecker:60 - Node is unhealthy for (localhost-2, 9000)
2018-07-26 15:50:38 DEBUG HealthChecker:60 - Node is unhealthy for (localhost-3, 9000)
2018-07-26 15:50:39 DEBUG HealthChecker:60 - Node is unhealthy for (localhost-4, 9000)
2018-07-26 15:50:39 DEBUG AbstractServiceRegistryUpdater:41 - Setting nodelist of size: 0
2018-07-26 15:50:39 DEBUG HealthChecker:60 - Node is unhealthy for (localhost-1, 9000)
2018-07-26 15:50:39 DEBUG HealthChecker:60 - Node is unhealthy for (localhost-2, 9000)
2018-07-26 15:50:39 DEBUG HealthChecker:60 - Node is unhealthy for (localhost-3, 9000)
2018-07-26 15:50:40 DEBUG HealthChecker:60 - Node is unhealthy for (localhost-4, 9000)
2018-07-26 15:50:40 DEBUG AbstractServiceRegistryUpdater:41 - Setting nodelist of size: 0
2018-07-26 15:50:40 DEBUG HealthChecker:60 - Node is unhealthy for (localhost-1, 9000)
2018-07-26 15:50:40 DEBUG HealthChecker:60 - Node is unhealthy for (localhost-2, 9000)
2018-07-26 15:50:41 DEBUG HealthChecker:60 - Node is unhealthy for (localhost-3, 9000)
2018-07-26 15:50:41 DEBUG HealthChecker:60 - Node is unhealthy for (localhost-4, 9000)
2018-07-26 15:50:41 DEBUG AbstractServiceRegistryUpdater:41 - Setting nodelist of size: 0
2018-07-26 15:50:41 DEBUG HealthChecker:60 - Node is unhealthy for (localhost-1, 9000)
2018-07-26 15:50:41 DEBUG HealthChecker:60 - Node is unhealthy for (localhost-2, 9000)
2018-07-26 15:50:42 DEBUG HealthChecker:60 - Node is unhealthy for (localhost-3, 9000)
2018-07-26 15:50:42 DEBUG HealthChecker:60 - Node is unhealthy for (localhost-4, 9000)
all = []
created anotherFile
2018-07-26 15:50:42 DEBUG AbstractServiceRegistryUpdater:41 - Setting nodelist of size: 0
2018-07-26 15:50:42 DEBUG HealthChecker:60 - Node is unhealthy for (localhost-1, 9000)
2018-07-26 15:50:43 DEBUG HealthChecker:60 - Node is unhealthy for (localhost-2, 9000)
2018-07-26 15:50:43 DEBUG HealthChecker:60 - Node is unhealthy for (localhost-3, 9000)
2018-07-26 15:50:43 DEBUG HealthChecker:60 - Node is unhealthy for (localhost-4, 9000)
2018-07-26 15:50:43 DEBUG AbstractServiceRegistryUpdater:41 - Setting nodelist of size: 0
2018-07-26 15:50:43 DEBUG HealthChecker:60 - Node is unhealthy for (localhost-1, 9000)
2018-07-26 15:50:44 DEBUG HealthChecker:60 - Node is unhealthy for (localhost-2, 9000)
2018-07-26 15:50:44 DEBUG HealthChecker:60 - Node is unhealthy for (localhost-3, 9000)
2018-07-26 15:50:44 DEBUG HealthChecker:60 - Node is healthy for (localhost-4, 9000)
2018-07-26 15:50:44 DEBUG AbstractServiceRegistryUpdater:41 - Setting nodelist of size: 1
2018-07-26 15:50:44 DEBUG HealthChecker:60 - Node is unhealthy for (localhost-1, 9000)
2018-07-26 15:50:45 DEBUG HealthChecker:60 - Node is unhealthy for (localhost-2, 9000)
2018-07-26 15:50:45 DEBUG HealthChecker:60 - Node is unhealthy for (localhost-3, 9000)
2018-07-26 15:50:45 DEBUG HealthChecker:60 - Node is healthy for (localhost-4, 9000)
2018-07-26 15:50:45 DEBUG AbstractServiceRegistryUpdater:41 - Setting nodelist of size: 1
2018-07-26 15:50:45 DEBUG HealthChecker:60 - Node is unhealthy for (localhost-1, 9000)
2018-07-26 15:50:46 DEBUG HealthChecker:60 - Node is unhealthy for (localhost-2, 9000)
2018-07-26 15:50:47 DEBUG HealthChecker:60 - Node is unhealthy for (localhost-3, 9000)
2018-07-26 15:50:47 DEBUG HealthChecker:60 - Node is healthy for (localhost-4, 9000)
2018-07-26 15:50:47 DEBUG HealthChecker:60 - Node is unhealthy for (localhost-1, 9000)
2018-07-26 15:50:47 DEBUG HealthChecker:60 - Node is unhealthy for (localhost-2, 9000)
2018-07-26 15:50:47 DEBUG AbstractServiceRegistryUpdater:41 - Setting nodelist of size: 1
2018-07-26 15:50:47 DEBUG AbstractServiceRegistryUpdater:41 - Setting nodelist of size: 1
all = [com.flipkart.ranger.model.ServiceNode@3b6ddd1d]
2018-07-26 15:50:48 DEBUG AbstractServiceRegistryUpdater:108 - Stopped updater
2018-07-26 15:50:48 DEBUG AbstractServiceRegistryUpdater:108 - Stopped updater
2018-07-26 15:50:48 DEBUG ServiceFinder:92 - ServiceFinder Scheduler stopped
Tests run: 1, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 25.328 sec
Running com.flipkart.ranger.model.ServiceProviderExtCuratorTest
2018-07-26 15:50:51 DEBUG ServiceProvider:76 - Connected to zookeeper
2018-07-26 15:50:51 DEBUG ServiceProvider:78 - Set initial node data on zookeeper.
2018-07-26 15:50:51 DEBUG ServiceProvider:76 - Connected to zookeeper
2018-07-26 15:50:51 DEBUG HealthChecker:60 - Node is healthy for (localhost-1, 9000)
2018-07-26 15:50:51 DEBUG ServiceProvider:78 - Set initial node data on zookeeper.
2018-07-26 15:50:51 DEBUG ServiceProvider:76 - Connected to zookeeper
2018-07-26 15:50:51 DEBUG HealthChecker:60 - Node is healthy for (localhost-2, 9000)
2018-07-26 15:50:51 DEBUG ServiceProvider:78 - Set initial node data on zookeeper.
2018-07-26 15:50:51 DEBUG HealthChecker:60 - Node is healthy for (localhost-3, 9000)
Tests run: 1, Failures: 0, Errors: 1, Skipped: 0, Time elapsed: 2.084 sec <<< FAILURE!
testBasicDiscovery(com.flipkart.ranger.model.ServiceProviderExtCuratorTest)  Time elapsed: 2.083 sec  <<< ERROR!
java.lang.IllegalStateException: Cannot be started more than once
	at org.apache.curator.framework.imps.CuratorFrameworkImpl.start(CuratorFrameworkImpl.java:281)
	at com.flipkart.ranger.finder.CuratorServiceRegistryUpdater.start(CuratorServiceRegistryUpdater.java:34)
	at com.flipkart.ranger.finder.ServiceFinder.start(ServiceFinder.java:66)
	at com.flipkart.ranger.model.ServiceProviderExtCuratorTest.testBasicDiscovery(ServiceProviderExtCuratorTest.java:134)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:50)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:47)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:325)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:78)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:57)
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:290)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288)
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:58)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:363)
	at org.apache.maven.surefire.junit4.JUnit4Provider.execute(JUnit4Provider.java:252)
	at org.apache.maven.surefire.junit4.JUnit4Provider.executeTestSet(JUnit4Provider.java:141)
	at org.apache.maven.surefire.junit4.JUnit4Provider.invoke(JUnit4Provider.java:112)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.apache.maven.surefire.util.ReflectionUtils.invokeMethodWithArray(ReflectionUtils.java:189)
	at org.apache.maven.surefire.booter.ProviderFactory$ProviderProxy.invoke(ProviderFactory.java:165)
	at org.apache.maven.surefire.booter.ProviderFactory.invokeProvider(ProviderFactory.java:85)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:115)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:75)

Running com.flipkart.ranger.model.ServiceProviderTest
2018-07-26 15:50:55 DEBUG ServiceProvider:76 - Connected to zookeeper
2018-07-26 15:50:55 DEBUG ServiceProvider:78 - Set initial node data on zookeeper.
2018-07-26 15:50:55 DEBUG HealthChecker:60 - Node is healthy for (localhost-1, 9000)
2018-07-26 15:50:55 DEBUG ServiceProvider:76 - Connected to zookeeper
2018-07-26 15:50:55 DEBUG ServiceProvider:78 - Set initial node data on zookeeper.
2018-07-26 15:50:55 DEBUG HealthChecker:60 - Node is healthy for (localhost-2, 9000)
2018-07-26 15:50:55 DEBUG ServiceProvider:76 - Connected to zookeeper
2018-07-26 15:50:55 DEBUG ServiceProvider:78 - Set initial node data on zookeeper.
2018-07-26 15:50:55 DEBUG HealthChecker:60 - Node is healthy for (localhost-3, 9000)
2018-07-26 15:50:55 DEBUG ServiceProvider:76 - Connected to zookeeper
2018-07-26 15:50:55 DEBUG ServiceProvider:78 - Set initial node data on zookeeper.
2018-07-26 15:50:55 DEBUG HealthChecker:60 - Node is healthy for (localhost-4, 9000)
2018-07-26 15:50:56 DEBUG AbstractServiceRegistryUpdater:38 - Connected to zookeeper cluster
2018-07-26 15:50:56 INFO  AbstractServiceRegistryUpdater:62 - Started polling zookeeper for changes
2018-07-26 15:50:56 DEBUG ServiceFinder:79 - ServiceFinder Scheduler Started
localhost-3
localhost-2
2018-07-26 15:50:56 DEBUG AbstractServiceRegistryUpdater:41 - Setting nodelist of size: 4
2018-07-26 15:50:56 INFO  ServiceProviderTest:193 - PERF::RoundRobinSelector::Took (ms):84
2018-07-26 15:50:56 DEBUG AbstractServiceRegistryUpdater:108 - Stopped updater
2018-07-26 15:50:56 DEBUG AbstractServiceRegistryUpdater:108 - Stopped updater
2018-07-26 15:50:56 DEBUG ServiceFinder:92 - ServiceFinder Scheduler stopped
2018-07-26 15:50:57 DEBUG ServiceProvider:76 - Connected to zookeeper
2018-07-26 15:50:57 DEBUG ServiceProvider:78 - Set initial node data on zookeeper.
2018-07-26 15:50:57 DEBUG HealthChecker:60 - Node is healthy for (localhost-1, 9000)
2018-07-26 15:50:57 DEBUG ServiceProvider:76 - Connected to zookeeper
2018-07-26 15:50:57 DEBUG ServiceProvider:78 - Set initial node data on zookeeper.
2018-07-26 15:50:58 DEBUG HealthChecker:60 - Node is healthy for (localhost-2, 9000)
2018-07-26 15:50:58 DEBUG ServiceProvider:76 - Connected to zookeeper
2018-07-26 15:50:58 DEBUG ServiceProvider:78 - Set initial node data on zookeeper.
2018-07-26 15:50:58 DEBUG HealthChecker:60 - Node is healthy for (localhost-3, 9000)
2018-07-26 15:50:58 DEBUG ServiceProvider:76 - Connected to zookeeper
2018-07-26 15:50:58 DEBUG ServiceProvider:78 - Set initial node data on zookeeper.
2018-07-26 15:50:58 DEBUG HealthChecker:60 - Node is healthy for (localhost-4, 9000)
2018-07-26 15:50:58 DEBUG AbstractServiceRegistryUpdater:38 - Connected to zookeeper cluster
2018-07-26 15:50:58 INFO  AbstractServiceRegistryUpdater:62 - Started polling zookeeper for changes
2018-07-26 15:50:58 DEBUG ServiceFinder:79 - ServiceFinder Scheduler Started
2018-07-26 15:50:58 DEBUG AbstractServiceRegistryUpdater:41 - Setting nodelist of size: 4
2018-07-26 15:50:58 INFO  ServiceProviderTest:143 - PERF::RandomSelector::Took (ms):46
2018-07-26 15:50:58 DEBUG AbstractServiceRegistryUpdater:108 - Stopped updater
2018-07-26 15:50:58 DEBUG AbstractServiceRegistryUpdater:108 - Stopped updater
2018-07-26 15:50:58 DEBUG ServiceFinder:92 - ServiceFinder Scheduler stopped
2018-07-26 15:51:00 DEBUG ServiceProvider:76 - Connected to zookeeper
2018-07-26 15:51:00 DEBUG ServiceProvider:78 - Set initial node data on zookeeper.
2018-07-26 15:51:00 DEBUG HealthChecker:60 - Node is healthy for (localhost-1, 9000)
2018-07-26 15:51:00 DEBUG ServiceProvider:76 - Connected to zookeeper
2018-07-26 15:51:00 DEBUG ServiceProvider:78 - Set initial node data on zookeeper.
2018-07-26 15:51:00 DEBUG HealthChecker:60 - Node is healthy for (localhost-2, 9000)
2018-07-26 15:51:00 DEBUG ServiceProvider:76 - Connected to zookeeper
2018-07-26 15:51:00 DEBUG ServiceProvider:78 - Set initial node data on zookeeper.
2018-07-26 15:51:00 DEBUG HealthChecker:60 - Node is healthy for (localhost-3, 9000)
2018-07-26 15:51:00 DEBUG ServiceProvider:76 - Connected to zookeeper
2018-07-26 15:51:00 DEBUG ServiceProvider:78 - Set initial node data on zookeeper.
2018-07-26 15:51:00 DEBUG HealthChecker:60 - Node is healthy for (localhost-4, 9000)
2018-07-26 15:51:00 DEBUG AbstractServiceRegistryUpdater:38 - Connected to zookeeper cluster
2018-07-26 15:51:00 INFO  AbstractServiceRegistryUpdater:62 - Started polling zookeeper for changes
2018-07-26 15:51:00 DEBUG ServiceFinder:79 - ServiceFinder Scheduler Started
2018-07-26 15:51:00 INFO  ServiceProviderTest:225 - Testing ServiceFinder.getAll()
2018-07-26 15:51:00 INFO  ServiceProviderTest:227 - node = localhost-1:9000  healthy 1532613060515
2018-07-26 15:51:00 INFO  ServiceProviderTest:227 - node = localhost-3:9000  healthy 1532613060765
2018-07-26 15:51:00 INFO  ServiceProviderTest:227 - node = localhost-2:9000  healthy 1532613060632
2018-07-26 15:51:00 ERROR AbstractServiceRegistryUpdater:100 - Error getting service data from zookeeper: 
java.lang.IllegalStateException: instance must be started before calling this method
	at com.google.common.base.Preconditions.checkState(Preconditions.java:173)
	at org.apache.curator.framework.imps.CuratorFrameworkImpl.checkExists(CuratorFrameworkImpl.java:412)
	at com.flipkart.ranger.finder.CuratorServiceRegistryUpdater.getHealthyServiceNodes(CuratorServiceRegistryUpdater.java:84)
	at com.flipkart.ranger.finder.AbstractServiceRegistryUpdater.call(AbstractServiceRegistryUpdater.java:39)
	at com.flipkart.ranger.finder.AbstractServiceRegistryUpdater.call(AbstractServiceRegistryUpdater.java:14)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)
	at java.lang.Thread.run(Thread.java:745)
2018-07-26 15:51:00 WARN  AbstractServiceRegistryUpdater:45 - No service shards/nodes found. We are disconnected from zookeeper. Keeping old list.
2018-07-26 15:51:01 DEBUG AbstractServiceRegistryUpdater:108 - Stopped updater
2018-07-26 15:51:01 DEBUG AbstractServiceRegistryUpdater:108 - Stopped updater
2018-07-26 15:51:01 DEBUG ServiceFinder:92 - ServiceFinder Scheduler stopped
Tests run: 3, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 9.273 sec
Running com.flipkart.ranger.model.ServiceNoProviderTest
2018-07-26 15:51:03 DEBUG AbstractServiceRegistryUpdater:38 - Connected to zookeeper cluster
2018-07-26 15:51:03 INFO  AbstractServiceRegistryUpdater:62 - Started polling zookeeper for changes
2018-07-26 15:51:03 DEBUG ServiceFinder:79 - ServiceFinder Scheduler Started
2018-07-26 15:51:03 DEBUG AbstractServiceRegistryUpdater:41 - Setting nodelist of size: 0
2018-07-26 15:51:03 DEBUG AbstractServiceRegistryUpdater:108 - Stopped updater
2018-07-26 15:51:03 DEBUG AbstractServiceRegistryUpdater:108 - Stopped updater
2018-07-26 15:51:03 DEBUG ServiceFinder:92 - ServiceFinder Scheduler stopped
2018-07-26 15:51:04 DEBUG AbstractServiceRegistryUpdater:38 - Connected to zookeeper cluster
2018-07-26 15:51:04 INFO  AbstractServiceRegistryUpdater:62 - Started polling zookeeper for changes
2018-07-26 15:51:04 DEBUG ServiceFinder:79 - ServiceFinder Scheduler Started
2018-07-26 15:51:04 WARN  AbstractServiceRegistryUpdater:45 - No service shards/nodes found. We are disconnected from zookeeper. Keeping old list.
2018-07-26 15:51:04 DEBUG AbstractServiceRegistryUpdater:108 - Stopped updater
2018-07-26 15:51:04 DEBUG AbstractServiceRegistryUpdater:108 - Stopped updater
2018-07-26 15:51:04 DEBUG ServiceFinder:92 - ServiceFinder Scheduler stopped
Tests run: 2, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 3.495 sec
Running com.flipkart.ranger.model.ServiceProviderHealthcheckTest
2018-07-26 15:51:08 DEBUG ServiceProvider:76 - Connected to zookeeper
2018-07-26 15:51:08 DEBUG ServiceProvider:78 - Set initial node data on zookeeper.
2018-07-26 15:51:08 DEBUG HealthChecker:60 - Node is healthy for (localhost-1, 9000)
2018-07-26 15:51:08 DEBUG ServiceProvider:76 - Connected to zookeeper
2018-07-26 15:51:08 DEBUG HealthChecker:60 - Node is healthy for (localhost-1, 9000)
2018-07-26 15:51:08 DEBUG ServiceProvider:78 - Set initial node data on zookeeper.
2018-07-26 15:51:08 DEBUG HealthChecker:60 - Node is healthy for (localhost-1, 9000)
2018-07-26 15:51:08 DEBUG HealthChecker:60 - Node is healthy for (localhost-3, 9000)
2018-07-26 15:51:08 DEBUG AbstractServiceRegistryUpdater:38 - Connected to zookeeper cluster
2018-07-26 15:51:09 DEBUG HealthChecker:60 - Node is healthy for (localhost-1, 9000)
2018-07-26 15:51:09 DEBUG HealthChecker:60 - Node is healthy for (localhost-3, 9000)
2018-07-26 15:51:09 DEBUG HealthChecker:60 - Node is healthy for (localhost-1, 9000)
2018-07-26 15:51:09 DEBUG HealthChecker:60 - Node is healthy for (localhost-3, 9000)
2018-07-26 15:51:09 DEBUG HealthChecker:60 - Node is healthy for (localhost-1, 9000)
2018-07-26 15:51:09 DEBUG HealthChecker:60 - Node is healthy for (localhost-3, 9000)
2018-07-26 15:51:09 DEBUG HealthChecker:60 - Node is healthy for (localhost-1, 9000)
2018-07-26 15:51:09 DEBUG HealthChecker:60 - Node is healthy for (localhost-3, 9000)
2018-07-26 15:51:09 DEBUG HealthChecker:60 - Node is healthy for (localhost-1, 9000)
2018-07-26 15:51:09 INFO  AbstractServiceRegistryUpdater:62 - Started polling zookeeper for changes
2018-07-26 15:51:09 DEBUG ServiceFinder:79 - ServiceFinder Scheduler Started
2018-07-26 15:51:09 DEBUG HealthChecker:60 - Node is healthy for (localhost-3, 9000)
2018-07-26 15:51:09 DEBUG HealthChecker:60 - Node is unhealthy for (localhost-1, 9000)
2018-07-26 15:51:09 DEBUG HealthChecker:60 - Node is healthy for (localhost-3, 9000)
2018-07-26 15:51:09 DEBUG HealthChecker:60 - Node is unhealthy for (localhost-1, 9000)
2018-07-26 15:51:09 DEBUG HealthChecker:60 - Node is healthy for (localhost-3, 9000)
2018-07-26 15:51:09 DEBUG AbstractServiceRegistryUpdater:41 - Setting nodelist of size: 1
2018-07-26 15:51:09 DEBUG HealthChecker:60 - Node is unhealthy for (localhost-1, 9000)
2018-07-26 15:51:09 DEBUG HealthChecker:60 - Node is healthy for (localhost-3, 9000)
2018-07-26 15:51:09 DEBUG HealthChecker:60 - Node is unhealthy for (localhost-1, 9000)
2018-07-26 15:51:09 DEBUG HealthChecker:60 - Node is healthy for (localhost-3, 9000)
2018-07-26 15:51:09 DEBUG HealthChecker:60 - Node is unhealthy for (localhost-1, 9000)
2018-07-26 15:51:09 DEBUG AbstractServiceRegistryUpdater:41 - Setting nodelist of size: 1
2018-07-26 15:51:09 DEBUG HealthChecker:60 - Node is healthy for (localhost-3, 9000)
2018-07-26 15:51:09 DEBUG HealthChecker:60 - Node is unhealthy for (localhost-1, 9000)
2018-07-26 15:51:09 DEBUG HealthChecker:60 - Node is healthy for (localhost-3, 9000)
2018-07-26 15:51:09 DEBUG HealthChecker:60 - Node is unhealthy for (localhost-1, 9000)
2018-07-26 15:51:09 DEBUG HealthChecker:60 - Node is healthy for (localhost-3, 9000)
2018-07-26 15:51:09 DEBUG AbstractServiceRegistryUpdater:41 - Setting nodelist of size: 1
2018-07-26 15:51:09 DEBUG HealthChecker:60 - Node is unhealthy for (localhost-1, 9000)
2018-07-26 15:51:09 DEBUG HealthChecker:60 - Node is healthy for (localhost-3, 9000)
2018-07-26 15:51:09 DEBUG HealthChecker:60 - Node is unhealthy for (localhost-1, 9000)
2018-07-26 15:51:10 DEBUG HealthChecker:60 - Node is healthy for (localhost-3, 9000)
2018-07-26 15:51:10 DEBUG HealthChecker:60 - Node is unhealthy for (localhost-1, 9000)
2018-07-26 15:51:10 DEBUG AbstractServiceRegistryUpdater:41 - Setting nodelist of size: 1
2018-07-26 15:51:10 DEBUG HealthChecker:60 - Node is healthy for (localhost-3, 9000)
2018-07-26 15:51:10 DEBUG HealthChecker:60 - Node is unhealthy for (localhost-1, 9000)
2018-07-26 15:51:10 DEBUG HealthChecker:60 - Node is healthy for (localhost-3, 9000)
2018-07-26 15:51:10 DEBUG HealthChecker:60 - Node is unhealthy for (localhost-1, 9000)
2018-07-26 15:51:10 DEBUG HealthChecker:60 - Node is healthy for (localhost-3, 9000)
2018-07-26 15:51:10 DEBUG AbstractServiceRegistryUpdater:41 - Setting nodelist of size: 1
2018-07-26 15:51:10 DEBUG HealthChecker:60 - Node is unhealthy for (localhost-1, 9000)
2018-07-26 15:51:10 DEBUG HealthChecker:60 - Node is healthy for (localhost-3, 9000)
2018-07-26 15:51:10 DEBUG HealthChecker:60 - Node is unhealthy for (localhost-1, 9000)
2018-07-26 15:51:10 DEBUG HealthChecker:60 - Node is healthy for (localhost-3, 9000)
2018-07-26 15:51:10 DEBUG HealthChecker:60 - Node is unhealthy for (localhost-1, 9000)
2018-07-26 15:51:10 DEBUG AbstractServiceRegistryUpdater:41 - Setting nodelist of size: 1
2018-07-26 15:51:10 WARN  AbstractServiceRegistryUpdater:45 - No service shards/nodes found. We are disconnected from zookeeper. Keeping old list.
2018-07-26 15:51:10 WARN  AbstractServiceRegistryUpdater:45 - No service shards/nodes found. We are disconnected from zookeeper. Keeping old list.
2018-07-26 15:51:10 WARN  AbstractServiceRegistryUpdater:45 - No service shards/nodes found. We are disconnected from zookeeper. Keeping old list.
2018-07-26 15:51:10 WARN  AbstractServiceRegistryUpdater:45 - No service shards/nodes found. We are disconnected from zookeeper. Keeping old list.
2018-07-26 15:51:10 WARN  AbstractServiceRegistryUpdater:45 - No service shards/nodes found. We are disconnected from zookeeper. Keeping old list.
2018-07-26 15:51:10 DEBUG AbstractServiceRegistryUpdater:108 - Stopped updater
2018-07-26 15:51:10 DEBUG HealthChecker:60 - Node is healthy for (localhost-3, 9000)
2018-07-26 15:51:10 DEBUG AbstractServiceRegistryUpdater:108 - Stopped updater
2018-07-26 15:51:10 DEBUG ServiceFinder:92 - ServiceFinder Scheduler stopped
Tests run: 1, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 5.893 sec
Running com.flipkart.ranger.model.SimpleServiceProviderTest
2018-07-26 15:51:11 DEBUG ServiceProvider:76 - Connected to zookeeper
2018-07-26 15:51:11 DEBUG ServiceProvider:78 - Set initial node data on zookeeper.
2018-07-26 15:51:11 DEBUG HealthChecker:60 - Node is healthy for (localhost-1, 9000)
2018-07-26 15:51:11 DEBUG ServiceProvider:76 - Connected to zookeeper
2018-07-26 15:51:11 DEBUG ServiceProvider:78 - Set initial node data on zookeeper.
2018-07-26 15:51:11 DEBUG HealthChecker:60 - Node is healthy for (localhost-2, 9000)
2018-07-26 15:51:11 DEBUG ServiceProvider:76 - Connected to zookeeper
2018-07-26 15:51:12 DEBUG ServiceProvider:78 - Set initial node data on zookeeper.
2018-07-26 15:51:12 DEBUG HealthChecker:60 - Node is healthy for (localhost-3, 9000)
2018-07-26 15:51:12 DEBUG AbstractServiceRegistryUpdater:38 - Connected to zookeeper cluster
2018-07-26 15:51:12 INFO  AbstractServiceRegistryUpdater:62 - Started polling zookeeper for changes
2018-07-26 15:51:12 DEBUG ServiceFinder:79 - ServiceFinder Scheduler Started
localhost-1
2018-07-26 15:51:12 DEBUG AbstractServiceRegistryUpdater:41 - Setting nodelist of size: 3
1 Million lookups and freq counting took (ms):91
Frequency: [localhost-1 x 333087, localhost-3 x 333686, localhost-2 x 333227]
Tests run: 1, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 2.006 sec
Running com.flipkart.ranger.model.CustomShardSelectorTest
2018-07-26 15:51:13 DEBUG ServiceProvider:76 - Connected to zookeeper
2018-07-26 15:51:13 DEBUG ServiceProvider:78 - Set initial node data on zookeeper.
2018-07-26 15:51:13 DEBUG HealthChecker:60 - Node is healthy for (localhost-1, 9000)
2018-07-26 15:51:13 DEBUG ServiceProvider:76 - Connected to zookeeper
2018-07-26 15:51:13 DEBUG ServiceProvider:78 - Set initial node data on zookeeper.
2018-07-26 15:51:13 DEBUG HealthChecker:60 - Node is healthy for (localhost-2, 9000)
2018-07-26 15:51:13 DEBUG ServiceProvider:76 - Connected to zookeeper
2018-07-26 15:51:13 DEBUG ServiceProvider:78 - Set initial node data on zookeeper.
2018-07-26 15:51:13 DEBUG HealthChecker:60 - Node is healthy for (localhost-3, 9000)
2018-07-26 15:51:13 DEBUG AbstractServiceRegistryUpdater:38 - Connected to zookeeper cluster
2018-07-26 15:51:13 INFO  AbstractServiceRegistryUpdater:62 - Started polling zookeeper for changes
2018-07-26 15:51:13 DEBUG ServiceFinder:79 - ServiceFinder Scheduler Started
2018-07-26 15:51:13 ERROR AbstractServiceRegistryUpdater:100 - Error getting service data from zookeeper: 
java.lang.IllegalStateException: instance must be started before calling this method
	at com.google.common.base.Preconditions.checkState(Preconditions.java:173)
	at org.apache.curator.framework.imps.CuratorFrameworkImpl.checkExists(CuratorFrameworkImpl.java:412)
	at com.flipkart.ranger.finder.CuratorServiceRegistryUpdater.getHealthyServiceNodes(CuratorServiceRegistryUpdater.java:84)
	at com.flipkart.ranger.finder.AbstractServiceRegistryUpdater.call(AbstractServiceRegistryUpdater.java:39)
	at com.flipkart.ranger.finder.AbstractServiceRegistryUpdater.call(AbstractServiceRegistryUpdater.java:14)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)
	at java.lang.Thread.run(Thread.java:745)
2018-07-26 15:51:13 WARN  AbstractServiceRegistryUpdater:45 - No service shards/nodes found. We are disconnected from zookeeper. Keeping old list.
2018-07-26 15:51:13 DEBUG AbstractServiceRegistryUpdater:108 - Stopped updater
2018-07-26 15:51:13 DEBUG AbstractServiceRegistryUpdater:108 - Stopped updater
2018-07-26 15:51:13 DEBUG ServiceFinder:92 - ServiceFinder Scheduler stopped
Tests run: 1, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 1.347 sec
Running com.flipkart.ranger.serviceprovider.ServiceProviderBuilderTest
Tests run: 1, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.153 sec

Results :

Tests in error: 
  testBasicDiscovery(com.flipkart.ranger.model.ServiceProviderExtCuratorTest): Cannot be started more than once

Tests run: 24, Failures: 0, Errors: 1, Skipped: 0

[INFO] ------------------------------------------------------------------------
[INFO] BUILD FAILURE
[INFO] ------------------------------------------------------------------------
[INFO] Total time: 01:05 min
[INFO] Finished at: 2018-07-26T15:51:14+02:00
[INFO] Final Memory: 15M/252M
[INFO] ------------------------------------------------------------------------
[ERROR] Failed to execute goal org.apache.maven.plugins:maven-surefire-plugin:2.12.4:test (default-test) on project ranger: There are test failures.
[ERROR] 
[ERROR] Please refer to /root/workspace/flipkart-incubator/ranger/408516756/target/surefire-reports for the individual test results.
[ERROR] -> [Help 1]
[ERROR] 
[ERROR] To see the full stack trace of the errors, re-run Maven with the -e switch.
[ERROR] Re-run Maven using the -X switch to enable full debug logging.
[ERROR] 
[ERROR] For more information about the errors and possible solutions, please read the following articles:
[ERROR] [Help 1] http://cwiki.apache.org/confluence/display/MAVEN/MojoFailureException
