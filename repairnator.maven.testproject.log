[INFO] Scanning for projects...
[INFO]                                                                         
[INFO] ------------------------------------------------------------------------
[INFO] Building Voting System 1.0-SNAPSHOT
[INFO] ------------------------------------------------------------------------
[INFO] 
[INFO] --- maven-resources-plugin:2.6:resources (default-resources) @ graduation ---
[INFO] Using 'UTF-8' encoding to copy filtered resources.
[INFO] Copying 10 resources
[INFO] 
[INFO] --- maven-compiler-plugin:3.7.0:compile (default-compile) @ graduation ---
[INFO] Nothing to compile - all classes are up to date
[INFO] 
[INFO] --- maven-resources-plugin:2.6:testResources (default-testResources) @ graduation ---
[INFO] Using 'UTF-8' encoding to copy filtered resources.
[INFO] Copying 1 resource
[INFO] 
[INFO] --- maven-compiler-plugin:3.7.0:testCompile (default-testCompile) @ graduation ---
[INFO] Nothing to compile - all classes are up to date
[INFO] 
[INFO] --- maven-surefire-plugin:2.22.0:test (default-test) @ graduation ---
[INFO] Downloading: https://repo.maven.apache.org/maven2/org/apache/maven/wagon/wagon-provider-api/1.0-beta-6/wagon-provider-api-1.0-beta-6.pom
[INFO] Downloaded: https://repo.maven.apache.org/maven2/org/apache/maven/wagon/wagon-provider-api/1.0-beta-6/wagon-provider-api-1.0-beta-6.pom (2 KB at 3.1 KB/sec)
[INFO] Downloading: https://repo.maven.apache.org/maven2/org/apache/maven/wagon/wagon/1.0-beta-6/wagon-1.0-beta-6.pom
[INFO] Downloaded: https://repo.maven.apache.org/maven2/org/apache/maven/wagon/wagon/1.0-beta-6/wagon-1.0-beta-6.pom (13 KB at 288.0 KB/sec)
[INFO] Downloading: https://repo.maven.apache.org/maven2/org/codehaus/plexus/plexus-utils/1.4.2/plexus-utils-1.4.2.pom
[INFO] Downloaded: https://repo.maven.apache.org/maven2/org/codehaus/plexus/plexus-utils/1.4.2/plexus-utils-1.4.2.pom (2 KB at 54.7 KB/sec)
[INFO] Downloading: https://repo.maven.apache.org/maven2/org/apache/maven/wagon/wagon-http/1.0-beta-6/wagon-http-1.0-beta-6.pom
[INFO] Downloaded: https://repo.maven.apache.org/maven2/org/apache/maven/wagon/wagon-http/1.0-beta-6/wagon-http-1.0-beta-6.pom (4 KB at 70.9 KB/sec)
[INFO] Downloading: https://repo.maven.apache.org/maven2/org/apache/maven/wagon/wagon-providers/1.0-beta-6/wagon-providers-1.0-beta-6.pom
[INFO] Downloaded: https://repo.maven.apache.org/maven2/org/apache/maven/wagon/wagon-providers/1.0-beta-6/wagon-providers-1.0-beta-6.pom (3 KB at 47.9 KB/sec)
[INFO] Downloading: https://repo.maven.apache.org/maven2/org/apache/maven/wagon/wagon-http-shared/1.0-beta-6/wagon-http-shared-1.0-beta-6.pom
[INFO] Downloaded: https://repo.maven.apache.org/maven2/org/apache/maven/wagon/wagon-http-shared/1.0-beta-6/wagon-http-shared-1.0-beta-6.pom (3 KB at 49.0 KB/sec)
[INFO] Downloading: https://repo.maven.apache.org/maven2/nekohtml/xercesMinimal/1.9.6.2/xercesMinimal-1.9.6.2.pom
[INFO] Downloaded: https://repo.maven.apache.org/maven2/nekohtml/xercesMinimal/1.9.6.2/xercesMinimal-1.9.6.2.pom (390 B at 10.6 KB/sec)
[INFO] Downloading: https://repo.maven.apache.org/maven2/nekohtml/nekohtml/1.9.6.2/nekohtml-1.9.6.2.pom
[INFO] Downloaded: https://repo.maven.apache.org/maven2/nekohtml/nekohtml/1.9.6.2/nekohtml-1.9.6.2.pom (704 B at 19.6 KB/sec)
[INFO] Downloading: https://repo.maven.apache.org/maven2/commons-httpclient/commons-httpclient/3.1/commons-httpclient-3.1.pom
[INFO] Downloaded: https://repo.maven.apache.org/maven2/commons-httpclient/commons-httpclient/3.1/commons-httpclient-3.1.pom (8 KB at 199.5 KB/sec)
[INFO] Downloading: https://repo.maven.apache.org/maven2/commons-codec/commons-codec/1.2/commons-codec-1.2.pom
[INFO] Downloaded: https://repo.maven.apache.org/maven2/commons-codec/commons-codec/1.2/commons-codec-1.2.pom (4 KB at 79.5 KB/sec)
[INFO] Downloading: https://repo.maven.apache.org/maven2/org/apache/maven/wagon/wagon-webdav-jackrabbit/1.0-beta-6/wagon-webdav-jackrabbit-1.0-beta-6.pom
[INFO] Downloaded: https://repo.maven.apache.org/maven2/org/apache/maven/wagon/wagon-webdav-jackrabbit/1.0-beta-6/wagon-webdav-jackrabbit-1.0-beta-6.pom (4 KB at 92.7 KB/sec)
[INFO] Downloading: https://repo.maven.apache.org/maven2/org/apache/jackrabbit/jackrabbit-webdav/1.5.0/jackrabbit-webdav-1.5.0.pom
[INFO] Downloaded: https://repo.maven.apache.org/maven2/org/apache/jackrabbit/jackrabbit-webdav/1.5.0/jackrabbit-webdav-1.5.0.pom (4 KB at 93.0 KB/sec)
[INFO] Downloading: https://repo.maven.apache.org/maven2/org/apache/jackrabbit/jackrabbit-parent/1.5.0/jackrabbit-parent-1.5.0.pom
[INFO] Downloaded: https://repo.maven.apache.org/maven2/org/apache/jackrabbit/jackrabbit-parent/1.5.0/jackrabbit-parent-1.5.0.pom (25 KB at 589.8 KB/sec)
[INFO] Downloading: https://repo.maven.apache.org/maven2/org/apache/jackrabbit/jackrabbit-jcr-commons/1.5.0/jackrabbit-jcr-commons-1.5.0.pom
[INFO] Downloaded: https://repo.maven.apache.org/maven2/org/apache/jackrabbit/jackrabbit-jcr-commons/1.5.0/jackrabbit-jcr-commons-1.5.0.pom (3 KB at 83.3 KB/sec)
[INFO] Downloading: https://repo.maven.apache.org/maven2/org/slf4j/slf4j-api/1.5.3/slf4j-api-1.5.3.pom
[INFO] Downloaded: https://repo.maven.apache.org/maven2/org/slf4j/slf4j-api/1.5.3/slf4j-api-1.5.3.pom (3 KB at 78.8 KB/sec)
[INFO] Downloading: https://repo.maven.apache.org/maven2/org/slf4j/slf4j-parent/1.5.3/slf4j-parent-1.5.3.pom
[INFO] Downloaded: https://repo.maven.apache.org/maven2/org/slf4j/slf4j-parent/1.5.3/slf4j-parent-1.5.3.pom (8 KB at 229.0 KB/sec)
[INFO] Downloading: https://repo.maven.apache.org/maven2/commons-httpclient/commons-httpclient/3.0/commons-httpclient-3.0.pom
[INFO] Downloaded: https://repo.maven.apache.org/maven2/commons-httpclient/commons-httpclient/3.0/commons-httpclient-3.0.pom (8 KB at 224.0 KB/sec)
[INFO] Downloading: https://repo.maven.apache.org/maven2/org/slf4j/slf4j-nop/1.5.3/slf4j-nop-1.5.3.pom
[INFO] Downloaded: https://repo.maven.apache.org/maven2/org/slf4j/slf4j-nop/1.5.3/slf4j-nop-1.5.3.pom (2 KB at 44.6 KB/sec)
[INFO] Downloading: https://repo.maven.apache.org/maven2/org/apache/maven/reporting/maven-reporting-api/2.2.1/maven-reporting-api-2.2.1.pom
[INFO] Downloaded: https://repo.maven.apache.org/maven2/org/apache/maven/reporting/maven-reporting-api/2.2.1/maven-reporting-api-2.2.1.pom (2 KB at 54.8 KB/sec)
[INFO] Downloading: https://repo.maven.apache.org/maven2/org/apache/maven/reporting/maven-reporting/2.2.1/maven-reporting-2.2.1.pom
[INFO] Downloaded: https://repo.maven.apache.org/maven2/org/apache/maven/reporting/maven-reporting/2.2.1/maven-reporting-2.2.1.pom (2 KB at 41.4 KB/sec)
[INFO] Downloading: https://repo.maven.apache.org/maven2/org/apache/maven/doxia/doxia-logging-api/1.1/doxia-logging-api-1.1.pom
[INFO] Downloaded: https://repo.maven.apache.org/maven2/org/apache/maven/doxia/doxia-logging-api/1.1/doxia-logging-api-1.1.pom (2 KB at 42.7 KB/sec)
[INFO] Downloading: https://repo.maven.apache.org/maven2/org/apache/maven/doxia/doxia/1.1/doxia-1.1.pom
[INFO] Downloaded: https://repo.maven.apache.org/maven2/org/apache/maven/doxia/doxia/1.1/doxia-1.1.pom (15 KB at 269.5 KB/sec)
[INFO] Downloading: https://repo.maven.apache.org/maven2/org/codehaus/plexus/plexus-container-default/1.0-alpha-30/plexus-container-default-1.0-alpha-30.pom
[INFO] Downloaded: https://repo.maven.apache.org/maven2/org/codehaus/plexus/plexus-container-default/1.0-alpha-30/plexus-container-default-1.0-alpha-30.pom (4 KB at 99.9 KB/sec)
[INFO] Downloading: https://repo.maven.apache.org/maven2/org/codehaus/plexus/plexus-containers/1.0-alpha-30/plexus-containers-1.0-alpha-30.pom
[INFO] Downloaded: https://repo.maven.apache.org/maven2/org/codehaus/plexus/plexus-containers/1.0-alpha-30/plexus-containers-1.0-alpha-30.pom (2 KB at 51.4 KB/sec)
[INFO] Downloading: https://repo.maven.apache.org/maven2/org/apache/maven/wagon/wagon-provider-api/1.0-beta-6/wagon-provider-api-1.0-beta-6.jar
[INFO] Downloading: https://repo.maven.apache.org/maven2/nekohtml/xercesMinimal/1.9.6.2/xercesMinimal-1.9.6.2.jar
[INFO] Downloading: https://repo.maven.apache.org/maven2/org/apache/maven/wagon/wagon-http/1.0-beta-6/wagon-http-1.0-beta-6.jar
[INFO] Downloading: https://repo.maven.apache.org/maven2/org/apache/maven/wagon/wagon-http-shared/1.0-beta-6/wagon-http-shared-1.0-beta-6.jar
[INFO] Downloading: https://repo.maven.apache.org/maven2/nekohtml/nekohtml/1.9.6.2/nekohtml-1.9.6.2.jar
[INFO] Downloaded: https://repo.maven.apache.org/maven2/org/apache/maven/wagon/wagon-provider-api/1.0-beta-6/wagon-provider-api-1.0-beta-6.jar (52 KB at 837.7 KB/sec)
[INFO] Downloading: https://repo.maven.apache.org/maven2/commons-httpclient/commons-httpclient/3.1/commons-httpclient-3.1.jar
[INFO] Downloaded: https://repo.maven.apache.org/maven2/org/apache/maven/wagon/wagon-http/1.0-beta-6/wagon-http-1.0-beta-6.jar (11 KB at 126.7 KB/sec)
[INFO] Downloading: https://repo.maven.apache.org/maven2/commons-codec/commons-codec/1.2/commons-codec-1.2.jar
[INFO] Downloaded: https://repo.maven.apache.org/maven2/nekohtml/xercesMinimal/1.9.6.2/xercesMinimal-1.9.6.2.jar (39 KB at 404.8 KB/sec)
[INFO] Downloading: https://repo.maven.apache.org/maven2/org/apache/maven/wagon/wagon-webdav-jackrabbit/1.0-beta-6/wagon-webdav-jackrabbit-1.0-beta-6.jar
[INFO] Downloaded: https://repo.maven.apache.org/maven2/org/apache/maven/wagon/wagon-http-shared/1.0-beta-6/wagon-http-shared-1.0-beta-6.jar (25 KB at 247.3 KB/sec)
[INFO] Downloading: https://repo.maven.apache.org/maven2/org/apache/jackrabbit/jackrabbit-webdav/1.5.0/jackrabbit-webdav-1.5.0.jar
[INFO] Downloaded: https://repo.maven.apache.org/maven2/nekohtml/nekohtml/1.9.6.2/nekohtml-1.9.6.2.jar (110 KB at 950.0 KB/sec)
[INFO] Downloading: https://repo.maven.apache.org/maven2/org/apache/jackrabbit/jackrabbit-jcr-commons/1.5.0/jackrabbit-jcr-commons-1.5.0.jar
[INFO] Downloaded: https://repo.maven.apache.org/maven2/commons-codec/commons-codec/1.2/commons-codec-1.2.jar (30 KB at 599.6 KB/sec)
[INFO] Downloading: https://repo.maven.apache.org/maven2/org/slf4j/slf4j-nop/1.5.3/slf4j-nop-1.5.3.jar
[INFO] Downloaded: https://repo.maven.apache.org/maven2/org/apache/maven/wagon/wagon-webdav-jackrabbit/1.0-beta-6/wagon-webdav-jackrabbit-1.0-beta-6.jar (18 KB at 313.4 KB/sec)
[INFO] Downloading: https://repo.maven.apache.org/maven2/org/apache/maven/reporting/maven-reporting-api/2.2.1/maven-reporting-api-2.2.1.jar
[INFO] Downloaded: https://repo.maven.apache.org/maven2/org/slf4j/slf4j-nop/1.5.3/slf4j-nop-1.5.3.jar (6 KB at 130.2 KB/sec)
[INFO] Downloaded: https://repo.maven.apache.org/maven2/commons-httpclient/commons-httpclient/3.1/commons-httpclient-3.1.jar (298 KB at 2567.7 KB/sec)
[INFO] Downloading: https://repo.maven.apache.org/maven2/org/apache/maven/doxia/doxia-logging-api/1.1/doxia-logging-api-1.1.jar
[INFO] Downloaded: https://repo.maven.apache.org/maven2/org/apache/maven/reporting/maven-reporting-api/2.2.1/maven-reporting-api-2.2.1.jar (10 KB at 217.2 KB/sec)
[INFO] Downloaded: https://repo.maven.apache.org/maven2/org/apache/maven/doxia/doxia-logging-api/1.1/doxia-logging-api-1.1.jar (12 KB at 325.6 KB/sec)
[INFO] Downloaded: https://repo.maven.apache.org/maven2/org/apache/jackrabbit/jackrabbit-webdav/1.5.0/jackrabbit-webdav-1.5.0.jar (296 KB at 2330.6 KB/sec)
[INFO] Downloaded: https://repo.maven.apache.org/maven2/org/apache/jackrabbit/jackrabbit-jcr-commons/1.5.0/jackrabbit-jcr-commons-1.5.0.jar (199 KB at 1767.9 KB/sec)
[INFO] 
[INFO] -------------------------------------------------------
[INFO]  T E S T S
[INFO] -------------------------------------------------------
[INFO] Running ru.javawebinar.graduation.controller.user.UserAdminRestControllerTest
11:32:39.794 [34mINFO [0;39m [36mo.s.t.c.support.AbstractTestContextBootstrapper.getDefaultTestExecutionListenerClassNames:248[0;39m - Loaded default TestExecutionListener class names from location [META-INF/spring.factories]: [org.springframework.security.test.context.support.WithSecurityContextTestExecutionListener, org.springframework.security.test.context.support.ReactorContextTestExecutionListener, org.springframework.test.context.web.ServletTestExecutionListener, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener, org.springframework.test.context.support.DependencyInjectionTestExecutionListener, org.springframework.test.context.support.DirtiesContextTestExecutionListener, org.springframework.test.context.transaction.TransactionalTestExecutionListener, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener]
11:32:39.818 [34mINFO [0;39m [36mo.s.t.c.support.AbstractTestContextBootstrapper.getTestExecutionListeners:177[0;39m - Using TestExecutionListeners: [org.springframework.test.context.web.ServletTestExecutionListener@77fbd92c, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener@67c27493, org.springframework.test.context.support.DependencyInjectionTestExecutionListener@1a482e36, org.springframework.test.context.support.DirtiesContextTestExecutionListener@72967906, org.springframework.test.context.transaction.TransactionalTestExecutionListener@5b8dfcc1, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener@2f9f7dcf, org.springframework.security.test.context.support.WithSecurityContextTestExecutionListener@747ddf94, org.springframework.security.test.context.support.ReactorContextTestExecutionListener@35e2d654]
11:32:39.909 [34mINFO [0;39m [36mo.s.beans.factory.xml.XmlBeanDefinitionReader.loadBeanDefinitions:316[0;39m - Loading XML bean definitions from class path resource [spring/spring-app.xml]
11:32:40.043 [34mINFO [0;39m [36mo.s.beans.factory.xml.XmlBeanDefinitionReader.loadBeanDefinitions:316[0;39m - Loading XML bean definitions from class path resource [spring/spring-tools.xml]
11:32:40.122 [34mINFO [0;39m [36mo.s.beans.factory.xml.XmlBeanDefinitionReader.loadBeanDefinitions:316[0;39m - Loading XML bean definitions from class path resource [spring/spring-security.xml]
11:32:40.206 [34mINFO [0;39m [36mo.s.security.config.SecurityNamespaceHandler.<init>:78[0;39m - Spring Security 'config' module version is 5.0.7.RELEASE
11:32:40.251 [34mINFO [0;39m [36mo.s.s.c.h.FilterInvocationSecurityMetadataSourceParser.parseInterceptUrlsForFilterInvocationRequestMap:194[0;39m - Creating access control expression attribute 'hasRole('ROLE_ADMIN')' for /rest/admin/**
11:32:40.252 [34mINFO [0;39m [36mo.s.s.c.h.FilterInvocationSecurityMetadataSourceParser.parseInterceptUrlsForFilterInvocationRequestMap:194[0;39m - Creating access control expression attribute 'isAnonymous()' for /rest/profile/register
11:32:40.253 [34mINFO [0;39m [36mo.s.s.c.h.FilterInvocationSecurityMetadataSourceParser.parseInterceptUrlsForFilterInvocationRequestMap:194[0;39m - Creating access control expression attribute 'isAuthenticated()' for /**
11:32:40.283 [34mINFO [0;39m [36mo.s.s.config.http.HttpSecurityBeanDefinitionParser.checkFilterChainOrder:307[0;39m - Checking sorted filter chain: [Root bean: class [org.springframework.security.web.context.SecurityContextPersistenceFilter]; scope=; abstract=false; lazyInit=false; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 200, Root bean: class [org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter]; scope=; abstract=false; lazyInit=false; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 400, Root bean: class [org.springframework.security.web.header.HeaderWriterFilter]; scope=; abstract=false; lazyInit=false; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 500, Root bean: class [org.springframework.security.web.authentication.www.BasicAuthenticationFilter]; scope=; abstract=false; lazyInit=false; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 1600, Root bean: class [null]; scope=; abstract=false; lazyInit=false; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=org.springframework.security.config.http.HttpConfigurationBuilder$SecurityContextHolderAwareRequestFilterBeanFactory#0; factoryMethodName=getBean; initMethodName=null; destroyMethodName=null, order = 1800, Root bean: class [org.springframework.security.web.authentication.AnonymousAuthenticationFilter]; scope=; abstract=false; lazyInit=false; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 2100, Root bean: class [org.springframework.security.web.access.ExceptionTranslationFilter]; scope=; abstract=false; lazyInit=false; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 2300, <org.springframework.security.web.access.intercept.FilterSecurityInterceptor#0>, order = 2400]
11:32:40.474 [34mINFO [0;39m [36mo.s.beans.factory.xml.XmlBeanDefinitionReader.loadBeanDefinitions:316[0;39m - Loading XML bean definitions from class path resource [spring/spring-mvc.xml]
11:32:40.555 [34mINFO [0;39m [36mo.s.s.c.m.GlobalMethodSecurityBeanDefinitionParser.parse:210[0;39m - Expressions were enabled for method security but no SecurityExpressionHandler was configured. All hasPermision() expressions will evaluate to false.
11:32:40.745 [34mINFO [0;39m [36mo.s.beans.factory.xml.XmlBeanDefinitionReader.loadBeanDefinitions:316[0;39m - Loading XML bean definitions from class path resource [spring/spring-db.xml]
11:32:41.030 [34mINFO [0;39m [36mo.s.context.support.AbstractApplicationContext.prepareRefresh:590[0;39m - Refreshing org.springframework.web.context.support.GenericWebApplicationContext@6b2ea799: startup date [Fri Oct 12 11:32:41 CEST 2018]; root of context hierarchy
11:32:41.610 [34mINFO [0;39m [36morg.ehcache.xml.XmlConfiguration.parseConfiguration:177[0;39m - Loading Ehcache XML configuration from /root/workspace/MerkulovAA/graduation/440307707/target/classes/cache/ehcache.xml.
11:32:42.221 [34mINFO [0;39m [36morg.ehcache.core.EhcacheManager.createCache:296[0;39m - Cache 'users' created in Eh107InternalCacheManager.
11:32:42.329 [34mINFO [0;39m [36morg.ehcache.jsr107.Eh107CacheManager.registerObject:392[0;39m - Registering Ehcache MBean javax.cache:type=CacheStatistics,CacheManager=file./root/workspace/MerkulovAA/graduation/440307707/target/classes/cache/ehcache.xml,Cache=users
11:32:42.437 [34mINFO [0;39m [36morg.ehcache.jsr107.Eh107CacheManager.registerObject:392[0;39m - Registering Ehcache MBean javax.cache:type=CacheStatistics,CacheManager=file./root/workspace/MerkulovAA/graduation/440307707/target/classes/cache/ehcache.xml,Cache=users
11:32:42.820 [34mINFO [0;39m [36mo.s.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory:361[0;39m - Building JPA container EntityManagerFactory for persistence unit 'default'
11:32:42.875 [34mINFO [0;39m [36morg.hibernate.jpa.internal.util.LogHelper.logPersistenceUnitInformation:31[0;39m - HHH000204: Processing PersistenceUnitInfo [
	name: default
	...]
11:32:43.039 [34mINFO [0;39m [36morg.hibernate.Version.logVersion:46[0;39m - HHH000412: Hibernate Core {5.3.2.Final}
11:32:43.047 [34mINFO [0;39m [36morg.hibernate.cfg.Environment.<clinit>:213[0;39m - HHH000206: hibernate.properties not found
11:32:43.295 [34mINFO [0;39m [36mo.h.a.common.reflection.java.JavaReflectionManager.<clinit>:49[0;39m - HCANN000001: Hibernate Commons Annotations {5.0.4.Final}
11:32:44.226 [34mINFO [0;39m [36morg.hibernate.dialect.Dialect.<init>:157[0;39m - HHH000400: Using dialect: org.hibernate.dialect.HSQLDialect
11:32:44.662 [34mINFO [0;39m [36morg.hibernate.validator.internal.util.Version.<clinit>:21[0;39m - HV000001: Hibernate Validator 6.0.10.Final
11:32:44.973 [31mWARN [0;39m [36mo.h.cache.jcache.internal.JCacheRegionFactory.createCache:93[0;39m - HHH90001006: Missing cache[ru.javawebinar.graduation.model.User.roles] was created on-the-fly. The created cache will use a provider-specific default configuration: make sure you defined one. You can disable this warning by setting 'hibernate.javax.cache.missing_cache_strategy' to 'create'.
11:32:44.986 [34mINFO [0;39m [36morg.ehcache.core.EhcacheManager.createCache:296[0;39m - Cache 'ru.javawebinar.graduation.model.User.roles' created in Eh107InternalCacheManager.
11:32:44.990 [31mWARN [0;39m [36mo.h.cache.jcache.internal.JCacheRegionFactory.createCache:93[0;39m - HHH90001006: Missing cache[ru.javawebinar.graduation.model.User] was created on-the-fly. The created cache will use a provider-specific default configuration: make sure you defined one. You can disable this warning by setting 'hibernate.javax.cache.missing_cache_strategy' to 'create'.
11:32:44.998 [34mINFO [0;39m [36morg.ehcache.core.EhcacheManager.createCache:296[0;39m - Cache 'ru.javawebinar.graduation.model.User' created in Eh107InternalCacheManager.
11:32:45.731 [34mINFO [0;39m [36mo.s.orm.jpa.AbstractEntityManagerFactoryBean.buildNativeEntityManagerFactory:415[0;39m - Initialized JPA EntityManagerFactory for persistence unit 'default'
11:32:46.615 [34mINFO [0;39m [36mo.h.hql.internal.QueryTranslatorFactoryInitiator.initiateService:47[0;39m - HHH000397: Using ASTQueryTranslatorFactory
11:32:47.276 [34mINFO [0;39m [36mo.s.security.web.DefaultSecurityFilterChain.<init>:43[0;39m - Creating filter chain: Ant [pattern='/rest/**'], [org.springframework.security.web.context.SecurityContextPersistenceFilter@314b7945, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@2c99c8d, org.springframework.security.web.header.HeaderWriterFilter@3ef3f661, org.springframework.security.web.authentication.www.BasicAuthenticationFilter@166e5a6d, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@31b741e2, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@71039ce1, org.springframework.security.web.access.ExceptionTranslationFilter@58f7215c, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@69fe7090]
11:32:48.622 [34mINFO [0;39m [36mo.s.w.s.h.AbstractHandlerMethodMapping$MappingRegistry.register:547[0;39m - Mapped "{[/rest/admin/restaurants/{restaurantId}/meals/history],methods=[GET],produces=[application/json]}" onto public java.util.List<ru.javawebinar.graduation.model.Meal> ru.javawebinar.graduation.controller.meal.MealAdminRestController.getAll(int)
11:32:48.624 [34mINFO [0;39m [36mo.s.w.s.h.AbstractHandlerMethodMapping$MappingRegistry.register:547[0;39m - Mapped "{[/rest/admin/restaurants/{restaurantId}/meals/today],methods=[GET],produces=[application/json]}" onto public java.util.List<ru.javawebinar.graduation.model.Meal> ru.javawebinar.graduation.controller.meal.MealAdminRestController.getAllByToday(int)
11:32:48.625 [34mINFO [0;39m [36mo.s.w.s.h.AbstractHandlerMethodMapping$MappingRegistry.register:547[0;39m - Mapped "{[/rest/admin/restaurants/{restaurantId}/meals/byDate],methods=[GET],produces=[application/json]}" onto public java.util.List<ru.javawebinar.graduation.model.Meal> ru.javawebinar.graduation.controller.meal.MealAdminRestController.getAllByDate(int,java.time.LocalDate)
11:32:48.626 [34mINFO [0;39m [36mo.s.w.s.h.AbstractHandlerMethodMapping$MappingRegistry.register:547[0;39m - Mapped "{[/rest/admin/restaurants/{restaurantId}/meals/filter],methods=[GET],produces=[application/json]}" onto public java.util.List<ru.javawebinar.graduation.model.Meal> ru.javawebinar.graduation.controller.meal.MealAdminRestController.getAllBetween(int,java.time.LocalDate,java.time.LocalDate)
11:32:48.627 [34mINFO [0;39m [36mo.s.w.s.h.AbstractHandlerMethodMapping$MappingRegistry.register:547[0;39m - Mapped "{[/rest/admin/restaurants/{restaurantId}/meals],methods=[POST],consumes=[application/json],produces=[application/json]}" onto public org.springframework.http.ResponseEntity<ru.javawebinar.graduation.model.Meal> ru.javawebinar.graduation.controller.meal.MealAdminRestController.add(ru.javawebinar.graduation.model.Meal,int)
11:32:48.628 [34mINFO [0;39m [36mo.s.w.s.h.AbstractHandlerMethodMapping$MappingRegistry.register:547[0;39m - Mapped "{[/rest/admin/restaurants/{restaurantId}/meals/{mealId}],methods=[GET],produces=[application/json]}" onto public ru.javawebinar.graduation.model.Meal ru.javawebinar.graduation.controller.meal.MealAdminRestController.get(int,int)
11:32:48.630 [34mINFO [0;39m [36mo.s.w.s.h.AbstractHandlerMethodMapping$MappingRegistry.register:547[0;39m - Mapped "{[/rest/admin/restaurants/{restaurantId}/meals/{mealId}],methods=[PUT],consumes=[application/json]}" onto public void ru.javawebinar.graduation.controller.meal.MealAdminRestController.update(ru.javawebinar.graduation.model.Meal,int,int)
11:32:48.631 [34mINFO [0;39m [36mo.s.w.s.h.AbstractHandlerMethodMapping$MappingRegistry.register:547[0;39m - Mapped "{[/rest/admin/restaurants/{restaurantId}/meals/{mealId}],methods=[DELETE]}" onto public void ru.javawebinar.graduation.controller.meal.MealAdminRestController.delete(int,int)
11:32:48.638 [34mINFO [0;39m [36mo.s.w.s.h.AbstractHandlerMethodMapping$MappingRegistry.register:547[0;39m - Mapped "{[/rest/admin/restaurants/by],methods=[GET],produces=[application/json]}" onto public ru.javawebinar.graduation.model.Restaurant ru.javawebinar.graduation.controller.restaurant.RestaurantAdminRestController.getByName(java.lang.String)
11:32:48.639 [34mINFO [0;39m [36mo.s.w.s.h.AbstractHandlerMethodMapping$MappingRegistry.register:547[0;39m - Mapped "{[/rest/admin/restaurants],methods=[GET],produces=[application/json]}" onto public java.util.List<ru.javawebinar.graduation.model.Restaurant> ru.javawebinar.graduation.controller.restaurant.RestaurantAdminRestController.getAll()
11:32:48.639 [34mINFO [0;39m [36mo.s.w.s.h.AbstractHandlerMethodMapping$MappingRegistry.register:547[0;39m - Mapped "{[/rest/admin/restaurants/{id}/meals],methods=[GET],produces=[application/json]}" onto public ru.javawebinar.graduation.model.Restaurant ru.javawebinar.graduation.controller.restaurant.RestaurantAdminRestController.getWithMeals(int)
11:32:48.640 [34mINFO [0;39m [36mo.s.w.s.h.AbstractHandlerMethodMapping$MappingRegistry.register:547[0;39m - Mapped "{[/rest/admin/restaurants],methods=[POST],consumes=[application/json],produces=[application/json]}" onto public org.springframework.http.ResponseEntity<ru.javawebinar.graduation.model.Restaurant> ru.javawebinar.graduation.controller.restaurant.RestaurantAdminRestController.add(ru.javawebinar.graduation.model.Restaurant)
11:32:48.640 [34mINFO [0;39m [36mo.s.w.s.h.AbstractHandlerMethodMapping$MappingRegistry.register:547[0;39m - Mapped "{[/rest/admin/restaurants/{id}],methods=[GET],produces=[application/json]}" onto public ru.javawebinar.graduation.model.Restaurant ru.javawebinar.graduation.controller.restaurant.RestaurantAdminRestController.get(int)
11:32:48.641 [34mINFO [0;39m [36mo.s.w.s.h.AbstractHandlerMethodMapping$MappingRegistry.register:547[0;39m - Mapped "{[/rest/admin/restaurants/{id}],methods=[PUT],consumes=[application/json]}" onto public void ru.javawebinar.graduation.controller.restaurant.RestaurantAdminRestController.update(ru.javawebinar.graduation.model.Restaurant,int)
11:32:48.641 [34mINFO [0;39m [36mo.s.w.s.h.AbstractHandlerMethodMapping$MappingRegistry.register:547[0;39m - Mapped "{[/rest/admin/restaurants/{id}],methods=[DELETE]}" onto public void ru.javawebinar.graduation.controller.restaurant.RestaurantAdminRestController.delete(int)
11:32:48.644 [34mINFO [0;39m [36mo.s.w.s.h.AbstractHandlerMethodMapping$MappingRegistry.register:547[0;39m - Mapped "{[/rest/profile/restaurants],methods=[GET],produces=[application/json]}" onto public java.util.List<ru.javawebinar.graduation.model.Restaurant> ru.javawebinar.graduation.controller.restaurant.RestaurantProfileRestController.getAllWithMealsByToday()
11:32:48.644 [34mINFO [0;39m [36mo.s.w.s.h.AbstractHandlerMethodMapping$MappingRegistry.register:547[0;39m - Mapped "{[/rest/profile/restaurants],methods=[POST],produces=[application/json]}" onto public org.springframework.http.ResponseEntity<java.lang.String> ru.javawebinar.graduation.controller.restaurant.RestaurantProfileRestController.choice(int,ru.javawebinar.graduation.AuthorizedUser)
11:32:48.654 [34mINFO [0;39m [36mo.s.w.s.h.AbstractHandlerMethodMapping$MappingRegistry.register:547[0;39m - Mapped "{[/rest/admin/users],methods=[GET],produces=[application/json]}" onto public java.util.List<ru.javawebinar.graduation.model.User> ru.javawebinar.graduation.controller.user.UserAdminRestController.getAll()
11:32:48.654 [34mINFO [0;39m [36mo.s.w.s.h.AbstractHandlerMethodMapping$MappingRegistry.register:547[0;39m - Mapped "{[/rest/admin/users],methods=[POST],consumes=[application/json],produces=[application/json]}" onto public org.springframework.http.ResponseEntity<ru.javawebinar.graduation.model.User> ru.javawebinar.graduation.controller.user.UserAdminRestController.createWithLocation(ru.javawebinar.graduation.model.User)
11:32:48.655 [34mINFO [0;39m [36mo.s.w.s.h.AbstractHandlerMethodMapping$MappingRegistry.register:547[0;39m - Mapped "{[/rest/admin/users/by],methods=[GET],produces=[application/json]}" onto public ru.javawebinar.graduation.model.User ru.javawebinar.graduation.controller.user.UserAdminRestController.getByMail(java.lang.String)
11:32:48.655 [34mINFO [0;39m [36mo.s.w.s.h.AbstractHandlerMethodMapping$MappingRegistry.register:547[0;39m - Mapped "{[/rest/admin/users/{id}],methods=[GET],produces=[application/json]}" onto public ru.javawebinar.graduation.model.User ru.javawebinar.graduation.controller.user.UserAdminRestController.get(int)
11:32:48.656 [34mINFO [0;39m [36mo.s.w.s.h.AbstractHandlerMethodMapping$MappingRegistry.register:547[0;39m - Mapped "{[/rest/admin/users/{id}],methods=[PUT],consumes=[application/json]}" onto public void ru.javawebinar.graduation.controller.user.UserAdminRestController.update(ru.javawebinar.graduation.model.User,int)
11:32:48.657 [34mINFO [0;39m [36mo.s.w.s.h.AbstractHandlerMethodMapping$MappingRegistry.register:547[0;39m - Mapped "{[/rest/admin/users/{id}],methods=[DELETE]}" onto public void ru.javawebinar.graduation.controller.user.UserAdminRestController.delete(int)
11:32:48.657 [34mINFO [0;39m [36mo.s.w.s.h.AbstractHandlerMethodMapping$MappingRegistry.register:547[0;39m - Mapped "{[/rest/admin/users/{id}],methods=[POST]}" onto public void ru.javawebinar.graduation.controller.user.UserAdminRestController.enable(int,boolean)
11:32:48.660 [34mINFO [0;39m [36mo.s.w.s.h.AbstractHandlerMethodMapping$MappingRegistry.register:547[0;39m - Mapped "{[/rest/profile],methods=[GET],produces=[application/json]}" onto public ru.javawebinar.graduation.model.User ru.javawebinar.graduation.controller.user.UserProfileRestController.get(ru.javawebinar.graduation.AuthorizedUser)
11:32:48.661 [34mINFO [0;39m [36mo.s.w.s.h.AbstractHandlerMethodMapping$MappingRegistry.register:547[0;39m - Mapped "{[/rest/profile/register],methods=[POST],consumes=[application/json]}" onto public org.springframework.http.ResponseEntity<ru.javawebinar.graduation.model.User> ru.javawebinar.graduation.controller.user.UserProfileRestController.register(ru.javawebinar.graduation.to.UserTo)
11:32:48.662 [34mINFO [0;39m [36mo.s.w.s.h.AbstractHandlerMethodMapping$MappingRegistry.register:547[0;39m - Mapped "{[/rest/profile],methods=[PUT],consumes=[application/json]}" onto public void ru.javawebinar.graduation.controller.user.UserProfileRestController.update(ru.javawebinar.graduation.to.UserTo,ru.javawebinar.graduation.AuthorizedUser)
11:32:48.663 [34mINFO [0;39m [36mo.s.w.s.h.AbstractHandlerMethodMapping$MappingRegistry.register:547[0;39m - Mapped "{[/rest/profile],methods=[DELETE]}" onto public void ru.javawebinar.graduation.controller.user.UserProfileRestController.delete(ru.javawebinar.graduation.AuthorizedUser)
11:32:48.878 [34mINFO [0;39m [36mo.s.w.s.m.m.a.RequestMappingHandlerAdapter.initControllerAdviceCache:574[0;39m - Looking for @ControllerAdvice: org.springframework.web.context.support.GenericWebApplicationContext@6b2ea799: startup date [Fri Oct 12 11:32:41 CEST 2018]; root of context hierarchy
11:32:48.984 [34mINFO [0;39m [36mo.s.w.s.m.m.a.RequestMappingHandlerAdapter.initControllerAdviceCache:574[0;39m - Looking for @ControllerAdvice: org.springframework.web.context.support.GenericWebApplicationContext@6b2ea799: startup date [Fri Oct 12 11:32:41 CEST 2018]; root of context hierarchy
11:32:49.033 [34mINFO [0;39m [36mo.s.w.s.m.m.a.ExceptionHandlerExceptionResolver.initExceptionHandlerAdviceCache:288[0;39m - Detected @ExceptionHandler methods in exceptionInfoHandler
11:32:49.214 [34mINFO [0;39m [36mo.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:444[0;39m - Executing SQL script from class path resource [db/initDB_hsql.sql]
11:32:49.227 [34mINFO [0;39m [36mo.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:510[0;39m - Executed SQL script from class path resource [db/initDB_hsql.sql] in 13 ms.
11:32:49.227 [34mINFO [0;39m [36mo.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:444[0;39m - Executing SQL script from class path resource [db/populateDB.sql]
11:32:49.237 [34mINFO [0;39m [36mo.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:510[0;39m - Executed SQL script from class path resource [db/populateDB.sql] in 9 ms.
11:32:49.382 [34mINFO [0;39m [36morg.springframework.mock.web.MockServletContext.log:438[0;39m - Initializing Spring FrameworkServlet ''
11:32:49.382 [34mINFO [0;39m [36morg.springframework.web.servlet.FrameworkServlet.initServletBean:494[0;39m - FrameworkServlet '': initialization started
11:32:49.456 [34mINFO [0;39m [36morg.springframework.web.servlet.FrameworkServlet.initServletBean:509[0;39m - FrameworkServlet '': initialization completed in 73 ms
11:32:49.699 [34mINFO [0;39m [36mo.s.test.context.transaction.TransactionContext.startTransaction:107[0;39m - Began transaction (1) for test context [DefaultTestContext@1c2cdc67 testClass = UserAdminRestControllerTest, testInstance = ru.javawebinar.graduation.controller.user.UserAdminRestControllerTest@4c28f97e, testMethod = testUpdateDuplicate@UserAdminRestControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@21d8da75 testClass = UserAdminRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@1e95f584]; rollback [true]
Hibernate: 
    /* select
        generatedAlias0 
    from
        User as generatedAlias0 
    where
        generatedAlias0.email=:param0 */ select
            user0_.id as id1_3_,
            user0_.name as name2_3_,
            user0_.email as email3_3_,
            user0_.enabled as enabled4_3_,
            user0_.password as password5_3_,
            user0_.registered as register6_3_ 
        from
            users user0_ 
        where
            user0_.email=?
Hibernate: 
    /* load collection ru.javawebinar.graduation.model.User.roles */ select
        roles0_.user_id as user_id1_2_0_,
        roles0_.role as role2_2_0_ 
    from
        user_roles roles0_ 
    where
        roles0_.user_id=?
11:32:50.732 [34mINFO [0;39m [36mr.j.g.controller.user.AbstractUserController.update:44[0;39m - update User{id=100000, email=admin@gmail.com, name=User, enabled=true, roles=[ROLE_USER]} with id=100000
Hibernate: 
    /* load ru.javawebinar.graduation.model.User */ select
        user0_.id as id1_3_0_,
        user0_.name as name2_3_0_,
        user0_.email as email3_3_0_,
        user0_.enabled as enabled4_3_0_,
        user0_.password as password5_3_0_,
        user0_.registered as register6_3_0_ 
    from
        users user0_ 
    where
        user0_.id=?
Hibernate: 
    /* load collection ru.javawebinar.graduation.model.User.roles */ select
        roles0_.user_id as user_id1_2_0_,
        roles0_.role as role2_2_0_ 
    from
        user_roles roles0_ 
    where
        roles0_.user_id=?
Hibernate: 
    /* update
        ru.javawebinar.graduation.model.User */ update
            users 
        set
            name=?,
            email=?,
            enabled=?,
            password=?,
            registered=? 
        where
            id=?
11:32:50.950 [31mWARN [0;39m [36morg.hibernate.engine.jdbc.spi.SqlExceptionHelper.logExceptions:137[0;39m - SQL Error: -104, SQLState: 23505
11:32:50.952 [1;31mERROR[0;39m [36morg.hibernate.engine.jdbc.spi.SqlExceptionHelper.logExceptions:142[0;39m - integrity constraint violation: unique constraint or index violation: USERS_UNIQUE_EMAIL_IDX
11:32:50.955 [1;31mERROR[0;39m [36morg.hibernate.internal.ExceptionMapperStandardImpl.mapManagedFlushFailure:39[0;39m - HHH000346: Error during managed flush [org.hibernate.exception.ConstraintViolationException: could not execute statement]
11:32:50.979 [31mWARN [0;39m [36mo.s.w.s.m.m.a.ExceptionHandlerExceptionResolver.doResolveHandlerMethodException:411[0;39m - Failed to invoke @ExceptionHandler method: public ru.javawebinar.graduation.util.exception.ErrorInfo ru.javawebinar.graduation.controller.ExceptionInfoHandler.conflict(javax.servlet.http.HttpServletRequest,org.springframework.dao.DataIntegrityViolationException)
org.springframework.context.NoSuchMessageException: No message found under code 'exception.user.duplicateEmail' for locale 'ru'.
	at org.springframework.context.support.AbstractMessageSource.getMessage(AbstractMessageSource.java:161)
	at ru.javawebinar.graduation.controller.MessageUtil.getMessage(MessageUtil.java:23)
	at ru.javawebinar.graduation.controller.MessageUtil.getMessage(MessageUtil.java:27)
	at ru.javawebinar.graduation.controller.ExceptionInfoHandler.conflict(ExceptionInfoHandler.java:68)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:209)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:136)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:102)
	at org.springframework.web.servlet.mvc.method.annotation.ExceptionHandlerExceptionResolver.doResolveHandlerMethodException(ExceptionHandlerExceptionResolver.java:400)
	at org.springframework.web.servlet.handler.AbstractHandlerMethodExceptionResolver.doResolveException(AbstractHandlerMethodExceptionResolver.java:61)
	at org.springframework.web.servlet.handler.AbstractHandlerExceptionResolver.resolveException(AbstractHandlerExceptionResolver.java:139)
	at org.springframework.web.servlet.DispatcherServlet.processHandlerException(DispatcherServlet.java:1255)
	at org.springframework.test.web.servlet.TestDispatcherServlet.processHandlerException(TestDispatcherServlet.java:133)
	at org.springframework.web.servlet.DispatcherServlet.processDispatchResult(DispatcherServlet.java:1062)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1008)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:925)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:974)
	at org.springframework.web.servlet.FrameworkServlet.doPut(FrameworkServlet.java:888)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:664)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:851)
	at org.springframework.test.web.servlet.TestDispatcherServlet.service(TestDispatcherServlet.java:71)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:742)
	at org.springframework.mock.web.MockFilterChain$ServletFilterProxy.doFilter(MockFilterChain.java:166)
	at org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:133)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:320)
	at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:127)
	at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:91)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:119)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:111)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:170)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.authentication.www.BasicAuthenticationFilter.doFilterInternal(BasicAuthenticationFilter.java:215)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:66)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:56)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:105)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:215)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:178)
	at org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:133)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:200)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:133)
	at org.springframework.test.web.servlet.MockMvc.perform(MockMvc.java:165)
	at ru.javawebinar.graduation.controller.user.UserAdminRestControllerTest.testUpdateDuplicate(UserAdminRestControllerTest.java:183)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.platform.commons.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:513)
	at org.junit.jupiter.engine.execution.ExecutableInvoker.invoke(ExecutableInvoker.java:115)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeTestMethod$6(TestMethodTestDescriptor.java:170)
	at org.junit.jupiter.engine.execution.ThrowableCollector.execute(ThrowableCollector.java:40)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeTestMethod(TestMethodTestDescriptor.java:166)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:113)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:58)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor$NodeExecutor.lambda$executeRecursively$3(HierarchicalTestExecutor.java:113)
	at org.junit.platform.engine.support.hierarchical.SingleTestExecutor.executeSafely(SingleTestExecutor.java:66)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor$NodeExecutor.executeRecursively(HierarchicalTestExecutor.java:108)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor$NodeExecutor.execute(HierarchicalTestExecutor.java:79)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor$NodeExecutor.lambda$executeRecursively$2(HierarchicalTestExecutor.java:121)
	at java.util.stream.ForEachOps$ForEachOp$OfRef.accept(ForEachOps.java:184)
	at java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:175)
	at java.util.Iterator.forEachRemaining(Iterator.java:116)
	at java.util.Spliterators$IteratorSpliterator.forEachRemaining(Spliterators.java:1801)
	at java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:481)
	at java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:471)
	at java.util.stream.ForEachOps$ForEachOp.evaluateSequential(ForEachOps.java:151)
	at java.util.stream.ForEachOps$ForEachOp$OfRef.evaluateSequential(ForEachOps.java:174)
	at java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)
	at java.util.stream.ReferencePipeline.forEach(ReferencePipeline.java:418)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor$NodeExecutor.lambda$executeRecursively$3(HierarchicalTestExecutor.java:121)
	at org.junit.platform.engine.support.hierarchical.SingleTestExecutor.executeSafely(SingleTestExecutor.java:66)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor$NodeExecutor.executeRecursively(HierarchicalTestExecutor.java:108)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor$NodeExecutor.execute(HierarchicalTestExecutor.java:79)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor$NodeExecutor.lambda$executeRecursively$2(HierarchicalTestExecutor.java:121)
	at java.util.stream.ForEachOps$ForEachOp$OfRef.accept(ForEachOps.java:184)
	at java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:175)
	at java.util.Iterator.forEachRemaining(Iterator.java:116)
	at java.util.Spliterators$IteratorSpliterator.forEachRemaining(Spliterators.java:1801)
	at java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:481)
	at java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:471)
	at java.util.stream.ForEachOps$ForEachOp.evaluateSequential(ForEachOps.java:151)
	at java.util.stream.ForEachOps$ForEachOp$OfRef.evaluateSequential(ForEachOps.java:174)
	at java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)
	at java.util.stream.ReferencePipeline.forEach(ReferencePipeline.java:418)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor$NodeExecutor.lambda$executeRecursively$3(HierarchicalTestExecutor.java:121)
	at org.junit.platform.engine.support.hierarchical.SingleTestExecutor.executeSafely(SingleTestExecutor.java:66)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor$NodeExecutor.executeRecursively(HierarchicalTestExecutor.java:108)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor$NodeExecutor.execute(HierarchicalTestExecutor.java:79)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:55)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:43)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:170)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:154)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:90)
	at org.junit.platform.surefire.provider.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:132)
	at org.junit.platform.surefire.provider.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:111)
	at org.apache.maven.surefire.booter.ForkedBooter.invokeProviderInSameClassLoader(ForkedBooter.java:383)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:344)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:125)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:417)
11:32:50.992 [34mINFO [0;39m [36mo.s.test.context.transaction.TransactionContext.endTransaction:139[0;39m - Rolled back transaction for test: [DefaultTestContext@1c2cdc67 testClass = UserAdminRestControllerTest, testInstance = ru.javawebinar.graduation.controller.user.UserAdminRestControllerTest@4c28f97e, testMethod = testUpdateDuplicate@UserAdminRestControllerTest, testException = org.springframework.web.util.NestedServletException: Request processing failed; nested exception is org.springframework.dao.DataIntegrityViolationException: could not execute statement; SQL [n/a]; constraint [null]; nested exception is org.hibernate.exception.ConstraintViolationException: could not execute statement, mergedContextConfiguration = [WebMergedContextConfiguration@21d8da75 testClass = UserAdminRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]
11:32:51.015 [34mINFO [0;39m [36morg.springframework.mock.web.MockServletContext.log:438[0;39m - Initializing Spring FrameworkServlet ''
11:32:51.016 [34mINFO [0;39m [36morg.springframework.web.servlet.FrameworkServlet.initServletBean:494[0;39m - FrameworkServlet '': initialization started
11:32:51.030 [34mINFO [0;39m [36morg.springframework.web.servlet.FrameworkServlet.initServletBean:509[0;39m - FrameworkServlet '': initialization completed in 8 ms
11:32:51.041 [34mINFO [0;39m [36mo.s.test.context.transaction.TransactionContext.startTransaction:107[0;39m - Began transaction (1) for test context [DefaultTestContext@1c2cdc67 testClass = UserAdminRestControllerTest, testInstance = ru.javawebinar.graduation.controller.user.UserAdminRestControllerTest@6212ea52, testMethod = testUpdateInvalid@UserAdminRestControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@21d8da75 testClass = UserAdminRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@1e95f584]; rollback [true]
Hibernate: 
    /* select
        generatedAlias0 
    from
        User as generatedAlias0 
    where
        generatedAlias0.email=:param0 */ select
            user0_.id as id1_3_,
            user0_.name as name2_3_,
            user0_.email as email3_3_,
            user0_.enabled as enabled4_3_,
            user0_.password as password5_3_,
            user0_.registered as register6_3_ 
        from
            users user0_ 
        where
            user0_.email=?
Hibernate: 
    /* load collection ru.javawebinar.graduation.model.User.roles */ select
        roles0_.user_id as user_id1_2_0_,
        roles0_.role as role2_2_0_ 
    from
        user_roles roles0_ 
    where
        roles0_.user_id=?
11:32:51.117 [31mWARN [0;39m [36mr.j.graduation.controller.ExceptionInfoHandler.logAndGetErrorInfo:108[0;39m - VALIDATION_ERROR at request  http://localhost/rest/admin/users/100000: org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument at index 0 in method: public void ru.javawebinar.graduation.controller.user.UserAdminRestController.update(ru.javawebinar.graduation.model.User,int), with 3 error(s): [Field error in object 'user' on field 'name': rejected value []; codes [NotBlank.user.name,NotBlank.name,NotBlank.java.lang.String,NotBlank]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [user.name,name]; arguments []; default message [name]]; default message [must not be blank]] [Field error in object 'user' on field 'password': rejected value [null]; codes [NotBlank.user.password,NotBlank.password,NotBlank.java.lang.String,NotBlank]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [user.password,password]; arguments []; default message [password]]; default message [must not be blank]] [Field error in object 'user' on field 'name': rejected value []; codes [Size.user.name,Size.name,Size.java.lang.String,Size]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [user.name,name]; arguments []; default message [name],100,2]; default message [size must be between 2 and 100]] 
11:32:51.118 [31mWARN [0;39m [36mo.s.w.s.m.m.a.ExceptionHandlerExceptionResolver.doResolveHandlerMethodException:411[0;39m - Failed to invoke @ExceptionHandler method: public ru.javawebinar.graduation.util.exception.ErrorInfo ru.javawebinar.graduation.controller.ExceptionInfoHandler.methodArgumentValidationError(javax.servlet.http.HttpServletRequest,org.springframework.web.bind.MethodArgumentNotValidException)
org.springframework.context.NoSuchMessageException: No message found under code 'error.validationError' for locale 'ru'.
	at org.springframework.context.support.AbstractMessageSource.getMessage(AbstractMessageSource.java:161)
	at ru.javawebinar.graduation.controller.MessageUtil.getMessage(MessageUtil.java:23)
	at ru.javawebinar.graduation.controller.MessageUtil.getMessage(MessageUtil.java:27)
	at ru.javawebinar.graduation.controller.ExceptionInfoHandler.logAndGetErrorInfo(ExceptionInfoHandler.java:111)
	at ru.javawebinar.graduation.controller.ExceptionInfoHandler.methodArgumentValidationError(ExceptionInfoHandler.java:81)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:209)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:136)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:102)
	at org.springframework.web.servlet.mvc.method.annotation.ExceptionHandlerExceptionResolver.doResolveHandlerMethodException(ExceptionHandlerExceptionResolver.java:404)
	at org.springframework.web.servlet.handler.AbstractHandlerMethodExceptionResolver.doResolveException(AbstractHandlerMethodExceptionResolver.java:61)
	at org.springframework.web.servlet.handler.AbstractHandlerExceptionResolver.resolveException(AbstractHandlerExceptionResolver.java:139)
	at org.springframework.web.servlet.DispatcherServlet.processHandlerException(DispatcherServlet.java:1255)
	at org.springframework.test.web.servlet.TestDispatcherServlet.processHandlerException(TestDispatcherServlet.java:133)
	at org.springframework.web.servlet.DispatcherServlet.processDispatchResult(DispatcherServlet.java:1062)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1008)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:925)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:974)
	at org.springframework.web.servlet.FrameworkServlet.doPut(FrameworkServlet.java:888)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:664)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:851)
	at org.springframework.test.web.servlet.TestDispatcherServlet.service(TestDispatcherServlet.java:71)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:742)
	at org.springframework.mock.web.MockFilterChain$ServletFilterProxy.doFilter(MockFilterChain.java:166)
	at org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:133)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:320)
	at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:127)
	at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:91)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:119)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:111)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:170)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.authentication.www.BasicAuthenticationFilter.doFilterInternal(BasicAuthenticationFilter.java:215)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:66)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:56)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:105)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:215)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:178)
	at org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:133)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:200)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:133)
	at org.springframework.test.web.servlet.MockMvc.perform(MockMvc.java:165)
	at ru.javawebinar.graduation.controller.user.UserAdminRestControllerTest.testUpdateInvalid(UserAdminRestControllerTest.java:168)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.platform.commons.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:513)
	at org.junit.jupiter.engine.execution.ExecutableInvoker.invoke(ExecutableInvoker.java:115)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeTestMethod$6(TestMethodTestDescriptor.java:170)
	at org.junit.jupiter.engine.execution.ThrowableCollector.execute(ThrowableCollector.java:40)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeTestMethod(TestMethodTestDescriptor.java:166)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:113)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:58)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor$NodeExecutor.lambda$executeRecursively$3(HierarchicalTestExecutor.java:113)
	at org.junit.platform.engine.support.hierarchical.SingleTestExecutor.executeSafely(SingleTestExecutor.java:66)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor$NodeExecutor.executeRecursively(HierarchicalTestExecutor.java:108)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor$NodeExecutor.execute(HierarchicalTestExecutor.java:79)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor$NodeExecutor.lambda$executeRecursively$2(HierarchicalTestExecutor.java:121)
	at java.util.stream.ForEachOps$ForEachOp$OfRef.accept(ForEachOps.java:184)
	at java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:175)
	at java.util.Iterator.forEachRemaining(Iterator.java:116)
	at java.util.Spliterators$IteratorSpliterator.forEachRemaining(Spliterators.java:1801)
	at java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:481)
	at java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:471)
	at java.util.stream.ForEachOps$ForEachOp.evaluateSequential(ForEachOps.java:151)
	at java.util.stream.ForEachOps$ForEachOp$OfRef.evaluateSequential(ForEachOps.java:174)
	at java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)
	at java.util.stream.ReferencePipeline.forEach(ReferencePipeline.java:418)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor$NodeExecutor.lambda$executeRecursively$3(HierarchicalTestExecutor.java:121)
	at org.junit.platform.engine.support.hierarchical.SingleTestExecutor.executeSafely(SingleTestExecutor.java:66)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor$NodeExecutor.executeRecursively(HierarchicalTestExecutor.java:108)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor$NodeExecutor.execute(HierarchicalTestExecutor.java:79)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor$NodeExecutor.lambda$executeRecursively$2(HierarchicalTestExecutor.java:121)
	at java.util.stream.ForEachOps$ForEachOp$OfRef.accept(ForEachOps.java:184)
	at java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:175)
	at java.util.Iterator.forEachRemaining(Iterator.java:116)
	at java.util.Spliterators$IteratorSpliterator.forEachRemaining(Spliterators.java:1801)
	at java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:481)
	at java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:471)
	at java.util.stream.ForEachOps$ForEachOp.evaluateSequential(ForEachOps.java:151)
	at java.util.stream.ForEachOps$ForEachOp$OfRef.evaluateSequential(ForEachOps.java:174)
	at java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)
	at java.util.stream.ReferencePipeline.forEach(ReferencePipeline.java:418)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor$NodeExecutor.lambda$executeRecursively$3(HierarchicalTestExecutor.java:121)
	at org.junit.platform.engine.support.hierarchical.SingleTestExecutor.executeSafely(SingleTestExecutor.java:66)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor$NodeExecutor.executeRecursively(HierarchicalTestExecutor.java:108)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor$NodeExecutor.execute(HierarchicalTestExecutor.java:79)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:55)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:43)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:170)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:154)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:90)
	at org.junit.platform.surefire.provider.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:132)
	at org.junit.platform.surefire.provider.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:111)
	at org.apache.maven.surefire.booter.ForkedBooter.invokeProviderInSameClassLoader(ForkedBooter.java:383)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:344)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:125)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:417)
11:32:51.141 [34mINFO [0;39m [36mo.s.test.context.transaction.TransactionContext.endTransaction:139[0;39m - Rolled back transaction for test: [DefaultTestContext@1c2cdc67 testClass = UserAdminRestControllerTest, testInstance = ru.javawebinar.graduation.controller.user.UserAdminRestControllerTest@6212ea52, testMethod = testUpdateInvalid@UserAdminRestControllerTest, testException = java.lang.AssertionError: Status expected:<422> but was:<400>, mergedContextConfiguration = [WebMergedContextConfiguration@21d8da75 testClass = UserAdminRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]
11:32:51.144 [34mINFO [0;39m [36morg.springframework.mock.web.MockServletContext.log:438[0;39m - Initializing Spring FrameworkServlet ''
11:32:51.144 [34mINFO [0;39m [36morg.springframework.web.servlet.FrameworkServlet.initServletBean:494[0;39m - FrameworkServlet '': initialization started
11:32:51.150 [34mINFO [0;39m [36morg.springframework.web.servlet.FrameworkServlet.initServletBean:509[0;39m - FrameworkServlet '': initialization completed in 4 ms
11:32:51.153 [34mINFO [0;39m [36mo.s.test.context.transaction.TransactionContext.startTransaction:107[0;39m - Began transaction (1) for test context [DefaultTestContext@1c2cdc67 testClass = UserAdminRestControllerTest, testInstance = ru.javawebinar.graduation.controller.user.UserAdminRestControllerTest@4040ccae, testMethod = testGetForbidden@UserAdminRestControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@21d8da75 testClass = UserAdminRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@1e95f584]; rollback [true]
Hibernate: 
    /* select
        generatedAlias0 
    from
        User as generatedAlias0 
    where
        generatedAlias0.email=:param0 */ select
            user0_.id as id1_3_,
            user0_.name as name2_3_,
            user0_.email as email3_3_,
            user0_.enabled as enabled4_3_,
            user0_.password as password5_3_,
            user0_.registered as register6_3_ 
        from
            users user0_ 
        where
            user0_.email=?
Hibernate: 
    /* load collection ru.javawebinar.graduation.model.User.roles */ select
        roles0_.user_id as user_id1_2_0_,
        roles0_.role as role2_2_0_ 
    from
        user_roles roles0_ 
    where
        roles0_.user_id=?
11:32:51.168 [34mINFO [0;39m [36mo.s.test.context.transaction.TransactionContext.endTransaction:139[0;39m - Rolled back transaction for test: [DefaultTestContext@1c2cdc67 testClass = UserAdminRestControllerTest, testInstance = ru.javawebinar.graduation.controller.user.UserAdminRestControllerTest@4040ccae, testMethod = testGetForbidden@UserAdminRestControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@21d8da75 testClass = UserAdminRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]
11:32:51.171 [34mINFO [0;39m [36morg.springframework.mock.web.MockServletContext.log:438[0;39m - Initializing Spring FrameworkServlet ''
11:32:51.171 [34mINFO [0;39m [36morg.springframework.web.servlet.FrameworkServlet.initServletBean:494[0;39m - FrameworkServlet '': initialization started
11:32:51.176 [34mINFO [0;39m [36morg.springframework.web.servlet.FrameworkServlet.initServletBean:509[0;39m - FrameworkServlet '': initialization completed in 4 ms
11:32:51.181 [34mINFO [0;39m [36mo.s.test.context.transaction.TransactionContext.startTransaction:107[0;39m - Began transaction (1) for test context [DefaultTestContext@1c2cdc67 testClass = UserAdminRestControllerTest, testInstance = ru.javawebinar.graduation.controller.user.UserAdminRestControllerTest@1be52113, testMethod = testDeleteNotFound@UserAdminRestControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@21d8da75 testClass = UserAdminRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@1e95f584]; rollback [true]
Hibernate: 
    /* select
        generatedAlias0 
    from
        User as generatedAlias0 
    where
        generatedAlias0.email=:param0 */ select
            user0_.id as id1_3_,
            user0_.name as name2_3_,
            user0_.email as email3_3_,
            user0_.enabled as enabled4_3_,
            user0_.password as password5_3_,
            user0_.registered as register6_3_ 
        from
            users user0_ 
        where
            user0_.email=?
Hibernate: 
    /* load collection ru.javawebinar.graduation.model.User.roles */ select
        roles0_.user_id as user_id1_2_0_,
        roles0_.role as role2_2_0_ 
    from
        user_roles roles0_ 
    where
        roles0_.user_id=?
11:32:51.213 [34mINFO [0;39m [36mr.j.g.controller.user.AbstractUserController.delete:39[0;39m - delete 100005
Hibernate: 
    /* DELETE 
    FROM
        User u 
    WHERE
        u.id=:id */ delete 
        from
            users 
        where
            id=?
11:32:51.251 [31mWARN [0;39m [36mo.s.w.s.m.m.a.ExceptionHandlerExceptionResolver.doResolveHandlerMethodException:411[0;39m - Failed to invoke @ExceptionHandler method: public org.springframework.http.ResponseEntity<ru.javawebinar.graduation.util.exception.ErrorInfo> ru.javawebinar.graduation.controller.ExceptionInfoHandler.applicationError(javax.servlet.http.HttpServletRequest,ru.javawebinar.graduation.util.exception.ApplicationException)
org.springframework.context.NoSuchMessageException: No message found under code 'exception.common.notFound' for locale 'ru'.
	at org.springframework.context.support.AbstractMessageSource.getMessage(AbstractMessageSource.java:161)
	at ru.javawebinar.graduation.controller.MessageUtil.getMessage(MessageUtil.java:23)
	at ru.javawebinar.graduation.controller.MessageUtil.getMessage(MessageUtil.java:27)
	at ru.javawebinar.graduation.controller.MessageUtil.getMessage(MessageUtil.java:31)
	at ru.javawebinar.graduation.controller.ExceptionInfoHandler.applicationError(ExceptionInfoHandler.java:54)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:209)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:136)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:102)
	at org.springframework.web.servlet.mvc.method.annotation.ExceptionHandlerExceptionResolver.doResolveHandlerMethodException(ExceptionHandlerExceptionResolver.java:404)
	at org.springframework.web.servlet.handler.AbstractHandlerMethodExceptionResolver.doResolveException(AbstractHandlerMethodExceptionResolver.java:61)
	at org.springframework.web.servlet.handler.AbstractHandlerExceptionResolver.resolveException(AbstractHandlerExceptionResolver.java:139)
	at org.springframework.web.servlet.DispatcherServlet.processHandlerException(DispatcherServlet.java:1255)
	at org.springframework.test.web.servlet.TestDispatcherServlet.processHandlerException(TestDispatcherServlet.java:133)
	at org.springframework.web.servlet.DispatcherServlet.processDispatchResult(DispatcherServlet.java:1062)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1008)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:925)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:974)
	at org.springframework.web.servlet.FrameworkServlet.doDelete(FrameworkServlet.java:899)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:667)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:851)
	at org.springframework.test.web.servlet.TestDispatcherServlet.service(TestDispatcherServlet.java:71)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:742)
	at org.springframework.mock.web.MockFilterChain$ServletFilterProxy.doFilter(MockFilterChain.java:166)
	at org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:133)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:320)
	at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:127)
	at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:91)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:119)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:111)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:170)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.authentication.www.BasicAuthenticationFilter.doFilterInternal(BasicAuthenticationFilter.java:215)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:66)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:56)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:105)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:215)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:178)
	at org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:133)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:200)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:133)
	at org.springframework.test.web.servlet.MockMvc.perform(MockMvc.java:165)
	at ru.javawebinar.graduation.controller.user.UserAdminRestControllerTest.testDeleteNotFound(UserAdminRestControllerTest.java:69)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.platform.commons.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:513)
	at org.junit.jupiter.engine.execution.ExecutableInvoker.invoke(ExecutableInvoker.java:115)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeTestMethod$6(TestMethodTestDescriptor.java:170)
	at org.junit.jupiter.engine.execution.ThrowableCollector.execute(ThrowableCollector.java:40)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeTestMethod(TestMethodTestDescriptor.java:166)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:113)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:58)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor$NodeExecutor.lambda$executeRecursively$3(HierarchicalTestExecutor.java:113)
	at org.junit.platform.engine.support.hierarchical.SingleTestExecutor.executeSafely(SingleTestExecutor.java:66)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor$NodeExecutor.executeRecursively(HierarchicalTestExecutor.java:108)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor$NodeExecutor.execute(HierarchicalTestExecutor.java:79)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor$NodeExecutor.lambda$executeRecursively$2(HierarchicalTestExecutor.java:121)
	at java.util.stream.ForEachOps$ForEachOp$OfRef.accept(ForEachOps.java:184)
	at java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:175)
	at java.util.Iterator.forEachRemaining(Iterator.java:116)
	at java.util.Spliterators$IteratorSpliterator.forEachRemaining(Spliterators.java:1801)
	at java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:481)
	at java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:471)
	at java.util.stream.ForEachOps$ForEachOp.evaluateSequential(ForEachOps.java:151)
	at java.util.stream.ForEachOps$ForEachOp$OfRef.evaluateSequential(ForEachOps.java:174)
	at java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)
	at java.util.stream.ReferencePipeline.forEach(ReferencePipeline.java:418)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor$NodeExecutor.lambda$executeRecursively$3(HierarchicalTestExecutor.java:121)
	at org.junit.platform.engine.support.hierarchical.SingleTestExecutor.executeSafely(SingleTestExecutor.java:66)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor$NodeExecutor.executeRecursively(HierarchicalTestExecutor.java:108)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor$NodeExecutor.execute(HierarchicalTestExecutor.java:79)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor$NodeExecutor.lambda$executeRecursively$2(HierarchicalTestExecutor.java:121)
	at java.util.stream.ForEachOps$ForEachOp$OfRef.accept(ForEachOps.java:184)
	at java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:175)
	at java.util.Iterator.forEachRemaining(Iterator.java:116)
	at java.util.Spliterators$IteratorSpliterator.forEachRemaining(Spliterators.java:1801)
	at java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:481)
	at java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:471)
	at java.util.stream.ForEachOps$ForEachOp.evaluateSequential(ForEachOps.java:151)
	at java.util.stream.ForEachOps$ForEachOp$OfRef.evaluateSequential(ForEachOps.java:174)
	at java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)
	at java.util.stream.ReferencePipeline.forEach(ReferencePipeline.java:418)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor$NodeExecutor.lambda$executeRecursively$3(HierarchicalTestExecutor.java:121)
	at org.junit.platform.engine.support.hierarchical.SingleTestExecutor.executeSafely(SingleTestExecutor.java:66)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor$NodeExecutor.executeRecursively(HierarchicalTestExecutor.java:108)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor$NodeExecutor.execute(HierarchicalTestExecutor.java:79)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:55)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:43)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:170)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:154)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:90)
	at org.junit.platform.surefire.provider.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:132)
	at org.junit.platform.surefire.provider.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:111)
	at org.apache.maven.surefire.booter.ForkedBooter.invokeProviderInSameClassLoader(ForkedBooter.java:383)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:344)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:125)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:417)
11:32:51.271 [31mWARN [0;39m [36mo.h.e.j.s.SqlExceptionHelper$StandardWarningHandler.logWarning:230[0;39m - SQL Warning Code: -1100, SQLState: 02000
11:32:51.272 [31mWARN [0;39m [36mo.h.e.j.s.SqlExceptionHelper$StandardWarningHandler.logWarning:231[0;39m - no data
11:32:51.273 [34mINFO [0;39m [36mo.s.test.context.transaction.TransactionContext.endTransaction:139[0;39m - Rolled back transaction for test: [DefaultTestContext@1c2cdc67 testClass = UserAdminRestControllerTest, testInstance = ru.javawebinar.graduation.controller.user.UserAdminRestControllerTest@1be52113, testMethod = testDeleteNotFound@UserAdminRestControllerTest, testException = org.springframework.web.util.NestedServletException: Request processing failed; nested exception is ru.javawebinar.graduation.util.exception.NotFoundException: type=DATA_NOT_FOUND, msgCode=exception.common.notFound, args=[id=100005], mergedContextConfiguration = [WebMergedContextConfiguration@21d8da75 testClass = UserAdminRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]
11:32:51.284 [34mINFO [0;39m [36morg.springframework.mock.web.MockServletContext.log:438[0;39m - Initializing Spring FrameworkServlet ''
11:32:51.286 [34mINFO [0;39m [36morg.springframework.web.servlet.FrameworkServlet.initServletBean:494[0;39m - FrameworkServlet '': initialization started
11:32:51.306 [34mINFO [0;39m [36morg.springframework.web.servlet.FrameworkServlet.initServletBean:509[0;39m - FrameworkServlet '': initialization completed in 19 ms
11:32:51.333 [34mINFO [0;39m [36mo.s.test.context.transaction.TransactionContext.startTransaction:107[0;39m - Began transaction (1) for test context [DefaultTestContext@1c2cdc67 testClass = UserAdminRestControllerTest, testInstance = ru.javawebinar.graduation.controller.user.UserAdminRestControllerTest@6b103db7, testMethod = testGet@UserAdminRestControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@21d8da75 testClass = UserAdminRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@1e95f584]; rollback [true]
Hibernate: 
    /* select
        generatedAlias0 
    from
        User as generatedAlias0 
    where
        generatedAlias0.email=:param0 */ select
            user0_.id as id1_3_,
            user0_.name as name2_3_,
            user0_.email as email3_3_,
            user0_.enabled as enabled4_3_,
            user0_.password as password5_3_,
            user0_.registered as register6_3_ 
        from
            users user0_ 
        where
            user0_.email=?
Hibernate: 
    /* load collection ru.javawebinar.graduation.model.User.roles */ select
        roles0_.user_id as user_id1_2_0_,
        roles0_.role as role2_2_0_ 
    from
        user_roles roles0_ 
    where
        roles0_.user_id=?
11:32:51.363 [34mINFO [0;39m [36mr.j.g.controller.user.AbstractUserController.get:28[0;39m - get 100001

MockHttpServletRequest:
      HTTP Method = GET
      Request URI = /rest/admin/users/100001
       Parameters = {}
          Headers = {Authorization=[Basic YWRtaW5AZ21haWwuY29tOmFkbWlu]}
             Body = null
    Session Attrs = {}

Handler:
             Type = ru.javawebinar.graduation.controller.user.UserAdminRestController
           Method = public ru.javawebinar.graduation.model.User ru.javawebinar.graduation.controller.user.UserAdminRestController.get(int)

Async:
    Async started = false
     Async result = null

Resolved Exception:
             Type = null

ModelAndView:
        View name = null
             View = null
            Model = null

FlashMap:
       Attributes = null

MockHttpServletResponse:
           Status = 200
    Error message = null
          Headers = {Content-Type=[application/json;charset=UTF-8], Cache-Control=[no-cache, no-store, max-age=0, must-revalidate], Pragma=[no-cache], Expires=[0], X-XSS-Protection=[1; mode=block], X-Frame-Options=[DENY], X-Content-Type-Options=[nosniff]}
     Content type = application/json;charset=UTF-8
             Body = {"id":100001,"name":"Admin","email":"admin@gmail.com","enabled":true,"registered":"2018-10-12T09:32:49.233+0000","roles":["ROLE_USER","ROLE_ADMIN"],"votes":null}
    Forwarded URL = null
   Redirected URL = null
          Cookies = []
11:32:51.445 [34mINFO [0;39m [36mo.s.test.context.transaction.TransactionContext.endTransaction:139[0;39m - Rolled back transaction for test: [DefaultTestContext@1c2cdc67 testClass = UserAdminRestControllerTest, testInstance = ru.javawebinar.graduation.controller.user.UserAdminRestControllerTest@6b103db7, testMethod = testGet@UserAdminRestControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@21d8da75 testClass = UserAdminRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]
11:32:51.448 [34mINFO [0;39m [36morg.springframework.mock.web.MockServletContext.log:438[0;39m - Initializing Spring FrameworkServlet ''
11:32:51.449 [34mINFO [0;39m [36morg.springframework.web.servlet.FrameworkServlet.initServletBean:494[0;39m - FrameworkServlet '': initialization started
11:32:51.456 [34mINFO [0;39m [36morg.springframework.web.servlet.FrameworkServlet.initServletBean:509[0;39m - FrameworkServlet '': initialization completed in 6 ms
11:32:51.461 [34mINFO [0;39m [36mo.s.test.context.transaction.TransactionContext.startTransaction:107[0;39m - Began transaction (1) for test context [DefaultTestContext@1c2cdc67 testClass = UserAdminRestControllerTest, testInstance = ru.javawebinar.graduation.controller.user.UserAdminRestControllerTest@2dd08ff1, testMethod = testGetNotFound@UserAdminRestControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@21d8da75 testClass = UserAdminRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@1e95f584]; rollback [true]
Hibernate: 
    /* select
        generatedAlias0 
    from
        User as generatedAlias0 
    where
        generatedAlias0.email=:param0 */ select
            user0_.id as id1_3_,
            user0_.name as name2_3_,
            user0_.email as email3_3_,
            user0_.enabled as enabled4_3_,
            user0_.password as password5_3_,
            user0_.registered as register6_3_ 
        from
            users user0_ 
        where
            user0_.email=?
Hibernate: 
    /* load collection ru.javawebinar.graduation.model.User.roles */ select
        roles0_.user_id as user_id1_2_0_,
        roles0_.role as role2_2_0_ 
    from
        user_roles roles0_ 
    where
        roles0_.user_id=?
11:32:51.489 [34mINFO [0;39m [36mr.j.g.controller.user.AbstractUserController.get:28[0;39m - get 1
Hibernate: 
    select
        user0_.id as id1_3_0_,
        user0_.name as name2_3_0_,
        user0_.email as email3_3_0_,
        user0_.enabled as enabled4_3_0_,
        user0_.password as password5_3_0_,
        user0_.registered as register6_3_0_,
        roles1_.user_id as user_id1_2_1_,
        roles1_.role as role2_2_1_ 
    from
        users user0_ 
    left outer join
        user_roles roles1_ 
            on user0_.id=roles1_.user_id 
    where
        user0_.id=?
11:32:51.498 [31mWARN [0;39m [36mo.s.w.s.m.m.a.ExceptionHandlerExceptionResolver.doResolveHandlerMethodException:411[0;39m - Failed to invoke @ExceptionHandler method: public org.springframework.http.ResponseEntity<ru.javawebinar.graduation.util.exception.ErrorInfo> ru.javawebinar.graduation.controller.ExceptionInfoHandler.applicationError(javax.servlet.http.HttpServletRequest,ru.javawebinar.graduation.util.exception.ApplicationException)
org.springframework.context.NoSuchMessageException: No message found under code 'exception.common.notFound' for locale 'ru'.
	at org.springframework.context.support.AbstractMessageSource.getMessage(AbstractMessageSource.java:161)
	at ru.javawebinar.graduation.controller.MessageUtil.getMessage(MessageUtil.java:23)
	at ru.javawebinar.graduation.controller.MessageUtil.getMessage(MessageUtil.java:27)
	at ru.javawebinar.graduation.controller.MessageUtil.getMessage(MessageUtil.java:31)
	at ru.javawebinar.graduation.controller.ExceptionInfoHandler.applicationError(ExceptionInfoHandler.java:54)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:209)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:136)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:102)
	at org.springframework.web.servlet.mvc.method.annotation.ExceptionHandlerExceptionResolver.doResolveHandlerMethodException(ExceptionHandlerExceptionResolver.java:404)
	at org.springframework.web.servlet.handler.AbstractHandlerMethodExceptionResolver.doResolveException(AbstractHandlerMethodExceptionResolver.java:61)
	at org.springframework.web.servlet.handler.AbstractHandlerExceptionResolver.resolveException(AbstractHandlerExceptionResolver.java:139)
	at org.springframework.web.servlet.DispatcherServlet.processHandlerException(DispatcherServlet.java:1255)
	at org.springframework.test.web.servlet.TestDispatcherServlet.processHandlerException(TestDispatcherServlet.java:133)
	at org.springframework.web.servlet.DispatcherServlet.processDispatchResult(DispatcherServlet.java:1062)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1008)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:925)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:974)
	at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:866)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:635)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:851)
	at org.springframework.test.web.servlet.TestDispatcherServlet.service(TestDispatcherServlet.java:71)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:742)
	at org.springframework.mock.web.MockFilterChain$ServletFilterProxy.doFilter(MockFilterChain.java:166)
	at org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:133)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:320)
	at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:127)
	at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:91)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:119)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:111)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:170)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.authentication.www.BasicAuthenticationFilter.doFilterInternal(BasicAuthenticationFilter.java:215)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:66)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:56)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:105)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:215)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:178)
	at org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:133)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:200)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:133)
	at org.springframework.test.web.servlet.MockMvc.perform(MockMvc.java:165)
	at ru.javawebinar.graduation.controller.user.UserAdminRestControllerTest.testGetNotFound(UserAdminRestControllerTest.java:43)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.platform.commons.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:513)
	at org.junit.jupiter.engine.execution.ExecutableInvoker.invoke(ExecutableInvoker.java:115)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeTestMethod$6(TestMethodTestDescriptor.java:170)
	at org.junit.jupiter.engine.execution.ThrowableCollector.execute(ThrowableCollector.java:40)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeTestMethod(TestMethodTestDescriptor.java:166)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:113)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:58)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor$NodeExecutor.lambda$executeRecursively$3(HierarchicalTestExecutor.java:113)
	at org.junit.platform.engine.support.hierarchical.SingleTestExecutor.executeSafely(SingleTestExecutor.java:66)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor$NodeExecutor.executeRecursively(HierarchicalTestExecutor.java:108)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor$NodeExecutor.execute(HierarchicalTestExecutor.java:79)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor$NodeExecutor.lambda$executeRecursively$2(HierarchicalTestExecutor.java:121)
	at java.util.stream.ForEachOps$ForEachOp$OfRef.accept(ForEachOps.java:184)
	at java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:175)
	at java.util.Iterator.forEachRemaining(Iterator.java:116)
	at java.util.Spliterators$IteratorSpliterator.forEachRemaining(Spliterators.java:1801)
	at java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:481)
	at java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:471)
	at java.util.stream.ForEachOps$ForEachOp.evaluateSequential(ForEachOps.java:151)
	at java.util.stream.ForEachOps$ForEachOp$OfRef.evaluateSequential(ForEachOps.java:174)
	at java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)
	at java.util.stream.ReferencePipeline.forEach(ReferencePipeline.java:418)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor$NodeExecutor.lambda$executeRecursively$3(HierarchicalTestExecutor.java:121)
	at org.junit.platform.engine.support.hierarchical.SingleTestExecutor.executeSafely(SingleTestExecutor.java:66)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor$NodeExecutor.executeRecursively(HierarchicalTestExecutor.java:108)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor$NodeExecutor.execute(HierarchicalTestExecutor.java:79)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor$NodeExecutor.lambda$executeRecursively$2(HierarchicalTestExecutor.java:121)
	at java.util.stream.ForEachOps$ForEachOp$OfRef.accept(ForEachOps.java:184)
	at java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:175)
	at java.util.Iterator.forEachRemaining(Iterator.java:116)
	at java.util.Spliterators$IteratorSpliterator.forEachRemaining(Spliterators.java:1801)
	at java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:481)
	at java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:471)
	at java.util.stream.ForEachOps$ForEachOp.evaluateSequential(ForEachOps.java:151)
	at java.util.stream.ForEachOps$ForEachOp$OfRef.evaluateSequential(ForEachOps.java:174)
	at java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)
	at java.util.stream.ReferencePipeline.forEach(ReferencePipeline.java:418)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor$NodeExecutor.lambda$executeRecursively$3(HierarchicalTestExecutor.java:121)
	at org.junit.platform.engine.support.hierarchical.SingleTestExecutor.executeSafely(SingleTestExecutor.java:66)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor$NodeExecutor.executeRecursively(HierarchicalTestExecutor.java:108)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor$NodeExecutor.execute(HierarchicalTestExecutor.java:79)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:55)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:43)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:170)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:154)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:90)
	at org.junit.platform.surefire.provider.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:132)
	at org.junit.platform.surefire.provider.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:111)
	at org.apache.maven.surefire.booter.ForkedBooter.invokeProviderInSameClassLoader(ForkedBooter.java:383)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:344)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:125)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:417)
11:32:51.507 [34mINFO [0;39m [36mo.s.test.context.transaction.TransactionContext.endTransaction:139[0;39m - Rolled back transaction for test: [DefaultTestContext@1c2cdc67 testClass = UserAdminRestControllerTest, testInstance = ru.javawebinar.graduation.controller.user.UserAdminRestControllerTest@2dd08ff1, testMethod = testGetNotFound@UserAdminRestControllerTest, testException = org.springframework.web.util.NestedServletException: Request processing failed; nested exception is ru.javawebinar.graduation.util.exception.NotFoundException: type=DATA_NOT_FOUND, msgCode=exception.common.notFound, args=[id=1], mergedContextConfiguration = [WebMergedContextConfiguration@21d8da75 testClass = UserAdminRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]
11:32:51.510 [34mINFO [0;39m [36morg.springframework.mock.web.MockServletContext.log:438[0;39m - Initializing Spring FrameworkServlet ''
11:32:51.511 [34mINFO [0;39m [36morg.springframework.web.servlet.FrameworkServlet.initServletBean:494[0;39m - FrameworkServlet '': initialization started
11:32:51.515 [34mINFO [0;39m [36morg.springframework.web.servlet.FrameworkServlet.initServletBean:509[0;39m - FrameworkServlet '': initialization completed in 4 ms
11:32:51.521 [34mINFO [0;39m [36mo.s.test.context.transaction.TransactionContext.startTransaction:107[0;39m - Began transaction (1) for test context [DefaultTestContext@1c2cdc67 testClass = UserAdminRestControllerTest, testInstance = ru.javawebinar.graduation.controller.user.UserAdminRestControllerTest@62c47480, testMethod = testCreateDuplicate@UserAdminRestControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@21d8da75 testClass = UserAdminRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@1e95f584]; rollback [true]
Hibernate: 
    /* select
        generatedAlias0 
    from
        User as generatedAlias0 
    where
        generatedAlias0.email=:param0 */ select
            user0_.id as id1_3_,
            user0_.name as name2_3_,
            user0_.email as email3_3_,
            user0_.enabled as enabled4_3_,
            user0_.password as password5_3_,
            user0_.registered as register6_3_ 
        from
            users user0_ 
        where
            user0_.email=?
Hibernate: 
    /* load collection ru.javawebinar.graduation.model.User.roles */ select
        roles0_.user_id as user_id1_2_0_,
        roles0_.role as role2_2_0_ 
    from
        user_roles roles0_ 
    where
        roles0_.user_id=?
11:32:51.547 [34mINFO [0;39m [36mr.j.g.controller.user.AbstractUserController.create:33[0;39m - create User{id=null, email=user@yandex.ru, name=New, enabled=true, roles=[ROLE_USER, ROLE_ADMIN]}
Hibernate: 
    call next value for global_seq
Hibernate: 
    /* insert ru.javawebinar.graduation.model.User
        */ insert 
        into
            users
            (name, email, enabled, password, registered, id) 
        values
            (?, ?, ?, ?, ?, ?)
11:32:51.729 [31mWARN [0;39m [36morg.hibernate.engine.jdbc.spi.SqlExceptionHelper.logExceptions:137[0;39m - SQL Error: -104, SQLState: 23505
11:32:51.734 [1;31mERROR[0;39m [36morg.hibernate.engine.jdbc.spi.SqlExceptionHelper.logExceptions:142[0;39m - integrity constraint violation: unique constraint or index violation: USERS_UNIQUE_EMAIL_IDX
11:32:51.739 [1;31mERROR[0;39m [36morg.hibernate.internal.ExceptionMapperStandardImpl.mapManagedFlushFailure:39[0;39m - HHH000346: Error during managed flush [org.hibernate.exception.ConstraintViolationException: could not execute statement]
11:32:51.742 [31mWARN [0;39m [36mo.s.w.s.m.m.a.ExceptionHandlerExceptionResolver.doResolveHandlerMethodException:411[0;39m - Failed to invoke @ExceptionHandler method: public ru.javawebinar.graduation.util.exception.ErrorInfo ru.javawebinar.graduation.controller.ExceptionInfoHandler.conflict(javax.servlet.http.HttpServletRequest,org.springframework.dao.DataIntegrityViolationException)
org.springframework.context.NoSuchMessageException: No message found under code 'exception.user.duplicateEmail' for locale 'ru'.
	at org.springframework.context.support.AbstractMessageSource.getMessage(AbstractMessageSource.java:161)
	at ru.javawebinar.graduation.controller.MessageUtil.getMessage(MessageUtil.java:23)
	at ru.javawebinar.graduation.controller.MessageUtil.getMessage(MessageUtil.java:27)
	at ru.javawebinar.graduation.controller.ExceptionInfoHandler.conflict(ExceptionInfoHandler.java:68)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:209)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:136)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:102)
	at org.springframework.web.servlet.mvc.method.annotation.ExceptionHandlerExceptionResolver.doResolveHandlerMethodException(ExceptionHandlerExceptionResolver.java:400)
	at org.springframework.web.servlet.handler.AbstractHandlerMethodExceptionResolver.doResolveException(AbstractHandlerMethodExceptionResolver.java:61)
	at org.springframework.web.servlet.handler.AbstractHandlerExceptionResolver.resolveException(AbstractHandlerExceptionResolver.java:139)
	at org.springframework.web.servlet.DispatcherServlet.processHandlerException(DispatcherServlet.java:1255)
	at org.springframework.test.web.servlet.TestDispatcherServlet.processHandlerException(TestDispatcherServlet.java:133)
	at org.springframework.web.servlet.DispatcherServlet.processDispatchResult(DispatcherServlet.java:1062)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1008)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:925)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:974)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:877)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:661)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:851)
	at org.springframework.test.web.servlet.TestDispatcherServlet.service(TestDispatcherServlet.java:71)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:742)
	at org.springframework.mock.web.MockFilterChain$ServletFilterProxy.doFilter(MockFilterChain.java:166)
	at org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:133)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:320)
	at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:127)
	at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:91)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:119)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:111)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:170)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.authentication.www.BasicAuthenticationFilter.doFilterInternal(BasicAuthenticationFilter.java:215)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:66)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:56)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:105)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:215)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:178)
	at org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:133)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:200)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:133)
	at org.springframework.test.web.servlet.MockMvc.perform(MockMvc.java:165)
	at ru.javawebinar.graduation.controller.user.UserAdminRestControllerTest.testCreateDuplicate(UserAdminRestControllerTest.java:197)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.platform.commons.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:513)
	at org.junit.jupiter.engine.execution.ExecutableInvoker.invoke(ExecutableInvoker.java:115)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeTestMethod$6(TestMethodTestDescriptor.java:170)
	at org.junit.jupiter.engine.execution.ThrowableCollector.execute(ThrowableCollector.java:40)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeTestMethod(TestMethodTestDescriptor.java:166)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:113)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:58)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor$NodeExecutor.lambda$executeRecursively$3(HierarchicalTestExecutor.java:113)
	at org.junit.platform.engine.support.hierarchical.SingleTestExecutor.executeSafely(SingleTestExecutor.java:66)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor$NodeExecutor.executeRecursively(HierarchicalTestExecutor.java:108)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor$NodeExecutor.execute(HierarchicalTestExecutor.java:79)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor$NodeExecutor.lambda$executeRecursively$2(HierarchicalTestExecutor.java:121)
	at java.util.stream.ForEachOps$ForEachOp$OfRef.accept(ForEachOps.java:184)
	at java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:175)
	at java.util.Iterator.forEachRemaining(Iterator.java:116)
	at java.util.Spliterators$IteratorSpliterator.forEachRemaining(Spliterators.java:1801)
	at java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:481)
	at java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:471)
	at java.util.stream.ForEachOps$ForEachOp.evaluateSequential(ForEachOps.java:151)
	at java.util.stream.ForEachOps$ForEachOp$OfRef.evaluateSequential(ForEachOps.java:174)
	at java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)
	at java.util.stream.ReferencePipeline.forEach(ReferencePipeline.java:418)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor$NodeExecutor.lambda$executeRecursively$3(HierarchicalTestExecutor.java:121)
	at org.junit.platform.engine.support.hierarchical.SingleTestExecutor.executeSafely(SingleTestExecutor.java:66)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor$NodeExecutor.executeRecursively(HierarchicalTestExecutor.java:108)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor$NodeExecutor.execute(HierarchicalTestExecutor.java:79)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor$NodeExecutor.lambda$executeRecursively$2(HierarchicalTestExecutor.java:121)
	at java.util.stream.ForEachOps$ForEachOp$OfRef.accept(ForEachOps.java:184)
	at java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:175)
	at java.util.Iterator.forEachRemaining(Iterator.java:116)
	at java.util.Spliterators$IteratorSpliterator.forEachRemaining(Spliterators.java:1801)
	at java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:481)
	at java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:471)
	at java.util.stream.ForEachOps$ForEachOp.evaluateSequential(ForEachOps.java:151)
	at java.util.stream.ForEachOps$ForEachOp$OfRef.evaluateSequential(ForEachOps.java:174)
	at java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)
	at java.util.stream.ReferencePipeline.forEach(ReferencePipeline.java:418)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor$NodeExecutor.lambda$executeRecursively$3(HierarchicalTestExecutor.java:121)
	at org.junit.platform.engine.support.hierarchical.SingleTestExecutor.executeSafely(SingleTestExecutor.java:66)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor$NodeExecutor.executeRecursively(HierarchicalTestExecutor.java:108)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor$NodeExecutor.execute(HierarchicalTestExecutor.java:79)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:55)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:43)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:170)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:154)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:90)
	at org.junit.platform.surefire.provider.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:132)
	at org.junit.platform.surefire.provider.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:111)
	at org.apache.maven.surefire.booter.ForkedBooter.invokeProviderInSameClassLoader(ForkedBooter.java:383)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:344)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:125)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:417)
11:32:51.764 [34mINFO [0;39m [36mo.s.test.context.transaction.TransactionContext.endTransaction:139[0;39m - Rolled back transaction for test: [DefaultTestContext@1c2cdc67 testClass = UserAdminRestControllerTest, testInstance = ru.javawebinar.graduation.controller.user.UserAdminRestControllerTest@62c47480, testMethod = testCreateDuplicate@UserAdminRestControllerTest, testException = org.springframework.web.util.NestedServletException: Request processing failed; nested exception is org.springframework.dao.DataIntegrityViolationException: could not execute statement; SQL [n/a]; constraint [null]; nested exception is org.hibernate.exception.ConstraintViolationException: could not execute statement, mergedContextConfiguration = [WebMergedContextConfiguration@21d8da75 testClass = UserAdminRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]
11:32:51.769 [34mINFO [0;39m [36morg.springframework.mock.web.MockServletContext.log:438[0;39m - Initializing Spring FrameworkServlet ''
11:32:51.770 [34mINFO [0;39m [36morg.springframework.web.servlet.FrameworkServlet.initServletBean:494[0;39m - FrameworkServlet '': initialization started
11:32:51.775 [34mINFO [0;39m [36morg.springframework.web.servlet.FrameworkServlet.initServletBean:509[0;39m - FrameworkServlet '': initialization completed in 5 ms
11:32:51.789 [34mINFO [0;39m [36mo.s.test.context.transaction.TransactionContext.startTransaction:107[0;39m - Began transaction (1) for test context [DefaultTestContext@1c2cdc67 testClass = UserAdminRestControllerTest, testInstance = ru.javawebinar.graduation.controller.user.UserAdminRestControllerTest@40fcaae7, testMethod = testUpdateHtmlUnsafe@UserAdminRestControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@21d8da75 testClass = UserAdminRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@1e95f584]; rollback [true]
Hibernate: 
    /* select
        generatedAlias0 
    from
        User as generatedAlias0 
    where
        generatedAlias0.email=:param0 */ select
            user0_.id as id1_3_,
            user0_.name as name2_3_,
            user0_.email as email3_3_,
            user0_.enabled as enabled4_3_,
            user0_.password as password5_3_,
            user0_.registered as register6_3_ 
        from
            users user0_ 
        where
            user0_.email=?
Hibernate: 
    /* load collection ru.javawebinar.graduation.model.User.roles */ select
        roles0_.user_id as user_id1_2_0_,
        roles0_.role as role2_2_0_ 
    from
        user_roles roles0_ 
    where
        roles0_.user_id=?
11:32:51.831 [31mWARN [0;39m [36mr.j.graduation.controller.ExceptionInfoHandler.logAndGetErrorInfo:108[0;39m - VALIDATION_ERROR at request  http://localhost/rest/admin/users/100000: org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument at index 0 in method: public void ru.javawebinar.graduation.controller.user.UserAdminRestController.update(ru.javawebinar.graduation.model.User,int), with 2 error(s): [Field error in object 'user' on field 'password': rejected value [null]; codes [NotBlank.user.password,NotBlank.password,NotBlank.java.lang.String,NotBlank]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [user.password,password]; arguments []; default message [password]]; default message [must not be blank]] [Field error in object 'user' on field 'email': rejected value [<script>alert(123)</script>]; codes [Email.user.email,Email.email,Email.java.lang.String,Email]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [user.email,email]; arguments []; default message [email],[Ljavax.validation.constraints.Pattern$Flag;@65930e02,org.springframework.validation.beanvalidation.SpringValidatorAdapter$ResolvableAttribute@85c3522]; default message [must be a well-formed email address]] 
11:32:51.833 [31mWARN [0;39m [36mo.s.w.s.m.m.a.ExceptionHandlerExceptionResolver.doResolveHandlerMethodException:411[0;39m - Failed to invoke @ExceptionHandler method: public ru.javawebinar.graduation.util.exception.ErrorInfo ru.javawebinar.graduation.controller.ExceptionInfoHandler.methodArgumentValidationError(javax.servlet.http.HttpServletRequest,org.springframework.web.bind.MethodArgumentNotValidException)
org.springframework.context.NoSuchMessageException: No message found under code 'error.validationError' for locale 'ru'.
	at org.springframework.context.support.AbstractMessageSource.getMessage(AbstractMessageSource.java:161)
	at ru.javawebinar.graduation.controller.MessageUtil.getMessage(MessageUtil.java:23)
	at ru.javawebinar.graduation.controller.MessageUtil.getMessage(MessageUtil.java:27)
	at ru.javawebinar.graduation.controller.ExceptionInfoHandler.logAndGetErrorInfo(ExceptionInfoHandler.java:111)
	at ru.javawebinar.graduation.controller.ExceptionInfoHandler.methodArgumentValidationError(ExceptionInfoHandler.java:81)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:209)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:136)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:102)
	at org.springframework.web.servlet.mvc.method.annotation.ExceptionHandlerExceptionResolver.doResolveHandlerMethodException(ExceptionHandlerExceptionResolver.java:404)
	at org.springframework.web.servlet.handler.AbstractHandlerMethodExceptionResolver.doResolveException(AbstractHandlerMethodExceptionResolver.java:61)
	at org.springframework.web.servlet.handler.AbstractHandlerExceptionResolver.resolveException(AbstractHandlerExceptionResolver.java:139)
	at org.springframework.web.servlet.DispatcherServlet.processHandlerException(DispatcherServlet.java:1255)
	at org.springframework.test.web.servlet.TestDispatcherServlet.processHandlerException(TestDispatcherServlet.java:133)
	at org.springframework.web.servlet.DispatcherServlet.processDispatchResult(DispatcherServlet.java:1062)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1008)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:925)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:974)
	at org.springframework.web.servlet.FrameworkServlet.doPut(FrameworkServlet.java:888)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:664)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:851)
	at org.springframework.test.web.servlet.TestDispatcherServlet.service(TestDispatcherServlet.java:71)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:742)
	at org.springframework.mock.web.MockFilterChain$ServletFilterProxy.doFilter(MockFilterChain.java:166)
	at org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:133)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:320)
	at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:127)
	at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:91)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:119)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:111)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:170)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.authentication.www.BasicAuthenticationFilter.doFilterInternal(BasicAuthenticationFilter.java:215)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:66)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:56)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:105)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:215)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:178)
	at org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:133)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:200)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:133)
	at org.springframework.test.web.servlet.MockMvc.perform(MockMvc.java:165)
	at ru.javawebinar.graduation.controller.user.UserAdminRestControllerTest.testUpdateHtmlUnsafe(UserAdminRestControllerTest.java:142)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.platform.commons.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:513)
	at org.junit.jupiter.engine.execution.ExecutableInvoker.invoke(ExecutableInvoker.java:115)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeTestMethod$6(TestMethodTestDescriptor.java:170)
	at org.junit.jupiter.engine.execution.ThrowableCollector.execute(ThrowableCollector.java:40)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeTestMethod(TestMethodTestDescriptor.java:166)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:113)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:58)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor$NodeExecutor.lambda$executeRecursively$3(HierarchicalTestExecutor.java:113)
	at org.junit.platform.engine.support.hierarchical.SingleTestExecutor.executeSafely(SingleTestExecutor.java:66)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor$NodeExecutor.executeRecursively(HierarchicalTestExecutor.java:108)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor$NodeExecutor.execute(HierarchicalTestExecutor.java:79)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor$NodeExecutor.lambda$executeRecursively$2(HierarchicalTestExecutor.java:121)
	at java.util.stream.ForEachOps$ForEachOp$OfRef.accept(ForEachOps.java:184)
	at java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:175)
	at java.util.Iterator.forEachRemaining(Iterator.java:116)
	at java.util.Spliterators$IteratorSpliterator.forEachRemaining(Spliterators.java:1801)
	at java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:481)
	at java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:471)
	at java.util.stream.ForEachOps$ForEachOp.evaluateSequential(ForEachOps.java:151)
	at java.util.stream.ForEachOps$ForEachOp$OfRef.evaluateSequential(ForEachOps.java:174)
	at java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)
	at java.util.stream.ReferencePipeline.forEach(ReferencePipeline.java:418)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor$NodeExecutor.lambda$executeRecursively$3(HierarchicalTestExecutor.java:121)
	at org.junit.platform.engine.support.hierarchical.SingleTestExecutor.executeSafely(SingleTestExecutor.java:66)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor$NodeExecutor.executeRecursively(HierarchicalTestExecutor.java:108)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor$NodeExecutor.execute(HierarchicalTestExecutor.java:79)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor$NodeExecutor.lambda$executeRecursively$2(HierarchicalTestExecutor.java:121)
	at java.util.stream.ForEachOps$ForEachOp$OfRef.accept(ForEachOps.java:184)
	at java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:175)
	at java.util.Iterator.forEachRemaining(Iterator.java:116)
	at java.util.Spliterators$IteratorSpliterator.forEachRemaining(Spliterators.java:1801)
	at java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:481)
	at java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:471)
	at java.util.stream.ForEachOps$ForEachOp.evaluateSequential(ForEachOps.java:151)
	at java.util.stream.ForEachOps$ForEachOp$OfRef.evaluateSequential(ForEachOps.java:174)
	at java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)
	at java.util.stream.ReferencePipeline.forEach(ReferencePipeline.java:418)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor$NodeExecutor.lambda$executeRecursively$3(HierarchicalTestExecutor.java:121)
	at org.junit.platform.engine.support.hierarchical.SingleTestExecutor.executeSafely(SingleTestExecutor.java:66)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor$NodeExecutor.executeRecursively(HierarchicalTestExecutor.java:108)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor$NodeExecutor.execute(HierarchicalTestExecutor.java:79)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:55)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:43)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:170)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:154)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:90)
	at org.junit.platform.surefire.provider.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:132)
	at org.junit.platform.surefire.provider.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:111)
	at org.apache.maven.surefire.booter.ForkedBooter.invokeProviderInSameClassLoader(ForkedBooter.java:383)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:344)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:125)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:417)

MockHttpServletRequest:
      HTTP Method = PUT
      Request URI = /rest/admin/users/100000
       Parameters = {}
          Headers = {Content-Type=[application/json;charset=UTF-8], Authorization=[Basic YWRtaW5AZ21haWwuY29tOmFkbWlu]}
             Body = {"id":100000,"name":"Updated","email":"<script>alert(123)</script>","enabled":true,"registered":"2018-10-12T09:32:51.798+0000","roles":["ROLE_USER","ROLE_ADMIN"]}
    Session Attrs = {}

Handler:
             Type = ru.javawebinar.graduation.controller.user.UserAdminRestController
           Method = public void ru.javawebinar.graduation.controller.user.UserAdminRestController.update(ru.javawebinar.graduation.model.User,int)

Async:
    Async started = false
     Async result = null

Resolved Exception:
             Type = org.springframework.web.bind.MethodArgumentNotValidException

ModelAndView:
        View name = null
             View = null
            Model = null

FlashMap:
       Attributes = null

MockHttpServletResponse:
           Status = 400
    Error message = null
          Headers = {Cache-Control=[no-cache, no-store, max-age=0, must-revalidate], Pragma=[no-cache], Expires=[0], X-XSS-Protection=[1; mode=block], X-Frame-Options=[DENY], X-Content-Type-Options=[nosniff]}
     Content type = null
             Body = 
    Forwarded URL = null
   Redirected URL = null
          Cookies = []
11:32:51.855 [34mINFO [0;39m [36mo.s.test.context.transaction.TransactionContext.endTransaction:139[0;39m - Rolled back transaction for test: [DefaultTestContext@1c2cdc67 testClass = UserAdminRestControllerTest, testInstance = ru.javawebinar.graduation.controller.user.UserAdminRestControllerTest@40fcaae7, testMethod = testUpdateHtmlUnsafe@UserAdminRestControllerTest, testException = java.lang.AssertionError: Status expected:<422> but was:<400>, mergedContextConfiguration = [WebMergedContextConfiguration@21d8da75 testClass = UserAdminRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]
11:32:51.865 [34mINFO [0;39m [36morg.springframework.mock.web.MockServletContext.log:438[0;39m - Initializing Spring FrameworkServlet ''
11:32:51.866 [34mINFO [0;39m [36morg.springframework.web.servlet.FrameworkServlet.initServletBean:494[0;39m - FrameworkServlet '': initialization started
11:32:51.874 [34mINFO [0;39m [36morg.springframework.web.servlet.FrameworkServlet.initServletBean:509[0;39m - FrameworkServlet '': initialization completed in 6 ms
11:32:51.879 [34mINFO [0;39m [36mo.s.test.context.transaction.TransactionContext.startTransaction:107[0;39m - Began transaction (1) for test context [DefaultTestContext@1c2cdc67 testClass = UserAdminRestControllerTest, testInstance = ru.javawebinar.graduation.controller.user.UserAdminRestControllerTest@6fd97fd1, testMethod = testCreateWithIllegalRequestData@UserAdminRestControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@21d8da75 testClass = UserAdminRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@1e95f584]; rollback [true]
Hibernate: 
    /* select
        generatedAlias0 
    from
        User as generatedAlias0 
    where
        generatedAlias0.email=:param0 */ select
            user0_.id as id1_3_,
            user0_.name as name2_3_,
            user0_.email as email3_3_,
            user0_.enabled as enabled4_3_,
            user0_.password as password5_3_,
            user0_.registered as register6_3_ 
        from
            users user0_ 
        where
            user0_.email=?
Hibernate: 
    /* load collection ru.javawebinar.graduation.model.User.roles */ select
        roles0_.user_id as user_id1_2_0_,
        roles0_.role as role2_2_0_ 
    from
        user_roles roles0_ 
    where
        roles0_.user_id=?
11:32:51.915 [34mINFO [0;39m [36mr.j.g.controller.user.AbstractUserController.create:33[0;39m - create User{id=100000, email=user@yandex.ru, name=User, enabled=true, roles=[ROLE_USER]}
11:32:51.917 [31mWARN [0;39m [36mr.j.graduation.controller.ExceptionInfoHandler.logAndGetErrorInfo:108[0;39m - VALIDATION_ERROR at request  http://localhost/rest/admin/users/: ru.javawebinar.graduation.util.exception.IllegalRequestDataException: User{id=100000, email=user@yandex.ru, name=User, enabled=true, roles=[ROLE_USER]} must be new (id=null)
11:32:51.918 [31mWARN [0;39m [36mo.s.w.s.m.m.a.ExceptionHandlerExceptionResolver.doResolveHandlerMethodException:411[0;39m - Failed to invoke @ExceptionHandler method: public ru.javawebinar.graduation.util.exception.ErrorInfo ru.javawebinar.graduation.controller.ExceptionInfoHandler.illegalRequestDataError(javax.servlet.http.HttpServletRequest,java.lang.Exception)
org.springframework.context.NoSuchMessageException: No message found under code 'error.validationError' for locale 'ru'.
	at org.springframework.context.support.AbstractMessageSource.getMessage(AbstractMessageSource.java:161)
	at ru.javawebinar.graduation.controller.MessageUtil.getMessage(MessageUtil.java:23)
	at ru.javawebinar.graduation.controller.MessageUtil.getMessage(MessageUtil.java:27)
	at ru.javawebinar.graduation.controller.ExceptionInfoHandler.logAndGetErrorInfo(ExceptionInfoHandler.java:111)
	at ru.javawebinar.graduation.controller.ExceptionInfoHandler.illegalRequestDataError(ExceptionInfoHandler.java:94)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:209)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:136)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:102)
	at org.springframework.web.servlet.mvc.method.annotation.ExceptionHandlerExceptionResolver.doResolveHandlerMethodException(ExceptionHandlerExceptionResolver.java:404)
	at org.springframework.web.servlet.handler.AbstractHandlerMethodExceptionResolver.doResolveException(AbstractHandlerMethodExceptionResolver.java:61)
	at org.springframework.web.servlet.handler.AbstractHandlerExceptionResolver.resolveException(AbstractHandlerExceptionResolver.java:139)
	at org.springframework.web.servlet.DispatcherServlet.processHandlerException(DispatcherServlet.java:1255)
	at org.springframework.test.web.servlet.TestDispatcherServlet.processHandlerException(TestDispatcherServlet.java:133)
	at org.springframework.web.servlet.DispatcherServlet.processDispatchResult(DispatcherServlet.java:1062)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1008)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:925)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:974)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:877)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:661)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:851)
	at org.springframework.test.web.servlet.TestDispatcherServlet.service(TestDispatcherServlet.java:71)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:742)
	at org.springframework.mock.web.MockFilterChain$ServletFilterProxy.doFilter(MockFilterChain.java:166)
	at org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:133)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:320)
	at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:127)
	at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:91)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:119)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:111)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:170)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.authentication.www.BasicAuthenticationFilter.doFilterInternal(BasicAuthenticationFilter.java:215)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:66)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:56)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:105)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:215)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:178)
	at org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:133)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:200)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:133)
	at org.springframework.test.web.servlet.MockMvc.perform(MockMvc.java:165)
	at ru.javawebinar.graduation.controller.user.UserAdminRestControllerTest.testCreateWithIllegalRequestData(UserAdminRestControllerTest.java:121)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.platform.commons.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:513)
	at org.junit.jupiter.engine.execution.ExecutableInvoker.invoke(ExecutableInvoker.java:115)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeTestMethod$6(TestMethodTestDescriptor.java:170)
	at org.junit.jupiter.engine.execution.ThrowableCollector.execute(ThrowableCollector.java:40)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeTestMethod(TestMethodTestDescriptor.java:166)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:113)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:58)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor$NodeExecutor.lambda$executeRecursively$3(HierarchicalTestExecutor.java:113)
	at org.junit.platform.engine.support.hierarchical.SingleTestExecutor.executeSafely(SingleTestExecutor.java:66)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor$NodeExecutor.executeRecursively(HierarchicalTestExecutor.java:108)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor$NodeExecutor.execute(HierarchicalTestExecutor.java:79)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor$NodeExecutor.lambda$executeRecursively$2(HierarchicalTestExecutor.java:121)
	at java.util.stream.ForEachOps$ForEachOp$OfRef.accept(ForEachOps.java:184)
	at java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:175)
	at java.util.Iterator.forEachRemaining(Iterator.java:116)
	at java.util.Spliterators$IteratorSpliterator.forEachRemaining(Spliterators.java:1801)
	at java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:481)
	at java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:471)
	at java.util.stream.ForEachOps$ForEachOp.evaluateSequential(ForEachOps.java:151)
	at java.util.stream.ForEachOps$ForEachOp$OfRef.evaluateSequential(ForEachOps.java:174)
	at java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)
	at java.util.stream.ReferencePipeline.forEach(ReferencePipeline.java:418)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor$NodeExecutor.lambda$executeRecursively$3(HierarchicalTestExecutor.java:121)
	at org.junit.platform.engine.support.hierarchical.SingleTestExecutor.executeSafely(SingleTestExecutor.java:66)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor$NodeExecutor.executeRecursively(HierarchicalTestExecutor.java:108)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor$NodeExecutor.execute(HierarchicalTestExecutor.java:79)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor$NodeExecutor.lambda$executeRecursively$2(HierarchicalTestExecutor.java:121)
	at java.util.stream.ForEachOps$ForEachOp$OfRef.accept(ForEachOps.java:184)
	at java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:175)
	at java.util.Iterator.forEachRemaining(Iterator.java:116)
	at java.util.Spliterators$IteratorSpliterator.forEachRemaining(Spliterators.java:1801)
	at java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:481)
	at java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:471)
	at java.util.stream.ForEachOps$ForEachOp.evaluateSequential(ForEachOps.java:151)
	at java.util.stream.ForEachOps$ForEachOp$OfRef.evaluateSequential(ForEachOps.java:174)
	at java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)
	at java.util.stream.ReferencePipeline.forEach(ReferencePipeline.java:418)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor$NodeExecutor.lambda$executeRecursively$3(HierarchicalTestExecutor.java:121)
	at org.junit.platform.engine.support.hierarchical.SingleTestExecutor.executeSafely(SingleTestExecutor.java:66)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor$NodeExecutor.executeRecursively(HierarchicalTestExecutor.java:108)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor$NodeExecutor.execute(HierarchicalTestExecutor.java:79)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:55)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:43)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:170)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:154)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:90)
	at org.junit.platform.surefire.provider.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:132)
	at org.junit.platform.surefire.provider.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:111)
	at org.apache.maven.surefire.booter.ForkedBooter.invokeProviderInSameClassLoader(ForkedBooter.java:383)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:344)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:125)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:417)
11:32:51.941 [34mINFO [0;39m [36mo.s.test.context.transaction.TransactionContext.endTransaction:139[0;39m - Rolled back transaction for test: [DefaultTestContext@1c2cdc67 testClass = UserAdminRestControllerTest, testInstance = ru.javawebinar.graduation.controller.user.UserAdminRestControllerTest@6fd97fd1, testMethod = testCreateWithIllegalRequestData@UserAdminRestControllerTest, testException = org.springframework.web.util.NestedServletException: Request processing failed; nested exception is ru.javawebinar.graduation.util.exception.IllegalRequestDataException: User{id=100000, email=user@yandex.ru, name=User, enabled=true, roles=[ROLE_USER]} must be new (id=null), mergedContextConfiguration = [WebMergedContextConfiguration@21d8da75 testClass = UserAdminRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]
11:32:51.945 [34mINFO [0;39m [36morg.springframework.mock.web.MockServletContext.log:438[0;39m - Initializing Spring FrameworkServlet ''
11:32:51.946 [34mINFO [0;39m [36morg.springframework.web.servlet.FrameworkServlet.initServletBean:494[0;39m - FrameworkServlet '': initialization started
11:32:51.955 [34mINFO [0;39m [36morg.springframework.web.servlet.FrameworkServlet.initServletBean:509[0;39m - FrameworkServlet '': initialization completed in 9 ms
11:32:51.960 [34mINFO [0;39m [36mo.s.test.context.transaction.TransactionContext.startTransaction:107[0;39m - Began transaction (1) for test context [DefaultTestContext@1c2cdc67 testClass = UserAdminRestControllerTest, testInstance = ru.javawebinar.graduation.controller.user.UserAdminRestControllerTest@5a58db42, testMethod = testGetByEmail@UserAdminRestControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@21d8da75 testClass = UserAdminRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@1e95f584]; rollback [true]
Hibernate: 
    /* select
        generatedAlias0 
    from
        User as generatedAlias0 
    where
        generatedAlias0.email=:param0 */ select
            user0_.id as id1_3_,
            user0_.name as name2_3_,
            user0_.email as email3_3_,
            user0_.enabled as enabled4_3_,
            user0_.password as password5_3_,
            user0_.registered as register6_3_ 
        from
            users user0_ 
        where
            user0_.email=?
Hibernate: 
    /* load collection ru.javawebinar.graduation.model.User.roles */ select
        roles0_.user_id as user_id1_2_0_,
        roles0_.role as role2_2_0_ 
    from
        user_roles roles0_ 
    where
        roles0_.user_id=?
11:32:51.979 [34mINFO [0;39m [36mr.j.g.controller.user.AbstractUserController.getByMail:57[0;39m - getByEmail admin@gmail.com
Hibernate: 
    /* select
        generatedAlias0 
    from
        User as generatedAlias0 
    where
        generatedAlias0.email=:param0 */ select
            user0_.id as id1_3_,
            user0_.name as name2_3_,
            user0_.email as email3_3_,
            user0_.enabled as enabled4_3_,
            user0_.password as password5_3_,
            user0_.registered as register6_3_ 
        from
            users user0_ 
        where
            user0_.email=?
11:32:51.987 [34mINFO [0;39m [36mo.s.test.context.transaction.TransactionContext.endTransaction:139[0;39m - Rolled back transaction for test: [DefaultTestContext@1c2cdc67 testClass = UserAdminRestControllerTest, testInstance = ru.javawebinar.graduation.controller.user.UserAdminRestControllerTest@5a58db42, testMethod = testGetByEmail@UserAdminRestControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@21d8da75 testClass = UserAdminRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]
11:32:51.990 [34mINFO [0;39m [36morg.springframework.mock.web.MockServletContext.log:438[0;39m - Initializing Spring FrameworkServlet ''
11:32:51.990 [34mINFO [0;39m [36morg.springframework.web.servlet.FrameworkServlet.initServletBean:494[0;39m - FrameworkServlet '': initialization started
11:32:51.995 [34mINFO [0;39m [36morg.springframework.web.servlet.FrameworkServlet.initServletBean:509[0;39m - FrameworkServlet '': initialization completed in 4 ms
11:32:51.999 [34mINFO [0;39m [36mo.s.test.context.transaction.TransactionContext.startTransaction:107[0;39m - Began transaction (1) for test context [DefaultTestContext@1c2cdc67 testClass = UserAdminRestControllerTest, testInstance = ru.javawebinar.graduation.controller.user.UserAdminRestControllerTest@288b73c1, testMethod = testCreate@UserAdminRestControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@21d8da75 testClass = UserAdminRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@1e95f584]; rollback [true]
Hibernate: 
    /* select
        generatedAlias0 
    from
        User as generatedAlias0 
    where
        generatedAlias0.email=:param0 */ select
            user0_.id as id1_3_,
            user0_.name as name2_3_,
            user0_.email as email3_3_,
            user0_.enabled as enabled4_3_,
            user0_.password as password5_3_,
            user0_.registered as register6_3_ 
        from
            users user0_ 
        where
            user0_.email=?
Hibernate: 
    /* load collection ru.javawebinar.graduation.model.User.roles */ select
        roles0_.user_id as user_id1_2_0_,
        roles0_.role as role2_2_0_ 
    from
        user_roles roles0_ 
    where
        roles0_.user_id=?
11:32:52.022 [34mINFO [0;39m [36mr.j.g.controller.user.AbstractUserController.create:33[0;39m - create User{id=null, email=new@gmail.com, name=New, enabled=true, roles=[ROLE_USER, ROLE_ADMIN]}
Hibernate: 
    call next value for global_seq
Hibernate: 
    /* insert ru.javawebinar.graduation.model.User
        */ insert 
        into
            users
            (name, email, enabled, password, registered, id) 
        values
            (?, ?, ?, ?, ?, ?)
Hibernate: 
    /* insert collection
        row ru.javawebinar.graduation.model.User.roles */ insert 
        into
            user_roles
            (user_id, role) 
        values
            (?, ?)
Hibernate: 
    /* insert collection
        row ru.javawebinar.graduation.model.User.roles */ insert 
        into
            user_roles
            (user_id, role) 
        values
            (?, ?)
Hibernate: 
    /* select
        generatedAlias0 
    from
        User as generatedAlias0 
    order by
        generatedAlias0.name asc,
        generatedAlias0.email asc */ select
            user0_.id as id1_3_,
            user0_.name as name2_3_,
            user0_.email as email3_3_,
            user0_.enabled as enabled4_3_,
            user0_.password as password5_3_,
            user0_.registered as register6_3_ 
        from
            users user0_ 
        order by
            user0_.name asc,
            user0_.email asc
Hibernate: 
    /* load collection ru.javawebinar.graduation.model.User.roles */ select
        roles0_.user_id as user_id1_2_0_,
        roles0_.role as role2_2_0_ 
    from
        user_roles roles0_ 
    where
        roles0_.user_id=?
11:32:52.379 [34mINFO [0;39m [36mo.s.test.context.transaction.TransactionContext.endTransaction:139[0;39m - Rolled back transaction for test: [DefaultTestContext@1c2cdc67 testClass = UserAdminRestControllerTest, testInstance = ru.javawebinar.graduation.controller.user.UserAdminRestControllerTest@288b73c1, testMethod = testCreate@UserAdminRestControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@21d8da75 testClass = UserAdminRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]
11:32:52.382 [34mINFO [0;39m [36morg.springframework.mock.web.MockServletContext.log:438[0;39m - Initializing Spring FrameworkServlet ''
11:32:52.383 [34mINFO [0;39m [36morg.springframework.web.servlet.FrameworkServlet.initServletBean:494[0;39m - FrameworkServlet '': initialization started
11:32:52.395 [34mINFO [0;39m [36morg.springframework.web.servlet.FrameworkServlet.initServletBean:509[0;39m - FrameworkServlet '': initialization completed in 12 ms
11:32:52.400 [34mINFO [0;39m [36mo.s.test.context.transaction.TransactionContext.startTransaction:107[0;39m - Began transaction (1) for test context [DefaultTestContext@1c2cdc67 testClass = UserAdminRestControllerTest, testInstance = ru.javawebinar.graduation.controller.user.UserAdminRestControllerTest@343727b5, testMethod = testDelete@UserAdminRestControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@21d8da75 testClass = UserAdminRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@1e95f584]; rollback [true]
Hibernate: 
    /* select
        generatedAlias0 
    from
        User as generatedAlias0 
    where
        generatedAlias0.email=:param0 */ select
            user0_.id as id1_3_,
            user0_.name as name2_3_,
            user0_.email as email3_3_,
            user0_.enabled as enabled4_3_,
            user0_.password as password5_3_,
            user0_.registered as register6_3_ 
        from
            users user0_ 
        where
            user0_.email=?
Hibernate: 
    /* load collection ru.javawebinar.graduation.model.User.roles */ select
        roles0_.user_id as user_id1_2_0_,
        roles0_.role as role2_2_0_ 
    from
        user_roles roles0_ 
    where
        roles0_.user_id=?
11:32:52.435 [34mINFO [0;39m [36mr.j.g.controller.user.AbstractUserController.delete:39[0;39m - delete 100000
Hibernate: 
    /* DELETE 
    FROM
        User u 
    WHERE
        u.id=:id */ delete 
        from
            users 
        where
            id=?

MockHttpServletRequest:
      HTTP Method = DELETE
      Request URI = /rest/admin/users/100000
       Parameters = {}
          Headers = {Authorization=[Basic YWRtaW5AZ21haWwuY29tOmFkbWlu]}
             Body = null
    Session Attrs = {}

Handler:
             Type = ru.javawebinar.graduation.controller.user.UserAdminRestController
           Method = public void ru.javawebinar.graduation.controller.user.UserAdminRestController.delete(int)

Async:
    Async started = false
     Async result = null

Resolved Exception:
             Type = null

ModelAndView:
        View name = null
             View = null
            Model = null

FlashMap:
       Attributes = null

MockHttpServletResponse:
           Status = 204
    Error message = null
          Headers = {Cache-Control=[no-cache, no-store, max-age=0, must-revalidate], Pragma=[no-cache], Expires=[0], X-XSS-Protection=[1; mode=block], X-Frame-Options=[DENY], X-Content-Type-Options=[nosniff]}
     Content type = null
             Body = 
    Forwarded URL = null
   Redirected URL = null
          Cookies = []
Hibernate: 
    /* select
        generatedAlias0 
    from
        User as generatedAlias0 
    order by
        generatedAlias0.name asc,
        generatedAlias0.email asc */ select
            user0_.id as id1_3_,
            user0_.name as name2_3_,
            user0_.email as email3_3_,
            user0_.enabled as enabled4_3_,
            user0_.password as password5_3_,
            user0_.registered as register6_3_ 
        from
            users user0_ 
        order by
            user0_.name asc,
            user0_.email asc
11:32:52.472 [34mINFO [0;39m [36mo.s.test.context.transaction.TransactionContext.endTransaction:139[0;39m - Rolled back transaction for test: [DefaultTestContext@1c2cdc67 testClass = UserAdminRestControllerTest, testInstance = ru.javawebinar.graduation.controller.user.UserAdminRestControllerTest@343727b5, testMethod = testDelete@UserAdminRestControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@21d8da75 testClass = UserAdminRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]
11:32:52.481 [34mINFO [0;39m [36morg.springframework.mock.web.MockServletContext.log:438[0;39m - Initializing Spring FrameworkServlet ''
11:32:52.482 [34mINFO [0;39m [36morg.springframework.web.servlet.FrameworkServlet.initServletBean:494[0;39m - FrameworkServlet '': initialization started
11:32:52.486 [34mINFO [0;39m [36morg.springframework.web.servlet.FrameworkServlet.initServletBean:509[0;39m - FrameworkServlet '': initialization completed in 4 ms
11:32:52.500 [34mINFO [0;39m [36mo.s.test.context.transaction.TransactionContext.startTransaction:107[0;39m - Began transaction (1) for test context [DefaultTestContext@1c2cdc67 testClass = UserAdminRestControllerTest, testInstance = ru.javawebinar.graduation.controller.user.UserAdminRestControllerTest@609ad016, testMethod = testGetAll@UserAdminRestControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@21d8da75 testClass = UserAdminRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@1e95f584]; rollback [true]
Hibernate: 
    /* select
        generatedAlias0 
    from
        User as generatedAlias0 
    where
        generatedAlias0.email=:param0 */ select
            user0_.id as id1_3_,
            user0_.name as name2_3_,
            user0_.email as email3_3_,
            user0_.enabled as enabled4_3_,
            user0_.password as password5_3_,
            user0_.registered as register6_3_ 
        from
            users user0_ 
        where
            user0_.email=?
Hibernate: 
    /* load collection ru.javawebinar.graduation.model.User.roles */ select
        roles0_.user_id as user_id1_2_0_,
        roles0_.role as role2_2_0_ 
    from
        user_roles roles0_ 
    where
        roles0_.user_id=?
11:32:52.523 [34mINFO [0;39m [36mr.j.g.controller.user.AbstractUserController.getAll:23[0;39m - getAll
Hibernate: 
    /* select
        generatedAlias0 
    from
        User as generatedAlias0 
    order by
        generatedAlias0.name asc,
        generatedAlias0.email asc */ select
            user0_.id as id1_3_,
            user0_.name as name2_3_,
            user0_.email as email3_3_,
            user0_.enabled as enabled4_3_,
            user0_.password as password5_3_,
            user0_.registered as register6_3_ 
        from
            users user0_ 
        order by
            user0_.name asc,
            user0_.email asc
Hibernate: 
    /* load collection ru.javawebinar.graduation.model.User.roles */ select
        roles0_.user_id as user_id1_2_0_,
        roles0_.role as role2_2_0_ 
    from
        user_roles roles0_ 
    where
        roles0_.user_id=?
[{"id":100001,"name":"Admin","email":"admin@gmail.com","enabled":true,"registered":"2018-10-12T09:32:49.233+0000","roles":["ROLE_USER","ROLE_ADMIN"],"votes":null},{"id":100000,"name":"User","email":"user@yandex.ru","enabled":true,"registered":"2018-10-12T09:32:49.233+0000","roles":["ROLE_USER"],"votes":null}]
11:32:52.561 [34mINFO [0;39m [36mo.s.test.context.transaction.TransactionContext.endTransaction:139[0;39m - Rolled back transaction for test: [DefaultTestContext@1c2cdc67 testClass = UserAdminRestControllerTest, testInstance = ru.javawebinar.graduation.controller.user.UserAdminRestControllerTest@609ad016, testMethod = testGetAll@UserAdminRestControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@21d8da75 testClass = UserAdminRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]
11:32:52.571 [34mINFO [0;39m [36morg.springframework.mock.web.MockServletContext.log:438[0;39m - Initializing Spring FrameworkServlet ''
11:32:52.571 [34mINFO [0;39m [36morg.springframework.web.servlet.FrameworkServlet.initServletBean:494[0;39m - FrameworkServlet '': initialization started
11:32:52.582 [34mINFO [0;39m [36morg.springframework.web.servlet.FrameworkServlet.initServletBean:509[0;39m - FrameworkServlet '': initialization completed in 11 ms
11:32:52.589 [34mINFO [0;39m [36mo.s.test.context.transaction.TransactionContext.startTransaction:107[0;39m - Began transaction (1) for test context [DefaultTestContext@1c2cdc67 testClass = UserAdminRestControllerTest, testInstance = ru.javawebinar.graduation.controller.user.UserAdminRestControllerTest@5ccc971e, testMethod = testGetUnAuth@UserAdminRestControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@21d8da75 testClass = UserAdminRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@1e95f584]; rollback [true]
11:32:52.623 [34mINFO [0;39m [36mo.s.test.context.transaction.TransactionContext.endTransaction:139[0;39m - Rolled back transaction for test: [DefaultTestContext@1c2cdc67 testClass = UserAdminRestControllerTest, testInstance = ru.javawebinar.graduation.controller.user.UserAdminRestControllerTest@5ccc971e, testMethod = testGetUnAuth@UserAdminRestControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@21d8da75 testClass = UserAdminRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]
11:32:52.631 [34mINFO [0;39m [36morg.springframework.mock.web.MockServletContext.log:438[0;39m - Initializing Spring FrameworkServlet ''
11:32:52.631 [34mINFO [0;39m [36morg.springframework.web.servlet.FrameworkServlet.initServletBean:494[0;39m - FrameworkServlet '': initialization started
11:32:52.642 [34mINFO [0;39m [36morg.springframework.web.servlet.FrameworkServlet.initServletBean:509[0;39m - FrameworkServlet '': initialization completed in 10 ms
11:32:52.652 [34mINFO [0;39m [36mo.s.test.context.transaction.TransactionContext.startTransaction:107[0;39m - Began transaction (1) for test context [DefaultTestContext@1c2cdc67 testClass = UserAdminRestControllerTest, testInstance = ru.javawebinar.graduation.controller.user.UserAdminRestControllerTest@3605ab16, testMethod = testUpdate@UserAdminRestControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@21d8da75 testClass = UserAdminRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@1e95f584]; rollback [true]
Hibernate: 
    /* select
        generatedAlias0 
    from
        User as generatedAlias0 
    where
        generatedAlias0.email=:param0 */ select
            user0_.id as id1_3_,
            user0_.name as name2_3_,
            user0_.email as email3_3_,
            user0_.enabled as enabled4_3_,
            user0_.password as password5_3_,
            user0_.registered as register6_3_ 
        from
            users user0_ 
        where
            user0_.email=?
Hibernate: 
    /* load collection ru.javawebinar.graduation.model.User.roles */ select
        roles0_.user_id as user_id1_2_0_,
        roles0_.role as role2_2_0_ 
    from
        user_roles roles0_ 
    where
        roles0_.user_id=?
11:32:52.665 [34mINFO [0;39m [36mr.j.g.controller.user.AbstractUserController.update:44[0;39m - update User{id=100000, email=user@yandex.ru, name=UpdatedName, enabled=true, roles=[ROLE_ADMIN]} with id=100000
Hibernate: 
    /* load ru.javawebinar.graduation.model.User */ select
        user0_.id as id1_3_0_,
        user0_.name as name2_3_0_,
        user0_.email as email3_3_0_,
        user0_.enabled as enabled4_3_0_,
        user0_.password as password5_3_0_,
        user0_.registered as register6_3_0_ 
    from
        users user0_ 
    where
        user0_.id=?
Hibernate: 
    /* load collection ru.javawebinar.graduation.model.User.roles */ select
        roles0_.user_id as user_id1_2_0_,
        roles0_.role as role2_2_0_ 
    from
        user_roles roles0_ 
    where
        roles0_.user_id=?
11:32:52.971 [34mINFO [0;39m [36mo.s.test.context.transaction.TransactionContext.endTransaction:139[0;39m - Rolled back transaction for test: [DefaultTestContext@1c2cdc67 testClass = UserAdminRestControllerTest, testInstance = ru.javawebinar.graduation.controller.user.UserAdminRestControllerTest@3605ab16, testMethod = testUpdate@UserAdminRestControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@21d8da75 testClass = UserAdminRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]
11:32:52.974 [34mINFO [0;39m [36morg.springframework.mock.web.MockServletContext.log:438[0;39m - Initializing Spring FrameworkServlet ''
11:32:52.981 [34mINFO [0;39m [36morg.springframework.web.servlet.FrameworkServlet.initServletBean:494[0;39m - FrameworkServlet '': initialization started
11:32:52.996 [34mINFO [0;39m [36morg.springframework.web.servlet.FrameworkServlet.initServletBean:509[0;39m - FrameworkServlet '': initialization completed in 14 ms
11:32:53.001 [34mINFO [0;39m [36mo.s.test.context.transaction.TransactionContext.startTransaction:107[0;39m - Began transaction (1) for test context [DefaultTestContext@1c2cdc67 testClass = UserAdminRestControllerTest, testInstance = ru.javawebinar.graduation.controller.user.UserAdminRestControllerTest@2e9dcdd3, testMethod = testCreateInvalid@UserAdminRestControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@21d8da75 testClass = UserAdminRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@1e95f584]; rollback [true]
Hibernate: 
    /* select
        generatedAlias0 
    from
        User as generatedAlias0 
    where
        generatedAlias0.email=:param0 */ select
            user0_.id as id1_3_,
            user0_.name as name2_3_,
            user0_.email as email3_3_,
            user0_.enabled as enabled4_3_,
            user0_.password as password5_3_,
            user0_.registered as register6_3_ 
        from
            users user0_ 
        where
            user0_.email=?
Hibernate: 
    /* load collection ru.javawebinar.graduation.model.User.roles */ select
        roles0_.user_id as user_id1_2_0_,
        roles0_.role as role2_2_0_ 
    from
        user_roles roles0_ 
    where
        roles0_.user_id=?
11:32:53.039 [31mWARN [0;39m [36mr.j.graduation.controller.ExceptionInfoHandler.logAndGetErrorInfo:108[0;39m - VALIDATION_ERROR at request  http://localhost/rest/admin/users/: org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument at index 0 in method: public org.springframework.http.ResponseEntity<ru.javawebinar.graduation.model.User> ru.javawebinar.graduation.controller.user.UserAdminRestController.createWithLocation(ru.javawebinar.graduation.model.User), with 3 error(s): [Field error in object 'user' on field 'name': rejected value [null]; codes [NotBlank.user.name,NotBlank.name,NotBlank.java.lang.String,NotBlank]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [user.name,name]; arguments []; default message [name]]; default message [must not be blank]] [Field error in object 'user' on field 'password': rejected value [null]; codes [NotBlank.user.password,NotBlank.password,NotBlank.java.lang.String,NotBlank]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [user.password,password]; arguments []; default message [password]]; default message [must not be blank]] [Field error in object 'user' on field 'email': rejected value []; codes [NotBlank.user.email,NotBlank.email,NotBlank.java.lang.String,NotBlank]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [user.email,email]; arguments []; default message [email]]; default message [must not be blank]] 
11:32:53.041 [31mWARN [0;39m [36mo.s.w.s.m.m.a.ExceptionHandlerExceptionResolver.doResolveHandlerMethodException:411[0;39m - Failed to invoke @ExceptionHandler method: public ru.javawebinar.graduation.util.exception.ErrorInfo ru.javawebinar.graduation.controller.ExceptionInfoHandler.methodArgumentValidationError(javax.servlet.http.HttpServletRequest,org.springframework.web.bind.MethodArgumentNotValidException)
org.springframework.context.NoSuchMessageException: No message found under code 'error.validationError' for locale 'ru'.
	at org.springframework.context.support.AbstractMessageSource.getMessage(AbstractMessageSource.java:161)
	at ru.javawebinar.graduation.controller.MessageUtil.getMessage(MessageUtil.java:23)
	at ru.javawebinar.graduation.controller.MessageUtil.getMessage(MessageUtil.java:27)
	at ru.javawebinar.graduation.controller.ExceptionInfoHandler.logAndGetErrorInfo(ExceptionInfoHandler.java:111)
	at ru.javawebinar.graduation.controller.ExceptionInfoHandler.methodArgumentValidationError(ExceptionInfoHandler.java:81)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:209)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:136)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:102)
	at org.springframework.web.servlet.mvc.method.annotation.ExceptionHandlerExceptionResolver.doResolveHandlerMethodException(ExceptionHandlerExceptionResolver.java:404)
	at org.springframework.web.servlet.handler.AbstractHandlerMethodExceptionResolver.doResolveException(AbstractHandlerMethodExceptionResolver.java:61)
	at org.springframework.web.servlet.handler.AbstractHandlerExceptionResolver.resolveException(AbstractHandlerExceptionResolver.java:139)
	at org.springframework.web.servlet.DispatcherServlet.processHandlerException(DispatcherServlet.java:1255)
	at org.springframework.test.web.servlet.TestDispatcherServlet.processHandlerException(TestDispatcherServlet.java:133)
	at org.springframework.web.servlet.DispatcherServlet.processDispatchResult(DispatcherServlet.java:1062)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1008)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:925)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:974)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:877)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:661)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:851)
	at org.springframework.test.web.servlet.TestDispatcherServlet.service(TestDispatcherServlet.java:71)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:742)
	at org.springframework.mock.web.MockFilterChain$ServletFilterProxy.doFilter(MockFilterChain.java:166)
	at org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:133)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:320)
	at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:127)
	at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:91)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:119)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:111)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:170)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.authentication.www.BasicAuthenticationFilter.doFilterInternal(BasicAuthenticationFilter.java:215)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:66)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:56)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:105)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:215)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:178)
	at org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:133)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:200)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:133)
	at org.springframework.test.web.servlet.MockMvc.perform(MockMvc.java:165)
	at ru.javawebinar.graduation.controller.user.UserAdminRestControllerTest.testCreateInvalid(UserAdminRestControllerTest.java:155)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.platform.commons.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:513)
	at org.junit.jupiter.engine.execution.ExecutableInvoker.invoke(ExecutableInvoker.java:115)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeTestMethod$6(TestMethodTestDescriptor.java:170)
	at org.junit.jupiter.engine.execution.ThrowableCollector.execute(ThrowableCollector.java:40)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeTestMethod(TestMethodTestDescriptor.java:166)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:113)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:58)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor$NodeExecutor.lambda$executeRecursively$3(HierarchicalTestExecutor.java:113)
	at org.junit.platform.engine.support.hierarchical.SingleTestExecutor.executeSafely(SingleTestExecutor.java:66)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor$NodeExecutor.executeRecursively(HierarchicalTestExecutor.java:108)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor$NodeExecutor.execute(HierarchicalTestExecutor.java:79)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor$NodeExecutor.lambda$executeRecursively$2(HierarchicalTestExecutor.java:121)
	at java.util.stream.ForEachOps$ForEachOp$OfRef.accept(ForEachOps.java:184)
	at java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:175)
	at java.util.Iterator.forEachRemaining(Iterator.java:116)
	at java.util.Spliterators$IteratorSpliterator.forEachRemaining(Spliterators.java:1801)
	at java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:481)
	at java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:471)
	at java.util.stream.ForEachOps$ForEachOp.evaluateSequential(ForEachOps.java:151)
	at java.util.stream.ForEachOps$ForEachOp$OfRef.evaluateSequential(ForEachOps.java:174)
	at java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)
	at java.util.stream.ReferencePipeline.forEach(ReferencePipeline.java:418)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor$NodeExecutor.lambda$executeRecursively$3(HierarchicalTestExecutor.java:121)
	at org.junit.platform.engine.support.hierarchical.SingleTestExecutor.executeSafely(SingleTestExecutor.java:66)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor$NodeExecutor.executeRecursively(HierarchicalTestExecutor.java:108)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor$NodeExecutor.execute(HierarchicalTestExecutor.java:79)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor$NodeExecutor.lambda$executeRecursively$2(HierarchicalTestExecutor.java:121)
	at java.util.stream.ForEachOps$ForEachOp$OfRef.accept(ForEachOps.java:184)
	at java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:175)
	at java.util.Iterator.forEachRemaining(Iterator.java:116)
	at java.util.Spliterators$IteratorSpliterator.forEachRemaining(Spliterators.java:1801)
	at java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:481)
	at java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:471)
	at java.util.stream.ForEachOps$ForEachOp.evaluateSequential(ForEachOps.java:151)
	at java.util.stream.ForEachOps$ForEachOp$OfRef.evaluateSequential(ForEachOps.java:174)
	at java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)
	at java.util.stream.ReferencePipeline.forEach(ReferencePipeline.java:418)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor$NodeExecutor.lambda$executeRecursively$3(HierarchicalTestExecutor.java:121)
	at org.junit.platform.engine.support.hierarchical.SingleTestExecutor.executeSafely(SingleTestExecutor.java:66)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor$NodeExecutor.executeRecursively(HierarchicalTestExecutor.java:108)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor$NodeExecutor.execute(HierarchicalTestExecutor.java:79)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:55)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:43)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:170)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:154)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:90)
	at org.junit.platform.surefire.provider.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:132)
	at org.junit.platform.surefire.provider.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:111)
	at org.apache.maven.surefire.booter.ForkedBooter.invokeProviderInSameClassLoader(ForkedBooter.java:383)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:344)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:125)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:417)
11:32:53.044 [34mINFO [0;39m [36mo.s.test.context.transaction.TransactionContext.endTransaction:139[0;39m - Rolled back transaction for test: [DefaultTestContext@1c2cdc67 testClass = UserAdminRestControllerTest, testInstance = ru.javawebinar.graduation.controller.user.UserAdminRestControllerTest@2e9dcdd3, testMethod = testCreateInvalid@UserAdminRestControllerTest, testException = java.lang.AssertionError: Status expected:<422> but was:<400>, mergedContextConfiguration = [WebMergedContextConfiguration@21d8da75 testClass = UserAdminRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]
[ERROR] Tests run: 16, Failures: 3, Errors: 5, Skipped: 0, Time elapsed: 13.545 s <<< FAILURE! - in ru.javawebinar.graduation.controller.user.UserAdminRestControllerTest
[ERROR] testUpdateDuplicate  Time elapsed: 1.333 s  <<< ERROR!
org.springframework.web.util.NestedServletException: Request processing failed; nested exception is org.springframework.dao.DataIntegrityViolationException: could not execute statement; SQL [n/a]; constraint [null]; nested exception is org.hibernate.exception.ConstraintViolationException: could not execute statement
	at ru.javawebinar.graduation.controller.user.UserAdminRestControllerTest.testUpdateDuplicate(UserAdminRestControllerTest.java:183)
Caused by: org.springframework.dao.DataIntegrityViolationException: could not execute statement; SQL [n/a]; constraint [null]; nested exception is org.hibernate.exception.ConstraintViolationException: could not execute statement
	at ru.javawebinar.graduation.controller.user.UserAdminRestControllerTest.testUpdateDuplicate(UserAdminRestControllerTest.java:183)
Caused by: org.hibernate.exception.ConstraintViolationException: could not execute statement
	at ru.javawebinar.graduation.controller.user.UserAdminRestControllerTest.testUpdateDuplicate(UserAdminRestControllerTest.java:183)
Caused by: java.sql.SQLIntegrityConstraintViolationException: integrity constraint violation: unique constraint or index violation: USERS_UNIQUE_EMAIL_IDX
	at ru.javawebinar.graduation.controller.user.UserAdminRestControllerTest.testUpdateDuplicate(UserAdminRestControllerTest.java:183)
Caused by: org.hsqldb.HsqlException: integrity constraint violation: unique constraint or index violation: USERS_UNIQUE_EMAIL_IDX
	at ru.javawebinar.graduation.controller.user.UserAdminRestControllerTest.testUpdateDuplicate(UserAdminRestControllerTest.java:183)

[ERROR] testUpdateInvalid  Time elapsed: 0.11 s  <<< FAILURE!
java.lang.AssertionError: Status expected:<422> but was:<400>
	at ru.javawebinar.graduation.controller.user.UserAdminRestControllerTest.testUpdateInvalid(UserAdminRestControllerTest.java:172)

[ERROR] testDeleteNotFound  Time elapsed: 0.101 s  <<< ERROR!
org.springframework.web.util.NestedServletException: Request processing failed; nested exception is ru.javawebinar.graduation.util.exception.NotFoundException: type=DATA_NOT_FOUND, msgCode=exception.common.notFound, args=[id=100005]
	at ru.javawebinar.graduation.controller.user.UserAdminRestControllerTest.testDeleteNotFound(UserAdminRestControllerTest.java:69)
Caused by: ru.javawebinar.graduation.util.exception.NotFoundException: type=DATA_NOT_FOUND, msgCode=exception.common.notFound, args=[id=100005]
	at ru.javawebinar.graduation.controller.user.UserAdminRestControllerTest.testDeleteNotFound(UserAdminRestControllerTest.java:69)

[ERROR] testGetNotFound  Time elapsed: 0.05 s  <<< ERROR!
org.springframework.web.util.NestedServletException: Request processing failed; nested exception is ru.javawebinar.graduation.util.exception.NotFoundException: type=DATA_NOT_FOUND, msgCode=exception.common.notFound, args=[id=1]
	at ru.javawebinar.graduation.controller.user.UserAdminRestControllerTest.testGetNotFound(UserAdminRestControllerTest.java:43)
Caused by: ru.javawebinar.graduation.util.exception.NotFoundException: type=DATA_NOT_FOUND, msgCode=exception.common.notFound, args=[id=1]
	at ru.javawebinar.graduation.controller.user.UserAdminRestControllerTest.testGetNotFound(UserAdminRestControllerTest.java:43)

[ERROR] testCreateDuplicate  Time elapsed: 0.251 s  <<< ERROR!
org.springframework.web.util.NestedServletException: Request processing failed; nested exception is org.springframework.dao.DataIntegrityViolationException: could not execute statement; SQL [n/a]; constraint [null]; nested exception is org.hibernate.exception.ConstraintViolationException: could not execute statement
	at ru.javawebinar.graduation.controller.user.UserAdminRestControllerTest.testCreateDuplicate(UserAdminRestControllerTest.java:197)
Caused by: org.springframework.dao.DataIntegrityViolationException: could not execute statement; SQL [n/a]; constraint [null]; nested exception is org.hibernate.exception.ConstraintViolationException: could not execute statement
	at ru.javawebinar.graduation.controller.user.UserAdminRestControllerTest.testCreateDuplicate(UserAdminRestControllerTest.java:197)
Caused by: org.hibernate.exception.ConstraintViolationException: could not execute statement
	at ru.javawebinar.graduation.controller.user.UserAdminRestControllerTest.testCreateDuplicate(UserAdminRestControllerTest.java:197)
Caused by: java.sql.SQLIntegrityConstraintViolationException: integrity constraint violation: unique constraint or index violation: USERS_UNIQUE_EMAIL_IDX
	at ru.javawebinar.graduation.controller.user.UserAdminRestControllerTest.testCreateDuplicate(UserAdminRestControllerTest.java:197)
Caused by: org.hsqldb.HsqlException: integrity constraint violation: unique constraint or index violation: USERS_UNIQUE_EMAIL_IDX
	at ru.javawebinar.graduation.controller.user.UserAdminRestControllerTest.testCreateDuplicate(UserAdminRestControllerTest.java:197)

[ERROR] testUpdateHtmlUnsafe  Time elapsed: 0.072 s  <<< FAILURE!
java.lang.AssertionError: Status expected:<422> but was:<400>
	at ru.javawebinar.graduation.controller.user.UserAdminRestControllerTest.testUpdateHtmlUnsafe(UserAdminRestControllerTest.java:147)

[ERROR] testCreateWithIllegalRequestData  Time elapsed: 0.068 s  <<< ERROR!
org.springframework.web.util.NestedServletException: Request processing failed; nested exception is ru.javawebinar.graduation.util.exception.IllegalRequestDataException: User{id=100000, email=user@yandex.ru, name=User, enabled=true, roles=[ROLE_USER]} must be new (id=null)
	at ru.javawebinar.graduation.controller.user.UserAdminRestControllerTest.testCreateWithIllegalRequestData(UserAdminRestControllerTest.java:121)
Caused by: ru.javawebinar.graduation.util.exception.IllegalRequestDataException: User{id=100000, email=user@yandex.ru, name=User, enabled=true, roles=[ROLE_USER]} must be new (id=null)
	at ru.javawebinar.graduation.controller.user.UserAdminRestControllerTest.testCreateWithIllegalRequestData(UserAdminRestControllerTest.java:121)

[ERROR] testCreateInvalid  Time elapsed: 0.059 s  <<< FAILURE!
java.lang.AssertionError: Status expected:<422> but was:<400>
	at ru.javawebinar.graduation.controller.user.UserAdminRestControllerTest.testCreateInvalid(UserAdminRestControllerTest.java:159)

[INFO] Running ru.javawebinar.graduation.controller.user.UserProfileRestControllerTest
11:32:53.073 [34mINFO [0;39m [36mo.s.t.c.support.AbstractTestContextBootstrapper.getDefaultTestExecutionListenerClassNames:248[0;39m - Loaded default TestExecutionListener class names from location [META-INF/spring.factories]: [org.springframework.security.test.context.support.WithSecurityContextTestExecutionListener, org.springframework.security.test.context.support.ReactorContextTestExecutionListener, org.springframework.test.context.web.ServletTestExecutionListener, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener, org.springframework.test.context.support.DependencyInjectionTestExecutionListener, org.springframework.test.context.support.DirtiesContextTestExecutionListener, org.springframework.test.context.transaction.TransactionalTestExecutionListener, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener]
11:32:53.087 [34mINFO [0;39m [36mo.s.t.c.support.AbstractTestContextBootstrapper.getTestExecutionListeners:177[0;39m - Using TestExecutionListeners: [org.springframework.test.context.web.ServletTestExecutionListener@1bbef3c7, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener@35995029, org.springframework.test.context.support.DependencyInjectionTestExecutionListener@42474b18, org.springframework.test.context.support.DirtiesContextTestExecutionListener@31b91435, org.springframework.test.context.transaction.TransactionalTestExecutionListener@5d75f90e, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener@2212e291, org.springframework.security.test.context.support.WithSecurityContextTestExecutionListener@5af56240, org.springframework.security.test.context.support.ReactorContextTestExecutionListener@2314cd97]
11:32:53.107 [34mINFO [0;39m [36morg.springframework.mock.web.MockServletContext.log:438[0;39m - Initializing Spring FrameworkServlet ''
11:32:53.107 [34mINFO [0;39m [36morg.springframework.web.servlet.FrameworkServlet.initServletBean:494[0;39m - FrameworkServlet '': initialization started
11:32:53.124 [34mINFO [0;39m [36morg.springframework.web.servlet.FrameworkServlet.initServletBean:509[0;39m - FrameworkServlet '': initialization completed in 17 ms
11:32:53.230 [34mINFO [0;39m [36mo.s.test.context.transaction.TransactionContext.startTransaction:107[0;39m - Began transaction (1) for test context [DefaultTestContext@5342032a testClass = UserProfileRestControllerTest, testInstance = ru.javawebinar.graduation.controller.user.UserProfileRestControllerTest@239d9cb7, testMethod = testUpdateInvalid@UserProfileRestControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@5a35ae82 testClass = UserProfileRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@1e95f584]; rollback [true]
Hibernate: 
    /* select
        generatedAlias0 
    from
        User as generatedAlias0 
    where
        generatedAlias0.email=:param0 */ select
            user0_.id as id1_3_,
            user0_.name as name2_3_,
            user0_.email as email3_3_,
            user0_.enabled as enabled4_3_,
            user0_.password as password5_3_,
            user0_.registered as register6_3_ 
        from
            users user0_ 
        where
            user0_.email=?
Hibernate: 
    /* load collection ru.javawebinar.graduation.model.User.roles */ select
        roles0_.user_id as user_id1_2_0_,
        roles0_.role as role2_2_0_ 
    from
        user_roles roles0_ 
    where
        roles0_.user_id=?
11:32:53.528 [31mWARN [0;39m [36mr.j.graduation.controller.ExceptionInfoHandler.logAndGetErrorInfo:108[0;39m - VALIDATION_ERROR at request  http://localhost/rest/profile: org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument at index 0 in method: public void ru.javawebinar.graduation.controller.user.UserProfileRestController.update(ru.javawebinar.graduation.to.UserTo,ru.javawebinar.graduation.AuthorizedUser), with 2 error(s): [Field error in object 'userTo' on field 'name': rejected value [null]; codes [NotBlank.userTo.name,NotBlank.name,NotBlank.java.lang.String,NotBlank]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [userTo.name,name]; arguments []; default message [name]]; default message [must not be blank]] [Field error in object 'userTo' on field 'email': rejected value [password]; codes [Email.userTo.email,Email.email,Email.java.lang.String,Email]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [userTo.email,email]; arguments []; default message [email],[Ljavax.validation.constraints.Pattern$Flag;@65930e02,org.springframework.validation.beanvalidation.SpringValidatorAdapter$ResolvableAttribute@2b82018]; default message [must be a well-formed email address]] 
11:32:53.529 [31mWARN [0;39m [36mo.s.w.s.m.m.a.ExceptionHandlerExceptionResolver.doResolveHandlerMethodException:411[0;39m - Failed to invoke @ExceptionHandler method: public ru.javawebinar.graduation.util.exception.ErrorInfo ru.javawebinar.graduation.controller.ExceptionInfoHandler.methodArgumentValidationError(javax.servlet.http.HttpServletRequest,org.springframework.web.bind.MethodArgumentNotValidException)
org.springframework.context.NoSuchMessageException: No message found under code 'error.validationError' for locale 'ru'.
	at org.springframework.context.support.AbstractMessageSource.getMessage(AbstractMessageSource.java:161)
	at ru.javawebinar.graduation.controller.MessageUtil.getMessage(MessageUtil.java:23)
	at ru.javawebinar.graduation.controller.MessageUtil.getMessage(MessageUtil.java:27)
	at ru.javawebinar.graduation.controller.ExceptionInfoHandler.logAndGetErrorInfo(ExceptionInfoHandler.java:111)
	at ru.javawebinar.graduation.controller.ExceptionInfoHandler.methodArgumentValidationError(ExceptionInfoHandler.java:81)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:209)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:136)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:102)
	at org.springframework.web.servlet.mvc.method.annotation.ExceptionHandlerExceptionResolver.doResolveHandlerMethodException(ExceptionHandlerExceptionResolver.java:404)
	at org.springframework.web.servlet.handler.AbstractHandlerMethodExceptionResolver.doResolveException(AbstractHandlerMethodExceptionResolver.java:61)
	at org.springframework.web.servlet.handler.AbstractHandlerExceptionResolver.resolveException(AbstractHandlerExceptionResolver.java:139)
	at org.springframework.web.servlet.DispatcherServlet.processHandlerException(DispatcherServlet.java:1255)
	at org.springframework.test.web.servlet.TestDispatcherServlet.processHandlerException(TestDispatcherServlet.java:133)
	at org.springframework.web.servlet.DispatcherServlet.processDispatchResult(DispatcherServlet.java:1062)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1008)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:925)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:974)
	at org.springframework.web.servlet.FrameworkServlet.doPut(FrameworkServlet.java:888)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:664)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:851)
	at org.springframework.test.web.servlet.TestDispatcherServlet.service(TestDispatcherServlet.java:71)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:742)
	at org.springframework.mock.web.MockFilterChain$ServletFilterProxy.doFilter(MockFilterChain.java:166)
	at org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:133)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:320)
	at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:127)
	at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:91)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:119)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:111)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:170)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.authentication.www.BasicAuthenticationFilter.doFilterInternal(BasicAuthenticationFilter.java:215)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:66)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:56)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:105)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:215)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:178)
	at org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:133)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:200)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:133)
	at org.springframework.test.web.servlet.MockMvc.perform(MockMvc.java:165)
	at ru.javawebinar.graduation.controller.user.UserProfileRestControllerTest.testUpdateInvalid(UserProfileRestControllerTest.java:87)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.platform.commons.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:513)
	at org.junit.jupiter.engine.execution.ExecutableInvoker.invoke(ExecutableInvoker.java:115)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeTestMethod$6(TestMethodTestDescriptor.java:170)
	at org.junit.jupiter.engine.execution.ThrowableCollector.execute(ThrowableCollector.java:40)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeTestMethod(TestMethodTestDescriptor.java:166)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:113)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:58)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor$NodeExecutor.lambda$executeRecursively$3(HierarchicalTestExecutor.java:113)
	at org.junit.platform.engine.support.hierarchical.SingleTestExecutor.executeSafely(SingleTestExecutor.java:66)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor$NodeExecutor.executeRecursively(HierarchicalTestExecutor.java:108)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor$NodeExecutor.execute(HierarchicalTestExecutor.java:79)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor$NodeExecutor.lambda$executeRecursively$2(HierarchicalTestExecutor.java:121)
	at java.util.stream.ForEachOps$ForEachOp$OfRef.accept(ForEachOps.java:184)
	at java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:175)
	at java.util.Iterator.forEachRemaining(Iterator.java:116)
	at java.util.Spliterators$IteratorSpliterator.forEachRemaining(Spliterators.java:1801)
	at java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:481)
	at java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:471)
	at java.util.stream.ForEachOps$ForEachOp.evaluateSequential(ForEachOps.java:151)
	at java.util.stream.ForEachOps$ForEachOp$OfRef.evaluateSequential(ForEachOps.java:174)
	at java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)
	at java.util.stream.ReferencePipeline.forEach(ReferencePipeline.java:418)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor$NodeExecutor.lambda$executeRecursively$3(HierarchicalTestExecutor.java:121)
	at org.junit.platform.engine.support.hierarchical.SingleTestExecutor.executeSafely(SingleTestExecutor.java:66)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor$NodeExecutor.executeRecursively(HierarchicalTestExecutor.java:108)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor$NodeExecutor.execute(HierarchicalTestExecutor.java:79)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor$NodeExecutor.lambda$executeRecursively$2(HierarchicalTestExecutor.java:121)
	at java.util.stream.ForEachOps$ForEachOp$OfRef.accept(ForEachOps.java:184)
	at java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:175)
	at java.util.Iterator.forEachRemaining(Iterator.java:116)
	at java.util.Spliterators$IteratorSpliterator.forEachRemaining(Spliterators.java:1801)
	at java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:481)
	at java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:471)
	at java.util.stream.ForEachOps$ForEachOp.evaluateSequential(ForEachOps.java:151)
	at java.util.stream.ForEachOps$ForEachOp$OfRef.evaluateSequential(ForEachOps.java:174)
	at java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)
	at java.util.stream.ReferencePipeline.forEach(ReferencePipeline.java:418)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor$NodeExecutor.lambda$executeRecursively$3(HierarchicalTestExecutor.java:121)
	at org.junit.platform.engine.support.hierarchical.SingleTestExecutor.executeSafely(SingleTestExecutor.java:66)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor$NodeExecutor.executeRecursively(HierarchicalTestExecutor.java:108)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor$NodeExecutor.execute(HierarchicalTestExecutor.java:79)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:55)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:43)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:170)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:154)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:90)
	at org.junit.platform.surefire.provider.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:132)
	at org.junit.platform.surefire.provider.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:111)
	at org.apache.maven.surefire.booter.ForkedBooter.invokeProviderInSameClassLoader(ForkedBooter.java:383)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:344)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:125)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:417)

MockHttpServletRequest:
      HTTP Method = PUT
      Request URI = /rest/profile
       Parameters = {}
          Headers = {Content-Type=[application/json;charset=UTF-8], Authorization=[Basic dXNlckB5YW5kZXgucnU6cGFzc3dvcmQ=]}
             Body = {"email":"password"}
    Session Attrs = {}

Handler:
             Type = ru.javawebinar.graduation.controller.user.UserProfileRestController
           Method = public void ru.javawebinar.graduation.controller.user.UserProfileRestController.update(ru.javawebinar.graduation.to.UserTo,ru.javawebinar.graduation.AuthorizedUser)

Async:
    Async started = false
     Async result = null

Resolved Exception:
             Type = org.springframework.web.bind.MethodArgumentNotValidException

ModelAndView:
        View name = null
             View = null
            Model = null

FlashMap:
       Attributes = null

MockHttpServletResponse:
           Status = 400
    Error message = null
          Headers = {Cache-Control=[no-cache, no-store, max-age=0, must-revalidate], Pragma=[no-cache], Expires=[0], X-XSS-Protection=[1; mode=block], X-Frame-Options=[DENY], X-Content-Type-Options=[nosniff]}
     Content type = null
             Body = 
    Forwarded URL = null
   Redirected URL = null
          Cookies = []
11:32:53.543 [34mINFO [0;39m [36mo.s.test.context.transaction.TransactionContext.endTransaction:139[0;39m - Rolled back transaction for test: [DefaultTestContext@5342032a testClass = UserProfileRestControllerTest, testInstance = ru.javawebinar.graduation.controller.user.UserProfileRestControllerTest@239d9cb7, testMethod = testUpdateInvalid@UserProfileRestControllerTest, testException = java.lang.AssertionError: Status expected:<422> but was:<400>, mergedContextConfiguration = [WebMergedContextConfiguration@5a35ae82 testClass = UserProfileRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]
11:32:53.555 [34mINFO [0;39m [36morg.springframework.mock.web.MockServletContext.log:438[0;39m - Initializing Spring FrameworkServlet ''
11:32:53.556 [34mINFO [0;39m [36morg.springframework.web.servlet.FrameworkServlet.initServletBean:494[0;39m - FrameworkServlet '': initialization started
11:32:53.559 [34mINFO [0;39m [36morg.springframework.web.servlet.FrameworkServlet.initServletBean:509[0;39m - FrameworkServlet '': initialization completed in 3 ms
11:32:53.581 [34mINFO [0;39m [36mo.s.test.context.transaction.TransactionContext.startTransaction:107[0;39m - Began transaction (1) for test context [DefaultTestContext@5342032a testClass = UserProfileRestControllerTest, testInstance = ru.javawebinar.graduation.controller.user.UserProfileRestControllerTest@17034458, testMethod = testGet@UserProfileRestControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@5a35ae82 testClass = UserProfileRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@1e95f584]; rollback [true]
Hibernate: 
    /* select
        generatedAlias0 
    from
        User as generatedAlias0 
    where
        generatedAlias0.email=:param0 */ select
            user0_.id as id1_3_,
            user0_.name as name2_3_,
            user0_.email as email3_3_,
            user0_.enabled as enabled4_3_,
            user0_.password as password5_3_,
            user0_.registered as register6_3_ 
        from
            users user0_ 
        where
            user0_.email=?
Hibernate: 
    /* load collection ru.javawebinar.graduation.model.User.roles */ select
        roles0_.user_id as user_id1_2_0_,
        roles0_.role as role2_2_0_ 
    from
        user_roles roles0_ 
    where
        roles0_.user_id=?
11:32:53.626 [34mINFO [0;39m [36mr.j.g.controller.user.AbstractUserController.get:28[0;39m - get 100000
{"id":100000,"name":"User","email":"user@yandex.ru","enabled":true,"registered":"2018-10-12T09:32:49.233+0000","roles":["ROLE_USER"],"votes":null}
11:32:53.633 [34mINFO [0;39m [36mo.s.test.context.transaction.TransactionContext.endTransaction:139[0;39m - Rolled back transaction for test: [DefaultTestContext@5342032a testClass = UserProfileRestControllerTest, testInstance = ru.javawebinar.graduation.controller.user.UserProfileRestControllerTest@17034458, testMethod = testGet@UserProfileRestControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@5a35ae82 testClass = UserProfileRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]
11:32:53.643 [34mINFO [0;39m [36morg.springframework.mock.web.MockServletContext.log:438[0;39m - Initializing Spring FrameworkServlet ''
11:32:53.644 [34mINFO [0;39m [36morg.springframework.web.servlet.FrameworkServlet.initServletBean:494[0;39m - FrameworkServlet '': initialization started
11:32:53.652 [34mINFO [0;39m [36morg.springframework.web.servlet.FrameworkServlet.initServletBean:509[0;39m - FrameworkServlet '': initialization completed in 7 ms
11:32:53.664 [34mINFO [0;39m [36mo.s.test.context.transaction.TransactionContext.startTransaction:107[0;39m - Began transaction (1) for test context [DefaultTestContext@5342032a testClass = UserProfileRestControllerTest, testInstance = ru.javawebinar.graduation.controller.user.UserProfileRestControllerTest@40edc64e, testMethod = testRegister@UserProfileRestControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@5a35ae82 testClass = UserProfileRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@1e95f584]; rollback [true]
11:32:53.679 [34mINFO [0;39m [36mr.j.g.controller.user.AbstractUserController.create:33[0;39m - create User{id=null, email=newemail@ya.ru, name=newName, enabled=true, roles=[ROLE_USER]}
Hibernate: 
    call next value for global_seq

MockHttpServletRequest:
      HTTP Method = POST
      Request URI = /rest/profile/register
       Parameters = {}
          Headers = {Content-Type=[application/json;charset=UTF-8]}
             Body = {"name":"newName","email":"newemail@ya.ru","password":"newPassword"}
    Session Attrs = {}

Handler:
             Type = ru.javawebinar.graduation.controller.user.UserProfileRestController
           Method = public org.springframework.http.ResponseEntity<ru.javawebinar.graduation.model.User> ru.javawebinar.graduation.controller.user.UserProfileRestController.register(ru.javawebinar.graduation.to.UserTo)

Async:
    Async started = false
     Async result = null

Resolved Exception:
             Type = null

ModelAndView:
        View name = null
             View = null
            Model = null

FlashMap:
       Attributes = null

MockHttpServletResponse:
           Status = 201
    Error message = null
          Headers = {Location=[http://localhost/rest/profile/100016], Content-Type=[application/json;charset=UTF-8], Cache-Control=[no-cache, no-store, max-age=0, must-revalidate], Pragma=[no-cache], Expires=[0], X-XSS-Protection=[1; mode=block], X-Frame-Options=[DENY], X-Content-Type-Options=[nosniff]}
     Content type = application/json;charset=UTF-8
             Body = {"id":100016,"name":"newName","email":"newemail@ya.ru","enabled":true,"registered":"2018-10-12T09:32:53.679+0000","roles":["ROLE_USER"]}
    Forwarded URL = null
   Redirected URL = http://localhost/rest/profile/100016
          Cookies = []
Hibernate: 
    /* insert ru.javawebinar.graduation.model.User
        */ insert 
        into
            users
            (name, email, enabled, password, registered, id) 
        values
            (?, ?, ?, ?, ?, ?)
Hibernate: 
    /* insert collection
        row ru.javawebinar.graduation.model.User.roles */ insert 
        into
            user_roles
            (user_id, role) 
        values
            (?, ?)
Hibernate: 
    /* select
        generatedAlias0 
    from
        User as generatedAlias0 
    where
        generatedAlias0.email=:param0 */ select
            user0_.id as id1_3_,
            user0_.name as name2_3_,
            user0_.email as email3_3_,
            user0_.enabled as enabled4_3_,
            user0_.password as password5_3_,
            user0_.registered as register6_3_ 
        from
            users user0_ 
        where
            user0_.email=?
11:32:53.954 [34mINFO [0;39m [36mo.s.test.context.transaction.TransactionContext.endTransaction:139[0;39m - Rolled back transaction for test: [DefaultTestContext@5342032a testClass = UserProfileRestControllerTest, testInstance = ru.javawebinar.graduation.controller.user.UserProfileRestControllerTest@40edc64e, testMethod = testRegister@UserProfileRestControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@5a35ae82 testClass = UserProfileRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]
11:32:53.956 [34mINFO [0;39m [36morg.springframework.mock.web.MockServletContext.log:438[0;39m - Initializing Spring FrameworkServlet ''
11:32:53.957 [34mINFO [0;39m [36morg.springframework.web.servlet.FrameworkServlet.initServletBean:494[0;39m - FrameworkServlet '': initialization started
11:32:53.969 [34mINFO [0;39m [36morg.springframework.web.servlet.FrameworkServlet.initServletBean:509[0;39m - FrameworkServlet '': initialization completed in 11 ms
11:32:53.974 [34mINFO [0;39m [36mo.s.test.context.transaction.TransactionContext.startTransaction:107[0;39m - Began transaction (1) for test context [DefaultTestContext@5342032a testClass = UserProfileRestControllerTest, testInstance = ru.javawebinar.graduation.controller.user.UserProfileRestControllerTest@becb93a, testMethod = testDelete@UserProfileRestControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@5a35ae82 testClass = UserProfileRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@1e95f584]; rollback [true]
Hibernate: 
    /* select
        generatedAlias0 
    from
        User as generatedAlias0 
    where
        generatedAlias0.email=:param0 */ select
            user0_.id as id1_3_,
            user0_.name as name2_3_,
            user0_.email as email3_3_,
            user0_.enabled as enabled4_3_,
            user0_.password as password5_3_,
            user0_.registered as register6_3_ 
        from
            users user0_ 
        where
            user0_.email=?
Hibernate: 
    /* load collection ru.javawebinar.graduation.model.User.roles */ select
        roles0_.user_id as user_id1_2_0_,
        roles0_.role as role2_2_0_ 
    from
        user_roles roles0_ 
    where
        roles0_.user_id=?
11:32:54.016 [34mINFO [0;39m [36mr.j.g.controller.user.AbstractUserController.delete:39[0;39m - delete 100000
Hibernate: 
    /* DELETE 
    FROM
        User u 
    WHERE
        u.id=:id */ delete 
        from
            users 
        where
            id=?
Hibernate: 
    /* select
        generatedAlias0 
    from
        User as generatedAlias0 
    order by
        generatedAlias0.name asc,
        generatedAlias0.email asc */ select
            user0_.id as id1_3_,
            user0_.name as name2_3_,
            user0_.email as email3_3_,
            user0_.enabled as enabled4_3_,
            user0_.password as password5_3_,
            user0_.registered as register6_3_ 
        from
            users user0_ 
        order by
            user0_.name asc,
            user0_.email asc
Hibernate: 
    /* load collection ru.javawebinar.graduation.model.User.roles */ select
        roles0_.user_id as user_id1_2_0_,
        roles0_.role as role2_2_0_ 
    from
        user_roles roles0_ 
    where
        roles0_.user_id=?
11:32:54.056 [34mINFO [0;39m [36mo.s.test.context.transaction.TransactionContext.endTransaction:139[0;39m - Rolled back transaction for test: [DefaultTestContext@5342032a testClass = UserProfileRestControllerTest, testInstance = ru.javawebinar.graduation.controller.user.UserProfileRestControllerTest@becb93a, testMethod = testDelete@UserProfileRestControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@5a35ae82 testClass = UserProfileRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]
11:32:54.068 [34mINFO [0;39m [36morg.springframework.mock.web.MockServletContext.log:438[0;39m - Initializing Spring FrameworkServlet ''
11:32:54.069 [34mINFO [0;39m [36morg.springframework.web.servlet.FrameworkServlet.initServletBean:494[0;39m - FrameworkServlet '': initialization started
11:32:54.074 [34mINFO [0;39m [36morg.springframework.web.servlet.FrameworkServlet.initServletBean:509[0;39m - FrameworkServlet '': initialization completed in 3 ms
11:32:54.087 [34mINFO [0;39m [36mo.s.test.context.transaction.TransactionContext.startTransaction:107[0;39m - Began transaction (1) for test context [DefaultTestContext@5342032a testClass = UserProfileRestControllerTest, testInstance = ru.javawebinar.graduation.controller.user.UserProfileRestControllerTest@64b8eb96, testMethod = testGetUnAuth@UserProfileRestControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@5a35ae82 testClass = UserProfileRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@1e95f584]; rollback [true]
11:32:54.109 [34mINFO [0;39m [36mo.s.test.context.transaction.TransactionContext.endTransaction:139[0;39m - Rolled back transaction for test: [DefaultTestContext@5342032a testClass = UserProfileRestControllerTest, testInstance = ru.javawebinar.graduation.controller.user.UserProfileRestControllerTest@64b8eb96, testMethod = testGetUnAuth@UserProfileRestControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@5a35ae82 testClass = UserProfileRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]
11:32:54.119 [34mINFO [0;39m [36morg.springframework.mock.web.MockServletContext.log:438[0;39m - Initializing Spring FrameworkServlet ''
11:32:54.120 [34mINFO [0;39m [36morg.springframework.web.servlet.FrameworkServlet.initServletBean:494[0;39m - FrameworkServlet '': initialization started
11:32:54.134 [34mINFO [0;39m [36morg.springframework.web.servlet.FrameworkServlet.initServletBean:509[0;39m - FrameworkServlet '': initialization completed in 14 ms
11:32:54.138 [34mINFO [0;39m [36mo.s.test.context.transaction.TransactionContext.startTransaction:107[0;39m - Began transaction (1) for test context [DefaultTestContext@5342032a testClass = UserProfileRestControllerTest, testInstance = ru.javawebinar.graduation.controller.user.UserProfileRestControllerTest@2d23a5be, testMethod = testUpdate@UserProfileRestControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@5a35ae82 testClass = UserProfileRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@1e95f584]; rollback [true]
Hibernate: 
    /* select
        generatedAlias0 
    from
        User as generatedAlias0 
    where
        generatedAlias0.email=:param0 */ select
            user0_.id as id1_3_,
            user0_.name as name2_3_,
            user0_.email as email3_3_,
            user0_.enabled as enabled4_3_,
            user0_.password as password5_3_,
            user0_.registered as register6_3_ 
        from
            users user0_ 
        where
            user0_.email=?
Hibernate: 
    /* load collection ru.javawebinar.graduation.model.User.roles */ select
        roles0_.user_id as user_id1_2_0_,
        roles0_.role as role2_2_0_ 
    from
        user_roles roles0_ 
    where
        roles0_.user_id=?
11:32:54.176 [34mINFO [0;39m [36mr.j.g.controller.user.AbstractUserController.update:50[0;39m - update UserTo{name='newName', email='newemail@ya.ru', id=null} with id=100000

MockHttpServletRequest:
      HTTP Method = PUT
      Request URI = /rest/profile
       Parameters = {}
          Headers = {Content-Type=[application/json;charset=UTF-8], Authorization=[Basic dXNlckB5YW5kZXgucnU6cGFzc3dvcmQ=]}
             Body = {"name":"newName","email":"newemail@ya.ru","password":"newPassword"}
    Session Attrs = {}

Handler:
             Type = ru.javawebinar.graduation.controller.user.UserProfileRestController
           Method = public void ru.javawebinar.graduation.controller.user.UserProfileRestController.update(ru.javawebinar.graduation.to.UserTo,ru.javawebinar.graduation.AuthorizedUser)

Async:
    Async started = false
     Async result = null

Resolved Exception:
             Type = null

ModelAndView:
        View name = null
             View = null
            Model = null

FlashMap:
       Attributes = null

MockHttpServletResponse:
           Status = 204
    Error message = null
          Headers = {Cache-Control=[no-cache, no-store, max-age=0, must-revalidate], Pragma=[no-cache], Expires=[0], X-XSS-Protection=[1; mode=block], X-Frame-Options=[DENY], X-Content-Type-Options=[nosniff]}
     Content type = null
             Body = 
    Forwarded URL = null
   Redirected URL = null
          Cookies = []
Hibernate: 
    /* update
        ru.javawebinar.graduation.model.User */ update
            users 
        set
            name=?,
            email=?,
            enabled=?,
            password=?,
            registered=? 
        where
            id=?
Hibernate: 
    /* select
        generatedAlias0 
    from
        User as generatedAlias0 
    where
        generatedAlias0.email=:param0 */ select
            user0_.id as id1_3_,
            user0_.name as name2_3_,
            user0_.email as email3_3_,
            user0_.enabled as enabled4_3_,
            user0_.password as password5_3_,
            user0_.registered as register6_3_ 
        from
            users user0_ 
        where
            user0_.email=?
11:32:54.368 [34mINFO [0;39m [36mo.s.test.context.transaction.TransactionContext.endTransaction:139[0;39m - Rolled back transaction for test: [DefaultTestContext@5342032a testClass = UserProfileRestControllerTest, testInstance = ru.javawebinar.graduation.controller.user.UserProfileRestControllerTest@2d23a5be, testMethod = testUpdate@UserProfileRestControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@5a35ae82 testClass = UserProfileRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]
11:32:54.370 [34mINFO [0;39m [36morg.springframework.mock.web.MockServletContext.log:438[0;39m - Initializing Spring FrameworkServlet ''
11:32:54.371 [34mINFO [0;39m [36morg.springframework.web.servlet.FrameworkServlet.initServletBean:494[0;39m - FrameworkServlet '': initialization started
11:32:54.376 [34mINFO [0;39m [36morg.springframework.web.servlet.FrameworkServlet.initServletBean:509[0;39m - FrameworkServlet '': initialization completed in 4 ms
11:32:54.381 [34mINFO [0;39m [36mo.s.test.context.transaction.TransactionContext.startTransaction:107[0;39m - Began transaction (1) for test context [DefaultTestContext@5342032a testClass = UserProfileRestControllerTest, testInstance = ru.javawebinar.graduation.controller.user.UserProfileRestControllerTest@64a8d575, testMethod = testDuplicate@UserProfileRestControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@5a35ae82 testClass = UserProfileRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@1e95f584]; rollback [true]
Hibernate: 
    /* select
        generatedAlias0 
    from
        User as generatedAlias0 
    where
        generatedAlias0.email=:param0 */ select
            user0_.id as id1_3_,
            user0_.name as name2_3_,
            user0_.email as email3_3_,
            user0_.enabled as enabled4_3_,
            user0_.password as password5_3_,
            user0_.registered as register6_3_ 
        from
            users user0_ 
        where
            user0_.email=?
Hibernate: 
    /* load collection ru.javawebinar.graduation.model.User.roles */ select
        roles0_.user_id as user_id1_2_0_,
        roles0_.role as role2_2_0_ 
    from
        user_roles roles0_ 
    where
        roles0_.user_id=?
11:32:54.399 [34mINFO [0;39m [36mr.j.g.controller.user.AbstractUserController.update:50[0;39m - update UserTo{name='newName', email='admin@gmail.com', id=null} with id=100000
Hibernate: 
    /* update
        ru.javawebinar.graduation.model.User */ update
            users 
        set
            name=?,
            email=?,
            enabled=?,
            password=?,
            registered=? 
        where
            id=?
11:32:54.566 [31mWARN [0;39m [36morg.hibernate.engine.jdbc.spi.SqlExceptionHelper.logExceptions:137[0;39m - SQL Error: -104, SQLState: 23505
11:32:54.567 [1;31mERROR[0;39m [36morg.hibernate.engine.jdbc.spi.SqlExceptionHelper.logExceptions:142[0;39m - integrity constraint violation: unique constraint or index violation: USERS_UNIQUE_EMAIL_IDX
11:32:54.568 [1;31mERROR[0;39m [36morg.hibernate.internal.ExceptionMapperStandardImpl.mapManagedFlushFailure:39[0;39m - HHH000346: Error during managed flush [org.hibernate.exception.ConstraintViolationException: could not execute statement]
11:32:54.572 [31mWARN [0;39m [36mo.s.w.s.m.m.a.ExceptionHandlerExceptionResolver.doResolveHandlerMethodException:411[0;39m - Failed to invoke @ExceptionHandler method: public ru.javawebinar.graduation.util.exception.ErrorInfo ru.javawebinar.graduation.controller.ExceptionInfoHandler.conflict(javax.servlet.http.HttpServletRequest,org.springframework.dao.DataIntegrityViolationException)
org.springframework.context.NoSuchMessageException: No message found under code 'exception.user.duplicateEmail' for locale 'ru'.
	at org.springframework.context.support.AbstractMessageSource.getMessage(AbstractMessageSource.java:161)
	at ru.javawebinar.graduation.controller.MessageUtil.getMessage(MessageUtil.java:23)
	at ru.javawebinar.graduation.controller.MessageUtil.getMessage(MessageUtil.java:27)
	at ru.javawebinar.graduation.controller.ExceptionInfoHandler.conflict(ExceptionInfoHandler.java:68)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:209)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:136)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:102)
	at org.springframework.web.servlet.mvc.method.annotation.ExceptionHandlerExceptionResolver.doResolveHandlerMethodException(ExceptionHandlerExceptionResolver.java:400)
	at org.springframework.web.servlet.handler.AbstractHandlerMethodExceptionResolver.doResolveException(AbstractHandlerMethodExceptionResolver.java:61)
	at org.springframework.web.servlet.handler.AbstractHandlerExceptionResolver.resolveException(AbstractHandlerExceptionResolver.java:139)
	at org.springframework.web.servlet.DispatcherServlet.processHandlerException(DispatcherServlet.java:1255)
	at org.springframework.test.web.servlet.TestDispatcherServlet.processHandlerException(TestDispatcherServlet.java:133)
	at org.springframework.web.servlet.DispatcherServlet.processDispatchResult(DispatcherServlet.java:1062)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1008)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:925)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:974)
	at org.springframework.web.servlet.FrameworkServlet.doPut(FrameworkServlet.java:888)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:664)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:851)
	at org.springframework.test.web.servlet.TestDispatcherServlet.service(TestDispatcherServlet.java:71)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:742)
	at org.springframework.mock.web.MockFilterChain$ServletFilterProxy.doFilter(MockFilterChain.java:166)
	at org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:133)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:320)
	at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:127)
	at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:91)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:119)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:111)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:170)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.authentication.www.BasicAuthenticationFilter.doFilterInternal(BasicAuthenticationFilter.java:215)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:66)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:56)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:105)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:215)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:178)
	at org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:133)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:200)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:133)
	at org.springframework.test.web.servlet.MockMvc.perform(MockMvc.java:165)
	at ru.javawebinar.graduation.controller.user.UserProfileRestControllerTest.testDuplicate(UserProfileRestControllerTest.java:101)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.platform.commons.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:513)
	at org.junit.jupiter.engine.execution.ExecutableInvoker.invoke(ExecutableInvoker.java:115)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeTestMethod$6(TestMethodTestDescriptor.java:170)
	at org.junit.jupiter.engine.execution.ThrowableCollector.execute(ThrowableCollector.java:40)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeTestMethod(TestMethodTestDescriptor.java:166)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:113)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:58)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor$NodeExecutor.lambda$executeRecursively$3(HierarchicalTestExecutor.java:113)
	at org.junit.platform.engine.support.hierarchical.SingleTestExecutor.executeSafely(SingleTestExecutor.java:66)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor$NodeExecutor.executeRecursively(HierarchicalTestExecutor.java:108)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor$NodeExecutor.execute(HierarchicalTestExecutor.java:79)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor$NodeExecutor.lambda$executeRecursively$2(HierarchicalTestExecutor.java:121)
	at java.util.stream.ForEachOps$ForEachOp$OfRef.accept(ForEachOps.java:184)
	at java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:175)
	at java.util.Iterator.forEachRemaining(Iterator.java:116)
	at java.util.Spliterators$IteratorSpliterator.forEachRemaining(Spliterators.java:1801)
	at java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:481)
	at java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:471)
	at java.util.stream.ForEachOps$ForEachOp.evaluateSequential(ForEachOps.java:151)
	at java.util.stream.ForEachOps$ForEachOp$OfRef.evaluateSequential(ForEachOps.java:174)
	at java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)
	at java.util.stream.ReferencePipeline.forEach(ReferencePipeline.java:418)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor$NodeExecutor.lambda$executeRecursively$3(HierarchicalTestExecutor.java:121)
	at org.junit.platform.engine.support.hierarchical.SingleTestExecutor.executeSafely(SingleTestExecutor.java:66)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor$NodeExecutor.executeRecursively(HierarchicalTestExecutor.java:108)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor$NodeExecutor.execute(HierarchicalTestExecutor.java:79)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor$NodeExecutor.lambda$executeRecursively$2(HierarchicalTestExecutor.java:121)
	at java.util.stream.ForEachOps$ForEachOp$OfRef.accept(ForEachOps.java:184)
	at java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:175)
	at java.util.Iterator.forEachRemaining(Iterator.java:116)
	at java.util.Spliterators$IteratorSpliterator.forEachRemaining(Spliterators.java:1801)
	at java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:481)
	at java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:471)
	at java.util.stream.ForEachOps$ForEachOp.evaluateSequential(ForEachOps.java:151)
	at java.util.stream.ForEachOps$ForEachOp$OfRef.evaluateSequential(ForEachOps.java:174)
	at java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)
	at java.util.stream.ReferencePipeline.forEach(ReferencePipeline.java:418)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor$NodeExecutor.lambda$executeRecursively$3(HierarchicalTestExecutor.java:121)
	at org.junit.platform.engine.support.hierarchical.SingleTestExecutor.executeSafely(SingleTestExecutor.java:66)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor$NodeExecutor.executeRecursively(HierarchicalTestExecutor.java:108)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor$NodeExecutor.execute(HierarchicalTestExecutor.java:79)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:55)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:43)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:170)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:154)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:90)
	at org.junit.platform.surefire.provider.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:132)
	at org.junit.platform.surefire.provider.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:111)
	at org.apache.maven.surefire.booter.ForkedBooter.invokeProviderInSameClassLoader(ForkedBooter.java:383)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:344)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:125)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:417)
11:32:54.578 [34mINFO [0;39m [36mo.s.test.context.transaction.TransactionContext.endTransaction:139[0;39m - Rolled back transaction for test: [DefaultTestContext@5342032a testClass = UserProfileRestControllerTest, testInstance = ru.javawebinar.graduation.controller.user.UserProfileRestControllerTest@64a8d575, testMethod = testDuplicate@UserProfileRestControllerTest, testException = org.springframework.web.util.NestedServletException: Request processing failed; nested exception is org.springframework.dao.DataIntegrityViolationException: could not execute statement; SQL [n/a]; constraint [null]; nested exception is org.hibernate.exception.ConstraintViolationException: could not execute statement, mergedContextConfiguration = [WebMergedContextConfiguration@5a35ae82 testClass = UserProfileRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]
[ERROR] Tests run: 7, Failures: 1, Errors: 1, Skipped: 0, Time elapsed: 1.273 s <<< FAILURE! - in ru.javawebinar.graduation.controller.user.UserProfileRestControllerTest
[ERROR] testUpdateInvalid  Time elapsed: 0.244 s  <<< FAILURE!
java.lang.AssertionError: Status expected:<422> but was:<400>
	at ru.javawebinar.graduation.controller.user.UserProfileRestControllerTest.testUpdateInvalid(UserProfileRestControllerTest.java:91)

[ERROR] testDuplicate  Time elapsed: 0.203 s  <<< ERROR!
org.springframework.web.util.NestedServletException: Request processing failed; nested exception is org.springframework.dao.DataIntegrityViolationException: could not execute statement; SQL [n/a]; constraint [null]; nested exception is org.hibernate.exception.ConstraintViolationException: could not execute statement
	at ru.javawebinar.graduation.controller.user.UserProfileRestControllerTest.testDuplicate(UserProfileRestControllerTest.java:101)
Caused by: org.springframework.dao.DataIntegrityViolationException: could not execute statement; SQL [n/a]; constraint [null]; nested exception is org.hibernate.exception.ConstraintViolationException: could not execute statement
	at ru.javawebinar.graduation.controller.user.UserProfileRestControllerTest.testDuplicate(UserProfileRestControllerTest.java:101)
Caused by: org.hibernate.exception.ConstraintViolationException: could not execute statement
	at ru.javawebinar.graduation.controller.user.UserProfileRestControllerTest.testDuplicate(UserProfileRestControllerTest.java:101)
Caused by: java.sql.SQLIntegrityConstraintViolationException: integrity constraint violation: unique constraint or index violation: USERS_UNIQUE_EMAIL_IDX
	at ru.javawebinar.graduation.controller.user.UserProfileRestControllerTest.testDuplicate(UserProfileRestControllerTest.java:101)
Caused by: org.hsqldb.HsqlException: integrity constraint violation: unique constraint or index violation: USERS_UNIQUE_EMAIL_IDX
	at ru.javawebinar.graduation.controller.user.UserProfileRestControllerTest.testDuplicate(UserProfileRestControllerTest.java:101)

[INFO] Running ru.javawebinar.graduation.controller.restaurant.RestaurantAdminRestControllerTest
11:32:54.605 [34mINFO [0;39m [36mo.s.t.c.support.AbstractTestContextBootstrapper.getDefaultTestExecutionListenerClassNames:248[0;39m - Loaded default TestExecutionListener class names from location [META-INF/spring.factories]: [org.springframework.security.test.context.support.WithSecurityContextTestExecutionListener, org.springframework.security.test.context.support.ReactorContextTestExecutionListener, org.springframework.test.context.web.ServletTestExecutionListener, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener, org.springframework.test.context.support.DependencyInjectionTestExecutionListener, org.springframework.test.context.support.DirtiesContextTestExecutionListener, org.springframework.test.context.transaction.TransactionalTestExecutionListener, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener]
11:32:54.607 [34mINFO [0;39m [36mo.s.t.c.support.AbstractTestContextBootstrapper.getTestExecutionListeners:177[0;39m - Using TestExecutionListeners: [org.springframework.test.context.web.ServletTestExecutionListener@7f792530, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener@1adfb5b8, org.springframework.test.context.support.DependencyInjectionTestExecutionListener@254cc548, org.springframework.test.context.support.DirtiesContextTestExecutionListener@65f470f8, org.springframework.test.context.transaction.TransactionalTestExecutionListener@531299d3, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener@3487947c, org.springframework.security.test.context.support.WithSecurityContextTestExecutionListener@77226121, org.springframework.security.test.context.support.ReactorContextTestExecutionListener@3117ac8d]
11:32:54.622 [34mINFO [0;39m [36morg.springframework.mock.web.MockServletContext.log:438[0;39m - Initializing Spring FrameworkServlet ''
11:32:54.623 [34mINFO [0;39m [36morg.springframework.web.servlet.FrameworkServlet.initServletBean:494[0;39m - FrameworkServlet '': initialization started
11:32:54.627 [34mINFO [0;39m [36morg.springframework.web.servlet.FrameworkServlet.initServletBean:509[0;39m - FrameworkServlet '': initialization completed in 4 ms
11:32:54.678 [34mINFO [0;39m [36mo.s.test.context.transaction.TransactionContext.startTransaction:107[0;39m - Began transaction (1) for test context [DefaultTestContext@1978b0d5 testClass = RestaurantAdminRestControllerTest, testInstance = ru.javawebinar.graduation.controller.restaurant.RestaurantAdminRestControllerTest@6556471b, testMethod = testUpdateDuplicate@RestaurantAdminRestControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@3e1897d testClass = RestaurantAdminRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@1e95f584]; rollback [true]
Hibernate: 
    /* select
        generatedAlias0 
    from
        User as generatedAlias0 
    where
        generatedAlias0.email=:param0 */ select
            user0_.id as id1_3_,
            user0_.name as name2_3_,
            user0_.email as email3_3_,
            user0_.enabled as enabled4_3_,
            user0_.password as password5_3_,
            user0_.registered as register6_3_ 
        from
            users user0_ 
        where
            user0_.email=?
Hibernate: 
    /* load collection ru.javawebinar.graduation.model.User.roles */ select
        roles0_.user_id as user_id1_2_0_,
        roles0_.role as role2_2_0_ 
    from
        user_roles roles0_ 
    where
        roles0_.user_id=?
11:32:54.724 [34mINFO [0;39m [36mr.j.g.c.restaurant.AbstractRestaurantController.update:52[0;39m - update Restaurant{name='Little Wonder Cafe', id=100002} with id=100002
Hibernate: 
    select
        restaurant0_.id as id1_1_0_,
        restaurant0_.name as name2_1_0_ 
    from
        restaurants restaurant0_ 
    where
        restaurant0_.id=?
Hibernate: 
    /* load ru.javawebinar.graduation.model.Restaurant */ select
        restaurant0_.id as id1_1_0_,
        restaurant0_.name as name2_1_0_ 
    from
        restaurants restaurant0_ 
    where
        restaurant0_.id=?
Hibernate: 
    /* update
        ru.javawebinar.graduation.model.Restaurant */ update
            restaurants 
        set
            name=? 
        where
            id=?
11:32:54.743 [31mWARN [0;39m [36morg.hibernate.engine.jdbc.spi.SqlExceptionHelper.logExceptions:137[0;39m - SQL Error: -104, SQLState: 23505
11:32:54.744 [1;31mERROR[0;39m [36morg.hibernate.engine.jdbc.spi.SqlExceptionHelper.logExceptions:142[0;39m - integrity constraint violation: unique constraint or index violation: RESTAURANTS_UNIQUE_NAME_IDX
11:32:54.750 [1;31mERROR[0;39m [36morg.hibernate.internal.ExceptionMapperStandardImpl.mapManagedFlushFailure:39[0;39m - HHH000346: Error during managed flush [org.hibernate.exception.ConstraintViolationException: could not execute statement]
11:32:54.753 [31mWARN [0;39m [36mo.s.w.s.m.m.a.ExceptionHandlerExceptionResolver.doResolveHandlerMethodException:411[0;39m - Failed to invoke @ExceptionHandler method: public ru.javawebinar.graduation.util.exception.ErrorInfo ru.javawebinar.graduation.controller.ExceptionInfoHandler.conflict(javax.servlet.http.HttpServletRequest,org.springframework.dao.DataIntegrityViolationException)
org.springframework.context.NoSuchMessageException: No message found under code 'exception.restaurant.duplicateName' for locale 'ru'.
	at org.springframework.context.support.AbstractMessageSource.getMessage(AbstractMessageSource.java:161)
	at ru.javawebinar.graduation.controller.MessageUtil.getMessage(MessageUtil.java:23)
	at ru.javawebinar.graduation.controller.MessageUtil.getMessage(MessageUtil.java:27)
	at ru.javawebinar.graduation.controller.ExceptionInfoHandler.conflict(ExceptionInfoHandler.java:68)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:209)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:136)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:102)
	at org.springframework.web.servlet.mvc.method.annotation.ExceptionHandlerExceptionResolver.doResolveHandlerMethodException(ExceptionHandlerExceptionResolver.java:400)
	at org.springframework.web.servlet.handler.AbstractHandlerMethodExceptionResolver.doResolveException(AbstractHandlerMethodExceptionResolver.java:61)
	at org.springframework.web.servlet.handler.AbstractHandlerExceptionResolver.resolveException(AbstractHandlerExceptionResolver.java:139)
	at org.springframework.web.servlet.DispatcherServlet.processHandlerException(DispatcherServlet.java:1255)
	at org.springframework.test.web.servlet.TestDispatcherServlet.processHandlerException(TestDispatcherServlet.java:133)
	at org.springframework.web.servlet.DispatcherServlet.processDispatchResult(DispatcherServlet.java:1062)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1008)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:925)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:974)
	at org.springframework.web.servlet.FrameworkServlet.doPut(FrameworkServlet.java:888)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:664)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:851)
	at org.springframework.test.web.servlet.TestDispatcherServlet.service(TestDispatcherServlet.java:71)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:742)
	at org.springframework.mock.web.MockFilterChain$ServletFilterProxy.doFilter(MockFilterChain.java:166)
	at org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:133)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:320)
	at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:127)
	at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:91)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:119)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:111)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:170)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.authentication.www.BasicAuthenticationFilter.doFilterInternal(BasicAuthenticationFilter.java:215)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:66)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:56)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:105)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:215)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:178)
	at org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:133)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:200)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:133)
	at org.springframework.test.web.servlet.MockMvc.perform(MockMvc.java:165)
	at ru.javawebinar.graduation.controller.restaurant.RestaurantAdminRestControllerTest.testUpdateDuplicate(RestaurantAdminRestControllerTest.java:185)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.platform.commons.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:513)
	at org.junit.jupiter.engine.execution.ExecutableInvoker.invoke(ExecutableInvoker.java:115)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeTestMethod$6(TestMethodTestDescriptor.java:170)
	at org.junit.jupiter.engine.execution.ThrowableCollector.execute(ThrowableCollector.java:40)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeTestMethod(TestMethodTestDescriptor.java:166)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:113)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:58)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor$NodeExecutor.lambda$executeRecursively$3(HierarchicalTestExecutor.java:113)
	at org.junit.platform.engine.support.hierarchical.SingleTestExecutor.executeSafely(SingleTestExecutor.java:66)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor$NodeExecutor.executeRecursively(HierarchicalTestExecutor.java:108)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor$NodeExecutor.execute(HierarchicalTestExecutor.java:79)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor$NodeExecutor.lambda$executeRecursively$2(HierarchicalTestExecutor.java:121)
	at java.util.stream.ForEachOps$ForEachOp$OfRef.accept(ForEachOps.java:184)
	at java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:175)
	at java.util.Iterator.forEachRemaining(Iterator.java:116)
	at java.util.Spliterators$IteratorSpliterator.forEachRemaining(Spliterators.java:1801)
	at java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:481)
	at java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:471)
	at java.util.stream.ForEachOps$ForEachOp.evaluateSequential(ForEachOps.java:151)
	at java.util.stream.ForEachOps$ForEachOp$OfRef.evaluateSequential(ForEachOps.java:174)
	at java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)
	at java.util.stream.ReferencePipeline.forEach(ReferencePipeline.java:418)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor$NodeExecutor.lambda$executeRecursively$3(HierarchicalTestExecutor.java:121)
	at org.junit.platform.engine.support.hierarchical.SingleTestExecutor.executeSafely(SingleTestExecutor.java:66)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor$NodeExecutor.executeRecursively(HierarchicalTestExecutor.java:108)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor$NodeExecutor.execute(HierarchicalTestExecutor.java:79)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor$NodeExecutor.lambda$executeRecursively$2(HierarchicalTestExecutor.java:121)
	at java.util.stream.ForEachOps$ForEachOp$OfRef.accept(ForEachOps.java:184)
	at java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:175)
	at java.util.Iterator.forEachRemaining(Iterator.java:116)
	at java.util.Spliterators$IteratorSpliterator.forEachRemaining(Spliterators.java:1801)
	at java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:481)
	at java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:471)
	at java.util.stream.ForEachOps$ForEachOp.evaluateSequential(ForEachOps.java:151)
	at java.util.stream.ForEachOps$ForEachOp$OfRef.evaluateSequential(ForEachOps.java:174)
	at java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)
	at java.util.stream.ReferencePipeline.forEach(ReferencePipeline.java:418)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor$NodeExecutor.lambda$executeRecursively$3(HierarchicalTestExecutor.java:121)
	at org.junit.platform.engine.support.hierarchical.SingleTestExecutor.executeSafely(SingleTestExecutor.java:66)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor$NodeExecutor.executeRecursively(HierarchicalTestExecutor.java:108)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor$NodeExecutor.execute(HierarchicalTestExecutor.java:79)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:55)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:43)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:170)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:154)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:90)
	at org.junit.platform.surefire.provider.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:132)
	at org.junit.platform.surefire.provider.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:111)
	at org.apache.maven.surefire.booter.ForkedBooter.invokeProviderInSameClassLoader(ForkedBooter.java:383)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:344)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:125)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:417)
11:32:54.759 [34mINFO [0;39m [36mo.s.test.context.transaction.TransactionContext.endTransaction:139[0;39m - Rolled back transaction for test: [DefaultTestContext@1978b0d5 testClass = RestaurantAdminRestControllerTest, testInstance = ru.javawebinar.graduation.controller.restaurant.RestaurantAdminRestControllerTest@6556471b, testMethod = testUpdateDuplicate@RestaurantAdminRestControllerTest, testException = org.springframework.web.util.NestedServletException: Request processing failed; nested exception is org.springframework.dao.DataIntegrityViolationException: could not execute statement; SQL [n/a]; constraint [null]; nested exception is org.hibernate.exception.ConstraintViolationException: could not execute statement, mergedContextConfiguration = [WebMergedContextConfiguration@3e1897d testClass = RestaurantAdminRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]
11:32:54.765 [34mINFO [0;39m [36morg.springframework.mock.web.MockServletContext.log:438[0;39m - Initializing Spring FrameworkServlet ''
11:32:54.767 [34mINFO [0;39m [36morg.springframework.web.servlet.FrameworkServlet.initServletBean:494[0;39m - FrameworkServlet '': initialization started
11:32:54.771 [34mINFO [0;39m [36morg.springframework.web.servlet.FrameworkServlet.initServletBean:509[0;39m - FrameworkServlet '': initialization completed in 3 ms
11:32:54.776 [34mINFO [0;39m [36mo.s.test.context.transaction.TransactionContext.startTransaction:107[0;39m - Began transaction (1) for test context [DefaultTestContext@1978b0d5 testClass = RestaurantAdminRestControllerTest, testInstance = ru.javawebinar.graduation.controller.restaurant.RestaurantAdminRestControllerTest@75345e47, testMethod = testUpdateInvalid@RestaurantAdminRestControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@3e1897d testClass = RestaurantAdminRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@1e95f584]; rollback [true]
Hibernate: 
    /* select
        generatedAlias0 
    from
        User as generatedAlias0 
    where
        generatedAlias0.email=:param0 */ select
            user0_.id as id1_3_,
            user0_.name as name2_3_,
            user0_.email as email3_3_,
            user0_.enabled as enabled4_3_,
            user0_.password as password5_3_,
            user0_.registered as register6_3_ 
        from
            users user0_ 
        where
            user0_.email=?
Hibernate: 
    /* load collection ru.javawebinar.graduation.model.User.roles */ select
        roles0_.user_id as user_id1_2_0_,
        roles0_.role as role2_2_0_ 
    from
        user_roles roles0_ 
    where
        roles0_.user_id=?
11:32:54.797 [31mWARN [0;39m [36mr.j.graduation.controller.ExceptionInfoHandler.logAndGetErrorInfo:108[0;39m - VALIDATION_ERROR at request  http://localhost/rest/admin/restaurants/100002: org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument at index 0 in method: public void ru.javawebinar.graduation.controller.restaurant.RestaurantAdminRestController.update(ru.javawebinar.graduation.model.Restaurant,int), with 1 error(s): [Field error in object 'restaurant' on field 'name': rejected value [N]; codes [Size.restaurant.name,Size.name,Size.java.lang.String,Size]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [restaurant.name,name]; arguments []; default message [name],100,2]; default message [size must be between 2 and 100]] 
11:32:54.798 [31mWARN [0;39m [36mo.s.w.s.m.m.a.ExceptionHandlerExceptionResolver.doResolveHandlerMethodException:411[0;39m - Failed to invoke @ExceptionHandler method: public ru.javawebinar.graduation.util.exception.ErrorInfo ru.javawebinar.graduation.controller.ExceptionInfoHandler.methodArgumentValidationError(javax.servlet.http.HttpServletRequest,org.springframework.web.bind.MethodArgumentNotValidException)
org.springframework.context.NoSuchMessageException: No message found under code 'error.validationError' for locale 'ru'.
	at org.springframework.context.support.AbstractMessageSource.getMessage(AbstractMessageSource.java:161)
	at ru.javawebinar.graduation.controller.MessageUtil.getMessage(MessageUtil.java:23)
	at ru.javawebinar.graduation.controller.MessageUtil.getMessage(MessageUtil.java:27)
	at ru.javawebinar.graduation.controller.ExceptionInfoHandler.logAndGetErrorInfo(ExceptionInfoHandler.java:111)
	at ru.javawebinar.graduation.controller.ExceptionInfoHandler.methodArgumentValidationError(ExceptionInfoHandler.java:81)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:209)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:136)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:102)
	at org.springframework.web.servlet.mvc.method.annotation.ExceptionHandlerExceptionResolver.doResolveHandlerMethodException(ExceptionHandlerExceptionResolver.java:404)
	at org.springframework.web.servlet.handler.AbstractHandlerMethodExceptionResolver.doResolveException(AbstractHandlerMethodExceptionResolver.java:61)
	at org.springframework.web.servlet.handler.AbstractHandlerExceptionResolver.resolveException(AbstractHandlerExceptionResolver.java:139)
	at org.springframework.web.servlet.DispatcherServlet.processHandlerException(DispatcherServlet.java:1255)
	at org.springframework.test.web.servlet.TestDispatcherServlet.processHandlerException(TestDispatcherServlet.java:133)
	at org.springframework.web.servlet.DispatcherServlet.processDispatchResult(DispatcherServlet.java:1062)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1008)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:925)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:974)
	at org.springframework.web.servlet.FrameworkServlet.doPut(FrameworkServlet.java:888)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:664)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:851)
	at org.springframework.test.web.servlet.TestDispatcherServlet.service(TestDispatcherServlet.java:71)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:742)
	at org.springframework.mock.web.MockFilterChain$ServletFilterProxy.doFilter(MockFilterChain.java:166)
	at org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:133)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:320)
	at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:127)
	at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:91)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:119)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:111)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:170)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.authentication.www.BasicAuthenticationFilter.doFilterInternal(BasicAuthenticationFilter.java:215)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:66)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:56)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:105)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:215)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:178)
	at org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:133)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:200)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:133)
	at org.springframework.test.web.servlet.MockMvc.perform(MockMvc.java:165)
	at ru.javawebinar.graduation.controller.restaurant.RestaurantAdminRestControllerTest.testUpdateInvalid(RestaurantAdminRestControllerTest.java:169)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.platform.commons.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:513)
	at org.junit.jupiter.engine.execution.ExecutableInvoker.invoke(ExecutableInvoker.java:115)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeTestMethod$6(TestMethodTestDescriptor.java:170)
	at org.junit.jupiter.engine.execution.ThrowableCollector.execute(ThrowableCollector.java:40)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeTestMethod(TestMethodTestDescriptor.java:166)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:113)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:58)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor$NodeExecutor.lambda$executeRecursively$3(HierarchicalTestExecutor.java:113)
	at org.junit.platform.engine.support.hierarchical.SingleTestExecutor.executeSafely(SingleTestExecutor.java:66)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor$NodeExecutor.executeRecursively(HierarchicalTestExecutor.java:108)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor$NodeExecutor.execute(HierarchicalTestExecutor.java:79)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor$NodeExecutor.lambda$executeRecursively$2(HierarchicalTestExecutor.java:121)
	at java.util.stream.ForEachOps$ForEachOp$OfRef.accept(ForEachOps.java:184)
	at java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:175)
	at java.util.Iterator.forEachRemaining(Iterator.java:116)
	at java.util.Spliterators$IteratorSpliterator.forEachRemaining(Spliterators.java:1801)
	at java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:481)
	at java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:471)
	at java.util.stream.ForEachOps$ForEachOp.evaluateSequential(ForEachOps.java:151)
	at java.util.stream.ForEachOps$ForEachOp$OfRef.evaluateSequential(ForEachOps.java:174)
	at java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)
	at java.util.stream.ReferencePipeline.forEach(ReferencePipeline.java:418)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor$NodeExecutor.lambda$executeRecursively$3(HierarchicalTestExecutor.java:121)
	at org.junit.platform.engine.support.hierarchical.SingleTestExecutor.executeSafely(SingleTestExecutor.java:66)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor$NodeExecutor.executeRecursively(HierarchicalTestExecutor.java:108)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor$NodeExecutor.execute(HierarchicalTestExecutor.java:79)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor$NodeExecutor.lambda$executeRecursively$2(HierarchicalTestExecutor.java:121)
	at java.util.stream.ForEachOps$ForEachOp$OfRef.accept(ForEachOps.java:184)
	at java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:175)
	at java.util.Iterator.forEachRemaining(Iterator.java:116)
	at java.util.Spliterators$IteratorSpliterator.forEachRemaining(Spliterators.java:1801)
	at java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:481)
	at java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:471)
	at java.util.stream.ForEachOps$ForEachOp.evaluateSequential(ForEachOps.java:151)
	at java.util.stream.ForEachOps$ForEachOp$OfRef.evaluateSequential(ForEachOps.java:174)
	at java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)
	at java.util.stream.ReferencePipeline.forEach(ReferencePipeline.java:418)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor$NodeExecutor.lambda$executeRecursively$3(HierarchicalTestExecutor.java:121)
	at org.junit.platform.engine.support.hierarchical.SingleTestExecutor.executeSafely(SingleTestExecutor.java:66)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor$NodeExecutor.executeRecursively(HierarchicalTestExecutor.java:108)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor$NodeExecutor.execute(HierarchicalTestExecutor.java:79)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:55)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:43)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:170)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:154)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:90)
	at org.junit.platform.surefire.provider.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:132)
	at org.junit.platform.surefire.provider.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:111)
	at org.apache.maven.surefire.booter.ForkedBooter.invokeProviderInSameClassLoader(ForkedBooter.java:383)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:344)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:125)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:417)

MockHttpServletRequest:
      HTTP Method = PUT
      Request URI = /rest/admin/restaurants/100002
       Parameters = {}
          Headers = {Content-Type=[application/json;charset=UTF-8], Authorization=[Basic YWRtaW5AZ21haWwuY29tOmFkbWlu]}
             Body = {"id":100002,"name":"N"}
    Session Attrs = {}

Handler:
             Type = ru.javawebinar.graduation.controller.restaurant.RestaurantAdminRestController
           Method = public void ru.javawebinar.graduation.controller.restaurant.RestaurantAdminRestController.update(ru.javawebinar.graduation.model.Restaurant,int)

Async:
    Async started = false
     Async result = null

Resolved Exception:
             Type = org.springframework.web.bind.MethodArgumentNotValidException

ModelAndView:
        View name = null
             View = null
            Model = null

FlashMap:
       Attributes = null

MockHttpServletResponse:
           Status = 400
    Error message = null
          Headers = {Cache-Control=[no-cache, no-store, max-age=0, must-revalidate], Pragma=[no-cache], Expires=[0], X-XSS-Protection=[1; mode=block], X-Frame-Options=[DENY], X-Content-Type-Options=[nosniff]}
     Content type = null
             Body = 
    Forwarded URL = null
   Redirected URL = null
          Cookies = []
11:32:54.819 [34mINFO [0;39m [36mo.s.test.context.transaction.TransactionContext.endTransaction:139[0;39m - Rolled back transaction for test: [DefaultTestContext@1978b0d5 testClass = RestaurantAdminRestControllerTest, testInstance = ru.javawebinar.graduation.controller.restaurant.RestaurantAdminRestControllerTest@75345e47, testMethod = testUpdateInvalid@RestaurantAdminRestControllerTest, testException = java.lang.AssertionError: Status expected:<422> but was:<400>, mergedContextConfiguration = [WebMergedContextConfiguration@3e1897d testClass = RestaurantAdminRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]
11:32:54.823 [34mINFO [0;39m [36morg.springframework.mock.web.MockServletContext.log:438[0;39m - Initializing Spring FrameworkServlet ''
11:32:54.824 [34mINFO [0;39m [36morg.springframework.web.servlet.FrameworkServlet.initServletBean:494[0;39m - FrameworkServlet '': initialization started
11:32:54.827 [34mINFO [0;39m [36morg.springframework.web.servlet.FrameworkServlet.initServletBean:509[0;39m - FrameworkServlet '': initialization completed in 3 ms
11:32:54.834 [34mINFO [0;39m [36mo.s.test.context.transaction.TransactionContext.startTransaction:107[0;39m - Began transaction (1) for test context [DefaultTestContext@1978b0d5 testClass = RestaurantAdminRestControllerTest, testInstance = ru.javawebinar.graduation.controller.restaurant.RestaurantAdminRestControllerTest@3fe5ad73, testMethod = testDeleteNotFound@RestaurantAdminRestControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@3e1897d testClass = RestaurantAdminRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@1e95f584]; rollback [true]
Hibernate: 
    /* select
        generatedAlias0 
    from
        User as generatedAlias0 
    where
        generatedAlias0.email=:param0 */ select
            user0_.id as id1_3_,
            user0_.name as name2_3_,
            user0_.email as email3_3_,
            user0_.enabled as enabled4_3_,
            user0_.password as password5_3_,
            user0_.registered as register6_3_ 
        from
            users user0_ 
        where
            user0_.email=?
Hibernate: 
    /* load collection ru.javawebinar.graduation.model.User.roles */ select
        roles0_.user_id as user_id1_2_0_,
        roles0_.role as role2_2_0_ 
    from
        user_roles roles0_ 
    where
        roles0_.user_id=?
11:32:54.850 [34mINFO [0;39m [36mr.j.g.c.restaurant.AbstractRestaurantController.delete:47[0;39m - delete 100005
Hibernate: 
    /* DELETE 
    FROM
        Restaurant r 
    WHERE
        r.id=:id */ delete 
        from
            restaurants 
        where
            id=?
11:32:54.857 [31mWARN [0;39m [36mo.s.w.s.m.m.a.ExceptionHandlerExceptionResolver.doResolveHandlerMethodException:411[0;39m - Failed to invoke @ExceptionHandler method: public org.springframework.http.ResponseEntity<ru.javawebinar.graduation.util.exception.ErrorInfo> ru.javawebinar.graduation.controller.ExceptionInfoHandler.applicationError(javax.servlet.http.HttpServletRequest,ru.javawebinar.graduation.util.exception.ApplicationException)
org.springframework.context.NoSuchMessageException: No message found under code 'exception.common.notFound' for locale 'ru'.
	at org.springframework.context.support.AbstractMessageSource.getMessage(AbstractMessageSource.java:161)
	at ru.javawebinar.graduation.controller.MessageUtil.getMessage(MessageUtil.java:23)
	at ru.javawebinar.graduation.controller.MessageUtil.getMessage(MessageUtil.java:27)
	at ru.javawebinar.graduation.controller.MessageUtil.getMessage(MessageUtil.java:31)
	at ru.javawebinar.graduation.controller.ExceptionInfoHandler.applicationError(ExceptionInfoHandler.java:54)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:209)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:136)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:102)
	at org.springframework.web.servlet.mvc.method.annotation.ExceptionHandlerExceptionResolver.doResolveHandlerMethodException(ExceptionHandlerExceptionResolver.java:404)
	at org.springframework.web.servlet.handler.AbstractHandlerMethodExceptionResolver.doResolveException(AbstractHandlerMethodExceptionResolver.java:61)
	at org.springframework.web.servlet.handler.AbstractHandlerExceptionResolver.resolveException(AbstractHandlerExceptionResolver.java:139)
	at org.springframework.web.servlet.DispatcherServlet.processHandlerException(DispatcherServlet.java:1255)
	at org.springframework.test.web.servlet.TestDispatcherServlet.processHandlerException(TestDispatcherServlet.java:133)
	at org.springframework.web.servlet.DispatcherServlet.processDispatchResult(DispatcherServlet.java:1062)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1008)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:925)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:974)
	at org.springframework.web.servlet.FrameworkServlet.doDelete(FrameworkServlet.java:899)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:667)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:851)
	at org.springframework.test.web.servlet.TestDispatcherServlet.service(TestDispatcherServlet.java:71)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:742)
	at org.springframework.mock.web.MockFilterChain$ServletFilterProxy.doFilter(MockFilterChain.java:166)
	at org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:133)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:320)
	at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:127)
	at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:91)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:119)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:111)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:170)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.authentication.www.BasicAuthenticationFilter.doFilterInternal(BasicAuthenticationFilter.java:215)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:66)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:56)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:105)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:215)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:178)
	at org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:133)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:200)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:133)
	at org.springframework.test.web.servlet.MockMvc.perform(MockMvc.java:165)
	at ru.javawebinar.graduation.controller.restaurant.RestaurantAdminRestControllerTest.testDeleteNotFound(RestaurantAdminRestControllerTest.java:64)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.platform.commons.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:513)
	at org.junit.jupiter.engine.execution.ExecutableInvoker.invoke(ExecutableInvoker.java:115)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeTestMethod$6(TestMethodTestDescriptor.java:170)
	at org.junit.jupiter.engine.execution.ThrowableCollector.execute(ThrowableCollector.java:40)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeTestMethod(TestMethodTestDescriptor.java:166)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:113)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:58)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor$NodeExecutor.lambda$executeRecursively$3(HierarchicalTestExecutor.java:113)
	at org.junit.platform.engine.support.hierarchical.SingleTestExecutor.executeSafely(SingleTestExecutor.java:66)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor$NodeExecutor.executeRecursively(HierarchicalTestExecutor.java:108)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor$NodeExecutor.execute(HierarchicalTestExecutor.java:79)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor$NodeExecutor.lambda$executeRecursively$2(HierarchicalTestExecutor.java:121)
	at java.util.stream.ForEachOps$ForEachOp$OfRef.accept(ForEachOps.java:184)
	at java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:175)
	at java.util.Iterator.forEachRemaining(Iterator.java:116)
	at java.util.Spliterators$IteratorSpliterator.forEachRemaining(Spliterators.java:1801)
	at java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:481)
	at java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:471)
	at java.util.stream.ForEachOps$ForEachOp.evaluateSequential(ForEachOps.java:151)
	at java.util.stream.ForEachOps$ForEachOp$OfRef.evaluateSequential(ForEachOps.java:174)
	at java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)
	at java.util.stream.ReferencePipeline.forEach(ReferencePipeline.java:418)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor$NodeExecutor.lambda$executeRecursively$3(HierarchicalTestExecutor.java:121)
	at org.junit.platform.engine.support.hierarchical.SingleTestExecutor.executeSafely(SingleTestExecutor.java:66)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor$NodeExecutor.executeRecursively(HierarchicalTestExecutor.java:108)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor$NodeExecutor.execute(HierarchicalTestExecutor.java:79)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor$NodeExecutor.lambda$executeRecursively$2(HierarchicalTestExecutor.java:121)
	at java.util.stream.ForEachOps$ForEachOp$OfRef.accept(ForEachOps.java:184)
	at java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:175)
	at java.util.Iterator.forEachRemaining(Iterator.java:116)
	at java.util.Spliterators$IteratorSpliterator.forEachRemaining(Spliterators.java:1801)
	at java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:481)
	at java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:471)
	at java.util.stream.ForEachOps$ForEachOp.evaluateSequential(ForEachOps.java:151)
	at java.util.stream.ForEachOps$ForEachOp$OfRef.evaluateSequential(ForEachOps.java:174)
	at java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)
	at java.util.stream.ReferencePipeline.forEach(ReferencePipeline.java:418)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor$NodeExecutor.lambda$executeRecursively$3(HierarchicalTestExecutor.java:121)
	at org.junit.platform.engine.support.hierarchical.SingleTestExecutor.executeSafely(SingleTestExecutor.java:66)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor$NodeExecutor.executeRecursively(HierarchicalTestExecutor.java:108)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor$NodeExecutor.execute(HierarchicalTestExecutor.java:79)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:55)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:43)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:170)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:154)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:90)
	at org.junit.platform.surefire.provider.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:132)
	at org.junit.platform.surefire.provider.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:111)
	at org.apache.maven.surefire.booter.ForkedBooter.invokeProviderInSameClassLoader(ForkedBooter.java:383)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:344)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:125)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:417)
11:32:54.864 [31mWARN [0;39m [36mo.h.e.j.s.SqlExceptionHelper$StandardWarningHandler.logWarning:230[0;39m - SQL Warning Code: -1100, SQLState: 02000
11:32:54.865 [31mWARN [0;39m [36mo.h.e.j.s.SqlExceptionHelper$StandardWarningHandler.logWarning:231[0;39m - no data
11:32:54.868 [34mINFO [0;39m [36mo.s.test.context.transaction.TransactionContext.endTransaction:139[0;39m - Rolled back transaction for test: [DefaultTestContext@1978b0d5 testClass = RestaurantAdminRestControllerTest, testInstance = ru.javawebinar.graduation.controller.restaurant.RestaurantAdminRestControllerTest@3fe5ad73, testMethod = testDeleteNotFound@RestaurantAdminRestControllerTest, testException = org.springframework.web.util.NestedServletException: Request processing failed; nested exception is ru.javawebinar.graduation.util.exception.NotFoundException: type=DATA_NOT_FOUND, msgCode=exception.common.notFound, args=[id=100005], mergedContextConfiguration = [WebMergedContextConfiguration@3e1897d testClass = RestaurantAdminRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]
11:32:54.874 [34mINFO [0;39m [36morg.springframework.mock.web.MockServletContext.log:438[0;39m - Initializing Spring FrameworkServlet ''
11:32:54.875 [34mINFO [0;39m [36morg.springframework.web.servlet.FrameworkServlet.initServletBean:494[0;39m - FrameworkServlet '': initialization started
11:32:54.889 [34mINFO [0;39m [36morg.springframework.web.servlet.FrameworkServlet.initServletBean:509[0;39m - FrameworkServlet '': initialization completed in 3 ms
11:32:54.894 [34mINFO [0;39m [36mo.s.test.context.transaction.TransactionContext.startTransaction:107[0;39m - Began transaction (1) for test context [DefaultTestContext@1978b0d5 testClass = RestaurantAdminRestControllerTest, testInstance = ru.javawebinar.graduation.controller.restaurant.RestaurantAdminRestControllerTest@21579b35, testMethod = testGet@RestaurantAdminRestControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@3e1897d testClass = RestaurantAdminRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@1e95f584]; rollback [true]
Hibernate: 
    /* select
        generatedAlias0 
    from
        User as generatedAlias0 
    where
        generatedAlias0.email=:param0 */ select
            user0_.id as id1_3_,
            user0_.name as name2_3_,
            user0_.email as email3_3_,
            user0_.enabled as enabled4_3_,
            user0_.password as password5_3_,
            user0_.registered as register6_3_ 
        from
            users user0_ 
        where
            user0_.email=?
Hibernate: 
    /* load collection ru.javawebinar.graduation.model.User.roles */ select
        roles0_.user_id as user_id1_2_0_,
        roles0_.role as role2_2_0_ 
    from
        user_roles roles0_ 
    where
        roles0_.user_id=?
11:32:54.908 [34mINFO [0;39m [36mr.j.g.c.restaurant.AbstractRestaurantController.get:36[0;39m - get 100002
Hibernate: 
    select
        restaurant0_.id as id1_1_0_,
        restaurant0_.name as name2_1_0_ 
    from
        restaurants restaurant0_ 
    where
        restaurant0_.id=?

MockHttpServletRequest:
      HTTP Method = GET
      Request URI = /rest/admin/restaurants/100002
       Parameters = {}
          Headers = {Authorization=[Basic YWRtaW5AZ21haWwuY29tOmFkbWlu]}
             Body = null
    Session Attrs = {}

Handler:
             Type = ru.javawebinar.graduation.controller.restaurant.RestaurantAdminRestController
           Method = public ru.javawebinar.graduation.model.Restaurant ru.javawebinar.graduation.controller.restaurant.RestaurantAdminRestController.get(int)

Async:
    Async started = false
     Async result = null

Resolved Exception:
             Type = null

ModelAndView:
        View name = null
             View = null
            Model = null

FlashMap:
       Attributes = null

MockHttpServletResponse:
           Status = 200
    Error message = null
          Headers = {Content-Type=[application/json;charset=UTF-8], Cache-Control=[no-cache, no-store, max-age=0, must-revalidate], Pragma=[no-cache], Expires=[0], X-XSS-Protection=[1; mode=block], X-Frame-Options=[DENY], X-Content-Type-Options=[nosniff]}
     Content type = application/json;charset=UTF-8
             Body = {"id":100002,"name":"Cafe Maya","meals":null,"votes":null}
    Forwarded URL = null
   Redirected URL = null
          Cookies = []
11:32:54.931 [34mINFO [0;39m [36mo.s.test.context.transaction.TransactionContext.endTransaction:139[0;39m - Rolled back transaction for test: [DefaultTestContext@1978b0d5 testClass = RestaurantAdminRestControllerTest, testInstance = ru.javawebinar.graduation.controller.restaurant.RestaurantAdminRestControllerTest@21579b35, testMethod = testGet@RestaurantAdminRestControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@3e1897d testClass = RestaurantAdminRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]
11:32:54.934 [34mINFO [0;39m [36morg.springframework.mock.web.MockServletContext.log:438[0;39m - Initializing Spring FrameworkServlet ''
11:32:54.935 [34mINFO [0;39m [36morg.springframework.web.servlet.FrameworkServlet.initServletBean:494[0;39m - FrameworkServlet '': initialization started
11:32:54.939 [34mINFO [0;39m [36morg.springframework.web.servlet.FrameworkServlet.initServletBean:509[0;39m - FrameworkServlet '': initialization completed in 3 ms
11:32:54.944 [34mINFO [0;39m [36mo.s.test.context.transaction.TransactionContext.startTransaction:107[0;39m - Began transaction (1) for test context [DefaultTestContext@1978b0d5 testClass = RestaurantAdminRestControllerTest, testInstance = ru.javawebinar.graduation.controller.restaurant.RestaurantAdminRestControllerTest@2de96eba, testMethod = testGetNotFound@RestaurantAdminRestControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@3e1897d testClass = RestaurantAdminRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@1e95f584]; rollback [true]
Hibernate: 
    /* select
        generatedAlias0 
    from
        User as generatedAlias0 
    where
        generatedAlias0.email=:param0 */ select
            user0_.id as id1_3_,
            user0_.name as name2_3_,
            user0_.email as email3_3_,
            user0_.enabled as enabled4_3_,
            user0_.password as password5_3_,
            user0_.registered as register6_3_ 
        from
            users user0_ 
        where
            user0_.email=?
Hibernate: 
    /* load collection ru.javawebinar.graduation.model.User.roles */ select
        roles0_.user_id as user_id1_2_0_,
        roles0_.role as role2_2_0_ 
    from
        user_roles roles0_ 
    where
        roles0_.user_id=?
11:32:54.968 [34mINFO [0;39m [36mr.j.g.c.restaurant.AbstractRestaurantController.get:36[0;39m - get 100005
Hibernate: 
    select
        restaurant0_.id as id1_1_0_,
        restaurant0_.name as name2_1_0_ 
    from
        restaurants restaurant0_ 
    where
        restaurant0_.id=?
11:32:54.973 [31mWARN [0;39m [36mo.s.w.s.m.m.a.ExceptionHandlerExceptionResolver.doResolveHandlerMethodException:411[0;39m - Failed to invoke @ExceptionHandler method: public org.springframework.http.ResponseEntity<ru.javawebinar.graduation.util.exception.ErrorInfo> ru.javawebinar.graduation.controller.ExceptionInfoHandler.applicationError(javax.servlet.http.HttpServletRequest,ru.javawebinar.graduation.util.exception.ApplicationException)
org.springframework.context.NoSuchMessageException: No message found under code 'exception.common.notFound' for locale 'ru'.
	at org.springframework.context.support.AbstractMessageSource.getMessage(AbstractMessageSource.java:161)
	at ru.javawebinar.graduation.controller.MessageUtil.getMessage(MessageUtil.java:23)
	at ru.javawebinar.graduation.controller.MessageUtil.getMessage(MessageUtil.java:27)
	at ru.javawebinar.graduation.controller.MessageUtil.getMessage(MessageUtil.java:31)
	at ru.javawebinar.graduation.controller.ExceptionInfoHandler.applicationError(ExceptionInfoHandler.java:54)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:209)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:136)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:102)
	at org.springframework.web.servlet.mvc.method.annotation.ExceptionHandlerExceptionResolver.doResolveHandlerMethodException(ExceptionHandlerExceptionResolver.java:404)
	at org.springframework.web.servlet.handler.AbstractHandlerMethodExceptionResolver.doResolveException(AbstractHandlerMethodExceptionResolver.java:61)
	at org.springframework.web.servlet.handler.AbstractHandlerExceptionResolver.resolveException(AbstractHandlerExceptionResolver.java:139)
	at org.springframework.web.servlet.DispatcherServlet.processHandlerException(DispatcherServlet.java:1255)
	at org.springframework.test.web.servlet.TestDispatcherServlet.processHandlerException(TestDispatcherServlet.java:133)
	at org.springframework.web.servlet.DispatcherServlet.processDispatchResult(DispatcherServlet.java:1062)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1008)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:925)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:974)
	at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:866)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:635)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:851)
	at org.springframework.test.web.servlet.TestDispatcherServlet.service(TestDispatcherServlet.java:71)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:742)
	at org.springframework.mock.web.MockFilterChain$ServletFilterProxy.doFilter(MockFilterChain.java:166)
	at org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:133)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:320)
	at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:127)
	at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:91)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:119)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:111)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:170)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.authentication.www.BasicAuthenticationFilter.doFilterInternal(BasicAuthenticationFilter.java:215)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:66)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:56)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:105)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:215)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:178)
	at org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:133)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:200)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:133)
	at org.springframework.test.web.servlet.MockMvc.perform(MockMvc.java:165)
	at ru.javawebinar.graduation.controller.restaurant.RestaurantAdminRestControllerTest.testGetNotFound(RestaurantAdminRestControllerTest.java:49)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.platform.commons.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:513)
	at org.junit.jupiter.engine.execution.ExecutableInvoker.invoke(ExecutableInvoker.java:115)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeTestMethod$6(TestMethodTestDescriptor.java:170)
	at org.junit.jupiter.engine.execution.ThrowableCollector.execute(ThrowableCollector.java:40)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeTestMethod(TestMethodTestDescriptor.java:166)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:113)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:58)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor$NodeExecutor.lambda$executeRecursively$3(HierarchicalTestExecutor.java:113)
	at org.junit.platform.engine.support.hierarchical.SingleTestExecutor.executeSafely(SingleTestExecutor.java:66)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor$NodeExecutor.executeRecursively(HierarchicalTestExecutor.java:108)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor$NodeExecutor.execute(HierarchicalTestExecutor.java:79)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor$NodeExecutor.lambda$executeRecursively$2(HierarchicalTestExecutor.java:121)
	at java.util.stream.ForEachOps$ForEachOp$OfRef.accept(ForEachOps.java:184)
	at java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:175)
	at java.util.Iterator.forEachRemaining(Iterator.java:116)
	at java.util.Spliterators$IteratorSpliterator.forEachRemaining(Spliterators.java:1801)
	at java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:481)
	at java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:471)
	at java.util.stream.ForEachOps$ForEachOp.evaluateSequential(ForEachOps.java:151)
	at java.util.stream.ForEachOps$ForEachOp$OfRef.evaluateSequential(ForEachOps.java:174)
	at java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)
	at java.util.stream.ReferencePipeline.forEach(ReferencePipeline.java:418)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor$NodeExecutor.lambda$executeRecursively$3(HierarchicalTestExecutor.java:121)
	at org.junit.platform.engine.support.hierarchical.SingleTestExecutor.executeSafely(SingleTestExecutor.java:66)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor$NodeExecutor.executeRecursively(HierarchicalTestExecutor.java:108)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor$NodeExecutor.execute(HierarchicalTestExecutor.java:79)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor$NodeExecutor.lambda$executeRecursively$2(HierarchicalTestExecutor.java:121)
	at java.util.stream.ForEachOps$ForEachOp$OfRef.accept(ForEachOps.java:184)
	at java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:175)
	at java.util.Iterator.forEachRemaining(Iterator.java:116)
	at java.util.Spliterators$IteratorSpliterator.forEachRemaining(Spliterators.java:1801)
	at java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:481)
	at java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:471)
	at java.util.stream.ForEachOps$ForEachOp.evaluateSequential(ForEachOps.java:151)
	at java.util.stream.ForEachOps$ForEachOp$OfRef.evaluateSequential(ForEachOps.java:174)
	at java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)
	at java.util.stream.ReferencePipeline.forEach(ReferencePipeline.java:418)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor$NodeExecutor.lambda$executeRecursively$3(HierarchicalTestExecutor.java:121)
	at org.junit.platform.engine.support.hierarchical.SingleTestExecutor.executeSafely(SingleTestExecutor.java:66)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor$NodeExecutor.executeRecursively(HierarchicalTestExecutor.java:108)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor$NodeExecutor.execute(HierarchicalTestExecutor.java:79)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:55)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:43)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:170)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:154)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:90)
	at org.junit.platform.surefire.provider.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:132)
	at org.junit.platform.surefire.provider.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:111)
	at org.apache.maven.surefire.booter.ForkedBooter.invokeProviderInSameClassLoader(ForkedBooter.java:383)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:344)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:125)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:417)
11:32:54.979 [34mINFO [0;39m [36mo.s.test.context.transaction.TransactionContext.endTransaction:139[0;39m - Rolled back transaction for test: [DefaultTestContext@1978b0d5 testClass = RestaurantAdminRestControllerTest, testInstance = ru.javawebinar.graduation.controller.restaurant.RestaurantAdminRestControllerTest@2de96eba, testMethod = testGetNotFound@RestaurantAdminRestControllerTest, testException = org.springframework.web.util.NestedServletException: Request processing failed; nested exception is ru.javawebinar.graduation.util.exception.NotFoundException: type=DATA_NOT_FOUND, msgCode=exception.common.notFound, args=[id=100005], mergedContextConfiguration = [WebMergedContextConfiguration@3e1897d testClass = RestaurantAdminRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]
11:32:54.983 [34mINFO [0;39m [36morg.springframework.mock.web.MockServletContext.log:438[0;39m - Initializing Spring FrameworkServlet ''
11:32:54.983 [34mINFO [0;39m [36morg.springframework.web.servlet.FrameworkServlet.initServletBean:494[0;39m - FrameworkServlet '': initialization started
11:32:54.989 [34mINFO [0;39m [36morg.springframework.web.servlet.FrameworkServlet.initServletBean:509[0;39m - FrameworkServlet '': initialization completed in 5 ms
11:32:54.992 [34mINFO [0;39m [36mo.s.test.context.transaction.TransactionContext.startTransaction:107[0;39m - Began transaction (1) for test context [DefaultTestContext@1978b0d5 testClass = RestaurantAdminRestControllerTest, testInstance = ru.javawebinar.graduation.controller.restaurant.RestaurantAdminRestControllerTest@534d0cfa, testMethod = testCreateDuplicate@RestaurantAdminRestControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@3e1897d testClass = RestaurantAdminRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@1e95f584]; rollback [true]
Hibernate: 
    /* select
        generatedAlias0 
    from
        User as generatedAlias0 
    where
        generatedAlias0.email=:param0 */ select
            user0_.id as id1_3_,
            user0_.name as name2_3_,
            user0_.email as email3_3_,
            user0_.enabled as enabled4_3_,
            user0_.password as password5_3_,
            user0_.registered as register6_3_ 
        from
            users user0_ 
        where
            user0_.email=?
Hibernate: 
    /* load collection ru.javawebinar.graduation.model.User.roles */ select
        roles0_.user_id as user_id1_2_0_,
        roles0_.role as role2_2_0_ 
    from
        user_roles roles0_ 
    where
        roles0_.user_id=?
11:32:55.012 [34mINFO [0;39m [36mr.j.g.c.restaurant.AbstractRestaurantController.create:41[0;39m - create Restaurant{name='Little Wonder Cafe', id=null}
Hibernate: 
    call next value for global_seq
Hibernate: 
    /* insert ru.javawebinar.graduation.model.Restaurant
        */ insert 
        into
            restaurants
            (name, id) 
        values
            (?, ?)
11:32:55.016 [31mWARN [0;39m [36morg.hibernate.engine.jdbc.spi.SqlExceptionHelper.logExceptions:137[0;39m - SQL Error: -104, SQLState: 23505
11:32:55.037 [1;31mERROR[0;39m [36morg.hibernate.engine.jdbc.spi.SqlExceptionHelper.logExceptions:142[0;39m - integrity constraint violation: unique constraint or index violation: RESTAURANTS_UNIQUE_NAME_IDX
11:32:55.038 [1;31mERROR[0;39m [36morg.hibernate.internal.ExceptionMapperStandardImpl.mapManagedFlushFailure:39[0;39m - HHH000346: Error during managed flush [org.hibernate.exception.ConstraintViolationException: could not execute statement]
11:32:55.046 [31mWARN [0;39m [36mo.s.w.s.m.m.a.ExceptionHandlerExceptionResolver.doResolveHandlerMethodException:411[0;39m - Failed to invoke @ExceptionHandler method: public ru.javawebinar.graduation.util.exception.ErrorInfo ru.javawebinar.graduation.controller.ExceptionInfoHandler.conflict(javax.servlet.http.HttpServletRequest,org.springframework.dao.DataIntegrityViolationException)
org.springframework.context.NoSuchMessageException: No message found under code 'exception.restaurant.duplicateName' for locale 'ru'.
	at org.springframework.context.support.AbstractMessageSource.getMessage(AbstractMessageSource.java:161)
	at ru.javawebinar.graduation.controller.MessageUtil.getMessage(MessageUtil.java:23)
	at ru.javawebinar.graduation.controller.MessageUtil.getMessage(MessageUtil.java:27)
	at ru.javawebinar.graduation.controller.ExceptionInfoHandler.conflict(ExceptionInfoHandler.java:68)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:209)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:136)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:102)
	at org.springframework.web.servlet.mvc.method.annotation.ExceptionHandlerExceptionResolver.doResolveHandlerMethodException(ExceptionHandlerExceptionResolver.java:400)
	at org.springframework.web.servlet.handler.AbstractHandlerMethodExceptionResolver.doResolveException(AbstractHandlerMethodExceptionResolver.java:61)
	at org.springframework.web.servlet.handler.AbstractHandlerExceptionResolver.resolveException(AbstractHandlerExceptionResolver.java:139)
	at org.springframework.web.servlet.DispatcherServlet.processHandlerException(DispatcherServlet.java:1255)
	at org.springframework.test.web.servlet.TestDispatcherServlet.processHandlerException(TestDispatcherServlet.java:133)
	at org.springframework.web.servlet.DispatcherServlet.processDispatchResult(DispatcherServlet.java:1062)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1008)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:925)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:974)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:877)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:661)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:851)
	at org.springframework.test.web.servlet.TestDispatcherServlet.service(TestDispatcherServlet.java:71)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:742)
	at org.springframework.mock.web.MockFilterChain$ServletFilterProxy.doFilter(MockFilterChain.java:166)
	at org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:133)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:320)
	at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:127)
	at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:91)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:119)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:111)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:170)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.authentication.www.BasicAuthenticationFilter.doFilterInternal(BasicAuthenticationFilter.java:215)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:66)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:56)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:105)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:215)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:178)
	at org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:133)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:200)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:133)
	at org.springframework.test.web.servlet.MockMvc.perform(MockMvc.java:165)
	at ru.javawebinar.graduation.controller.restaurant.RestaurantAdminRestControllerTest.testCreateDuplicate(RestaurantAdminRestControllerTest.java:199)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.platform.commons.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:513)
	at org.junit.jupiter.engine.execution.ExecutableInvoker.invoke(ExecutableInvoker.java:115)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeTestMethod$6(TestMethodTestDescriptor.java:170)
	at org.junit.jupiter.engine.execution.ThrowableCollector.execute(ThrowableCollector.java:40)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeTestMethod(TestMethodTestDescriptor.java:166)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:113)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:58)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor$NodeExecutor.lambda$executeRecursively$3(HierarchicalTestExecutor.java:113)
	at org.junit.platform.engine.support.hierarchical.SingleTestExecutor.executeSafely(SingleTestExecutor.java:66)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor$NodeExecutor.executeRecursively(HierarchicalTestExecutor.java:108)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor$NodeExecutor.execute(HierarchicalTestExecutor.java:79)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor$NodeExecutor.lambda$executeRecursively$2(HierarchicalTestExecutor.java:121)
	at java.util.stream.ForEachOps$ForEachOp$OfRef.accept(ForEachOps.java:184)
	at java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:175)
	at java.util.Iterator.forEachRemaining(Iterator.java:116)
	at java.util.Spliterators$IteratorSpliterator.forEachRemaining(Spliterators.java:1801)
	at java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:481)
	at java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:471)
	at java.util.stream.ForEachOps$ForEachOp.evaluateSequential(ForEachOps.java:151)
	at java.util.stream.ForEachOps$ForEachOp$OfRef.evaluateSequential(ForEachOps.java:174)
	at java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)
	at java.util.stream.ReferencePipeline.forEach(ReferencePipeline.java:418)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor$NodeExecutor.lambda$executeRecursively$3(HierarchicalTestExecutor.java:121)
	at org.junit.platform.engine.support.hierarchical.SingleTestExecutor.executeSafely(SingleTestExecutor.java:66)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor$NodeExecutor.executeRecursively(HierarchicalTestExecutor.java:108)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor$NodeExecutor.execute(HierarchicalTestExecutor.java:79)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor$NodeExecutor.lambda$executeRecursively$2(HierarchicalTestExecutor.java:121)
	at java.util.stream.ForEachOps$ForEachOp$OfRef.accept(ForEachOps.java:184)
	at java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:175)
	at java.util.Iterator.forEachRemaining(Iterator.java:116)
	at java.util.Spliterators$IteratorSpliterator.forEachRemaining(Spliterators.java:1801)
	at java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:481)
	at java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:471)
	at java.util.stream.ForEachOps$ForEachOp.evaluateSequential(ForEachOps.java:151)
	at java.util.stream.ForEachOps$ForEachOp$OfRef.evaluateSequential(ForEachOps.java:174)
	at java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)
	at java.util.stream.ReferencePipeline.forEach(ReferencePipeline.java:418)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor$NodeExecutor.lambda$executeRecursively$3(HierarchicalTestExecutor.java:121)
	at org.junit.platform.engine.support.hierarchical.SingleTestExecutor.executeSafely(SingleTestExecutor.java:66)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor$NodeExecutor.executeRecursively(HierarchicalTestExecutor.java:108)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor$NodeExecutor.execute(HierarchicalTestExecutor.java:79)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:55)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:43)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:170)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:154)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:90)
	at org.junit.platform.surefire.provider.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:132)
	at org.junit.platform.surefire.provider.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:111)
	at org.apache.maven.surefire.booter.ForkedBooter.invokeProviderInSameClassLoader(ForkedBooter.java:383)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:344)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:125)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:417)
11:32:55.049 [34mINFO [0;39m [36mo.s.test.context.transaction.TransactionContext.endTransaction:139[0;39m - Rolled back transaction for test: [DefaultTestContext@1978b0d5 testClass = RestaurantAdminRestControllerTest, testInstance = ru.javawebinar.graduation.controller.restaurant.RestaurantAdminRestControllerTest@534d0cfa, testMethod = testCreateDuplicate@RestaurantAdminRestControllerTest, testException = org.springframework.web.util.NestedServletException: Request processing failed; nested exception is org.springframework.dao.DataIntegrityViolationException: could not execute statement; SQL [n/a]; constraint [null]; nested exception is org.hibernate.exception.ConstraintViolationException: could not execute statement, mergedContextConfiguration = [WebMergedContextConfiguration@3e1897d testClass = RestaurantAdminRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]
11:32:55.066 [34mINFO [0;39m [36morg.springframework.mock.web.MockServletContext.log:438[0;39m - Initializing Spring FrameworkServlet ''
11:32:55.075 [34mINFO [0;39m [36morg.springframework.web.servlet.FrameworkServlet.initServletBean:494[0;39m - FrameworkServlet '': initialization started
11:32:55.079 [34mINFO [0;39m [36morg.springframework.web.servlet.FrameworkServlet.initServletBean:509[0;39m - FrameworkServlet '': initialization completed in 4 ms
11:32:55.091 [34mINFO [0;39m [36mo.s.test.context.transaction.TransactionContext.startTransaction:107[0;39m - Began transaction (1) for test context [DefaultTestContext@1978b0d5 testClass = RestaurantAdminRestControllerTest, testInstance = ru.javawebinar.graduation.controller.restaurant.RestaurantAdminRestControllerTest@451a4187, testMethod = testUpdateHtmlUnsafe@RestaurantAdminRestControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@3e1897d testClass = RestaurantAdminRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@1e95f584]; rollback [true]
Hibernate: 
    /* select
        generatedAlias0 
    from
        User as generatedAlias0 
    where
        generatedAlias0.email=:param0 */ select
            user0_.id as id1_3_,
            user0_.name as name2_3_,
            user0_.email as email3_3_,
            user0_.enabled as enabled4_3_,
            user0_.password as password5_3_,
            user0_.registered as register6_3_ 
        from
            users user0_ 
        where
            user0_.email=?
Hibernate: 
    /* load collection ru.javawebinar.graduation.model.User.roles */ select
        roles0_.user_id as user_id1_2_0_,
        roles0_.role as role2_2_0_ 
    from
        user_roles roles0_ 
    where
        roles0_.user_id=?
11:32:55.113 [31mWARN [0;39m [36mr.j.graduation.controller.ExceptionInfoHandler.logAndGetErrorInfo:108[0;39m - VALIDATION_ERROR at request  http://localhost/rest/admin/restaurants/100002: org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument at index 0 in method: public void ru.javawebinar.graduation.controller.restaurant.RestaurantAdminRestController.update(ru.javawebinar.graduation.model.Restaurant,int), with 1 error(s): [Field error in object 'restaurant' on field 'name': rejected value [<script>alert(123)</script>]; codes [SafeHtml.restaurant.name,SafeHtml.name,SafeHtml.java.lang.String,SafeHtml]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [restaurant.name,name]; arguments []; default message [name],[Ljava.lang.String;@dcdb883,[Lorg.hibernate.validator.constraints.SafeHtml$Tag;@39420d59,org.springframework.validation.beanvalidation.SpringValidatorAdapter$ResolvableAttribute@4fbbd98c,RELAXED]; default message [may have unsafe html content]] 
11:32:55.115 [31mWARN [0;39m [36mo.s.w.s.m.m.a.ExceptionHandlerExceptionResolver.doResolveHandlerMethodException:411[0;39m - Failed to invoke @ExceptionHandler method: public ru.javawebinar.graduation.util.exception.ErrorInfo ru.javawebinar.graduation.controller.ExceptionInfoHandler.methodArgumentValidationError(javax.servlet.http.HttpServletRequest,org.springframework.web.bind.MethodArgumentNotValidException)
org.springframework.context.NoSuchMessageException: No message found under code 'error.validationError' for locale 'ru'.
	at org.springframework.context.support.AbstractMessageSource.getMessage(AbstractMessageSource.java:161)
	at ru.javawebinar.graduation.controller.MessageUtil.getMessage(MessageUtil.java:23)
	at ru.javawebinar.graduation.controller.MessageUtil.getMessage(MessageUtil.java:27)
	at ru.javawebinar.graduation.controller.ExceptionInfoHandler.logAndGetErrorInfo(ExceptionInfoHandler.java:111)
	at ru.javawebinar.graduation.controller.ExceptionInfoHandler.methodArgumentValidationError(ExceptionInfoHandler.java:81)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:209)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:136)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:102)
	at org.springframework.web.servlet.mvc.method.annotation.ExceptionHandlerExceptionResolver.doResolveHandlerMethodException(ExceptionHandlerExceptionResolver.java:404)
	at org.springframework.web.servlet.handler.AbstractHandlerMethodExceptionResolver.doResolveException(AbstractHandlerMethodExceptionResolver.java:61)
	at org.springframework.web.servlet.handler.AbstractHandlerExceptionResolver.resolveException(AbstractHandlerExceptionResolver.java:139)
	at org.springframework.web.servlet.DispatcherServlet.processHandlerException(DispatcherServlet.java:1255)
	at org.springframework.test.web.servlet.TestDispatcherServlet.processHandlerException(TestDispatcherServlet.java:133)
	at org.springframework.web.servlet.DispatcherServlet.processDispatchResult(DispatcherServlet.java:1062)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1008)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:925)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:974)
	at org.springframework.web.servlet.FrameworkServlet.doPut(FrameworkServlet.java:888)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:664)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:851)
	at org.springframework.test.web.servlet.TestDispatcherServlet.service(TestDispatcherServlet.java:71)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:742)
	at org.springframework.mock.web.MockFilterChain$ServletFilterProxy.doFilter(MockFilterChain.java:166)
	at org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:133)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:320)
	at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:127)
	at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:91)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:119)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:111)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:170)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.authentication.www.BasicAuthenticationFilter.doFilterInternal(BasicAuthenticationFilter.java:215)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:66)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:56)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:105)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:215)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:178)
	at org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:133)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:200)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:133)
	at org.springframework.test.web.servlet.MockMvc.perform(MockMvc.java:165)
	at ru.javawebinar.graduation.controller.restaurant.RestaurantAdminRestControllerTest.testUpdateHtmlUnsafe(RestaurantAdminRestControllerTest.java:143)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.platform.commons.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:513)
	at org.junit.jupiter.engine.execution.ExecutableInvoker.invoke(ExecutableInvoker.java:115)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeTestMethod$6(TestMethodTestDescriptor.java:170)
	at org.junit.jupiter.engine.execution.ThrowableCollector.execute(ThrowableCollector.java:40)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeTestMethod(TestMethodTestDescriptor.java:166)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:113)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:58)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor$NodeExecutor.lambda$executeRecursively$3(HierarchicalTestExecutor.java:113)
	at org.junit.platform.engine.support.hierarchical.SingleTestExecutor.executeSafely(SingleTestExecutor.java:66)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor$NodeExecutor.executeRecursively(HierarchicalTestExecutor.java:108)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor$NodeExecutor.execute(HierarchicalTestExecutor.java:79)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor$NodeExecutor.lambda$executeRecursively$2(HierarchicalTestExecutor.java:121)
	at java.util.stream.ForEachOps$ForEachOp$OfRef.accept(ForEachOps.java:184)
	at java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:175)
	at java.util.Iterator.forEachRemaining(Iterator.java:116)
	at java.util.Spliterators$IteratorSpliterator.forEachRemaining(Spliterators.java:1801)
	at java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:481)
	at java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:471)
	at java.util.stream.ForEachOps$ForEachOp.evaluateSequential(ForEachOps.java:151)
	at java.util.stream.ForEachOps$ForEachOp$OfRef.evaluateSequential(ForEachOps.java:174)
	at java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)
	at java.util.stream.ReferencePipeline.forEach(ReferencePipeline.java:418)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor$NodeExecutor.lambda$executeRecursively$3(HierarchicalTestExecutor.java:121)
	at org.junit.platform.engine.support.hierarchical.SingleTestExecutor.executeSafely(SingleTestExecutor.java:66)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor$NodeExecutor.executeRecursively(HierarchicalTestExecutor.java:108)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor$NodeExecutor.execute(HierarchicalTestExecutor.java:79)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor$NodeExecutor.lambda$executeRecursively$2(HierarchicalTestExecutor.java:121)
	at java.util.stream.ForEachOps$ForEachOp$OfRef.accept(ForEachOps.java:184)
	at java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:175)
	at java.util.Iterator.forEachRemaining(Iterator.java:116)
	at java.util.Spliterators$IteratorSpliterator.forEachRemaining(Spliterators.java:1801)
	at java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:481)
	at java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:471)
	at java.util.stream.ForEachOps$ForEachOp.evaluateSequential(ForEachOps.java:151)
	at java.util.stream.ForEachOps$ForEachOp$OfRef.evaluateSequential(ForEachOps.java:174)
	at java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)
	at java.util.stream.ReferencePipeline.forEach(ReferencePipeline.java:418)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor$NodeExecutor.lambda$executeRecursively$3(HierarchicalTestExecutor.java:121)
	at org.junit.platform.engine.support.hierarchical.SingleTestExecutor.executeSafely(SingleTestExecutor.java:66)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor$NodeExecutor.executeRecursively(HierarchicalTestExecutor.java:108)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor$NodeExecutor.execute(HierarchicalTestExecutor.java:79)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:55)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:43)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:170)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:154)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:90)
	at org.junit.platform.surefire.provider.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:132)
	at org.junit.platform.surefire.provider.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:111)
	at org.apache.maven.surefire.booter.ForkedBooter.invokeProviderInSameClassLoader(ForkedBooter.java:383)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:344)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:125)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:417)

MockHttpServletRequest:
      HTTP Method = PUT
      Request URI = /rest/admin/restaurants/100002
       Parameters = {}
          Headers = {Content-Type=[application/json;charset=UTF-8], Authorization=[Basic YWRtaW5AZ21haWwuY29tOmFkbWlu]}
             Body = {"id":100002,"name":"<script>alert(123)</script>"}
    Session Attrs = {}

Handler:
             Type = ru.javawebinar.graduation.controller.restaurant.RestaurantAdminRestController
           Method = public void ru.javawebinar.graduation.controller.restaurant.RestaurantAdminRestController.update(ru.javawebinar.graduation.model.Restaurant,int)

Async:
    Async started = false
     Async result = null

Resolved Exception:
             Type = org.springframework.web.bind.MethodArgumentNotValidException

ModelAndView:
        View name = null
             View = null
            Model = null

FlashMap:
       Attributes = null

MockHttpServletResponse:
           Status = 400
    Error message = null
          Headers = {Cache-Control=[no-cache, no-store, max-age=0, must-revalidate], Pragma=[no-cache], Expires=[0], X-XSS-Protection=[1; mode=block], X-Frame-Options=[DENY], X-Content-Type-Options=[nosniff]}
     Content type = null
             Body = 
    Forwarded URL = null
   Redirected URL = null
          Cookies = []
11:32:55.124 [34mINFO [0;39m [36mo.s.test.context.transaction.TransactionContext.endTransaction:139[0;39m - Rolled back transaction for test: [DefaultTestContext@1978b0d5 testClass = RestaurantAdminRestControllerTest, testInstance = ru.javawebinar.graduation.controller.restaurant.RestaurantAdminRestControllerTest@451a4187, testMethod = testUpdateHtmlUnsafe@RestaurantAdminRestControllerTest, testException = java.lang.AssertionError: Status expected:<422> but was:<400>, mergedContextConfiguration = [WebMergedContextConfiguration@3e1897d testClass = RestaurantAdminRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]
11:32:55.130 [34mINFO [0;39m [36morg.springframework.mock.web.MockServletContext.log:438[0;39m - Initializing Spring FrameworkServlet ''
11:32:55.131 [34mINFO [0;39m [36morg.springframework.web.servlet.FrameworkServlet.initServletBean:494[0;39m - FrameworkServlet '': initialization started
11:32:55.135 [34mINFO [0;39m [36morg.springframework.web.servlet.FrameworkServlet.initServletBean:509[0;39m - FrameworkServlet '': initialization completed in 3 ms
11:32:55.140 [34mINFO [0;39m [36mo.s.test.context.transaction.TransactionContext.startTransaction:107[0;39m - Began transaction (1) for test context [DefaultTestContext@1978b0d5 testClass = RestaurantAdminRestControllerTest, testInstance = ru.javawebinar.graduation.controller.restaurant.RestaurantAdminRestControllerTest@14ba7f15, testMethod = testCreateWithIllegalRequestData@RestaurantAdminRestControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@3e1897d testClass = RestaurantAdminRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@1e95f584]; rollback [true]
Hibernate: 
    /* select
        generatedAlias0 
    from
        User as generatedAlias0 
    where
        generatedAlias0.email=:param0 */ select
            user0_.id as id1_3_,
            user0_.name as name2_3_,
            user0_.email as email3_3_,
            user0_.enabled as enabled4_3_,
            user0_.password as password5_3_,
            user0_.registered as register6_3_ 
        from
            users user0_ 
        where
            user0_.email=?
Hibernate: 
    /* load collection ru.javawebinar.graduation.model.User.roles */ select
        roles0_.user_id as user_id1_2_0_,
        roles0_.role as role2_2_0_ 
    from
        user_roles roles0_ 
    where
        roles0_.user_id=?
11:32:55.163 [34mINFO [0;39m [36mr.j.g.c.restaurant.AbstractRestaurantController.create:41[0;39m - create Restaurant{name='Cafe Maya', id=100002}
11:32:55.164 [31mWARN [0;39m [36mr.j.graduation.controller.ExceptionInfoHandler.logAndGetErrorInfo:108[0;39m - VALIDATION_ERROR at request  http://localhost/rest/admin/restaurants/: ru.javawebinar.graduation.util.exception.IllegalRequestDataException: Restaurant{name='Cafe Maya', id=100002} must be new (id=null)
11:32:55.165 [31mWARN [0;39m [36mo.s.w.s.m.m.a.ExceptionHandlerExceptionResolver.doResolveHandlerMethodException:411[0;39m - Failed to invoke @ExceptionHandler method: public ru.javawebinar.graduation.util.exception.ErrorInfo ru.javawebinar.graduation.controller.ExceptionInfoHandler.illegalRequestDataError(javax.servlet.http.HttpServletRequest,java.lang.Exception)
org.springframework.context.NoSuchMessageException: No message found under code 'error.validationError' for locale 'ru'.
	at org.springframework.context.support.AbstractMessageSource.getMessage(AbstractMessageSource.java:161)
	at ru.javawebinar.graduation.controller.MessageUtil.getMessage(MessageUtil.java:23)
	at ru.javawebinar.graduation.controller.MessageUtil.getMessage(MessageUtil.java:27)
	at ru.javawebinar.graduation.controller.ExceptionInfoHandler.logAndGetErrorInfo(ExceptionInfoHandler.java:111)
	at ru.javawebinar.graduation.controller.ExceptionInfoHandler.illegalRequestDataError(ExceptionInfoHandler.java:94)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:209)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:136)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:102)
	at org.springframework.web.servlet.mvc.method.annotation.ExceptionHandlerExceptionResolver.doResolveHandlerMethodException(ExceptionHandlerExceptionResolver.java:404)
	at org.springframework.web.servlet.handler.AbstractHandlerMethodExceptionResolver.doResolveException(AbstractHandlerMethodExceptionResolver.java:61)
	at org.springframework.web.servlet.handler.AbstractHandlerExceptionResolver.resolveException(AbstractHandlerExceptionResolver.java:139)
	at org.springframework.web.servlet.DispatcherServlet.processHandlerException(DispatcherServlet.java:1255)
	at org.springframework.test.web.servlet.TestDispatcherServlet.processHandlerException(TestDispatcherServlet.java:133)
	at org.springframework.web.servlet.DispatcherServlet.processDispatchResult(DispatcherServlet.java:1062)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1008)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:925)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:974)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:877)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:661)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:851)
	at org.springframework.test.web.servlet.TestDispatcherServlet.service(TestDispatcherServlet.java:71)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:742)
	at org.springframework.mock.web.MockFilterChain$ServletFilterProxy.doFilter(MockFilterChain.java:166)
	at org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:133)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:320)
	at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:127)
	at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:91)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:119)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:111)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:170)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.authentication.www.BasicAuthenticationFilter.doFilterInternal(BasicAuthenticationFilter.java:215)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:66)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:56)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:105)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:215)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:178)
	at org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:133)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:200)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:133)
	at org.springframework.test.web.servlet.MockMvc.perform(MockMvc.java:165)
	at ru.javawebinar.graduation.controller.restaurant.RestaurantAdminRestControllerTest.testCreateWithIllegalRequestData(RestaurantAdminRestControllerTest.java:100)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.platform.commons.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:513)
	at org.junit.jupiter.engine.execution.ExecutableInvoker.invoke(ExecutableInvoker.java:115)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeTestMethod$6(TestMethodTestDescriptor.java:170)
	at org.junit.jupiter.engine.execution.ThrowableCollector.execute(ThrowableCollector.java:40)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeTestMethod(TestMethodTestDescriptor.java:166)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:113)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:58)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor$NodeExecutor.lambda$executeRecursively$3(HierarchicalTestExecutor.java:113)
	at org.junit.platform.engine.support.hierarchical.SingleTestExecutor.executeSafely(SingleTestExecutor.java:66)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor$NodeExecutor.executeRecursively(HierarchicalTestExecutor.java:108)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor$NodeExecutor.execute(HierarchicalTestExecutor.java:79)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor$NodeExecutor.lambda$executeRecursively$2(HierarchicalTestExecutor.java:121)
	at java.util.stream.ForEachOps$ForEachOp$OfRef.accept(ForEachOps.java:184)
	at java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:175)
	at java.util.Iterator.forEachRemaining(Iterator.java:116)
	at java.util.Spliterators$IteratorSpliterator.forEachRemaining(Spliterators.java:1801)
	at java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:481)
	at java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:471)
	at java.util.stream.ForEachOps$ForEachOp.evaluateSequential(ForEachOps.java:151)
	at java.util.stream.ForEachOps$ForEachOp$OfRef.evaluateSequential(ForEachOps.java:174)
	at java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)
	at java.util.stream.ReferencePipeline.forEach(ReferencePipeline.java:418)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor$NodeExecutor.lambda$executeRecursively$3(HierarchicalTestExecutor.java:121)
	at org.junit.platform.engine.support.hierarchical.SingleTestExecutor.executeSafely(SingleTestExecutor.java:66)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor$NodeExecutor.executeRecursively(HierarchicalTestExecutor.java:108)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor$NodeExecutor.execute(HierarchicalTestExecutor.java:79)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor$NodeExecutor.lambda$executeRecursively$2(HierarchicalTestExecutor.java:121)
	at java.util.stream.ForEachOps$ForEachOp$OfRef.accept(ForEachOps.java:184)
	at java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:175)
	at java.util.Iterator.forEachRemaining(Iterator.java:116)
	at java.util.Spliterators$IteratorSpliterator.forEachRemaining(Spliterators.java:1801)
	at java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:481)
	at java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:471)
	at java.util.stream.ForEachOps$ForEachOp.evaluateSequential(ForEachOps.java:151)
	at java.util.stream.ForEachOps$ForEachOp$OfRef.evaluateSequential(ForEachOps.java:174)
	at java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)
	at java.util.stream.ReferencePipeline.forEach(ReferencePipeline.java:418)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor$NodeExecutor.lambda$executeRecursively$3(HierarchicalTestExecutor.java:121)
	at org.junit.platform.engine.support.hierarchical.SingleTestExecutor.executeSafely(SingleTestExecutor.java:66)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor$NodeExecutor.executeRecursively(HierarchicalTestExecutor.java:108)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor$NodeExecutor.execute(HierarchicalTestExecutor.java:79)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:55)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:43)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:170)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:154)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:90)
	at org.junit.platform.surefire.provider.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:132)
	at org.junit.platform.surefire.provider.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:111)
	at org.apache.maven.surefire.booter.ForkedBooter.invokeProviderInSameClassLoader(ForkedBooter.java:383)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:344)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:125)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:417)
11:32:55.171 [34mINFO [0;39m [36mo.s.test.context.transaction.TransactionContext.endTransaction:139[0;39m - Rolled back transaction for test: [DefaultTestContext@1978b0d5 testClass = RestaurantAdminRestControllerTest, testInstance = ru.javawebinar.graduation.controller.restaurant.RestaurantAdminRestControllerTest@14ba7f15, testMethod = testCreateWithIllegalRequestData@RestaurantAdminRestControllerTest, testException = org.springframework.web.util.NestedServletException: Request processing failed; nested exception is ru.javawebinar.graduation.util.exception.IllegalRequestDataException: Restaurant{name='Cafe Maya', id=100002} must be new (id=null), mergedContextConfiguration = [WebMergedContextConfiguration@3e1897d testClass = RestaurantAdminRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]
11:32:55.175 [34mINFO [0;39m [36morg.springframework.mock.web.MockServletContext.log:438[0;39m - Initializing Spring FrameworkServlet ''
11:32:55.176 [34mINFO [0;39m [36morg.springframework.web.servlet.FrameworkServlet.initServletBean:494[0;39m - FrameworkServlet '': initialization started
11:32:55.179 [34mINFO [0;39m [36morg.springframework.web.servlet.FrameworkServlet.initServletBean:509[0;39m - FrameworkServlet '': initialization completed in 2 ms
11:32:55.186 [34mINFO [0;39m [36mo.s.test.context.transaction.TransactionContext.startTransaction:107[0;39m - Began transaction (1) for test context [DefaultTestContext@1978b0d5 testClass = RestaurantAdminRestControllerTest, testInstance = ru.javawebinar.graduation.controller.restaurant.RestaurantAdminRestControllerTest@1f365a26, testMethod = testGetByName@RestaurantAdminRestControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@3e1897d testClass = RestaurantAdminRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@1e95f584]; rollback [true]
Hibernate: 
    /* select
        generatedAlias0 
    from
        User as generatedAlias0 
    where
        generatedAlias0.email=:param0 */ select
            user0_.id as id1_3_,
            user0_.name as name2_3_,
            user0_.email as email3_3_,
            user0_.enabled as enabled4_3_,
            user0_.password as password5_3_,
            user0_.registered as register6_3_ 
        from
            users user0_ 
        where
            user0_.email=?
Hibernate: 
    /* load collection ru.javawebinar.graduation.model.User.roles */ select
        roles0_.user_id as user_id1_2_0_,
        roles0_.role as role2_2_0_ 
    from
        user_roles roles0_ 
    where
        roles0_.user_id=?
11:32:55.209 [34mINFO [0;39m [36mr.j.g.c.restaurant.AbstractRestaurantController.getByName:58[0;39m - getByName Cafe Maya
Hibernate: 
    /* select
        generatedAlias0 
    from
        Restaurant as generatedAlias0 
    where
        generatedAlias0.name=:param0 */ select
            restaurant0_.id as id1_1_,
            restaurant0_.name as name2_1_ 
        from
            restaurants restaurant0_ 
        where
            restaurant0_.name=?
11:32:55.222 [34mINFO [0;39m [36mo.s.test.context.transaction.TransactionContext.endTransaction:139[0;39m - Rolled back transaction for test: [DefaultTestContext@1978b0d5 testClass = RestaurantAdminRestControllerTest, testInstance = ru.javawebinar.graduation.controller.restaurant.RestaurantAdminRestControllerTest@1f365a26, testMethod = testGetByName@RestaurantAdminRestControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@3e1897d testClass = RestaurantAdminRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]
11:32:55.225 [34mINFO [0;39m [36morg.springframework.mock.web.MockServletContext.log:438[0;39m - Initializing Spring FrameworkServlet ''
11:32:55.225 [34mINFO [0;39m [36morg.springframework.web.servlet.FrameworkServlet.initServletBean:494[0;39m - FrameworkServlet '': initialization started
11:32:55.229 [34mINFO [0;39m [36morg.springframework.web.servlet.FrameworkServlet.initServletBean:509[0;39m - FrameworkServlet '': initialization completed in 3 ms
11:32:55.235 [34mINFO [0;39m [36mo.s.test.context.transaction.TransactionContext.startTransaction:107[0;39m - Began transaction (1) for test context [DefaultTestContext@1978b0d5 testClass = RestaurantAdminRestControllerTest, testInstance = ru.javawebinar.graduation.controller.restaurant.RestaurantAdminRestControllerTest@5a07ae2f, testMethod = testCreate@RestaurantAdminRestControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@3e1897d testClass = RestaurantAdminRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@1e95f584]; rollback [true]
Hibernate: 
    /* select
        generatedAlias0 
    from
        User as generatedAlias0 
    where
        generatedAlias0.email=:param0 */ select
            user0_.id as id1_3_,
            user0_.name as name2_3_,
            user0_.email as email3_3_,
            user0_.enabled as enabled4_3_,
            user0_.password as password5_3_,
            user0_.registered as register6_3_ 
        from
            users user0_ 
        where
            user0_.email=?
Hibernate: 
    /* load collection ru.javawebinar.graduation.model.User.roles */ select
        roles0_.user_id as user_id1_2_0_,
        roles0_.role as role2_2_0_ 
    from
        user_roles roles0_ 
    where
        roles0_.user_id=?
11:32:55.251 [34mINFO [0;39m [36mr.j.g.c.restaurant.AbstractRestaurantController.create:41[0;39m - create Restaurant{name='New Restaurant', id=null}
Hibernate: 
    call next value for global_seq
Hibernate: 
    /* insert ru.javawebinar.graduation.model.Restaurant
        */ insert 
        into
            restaurants
            (name, id) 
        values
            (?, ?)
Hibernate: 
    /* select
        generatedAlias0 
    from
        Restaurant as generatedAlias0 
    order by
        generatedAlias0.name asc */ select
            restaurant0_.id as id1_1_,
            restaurant0_.name as name2_1_ 
        from
            restaurants restaurant0_ 
        order by
            restaurant0_.name asc
11:32:55.279 [34mINFO [0;39m [36mo.s.test.context.transaction.TransactionContext.endTransaction:139[0;39m - Rolled back transaction for test: [DefaultTestContext@1978b0d5 testClass = RestaurantAdminRestControllerTest, testInstance = ru.javawebinar.graduation.controller.restaurant.RestaurantAdminRestControllerTest@5a07ae2f, testMethod = testCreate@RestaurantAdminRestControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@3e1897d testClass = RestaurantAdminRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]
11:32:55.282 [34mINFO [0;39m [36morg.springframework.mock.web.MockServletContext.log:438[0;39m - Initializing Spring FrameworkServlet ''
11:32:55.282 [34mINFO [0;39m [36morg.springframework.web.servlet.FrameworkServlet.initServletBean:494[0;39m - FrameworkServlet '': initialization started
11:32:55.286 [34mINFO [0;39m [36morg.springframework.web.servlet.FrameworkServlet.initServletBean:509[0;39m - FrameworkServlet '': initialization completed in 3 ms
11:32:55.291 [34mINFO [0;39m [36mo.s.test.context.transaction.TransactionContext.startTransaction:107[0;39m - Began transaction (1) for test context [DefaultTestContext@1978b0d5 testClass = RestaurantAdminRestControllerTest, testInstance = ru.javawebinar.graduation.controller.restaurant.RestaurantAdminRestControllerTest@3cab07dd, testMethod = testDelete@RestaurantAdminRestControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@3e1897d testClass = RestaurantAdminRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@1e95f584]; rollback [true]
Hibernate: 
    /* select
        generatedAlias0 
    from
        User as generatedAlias0 
    where
        generatedAlias0.email=:param0 */ select
            user0_.id as id1_3_,
            user0_.name as name2_3_,
            user0_.email as email3_3_,
            user0_.enabled as enabled4_3_,
            user0_.password as password5_3_,
            user0_.registered as register6_3_ 
        from
            users user0_ 
        where
            user0_.email=?
Hibernate: 
    /* load collection ru.javawebinar.graduation.model.User.roles */ select
        roles0_.user_id as user_id1_2_0_,
        roles0_.role as role2_2_0_ 
    from
        user_roles roles0_ 
    where
        roles0_.user_id=?
11:32:55.302 [34mINFO [0;39m [36mr.j.g.c.restaurant.AbstractRestaurantController.delete:47[0;39m - delete 100002
Hibernate: 
    /* DELETE 
    FROM
        Restaurant r 
    WHERE
        r.id=:id */ delete 
        from
            restaurants 
        where
            id=?
Hibernate: 
    /* select
        generatedAlias0 
    from
        Restaurant as generatedAlias0 
    order by
        generatedAlias0.name asc */ select
            restaurant0_.id as id1_1_,
            restaurant0_.name as name2_1_ 
        from
            restaurants restaurant0_ 
        order by
            restaurant0_.name asc
11:32:55.315 [34mINFO [0;39m [36mo.s.test.context.transaction.TransactionContext.endTransaction:139[0;39m - Rolled back transaction for test: [DefaultTestContext@1978b0d5 testClass = RestaurantAdminRestControllerTest, testInstance = ru.javawebinar.graduation.controller.restaurant.RestaurantAdminRestControllerTest@3cab07dd, testMethod = testDelete@RestaurantAdminRestControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@3e1897d testClass = RestaurantAdminRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]
11:32:55.319 [34mINFO [0;39m [36morg.springframework.mock.web.MockServletContext.log:438[0;39m - Initializing Spring FrameworkServlet ''
11:32:55.321 [34mINFO [0;39m [36morg.springframework.web.servlet.FrameworkServlet.initServletBean:494[0;39m - FrameworkServlet '': initialization started
11:32:55.337 [34mINFO [0;39m [36morg.springframework.web.servlet.FrameworkServlet.initServletBean:509[0;39m - FrameworkServlet '': initialization completed in 16 ms
11:32:55.358 [34mINFO [0;39m [36mo.s.test.context.transaction.TransactionContext.startTransaction:107[0;39m - Began transaction (1) for test context [DefaultTestContext@1978b0d5 testClass = RestaurantAdminRestControllerTest, testInstance = ru.javawebinar.graduation.controller.restaurant.RestaurantAdminRestControllerTest@22b10124, testMethod = testGetAll@RestaurantAdminRestControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@3e1897d testClass = RestaurantAdminRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@1e95f584]; rollback [true]
Hibernate: 
    /* select
        generatedAlias0 
    from
        User as generatedAlias0 
    where
        generatedAlias0.email=:param0 */ select
            user0_.id as id1_3_,
            user0_.name as name2_3_,
            user0_.email as email3_3_,
            user0_.enabled as enabled4_3_,
            user0_.password as password5_3_,
            user0_.registered as register6_3_ 
        from
            users user0_ 
        where
            user0_.email=?
Hibernate: 
    /* load collection ru.javawebinar.graduation.model.User.roles */ select
        roles0_.user_id as user_id1_2_0_,
        roles0_.role as role2_2_0_ 
    from
        user_roles roles0_ 
    where
        roles0_.user_id=?
11:32:55.367 [34mINFO [0;39m [36mr.j.g.c.restaurant.AbstractRestaurantController.getAll:31[0;39m - getAll
Hibernate: 
    /* select
        generatedAlias0 
    from
        Restaurant as generatedAlias0 
    order by
        generatedAlias0.name asc */ select
            restaurant0_.id as id1_1_,
            restaurant0_.name as name2_1_ 
        from
            restaurants restaurant0_ 
        order by
            restaurant0_.name asc

MockHttpServletRequest:
      HTTP Method = GET
      Request URI = /rest/admin/restaurants/
       Parameters = {}
          Headers = {Authorization=[Basic YWRtaW5AZ21haWwuY29tOmFkbWlu]}
             Body = null
    Session Attrs = {}

Handler:
             Type = ru.javawebinar.graduation.controller.restaurant.RestaurantAdminRestController
           Method = public java.util.List<ru.javawebinar.graduation.model.Restaurant> ru.javawebinar.graduation.controller.restaurant.RestaurantAdminRestController.getAll()

Async:
    Async started = false
     Async result = null

Resolved Exception:
             Type = null

ModelAndView:
        View name = null
             View = null
            Model = null

FlashMap:
       Attributes = null

MockHttpServletResponse:
           Status = 200
    Error message = null
          Headers = {Content-Type=[application/json;charset=UTF-8], Cache-Control=[no-cache, no-store, max-age=0, must-revalidate], Pragma=[no-cache], Expires=[0], X-XSS-Protection=[1; mode=block], X-Frame-Options=[DENY], X-Content-Type-Options=[nosniff]}
     Content type = application/json;charset=UTF-8
             Body = [{"id":100004,"name":"Cafe Loren","meals":null,"votes":null},{"id":100002,"name":"Cafe Maya","meals":null,"votes":null},{"id":100003,"name":"Little Wonder Cafe","meals":null,"votes":null}]
    Forwarded URL = null
   Redirected URL = null
          Cookies = []
11:32:55.389 [34mINFO [0;39m [36mo.s.test.context.transaction.TransactionContext.endTransaction:139[0;39m - Rolled back transaction for test: [DefaultTestContext@1978b0d5 testClass = RestaurantAdminRestControllerTest, testInstance = ru.javawebinar.graduation.controller.restaurant.RestaurantAdminRestControllerTest@22b10124, testMethod = testGetAll@RestaurantAdminRestControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@3e1897d testClass = RestaurantAdminRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]
11:32:55.392 [34mINFO [0;39m [36morg.springframework.mock.web.MockServletContext.log:438[0;39m - Initializing Spring FrameworkServlet ''
11:32:55.397 [34mINFO [0;39m [36morg.springframework.web.servlet.FrameworkServlet.initServletBean:494[0;39m - FrameworkServlet '': initialization started
11:32:55.401 [34mINFO [0;39m [36morg.springframework.web.servlet.FrameworkServlet.initServletBean:509[0;39m - FrameworkServlet '': initialization completed in 3 ms
11:32:55.405 [34mINFO [0;39m [36mo.s.test.context.transaction.TransactionContext.startTransaction:107[0;39m - Began transaction (1) for test context [DefaultTestContext@1978b0d5 testClass = RestaurantAdminRestControllerTest, testInstance = ru.javawebinar.graduation.controller.restaurant.RestaurantAdminRestControllerTest@3539cf45, testMethod = testGetUnAuth@RestaurantAdminRestControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@3e1897d testClass = RestaurantAdminRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@1e95f584]; rollback [true]
11:32:55.408 [34mINFO [0;39m [36mo.s.test.context.transaction.TransactionContext.endTransaction:139[0;39m - Rolled back transaction for test: [DefaultTestContext@1978b0d5 testClass = RestaurantAdminRestControllerTest, testInstance = ru.javawebinar.graduation.controller.restaurant.RestaurantAdminRestControllerTest@3539cf45, testMethod = testGetUnAuth@RestaurantAdminRestControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@3e1897d testClass = RestaurantAdminRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]
11:32:55.411 [34mINFO [0;39m [36morg.springframework.mock.web.MockServletContext.log:438[0;39m - Initializing Spring FrameworkServlet ''
11:32:55.411 [34mINFO [0;39m [36morg.springframework.web.servlet.FrameworkServlet.initServletBean:494[0;39m - FrameworkServlet '': initialization started
11:32:55.414 [34mINFO [0;39m [36morg.springframework.web.servlet.FrameworkServlet.initServletBean:509[0;39m - FrameworkServlet '': initialization completed in 2 ms
11:32:55.418 [34mINFO [0;39m [36mo.s.test.context.transaction.TransactionContext.startTransaction:107[0;39m - Began transaction (1) for test context [DefaultTestContext@1978b0d5 testClass = RestaurantAdminRestControllerTest, testInstance = ru.javawebinar.graduation.controller.restaurant.RestaurantAdminRestControllerTest@556a6320, testMethod = testUpdate@RestaurantAdminRestControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@3e1897d testClass = RestaurantAdminRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@1e95f584]; rollback [true]
Hibernate: 
    /* select
        generatedAlias0 
    from
        User as generatedAlias0 
    where
        generatedAlias0.email=:param0 */ select
            user0_.id as id1_3_,
            user0_.name as name2_3_,
            user0_.email as email3_3_,
            user0_.enabled as enabled4_3_,
            user0_.password as password5_3_,
            user0_.registered as register6_3_ 
        from
            users user0_ 
        where
            user0_.email=?
Hibernate: 
    /* load collection ru.javawebinar.graduation.model.User.roles */ select
        roles0_.user_id as user_id1_2_0_,
        roles0_.role as role2_2_0_ 
    from
        user_roles roles0_ 
    where
        roles0_.user_id=?
11:32:55.439 [34mINFO [0;39m [36mr.j.g.c.restaurant.AbstractRestaurantController.update:52[0;39m - update Restaurant{name='Updated Restaurant', id=100002} with id=100002
Hibernate: 
    select
        restaurant0_.id as id1_1_0_,
        restaurant0_.name as name2_1_0_ 
    from
        restaurants restaurant0_ 
    where
        restaurant0_.id=?
11:32:55.444 [34mINFO [0;39m [36mo.s.test.context.transaction.TransactionContext.endTransaction:139[0;39m - Rolled back transaction for test: [DefaultTestContext@1978b0d5 testClass = RestaurantAdminRestControllerTest, testInstance = ru.javawebinar.graduation.controller.restaurant.RestaurantAdminRestControllerTest@556a6320, testMethod = testUpdate@RestaurantAdminRestControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@3e1897d testClass = RestaurantAdminRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]
11:32:55.449 [34mINFO [0;39m [36morg.springframework.mock.web.MockServletContext.log:438[0;39m - Initializing Spring FrameworkServlet ''
11:32:55.450 [34mINFO [0;39m [36morg.springframework.web.servlet.FrameworkServlet.initServletBean:494[0;39m - FrameworkServlet '': initialization started
11:32:55.453 [34mINFO [0;39m [36morg.springframework.web.servlet.FrameworkServlet.initServletBean:509[0;39m - FrameworkServlet '': initialization completed in 2 ms
11:32:55.458 [34mINFO [0;39m [36mo.s.test.context.transaction.TransactionContext.startTransaction:107[0;39m - Began transaction (1) for test context [DefaultTestContext@1978b0d5 testClass = RestaurantAdminRestControllerTest, testInstance = ru.javawebinar.graduation.controller.restaurant.RestaurantAdminRestControllerTest@670ae31f, testMethod = testCreateInvalid@RestaurantAdminRestControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@3e1897d testClass = RestaurantAdminRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@1e95f584]; rollback [true]
Hibernate: 
    /* select
        generatedAlias0 
    from
        User as generatedAlias0 
    where
        generatedAlias0.email=:param0 */ select
            user0_.id as id1_3_,
            user0_.name as name2_3_,
            user0_.email as email3_3_,
            user0_.enabled as enabled4_3_,
            user0_.password as password5_3_,
            user0_.registered as register6_3_ 
        from
            users user0_ 
        where
            user0_.email=?
Hibernate: 
    /* load collection ru.javawebinar.graduation.model.User.roles */ select
        roles0_.user_id as user_id1_2_0_,
        roles0_.role as role2_2_0_ 
    from
        user_roles roles0_ 
    where
        roles0_.user_id=?
11:32:55.469 [31mWARN [0;39m [36mr.j.graduation.controller.ExceptionInfoHandler.logAndGetErrorInfo:108[0;39m - VALIDATION_ERROR at request  http://localhost/rest/admin/restaurants/: org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument at index 0 in method: public org.springframework.http.ResponseEntity<ru.javawebinar.graduation.model.Restaurant> ru.javawebinar.graduation.controller.restaurant.RestaurantAdminRestController.add(ru.javawebinar.graduation.model.Restaurant), with 2 error(s): [Field error in object 'restaurant' on field 'name': rejected value []; codes [NotBlank.restaurant.name,NotBlank.name,NotBlank.java.lang.String,NotBlank]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [restaurant.name,name]; arguments []; default message [name]]; default message [must not be blank]] [Field error in object 'restaurant' on field 'name': rejected value []; codes [Size.restaurant.name,Size.name,Size.java.lang.String,Size]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [restaurant.name,name]; arguments []; default message [name],100,2]; default message [size must be between 2 and 100]] 
11:32:55.470 [31mWARN [0;39m [36mo.s.w.s.m.m.a.ExceptionHandlerExceptionResolver.doResolveHandlerMethodException:411[0;39m - Failed to invoke @ExceptionHandler method: public ru.javawebinar.graduation.util.exception.ErrorInfo ru.javawebinar.graduation.controller.ExceptionInfoHandler.methodArgumentValidationError(javax.servlet.http.HttpServletRequest,org.springframework.web.bind.MethodArgumentNotValidException)
org.springframework.context.NoSuchMessageException: No message found under code 'error.validationError' for locale 'ru'.
	at org.springframework.context.support.AbstractMessageSource.getMessage(AbstractMessageSource.java:161)
	at ru.javawebinar.graduation.controller.MessageUtil.getMessage(MessageUtil.java:23)
	at ru.javawebinar.graduation.controller.MessageUtil.getMessage(MessageUtil.java:27)
	at ru.javawebinar.graduation.controller.ExceptionInfoHandler.logAndGetErrorInfo(ExceptionInfoHandler.java:111)
	at ru.javawebinar.graduation.controller.ExceptionInfoHandler.methodArgumentValidationError(ExceptionInfoHandler.java:81)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:209)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:136)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:102)
	at org.springframework.web.servlet.mvc.method.annotation.ExceptionHandlerExceptionResolver.doResolveHandlerMethodException(ExceptionHandlerExceptionResolver.java:404)
	at org.springframework.web.servlet.handler.AbstractHandlerMethodExceptionResolver.doResolveException(AbstractHandlerMethodExceptionResolver.java:61)
	at org.springframework.web.servlet.handler.AbstractHandlerExceptionResolver.resolveException(AbstractHandlerExceptionResolver.java:139)
	at org.springframework.web.servlet.DispatcherServlet.processHandlerException(DispatcherServlet.java:1255)
	at org.springframework.test.web.servlet.TestDispatcherServlet.processHandlerException(TestDispatcherServlet.java:133)
	at org.springframework.web.servlet.DispatcherServlet.processDispatchResult(DispatcherServlet.java:1062)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1008)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:925)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:974)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:877)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:661)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:851)
	at org.springframework.test.web.servlet.TestDispatcherServlet.service(TestDispatcherServlet.java:71)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:742)
	at org.springframework.mock.web.MockFilterChain$ServletFilterProxy.doFilter(MockFilterChain.java:166)
	at org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:133)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:320)
	at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:127)
	at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:91)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:119)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:111)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:170)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.authentication.www.BasicAuthenticationFilter.doFilterInternal(BasicAuthenticationFilter.java:215)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:66)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:56)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:105)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:215)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:178)
	at org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:133)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:200)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:133)
	at org.springframework.test.web.servlet.MockMvc.perform(MockMvc.java:165)
	at ru.javawebinar.graduation.controller.restaurant.RestaurantAdminRestControllerTest.testCreateInvalid(RestaurantAdminRestControllerTest.java:156)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.platform.commons.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:513)
	at org.junit.jupiter.engine.execution.ExecutableInvoker.invoke(ExecutableInvoker.java:115)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeTestMethod$6(TestMethodTestDescriptor.java:170)
	at org.junit.jupiter.engine.execution.ThrowableCollector.execute(ThrowableCollector.java:40)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeTestMethod(TestMethodTestDescriptor.java:166)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:113)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:58)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor$NodeExecutor.lambda$executeRecursively$3(HierarchicalTestExecutor.java:113)
	at org.junit.platform.engine.support.hierarchical.SingleTestExecutor.executeSafely(SingleTestExecutor.java:66)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor$NodeExecutor.executeRecursively(HierarchicalTestExecutor.java:108)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor$NodeExecutor.execute(HierarchicalTestExecutor.java:79)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor$NodeExecutor.lambda$executeRecursively$2(HierarchicalTestExecutor.java:121)
	at java.util.stream.ForEachOps$ForEachOp$OfRef.accept(ForEachOps.java:184)
	at java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:175)
	at java.util.Iterator.forEachRemaining(Iterator.java:116)
	at java.util.Spliterators$IteratorSpliterator.forEachRemaining(Spliterators.java:1801)
	at java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:481)
	at java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:471)
	at java.util.stream.ForEachOps$ForEachOp.evaluateSequential(ForEachOps.java:151)
	at java.util.stream.ForEachOps$ForEachOp$OfRef.evaluateSequential(ForEachOps.java:174)
	at java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)
	at java.util.stream.ReferencePipeline.forEach(ReferencePipeline.java:418)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor$NodeExecutor.lambda$executeRecursively$3(HierarchicalTestExecutor.java:121)
	at org.junit.platform.engine.support.hierarchical.SingleTestExecutor.executeSafely(SingleTestExecutor.java:66)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor$NodeExecutor.executeRecursively(HierarchicalTestExecutor.java:108)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor$NodeExecutor.execute(HierarchicalTestExecutor.java:79)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor$NodeExecutor.lambda$executeRecursively$2(HierarchicalTestExecutor.java:121)
	at java.util.stream.ForEachOps$ForEachOp$OfRef.accept(ForEachOps.java:184)
	at java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:175)
	at java.util.Iterator.forEachRemaining(Iterator.java:116)
	at java.util.Spliterators$IteratorSpliterator.forEachRemaining(Spliterators.java:1801)
	at java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:481)
	at java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:471)
	at java.util.stream.ForEachOps$ForEachOp.evaluateSequential(ForEachOps.java:151)
	at java.util.stream.ForEachOps$ForEachOp$OfRef.evaluateSequential(ForEachOps.java:174)
	at java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)
	at java.util.stream.ReferencePipeline.forEach(ReferencePipeline.java:418)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor$NodeExecutor.lambda$executeRecursively$3(HierarchicalTestExecutor.java:121)
	at org.junit.platform.engine.support.hierarchical.SingleTestExecutor.executeSafely(SingleTestExecutor.java:66)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor$NodeExecutor.executeRecursively(HierarchicalTestExecutor.java:108)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor$NodeExecutor.execute(HierarchicalTestExecutor.java:79)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:55)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:43)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:170)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:154)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:90)
	at org.junit.platform.surefire.provider.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:132)
	at org.junit.platform.surefire.provider.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:111)
	at org.apache.maven.surefire.booter.ForkedBooter.invokeProviderInSameClassLoader(ForkedBooter.java:383)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:344)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:125)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:417)

MockHttpServletRequest:
      HTTP Method = POST
      Request URI = /rest/admin/restaurants/
       Parameters = {}
          Headers = {Content-Type=[application/json;charset=UTF-8], Authorization=[Basic YWRtaW5AZ21haWwuY29tOmFkbWlu]}
             Body = {"name":""}
    Session Attrs = {}

Handler:
             Type = ru.javawebinar.graduation.controller.restaurant.RestaurantAdminRestController
           Method = public org.springframework.http.ResponseEntity<ru.javawebinar.graduation.model.Restaurant> ru.javawebinar.graduation.controller.restaurant.RestaurantAdminRestController.add(ru.javawebinar.graduation.model.Restaurant)

Async:
    Async started = false
     Async result = null

Resolved Exception:
             Type = org.springframework.web.bind.MethodArgumentNotValidException

ModelAndView:
        View name = null
             View = null
            Model = null

FlashMap:
       Attributes = null

MockHttpServletResponse:
           Status = 400
    Error message = null
          Headers = {Cache-Control=[no-cache, no-store, max-age=0, must-revalidate], Pragma=[no-cache], Expires=[0], X-XSS-Protection=[1; mode=block], X-Frame-Options=[DENY], X-Content-Type-Options=[nosniff]}
     Content type = null
             Body = 
    Forwarded URL = null
   Redirected URL = null
          Cookies = []
11:32:55.475 [34mINFO [0;39m [36mo.s.test.context.transaction.TransactionContext.endTransaction:139[0;39m - Rolled back transaction for test: [DefaultTestContext@1978b0d5 testClass = RestaurantAdminRestControllerTest, testInstance = ru.javawebinar.graduation.controller.restaurant.RestaurantAdminRestControllerTest@670ae31f, testMethod = testCreateInvalid@RestaurantAdminRestControllerTest, testException = java.lang.AssertionError: Status expected:<422> but was:<400>, mergedContextConfiguration = [WebMergedContextConfiguration@3e1897d testClass = RestaurantAdminRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]
11:32:55.478 [34mINFO [0;39m [36morg.springframework.mock.web.MockServletContext.log:438[0;39m - Initializing Spring FrameworkServlet ''
11:32:55.479 [34mINFO [0;39m [36morg.springframework.web.servlet.FrameworkServlet.initServletBean:494[0;39m - FrameworkServlet '': initialization started
11:32:55.483 [34mINFO [0;39m [36morg.springframework.web.servlet.FrameworkServlet.initServletBean:509[0;39m - FrameworkServlet '': initialization completed in 2 ms
11:32:55.487 [34mINFO [0;39m [36mo.s.test.context.transaction.TransactionContext.startTransaction:107[0;39m - Began transaction (1) for test context [DefaultTestContext@1978b0d5 testClass = RestaurantAdminRestControllerTest, testInstance = ru.javawebinar.graduation.controller.restaurant.RestaurantAdminRestControllerTest@4edde05c, testMethod = testGetWithMeals@RestaurantAdminRestControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@3e1897d testClass = RestaurantAdminRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@1e95f584]; rollback [true]
Hibernate: 
    /* select
        generatedAlias0 
    from
        User as generatedAlias0 
    where
        generatedAlias0.email=:param0 */ select
            user0_.id as id1_3_,
            user0_.name as name2_3_,
            user0_.email as email3_3_,
            user0_.enabled as enabled4_3_,
            user0_.password as password5_3_,
            user0_.registered as register6_3_ 
        from
            users user0_ 
        where
            user0_.email=?
Hibernate: 
    /* load collection ru.javawebinar.graduation.model.User.roles */ select
        roles0_.user_id as user_id1_2_0_,
        roles0_.role as role2_2_0_ 
    from
        user_roles roles0_ 
    where
        roles0_.user_id=?
11:32:55.500 [34mINFO [0;39m [36mr.j.g.c.restaurant.AbstractRestaurantController.getWithMeals:63[0;39m - getWithMeals 100002
Hibernate: 
    /* SELECT
        r 
    FROM
        Restaurant r 
    LEFT JOIN
        FETCH r.meals m 
    WHERE
        r.id=:id 
        AND m.created=:date */ select
            restaurant0_.id as id1_1_0_,
            meals1_.id as id1_0_1_,
            restaurant0_.name as name2_1_0_,
            meals1_.name as name2_0_1_,
            meals1_.created as created3_0_1_,
            meals1_.price as price4_0_1_,
            meals1_.restaurant_id as restaura5_0_1_,
            meals1_.restaurant_id as restaura5_0_0__,
            meals1_.id as id1_0_0__ 
        from
            restaurants restaurant0_ 
        left outer join
            meals meals1_ 
                on restaurant0_.id=meals1_.restaurant_id 
        where
            restaurant0_.id=? 
            and meals1_.created=? 
        order by
            meals1_.created desc

MockHttpServletRequest:
      HTTP Method = GET
      Request URI = /rest/admin/restaurants/100002/meals
       Parameters = {}
          Headers = {Authorization=[Basic YWRtaW5AZ21haWwuY29tOmFkbWlu]}
             Body = null
    Session Attrs = {}

Handler:
             Type = ru.javawebinar.graduation.controller.restaurant.RestaurantAdminRestController
           Method = public ru.javawebinar.graduation.model.Restaurant ru.javawebinar.graduation.controller.restaurant.RestaurantAdminRestController.getWithMeals(int)

Async:
    Async started = false
     Async result = null

Resolved Exception:
             Type = null

ModelAndView:
        View name = null
             View = null
            Model = null

FlashMap:
       Attributes = null

MockHttpServletResponse:
           Status = 200
    Error message = null
          Headers = {Content-Type=[application/json;charset=UTF-8], Cache-Control=[no-cache, no-store, max-age=0, must-revalidate], Pragma=[no-cache], Expires=[0], X-XSS-Protection=[1; mode=block], X-Frame-Options=[DENY], X-Content-Type-Options=[nosniff]}
     Content type = application/json;charset=UTF-8
             Body = {"id":100002,"name":"Cafe Maya","meals":[{"id":100005,"name":"Beef steak","created":"2018-10-12","price":3.00},{"id":100006,"name":"Borsch","created":"2018-10-12","price":2.00},{"id":100007,"name":"Pancake","created":"2018-10-12","price":1.00}],"votes":null}
    Forwarded URL = null
   Redirected URL = null
          Cookies = []
11:32:55.528 [34mINFO [0;39m [36mo.s.test.context.transaction.TransactionContext.endTransaction:139[0;39m - Rolled back transaction for test: [DefaultTestContext@1978b0d5 testClass = RestaurantAdminRestControllerTest, testInstance = ru.javawebinar.graduation.controller.restaurant.RestaurantAdminRestControllerTest@4edde05c, testMethod = testGetWithMeals@RestaurantAdminRestControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@3e1897d testClass = RestaurantAdminRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]
[ERROR] Tests run: 16, Failures: 3, Errors: 5, Skipped: 0, Time elapsed: 0.93 s <<< FAILURE! - in ru.javawebinar.graduation.controller.restaurant.RestaurantAdminRestControllerTest
[ERROR] testUpdateDuplicate  Time elapsed: 0.086 s  <<< ERROR!
org.springframework.web.util.NestedServletException: Request processing failed; nested exception is org.springframework.dao.DataIntegrityViolationException: could not execute statement; SQL [n/a]; constraint [null]; nested exception is org.hibernate.exception.ConstraintViolationException: could not execute statement
	at ru.javawebinar.graduation.controller.restaurant.RestaurantAdminRestControllerTest.testUpdateDuplicate(RestaurantAdminRestControllerTest.java:185)
Caused by: org.springframework.dao.DataIntegrityViolationException: could not execute statement; SQL [n/a]; constraint [null]; nested exception is org.hibernate.exception.ConstraintViolationException: could not execute statement
	at ru.javawebinar.graduation.controller.restaurant.RestaurantAdminRestControllerTest.testUpdateDuplicate(RestaurantAdminRestControllerTest.java:185)
Caused by: org.hibernate.exception.ConstraintViolationException: could not execute statement
	at ru.javawebinar.graduation.controller.restaurant.RestaurantAdminRestControllerTest.testUpdateDuplicate(RestaurantAdminRestControllerTest.java:185)
Caused by: java.sql.SQLIntegrityConstraintViolationException: integrity constraint violation: unique constraint or index violation: RESTAURANTS_UNIQUE_NAME_IDX
	at ru.javawebinar.graduation.controller.restaurant.RestaurantAdminRestControllerTest.testUpdateDuplicate(RestaurantAdminRestControllerTest.java:185)
Caused by: org.hsqldb.HsqlException: integrity constraint violation: unique constraint or index violation: RESTAURANTS_UNIQUE_NAME_IDX
	at ru.javawebinar.graduation.controller.restaurant.RestaurantAdminRestControllerTest.testUpdateDuplicate(RestaurantAdminRestControllerTest.java:185)

[ERROR] testUpdateInvalid  Time elapsed: 0.048 s  <<< FAILURE!
java.lang.AssertionError: Status expected:<422> but was:<400>
	at ru.javawebinar.graduation.controller.restaurant.RestaurantAdminRestControllerTest.testUpdateInvalid(RestaurantAdminRestControllerTest.java:174)

[ERROR] testDeleteNotFound  Time elapsed: 0.04 s  <<< ERROR!
org.springframework.web.util.NestedServletException: Request processing failed; nested exception is ru.javawebinar.graduation.util.exception.NotFoundException: type=DATA_NOT_FOUND, msgCode=exception.common.notFound, args=[id=100005]
	at ru.javawebinar.graduation.controller.restaurant.RestaurantAdminRestControllerTest.testDeleteNotFound(RestaurantAdminRestControllerTest.java:64)
Caused by: ru.javawebinar.graduation.util.exception.NotFoundException: type=DATA_NOT_FOUND, msgCode=exception.common.notFound, args=[id=100005]
	at ru.javawebinar.graduation.controller.restaurant.RestaurantAdminRestControllerTest.testDeleteNotFound(RestaurantAdminRestControllerTest.java:64)

[ERROR] testGetNotFound  Time elapsed: 0.041 s  <<< ERROR!
org.springframework.web.util.NestedServletException: Request processing failed; nested exception is ru.javawebinar.graduation.util.exception.NotFoundException: type=DATA_NOT_FOUND, msgCode=exception.common.notFound, args=[id=100005]
	at ru.javawebinar.graduation.controller.restaurant.RestaurantAdminRestControllerTest.testGetNotFound(RestaurantAdminRestControllerTest.java:49)
Caused by: ru.javawebinar.graduation.util.exception.NotFoundException: type=DATA_NOT_FOUND, msgCode=exception.common.notFound, args=[id=100005]
	at ru.javawebinar.graduation.controller.restaurant.RestaurantAdminRestControllerTest.testGetNotFound(RestaurantAdminRestControllerTest.java:49)

[ERROR] testCreateDuplicate  Time elapsed: 0.066 s  <<< ERROR!
org.springframework.web.util.NestedServletException: Request processing failed; nested exception is org.springframework.dao.DataIntegrityViolationException: could not execute statement; SQL [n/a]; constraint [null]; nested exception is org.hibernate.exception.ConstraintViolationException: could not execute statement
	at ru.javawebinar.graduation.controller.restaurant.RestaurantAdminRestControllerTest.testCreateDuplicate(RestaurantAdminRestControllerTest.java:199)
Caused by: org.springframework.dao.DataIntegrityViolationException: could not execute statement; SQL [n/a]; constraint [null]; nested exception is org.hibernate.exception.ConstraintViolationException: could not execute statement
	at ru.javawebinar.graduation.controller.restaurant.RestaurantAdminRestControllerTest.testCreateDuplicate(RestaurantAdminRestControllerTest.java:199)
Caused by: org.hibernate.exception.ConstraintViolationException: could not execute statement
	at ru.javawebinar.graduation.controller.restaurant.RestaurantAdminRestControllerTest.testCreateDuplicate(RestaurantAdminRestControllerTest.java:199)
Caused by: java.sql.SQLIntegrityConstraintViolationException: integrity constraint violation: unique constraint or index violation: RESTAURANTS_UNIQUE_NAME_IDX
	at ru.javawebinar.graduation.controller.restaurant.RestaurantAdminRestControllerTest.testCreateDuplicate(RestaurantAdminRestControllerTest.java:199)
Caused by: org.hsqldb.HsqlException: integrity constraint violation: unique constraint or index violation: RESTAURANTS_UNIQUE_NAME_IDX
	at ru.javawebinar.graduation.controller.restaurant.RestaurantAdminRestControllerTest.testCreateDuplicate(RestaurantAdminRestControllerTest.java:199)

[ERROR] testUpdateHtmlUnsafe  Time elapsed: 0.039 s  <<< FAILURE!
java.lang.AssertionError: Status expected:<422> but was:<400>
	at ru.javawebinar.graduation.controller.restaurant.RestaurantAdminRestControllerTest.testUpdateHtmlUnsafe(RestaurantAdminRestControllerTest.java:148)

[ERROR] testCreateWithIllegalRequestData  Time elapsed: 0.037 s  <<< ERROR!
org.springframework.web.util.NestedServletException: Request processing failed; nested exception is ru.javawebinar.graduation.util.exception.IllegalRequestDataException: Restaurant{name='Cafe Maya', id=100002} must be new (id=null)
	at ru.javawebinar.graduation.controller.restaurant.RestaurantAdminRestControllerTest.testCreateWithIllegalRequestData(RestaurantAdminRestControllerTest.java:100)
Caused by: ru.javawebinar.graduation.util.exception.IllegalRequestDataException: Restaurant{name='Cafe Maya', id=100002} must be new (id=null)
	at ru.javawebinar.graduation.controller.restaurant.RestaurantAdminRestControllerTest.testCreateWithIllegalRequestData(RestaurantAdminRestControllerTest.java:100)

[ERROR] testCreateInvalid  Time elapsed: 0.02 s  <<< FAILURE!
java.lang.AssertionError: Status expected:<422> but was:<400>
	at ru.javawebinar.graduation.controller.restaurant.RestaurantAdminRestControllerTest.testCreateInvalid(RestaurantAdminRestControllerTest.java:161)

[INFO] Running ru.javawebinar.graduation.controller.restaurant.RestaurantProfileRestControllerTest
11:32:55.569 [34mINFO [0;39m [36mo.s.t.c.support.AbstractTestContextBootstrapper.getDefaultTestExecutionListenerClassNames:248[0;39m - Loaded default TestExecutionListener class names from location [META-INF/spring.factories]: [org.springframework.security.test.context.support.WithSecurityContextTestExecutionListener, org.springframework.security.test.context.support.ReactorContextTestExecutionListener, org.springframework.test.context.web.ServletTestExecutionListener, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener, org.springframework.test.context.support.DependencyInjectionTestExecutionListener, org.springframework.test.context.support.DirtiesContextTestExecutionListener, org.springframework.test.context.transaction.TransactionalTestExecutionListener, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener]
11:32:55.571 [34mINFO [0;39m [36mo.s.t.c.support.AbstractTestContextBootstrapper.getTestExecutionListeners:177[0;39m - Using TestExecutionListeners: [org.springframework.test.context.web.ServletTestExecutionListener@176054b7, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener@531bec12, org.springframework.test.context.support.DependencyInjectionTestExecutionListener@24563809, org.springframework.test.context.support.DirtiesContextTestExecutionListener@41d84abb, org.springframework.test.context.transaction.TransactionalTestExecutionListener@54087bdb, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener@587f6634, org.springframework.security.test.context.support.WithSecurityContextTestExecutionListener@4d7c9b42, org.springframework.security.test.context.support.ReactorContextTestExecutionListener@4ef28dc4]
11:32:55.575 [34mINFO [0;39m [36morg.springframework.mock.web.MockServletContext.log:438[0;39m - Initializing Spring FrameworkServlet ''
11:32:55.585 [34mINFO [0;39m [36morg.springframework.web.servlet.FrameworkServlet.initServletBean:494[0;39m - FrameworkServlet '': initialization started
11:32:55.588 [34mINFO [0;39m [36morg.springframework.web.servlet.FrameworkServlet.initServletBean:509[0;39m - FrameworkServlet '': initialization completed in 2 ms
11:32:55.628 [34mINFO [0;39m [36mo.s.test.context.transaction.TransactionContext.startTransaction:107[0;39m - Began transaction (1) for test context [DefaultTestContext@2d5e051e testClass = RestaurantProfileRestControllerTest, testInstance = ru.javawebinar.graduation.controller.restaurant.RestaurantProfileRestControllerTest@2f29e630, testMethod = testChoiceReVote@RestaurantProfileRestControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@30811f91 testClass = RestaurantProfileRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@1e95f584]; rollback [true]
Hibernate: 
    /* select
        generatedAlias0 
    from
        User as generatedAlias0 
    where
        generatedAlias0.email=:param0 */ select
            user0_.id as id1_3_,
            user0_.name as name2_3_,
            user0_.email as email3_3_,
            user0_.enabled as enabled4_3_,
            user0_.password as password5_3_,
            user0_.registered as register6_3_ 
        from
            users user0_ 
        where
            user0_.email=?
Hibernate: 
    /* load collection ru.javawebinar.graduation.model.User.roles */ select
        roles0_.user_id as user_id1_2_0_,
        roles0_.role as role2_2_0_ 
    from
        user_roles roles0_ 
    where
        roles0_.user_id=?
11:32:55.643 [34mINFO [0;39m [36mr.j.g.c.restaurant.AbstractRestaurantController.choice:73[0;39m - choice {}
Hibernate: 
    select
        restaurant0_.id as id1_1_0_,
        restaurant0_.name as name2_1_0_ 
    from
        restaurants restaurant0_ 
    where
        restaurant0_.id=?
Hibernate: 
    /* select
        generatedAlias0 
    from
        Vote as generatedAlias0 
    left join
        generatedAlias0.user as generatedAlias1 
    where
        (
            generatedAlias1.id=:param0 
        ) 
        and (
            generatedAlias0.voted=:param1 
        ) */ select
            vote0_.id as id1_4_,
            vote0_.restaurant_id as restaura3_4_,
            vote0_.user_id as user_id4_4_,
            vote0_.voted as voted2_4_ 
        from
            votes vote0_ 
        left outer join
            users user1_ 
                on vote0_.user_id=user1_.id 
        where
            user1_.id=? 
            and vote0_.voted=?
11:32:55.687 [1;31mERROR[0;39m [36mr.j.graduation.controller.ExceptionInfoHandler.logAndGetErrorInfo:106[0;39m - APP_ERROR at request http://localhost/rest/profile/restaurants/
org.springframework.context.NoSuchMessageException: No message found under code 'vote.successfullyVoted' for locale 'ru'.
	at org.springframework.context.support.AbstractMessageSource.getMessage(AbstractMessageSource.java:161)
	at ru.javawebinar.graduation.controller.MessageUtil.getMessage(MessageUtil.java:23)
	at ru.javawebinar.graduation.controller.MessageUtil.getMessage(MessageUtil.java:27)
	at ru.javawebinar.graduation.controller.restaurant.RestaurantProfileRestController.choice(RestaurantProfileRestController.java:31)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:209)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:136)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:102)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:877)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:783)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:991)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:925)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:974)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:877)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:661)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:851)
	at org.springframework.test.web.servlet.TestDispatcherServlet.service(TestDispatcherServlet.java:71)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:742)
	at org.springframework.mock.web.MockFilterChain$ServletFilterProxy.doFilter(MockFilterChain.java:166)
	at org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:133)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:320)
	at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:127)
	at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:91)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:119)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:111)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:170)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.authentication.www.BasicAuthenticationFilter.doFilterInternal(BasicAuthenticationFilter.java:215)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:66)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:56)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:105)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:215)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:178)
	at org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:133)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:200)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:133)
	at org.springframework.test.web.servlet.MockMvc.perform(MockMvc.java:165)
	at ru.javawebinar.graduation.controller.restaurant.RestaurantProfileRestControllerTest.testChoiceReVote(RestaurantProfileRestControllerTest.java:62)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.platform.commons.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:513)
	at org.junit.jupiter.engine.execution.ExecutableInvoker.invoke(ExecutableInvoker.java:115)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeTestMethod$6(TestMethodTestDescriptor.java:170)
	at org.junit.jupiter.engine.execution.ThrowableCollector.execute(ThrowableCollector.java:40)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeTestMethod(TestMethodTestDescriptor.java:166)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:113)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:58)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor$NodeExecutor.lambda$executeRecursively$3(HierarchicalTestExecutor.java:113)
	at org.junit.platform.engine.support.hierarchical.SingleTestExecutor.executeSafely(SingleTestExecutor.java:66)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor$NodeExecutor.executeRecursively(HierarchicalTestExecutor.java:108)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor$NodeExecutor.execute(HierarchicalTestExecutor.java:79)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor$NodeExecutor.lambda$executeRecursively$2(HierarchicalTestExecutor.java:121)
	at java.util.stream.ForEachOps$ForEachOp$OfRef.accept(ForEachOps.java:184)
	at java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:175)
	at java.util.Iterator.forEachRemaining(Iterator.java:116)
	at java.util.Spliterators$IteratorSpliterator.forEachRemaining(Spliterators.java:1801)
	at java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:481)
	at java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:471)
	at java.util.stream.ForEachOps$ForEachOp.evaluateSequential(ForEachOps.java:151)
	at java.util.stream.ForEachOps$ForEachOp$OfRef.evaluateSequential(ForEachOps.java:174)
	at java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)
	at java.util.stream.ReferencePipeline.forEach(ReferencePipeline.java:418)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor$NodeExecutor.lambda$executeRecursively$3(HierarchicalTestExecutor.java:121)
	at org.junit.platform.engine.support.hierarchical.SingleTestExecutor.executeSafely(SingleTestExecutor.java:66)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor$NodeExecutor.executeRecursively(HierarchicalTestExecutor.java:108)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor$NodeExecutor.execute(HierarchicalTestExecutor.java:79)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor$NodeExecutor.lambda$executeRecursively$2(HierarchicalTestExecutor.java:121)
	at java.util.stream.ForEachOps$ForEachOp$OfRef.accept(ForEachOps.java:184)
	at java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:175)
	at java.util.Iterator.forEachRemaining(Iterator.java:116)
	at java.util.Spliterators$IteratorSpliterator.forEachRemaining(Spliterators.java:1801)
	at java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:481)
	at java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:471)
	at java.util.stream.ForEachOps$ForEachOp.evaluateSequential(ForEachOps.java:151)
	at java.util.stream.ForEachOps$ForEachOp$OfRef.evaluateSequential(ForEachOps.java:174)
	at java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)
	at java.util.stream.ReferencePipeline.forEach(ReferencePipeline.java:418)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor$NodeExecutor.lambda$executeRecursively$3(HierarchicalTestExecutor.java:121)
	at org.junit.platform.engine.support.hierarchical.SingleTestExecutor.executeSafely(SingleTestExecutor.java:66)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor$NodeExecutor.executeRecursively(HierarchicalTestExecutor.java:108)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor$NodeExecutor.execute(HierarchicalTestExecutor.java:79)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:55)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:43)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:170)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:154)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:90)
	at org.junit.platform.surefire.provider.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:132)
	at org.junit.platform.surefire.provider.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:111)
	at org.apache.maven.surefire.booter.ForkedBooter.invokeProviderInSameClassLoader(ForkedBooter.java:383)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:344)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:125)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:417)
11:32:55.704 [31mWARN [0;39m [36mo.s.w.s.m.m.a.ExceptionHandlerExceptionResolver.doResolveHandlerMethodException:411[0;39m - Failed to invoke @ExceptionHandler method: public ru.javawebinar.graduation.util.exception.ErrorInfo ru.javawebinar.graduation.controller.ExceptionInfoHandler.handleError(javax.servlet.http.HttpServletRequest,java.lang.Exception)
org.springframework.context.NoSuchMessageException: No message found under code 'error.appError' for locale 'ru'.
	at org.springframework.context.support.AbstractMessageSource.getMessage(AbstractMessageSource.java:161)
	at ru.javawebinar.graduation.controller.MessageUtil.getMessage(MessageUtil.java:23)
	at ru.javawebinar.graduation.controller.MessageUtil.getMessage(MessageUtil.java:27)
	at ru.javawebinar.graduation.controller.ExceptionInfoHandler.logAndGetErrorInfo(ExceptionInfoHandler.java:111)
	at ru.javawebinar.graduation.controller.ExceptionInfoHandler.handleError(ExceptionInfoHandler.java:100)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:209)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:136)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:102)
	at org.springframework.web.servlet.mvc.method.annotation.ExceptionHandlerExceptionResolver.doResolveHandlerMethodException(ExceptionHandlerExceptionResolver.java:404)
	at org.springframework.web.servlet.handler.AbstractHandlerMethodExceptionResolver.doResolveException(AbstractHandlerMethodExceptionResolver.java:61)
	at org.springframework.web.servlet.handler.AbstractHandlerExceptionResolver.resolveException(AbstractHandlerExceptionResolver.java:139)
	at org.springframework.web.servlet.DispatcherServlet.processHandlerException(DispatcherServlet.java:1255)
	at org.springframework.test.web.servlet.TestDispatcherServlet.processHandlerException(TestDispatcherServlet.java:133)
	at org.springframework.web.servlet.DispatcherServlet.processDispatchResult(DispatcherServlet.java:1062)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1008)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:925)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:974)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:877)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:661)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:851)
	at org.springframework.test.web.servlet.TestDispatcherServlet.service(TestDispatcherServlet.java:71)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:742)
	at org.springframework.mock.web.MockFilterChain$ServletFilterProxy.doFilter(MockFilterChain.java:166)
	at org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:133)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:320)
	at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:127)
	at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:91)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:119)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:111)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:170)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.authentication.www.BasicAuthenticationFilter.doFilterInternal(BasicAuthenticationFilter.java:215)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:66)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:56)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:105)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:215)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:178)
	at org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:133)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:200)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:133)
	at org.springframework.test.web.servlet.MockMvc.perform(MockMvc.java:165)
	at ru.javawebinar.graduation.controller.restaurant.RestaurantProfileRestControllerTest.testChoiceReVote(RestaurantProfileRestControllerTest.java:62)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.platform.commons.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:513)
	at org.junit.jupiter.engine.execution.ExecutableInvoker.invoke(ExecutableInvoker.java:115)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeTestMethod$6(TestMethodTestDescriptor.java:170)
	at org.junit.jupiter.engine.execution.ThrowableCollector.execute(ThrowableCollector.java:40)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeTestMethod(TestMethodTestDescriptor.java:166)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:113)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:58)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor$NodeExecutor.lambda$executeRecursively$3(HierarchicalTestExecutor.java:113)
	at org.junit.platform.engine.support.hierarchical.SingleTestExecutor.executeSafely(SingleTestExecutor.java:66)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor$NodeExecutor.executeRecursively(HierarchicalTestExecutor.java:108)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor$NodeExecutor.execute(HierarchicalTestExecutor.java:79)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor$NodeExecutor.lambda$executeRecursively$2(HierarchicalTestExecutor.java:121)
	at java.util.stream.ForEachOps$ForEachOp$OfRef.accept(ForEachOps.java:184)
	at java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:175)
	at java.util.Iterator.forEachRemaining(Iterator.java:116)
	at java.util.Spliterators$IteratorSpliterator.forEachRemaining(Spliterators.java:1801)
	at java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:481)
	at java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:471)
	at java.util.stream.ForEachOps$ForEachOp.evaluateSequential(ForEachOps.java:151)
	at java.util.stream.ForEachOps$ForEachOp$OfRef.evaluateSequential(ForEachOps.java:174)
	at java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)
	at java.util.stream.ReferencePipeline.forEach(ReferencePipeline.java:418)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor$NodeExecutor.lambda$executeRecursively$3(HierarchicalTestExecutor.java:121)
	at org.junit.platform.engine.support.hierarchical.SingleTestExecutor.executeSafely(SingleTestExecutor.java:66)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor$NodeExecutor.executeRecursively(HierarchicalTestExecutor.java:108)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor$NodeExecutor.execute(HierarchicalTestExecutor.java:79)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor$NodeExecutor.lambda$executeRecursively$2(HierarchicalTestExecutor.java:121)
	at java.util.stream.ForEachOps$ForEachOp$OfRef.accept(ForEachOps.java:184)
	at java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:175)
	at java.util.Iterator.forEachRemaining(Iterator.java:116)
	at java.util.Spliterators$IteratorSpliterator.forEachRemaining(Spliterators.java:1801)
	at java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:481)
	at java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:471)
	at java.util.stream.ForEachOps$ForEachOp.evaluateSequential(ForEachOps.java:151)
	at java.util.stream.ForEachOps$ForEachOp$OfRef.evaluateSequential(ForEachOps.java:174)
	at java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)
	at java.util.stream.ReferencePipeline.forEach(ReferencePipeline.java:418)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor$NodeExecutor.lambda$executeRecursively$3(HierarchicalTestExecutor.java:121)
	at org.junit.platform.engine.support.hierarchical.SingleTestExecutor.executeSafely(SingleTestExecutor.java:66)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor$NodeExecutor.executeRecursively(HierarchicalTestExecutor.java:108)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor$NodeExecutor.execute(HierarchicalTestExecutor.java:79)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:55)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:43)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:170)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:154)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:90)
	at org.junit.platform.surefire.provider.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:132)
	at org.junit.platform.surefire.provider.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:111)
	at org.apache.maven.surefire.booter.ForkedBooter.invokeProviderInSameClassLoader(ForkedBooter.java:383)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:344)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:125)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:417)
11:32:55.713 [34mINFO [0;39m [36mo.s.test.context.transaction.TransactionContext.endTransaction:139[0;39m - Rolled back transaction for test: [DefaultTestContext@2d5e051e testClass = RestaurantProfileRestControllerTest, testInstance = ru.javawebinar.graduation.controller.restaurant.RestaurantProfileRestControllerTest@2f29e630, testMethod = testChoiceReVote@RestaurantProfileRestControllerTest, testException = org.springframework.web.util.NestedServletException: Request processing failed; nested exception is org.springframework.context.NoSuchMessageException: No message found under code 'vote.successfullyVoted' for locale 'ru'., mergedContextConfiguration = [WebMergedContextConfiguration@30811f91 testClass = RestaurantProfileRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]
11:32:55.717 [34mINFO [0;39m [36morg.springframework.mock.web.MockServletContext.log:438[0;39m - Initializing Spring FrameworkServlet ''
11:32:55.718 [34mINFO [0;39m [36morg.springframework.web.servlet.FrameworkServlet.initServletBean:494[0;39m - FrameworkServlet '': initialization started
11:32:55.722 [34mINFO [0;39m [36morg.springframework.web.servlet.FrameworkServlet.initServletBean:509[0;39m - FrameworkServlet '': initialization completed in 4 ms
11:32:55.732 [34mINFO [0;39m [36mo.s.test.context.transaction.TransactionContext.startTransaction:107[0;39m - Began transaction (1) for test context [DefaultTestContext@2d5e051e testClass = RestaurantProfileRestControllerTest, testInstance = ru.javawebinar.graduation.controller.restaurant.RestaurantProfileRestControllerTest@3ac326c0, testMethod = testChoiceBadVote@RestaurantProfileRestControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@30811f91 testClass = RestaurantProfileRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@1e95f584]; rollback [true]
Hibernate: 
    /* select
        generatedAlias0 
    from
        User as generatedAlias0 
    where
        generatedAlias0.email=:param0 */ select
            user0_.id as id1_3_,
            user0_.name as name2_3_,
            user0_.email as email3_3_,
            user0_.enabled as enabled4_3_,
            user0_.password as password5_3_,
            user0_.registered as register6_3_ 
        from
            users user0_ 
        where
            user0_.email=?
Hibernate: 
    /* load collection ru.javawebinar.graduation.model.User.roles */ select
        roles0_.user_id as user_id1_2_0_,
        roles0_.role as role2_2_0_ 
    from
        user_roles roles0_ 
    where
        roles0_.user_id=?
11:32:55.754 [34mINFO [0;39m [36mr.j.g.c.restaurant.AbstractRestaurantController.choice:73[0;39m - choice {}
Hibernate: 
    select
        restaurant0_.id as id1_1_0_,
        restaurant0_.name as name2_1_0_ 
    from
        restaurants restaurant0_ 
    where
        restaurant0_.id=?
11:32:55.758 [1;31mERROR[0;39m [36mr.j.graduation.controller.ExceptionInfoHandler.logAndGetErrorInfo:106[0;39m - APP_ERROR at request http://localhost/rest/profile/restaurants/
org.springframework.context.NoSuchMessageException: No message found under code 'vote.unsuccessfullyVoted' for locale 'ru'.
	at org.springframework.context.support.AbstractMessageSource.getMessage(AbstractMessageSource.java:161)
	at ru.javawebinar.graduation.controller.MessageUtil.getMessage(MessageUtil.java:23)
	at ru.javawebinar.graduation.controller.MessageUtil.getMessage(MessageUtil.java:27)
	at ru.javawebinar.graduation.controller.restaurant.RestaurantProfileRestController.choice(RestaurantProfileRestController.java:32)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:209)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:136)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:102)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:877)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:783)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:991)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:925)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:974)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:877)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:661)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:851)
	at org.springframework.test.web.servlet.TestDispatcherServlet.service(TestDispatcherServlet.java:71)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:742)
	at org.springframework.mock.web.MockFilterChain$ServletFilterProxy.doFilter(MockFilterChain.java:166)
	at org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:133)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:320)
	at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:127)
	at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:91)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:119)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:111)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:170)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.authentication.www.BasicAuthenticationFilter.doFilterInternal(BasicAuthenticationFilter.java:215)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:66)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:56)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:105)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:215)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:178)
	at org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:133)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:200)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:133)
	at org.springframework.test.web.servlet.MockMvc.perform(MockMvc.java:165)
	at ru.javawebinar.graduation.controller.restaurant.RestaurantProfileRestControllerTest.testChoiceBadVote(RestaurantProfileRestControllerTest.java:87)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.platform.commons.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:513)
	at org.junit.jupiter.engine.execution.ExecutableInvoker.invoke(ExecutableInvoker.java:115)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeTestMethod$6(TestMethodTestDescriptor.java:170)
	at org.junit.jupiter.engine.execution.ThrowableCollector.execute(ThrowableCollector.java:40)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeTestMethod(TestMethodTestDescriptor.java:166)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:113)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:58)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor$NodeExecutor.lambda$executeRecursively$3(HierarchicalTestExecutor.java:113)
	at org.junit.platform.engine.support.hierarchical.SingleTestExecutor.executeSafely(SingleTestExecutor.java:66)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor$NodeExecutor.executeRecursively(HierarchicalTestExecutor.java:108)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor$NodeExecutor.execute(HierarchicalTestExecutor.java:79)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor$NodeExecutor.lambda$executeRecursively$2(HierarchicalTestExecutor.java:121)
	at java.util.stream.ForEachOps$ForEachOp$OfRef.accept(ForEachOps.java:184)
	at java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:175)
	at java.util.Iterator.forEachRemaining(Iterator.java:116)
	at java.util.Spliterators$IteratorSpliterator.forEachRemaining(Spliterators.java:1801)
	at java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:481)
	at java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:471)
	at java.util.stream.ForEachOps$ForEachOp.evaluateSequential(ForEachOps.java:151)
	at java.util.stream.ForEachOps$ForEachOp$OfRef.evaluateSequential(ForEachOps.java:174)
	at java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)
	at java.util.stream.ReferencePipeline.forEach(ReferencePipeline.java:418)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor$NodeExecutor.lambda$executeRecursively$3(HierarchicalTestExecutor.java:121)
	at org.junit.platform.engine.support.hierarchical.SingleTestExecutor.executeSafely(SingleTestExecutor.java:66)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor$NodeExecutor.executeRecursively(HierarchicalTestExecutor.java:108)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor$NodeExecutor.execute(HierarchicalTestExecutor.java:79)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor$NodeExecutor.lambda$executeRecursively$2(HierarchicalTestExecutor.java:121)
	at java.util.stream.ForEachOps$ForEachOp$OfRef.accept(ForEachOps.java:184)
	at java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:175)
	at java.util.Iterator.forEachRemaining(Iterator.java:116)
	at java.util.Spliterators$IteratorSpliterator.forEachRemaining(Spliterators.java:1801)
	at java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:481)
	at java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:471)
	at java.util.stream.ForEachOps$ForEachOp.evaluateSequential(ForEachOps.java:151)
	at java.util.stream.ForEachOps$ForEachOp$OfRef.evaluateSequential(ForEachOps.java:174)
	at java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)
	at java.util.stream.ReferencePipeline.forEach(ReferencePipeline.java:418)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor$NodeExecutor.lambda$executeRecursively$3(HierarchicalTestExecutor.java:121)
	at org.junit.platform.engine.support.hierarchical.SingleTestExecutor.executeSafely(SingleTestExecutor.java:66)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor$NodeExecutor.executeRecursively(HierarchicalTestExecutor.java:108)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor$NodeExecutor.execute(HierarchicalTestExecutor.java:79)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:55)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:43)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:170)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:154)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:90)
	at org.junit.platform.surefire.provider.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:132)
	at org.junit.platform.surefire.provider.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:111)
	at org.apache.maven.surefire.booter.ForkedBooter.invokeProviderInSameClassLoader(ForkedBooter.java:383)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:344)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:125)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:417)
11:32:55.760 [31mWARN [0;39m [36mo.s.w.s.m.m.a.ExceptionHandlerExceptionResolver.doResolveHandlerMethodException:411[0;39m - Failed to invoke @ExceptionHandler method: public ru.javawebinar.graduation.util.exception.ErrorInfo ru.javawebinar.graduation.controller.ExceptionInfoHandler.handleError(javax.servlet.http.HttpServletRequest,java.lang.Exception)
org.springframework.context.NoSuchMessageException: No message found under code 'error.appError' for locale 'ru'.
	at org.springframework.context.support.AbstractMessageSource.getMessage(AbstractMessageSource.java:161)
	at ru.javawebinar.graduation.controller.MessageUtil.getMessage(MessageUtil.java:23)
	at ru.javawebinar.graduation.controller.MessageUtil.getMessage(MessageUtil.java:27)
	at ru.javawebinar.graduation.controller.ExceptionInfoHandler.logAndGetErrorInfo(ExceptionInfoHandler.java:111)
	at ru.javawebinar.graduation.controller.ExceptionInfoHandler.handleError(ExceptionInfoHandler.java:100)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:209)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:136)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:102)
	at org.springframework.web.servlet.mvc.method.annotation.ExceptionHandlerExceptionResolver.doResolveHandlerMethodException(ExceptionHandlerExceptionResolver.java:404)
	at org.springframework.web.servlet.handler.AbstractHandlerMethodExceptionResolver.doResolveException(AbstractHandlerMethodExceptionResolver.java:61)
	at org.springframework.web.servlet.handler.AbstractHandlerExceptionResolver.resolveException(AbstractHandlerExceptionResolver.java:139)
	at org.springframework.web.servlet.DispatcherServlet.processHandlerException(DispatcherServlet.java:1255)
	at org.springframework.test.web.servlet.TestDispatcherServlet.processHandlerException(TestDispatcherServlet.java:133)
	at org.springframework.web.servlet.DispatcherServlet.processDispatchResult(DispatcherServlet.java:1062)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1008)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:925)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:974)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:877)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:661)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:851)
	at org.springframework.test.web.servlet.TestDispatcherServlet.service(TestDispatcherServlet.java:71)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:742)
	at org.springframework.mock.web.MockFilterChain$ServletFilterProxy.doFilter(MockFilterChain.java:166)
	at org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:133)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:320)
	at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:127)
	at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:91)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:119)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:111)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:170)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.authentication.www.BasicAuthenticationFilter.doFilterInternal(BasicAuthenticationFilter.java:215)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:66)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:56)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:105)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:215)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:178)
	at org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:133)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:200)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:133)
	at org.springframework.test.web.servlet.MockMvc.perform(MockMvc.java:165)
	at ru.javawebinar.graduation.controller.restaurant.RestaurantProfileRestControllerTest.testChoiceBadVote(RestaurantProfileRestControllerTest.java:87)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.platform.commons.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:513)
	at org.junit.jupiter.engine.execution.ExecutableInvoker.invoke(ExecutableInvoker.java:115)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeTestMethod$6(TestMethodTestDescriptor.java:170)
	at org.junit.jupiter.engine.execution.ThrowableCollector.execute(ThrowableCollector.java:40)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeTestMethod(TestMethodTestDescriptor.java:166)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:113)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:58)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor$NodeExecutor.lambda$executeRecursively$3(HierarchicalTestExecutor.java:113)
	at org.junit.platform.engine.support.hierarchical.SingleTestExecutor.executeSafely(SingleTestExecutor.java:66)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor$NodeExecutor.executeRecursively(HierarchicalTestExecutor.java:108)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor$NodeExecutor.execute(HierarchicalTestExecutor.java:79)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor$NodeExecutor.lambda$executeRecursively$2(HierarchicalTestExecutor.java:121)
	at java.util.stream.ForEachOps$ForEachOp$OfRef.accept(ForEachOps.java:184)
	at java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:175)
	at java.util.Iterator.forEachRemaining(Iterator.java:116)
	at java.util.Spliterators$IteratorSpliterator.forEachRemaining(Spliterators.java:1801)
	at java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:481)
	at java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:471)
	at java.util.stream.ForEachOps$ForEachOp.evaluateSequential(ForEachOps.java:151)
	at java.util.stream.ForEachOps$ForEachOp$OfRef.evaluateSequential(ForEachOps.java:174)
	at java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)
	at java.util.stream.ReferencePipeline.forEach(ReferencePipeline.java:418)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor$NodeExecutor.lambda$executeRecursively$3(HierarchicalTestExecutor.java:121)
	at org.junit.platform.engine.support.hierarchical.SingleTestExecutor.executeSafely(SingleTestExecutor.java:66)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor$NodeExecutor.executeRecursively(HierarchicalTestExecutor.java:108)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor$NodeExecutor.execute(HierarchicalTestExecutor.java:79)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor$NodeExecutor.lambda$executeRecursively$2(HierarchicalTestExecutor.java:121)
	at java.util.stream.ForEachOps$ForEachOp$OfRef.accept(ForEachOps.java:184)
	at java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:175)
	at java.util.Iterator.forEachRemaining(Iterator.java:116)
	at java.util.Spliterators$IteratorSpliterator.forEachRemaining(Spliterators.java:1801)
	at java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:481)
	at java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:471)
	at java.util.stream.ForEachOps$ForEachOp.evaluateSequential(ForEachOps.java:151)
	at java.util.stream.ForEachOps$ForEachOp$OfRef.evaluateSequential(ForEachOps.java:174)
	at java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)
	at java.util.stream.ReferencePipeline.forEach(ReferencePipeline.java:418)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor$NodeExecutor.lambda$executeRecursively$3(HierarchicalTestExecutor.java:121)
	at org.junit.platform.engine.support.hierarchical.SingleTestExecutor.executeSafely(SingleTestExecutor.java:66)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor$NodeExecutor.executeRecursively(HierarchicalTestExecutor.java:108)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor$NodeExecutor.execute(HierarchicalTestExecutor.java:79)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:55)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:43)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:170)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:154)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:90)
	at org.junit.platform.surefire.provider.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:132)
	at org.junit.platform.surefire.provider.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:111)
	at org.apache.maven.surefire.booter.ForkedBooter.invokeProviderInSameClassLoader(ForkedBooter.java:383)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:344)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:125)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:417)
11:32:55.768 [34mINFO [0;39m [36mo.s.test.context.transaction.TransactionContext.endTransaction:139[0;39m - Rolled back transaction for test: [DefaultTestContext@2d5e051e testClass = RestaurantProfileRestControllerTest, testInstance = ru.javawebinar.graduation.controller.restaurant.RestaurantProfileRestControllerTest@3ac326c0, testMethod = testChoiceBadVote@RestaurantProfileRestControllerTest, testException = org.springframework.web.util.NestedServletException: Request processing failed; nested exception is org.springframework.context.NoSuchMessageException: No message found under code 'vote.unsuccessfullyVoted' for locale 'ru'., mergedContextConfiguration = [WebMergedContextConfiguration@30811f91 testClass = RestaurantProfileRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]
11:32:55.771 [34mINFO [0;39m [36morg.springframework.mock.web.MockServletContext.log:438[0;39m - Initializing Spring FrameworkServlet ''
11:32:55.772 [34mINFO [0;39m [36morg.springframework.web.servlet.FrameworkServlet.initServletBean:494[0;39m - FrameworkServlet '': initialization started
11:32:55.775 [34mINFO [0;39m [36morg.springframework.web.servlet.FrameworkServlet.initServletBean:509[0;39m - FrameworkServlet '': initialization completed in 3 ms
11:32:55.794 [34mINFO [0;39m [36mo.s.test.context.transaction.TransactionContext.startTransaction:107[0;39m - Began transaction (1) for test context [DefaultTestContext@2d5e051e testClass = RestaurantProfileRestControllerTest, testInstance = ru.javawebinar.graduation.controller.restaurant.RestaurantProfileRestControllerTest@4407fea2, testMethod = testChoiceTimeIsUpReVote@RestaurantProfileRestControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@30811f91 testClass = RestaurantProfileRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@1e95f584]; rollback [true]
Hibernate: 
    /* select
        generatedAlias0 
    from
        User as generatedAlias0 
    where
        generatedAlias0.email=:param0 */ select
            user0_.id as id1_3_,
            user0_.name as name2_3_,
            user0_.email as email3_3_,
            user0_.enabled as enabled4_3_,
            user0_.password as password5_3_,
            user0_.registered as register6_3_ 
        from
            users user0_ 
        where
            user0_.email=?
Hibernate: 
    /* load collection ru.javawebinar.graduation.model.User.roles */ select
        roles0_.user_id as user_id1_2_0_,
        roles0_.role as role2_2_0_ 
    from
        user_roles roles0_ 
    where
        roles0_.user_id=?
11:32:55.807 [34mINFO [0;39m [36mr.j.g.c.restaurant.AbstractRestaurantController.choice:73[0;39m - choice {}
Hibernate: 
    select
        restaurant0_.id as id1_1_0_,
        restaurant0_.name as name2_1_0_ 
    from
        restaurants restaurant0_ 
    where
        restaurant0_.id=?
Hibernate: 
    /* select
        generatedAlias0 
    from
        Vote as generatedAlias0 
    left join
        generatedAlias0.user as generatedAlias1 
    where
        (
            generatedAlias1.id=:param0 
        ) 
        and (
            generatedAlias0.voted=:param1 
        ) */ select
            vote0_.id as id1_4_,
            vote0_.restaurant_id as restaura3_4_,
            vote0_.user_id as user_id4_4_,
            vote0_.voted as voted2_4_ 
        from
            votes vote0_ 
        left outer join
            users user1_ 
                on vote0_.user_id=user1_.id 
        where
            user1_.id=? 
            and vote0_.voted=?
11:32:55.823 [31mWARN [0;39m [36mo.s.w.s.m.m.a.ExceptionHandlerExceptionResolver.doResolveHandlerMethodException:411[0;39m - Failed to invoke @ExceptionHandler method: public ru.javawebinar.graduation.util.exception.ErrorInfo ru.javawebinar.graduation.controller.ExceptionInfoHandler.illegalTimeForVoteError(javax.servlet.http.HttpServletRequest,ru.javawebinar.graduation.util.exception.VoteTimeExpiredException)
org.springframework.context.NoSuchMessageException: No message found under code 'exception.vote.timeIsUp' for locale 'ru'.
	at org.springframework.context.support.AbstractMessageSource.getMessage(AbstractMessageSource.java:161)
	at ru.javawebinar.graduation.controller.MessageUtil.getMessage(MessageUtil.java:23)
	at ru.javawebinar.graduation.controller.MessageUtil.getMessage(MessageUtil.java:27)
	at ru.javawebinar.graduation.controller.ExceptionInfoHandler.illegalTimeForVoteError(ExceptionInfoHandler.java:88)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:209)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:136)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:102)
	at org.springframework.web.servlet.mvc.method.annotation.ExceptionHandlerExceptionResolver.doResolveHandlerMethodException(ExceptionHandlerExceptionResolver.java:404)
	at org.springframework.web.servlet.handler.AbstractHandlerMethodExceptionResolver.doResolveException(AbstractHandlerMethodExceptionResolver.java:61)
	at org.springframework.web.servlet.handler.AbstractHandlerExceptionResolver.resolveException(AbstractHandlerExceptionResolver.java:139)
	at org.springframework.web.servlet.DispatcherServlet.processHandlerException(DispatcherServlet.java:1255)
	at org.springframework.test.web.servlet.TestDispatcherServlet.processHandlerException(TestDispatcherServlet.java:133)
	at org.springframework.web.servlet.DispatcherServlet.processDispatchResult(DispatcherServlet.java:1062)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1008)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:925)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:974)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:877)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:661)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:851)
	at org.springframework.test.web.servlet.TestDispatcherServlet.service(TestDispatcherServlet.java:71)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:742)
	at org.springframework.mock.web.MockFilterChain$ServletFilterProxy.doFilter(MockFilterChain.java:166)
	at org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:133)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:320)
	at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:127)
	at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:91)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:119)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:111)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:170)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.authentication.www.BasicAuthenticationFilter.doFilterInternal(BasicAuthenticationFilter.java:215)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:66)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:56)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:105)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:215)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:178)
	at org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:133)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:200)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:133)
	at org.springframework.test.web.servlet.MockMvc.perform(MockMvc.java:165)
	at ru.javawebinar.graduation.controller.restaurant.RestaurantProfileRestControllerTest.testChoiceTimeIsUpReVote(RestaurantProfileRestControllerTest.java:76)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.platform.commons.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:513)
	at org.junit.jupiter.engine.execution.ExecutableInvoker.invoke(ExecutableInvoker.java:115)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeTestMethod$6(TestMethodTestDescriptor.java:170)
	at org.junit.jupiter.engine.execution.ThrowableCollector.execute(ThrowableCollector.java:40)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeTestMethod(TestMethodTestDescriptor.java:166)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:113)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:58)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor$NodeExecutor.lambda$executeRecursively$3(HierarchicalTestExecutor.java:113)
	at org.junit.platform.engine.support.hierarchical.SingleTestExecutor.executeSafely(SingleTestExecutor.java:66)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor$NodeExecutor.executeRecursively(HierarchicalTestExecutor.java:108)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor$NodeExecutor.execute(HierarchicalTestExecutor.java:79)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor$NodeExecutor.lambda$executeRecursively$2(HierarchicalTestExecutor.java:121)
	at java.util.stream.ForEachOps$ForEachOp$OfRef.accept(ForEachOps.java:184)
	at java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:175)
	at java.util.Iterator.forEachRemaining(Iterator.java:116)
	at java.util.Spliterators$IteratorSpliterator.forEachRemaining(Spliterators.java:1801)
	at java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:481)
	at java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:471)
	at java.util.stream.ForEachOps$ForEachOp.evaluateSequential(ForEachOps.java:151)
	at java.util.stream.ForEachOps$ForEachOp$OfRef.evaluateSequential(ForEachOps.java:174)
	at java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)
	at java.util.stream.ReferencePipeline.forEach(ReferencePipeline.java:418)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor$NodeExecutor.lambda$executeRecursively$3(HierarchicalTestExecutor.java:121)
	at org.junit.platform.engine.support.hierarchical.SingleTestExecutor.executeSafely(SingleTestExecutor.java:66)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor$NodeExecutor.executeRecursively(HierarchicalTestExecutor.java:108)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor$NodeExecutor.execute(HierarchicalTestExecutor.java:79)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor$NodeExecutor.lambda$executeRecursively$2(HierarchicalTestExecutor.java:121)
	at java.util.stream.ForEachOps$ForEachOp$OfRef.accept(ForEachOps.java:184)
	at java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:175)
	at java.util.Iterator.forEachRemaining(Iterator.java:116)
	at java.util.Spliterators$IteratorSpliterator.forEachRemaining(Spliterators.java:1801)
	at java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:481)
	at java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:471)
	at java.util.stream.ForEachOps$ForEachOp.evaluateSequential(ForEachOps.java:151)
	at java.util.stream.ForEachOps$ForEachOp$OfRef.evaluateSequential(ForEachOps.java:174)
	at java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)
	at java.util.stream.ReferencePipeline.forEach(ReferencePipeline.java:418)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor$NodeExecutor.lambda$executeRecursively$3(HierarchicalTestExecutor.java:121)
	at org.junit.platform.engine.support.hierarchical.SingleTestExecutor.executeSafely(SingleTestExecutor.java:66)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor$NodeExecutor.executeRecursively(HierarchicalTestExecutor.java:108)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor$NodeExecutor.execute(HierarchicalTestExecutor.java:79)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:55)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:43)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:170)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:154)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:90)
	at org.junit.platform.surefire.provider.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:132)
	at org.junit.platform.surefire.provider.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:111)
	at org.apache.maven.surefire.booter.ForkedBooter.invokeProviderInSameClassLoader(ForkedBooter.java:383)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:344)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:125)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:417)
11:32:55.828 [34mINFO [0;39m [36mo.s.test.context.transaction.TransactionContext.endTransaction:139[0;39m - Rolled back transaction for test: [DefaultTestContext@2d5e051e testClass = RestaurantProfileRestControllerTest, testInstance = ru.javawebinar.graduation.controller.restaurant.RestaurantProfileRestControllerTest@4407fea2, testMethod = testChoiceTimeIsUpReVote@RestaurantProfileRestControllerTest, testException = org.springframework.web.util.NestedServletException: Request processing failed; nested exception is ru.javawebinar.graduation.util.exception.VoteTimeExpiredException: type=APP_ERROR, msgCode=exception.vote.timeIsUp, args=[Time for re-voting has expired], mergedContextConfiguration = [WebMergedContextConfiguration@30811f91 testClass = RestaurantProfileRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]
11:32:55.835 [34mINFO [0;39m [36morg.springframework.mock.web.MockServletContext.log:438[0;39m - Initializing Spring FrameworkServlet ''
11:32:55.836 [34mINFO [0;39m [36morg.springframework.web.servlet.FrameworkServlet.initServletBean:494[0;39m - FrameworkServlet '': initialization started
11:32:55.840 [34mINFO [0;39m [36morg.springframework.web.servlet.FrameworkServlet.initServletBean:509[0;39m - FrameworkServlet '': initialization completed in 4 ms
11:32:55.847 [34mINFO [0;39m [36mo.s.test.context.transaction.TransactionContext.startTransaction:107[0;39m - Began transaction (1) for test context [DefaultTestContext@2d5e051e testClass = RestaurantProfileRestControllerTest, testInstance = ru.javawebinar.graduation.controller.restaurant.RestaurantProfileRestControllerTest@6fb219dd, testMethod = testGetAllWithMealsByToday@RestaurantProfileRestControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@30811f91 testClass = RestaurantProfileRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@1e95f584]; rollback [true]
Hibernate: 
    /* select
        generatedAlias0 
    from
        User as generatedAlias0 
    where
        generatedAlias0.email=:param0 */ select
            user0_.id as id1_3_,
            user0_.name as name2_3_,
            user0_.email as email3_3_,
            user0_.enabled as enabled4_3_,
            user0_.password as password5_3_,
            user0_.registered as register6_3_ 
        from
            users user0_ 
        where
            user0_.email=?
Hibernate: 
    /* load collection ru.javawebinar.graduation.model.User.roles */ select
        roles0_.user_id as user_id1_2_0_,
        roles0_.role as role2_2_0_ 
    from
        user_roles roles0_ 
    where
        roles0_.user_id=?
11:32:55.862 [34mINFO [0;39m [36mr.j.g.c.restaurant.AbstractRestaurantController.getAllWithMealsByToday:68[0;39m - getWithMealsByToday {}
Hibernate: 
    /* SELECT
        DISTINCT r 
    FROM
        Restaurant r 
    LEFT JOIN
        FETCH r.meals m 
    WHERE
        m.created=:date 
    ORDER BY
        r.name ASC */ select
            distinct restaurant0_.id as id1_1_0_,
            meals1_.id as id1_0_1_,
            restaurant0_.name as name2_1_0_,
            meals1_.name as name2_0_1_,
            meals1_.created as created3_0_1_,
            meals1_.price as price4_0_1_,
            meals1_.restaurant_id as restaura5_0_1_,
            meals1_.restaurant_id as restaura5_0_0__,
            meals1_.id as id1_0_0__ 
        from
            restaurants restaurant0_ 
        left outer join
            meals meals1_ 
                on restaurant0_.id=meals1_.restaurant_id 
        where
            meals1_.created=? 
        order by
            restaurant0_.name ASC,
            meals1_.created desc

MockHttpServletRequest:
      HTTP Method = GET
      Request URI = /rest/profile/restaurants/
       Parameters = {}
          Headers = {Authorization=[Basic dXNlckB5YW5kZXgucnU6cGFzc3dvcmQ=]}
             Body = null
    Session Attrs = {}

Handler:
             Type = ru.javawebinar.graduation.controller.restaurant.RestaurantProfileRestController
           Method = public java.util.List<ru.javawebinar.graduation.model.Restaurant> ru.javawebinar.graduation.controller.restaurant.RestaurantProfileRestController.getAllWithMealsByToday()

Async:
    Async started = false
     Async result = null

Resolved Exception:
             Type = null

ModelAndView:
        View name = null
             View = null
            Model = null

FlashMap:
       Attributes = null

MockHttpServletResponse:
           Status = 200
    Error message = null
          Headers = {Content-Type=[application/json;charset=UTF-8], Cache-Control=[no-cache, no-store, max-age=0, must-revalidate], Pragma=[no-cache], Expires=[0], X-XSS-Protection=[1; mode=block], X-Frame-Options=[DENY], X-Content-Type-Options=[nosniff]}
     Content type = application/json;charset=UTF-8
             Body = [{"id":100004,"name":"Cafe Loren","meals":[{"id":100011,"name":"Porridge","created":"2018-10-12","price":1.50},{"id":100012,"name":"Pizza","created":"2018-10-12","price":2.50}],"votes":null},{"id":100002,"name":"Cafe Maya","meals":[{"id":100005,"name":"Beef steak","created":"2018-10-12","price":3.00},{"id":100006,"name":"Borsch","created":"2018-10-12","price":2.00},{"id":100007,"name":"Pancake","created":"2018-10-12","price":1.00}],"votes":null},{"id":100003,"name":"Little Wonder Cafe","meals":[{"id":100008,"name":"Deep fried potatoes","created":"2018-10-12","price":1.00},{"id":100009,"name":"Macaroni","created":"2018-10-12","price":2.00},{"id":100010,"name":"Bouillon","created":"2018-10-12","price":1.00}],"votes":null}]
    Forwarded URL = null
   Redirected URL = null
          Cookies = []
11:32:55.902 [34mINFO [0;39m [36mo.s.test.context.transaction.TransactionContext.endTransaction:139[0;39m - Rolled back transaction for test: [DefaultTestContext@2d5e051e testClass = RestaurantProfileRestControllerTest, testInstance = ru.javawebinar.graduation.controller.restaurant.RestaurantProfileRestControllerTest@6fb219dd, testMethod = testGetAllWithMealsByToday@RestaurantProfileRestControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@30811f91 testClass = RestaurantProfileRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]
11:32:55.904 [34mINFO [0;39m [36morg.springframework.mock.web.MockServletContext.log:438[0;39m - Initializing Spring FrameworkServlet ''
11:32:55.905 [34mINFO [0;39m [36morg.springframework.web.servlet.FrameworkServlet.initServletBean:494[0;39m - FrameworkServlet '': initialization started
11:32:55.908 [34mINFO [0;39m [36morg.springframework.web.servlet.FrameworkServlet.initServletBean:509[0;39m - FrameworkServlet '': initialization completed in 2 ms
11:32:55.911 [34mINFO [0;39m [36mo.s.test.context.transaction.TransactionContext.startTransaction:107[0;39m - Began transaction (1) for test context [DefaultTestContext@2d5e051e testClass = RestaurantProfileRestControllerTest, testInstance = ru.javawebinar.graduation.controller.restaurant.RestaurantProfileRestControllerTest@8ce4320, testMethod = testChoice@RestaurantProfileRestControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@30811f91 testClass = RestaurantProfileRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@1e95f584]; rollback [true]
Hibernate: 
    /* select
        generatedAlias0 
    from
        User as generatedAlias0 
    where
        generatedAlias0.email=:param0 */ select
            user0_.id as id1_3_,
            user0_.name as name2_3_,
            user0_.email as email3_3_,
            user0_.enabled as enabled4_3_,
            user0_.password as password5_3_,
            user0_.registered as register6_3_ 
        from
            users user0_ 
        where
            user0_.email=?
Hibernate: 
    /* load collection ru.javawebinar.graduation.model.User.roles */ select
        roles0_.user_id as user_id1_2_0_,
        roles0_.role as role2_2_0_ 
    from
        user_roles roles0_ 
    where
        roles0_.user_id=?
11:32:55.930 [34mINFO [0;39m [36mr.j.g.c.restaurant.AbstractRestaurantController.choice:73[0;39m - choice {}
Hibernate: 
    select
        restaurant0_.id as id1_1_0_,
        restaurant0_.name as name2_1_0_ 
    from
        restaurants restaurant0_ 
    where
        restaurant0_.id=?
Hibernate: 
    /* select
        generatedAlias0 
    from
        Vote as generatedAlias0 
    left join
        generatedAlias0.user as generatedAlias1 
    where
        (
            generatedAlias1.id=:param0 
        ) 
        and (
            generatedAlias0.voted=:param1 
        ) */ select
            vote0_.id as id1_4_,
            vote0_.restaurant_id as restaura3_4_,
            vote0_.user_id as user_id4_4_,
            vote0_.voted as voted2_4_ 
        from
            votes vote0_ 
        left outer join
            users user1_ 
                on vote0_.user_id=user1_.id 
        where
            user1_.id=? 
            and vote0_.voted=?
Hibernate: 
    call next value for global_seq
11:32:55.948 [1;31mERROR[0;39m [36mr.j.graduation.controller.ExceptionInfoHandler.logAndGetErrorInfo:106[0;39m - APP_ERROR at request http://localhost/rest/profile/restaurants/
org.springframework.context.NoSuchMessageException: No message found under code 'vote.successfullyVoted' for locale 'ru'.
	at org.springframework.context.support.AbstractMessageSource.getMessage(AbstractMessageSource.java:161)
	at ru.javawebinar.graduation.controller.MessageUtil.getMessage(MessageUtil.java:23)
	at ru.javawebinar.graduation.controller.MessageUtil.getMessage(MessageUtil.java:27)
	at ru.javawebinar.graduation.controller.restaurant.RestaurantProfileRestController.choice(RestaurantProfileRestController.java:31)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:209)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:136)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:102)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:877)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:783)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:991)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:925)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:974)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:877)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:661)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:851)
	at org.springframework.test.web.servlet.TestDispatcherServlet.service(TestDispatcherServlet.java:71)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:742)
	at org.springframework.mock.web.MockFilterChain$ServletFilterProxy.doFilter(MockFilterChain.java:166)
	at org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:133)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:320)
	at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:127)
	at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:91)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:119)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:111)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:170)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.authentication.www.BasicAuthenticationFilter.doFilterInternal(BasicAuthenticationFilter.java:215)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:66)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:56)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:105)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:215)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:178)
	at org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:133)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:200)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:133)
	at org.springframework.test.web.servlet.MockMvc.perform(MockMvc.java:165)
	at ru.javawebinar.graduation.controller.restaurant.RestaurantProfileRestControllerTest.testChoice(RestaurantProfileRestControllerTest.java:47)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.platform.commons.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:513)
	at org.junit.jupiter.engine.execution.ExecutableInvoker.invoke(ExecutableInvoker.java:115)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeTestMethod$6(TestMethodTestDescriptor.java:170)
	at org.junit.jupiter.engine.execution.ThrowableCollector.execute(ThrowableCollector.java:40)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeTestMethod(TestMethodTestDescriptor.java:166)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:113)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:58)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor$NodeExecutor.lambda$executeRecursively$3(HierarchicalTestExecutor.java:113)
	at org.junit.platform.engine.support.hierarchical.SingleTestExecutor.executeSafely(SingleTestExecutor.java:66)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor$NodeExecutor.executeRecursively(HierarchicalTestExecutor.java:108)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor$NodeExecutor.execute(HierarchicalTestExecutor.java:79)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor$NodeExecutor.lambda$executeRecursively$2(HierarchicalTestExecutor.java:121)
	at java.util.stream.ForEachOps$ForEachOp$OfRef.accept(ForEachOps.java:184)
	at java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:175)
	at java.util.Iterator.forEachRemaining(Iterator.java:116)
	at java.util.Spliterators$IteratorSpliterator.forEachRemaining(Spliterators.java:1801)
	at java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:481)
	at java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:471)
	at java.util.stream.ForEachOps$ForEachOp.evaluateSequential(ForEachOps.java:151)
	at java.util.stream.ForEachOps$ForEachOp$OfRef.evaluateSequential(ForEachOps.java:174)
	at java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)
	at java.util.stream.ReferencePipeline.forEach(ReferencePipeline.java:418)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor$NodeExecutor.lambda$executeRecursively$3(HierarchicalTestExecutor.java:121)
	at org.junit.platform.engine.support.hierarchical.SingleTestExecutor.executeSafely(SingleTestExecutor.java:66)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor$NodeExecutor.executeRecursively(HierarchicalTestExecutor.java:108)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor$NodeExecutor.execute(HierarchicalTestExecutor.java:79)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor$NodeExecutor.lambda$executeRecursively$2(HierarchicalTestExecutor.java:121)
	at java.util.stream.ForEachOps$ForEachOp$OfRef.accept(ForEachOps.java:184)
	at java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:175)
	at java.util.Iterator.forEachRemaining(Iterator.java:116)
	at java.util.Spliterators$IteratorSpliterator.forEachRemaining(Spliterators.java:1801)
	at java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:481)
	at java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:471)
	at java.util.stream.ForEachOps$ForEachOp.evaluateSequential(ForEachOps.java:151)
	at java.util.stream.ForEachOps$ForEachOp$OfRef.evaluateSequential(ForEachOps.java:174)
	at java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)
	at java.util.stream.ReferencePipeline.forEach(ReferencePipeline.java:418)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor$NodeExecutor.lambda$executeRecursively$3(HierarchicalTestExecutor.java:121)
	at org.junit.platform.engine.support.hierarchical.SingleTestExecutor.executeSafely(SingleTestExecutor.java:66)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor$NodeExecutor.executeRecursively(HierarchicalTestExecutor.java:108)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor$NodeExecutor.execute(HierarchicalTestExecutor.java:79)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:55)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:43)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:170)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:154)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:90)
	at org.junit.platform.surefire.provider.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:132)
	at org.junit.platform.surefire.provider.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:111)
	at org.apache.maven.surefire.booter.ForkedBooter.invokeProviderInSameClassLoader(ForkedBooter.java:383)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:344)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:125)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:417)
11:32:55.951 [31mWARN [0;39m [36mo.s.w.s.m.m.a.ExceptionHandlerExceptionResolver.doResolveHandlerMethodException:411[0;39m - Failed to invoke @ExceptionHandler method: public ru.javawebinar.graduation.util.exception.ErrorInfo ru.javawebinar.graduation.controller.ExceptionInfoHandler.handleError(javax.servlet.http.HttpServletRequest,java.lang.Exception)
org.springframework.context.NoSuchMessageException: No message found under code 'error.appError' for locale 'ru'.
	at org.springframework.context.support.AbstractMessageSource.getMessage(AbstractMessageSource.java:161)
	at ru.javawebinar.graduation.controller.MessageUtil.getMessage(MessageUtil.java:23)
	at ru.javawebinar.graduation.controller.MessageUtil.getMessage(MessageUtil.java:27)
	at ru.javawebinar.graduation.controller.ExceptionInfoHandler.logAndGetErrorInfo(ExceptionInfoHandler.java:111)
	at ru.javawebinar.graduation.controller.ExceptionInfoHandler.handleError(ExceptionInfoHandler.java:100)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:209)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:136)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:102)
	at org.springframework.web.servlet.mvc.method.annotation.ExceptionHandlerExceptionResolver.doResolveHandlerMethodException(ExceptionHandlerExceptionResolver.java:404)
	at org.springframework.web.servlet.handler.AbstractHandlerMethodExceptionResolver.doResolveException(AbstractHandlerMethodExceptionResolver.java:61)
	at org.springframework.web.servlet.handler.AbstractHandlerExceptionResolver.resolveException(AbstractHandlerExceptionResolver.java:139)
	at org.springframework.web.servlet.DispatcherServlet.processHandlerException(DispatcherServlet.java:1255)
	at org.springframework.test.web.servlet.TestDispatcherServlet.processHandlerException(TestDispatcherServlet.java:133)
	at org.springframework.web.servlet.DispatcherServlet.processDispatchResult(DispatcherServlet.java:1062)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1008)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:925)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:974)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:877)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:661)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:851)
	at org.springframework.test.web.servlet.TestDispatcherServlet.service(TestDispatcherServlet.java:71)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:742)
	at org.springframework.mock.web.MockFilterChain$ServletFilterProxy.doFilter(MockFilterChain.java:166)
	at org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:133)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:320)
	at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:127)
	at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:91)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:119)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:111)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:170)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.authentication.www.BasicAuthenticationFilter.doFilterInternal(BasicAuthenticationFilter.java:215)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:66)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:56)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:105)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:215)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:178)
	at org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:133)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:200)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:133)
	at org.springframework.test.web.servlet.MockMvc.perform(MockMvc.java:165)
	at ru.javawebinar.graduation.controller.restaurant.RestaurantProfileRestControllerTest.testChoice(RestaurantProfileRestControllerTest.java:47)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.platform.commons.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:513)
	at org.junit.jupiter.engine.execution.ExecutableInvoker.invoke(ExecutableInvoker.java:115)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeTestMethod$6(TestMethodTestDescriptor.java:170)
	at org.junit.jupiter.engine.execution.ThrowableCollector.execute(ThrowableCollector.java:40)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeTestMethod(TestMethodTestDescriptor.java:166)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:113)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:58)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor$NodeExecutor.lambda$executeRecursively$3(HierarchicalTestExecutor.java:113)
	at org.junit.platform.engine.support.hierarchical.SingleTestExecutor.executeSafely(SingleTestExecutor.java:66)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor$NodeExecutor.executeRecursively(HierarchicalTestExecutor.java:108)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor$NodeExecutor.execute(HierarchicalTestExecutor.java:79)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor$NodeExecutor.lambda$executeRecursively$2(HierarchicalTestExecutor.java:121)
	at java.util.stream.ForEachOps$ForEachOp$OfRef.accept(ForEachOps.java:184)
	at java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:175)
	at java.util.Iterator.forEachRemaining(Iterator.java:116)
	at java.util.Spliterators$IteratorSpliterator.forEachRemaining(Spliterators.java:1801)
	at java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:481)
	at java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:471)
	at java.util.stream.ForEachOps$ForEachOp.evaluateSequential(ForEachOps.java:151)
	at java.util.stream.ForEachOps$ForEachOp$OfRef.evaluateSequential(ForEachOps.java:174)
	at java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)
	at java.util.stream.ReferencePipeline.forEach(ReferencePipeline.java:418)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor$NodeExecutor.lambda$executeRecursively$3(HierarchicalTestExecutor.java:121)
	at org.junit.platform.engine.support.hierarchical.SingleTestExecutor.executeSafely(SingleTestExecutor.java:66)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor$NodeExecutor.executeRecursively(HierarchicalTestExecutor.java:108)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor$NodeExecutor.execute(HierarchicalTestExecutor.java:79)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor$NodeExecutor.lambda$executeRecursively$2(HierarchicalTestExecutor.java:121)
	at java.util.stream.ForEachOps$ForEachOp$OfRef.accept(ForEachOps.java:184)
	at java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:175)
	at java.util.Iterator.forEachRemaining(Iterator.java:116)
	at java.util.Spliterators$IteratorSpliterator.forEachRemaining(Spliterators.java:1801)
	at java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:481)
	at java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:471)
	at java.util.stream.ForEachOps$ForEachOp.evaluateSequential(ForEachOps.java:151)
	at java.util.stream.ForEachOps$ForEachOp$OfRef.evaluateSequential(ForEachOps.java:174)
	at java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)
	at java.util.stream.ReferencePipeline.forEach(ReferencePipeline.java:418)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor$NodeExecutor.lambda$executeRecursively$3(HierarchicalTestExecutor.java:121)
	at org.junit.platform.engine.support.hierarchical.SingleTestExecutor.executeSafely(SingleTestExecutor.java:66)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor$NodeExecutor.executeRecursively(HierarchicalTestExecutor.java:108)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor$NodeExecutor.execute(HierarchicalTestExecutor.java:79)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:55)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:43)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:170)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:154)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:90)
	at org.junit.platform.surefire.provider.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:132)
	at org.junit.platform.surefire.provider.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:111)
	at org.apache.maven.surefire.booter.ForkedBooter.invokeProviderInSameClassLoader(ForkedBooter.java:383)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:344)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:125)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:417)
11:32:55.956 [34mINFO [0;39m [36mo.s.test.context.transaction.TransactionContext.endTransaction:139[0;39m - Rolled back transaction for test: [DefaultTestContext@2d5e051e testClass = RestaurantProfileRestControllerTest, testInstance = ru.javawebinar.graduation.controller.restaurant.RestaurantProfileRestControllerTest@8ce4320, testMethod = testChoice@RestaurantProfileRestControllerTest, testException = org.springframework.web.util.NestedServletException: Request processing failed; nested exception is org.springframework.context.NoSuchMessageException: No message found under code 'vote.successfullyVoted' for locale 'ru'., mergedContextConfiguration = [WebMergedContextConfiguration@30811f91 testClass = RestaurantProfileRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]
11:32:55.964 [34mINFO [0;39m [36morg.springframework.mock.web.MockServletContext.log:438[0;39m - Initializing Spring FrameworkServlet ''
11:32:55.965 [34mINFO [0;39m [36morg.springframework.web.servlet.FrameworkServlet.initServletBean:494[0;39m - FrameworkServlet '': initialization started
11:32:55.968 [34mINFO [0;39m [36morg.springframework.web.servlet.FrameworkServlet.initServletBean:509[0;39m - FrameworkServlet '': initialization completed in 3 ms
11:32:55.974 [34mINFO [0;39m [36mo.s.test.context.transaction.TransactionContext.startTransaction:107[0;39m - Began transaction (1) for test context [DefaultTestContext@2d5e051e testClass = RestaurantProfileRestControllerTest, testInstance = ru.javawebinar.graduation.controller.restaurant.RestaurantProfileRestControllerTest@3aa63b53, testMethod = testGetUnAuth@RestaurantProfileRestControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@30811f91 testClass = RestaurantProfileRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@1e95f584]; rollback [true]
11:32:55.984 [34mINFO [0;39m [36mo.s.test.context.transaction.TransactionContext.endTransaction:139[0;39m - Rolled back transaction for test: [DefaultTestContext@2d5e051e testClass = RestaurantProfileRestControllerTest, testInstance = ru.javawebinar.graduation.controller.restaurant.RestaurantProfileRestControllerTest@3aa63b53, testMethod = testGetUnAuth@RestaurantProfileRestControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@30811f91 testClass = RestaurantProfileRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]
[ERROR] Tests run: 6, Failures: 0, Errors: 4, Skipped: 0, Time elapsed: 0.421 s <<< FAILURE! - in ru.javawebinar.graduation.controller.restaurant.RestaurantProfileRestControllerTest
[ERROR] testChoiceReVote  Time elapsed: 0.088 s  <<< ERROR!
org.springframework.web.util.NestedServletException: Request processing failed; nested exception is org.springframework.context.NoSuchMessageException: No message found under code 'vote.successfullyVoted' for locale 'ru'.
	at ru.javawebinar.graduation.controller.restaurant.RestaurantProfileRestControllerTest.testChoiceReVote(RestaurantProfileRestControllerTest.java:62)
Caused by: org.springframework.context.NoSuchMessageException: No message found under code 'vote.successfullyVoted' for locale 'ru'.
	at ru.javawebinar.graduation.controller.restaurant.RestaurantProfileRestControllerTest.testChoiceReVote(RestaurantProfileRestControllerTest.java:62)

[ERROR] testChoiceBadVote  Time elapsed: 0.045 s  <<< ERROR!
org.springframework.web.util.NestedServletException: Request processing failed; nested exception is org.springframework.context.NoSuchMessageException: No message found under code 'vote.unsuccessfullyVoted' for locale 'ru'.
	at ru.javawebinar.graduation.controller.restaurant.RestaurantProfileRestControllerTest.testChoiceBadVote(RestaurantProfileRestControllerTest.java:87)
Caused by: org.springframework.context.NoSuchMessageException: No message found under code 'vote.unsuccessfullyVoted' for locale 'ru'.
	at ru.javawebinar.graduation.controller.restaurant.RestaurantProfileRestControllerTest.testChoiceBadVote(RestaurantProfileRestControllerTest.java:87)

[ERROR] testChoiceTimeIsUpReVote  Time elapsed: 0.04 s  <<< ERROR!
org.springframework.web.util.NestedServletException: Request processing failed; nested exception is ru.javawebinar.graduation.util.exception.VoteTimeExpiredException: type=APP_ERROR, msgCode=exception.vote.timeIsUp, args=[Time for re-voting has expired]
	at ru.javawebinar.graduation.controller.restaurant.RestaurantProfileRestControllerTest.testChoiceTimeIsUpReVote(RestaurantProfileRestControllerTest.java:76)
Caused by: ru.javawebinar.graduation.util.exception.VoteTimeExpiredException: type=APP_ERROR, msgCode=exception.vote.timeIsUp, args=[Time for re-voting has expired]
	at ru.javawebinar.graduation.controller.restaurant.RestaurantProfileRestControllerTest.testChoiceTimeIsUpReVote(RestaurantProfileRestControllerTest.java:76)

[ERROR] testChoice  Time elapsed: 0.05 s  <<< ERROR!
org.springframework.web.util.NestedServletException: Request processing failed; nested exception is org.springframework.context.NoSuchMessageException: No message found under code 'vote.successfullyVoted' for locale 'ru'.
	at ru.javawebinar.graduation.controller.restaurant.RestaurantProfileRestControllerTest.testChoice(RestaurantProfileRestControllerTest.java:47)
Caused by: org.springframework.context.NoSuchMessageException: No message found under code 'vote.successfullyVoted' for locale 'ru'.
	at ru.javawebinar.graduation.controller.restaurant.RestaurantProfileRestControllerTest.testChoice(RestaurantProfileRestControllerTest.java:47)

[INFO] Running ru.javawebinar.graduation.controller.meal.MealAdminRestControllerTest
11:32:56.014 [34mINFO [0;39m [36mo.s.t.c.support.AbstractTestContextBootstrapper.getDefaultTestExecutionListenerClassNames:248[0;39m - Loaded default TestExecutionListener class names from location [META-INF/spring.factories]: [org.springframework.security.test.context.support.WithSecurityContextTestExecutionListener, org.springframework.security.test.context.support.ReactorContextTestExecutionListener, org.springframework.test.context.web.ServletTestExecutionListener, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener, org.springframework.test.context.support.DependencyInjectionTestExecutionListener, org.springframework.test.context.support.DirtiesContextTestExecutionListener, org.springframework.test.context.transaction.TransactionalTestExecutionListener, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener]
11:32:56.018 [34mINFO [0;39m [36mo.s.t.c.support.AbstractTestContextBootstrapper.getTestExecutionListeners:177[0;39m - Using TestExecutionListeners: [org.springframework.test.context.web.ServletTestExecutionListener@2af3b054, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener@21046afa, org.springframework.test.context.support.DependencyInjectionTestExecutionListener@552fffc8, org.springframework.test.context.support.DirtiesContextTestExecutionListener@5ac53209, org.springframework.test.context.transaction.TransactionalTestExecutionListener@6d035815, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener@6fd2acf5, org.springframework.security.test.context.support.WithSecurityContextTestExecutionListener@45a9cf78, org.springframework.security.test.context.support.ReactorContextTestExecutionListener@368ff8be]
11:32:56.024 [34mINFO [0;39m [36morg.springframework.mock.web.MockServletContext.log:438[0;39m - Initializing Spring FrameworkServlet ''
11:32:56.025 [34mINFO [0;39m [36morg.springframework.web.servlet.FrameworkServlet.initServletBean:494[0;39m - FrameworkServlet '': initialization started
11:32:56.027 [34mINFO [0;39m [36morg.springframework.web.servlet.FrameworkServlet.initServletBean:509[0;39m - FrameworkServlet '': initialization completed in 2 ms
11:32:56.071 [34mINFO [0;39m [36mo.s.test.context.transaction.TransactionContext.startTransaction:107[0;39m - Began transaction (1) for test context [DefaultTestContext@7a92827f testClass = MealAdminRestControllerTest, testInstance = ru.javawebinar.graduation.controller.meal.MealAdminRestControllerTest@43094e0c, testMethod = testUpdateDuplicate@MealAdminRestControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@35efd12c testClass = MealAdminRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@1e95f584]; rollback [true]
Hibernate: 
    /* select
        generatedAlias0 
    from
        User as generatedAlias0 
    where
        generatedAlias0.email=:param0 */ select
            user0_.id as id1_3_,
            user0_.name as name2_3_,
            user0_.email as email3_3_,
            user0_.enabled as enabled4_3_,
            user0_.password as password5_3_,
            user0_.registered as register6_3_ 
        from
            users user0_ 
        where
            user0_.email=?
Hibernate: 
    /* load collection ru.javawebinar.graduation.model.User.roles */ select
        roles0_.user_id as user_id1_2_0_,
        roles0_.role as role2_2_0_ 
    from
        user_roles roles0_ 
    where
        roles0_.user_id=?
11:32:56.101 [34mINFO [0;39m [36mr.j.g.controller.meal.MealAdminRestController.update:97[0;39m - update Meal{created=2018-10-12, name='Borsch', price=1.50, id=100005} with id=100005
Hibernate: 
    select
        meal0_.id as id1_0_0_,
        meal0_.name as name2_0_0_,
        meal0_.created as created3_0_0_,
        meal0_.price as price4_0_0_,
        meal0_.restaurant_id as restaura5_0_0_ 
    from
        meals meal0_ 
    where
        meal0_.id=?
Hibernate: 
    /* load ru.javawebinar.graduation.model.Meal */ select
        meal0_.id as id1_0_0_,
        meal0_.name as name2_0_0_,
        meal0_.created as created3_0_0_,
        meal0_.price as price4_0_0_,
        meal0_.restaurant_id as restaura5_0_0_ 
    from
        meals meal0_ 
    where
        meal0_.id=?
Hibernate: 
    /* update
        ru.javawebinar.graduation.model.Meal */ update
            meals 
        set
            name=?,
            created=?,
            price=?,
            restaurant_id=? 
        where
            id=?
11:32:56.128 [31mWARN [0;39m [36morg.hibernate.engine.jdbc.spi.SqlExceptionHelper.logExceptions:137[0;39m - SQL Error: -104, SQLState: 23505
11:32:56.134 [1;31mERROR[0;39m [36morg.hibernate.engine.jdbc.spi.SqlExceptionHelper.logExceptions:142[0;39m - integrity constraint violation: unique constraint or index violation: MEALS_UNIQUE_NAME_CREATED_RESTAURANT_IDX
11:32:56.135 [1;31mERROR[0;39m [36morg.hibernate.internal.ExceptionMapperStandardImpl.mapManagedFlushFailure:39[0;39m - HHH000346: Error during managed flush [org.hibernate.exception.ConstraintViolationException: could not execute statement]
11:32:56.138 [31mWARN [0;39m [36mo.s.w.s.m.m.a.ExceptionHandlerExceptionResolver.doResolveHandlerMethodException:411[0;39m - Failed to invoke @ExceptionHandler method: public ru.javawebinar.graduation.util.exception.ErrorInfo ru.javawebinar.graduation.controller.ExceptionInfoHandler.conflict(javax.servlet.http.HttpServletRequest,org.springframework.dao.DataIntegrityViolationException)
org.springframework.context.NoSuchMessageException: No message found under code 'exception.meal.duplicateNameToday' for locale 'ru'.
	at org.springframework.context.support.AbstractMessageSource.getMessage(AbstractMessageSource.java:161)
	at ru.javawebinar.graduation.controller.MessageUtil.getMessage(MessageUtil.java:23)
	at ru.javawebinar.graduation.controller.MessageUtil.getMessage(MessageUtil.java:27)
	at ru.javawebinar.graduation.controller.ExceptionInfoHandler.conflict(ExceptionInfoHandler.java:68)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:209)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:136)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:102)
	at org.springframework.web.servlet.mvc.method.annotation.ExceptionHandlerExceptionResolver.doResolveHandlerMethodException(ExceptionHandlerExceptionResolver.java:400)
	at org.springframework.web.servlet.handler.AbstractHandlerMethodExceptionResolver.doResolveException(AbstractHandlerMethodExceptionResolver.java:61)
	at org.springframework.web.servlet.handler.AbstractHandlerExceptionResolver.resolveException(AbstractHandlerExceptionResolver.java:139)
	at org.springframework.web.servlet.DispatcherServlet.processHandlerException(DispatcherServlet.java:1255)
	at org.springframework.test.web.servlet.TestDispatcherServlet.processHandlerException(TestDispatcherServlet.java:133)
	at org.springframework.web.servlet.DispatcherServlet.processDispatchResult(DispatcherServlet.java:1062)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1008)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:925)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:974)
	at org.springframework.web.servlet.FrameworkServlet.doPut(FrameworkServlet.java:888)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:664)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:851)
	at org.springframework.test.web.servlet.TestDispatcherServlet.service(TestDispatcherServlet.java:71)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:742)
	at org.springframework.mock.web.MockFilterChain$ServletFilterProxy.doFilter(MockFilterChain.java:166)
	at org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:133)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:320)
	at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:127)
	at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:91)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:119)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:111)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:170)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.authentication.www.BasicAuthenticationFilter.doFilterInternal(BasicAuthenticationFilter.java:215)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:66)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:56)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:105)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:215)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:178)
	at org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:133)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:200)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:133)
	at org.springframework.test.web.servlet.MockMvc.perform(MockMvc.java:165)
	at ru.javawebinar.graduation.controller.meal.MealAdminRestControllerTest.testUpdateDuplicate(MealAdminRestControllerTest.java:211)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.platform.commons.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:513)
	at org.junit.jupiter.engine.execution.ExecutableInvoker.invoke(ExecutableInvoker.java:115)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeTestMethod$6(TestMethodTestDescriptor.java:170)
	at org.junit.jupiter.engine.execution.ThrowableCollector.execute(ThrowableCollector.java:40)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeTestMethod(TestMethodTestDescriptor.java:166)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:113)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:58)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor$NodeExecutor.lambda$executeRecursively$3(HierarchicalTestExecutor.java:113)
	at org.junit.platform.engine.support.hierarchical.SingleTestExecutor.executeSafely(SingleTestExecutor.java:66)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor$NodeExecutor.executeRecursively(HierarchicalTestExecutor.java:108)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor$NodeExecutor.execute(HierarchicalTestExecutor.java:79)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor$NodeExecutor.lambda$executeRecursively$2(HierarchicalTestExecutor.java:121)
	at java.util.stream.ForEachOps$ForEachOp$OfRef.accept(ForEachOps.java:184)
	at java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:175)
	at java.util.Iterator.forEachRemaining(Iterator.java:116)
	at java.util.Spliterators$IteratorSpliterator.forEachRemaining(Spliterators.java:1801)
	at java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:481)
	at java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:471)
	at java.util.stream.ForEachOps$ForEachOp.evaluateSequential(ForEachOps.java:151)
	at java.util.stream.ForEachOps$ForEachOp$OfRef.evaluateSequential(ForEachOps.java:174)
	at java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)
	at java.util.stream.ReferencePipeline.forEach(ReferencePipeline.java:418)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor$NodeExecutor.lambda$executeRecursively$3(HierarchicalTestExecutor.java:121)
	at org.junit.platform.engine.support.hierarchical.SingleTestExecutor.executeSafely(SingleTestExecutor.java:66)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor$NodeExecutor.executeRecursively(HierarchicalTestExecutor.java:108)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor$NodeExecutor.execute(HierarchicalTestExecutor.java:79)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor$NodeExecutor.lambda$executeRecursively$2(HierarchicalTestExecutor.java:121)
	at java.util.stream.ForEachOps$ForEachOp$OfRef.accept(ForEachOps.java:184)
	at java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:175)
	at java.util.Iterator.forEachRemaining(Iterator.java:116)
	at java.util.Spliterators$IteratorSpliterator.forEachRemaining(Spliterators.java:1801)
	at java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:481)
	at java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:471)
	at java.util.stream.ForEachOps$ForEachOp.evaluateSequential(ForEachOps.java:151)
	at java.util.stream.ForEachOps$ForEachOp$OfRef.evaluateSequential(ForEachOps.java:174)
	at java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)
	at java.util.stream.ReferencePipeline.forEach(ReferencePipeline.java:418)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor$NodeExecutor.lambda$executeRecursively$3(HierarchicalTestExecutor.java:121)
	at org.junit.platform.engine.support.hierarchical.SingleTestExecutor.executeSafely(SingleTestExecutor.java:66)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor$NodeExecutor.executeRecursively(HierarchicalTestExecutor.java:108)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor$NodeExecutor.execute(HierarchicalTestExecutor.java:79)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:55)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:43)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:170)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:154)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:90)
	at org.junit.platform.surefire.provider.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:132)
	at org.junit.platform.surefire.provider.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:111)
	at org.apache.maven.surefire.booter.ForkedBooter.invokeProviderInSameClassLoader(ForkedBooter.java:383)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:344)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:125)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:417)
11:32:56.159 [34mINFO [0;39m [36mo.s.test.context.transaction.TransactionContext.endTransaction:139[0;39m - Rolled back transaction for test: [DefaultTestContext@7a92827f testClass = MealAdminRestControllerTest, testInstance = ru.javawebinar.graduation.controller.meal.MealAdminRestControllerTest@43094e0c, testMethod = testUpdateDuplicate@MealAdminRestControllerTest, testException = org.springframework.web.util.NestedServletException: Request processing failed; nested exception is org.springframework.dao.DataIntegrityViolationException: could not execute statement; SQL [n/a]; constraint [null]; nested exception is org.hibernate.exception.ConstraintViolationException: could not execute statement, mergedContextConfiguration = [WebMergedContextConfiguration@35efd12c testClass = MealAdminRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]
11:32:56.163 [34mINFO [0;39m [36morg.springframework.mock.web.MockServletContext.log:438[0;39m - Initializing Spring FrameworkServlet ''
11:32:56.164 [34mINFO [0;39m [36morg.springframework.web.servlet.FrameworkServlet.initServletBean:494[0;39m - FrameworkServlet '': initialization started
11:32:56.166 [34mINFO [0;39m [36morg.springframework.web.servlet.FrameworkServlet.initServletBean:509[0;39m - FrameworkServlet '': initialization completed in 2 ms
11:32:56.170 [34mINFO [0;39m [36mo.s.test.context.transaction.TransactionContext.startTransaction:107[0;39m - Began transaction (1) for test context [DefaultTestContext@7a92827f testClass = MealAdminRestControllerTest, testInstance = ru.javawebinar.graduation.controller.meal.MealAdminRestControllerTest@bd09a26, testMethod = testUpdateInvalid@MealAdminRestControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@35efd12c testClass = MealAdminRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@1e95f584]; rollback [true]
Hibernate: 
    /* select
        generatedAlias0 
    from
        User as generatedAlias0 
    where
        generatedAlias0.email=:param0 */ select
            user0_.id as id1_3_,
            user0_.name as name2_3_,
            user0_.email as email3_3_,
            user0_.enabled as enabled4_3_,
            user0_.password as password5_3_,
            user0_.registered as register6_3_ 
        from
            users user0_ 
        where
            user0_.email=?
Hibernate: 
    /* load collection ru.javawebinar.graduation.model.User.roles */ select
        roles0_.user_id as user_id1_2_0_,
        roles0_.role as role2_2_0_ 
    from
        user_roles roles0_ 
    where
        roles0_.user_id=?
11:32:56.182 [31mWARN [0;39m [36mr.j.graduation.controller.ExceptionInfoHandler.logAndGetErrorInfo:108[0;39m - VALIDATION_ERROR at request  http://localhost/rest/admin/restaurants/100002/meals/100005: org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument at index 0 in method: public void ru.javawebinar.graduation.controller.meal.MealAdminRestController.update(ru.javawebinar.graduation.model.Meal,int,int), with 1 error(s): [Field error in object 'meal' on field 'price': rejected value [null]; codes [NotNull.meal.price,NotNull.price,NotNull.java.math.BigDecimal,NotNull]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [meal.price,price]; arguments []; default message [price]]; default message [must not be null]] 
11:32:56.183 [31mWARN [0;39m [36mo.s.w.s.m.m.a.ExceptionHandlerExceptionResolver.doResolveHandlerMethodException:411[0;39m - Failed to invoke @ExceptionHandler method: public ru.javawebinar.graduation.util.exception.ErrorInfo ru.javawebinar.graduation.controller.ExceptionInfoHandler.methodArgumentValidationError(javax.servlet.http.HttpServletRequest,org.springframework.web.bind.MethodArgumentNotValidException)
org.springframework.context.NoSuchMessageException: No message found under code 'error.validationError' for locale 'ru'.
	at org.springframework.context.support.AbstractMessageSource.getMessage(AbstractMessageSource.java:161)
	at ru.javawebinar.graduation.controller.MessageUtil.getMessage(MessageUtil.java:23)
	at ru.javawebinar.graduation.controller.MessageUtil.getMessage(MessageUtil.java:27)
	at ru.javawebinar.graduation.controller.ExceptionInfoHandler.logAndGetErrorInfo(ExceptionInfoHandler.java:111)
	at ru.javawebinar.graduation.controller.ExceptionInfoHandler.methodArgumentValidationError(ExceptionInfoHandler.java:81)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:209)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:136)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:102)
	at org.springframework.web.servlet.mvc.method.annotation.ExceptionHandlerExceptionResolver.doResolveHandlerMethodException(ExceptionHandlerExceptionResolver.java:404)
	at org.springframework.web.servlet.handler.AbstractHandlerMethodExceptionResolver.doResolveException(AbstractHandlerMethodExceptionResolver.java:61)
	at org.springframework.web.servlet.handler.AbstractHandlerExceptionResolver.resolveException(AbstractHandlerExceptionResolver.java:139)
	at org.springframework.web.servlet.DispatcherServlet.processHandlerException(DispatcherServlet.java:1255)
	at org.springframework.test.web.servlet.TestDispatcherServlet.processHandlerException(TestDispatcherServlet.java:133)
	at org.springframework.web.servlet.DispatcherServlet.processDispatchResult(DispatcherServlet.java:1062)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1008)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:925)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:974)
	at org.springframework.web.servlet.FrameworkServlet.doPut(FrameworkServlet.java:888)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:664)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:851)
	at org.springframework.test.web.servlet.TestDispatcherServlet.service(TestDispatcherServlet.java:71)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:742)
	at org.springframework.mock.web.MockFilterChain$ServletFilterProxy.doFilter(MockFilterChain.java:166)
	at org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:133)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:320)
	at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:127)
	at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:91)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:119)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:111)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:170)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.authentication.www.BasicAuthenticationFilter.doFilterInternal(BasicAuthenticationFilter.java:215)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:66)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:56)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:105)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:215)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:178)
	at org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:133)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:200)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:133)
	at org.springframework.test.web.servlet.MockMvc.perform(MockMvc.java:165)
	at ru.javawebinar.graduation.controller.meal.MealAdminRestControllerTest.testUpdateInvalid(MealAdminRestControllerTest.java:196)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.platform.commons.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:513)
	at org.junit.jupiter.engine.execution.ExecutableInvoker.invoke(ExecutableInvoker.java:115)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeTestMethod$6(TestMethodTestDescriptor.java:170)
	at org.junit.jupiter.engine.execution.ThrowableCollector.execute(ThrowableCollector.java:40)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeTestMethod(TestMethodTestDescriptor.java:166)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:113)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:58)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor$NodeExecutor.lambda$executeRecursively$3(HierarchicalTestExecutor.java:113)
	at org.junit.platform.engine.support.hierarchical.SingleTestExecutor.executeSafely(SingleTestExecutor.java:66)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor$NodeExecutor.executeRecursively(HierarchicalTestExecutor.java:108)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor$NodeExecutor.execute(HierarchicalTestExecutor.java:79)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor$NodeExecutor.lambda$executeRecursively$2(HierarchicalTestExecutor.java:121)
	at java.util.stream.ForEachOps$ForEachOp$OfRef.accept(ForEachOps.java:184)
	at java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:175)
	at java.util.Iterator.forEachRemaining(Iterator.java:116)
	at java.util.Spliterators$IteratorSpliterator.forEachRemaining(Spliterators.java:1801)
	at java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:481)
	at java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:471)
	at java.util.stream.ForEachOps$ForEachOp.evaluateSequential(ForEachOps.java:151)
	at java.util.stream.ForEachOps$ForEachOp$OfRef.evaluateSequential(ForEachOps.java:174)
	at java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)
	at java.util.stream.ReferencePipeline.forEach(ReferencePipeline.java:418)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor$NodeExecutor.lambda$executeRecursively$3(HierarchicalTestExecutor.java:121)
	at org.junit.platform.engine.support.hierarchical.SingleTestExecutor.executeSafely(SingleTestExecutor.java:66)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor$NodeExecutor.executeRecursively(HierarchicalTestExecutor.java:108)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor$NodeExecutor.execute(HierarchicalTestExecutor.java:79)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor$NodeExecutor.lambda$executeRecursively$2(HierarchicalTestExecutor.java:121)
	at java.util.stream.ForEachOps$ForEachOp$OfRef.accept(ForEachOps.java:184)
	at java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:175)
	at java.util.Iterator.forEachRemaining(Iterator.java:116)
	at java.util.Spliterators$IteratorSpliterator.forEachRemaining(Spliterators.java:1801)
	at java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:481)
	at java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:471)
	at java.util.stream.ForEachOps$ForEachOp.evaluateSequential(ForEachOps.java:151)
	at java.util.stream.ForEachOps$ForEachOp$OfRef.evaluateSequential(ForEachOps.java:174)
	at java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)
	at java.util.stream.ReferencePipeline.forEach(ReferencePipeline.java:418)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor$NodeExecutor.lambda$executeRecursively$3(HierarchicalTestExecutor.java:121)
	at org.junit.platform.engine.support.hierarchical.SingleTestExecutor.executeSafely(SingleTestExecutor.java:66)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor$NodeExecutor.executeRecursively(HierarchicalTestExecutor.java:108)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor$NodeExecutor.execute(HierarchicalTestExecutor.java:79)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:55)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:43)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:170)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:154)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:90)
	at org.junit.platform.surefire.provider.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:132)
	at org.junit.platform.surefire.provider.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:111)
	at org.apache.maven.surefire.booter.ForkedBooter.invokeProviderInSameClassLoader(ForkedBooter.java:383)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:344)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:125)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:417)

MockHttpServletRequest:
      HTTP Method = PUT
      Request URI = /rest/admin/restaurants/100002/meals/100005
       Parameters = {}
          Headers = {Content-Type=[application/json;charset=UTF-8], Authorization=[Basic YWRtaW5AZ21haWwuY29tOmFkbWlu]}
             Body = {"id":100005,"name":"Updated meal","created":"2018-10-12"}
    Session Attrs = {}

Handler:
             Type = ru.javawebinar.graduation.controller.meal.MealAdminRestController
           Method = public void ru.javawebinar.graduation.controller.meal.MealAdminRestController.update(ru.javawebinar.graduation.model.Meal,int,int)

Async:
    Async started = false
     Async result = null

Resolved Exception:
             Type = org.springframework.web.bind.MethodArgumentNotValidException

ModelAndView:
        View name = null
             View = null
            Model = null

FlashMap:
       Attributes = null

MockHttpServletResponse:
           Status = 400
    Error message = null
          Headers = {Cache-Control=[no-cache, no-store, max-age=0, must-revalidate], Pragma=[no-cache], Expires=[0], X-XSS-Protection=[1; mode=block], X-Frame-Options=[DENY], X-Content-Type-Options=[nosniff]}
     Content type = null
             Body = 
    Forwarded URL = null
   Redirected URL = null
          Cookies = []
11:32:56.189 [34mINFO [0;39m [36mo.s.test.context.transaction.TransactionContext.endTransaction:139[0;39m - Rolled back transaction for test: [DefaultTestContext@7a92827f testClass = MealAdminRestControllerTest, testInstance = ru.javawebinar.graduation.controller.meal.MealAdminRestControllerTest@bd09a26, testMethod = testUpdateInvalid@MealAdminRestControllerTest, testException = java.lang.AssertionError: Status expected:<422> but was:<400>, mergedContextConfiguration = [WebMergedContextConfiguration@35efd12c testClass = MealAdminRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]
11:32:56.191 [34mINFO [0;39m [36morg.springframework.mock.web.MockServletContext.log:438[0;39m - Initializing Spring FrameworkServlet ''
11:32:56.192 [34mINFO [0;39m [36morg.springframework.web.servlet.FrameworkServlet.initServletBean:494[0;39m - FrameworkServlet '': initialization started
11:32:56.194 [34mINFO [0;39m [36morg.springframework.web.servlet.FrameworkServlet.initServletBean:509[0;39m - FrameworkServlet '': initialization completed in 2 ms
11:32:56.198 [34mINFO [0;39m [36mo.s.test.context.transaction.TransactionContext.startTransaction:107[0;39m - Began transaction (1) for test context [DefaultTestContext@7a92827f testClass = MealAdminRestControllerTest, testInstance = ru.javawebinar.graduation.controller.meal.MealAdminRestControllerTest@219dd935, testMethod = testDeleteNotFound@MealAdminRestControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@35efd12c testClass = MealAdminRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@1e95f584]; rollback [true]
Hibernate: 
    /* select
        generatedAlias0 
    from
        User as generatedAlias0 
    where
        generatedAlias0.email=:param0 */ select
            user0_.id as id1_3_,
            user0_.name as name2_3_,
            user0_.email as email3_3_,
            user0_.enabled as enabled4_3_,
            user0_.password as password5_3_,
            user0_.registered as register6_3_ 
        from
            users user0_ 
        where
            user0_.email=?
Hibernate: 
    /* load collection ru.javawebinar.graduation.model.User.roles */ select
        roles0_.user_id as user_id1_2_0_,
        roles0_.role as role2_2_0_ 
    from
        user_roles roles0_ 
    where
        roles0_.user_id=?
11:32:56.207 [34mINFO [0;39m [36mr.j.g.controller.meal.MealAdminRestController.delete:90[0;39m - delete 100010
Hibernate: 
    /* DELETE 
    FROM
        Meal m 
    WHERE
        m.id=:id 
        AND m.restaurant.id=:restaurantId */ delete 
        from
            meals 
        where
            id=? 
            and restaurant_id=?
11:32:56.212 [31mWARN [0;39m [36mo.s.w.s.m.m.a.ExceptionHandlerExceptionResolver.doResolveHandlerMethodException:411[0;39m - Failed to invoke @ExceptionHandler method: public org.springframework.http.ResponseEntity<ru.javawebinar.graduation.util.exception.ErrorInfo> ru.javawebinar.graduation.controller.ExceptionInfoHandler.applicationError(javax.servlet.http.HttpServletRequest,ru.javawebinar.graduation.util.exception.ApplicationException)
org.springframework.context.NoSuchMessageException: No message found under code 'exception.common.notFound' for locale 'ru'.
	at org.springframework.context.support.AbstractMessageSource.getMessage(AbstractMessageSource.java:161)
	at ru.javawebinar.graduation.controller.MessageUtil.getMessage(MessageUtil.java:23)
	at ru.javawebinar.graduation.controller.MessageUtil.getMessage(MessageUtil.java:27)
	at ru.javawebinar.graduation.controller.MessageUtil.getMessage(MessageUtil.java:31)
	at ru.javawebinar.graduation.controller.ExceptionInfoHandler.applicationError(ExceptionInfoHandler.java:54)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:209)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:136)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:102)
	at org.springframework.web.servlet.mvc.method.annotation.ExceptionHandlerExceptionResolver.doResolveHandlerMethodException(ExceptionHandlerExceptionResolver.java:404)
	at org.springframework.web.servlet.handler.AbstractHandlerMethodExceptionResolver.doResolveException(AbstractHandlerMethodExceptionResolver.java:61)
	at org.springframework.web.servlet.handler.AbstractHandlerExceptionResolver.resolveException(AbstractHandlerExceptionResolver.java:139)
	at org.springframework.web.servlet.DispatcherServlet.processHandlerException(DispatcherServlet.java:1255)
	at org.springframework.test.web.servlet.TestDispatcherServlet.processHandlerException(TestDispatcherServlet.java:133)
	at org.springframework.web.servlet.DispatcherServlet.processDispatchResult(DispatcherServlet.java:1062)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1008)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:925)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:974)
	at org.springframework.web.servlet.FrameworkServlet.doDelete(FrameworkServlet.java:899)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:667)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:851)
	at org.springframework.test.web.servlet.TestDispatcherServlet.service(TestDispatcherServlet.java:71)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:742)
	at org.springframework.mock.web.MockFilterChain$ServletFilterProxy.doFilter(MockFilterChain.java:166)
	at org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:133)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:320)
	at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:127)
	at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:91)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:119)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:111)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:170)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.authentication.www.BasicAuthenticationFilter.doFilterInternal(BasicAuthenticationFilter.java:215)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:66)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:56)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:105)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:215)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:178)
	at org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:133)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:200)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:133)
	at org.springframework.test.web.servlet.MockMvc.perform(MockMvc.java:165)
	at ru.javawebinar.graduation.controller.meal.MealAdminRestControllerTest.testDeleteNotFound(MealAdminRestControllerTest.java:70)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.platform.commons.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:513)
	at org.junit.jupiter.engine.execution.ExecutableInvoker.invoke(ExecutableInvoker.java:115)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeTestMethod$6(TestMethodTestDescriptor.java:170)
	at org.junit.jupiter.engine.execution.ThrowableCollector.execute(ThrowableCollector.java:40)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeTestMethod(TestMethodTestDescriptor.java:166)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:113)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:58)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor$NodeExecutor.lambda$executeRecursively$3(HierarchicalTestExecutor.java:113)
	at org.junit.platform.engine.support.hierarchical.SingleTestExecutor.executeSafely(SingleTestExecutor.java:66)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor$NodeExecutor.executeRecursively(HierarchicalTestExecutor.java:108)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor$NodeExecutor.execute(HierarchicalTestExecutor.java:79)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor$NodeExecutor.lambda$executeRecursively$2(HierarchicalTestExecutor.java:121)
	at java.util.stream.ForEachOps$ForEachOp$OfRef.accept(ForEachOps.java:184)
	at java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:175)
	at java.util.Iterator.forEachRemaining(Iterator.java:116)
	at java.util.Spliterators$IteratorSpliterator.forEachRemaining(Spliterators.java:1801)
	at java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:481)
	at java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:471)
	at java.util.stream.ForEachOps$ForEachOp.evaluateSequential(ForEachOps.java:151)
	at java.util.stream.ForEachOps$ForEachOp$OfRef.evaluateSequential(ForEachOps.java:174)
	at java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)
	at java.util.stream.ReferencePipeline.forEach(ReferencePipeline.java:418)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor$NodeExecutor.lambda$executeRecursively$3(HierarchicalTestExecutor.java:121)
	at org.junit.platform.engine.support.hierarchical.SingleTestExecutor.executeSafely(SingleTestExecutor.java:66)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor$NodeExecutor.executeRecursively(HierarchicalTestExecutor.java:108)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor$NodeExecutor.execute(HierarchicalTestExecutor.java:79)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor$NodeExecutor.lambda$executeRecursively$2(HierarchicalTestExecutor.java:121)
	at java.util.stream.ForEachOps$ForEachOp$OfRef.accept(ForEachOps.java:184)
	at java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:175)
	at java.util.Iterator.forEachRemaining(Iterator.java:116)
	at java.util.Spliterators$IteratorSpliterator.forEachRemaining(Spliterators.java:1801)
	at java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:481)
	at java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:471)
	at java.util.stream.ForEachOps$ForEachOp.evaluateSequential(ForEachOps.java:151)
	at java.util.stream.ForEachOps$ForEachOp$OfRef.evaluateSequential(ForEachOps.java:174)
	at java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)
	at java.util.stream.ReferencePipeline.forEach(ReferencePipeline.java:418)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor$NodeExecutor.lambda$executeRecursively$3(HierarchicalTestExecutor.java:121)
	at org.junit.platform.engine.support.hierarchical.SingleTestExecutor.executeSafely(SingleTestExecutor.java:66)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor$NodeExecutor.executeRecursively(HierarchicalTestExecutor.java:108)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor$NodeExecutor.execute(HierarchicalTestExecutor.java:79)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:55)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:43)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:170)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:154)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:90)
	at org.junit.platform.surefire.provider.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:132)
	at org.junit.platform.surefire.provider.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:111)
	at org.apache.maven.surefire.booter.ForkedBooter.invokeProviderInSameClassLoader(ForkedBooter.java:383)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:344)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:125)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:417)
11:32:56.214 [31mWARN [0;39m [36mo.h.e.j.s.SqlExceptionHelper$StandardWarningHandler.logWarning:230[0;39m - SQL Warning Code: -1100, SQLState: 02000
11:32:56.214 [31mWARN [0;39m [36mo.h.e.j.s.SqlExceptionHelper$StandardWarningHandler.logWarning:231[0;39m - no data
11:32:56.215 [34mINFO [0;39m [36mo.s.test.context.transaction.TransactionContext.endTransaction:139[0;39m - Rolled back transaction for test: [DefaultTestContext@7a92827f testClass = MealAdminRestControllerTest, testInstance = ru.javawebinar.graduation.controller.meal.MealAdminRestControllerTest@219dd935, testMethod = testDeleteNotFound@MealAdminRestControllerTest, testException = org.springframework.web.util.NestedServletException: Request processing failed; nested exception is ru.javawebinar.graduation.util.exception.NotFoundException: type=DATA_NOT_FOUND, msgCode=exception.common.notFound, args=[id=100010], mergedContextConfiguration = [WebMergedContextConfiguration@35efd12c testClass = MealAdminRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]
11:32:56.217 [34mINFO [0;39m [36morg.springframework.mock.web.MockServletContext.log:438[0;39m - Initializing Spring FrameworkServlet ''
11:32:56.217 [34mINFO [0;39m [36morg.springframework.web.servlet.FrameworkServlet.initServletBean:494[0;39m - FrameworkServlet '': initialization started
11:32:56.219 [34mINFO [0;39m [36morg.springframework.web.servlet.FrameworkServlet.initServletBean:509[0;39m - FrameworkServlet '': initialization completed in 2 ms
11:32:56.223 [34mINFO [0;39m [36mo.s.test.context.transaction.TransactionContext.startTransaction:107[0;39m - Began transaction (1) for test context [DefaultTestContext@7a92827f testClass = MealAdminRestControllerTest, testInstance = ru.javawebinar.graduation.controller.meal.MealAdminRestControllerTest@337fb1a5, testMethod = testGet@MealAdminRestControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@35efd12c testClass = MealAdminRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@1e95f584]; rollback [true]
Hibernate: 
    /* select
        generatedAlias0 
    from
        User as generatedAlias0 
    where
        generatedAlias0.email=:param0 */ select
            user0_.id as id1_3_,
            user0_.name as name2_3_,
            user0_.email as email3_3_,
            user0_.enabled as enabled4_3_,
            user0_.password as password5_3_,
            user0_.registered as register6_3_ 
        from
            users user0_ 
        where
            user0_.email=?
Hibernate: 
    /* load collection ru.javawebinar.graduation.model.User.roles */ select
        roles0_.user_id as user_id1_2_0_,
        roles0_.role as role2_2_0_ 
    from
        user_roles roles0_ 
    where
        roles0_.user_id=?
11:32:56.234 [34mINFO [0;39m [36mr.j.g.controller.meal.MealAdminRestController.get:69[0;39m - get 100005
Hibernate: 
    select
        meal0_.id as id1_0_0_,
        meal0_.name as name2_0_0_,
        meal0_.created as created3_0_0_,
        meal0_.price as price4_0_0_,
        meal0_.restaurant_id as restaura5_0_0_ 
    from
        meals meal0_ 
    where
        meal0_.id=?

MockHttpServletRequest:
      HTTP Method = GET
      Request URI = /rest/admin/restaurants/100002/meals/100005
       Parameters = {}
          Headers = {Authorization=[Basic YWRtaW5AZ21haWwuY29tOmFkbWlu]}
             Body = null
    Session Attrs = {}

Handler:
             Type = ru.javawebinar.graduation.controller.meal.MealAdminRestController
           Method = public ru.javawebinar.graduation.model.Meal ru.javawebinar.graduation.controller.meal.MealAdminRestController.get(int,int)

Async:
    Async started = false
     Async result = null

Resolved Exception:
             Type = null

ModelAndView:
        View name = null
             View = null
            Model = null

FlashMap:
       Attributes = null

MockHttpServletResponse:
           Status = 200
    Error message = null
          Headers = {Content-Type=[application/json;charset=UTF-8], Cache-Control=[no-cache, no-store, max-age=0, must-revalidate], Pragma=[no-cache], Expires=[0], X-XSS-Protection=[1; mode=block], X-Frame-Options=[DENY], X-Content-Type-Options=[nosniff]}
     Content type = application/json;charset=UTF-8
             Body = {"id":100005,"name":"Beef steak","created":"2018-10-12","price":3.00}
    Forwarded URL = null
   Redirected URL = null
          Cookies = []
11:32:56.242 [34mINFO [0;39m [36mo.s.test.context.transaction.TransactionContext.endTransaction:139[0;39m - Rolled back transaction for test: [DefaultTestContext@7a92827f testClass = MealAdminRestControllerTest, testInstance = ru.javawebinar.graduation.controller.meal.MealAdminRestControllerTest@337fb1a5, testMethod = testGet@MealAdminRestControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@35efd12c testClass = MealAdminRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]
11:32:56.246 [34mINFO [0;39m [36morg.springframework.mock.web.MockServletContext.log:438[0;39m - Initializing Spring FrameworkServlet ''
11:32:56.246 [34mINFO [0;39m [36morg.springframework.web.servlet.FrameworkServlet.initServletBean:494[0;39m - FrameworkServlet '': initialization started
11:32:56.252 [34mINFO [0;39m [36morg.springframework.web.servlet.FrameworkServlet.initServletBean:509[0;39m - FrameworkServlet '': initialization completed in 5 ms
11:32:56.256 [34mINFO [0;39m [36mo.s.test.context.transaction.TransactionContext.startTransaction:107[0;39m - Began transaction (1) for test context [DefaultTestContext@7a92827f testClass = MealAdminRestControllerTest, testInstance = ru.javawebinar.graduation.controller.meal.MealAdminRestControllerTest@160e45c8, testMethod = testGetNotFound@MealAdminRestControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@35efd12c testClass = MealAdminRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@1e95f584]; rollback [true]
Hibernate: 
    /* select
        generatedAlias0 
    from
        User as generatedAlias0 
    where
        generatedAlias0.email=:param0 */ select
            user0_.id as id1_3_,
            user0_.name as name2_3_,
            user0_.email as email3_3_,
            user0_.enabled as enabled4_3_,
            user0_.password as password5_3_,
            user0_.registered as register6_3_ 
        from
            users user0_ 
        where
            user0_.email=?
Hibernate: 
    /* load collection ru.javawebinar.graduation.model.User.roles */ select
        roles0_.user_id as user_id1_2_0_,
        roles0_.role as role2_2_0_ 
    from
        user_roles roles0_ 
    where
        roles0_.user_id=?
11:32:56.265 [34mINFO [0;39m [36mr.j.g.controller.meal.MealAdminRestController.get:69[0;39m - get 100010
Hibernate: 
    select
        meal0_.id as id1_0_0_,
        meal0_.name as name2_0_0_,
        meal0_.created as created3_0_0_,
        meal0_.price as price4_0_0_,
        meal0_.restaurant_id as restaura5_0_0_ 
    from
        meals meal0_ 
    where
        meal0_.id=?
11:32:56.270 [31mWARN [0;39m [36mo.s.w.s.m.m.a.ExceptionHandlerExceptionResolver.doResolveHandlerMethodException:411[0;39m - Failed to invoke @ExceptionHandler method: public org.springframework.http.ResponseEntity<ru.javawebinar.graduation.util.exception.ErrorInfo> ru.javawebinar.graduation.controller.ExceptionInfoHandler.applicationError(javax.servlet.http.HttpServletRequest,ru.javawebinar.graduation.util.exception.ApplicationException)
org.springframework.context.NoSuchMessageException: No message found under code 'exception.common.notFound' for locale 'ru'.
	at org.springframework.context.support.AbstractMessageSource.getMessage(AbstractMessageSource.java:161)
	at ru.javawebinar.graduation.controller.MessageUtil.getMessage(MessageUtil.java:23)
	at ru.javawebinar.graduation.controller.MessageUtil.getMessage(MessageUtil.java:27)
	at ru.javawebinar.graduation.controller.MessageUtil.getMessage(MessageUtil.java:31)
	at ru.javawebinar.graduation.controller.ExceptionInfoHandler.applicationError(ExceptionInfoHandler.java:54)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:209)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:136)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:102)
	at org.springframework.web.servlet.mvc.method.annotation.ExceptionHandlerExceptionResolver.doResolveHandlerMethodException(ExceptionHandlerExceptionResolver.java:404)
	at org.springframework.web.servlet.handler.AbstractHandlerMethodExceptionResolver.doResolveException(AbstractHandlerMethodExceptionResolver.java:61)
	at org.springframework.web.servlet.handler.AbstractHandlerExceptionResolver.resolveException(AbstractHandlerExceptionResolver.java:139)
	at org.springframework.web.servlet.DispatcherServlet.processHandlerException(DispatcherServlet.java:1255)
	at org.springframework.test.web.servlet.TestDispatcherServlet.processHandlerException(TestDispatcherServlet.java:133)
	at org.springframework.web.servlet.DispatcherServlet.processDispatchResult(DispatcherServlet.java:1062)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1008)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:925)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:974)
	at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:866)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:635)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:851)
	at org.springframework.test.web.servlet.TestDispatcherServlet.service(TestDispatcherServlet.java:71)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:742)
	at org.springframework.mock.web.MockFilterChain$ServletFilterProxy.doFilter(MockFilterChain.java:166)
	at org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:133)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:320)
	at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:127)
	at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:91)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:119)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:111)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:170)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.authentication.www.BasicAuthenticationFilter.doFilterInternal(BasicAuthenticationFilter.java:215)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:66)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:56)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:105)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:215)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:178)
	at org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:133)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:200)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:133)
	at org.springframework.test.web.servlet.MockMvc.perform(MockMvc.java:165)
	at ru.javawebinar.graduation.controller.meal.MealAdminRestControllerTest.testGetNotFound(MealAdminRestControllerTest.java:49)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.platform.commons.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:513)
	at org.junit.jupiter.engine.execution.ExecutableInvoker.invoke(ExecutableInvoker.java:115)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeTestMethod$6(TestMethodTestDescriptor.java:170)
	at org.junit.jupiter.engine.execution.ThrowableCollector.execute(ThrowableCollector.java:40)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeTestMethod(TestMethodTestDescriptor.java:166)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:113)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:58)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor$NodeExecutor.lambda$executeRecursively$3(HierarchicalTestExecutor.java:113)
	at org.junit.platform.engine.support.hierarchical.SingleTestExecutor.executeSafely(SingleTestExecutor.java:66)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor$NodeExecutor.executeRecursively(HierarchicalTestExecutor.java:108)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor$NodeExecutor.execute(HierarchicalTestExecutor.java:79)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor$NodeExecutor.lambda$executeRecursively$2(HierarchicalTestExecutor.java:121)
	at java.util.stream.ForEachOps$ForEachOp$OfRef.accept(ForEachOps.java:184)
	at java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:175)
	at java.util.Iterator.forEachRemaining(Iterator.java:116)
	at java.util.Spliterators$IteratorSpliterator.forEachRemaining(Spliterators.java:1801)
	at java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:481)
	at java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:471)
	at java.util.stream.ForEachOps$ForEachOp.evaluateSequential(ForEachOps.java:151)
	at java.util.stream.ForEachOps$ForEachOp$OfRef.evaluateSequential(ForEachOps.java:174)
	at java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)
	at java.util.stream.ReferencePipeline.forEach(ReferencePipeline.java:418)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor$NodeExecutor.lambda$executeRecursively$3(HierarchicalTestExecutor.java:121)
	at org.junit.platform.engine.support.hierarchical.SingleTestExecutor.executeSafely(SingleTestExecutor.java:66)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor$NodeExecutor.executeRecursively(HierarchicalTestExecutor.java:108)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor$NodeExecutor.execute(HierarchicalTestExecutor.java:79)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor$NodeExecutor.lambda$executeRecursively$2(HierarchicalTestExecutor.java:121)
	at java.util.stream.ForEachOps$ForEachOp$OfRef.accept(ForEachOps.java:184)
	at java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:175)
	at java.util.Iterator.forEachRemaining(Iterator.java:116)
	at java.util.Spliterators$IteratorSpliterator.forEachRemaining(Spliterators.java:1801)
	at java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:481)
	at java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:471)
	at java.util.stream.ForEachOps$ForEachOp.evaluateSequential(ForEachOps.java:151)
	at java.util.stream.ForEachOps$ForEachOp$OfRef.evaluateSequential(ForEachOps.java:174)
	at java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)
	at java.util.stream.ReferencePipeline.forEach(ReferencePipeline.java:418)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor$NodeExecutor.lambda$executeRecursively$3(HierarchicalTestExecutor.java:121)
	at org.junit.platform.engine.support.hierarchical.SingleTestExecutor.executeSafely(SingleTestExecutor.java:66)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor$NodeExecutor.executeRecursively(HierarchicalTestExecutor.java:108)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor$NodeExecutor.execute(HierarchicalTestExecutor.java:79)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:55)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:43)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:170)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:154)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:90)
	at org.junit.platform.surefire.provider.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:132)
	at org.junit.platform.surefire.provider.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:111)
	at org.apache.maven.surefire.booter.ForkedBooter.invokeProviderInSameClassLoader(ForkedBooter.java:383)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:344)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:125)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:417)
11:32:56.272 [34mINFO [0;39m [36mo.s.test.context.transaction.TransactionContext.endTransaction:139[0;39m - Rolled back transaction for test: [DefaultTestContext@7a92827f testClass = MealAdminRestControllerTest, testInstance = ru.javawebinar.graduation.controller.meal.MealAdminRestControllerTest@160e45c8, testMethod = testGetNotFound@MealAdminRestControllerTest, testException = org.springframework.web.util.NestedServletException: Request processing failed; nested exception is ru.javawebinar.graduation.util.exception.NotFoundException: type=DATA_NOT_FOUND, msgCode=exception.common.notFound, args=[id=100010], mergedContextConfiguration = [WebMergedContextConfiguration@35efd12c testClass = MealAdminRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]
11:32:56.276 [34mINFO [0;39m [36morg.springframework.mock.web.MockServletContext.log:438[0;39m - Initializing Spring FrameworkServlet ''
11:32:56.277 [34mINFO [0;39m [36morg.springframework.web.servlet.FrameworkServlet.initServletBean:494[0;39m - FrameworkServlet '': initialization started
11:32:56.282 [34mINFO [0;39m [36morg.springframework.web.servlet.FrameworkServlet.initServletBean:509[0;39m - FrameworkServlet '': initialization completed in 5 ms
11:32:56.298 [34mINFO [0;39m [36mo.s.test.context.transaction.TransactionContext.startTransaction:107[0;39m - Began transaction (1) for test context [DefaultTestContext@7a92827f testClass = MealAdminRestControllerTest, testInstance = ru.javawebinar.graduation.controller.meal.MealAdminRestControllerTest@430f0c63, testMethod = testGetAllByToday@MealAdminRestControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@35efd12c testClass = MealAdminRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@1e95f584]; rollback [true]
Hibernate: 
    /* select
        generatedAlias0 
    from
        User as generatedAlias0 
    where
        generatedAlias0.email=:param0 */ select
            user0_.id as id1_3_,
            user0_.name as name2_3_,
            user0_.email as email3_3_,
            user0_.enabled as enabled4_3_,
            user0_.password as password5_3_,
            user0_.registered as register6_3_ 
        from
            users user0_ 
        where
            user0_.email=?
Hibernate: 
    /* load collection ru.javawebinar.graduation.model.User.roles */ select
        roles0_.user_id as user_id1_2_0_,
        roles0_.role as role2_2_0_ 
    from
        user_roles roles0_ 
    where
        roles0_.user_id=?
11:32:56.309 [34mINFO [0;39m [36mr.j.g.controller.meal.MealAdminRestController.getAllByToday:48[0;39m - getAllByToday
Hibernate: 
    /* SELECT
        m 
    FROM
        Meal m 
    WHERE
        m.restaurant.id=:restaurantId 
        AND m.created=:date 
    ORDER BY
        m.created DESC */ select
            meal0_.id as id1_0_,
            meal0_.name as name2_0_,
            meal0_.created as created3_0_,
            meal0_.price as price4_0_,
            meal0_.restaurant_id as restaura5_0_ 
        from
            meals meal0_ 
        where
            meal0_.restaurant_id=? 
            and meal0_.created=? 
        order by
            meal0_.created DESC

MockHttpServletRequest:
      HTTP Method = GET
      Request URI = /rest/admin/restaurants/100002/meals/today
       Parameters = {}
          Headers = {Authorization=[Basic YWRtaW5AZ21haWwuY29tOmFkbWlu]}
             Body = null
    Session Attrs = {}

Handler:
             Type = ru.javawebinar.graduation.controller.meal.MealAdminRestController
           Method = public java.util.List<ru.javawebinar.graduation.model.Meal> ru.javawebinar.graduation.controller.meal.MealAdminRestController.getAllByToday(int)

Async:
    Async started = false
     Async result = null

Resolved Exception:
             Type = null

ModelAndView:
        View name = null
             View = null
            Model = null

FlashMap:
       Attributes = null

MockHttpServletResponse:
           Status = 200
    Error message = null
          Headers = {Content-Type=[application/json;charset=UTF-8], Cache-Control=[no-cache, no-store, max-age=0, must-revalidate], Pragma=[no-cache], Expires=[0], X-XSS-Protection=[1; mode=block], X-Frame-Options=[DENY], X-Content-Type-Options=[nosniff]}
     Content type = application/json;charset=UTF-8
             Body = [{"id":100005,"name":"Beef steak","created":"2018-10-12","price":3.00},{"id":100006,"name":"Borsch","created":"2018-10-12","price":2.00},{"id":100007,"name":"Pancake","created":"2018-10-12","price":1.00}]
    Forwarded URL = null
   Redirected URL = null
          Cookies = []
11:32:56.325 [34mINFO [0;39m [36mo.s.test.context.transaction.TransactionContext.endTransaction:139[0;39m - Rolled back transaction for test: [DefaultTestContext@7a92827f testClass = MealAdminRestControllerTest, testInstance = ru.javawebinar.graduation.controller.meal.MealAdminRestControllerTest@430f0c63, testMethod = testGetAllByToday@MealAdminRestControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@35efd12c testClass = MealAdminRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]
11:32:56.327 [34mINFO [0;39m [36morg.springframework.mock.web.MockServletContext.log:438[0;39m - Initializing Spring FrameworkServlet ''
11:32:56.328 [34mINFO [0;39m [36morg.springframework.web.servlet.FrameworkServlet.initServletBean:494[0;39m - FrameworkServlet '': initialization started
11:32:56.334 [34mINFO [0;39m [36morg.springframework.web.servlet.FrameworkServlet.initServletBean:509[0;39m - FrameworkServlet '': initialization completed in 6 ms
11:32:56.338 [34mINFO [0;39m [36mo.s.test.context.transaction.TransactionContext.startTransaction:107[0;39m - Began transaction (1) for test context [DefaultTestContext@7a92827f testClass = MealAdminRestControllerTest, testInstance = ru.javawebinar.graduation.controller.meal.MealAdminRestControllerTest@48697181, testMethod = testCreateDuplicate@MealAdminRestControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@35efd12c testClass = MealAdminRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@1e95f584]; rollback [true]
Hibernate: 
    /* select
        generatedAlias0 
    from
        User as generatedAlias0 
    where
        generatedAlias0.email=:param0 */ select
            user0_.id as id1_3_,
            user0_.name as name2_3_,
            user0_.email as email3_3_,
            user0_.enabled as enabled4_3_,
            user0_.password as password5_3_,
            user0_.registered as register6_3_ 
        from
            users user0_ 
        where
            user0_.email=?
Hibernate: 
    /* load collection ru.javawebinar.graduation.model.User.roles */ select
        roles0_.user_id as user_id1_2_0_,
        roles0_.role as role2_2_0_ 
    from
        user_roles roles0_ 
    where
        roles0_.user_id=?
11:32:56.365 [34mINFO [0;39m [36mr.j.g.controller.meal.MealAdminRestController.add:75[0;39m - create Meal{created=2018-10-12, name='Borsch', price=2.00, id=null}
Hibernate: 
    call next value for global_seq
Hibernate: 
    /* insert ru.javawebinar.graduation.model.Meal
        */ insert 
        into
            meals
            (name, created, price, restaurant_id, id) 
        values
            (?, ?, ?, ?, ?)
11:32:56.369 [31mWARN [0;39m [36morg.hibernate.engine.jdbc.spi.SqlExceptionHelper.logExceptions:137[0;39m - SQL Error: -104, SQLState: 23505
11:32:56.379 [1;31mERROR[0;39m [36morg.hibernate.engine.jdbc.spi.SqlExceptionHelper.logExceptions:142[0;39m - integrity constraint violation: unique constraint or index violation: MEALS_UNIQUE_NAME_CREATED_RESTAURANT_IDX
11:32:56.380 [1;31mERROR[0;39m [36morg.hibernate.internal.ExceptionMapperStandardImpl.mapManagedFlushFailure:39[0;39m - HHH000346: Error during managed flush [org.hibernate.exception.ConstraintViolationException: could not execute statement]
11:32:56.382 [31mWARN [0;39m [36mo.s.w.s.m.m.a.ExceptionHandlerExceptionResolver.doResolveHandlerMethodException:411[0;39m - Failed to invoke @ExceptionHandler method: public ru.javawebinar.graduation.util.exception.ErrorInfo ru.javawebinar.graduation.controller.ExceptionInfoHandler.conflict(javax.servlet.http.HttpServletRequest,org.springframework.dao.DataIntegrityViolationException)
org.springframework.context.NoSuchMessageException: No message found under code 'exception.meal.duplicateNameToday' for locale 'ru'.
	at org.springframework.context.support.AbstractMessageSource.getMessage(AbstractMessageSource.java:161)
	at ru.javawebinar.graduation.controller.MessageUtil.getMessage(MessageUtil.java:23)
	at ru.javawebinar.graduation.controller.MessageUtil.getMessage(MessageUtil.java:27)
	at ru.javawebinar.graduation.controller.ExceptionInfoHandler.conflict(ExceptionInfoHandler.java:68)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:209)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:136)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:102)
	at org.springframework.web.servlet.mvc.method.annotation.ExceptionHandlerExceptionResolver.doResolveHandlerMethodException(ExceptionHandlerExceptionResolver.java:400)
	at org.springframework.web.servlet.handler.AbstractHandlerMethodExceptionResolver.doResolveException(AbstractHandlerMethodExceptionResolver.java:61)
	at org.springframework.web.servlet.handler.AbstractHandlerExceptionResolver.resolveException(AbstractHandlerExceptionResolver.java:139)
	at org.springframework.web.servlet.DispatcherServlet.processHandlerException(DispatcherServlet.java:1255)
	at org.springframework.test.web.servlet.TestDispatcherServlet.processHandlerException(TestDispatcherServlet.java:133)
	at org.springframework.web.servlet.DispatcherServlet.processDispatchResult(DispatcherServlet.java:1062)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1008)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:925)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:974)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:877)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:661)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:851)
	at org.springframework.test.web.servlet.TestDispatcherServlet.service(TestDispatcherServlet.java:71)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:742)
	at org.springframework.mock.web.MockFilterChain$ServletFilterProxy.doFilter(MockFilterChain.java:166)
	at org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:133)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:320)
	at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:127)
	at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:91)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:119)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:111)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:170)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.authentication.www.BasicAuthenticationFilter.doFilterInternal(BasicAuthenticationFilter.java:215)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:66)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:56)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:105)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:215)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:178)
	at org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:133)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:200)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:133)
	at org.springframework.test.web.servlet.MockMvc.perform(MockMvc.java:165)
	at ru.javawebinar.graduation.controller.meal.MealAdminRestControllerTest.testCreateDuplicate(MealAdminRestControllerTest.java:225)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.platform.commons.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:513)
	at org.junit.jupiter.engine.execution.ExecutableInvoker.invoke(ExecutableInvoker.java:115)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeTestMethod$6(TestMethodTestDescriptor.java:170)
	at org.junit.jupiter.engine.execution.ThrowableCollector.execute(ThrowableCollector.java:40)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeTestMethod(TestMethodTestDescriptor.java:166)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:113)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:58)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor$NodeExecutor.lambda$executeRecursively$3(HierarchicalTestExecutor.java:113)
	at org.junit.platform.engine.support.hierarchical.SingleTestExecutor.executeSafely(SingleTestExecutor.java:66)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor$NodeExecutor.executeRecursively(HierarchicalTestExecutor.java:108)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor$NodeExecutor.execute(HierarchicalTestExecutor.java:79)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor$NodeExecutor.lambda$executeRecursively$2(HierarchicalTestExecutor.java:121)
	at java.util.stream.ForEachOps$ForEachOp$OfRef.accept(ForEachOps.java:184)
	at java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:175)
	at java.util.Iterator.forEachRemaining(Iterator.java:116)
	at java.util.Spliterators$IteratorSpliterator.forEachRemaining(Spliterators.java:1801)
	at java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:481)
	at java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:471)
	at java.util.stream.ForEachOps$ForEachOp.evaluateSequential(ForEachOps.java:151)
	at java.util.stream.ForEachOps$ForEachOp$OfRef.evaluateSequential(ForEachOps.java:174)
	at java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)
	at java.util.stream.ReferencePipeline.forEach(ReferencePipeline.java:418)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor$NodeExecutor.lambda$executeRecursively$3(HierarchicalTestExecutor.java:121)
	at org.junit.platform.engine.support.hierarchical.SingleTestExecutor.executeSafely(SingleTestExecutor.java:66)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor$NodeExecutor.executeRecursively(HierarchicalTestExecutor.java:108)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor$NodeExecutor.execute(HierarchicalTestExecutor.java:79)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor$NodeExecutor.lambda$executeRecursively$2(HierarchicalTestExecutor.java:121)
	at java.util.stream.ForEachOps$ForEachOp$OfRef.accept(ForEachOps.java:184)
	at java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:175)
	at java.util.Iterator.forEachRemaining(Iterator.java:116)
	at java.util.Spliterators$IteratorSpliterator.forEachRemaining(Spliterators.java:1801)
	at java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:481)
	at java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:471)
	at java.util.stream.ForEachOps$ForEachOp.evaluateSequential(ForEachOps.java:151)
	at java.util.stream.ForEachOps$ForEachOp$OfRef.evaluateSequential(ForEachOps.java:174)
	at java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)
	at java.util.stream.ReferencePipeline.forEach(ReferencePipeline.java:418)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor$NodeExecutor.lambda$executeRecursively$3(HierarchicalTestExecutor.java:121)
	at org.junit.platform.engine.support.hierarchical.SingleTestExecutor.executeSafely(SingleTestExecutor.java:66)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor$NodeExecutor.executeRecursively(HierarchicalTestExecutor.java:108)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor$NodeExecutor.execute(HierarchicalTestExecutor.java:79)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:55)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:43)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:170)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:154)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:90)
	at org.junit.platform.surefire.provider.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:132)
	at org.junit.platform.surefire.provider.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:111)
	at org.apache.maven.surefire.booter.ForkedBooter.invokeProviderInSameClassLoader(ForkedBooter.java:383)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:344)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:125)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:417)
11:32:56.384 [34mINFO [0;39m [36mo.s.test.context.transaction.TransactionContext.endTransaction:139[0;39m - Rolled back transaction for test: [DefaultTestContext@7a92827f testClass = MealAdminRestControllerTest, testInstance = ru.javawebinar.graduation.controller.meal.MealAdminRestControllerTest@48697181, testMethod = testCreateDuplicate@MealAdminRestControllerTest, testException = org.springframework.web.util.NestedServletException: Request processing failed; nested exception is org.springframework.dao.DataIntegrityViolationException: could not execute statement; SQL [n/a]; constraint [null]; nested exception is org.hibernate.exception.ConstraintViolationException: could not execute statement, mergedContextConfiguration = [WebMergedContextConfiguration@35efd12c testClass = MealAdminRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]
11:32:56.396 [34mINFO [0;39m [36morg.springframework.mock.web.MockServletContext.log:438[0;39m - Initializing Spring FrameworkServlet ''
11:32:56.397 [34mINFO [0;39m [36morg.springframework.web.servlet.FrameworkServlet.initServletBean:494[0;39m - FrameworkServlet '': initialization started
11:32:56.399 [34mINFO [0;39m [36morg.springframework.web.servlet.FrameworkServlet.initServletBean:509[0;39m - FrameworkServlet '': initialization completed in 2 ms
11:32:56.410 [34mINFO [0;39m [36mo.s.test.context.transaction.TransactionContext.startTransaction:107[0;39m - Began transaction (1) for test context [DefaultTestContext@7a92827f testClass = MealAdminRestControllerTest, testInstance = ru.javawebinar.graduation.controller.meal.MealAdminRestControllerTest@5e41e6ad, testMethod = testUpdateHtmlUnsafe@MealAdminRestControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@35efd12c testClass = MealAdminRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@1e95f584]; rollback [true]
Hibernate: 
    /* select
        generatedAlias0 
    from
        User as generatedAlias0 
    where
        generatedAlias0.email=:param0 */ select
            user0_.id as id1_3_,
            user0_.name as name2_3_,
            user0_.email as email3_3_,
            user0_.enabled as enabled4_3_,
            user0_.password as password5_3_,
            user0_.registered as register6_3_ 
        from
            users user0_ 
        where
            user0_.email=?
Hibernate: 
    /* load collection ru.javawebinar.graduation.model.User.roles */ select
        roles0_.user_id as user_id1_2_0_,
        roles0_.role as role2_2_0_ 
    from
        user_roles roles0_ 
    where
        roles0_.user_id=?
11:32:56.436 [31mWARN [0;39m [36mr.j.graduation.controller.ExceptionInfoHandler.logAndGetErrorInfo:108[0;39m - VALIDATION_ERROR at request  http://localhost/rest/admin/restaurants/100002/meals/100005: org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument at index 0 in method: public void ru.javawebinar.graduation.controller.meal.MealAdminRestController.update(ru.javawebinar.graduation.model.Meal,int,int), with 1 error(s): [Field error in object 'meal' on field 'name': rejected value [<script>alert(123)</script>]; codes [SafeHtml.meal.name,SafeHtml.name,SafeHtml.java.lang.String,SafeHtml]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [meal.name,name]; arguments []; default message [name],[Ljava.lang.String;@dcdb883,[Lorg.hibernate.validator.constraints.SafeHtml$Tag;@39420d59,org.springframework.validation.beanvalidation.SpringValidatorAdapter$ResolvableAttribute@c02a1be,RELAXED]; default message [may have unsafe html content]] 
11:32:56.437 [31mWARN [0;39m [36mo.s.w.s.m.m.a.ExceptionHandlerExceptionResolver.doResolveHandlerMethodException:411[0;39m - Failed to invoke @ExceptionHandler method: public ru.javawebinar.graduation.util.exception.ErrorInfo ru.javawebinar.graduation.controller.ExceptionInfoHandler.methodArgumentValidationError(javax.servlet.http.HttpServletRequest,org.springframework.web.bind.MethodArgumentNotValidException)
org.springframework.context.NoSuchMessageException: No message found under code 'error.validationError' for locale 'ru'.
	at org.springframework.context.support.AbstractMessageSource.getMessage(AbstractMessageSource.java:161)
	at ru.javawebinar.graduation.controller.MessageUtil.getMessage(MessageUtil.java:23)
	at ru.javawebinar.graduation.controller.MessageUtil.getMessage(MessageUtil.java:27)
	at ru.javawebinar.graduation.controller.ExceptionInfoHandler.logAndGetErrorInfo(ExceptionInfoHandler.java:111)
	at ru.javawebinar.graduation.controller.ExceptionInfoHandler.methodArgumentValidationError(ExceptionInfoHandler.java:81)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:209)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:136)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:102)
	at org.springframework.web.servlet.mvc.method.annotation.ExceptionHandlerExceptionResolver.doResolveHandlerMethodException(ExceptionHandlerExceptionResolver.java:404)
	at org.springframework.web.servlet.handler.AbstractHandlerMethodExceptionResolver.doResolveException(AbstractHandlerMethodExceptionResolver.java:61)
	at org.springframework.web.servlet.handler.AbstractHandlerExceptionResolver.resolveException(AbstractHandlerExceptionResolver.java:139)
	at org.springframework.web.servlet.DispatcherServlet.processHandlerException(DispatcherServlet.java:1255)
	at org.springframework.test.web.servlet.TestDispatcherServlet.processHandlerException(TestDispatcherServlet.java:133)
	at org.springframework.web.servlet.DispatcherServlet.processDispatchResult(DispatcherServlet.java:1062)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1008)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:925)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:974)
	at org.springframework.web.servlet.FrameworkServlet.doPut(FrameworkServlet.java:888)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:664)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:851)
	at org.springframework.test.web.servlet.TestDispatcherServlet.service(TestDispatcherServlet.java:71)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:742)
	at org.springframework.mock.web.MockFilterChain$ServletFilterProxy.doFilter(MockFilterChain.java:166)
	at org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:133)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:320)
	at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:127)
	at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:91)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:119)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:111)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:170)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.authentication.www.BasicAuthenticationFilter.doFilterInternal(BasicAuthenticationFilter.java:215)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:66)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:56)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:105)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:215)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:178)
	at org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:133)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:200)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:133)
	at org.springframework.test.web.servlet.MockMvc.perform(MockMvc.java:165)
	at ru.javawebinar.graduation.controller.meal.MealAdminRestControllerTest.testUpdateHtmlUnsafe(MealAdminRestControllerTest.java:168)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.platform.commons.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:513)
	at org.junit.jupiter.engine.execution.ExecutableInvoker.invoke(ExecutableInvoker.java:115)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeTestMethod$6(TestMethodTestDescriptor.java:170)
	at org.junit.jupiter.engine.execution.ThrowableCollector.execute(ThrowableCollector.java:40)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeTestMethod(TestMethodTestDescriptor.java:166)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:113)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:58)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor$NodeExecutor.lambda$executeRecursively$3(HierarchicalTestExecutor.java:113)
	at org.junit.platform.engine.support.hierarchical.SingleTestExecutor.executeSafely(SingleTestExecutor.java:66)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor$NodeExecutor.executeRecursively(HierarchicalTestExecutor.java:108)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor$NodeExecutor.execute(HierarchicalTestExecutor.java:79)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor$NodeExecutor.lambda$executeRecursively$2(HierarchicalTestExecutor.java:121)
	at java.util.stream.ForEachOps$ForEachOp$OfRef.accept(ForEachOps.java:184)
	at java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:175)
	at java.util.Iterator.forEachRemaining(Iterator.java:116)
	at java.util.Spliterators$IteratorSpliterator.forEachRemaining(Spliterators.java:1801)
	at java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:481)
	at java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:471)
	at java.util.stream.ForEachOps$ForEachOp.evaluateSequential(ForEachOps.java:151)
	at java.util.stream.ForEachOps$ForEachOp$OfRef.evaluateSequential(ForEachOps.java:174)
	at java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)
	at java.util.stream.ReferencePipeline.forEach(ReferencePipeline.java:418)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor$NodeExecutor.lambda$executeRecursively$3(HierarchicalTestExecutor.java:121)
	at org.junit.platform.engine.support.hierarchical.SingleTestExecutor.executeSafely(SingleTestExecutor.java:66)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor$NodeExecutor.executeRecursively(HierarchicalTestExecutor.java:108)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor$NodeExecutor.execute(HierarchicalTestExecutor.java:79)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor$NodeExecutor.lambda$executeRecursively$2(HierarchicalTestExecutor.java:121)
	at java.util.stream.ForEachOps$ForEachOp$OfRef.accept(ForEachOps.java:184)
	at java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:175)
	at java.util.Iterator.forEachRemaining(Iterator.java:116)
	at java.util.Spliterators$IteratorSpliterator.forEachRemaining(Spliterators.java:1801)
	at java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:481)
	at java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:471)
	at java.util.stream.ForEachOps$ForEachOp.evaluateSequential(ForEachOps.java:151)
	at java.util.stream.ForEachOps$ForEachOp$OfRef.evaluateSequential(ForEachOps.java:174)
	at java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)
	at java.util.stream.ReferencePipeline.forEach(ReferencePipeline.java:418)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor$NodeExecutor.lambda$executeRecursively$3(HierarchicalTestExecutor.java:121)
	at org.junit.platform.engine.support.hierarchical.SingleTestExecutor.executeSafely(SingleTestExecutor.java:66)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor$NodeExecutor.executeRecursively(HierarchicalTestExecutor.java:108)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor$NodeExecutor.execute(HierarchicalTestExecutor.java:79)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:55)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:43)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:170)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:154)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:90)
	at org.junit.platform.surefire.provider.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:132)
	at org.junit.platform.surefire.provider.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:111)
	at org.apache.maven.surefire.booter.ForkedBooter.invokeProviderInSameClassLoader(ForkedBooter.java:383)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:344)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:125)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:417)

MockHttpServletRequest:
      HTTP Method = PUT
      Request URI = /rest/admin/restaurants/100002/meals/100005
       Parameters = {}
          Headers = {Content-Type=[application/json;charset=UTF-8], Authorization=[Basic YWRtaW5AZ21haWwuY29tOmFkbWlu]}
             Body = {"id":100005,"name":"<script>alert(123)</script>","created":"2018-10-12","price":6.00}
    Session Attrs = {}

Handler:
             Type = ru.javawebinar.graduation.controller.meal.MealAdminRestController
           Method = public void ru.javawebinar.graduation.controller.meal.MealAdminRestController.update(ru.javawebinar.graduation.model.Meal,int,int)

Async:
    Async started = false
     Async result = null

Resolved Exception:
             Type = org.springframework.web.bind.MethodArgumentNotValidException

ModelAndView:
        View name = null
             View = null
            Model = null

FlashMap:
       Attributes = null

MockHttpServletResponse:
           Status = 400
    Error message = null
          Headers = {Cache-Control=[no-cache, no-store, max-age=0, must-revalidate], Pragma=[no-cache], Expires=[0], X-XSS-Protection=[1; mode=block], X-Frame-Options=[DENY], X-Content-Type-Options=[nosniff]}
     Content type = null
             Body = 
    Forwarded URL = null
   Redirected URL = null
          Cookies = []
11:32:56.448 [34mINFO [0;39m [36mo.s.test.context.transaction.TransactionContext.endTransaction:139[0;39m - Rolled back transaction for test: [DefaultTestContext@7a92827f testClass = MealAdminRestControllerTest, testInstance = ru.javawebinar.graduation.controller.meal.MealAdminRestControllerTest@5e41e6ad, testMethod = testUpdateHtmlUnsafe@MealAdminRestControllerTest, testException = java.lang.AssertionError: Status expected:<422> but was:<400>, mergedContextConfiguration = [WebMergedContextConfiguration@35efd12c testClass = MealAdminRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]
11:32:56.450 [34mINFO [0;39m [36morg.springframework.mock.web.MockServletContext.log:438[0;39m - Initializing Spring FrameworkServlet ''
11:32:56.450 [34mINFO [0;39m [36morg.springframework.web.servlet.FrameworkServlet.initServletBean:494[0;39m - FrameworkServlet '': initialization started
11:32:56.453 [34mINFO [0;39m [36morg.springframework.web.servlet.FrameworkServlet.initServletBean:509[0;39m - FrameworkServlet '': initialization completed in 2 ms
11:32:56.456 [34mINFO [0;39m [36mo.s.test.context.transaction.TransactionContext.startTransaction:107[0;39m - Began transaction (1) for test context [DefaultTestContext@7a92827f testClass = MealAdminRestControllerTest, testInstance = ru.javawebinar.graduation.controller.meal.MealAdminRestControllerTest@62732be7, testMethod = testGetAllByDate@MealAdminRestControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@35efd12c testClass = MealAdminRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@1e95f584]; rollback [true]
Hibernate: 
    /* select
        generatedAlias0 
    from
        User as generatedAlias0 
    where
        generatedAlias0.email=:param0 */ select
            user0_.id as id1_3_,
            user0_.name as name2_3_,
            user0_.email as email3_3_,
            user0_.enabled as enabled4_3_,
            user0_.password as password5_3_,
            user0_.registered as register6_3_ 
        from
            users user0_ 
        where
            user0_.email=?
Hibernate: 
    /* load collection ru.javawebinar.graduation.model.User.roles */ select
        roles0_.user_id as user_id1_2_0_,
        roles0_.role as role2_2_0_ 
    from
        user_roles roles0_ 
    where
        roles0_.user_id=?
11:32:56.474 [34mINFO [0;39m [36mr.j.g.controller.meal.MealAdminRestController.getAllByDate:54[0;39m - getAllByDate
Hibernate: 
    /* SELECT
        m 
    FROM
        Meal m 
    WHERE
        m.restaurant.id=:restaurantId 
        AND m.created=:date 
    ORDER BY
        m.created DESC */ select
            meal0_.id as id1_0_,
            meal0_.name as name2_0_,
            meal0_.created as created3_0_,
            meal0_.price as price4_0_,
            meal0_.restaurant_id as restaura5_0_ 
        from
            meals meal0_ 
        where
            meal0_.restaurant_id=? 
            and meal0_.created=? 
        order by
            meal0_.created DESC

MockHttpServletRequest:
      HTTP Method = GET
      Request URI = /rest/admin/restaurants/100002/meals/byDate
       Parameters = {date=[2018-10-12]}
          Headers = {Authorization=[Basic YWRtaW5AZ21haWwuY29tOmFkbWlu]}
             Body = null
    Session Attrs = {}

Handler:
             Type = ru.javawebinar.graduation.controller.meal.MealAdminRestController
           Method = public java.util.List<ru.javawebinar.graduation.model.Meal> ru.javawebinar.graduation.controller.meal.MealAdminRestController.getAllByDate(int,java.time.LocalDate)

Async:
    Async started = false
     Async result = null

Resolved Exception:
             Type = null

ModelAndView:
        View name = null
             View = null
            Model = null

FlashMap:
       Attributes = null

MockHttpServletResponse:
           Status = 200
    Error message = null
          Headers = {Content-Type=[application/json;charset=UTF-8], Cache-Control=[no-cache, no-store, max-age=0, must-revalidate], Pragma=[no-cache], Expires=[0], X-XSS-Protection=[1; mode=block], X-Frame-Options=[DENY], X-Content-Type-Options=[nosniff]}
     Content type = application/json;charset=UTF-8
             Body = [{"id":100005,"name":"Beef steak","created":"2018-10-12","price":3.00},{"id":100006,"name":"Borsch","created":"2018-10-12","price":2.00},{"id":100007,"name":"Pancake","created":"2018-10-12","price":1.00}]
    Forwarded URL = null
   Redirected URL = null
          Cookies = []
11:32:56.492 [34mINFO [0;39m [36mo.s.test.context.transaction.TransactionContext.endTransaction:139[0;39m - Rolled back transaction for test: [DefaultTestContext@7a92827f testClass = MealAdminRestControllerTest, testInstance = ru.javawebinar.graduation.controller.meal.MealAdminRestControllerTest@62732be7, testMethod = testGetAllByDate@MealAdminRestControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@35efd12c testClass = MealAdminRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]
11:32:56.494 [34mINFO [0;39m [36morg.springframework.mock.web.MockServletContext.log:438[0;39m - Initializing Spring FrameworkServlet ''
11:32:56.495 [34mINFO [0;39m [36morg.springframework.web.servlet.FrameworkServlet.initServletBean:494[0;39m - FrameworkServlet '': initialization started
11:32:56.498 [34mINFO [0;39m [36morg.springframework.web.servlet.FrameworkServlet.initServletBean:509[0;39m - FrameworkServlet '': initialization completed in 3 ms
11:32:56.502 [34mINFO [0;39m [36mo.s.test.context.transaction.TransactionContext.startTransaction:107[0;39m - Began transaction (1) for test context [DefaultTestContext@7a92827f testClass = MealAdminRestControllerTest, testInstance = ru.javawebinar.graduation.controller.meal.MealAdminRestControllerTest@1e749235, testMethod = testGetAllFilter@MealAdminRestControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@35efd12c testClass = MealAdminRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@1e95f584]; rollback [true]
Hibernate: 
    /* select
        generatedAlias0 
    from
        User as generatedAlias0 
    where
        generatedAlias0.email=:param0 */ select
            user0_.id as id1_3_,
            user0_.name as name2_3_,
            user0_.email as email3_3_,
            user0_.enabled as enabled4_3_,
            user0_.password as password5_3_,
            user0_.registered as register6_3_ 
        from
            users user0_ 
        where
            user0_.email=?
Hibernate: 
    /* load collection ru.javawebinar.graduation.model.User.roles */ select
        roles0_.user_id as user_id1_2_0_,
        roles0_.role as role2_2_0_ 
    from
        user_roles roles0_ 
    where
        roles0_.user_id=?
11:32:56.516 [34mINFO [0;39m [36mr.j.g.controller.meal.MealAdminRestController.getAllBetween:62[0;39m - getAllBetween
Hibernate: 
    /* SELECT
        m 
    FROM
        Meal m 
    WHERE
        m.restaurant.id=:restaurantId 
        AND m.created BETWEEN :startDate AND :endDate  
    ORDER BY
        m.created DESC */ select
            meal0_.id as id1_0_,
            meal0_.name as name2_0_,
            meal0_.created as created3_0_,
            meal0_.price as price4_0_,
            meal0_.restaurant_id as restaura5_0_ 
        from
            meals meal0_ 
        where
            meal0_.restaurant_id=? 
            and (
                meal0_.created between ? and ?
            ) 
        order by
            meal0_.created DESC

MockHttpServletRequest:
      HTTP Method = GET
      Request URI = /rest/admin/restaurants/100002/meals/filter
       Parameters = {startDate=[2018-10-12], endDate=[2018-10-12]}
          Headers = {Authorization=[Basic YWRtaW5AZ21haWwuY29tOmFkbWlu]}
             Body = null
    Session Attrs = {}

Handler:
             Type = ru.javawebinar.graduation.controller.meal.MealAdminRestController
           Method = public java.util.List<ru.javawebinar.graduation.model.Meal> ru.javawebinar.graduation.controller.meal.MealAdminRestController.getAllBetween(int,java.time.LocalDate,java.time.LocalDate)

Async:
    Async started = false
     Async result = null

Resolved Exception:
             Type = null

ModelAndView:
        View name = null
             View = null
            Model = null

FlashMap:
       Attributes = null

MockHttpServletResponse:
           Status = 200
    Error message = null
          Headers = {Content-Type=[application/json;charset=UTF-8], Cache-Control=[no-cache, no-store, max-age=0, must-revalidate], Pragma=[no-cache], Expires=[0], X-XSS-Protection=[1; mode=block], X-Frame-Options=[DENY], X-Content-Type-Options=[nosniff]}
     Content type = application/json;charset=UTF-8
             Body = [{"id":100005,"name":"Beef steak","created":"2018-10-12","price":3.00},{"id":100006,"name":"Borsch","created":"2018-10-12","price":2.00},{"id":100007,"name":"Pancake","created":"2018-10-12","price":1.00}]
    Forwarded URL = null
   Redirected URL = null
          Cookies = []
11:32:56.532 [34mINFO [0;39m [36mo.s.test.context.transaction.TransactionContext.endTransaction:139[0;39m - Rolled back transaction for test: [DefaultTestContext@7a92827f testClass = MealAdminRestControllerTest, testInstance = ru.javawebinar.graduation.controller.meal.MealAdminRestControllerTest@1e749235, testMethod = testGetAllFilter@MealAdminRestControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@35efd12c testClass = MealAdminRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]
11:32:56.534 [34mINFO [0;39m [36morg.springframework.mock.web.MockServletContext.log:438[0;39m - Initializing Spring FrameworkServlet ''
11:32:56.534 [34mINFO [0;39m [36morg.springframework.web.servlet.FrameworkServlet.initServletBean:494[0;39m - FrameworkServlet '': initialization started
11:32:56.537 [34mINFO [0;39m [36morg.springframework.web.servlet.FrameworkServlet.initServletBean:509[0;39m - FrameworkServlet '': initialization completed in 2 ms
11:32:56.540 [34mINFO [0;39m [36mo.s.test.context.transaction.TransactionContext.startTransaction:107[0;39m - Began transaction (1) for test context [DefaultTestContext@7a92827f testClass = MealAdminRestControllerTest, testInstance = ru.javawebinar.graduation.controller.meal.MealAdminRestControllerTest@11939a9f, testMethod = testCreateWithIllegalRequestData@MealAdminRestControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@35efd12c testClass = MealAdminRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@1e95f584]; rollback [true]
Hibernate: 
    /* select
        generatedAlias0 
    from
        User as generatedAlias0 
    where
        generatedAlias0.email=:param0 */ select
            user0_.id as id1_3_,
            user0_.name as name2_3_,
            user0_.email as email3_3_,
            user0_.enabled as enabled4_3_,
            user0_.password as password5_3_,
            user0_.registered as register6_3_ 
        from
            users user0_ 
        where
            user0_.email=?
Hibernate: 
    /* load collection ru.javawebinar.graduation.model.User.roles */ select
        roles0_.user_id as user_id1_2_0_,
        roles0_.role as role2_2_0_ 
    from
        user_roles roles0_ 
    where
        roles0_.user_id=?
11:32:56.554 [34mINFO [0;39m [36mr.j.g.controller.meal.MealAdminRestController.add:75[0;39m - create Meal{created=2018-10-12, name='Beef steak', price=3.00, id=100005}
11:32:56.556 [31mWARN [0;39m [36mr.j.graduation.controller.ExceptionInfoHandler.logAndGetErrorInfo:108[0;39m - VALIDATION_ERROR at request  http://localhost/rest/admin/restaurants/100002/meals/: ru.javawebinar.graduation.util.exception.IllegalRequestDataException: Meal{created=2018-10-12, name='Beef steak', price=3.00, id=100005} must be new (id=null)
11:32:56.557 [31mWARN [0;39m [36mo.s.w.s.m.m.a.ExceptionHandlerExceptionResolver.doResolveHandlerMethodException:411[0;39m - Failed to invoke @ExceptionHandler method: public ru.javawebinar.graduation.util.exception.ErrorInfo ru.javawebinar.graduation.controller.ExceptionInfoHandler.illegalRequestDataError(javax.servlet.http.HttpServletRequest,java.lang.Exception)
org.springframework.context.NoSuchMessageException: No message found under code 'error.validationError' for locale 'ru'.
	at org.springframework.context.support.AbstractMessageSource.getMessage(AbstractMessageSource.java:161)
	at ru.javawebinar.graduation.controller.MessageUtil.getMessage(MessageUtil.java:23)
	at ru.javawebinar.graduation.controller.MessageUtil.getMessage(MessageUtil.java:27)
	at ru.javawebinar.graduation.controller.ExceptionInfoHandler.logAndGetErrorInfo(ExceptionInfoHandler.java:111)
	at ru.javawebinar.graduation.controller.ExceptionInfoHandler.illegalRequestDataError(ExceptionInfoHandler.java:94)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:209)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:136)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:102)
	at org.springframework.web.servlet.mvc.method.annotation.ExceptionHandlerExceptionResolver.doResolveHandlerMethodException(ExceptionHandlerExceptionResolver.java:404)
	at org.springframework.web.servlet.handler.AbstractHandlerMethodExceptionResolver.doResolveException(AbstractHandlerMethodExceptionResolver.java:61)
	at org.springframework.web.servlet.handler.AbstractHandlerExceptionResolver.resolveException(AbstractHandlerExceptionResolver.java:139)
	at org.springframework.web.servlet.DispatcherServlet.processHandlerException(DispatcherServlet.java:1255)
	at org.springframework.test.web.servlet.TestDispatcherServlet.processHandlerException(TestDispatcherServlet.java:133)
	at org.springframework.web.servlet.DispatcherServlet.processDispatchResult(DispatcherServlet.java:1062)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1008)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:925)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:974)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:877)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:661)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:851)
	at org.springframework.test.web.servlet.TestDispatcherServlet.service(TestDispatcherServlet.java:71)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:742)
	at org.springframework.mock.web.MockFilterChain$ServletFilterProxy.doFilter(MockFilterChain.java:166)
	at org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:133)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:320)
	at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:127)
	at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:91)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:119)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:111)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:170)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.authentication.www.BasicAuthenticationFilter.doFilterInternal(BasicAuthenticationFilter.java:215)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:66)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:56)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:105)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:215)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:178)
	at org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:133)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:200)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:133)
	at org.springframework.test.web.servlet.MockMvc.perform(MockMvc.java:165)
	at ru.javawebinar.graduation.controller.meal.MealAdminRestControllerTest.testCreateWithIllegalRequestData(MealAdminRestControllerTest.java:106)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.platform.commons.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:513)
	at org.junit.jupiter.engine.execution.ExecutableInvoker.invoke(ExecutableInvoker.java:115)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeTestMethod$6(TestMethodTestDescriptor.java:170)
	at org.junit.jupiter.engine.execution.ThrowableCollector.execute(ThrowableCollector.java:40)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeTestMethod(TestMethodTestDescriptor.java:166)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:113)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:58)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor$NodeExecutor.lambda$executeRecursively$3(HierarchicalTestExecutor.java:113)
	at org.junit.platform.engine.support.hierarchical.SingleTestExecutor.executeSafely(SingleTestExecutor.java:66)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor$NodeExecutor.executeRecursively(HierarchicalTestExecutor.java:108)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor$NodeExecutor.execute(HierarchicalTestExecutor.java:79)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor$NodeExecutor.lambda$executeRecursively$2(HierarchicalTestExecutor.java:121)
	at java.util.stream.ForEachOps$ForEachOp$OfRef.accept(ForEachOps.java:184)
	at java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:175)
	at java.util.Iterator.forEachRemaining(Iterator.java:116)
	at java.util.Spliterators$IteratorSpliterator.forEachRemaining(Spliterators.java:1801)
	at java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:481)
	at java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:471)
	at java.util.stream.ForEachOps$ForEachOp.evaluateSequential(ForEachOps.java:151)
	at java.util.stream.ForEachOps$ForEachOp$OfRef.evaluateSequential(ForEachOps.java:174)
	at java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)
	at java.util.stream.ReferencePipeline.forEach(ReferencePipeline.java:418)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor$NodeExecutor.lambda$executeRecursively$3(HierarchicalTestExecutor.java:121)
	at org.junit.platform.engine.support.hierarchical.SingleTestExecutor.executeSafely(SingleTestExecutor.java:66)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor$NodeExecutor.executeRecursively(HierarchicalTestExecutor.java:108)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor$NodeExecutor.execute(HierarchicalTestExecutor.java:79)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor$NodeExecutor.lambda$executeRecursively$2(HierarchicalTestExecutor.java:121)
	at java.util.stream.ForEachOps$ForEachOp$OfRef.accept(ForEachOps.java:184)
	at java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:175)
	at java.util.Iterator.forEachRemaining(Iterator.java:116)
	at java.util.Spliterators$IteratorSpliterator.forEachRemaining(Spliterators.java:1801)
	at java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:481)
	at java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:471)
	at java.util.stream.ForEachOps$ForEachOp.evaluateSequential(ForEachOps.java:151)
	at java.util.stream.ForEachOps$ForEachOp$OfRef.evaluateSequential(ForEachOps.java:174)
	at java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)
	at java.util.stream.ReferencePipeline.forEach(ReferencePipeline.java:418)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor$NodeExecutor.lambda$executeRecursively$3(HierarchicalTestExecutor.java:121)
	at org.junit.platform.engine.support.hierarchical.SingleTestExecutor.executeSafely(SingleTestExecutor.java:66)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor$NodeExecutor.executeRecursively(HierarchicalTestExecutor.java:108)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor$NodeExecutor.execute(HierarchicalTestExecutor.java:79)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:55)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:43)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:170)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:154)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:90)
	at org.junit.platform.surefire.provider.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:132)
	at org.junit.platform.surefire.provider.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:111)
	at org.apache.maven.surefire.booter.ForkedBooter.invokeProviderInSameClassLoader(ForkedBooter.java:383)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:344)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:125)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:417)
11:32:56.560 [34mINFO [0;39m [36mo.s.test.context.transaction.TransactionContext.endTransaction:139[0;39m - Rolled back transaction for test: [DefaultTestContext@7a92827f testClass = MealAdminRestControllerTest, testInstance = ru.javawebinar.graduation.controller.meal.MealAdminRestControllerTest@11939a9f, testMethod = testCreateWithIllegalRequestData@MealAdminRestControllerTest, testException = org.springframework.web.util.NestedServletException: Request processing failed; nested exception is ru.javawebinar.graduation.util.exception.IllegalRequestDataException: Meal{created=2018-10-12, name='Beef steak', price=3.00, id=100005} must be new (id=null), mergedContextConfiguration = [WebMergedContextConfiguration@35efd12c testClass = MealAdminRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]
11:32:56.563 [34mINFO [0;39m [36morg.springframework.mock.web.MockServletContext.log:438[0;39m - Initializing Spring FrameworkServlet ''
11:32:56.563 [34mINFO [0;39m [36morg.springframework.web.servlet.FrameworkServlet.initServletBean:494[0;39m - FrameworkServlet '': initialization started
11:32:56.566 [34mINFO [0;39m [36morg.springframework.web.servlet.FrameworkServlet.initServletBean:509[0;39m - FrameworkServlet '': initialization completed in 2 ms
11:32:56.569 [34mINFO [0;39m [36mo.s.test.context.transaction.TransactionContext.startTransaction:107[0;39m - Began transaction (1) for test context [DefaultTestContext@7a92827f testClass = MealAdminRestControllerTest, testInstance = ru.javawebinar.graduation.controller.meal.MealAdminRestControllerTest@2d1f3639, testMethod = testCreate@MealAdminRestControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@35efd12c testClass = MealAdminRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@1e95f584]; rollback [true]
Hibernate: 
    /* select
        generatedAlias0 
    from
        User as generatedAlias0 
    where
        generatedAlias0.email=:param0 */ select
            user0_.id as id1_3_,
            user0_.name as name2_3_,
            user0_.email as email3_3_,
            user0_.enabled as enabled4_3_,
            user0_.password as password5_3_,
            user0_.registered as register6_3_ 
        from
            users user0_ 
        where
            user0_.email=?
Hibernate: 
    /* load collection ru.javawebinar.graduation.model.User.roles */ select
        roles0_.user_id as user_id1_2_0_,
        roles0_.role as role2_2_0_ 
    from
        user_roles roles0_ 
    where
        roles0_.user_id=?
11:32:56.584 [34mINFO [0;39m [36mr.j.g.controller.meal.MealAdminRestController.add:75[0;39m - create Meal{created=2018-10-12, name='Sushi', price=2.75, id=null}
Hibernate: 
    call next value for global_seq
Hibernate: 
    /* insert ru.javawebinar.graduation.model.Meal
        */ insert 
        into
            meals
            (name, created, price, restaurant_id, id) 
        values
            (?, ?, ?, ?, ?)
Hibernate: 
    /* SELECT
        m 
    FROM
        Meal m 
    WHERE
        m.restaurant.id=:restaurantId 
    ORDER BY
        m.created DESC */ select
            meal0_.id as id1_0_,
            meal0_.name as name2_0_,
            meal0_.created as created3_0_,
            meal0_.price as price4_0_,
            meal0_.restaurant_id as restaura5_0_ 
        from
            meals meal0_ 
        where
            meal0_.restaurant_id=? 
        order by
            meal0_.created DESC
11:32:56.601 [34mINFO [0;39m [36mo.s.test.context.transaction.TransactionContext.endTransaction:139[0;39m - Rolled back transaction for test: [DefaultTestContext@7a92827f testClass = MealAdminRestControllerTest, testInstance = ru.javawebinar.graduation.controller.meal.MealAdminRestControllerTest@2d1f3639, testMethod = testCreate@MealAdminRestControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@35efd12c testClass = MealAdminRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]
11:32:56.605 [34mINFO [0;39m [36morg.springframework.mock.web.MockServletContext.log:438[0;39m - Initializing Spring FrameworkServlet ''
11:32:56.605 [34mINFO [0;39m [36morg.springframework.web.servlet.FrameworkServlet.initServletBean:494[0;39m - FrameworkServlet '': initialization started
11:32:56.608 [34mINFO [0;39m [36morg.springframework.web.servlet.FrameworkServlet.initServletBean:509[0;39m - FrameworkServlet '': initialization completed in 2 ms
11:32:56.612 [34mINFO [0;39m [36mo.s.test.context.transaction.TransactionContext.startTransaction:107[0;39m - Began transaction (1) for test context [DefaultTestContext@7a92827f testClass = MealAdminRestControllerTest, testInstance = ru.javawebinar.graduation.controller.meal.MealAdminRestControllerTest@23b087c3, testMethod = testDelete@MealAdminRestControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@35efd12c testClass = MealAdminRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@1e95f584]; rollback [true]
Hibernate: 
    /* select
        generatedAlias0 
    from
        User as generatedAlias0 
    where
        generatedAlias0.email=:param0 */ select
            user0_.id as id1_3_,
            user0_.name as name2_3_,
            user0_.email as email3_3_,
            user0_.enabled as enabled4_3_,
            user0_.password as password5_3_,
            user0_.registered as register6_3_ 
        from
            users user0_ 
        where
            user0_.email=?
Hibernate: 
    /* load collection ru.javawebinar.graduation.model.User.roles */ select
        roles0_.user_id as user_id1_2_0_,
        roles0_.role as role2_2_0_ 
    from
        user_roles roles0_ 
    where
        roles0_.user_id=?
11:32:56.622 [34mINFO [0;39m [36mr.j.g.controller.meal.MealAdminRestController.delete:90[0;39m - delete 100005
Hibernate: 
    /* DELETE 
    FROM
        Meal m 
    WHERE
        m.id=:id 
        AND m.restaurant.id=:restaurantId */ delete 
        from
            meals 
        where
            id=? 
            and restaurant_id=?
Hibernate: 
    /* SELECT
        m 
    FROM
        Meal m 
    WHERE
        m.restaurant.id=:restaurantId 
    ORDER BY
        m.created DESC */ select
            meal0_.id as id1_0_,
            meal0_.name as name2_0_,
            meal0_.created as created3_0_,
            meal0_.price as price4_0_,
            meal0_.restaurant_id as restaura5_0_ 
        from
            meals meal0_ 
        where
            meal0_.restaurant_id=? 
        order by
            meal0_.created DESC
11:32:56.637 [34mINFO [0;39m [36mo.s.test.context.transaction.TransactionContext.endTransaction:139[0;39m - Rolled back transaction for test: [DefaultTestContext@7a92827f testClass = MealAdminRestControllerTest, testInstance = ru.javawebinar.graduation.controller.meal.MealAdminRestControllerTest@23b087c3, testMethod = testDelete@MealAdminRestControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@35efd12c testClass = MealAdminRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]
11:32:56.638 [34mINFO [0;39m [36morg.springframework.mock.web.MockServletContext.log:438[0;39m - Initializing Spring FrameworkServlet ''
11:32:56.639 [34mINFO [0;39m [36morg.springframework.web.servlet.FrameworkServlet.initServletBean:494[0;39m - FrameworkServlet '': initialization started
11:32:56.641 [34mINFO [0;39m [36morg.springframework.web.servlet.FrameworkServlet.initServletBean:509[0;39m - FrameworkServlet '': initialization completed in 2 ms
11:32:56.645 [34mINFO [0;39m [36mo.s.test.context.transaction.TransactionContext.startTransaction:107[0;39m - Began transaction (1) for test context [DefaultTestContext@7a92827f testClass = MealAdminRestControllerTest, testInstance = ru.javawebinar.graduation.controller.meal.MealAdminRestControllerTest@2184962c, testMethod = testGetAll@MealAdminRestControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@35efd12c testClass = MealAdminRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@1e95f584]; rollback [true]
Hibernate: 
    /* select
        generatedAlias0 
    from
        User as generatedAlias0 
    where
        generatedAlias0.email=:param0 */ select
            user0_.id as id1_3_,
            user0_.name as name2_3_,
            user0_.email as email3_3_,
            user0_.enabled as enabled4_3_,
            user0_.password as password5_3_,
            user0_.registered as register6_3_ 
        from
            users user0_ 
        where
            user0_.email=?
Hibernate: 
    /* load collection ru.javawebinar.graduation.model.User.roles */ select
        roles0_.user_id as user_id1_2_0_,
        roles0_.role as role2_2_0_ 
    from
        user_roles roles0_ 
    where
        roles0_.user_id=?
11:32:56.654 [34mINFO [0;39m [36mr.j.g.controller.meal.MealAdminRestController.getAll:41[0;39m - getAll
Hibernate: 
    /* SELECT
        m 
    FROM
        Meal m 
    WHERE
        m.restaurant.id=:restaurantId 
    ORDER BY
        m.created DESC */ select
            meal0_.id as id1_0_,
            meal0_.name as name2_0_,
            meal0_.created as created3_0_,
            meal0_.price as price4_0_,
            meal0_.restaurant_id as restaura5_0_ 
        from
            meals meal0_ 
        where
            meal0_.restaurant_id=? 
        order by
            meal0_.created DESC

MockHttpServletRequest:
      HTTP Method = GET
      Request URI = /rest/admin/restaurants/100002/meals/history
       Parameters = {}
          Headers = {Authorization=[Basic YWRtaW5AZ21haWwuY29tOmFkbWlu]}
             Body = null
    Session Attrs = {}

Handler:
             Type = ru.javawebinar.graduation.controller.meal.MealAdminRestController
           Method = public java.util.List<ru.javawebinar.graduation.model.Meal> ru.javawebinar.graduation.controller.meal.MealAdminRestController.getAll(int)

Async:
    Async started = false
     Async result = null

Resolved Exception:
             Type = null

ModelAndView:
        View name = null
             View = null
            Model = null

FlashMap:
       Attributes = null

MockHttpServletResponse:
           Status = 200
    Error message = null
          Headers = {Content-Type=[application/json;charset=UTF-8], Cache-Control=[no-cache, no-store, max-age=0, must-revalidate], Pragma=[no-cache], Expires=[0], X-XSS-Protection=[1; mode=block], X-Frame-Options=[DENY], X-Content-Type-Options=[nosniff]}
     Content type = application/json;charset=UTF-8
             Body = [{"id":100005,"name":"Beef steak","created":"2018-10-12","price":3.00},{"id":100006,"name":"Borsch","created":"2018-10-12","price":2.00},{"id":100007,"name":"Pancake","created":"2018-10-12","price":1.00}]
    Forwarded URL = null
   Redirected URL = null
          Cookies = []
11:32:56.662 [34mINFO [0;39m [36mo.s.test.context.transaction.TransactionContext.endTransaction:139[0;39m - Rolled back transaction for test: [DefaultTestContext@7a92827f testClass = MealAdminRestControllerTest, testInstance = ru.javawebinar.graduation.controller.meal.MealAdminRestControllerTest@2184962c, testMethod = testGetAll@MealAdminRestControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@35efd12c testClass = MealAdminRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]
11:32:56.665 [34mINFO [0;39m [36morg.springframework.mock.web.MockServletContext.log:438[0;39m - Initializing Spring FrameworkServlet ''
11:32:56.665 [34mINFO [0;39m [36morg.springframework.web.servlet.FrameworkServlet.initServletBean:494[0;39m - FrameworkServlet '': initialization started
11:32:56.668 [34mINFO [0;39m [36morg.springframework.web.servlet.FrameworkServlet.initServletBean:509[0;39m - FrameworkServlet '': initialization completed in 2 ms
11:32:56.671 [34mINFO [0;39m [36mo.s.test.context.transaction.TransactionContext.startTransaction:107[0;39m - Began transaction (1) for test context [DefaultTestContext@7a92827f testClass = MealAdminRestControllerTest, testInstance = ru.javawebinar.graduation.controller.meal.MealAdminRestControllerTest@106edde4, testMethod = testGetUnAuth@MealAdminRestControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@35efd12c testClass = MealAdminRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@1e95f584]; rollback [true]
11:32:56.674 [34mINFO [0;39m [36mo.s.test.context.transaction.TransactionContext.endTransaction:139[0;39m - Rolled back transaction for test: [DefaultTestContext@7a92827f testClass = MealAdminRestControllerTest, testInstance = ru.javawebinar.graduation.controller.meal.MealAdminRestControllerTest@106edde4, testMethod = testGetUnAuth@MealAdminRestControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@35efd12c testClass = MealAdminRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]
11:32:56.676 [34mINFO [0;39m [36morg.springframework.mock.web.MockServletContext.log:438[0;39m - Initializing Spring FrameworkServlet ''
11:32:56.676 [34mINFO [0;39m [36morg.springframework.web.servlet.FrameworkServlet.initServletBean:494[0;39m - FrameworkServlet '': initialization started
11:32:56.678 [34mINFO [0;39m [36morg.springframework.web.servlet.FrameworkServlet.initServletBean:509[0;39m - FrameworkServlet '': initialization completed in 2 ms
11:32:56.682 [34mINFO [0;39m [36mo.s.test.context.transaction.TransactionContext.startTransaction:107[0;39m - Began transaction (1) for test context [DefaultTestContext@7a92827f testClass = MealAdminRestControllerTest, testInstance = ru.javawebinar.graduation.controller.meal.MealAdminRestControllerTest@5db66c3, testMethod = testGetAllFilterAll@MealAdminRestControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@35efd12c testClass = MealAdminRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@1e95f584]; rollback [true]
Hibernate: 
    /* select
        generatedAlias0 
    from
        User as generatedAlias0 
    where
        generatedAlias0.email=:param0 */ select
            user0_.id as id1_3_,
            user0_.name as name2_3_,
            user0_.email as email3_3_,
            user0_.enabled as enabled4_3_,
            user0_.password as password5_3_,
            user0_.registered as register6_3_ 
        from
            users user0_ 
        where
            user0_.email=?
Hibernate: 
    /* load collection ru.javawebinar.graduation.model.User.roles */ select
        roles0_.user_id as user_id1_2_0_,
        roles0_.role as role2_2_0_ 
    from
        user_roles roles0_ 
    where
        roles0_.user_id=?
11:32:56.704 [34mINFO [0;39m [36mr.j.g.controller.meal.MealAdminRestController.getAllBetween:62[0;39m - getAllBetween
Hibernate: 
    /* SELECT
        m 
    FROM
        Meal m 
    WHERE
        m.restaurant.id=:restaurantId 
        AND m.created BETWEEN :startDate AND :endDate  
    ORDER BY
        m.created DESC */ select
            meal0_.id as id1_0_,
            meal0_.name as name2_0_,
            meal0_.created as created3_0_,
            meal0_.price as price4_0_,
            meal0_.restaurant_id as restaura5_0_ 
        from
            meals meal0_ 
        where
            meal0_.restaurant_id=? 
            and (
                meal0_.created between ? and ?
            ) 
        order by
            meal0_.created DESC

MockHttpServletRequest:
      HTTP Method = GET
      Request URI = /rest/admin/restaurants/100002/meals/filter
       Parameters = {startDate=[], endDate=[]}
          Headers = {Authorization=[Basic YWRtaW5AZ21haWwuY29tOmFkbWlu]}
             Body = null
    Session Attrs = {}

Handler:
             Type = ru.javawebinar.graduation.controller.meal.MealAdminRestController
           Method = public java.util.List<ru.javawebinar.graduation.model.Meal> ru.javawebinar.graduation.controller.meal.MealAdminRestController.getAllBetween(int,java.time.LocalDate,java.time.LocalDate)

Async:
    Async started = false
     Async result = null

Resolved Exception:
             Type = null

ModelAndView:
        View name = null
             View = null
            Model = null

FlashMap:
       Attributes = null

MockHttpServletResponse:
           Status = 200
    Error message = null
          Headers = {Content-Type=[application/json;charset=UTF-8], Cache-Control=[no-cache, no-store, max-age=0, must-revalidate], Pragma=[no-cache], Expires=[0], X-XSS-Protection=[1; mode=block], X-Frame-Options=[DENY], X-Content-Type-Options=[nosniff]}
     Content type = application/json;charset=UTF-8
             Body = [{"id":100005,"name":"Beef steak","created":"2018-10-12","price":3.00},{"id":100006,"name":"Borsch","created":"2018-10-12","price":2.00},{"id":100007,"name":"Pancake","created":"2018-10-12","price":1.00}]
    Forwarded URL = null
   Redirected URL = null
          Cookies = []
11:32:56.719 [34mINFO [0;39m [36mo.s.test.context.transaction.TransactionContext.endTransaction:139[0;39m - Rolled back transaction for test: [DefaultTestContext@7a92827f testClass = MealAdminRestControllerTest, testInstance = ru.javawebinar.graduation.controller.meal.MealAdminRestControllerTest@5db66c3, testMethod = testGetAllFilterAll@MealAdminRestControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@35efd12c testClass = MealAdminRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]
11:32:56.720 [34mINFO [0;39m [36morg.springframework.mock.web.MockServletContext.log:438[0;39m - Initializing Spring FrameworkServlet ''
11:32:56.721 [34mINFO [0;39m [36morg.springframework.web.servlet.FrameworkServlet.initServletBean:494[0;39m - FrameworkServlet '': initialization started
11:32:56.723 [34mINFO [0;39m [36morg.springframework.web.servlet.FrameworkServlet.initServletBean:509[0;39m - FrameworkServlet '': initialization completed in 1 ms
11:32:56.740 [34mINFO [0;39m [36mo.s.test.context.transaction.TransactionContext.startTransaction:107[0;39m - Began transaction (1) for test context [DefaultTestContext@7a92827f testClass = MealAdminRestControllerTest, testInstance = ru.javawebinar.graduation.controller.meal.MealAdminRestControllerTest@6761f75b, testMethod = testUpdate@MealAdminRestControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@35efd12c testClass = MealAdminRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@1e95f584]; rollback [true]
Hibernate: 
    /* select
        generatedAlias0 
    from
        User as generatedAlias0 
    where
        generatedAlias0.email=:param0 */ select
            user0_.id as id1_3_,
            user0_.name as name2_3_,
            user0_.email as email3_3_,
            user0_.enabled as enabled4_3_,
            user0_.password as password5_3_,
            user0_.registered as register6_3_ 
        from
            users user0_ 
        where
            user0_.email=?
Hibernate: 
    /* load collection ru.javawebinar.graduation.model.User.roles */ select
        roles0_.user_id as user_id1_2_0_,
        roles0_.role as role2_2_0_ 
    from
        user_roles roles0_ 
    where
        roles0_.user_id=?
11:32:56.750 [34mINFO [0;39m [36mr.j.g.controller.meal.MealAdminRestController.update:97[0;39m - update Meal{created=2018-10-12, name='Updated meal', price=2.85, id=100005} with id=100005
Hibernate: 
    select
        meal0_.id as id1_0_0_,
        meal0_.name as name2_0_0_,
        meal0_.created as created3_0_0_,
        meal0_.price as price4_0_0_,
        meal0_.restaurant_id as restaura5_0_0_ 
    from
        meals meal0_ 
    where
        meal0_.id=?
11:32:56.756 [34mINFO [0;39m [36mo.s.test.context.transaction.TransactionContext.endTransaction:139[0;39m - Rolled back transaction for test: [DefaultTestContext@7a92827f testClass = MealAdminRestControllerTest, testInstance = ru.javawebinar.graduation.controller.meal.MealAdminRestControllerTest@6761f75b, testMethod = testUpdate@MealAdminRestControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@35efd12c testClass = MealAdminRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]
11:32:56.758 [34mINFO [0;39m [36morg.springframework.mock.web.MockServletContext.log:438[0;39m - Initializing Spring FrameworkServlet ''
11:32:56.759 [34mINFO [0;39m [36morg.springframework.web.servlet.FrameworkServlet.initServletBean:494[0;39m - FrameworkServlet '': initialization started
11:32:56.761 [34mINFO [0;39m [36morg.springframework.web.servlet.FrameworkServlet.initServletBean:509[0;39m - FrameworkServlet '': initialization completed in 2 ms
11:32:56.765 [34mINFO [0;39m [36mo.s.test.context.transaction.TransactionContext.startTransaction:107[0;39m - Began transaction (1) for test context [DefaultTestContext@7a92827f testClass = MealAdminRestControllerTest, testInstance = ru.javawebinar.graduation.controller.meal.MealAdminRestControllerTest@575fe6da, testMethod = testCreateInvalid@MealAdminRestControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@35efd12c testClass = MealAdminRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@1e95f584]; rollback [true]
Hibernate: 
    /* select
        generatedAlias0 
    from
        User as generatedAlias0 
    where
        generatedAlias0.email=:param0 */ select
            user0_.id as id1_3_,
            user0_.name as name2_3_,
            user0_.email as email3_3_,
            user0_.enabled as enabled4_3_,
            user0_.password as password5_3_,
            user0_.registered as register6_3_ 
        from
            users user0_ 
        where
            user0_.email=?
Hibernate: 
    /* load collection ru.javawebinar.graduation.model.User.roles */ select
        roles0_.user_id as user_id1_2_0_,
        roles0_.role as role2_2_0_ 
    from
        user_roles roles0_ 
    where
        roles0_.user_id=?
11:32:56.789 [31mWARN [0;39m [36mr.j.graduation.controller.ExceptionInfoHandler.logAndGetErrorInfo:108[0;39m - VALIDATION_ERROR at request  http://localhost/rest/admin/restaurants/100002/meals/: org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument at index 0 in method: public org.springframework.http.ResponseEntity<ru.javawebinar.graduation.model.Meal> ru.javawebinar.graduation.controller.meal.MealAdminRestController.add(ru.javawebinar.graduation.model.Meal,int), with 2 error(s): [Field error in object 'meal' on field 'name': rejected value []; codes [Size.meal.name,Size.name,Size.java.lang.String,Size]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [meal.name,name]; arguments []; default message [name],100,2]; default message [size must be between 2 and 100]] [Field error in object 'meal' on field 'name': rejected value []; codes [NotBlank.meal.name,NotBlank.name,NotBlank.java.lang.String,NotBlank]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [meal.name,name]; arguments []; default message [name]]; default message [must not be blank]] 
11:32:56.790 [31mWARN [0;39m [36mo.s.w.s.m.m.a.ExceptionHandlerExceptionResolver.doResolveHandlerMethodException:411[0;39m - Failed to invoke @ExceptionHandler method: public ru.javawebinar.graduation.util.exception.ErrorInfo ru.javawebinar.graduation.controller.ExceptionInfoHandler.methodArgumentValidationError(javax.servlet.http.HttpServletRequest,org.springframework.web.bind.MethodArgumentNotValidException)
org.springframework.context.NoSuchMessageException: No message found under code 'error.validationError' for locale 'ru'.
	at org.springframework.context.support.AbstractMessageSource.getMessage(AbstractMessageSource.java:161)
	at ru.javawebinar.graduation.controller.MessageUtil.getMessage(MessageUtil.java:23)
	at ru.javawebinar.graduation.controller.MessageUtil.getMessage(MessageUtil.java:27)
	at ru.javawebinar.graduation.controller.ExceptionInfoHandler.logAndGetErrorInfo(ExceptionInfoHandler.java:111)
	at ru.javawebinar.graduation.controller.ExceptionInfoHandler.methodArgumentValidationError(ExceptionInfoHandler.java:81)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:209)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:136)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:102)
	at org.springframework.web.servlet.mvc.method.annotation.ExceptionHandlerExceptionResolver.doResolveHandlerMethodException(ExceptionHandlerExceptionResolver.java:404)
	at org.springframework.web.servlet.handler.AbstractHandlerMethodExceptionResolver.doResolveException(AbstractHandlerMethodExceptionResolver.java:61)
	at org.springframework.web.servlet.handler.AbstractHandlerExceptionResolver.resolveException(AbstractHandlerExceptionResolver.java:139)
	at org.springframework.web.servlet.DispatcherServlet.processHandlerException(DispatcherServlet.java:1255)
	at org.springframework.test.web.servlet.TestDispatcherServlet.processHandlerException(TestDispatcherServlet.java:133)
	at org.springframework.web.servlet.DispatcherServlet.processDispatchResult(DispatcherServlet.java:1062)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1008)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:925)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:974)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:877)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:661)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:851)
	at org.springframework.test.web.servlet.TestDispatcherServlet.service(TestDispatcherServlet.java:71)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:742)
	at org.springframework.mock.web.MockFilterChain$ServletFilterProxy.doFilter(MockFilterChain.java:166)
	at org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:133)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:320)
	at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:127)
	at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:91)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:119)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:111)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:170)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.authentication.www.BasicAuthenticationFilter.doFilterInternal(BasicAuthenticationFilter.java:215)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:66)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:56)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:105)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:215)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:178)
	at org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:133)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:200)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:133)
	at org.springframework.test.web.servlet.MockMvc.perform(MockMvc.java:165)
	at ru.javawebinar.graduation.controller.meal.MealAdminRestControllerTest.testCreateInvalid(MealAdminRestControllerTest.java:182)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.platform.commons.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:513)
	at org.junit.jupiter.engine.execution.ExecutableInvoker.invoke(ExecutableInvoker.java:115)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeTestMethod$6(TestMethodTestDescriptor.java:170)
	at org.junit.jupiter.engine.execution.ThrowableCollector.execute(ThrowableCollector.java:40)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeTestMethod(TestMethodTestDescriptor.java:166)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:113)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:58)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor$NodeExecutor.lambda$executeRecursively$3(HierarchicalTestExecutor.java:113)
	at org.junit.platform.engine.support.hierarchical.SingleTestExecutor.executeSafely(SingleTestExecutor.java:66)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor$NodeExecutor.executeRecursively(HierarchicalTestExecutor.java:108)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor$NodeExecutor.execute(HierarchicalTestExecutor.java:79)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor$NodeExecutor.lambda$executeRecursively$2(HierarchicalTestExecutor.java:121)
	at java.util.stream.ForEachOps$ForEachOp$OfRef.accept(ForEachOps.java:184)
	at java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:175)
	at java.util.Iterator.forEachRemaining(Iterator.java:116)
	at java.util.Spliterators$IteratorSpliterator.forEachRemaining(Spliterators.java:1801)
	at java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:481)
	at java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:471)
	at java.util.stream.ForEachOps$ForEachOp.evaluateSequential(ForEachOps.java:151)
	at java.util.stream.ForEachOps$ForEachOp$OfRef.evaluateSequential(ForEachOps.java:174)
	at java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)
	at java.util.stream.ReferencePipeline.forEach(ReferencePipeline.java:418)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor$NodeExecutor.lambda$executeRecursively$3(HierarchicalTestExecutor.java:121)
	at org.junit.platform.engine.support.hierarchical.SingleTestExecutor.executeSafely(SingleTestExecutor.java:66)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor$NodeExecutor.executeRecursively(HierarchicalTestExecutor.java:108)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor$NodeExecutor.execute(HierarchicalTestExecutor.java:79)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor$NodeExecutor.lambda$executeRecursively$2(HierarchicalTestExecutor.java:121)
	at java.util.stream.ForEachOps$ForEachOp$OfRef.accept(ForEachOps.java:184)
	at java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:175)
	at java.util.Iterator.forEachRemaining(Iterator.java:116)
	at java.util.Spliterators$IteratorSpliterator.forEachRemaining(Spliterators.java:1801)
	at java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:481)
	at java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:471)
	at java.util.stream.ForEachOps$ForEachOp.evaluateSequential(ForEachOps.java:151)
	at java.util.stream.ForEachOps$ForEachOp$OfRef.evaluateSequential(ForEachOps.java:174)
	at java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)
	at java.util.stream.ReferencePipeline.forEach(ReferencePipeline.java:418)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor$NodeExecutor.lambda$executeRecursively$3(HierarchicalTestExecutor.java:121)
	at org.junit.platform.engine.support.hierarchical.SingleTestExecutor.executeSafely(SingleTestExecutor.java:66)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor$NodeExecutor.executeRecursively(HierarchicalTestExecutor.java:108)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor$NodeExecutor.execute(HierarchicalTestExecutor.java:79)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:55)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:43)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:170)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:154)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:90)
	at org.junit.platform.surefire.provider.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:132)
	at org.junit.platform.surefire.provider.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:111)
	at org.apache.maven.surefire.booter.ForkedBooter.invokeProviderInSameClassLoader(ForkedBooter.java:383)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:344)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:125)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:417)

MockHttpServletRequest:
      HTTP Method = POST
      Request URI = /rest/admin/restaurants/100002/meals/
       Parameters = {}
          Headers = {Content-Type=[application/json;charset=UTF-8], Authorization=[Basic YWRtaW5AZ21haWwuY29tOmFkbWlu]}
             Body = {"name":"","created":"2018-10-12","price":2.50}
    Session Attrs = {}

Handler:
             Type = ru.javawebinar.graduation.controller.meal.MealAdminRestController
           Method = public org.springframework.http.ResponseEntity<ru.javawebinar.graduation.model.Meal> ru.javawebinar.graduation.controller.meal.MealAdminRestController.add(ru.javawebinar.graduation.model.Meal,int)

Async:
    Async started = false
     Async result = null

Resolved Exception:
             Type = org.springframework.web.bind.MethodArgumentNotValidException

ModelAndView:
        View name = null
             View = null
            Model = null

FlashMap:
       Attributes = null

MockHttpServletResponse:
           Status = 400
    Error message = null
          Headers = {Cache-Control=[no-cache, no-store, max-age=0, must-revalidate], Pragma=[no-cache], Expires=[0], X-XSS-Protection=[1; mode=block], X-Frame-Options=[DENY], X-Content-Type-Options=[nosniff]}
     Content type = null
             Body = 
    Forwarded URL = null
   Redirected URL = null
          Cookies = []
11:32:56.800 [34mINFO [0;39m [36mo.s.test.context.transaction.TransactionContext.endTransaction:139[0;39m - Rolled back transaction for test: [DefaultTestContext@7a92827f testClass = MealAdminRestControllerTest, testInstance = ru.javawebinar.graduation.controller.meal.MealAdminRestControllerTest@575fe6da, testMethod = testCreateInvalid@MealAdminRestControllerTest, testException = java.lang.AssertionError: Status expected:<422> but was:<400>, mergedContextConfiguration = [WebMergedContextConfiguration@35efd12c testClass = MealAdminRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]
[ERROR] Tests run: 18, Failures: 3, Errors: 5, Skipped: 0, Time elapsed: 0.79 s <<< FAILURE! - in ru.javawebinar.graduation.controller.meal.MealAdminRestControllerTest
[ERROR] testUpdateDuplicate  Time elapsed: 0.093 s  <<< ERROR!
org.springframework.web.util.NestedServletException: Request processing failed; nested exception is org.springframework.dao.DataIntegrityViolationException: could not execute statement; SQL [n/a]; constraint [null]; nested exception is org.hibernate.exception.ConstraintViolationException: could not execute statement
	at ru.javawebinar.graduation.controller.meal.MealAdminRestControllerTest.testUpdateDuplicate(MealAdminRestControllerTest.java:211)
Caused by: org.springframework.dao.DataIntegrityViolationException: could not execute statement; SQL [n/a]; constraint [null]; nested exception is org.hibernate.exception.ConstraintViolationException: could not execute statement
	at ru.javawebinar.graduation.controller.meal.MealAdminRestControllerTest.testUpdateDuplicate(MealAdminRestControllerTest.java:211)
Caused by: org.hibernate.exception.ConstraintViolationException: could not execute statement
	at ru.javawebinar.graduation.controller.meal.MealAdminRestControllerTest.testUpdateDuplicate(MealAdminRestControllerTest.java:211)
Caused by: java.sql.SQLIntegrityConstraintViolationException: integrity constraint violation: unique constraint or index violation: MEALS_UNIQUE_NAME_CREATED_RESTAURANT_IDX
	at ru.javawebinar.graduation.controller.meal.MealAdminRestControllerTest.testUpdateDuplicate(MealAdminRestControllerTest.java:211)
Caused by: org.hsqldb.HsqlException: integrity constraint violation: unique constraint or index violation: MEALS_UNIQUE_NAME_CREATED_RESTAURANT_IDX
	at ru.javawebinar.graduation.controller.meal.MealAdminRestControllerTest.testUpdateDuplicate(MealAdminRestControllerTest.java:211)

[ERROR] testUpdateInvalid  Time elapsed: 0.021 s  <<< FAILURE!
java.lang.AssertionError: Status expected:<422> but was:<400>
	at ru.javawebinar.graduation.controller.meal.MealAdminRestControllerTest.testUpdateInvalid(MealAdminRestControllerTest.java:201)

[ERROR] testDeleteNotFound  Time elapsed: 0.021 s  <<< ERROR!
org.springframework.web.util.NestedServletException: Request processing failed; nested exception is ru.javawebinar.graduation.util.exception.NotFoundException: type=DATA_NOT_FOUND, msgCode=exception.common.notFound, args=[id=100010]
	at ru.javawebinar.graduation.controller.meal.MealAdminRestControllerTest.testDeleteNotFound(MealAdminRestControllerTest.java:70)
Caused by: ru.javawebinar.graduation.util.exception.NotFoundException: type=DATA_NOT_FOUND, msgCode=exception.common.notFound, args=[id=100010]
	at ru.javawebinar.graduation.controller.meal.MealAdminRestControllerTest.testDeleteNotFound(MealAdminRestControllerTest.java:70)

[ERROR] testGetNotFound  Time elapsed: 0.021 s  <<< ERROR!
org.springframework.web.util.NestedServletException: Request processing failed; nested exception is ru.javawebinar.graduation.util.exception.NotFoundException: type=DATA_NOT_FOUND, msgCode=exception.common.notFound, args=[id=100010]
	at ru.javawebinar.graduation.controller.meal.MealAdminRestControllerTest.testGetNotFound(MealAdminRestControllerTest.java:49)
Caused by: ru.javawebinar.graduation.util.exception.NotFoundException: type=DATA_NOT_FOUND, msgCode=exception.common.notFound, args=[id=100010]
	at ru.javawebinar.graduation.controller.meal.MealAdminRestControllerTest.testGetNotFound(MealAdminRestControllerTest.java:49)

[ERROR] testCreateDuplicate  Time elapsed: 0.059 s  <<< ERROR!
org.springframework.web.util.NestedServletException: Request processing failed; nested exception is org.springframework.dao.DataIntegrityViolationException: could not execute statement; SQL [n/a]; constraint [null]; nested exception is org.hibernate.exception.ConstraintViolationException: could not execute statement
	at ru.javawebinar.graduation.controller.meal.MealAdminRestControllerTest.testCreateDuplicate(MealAdminRestControllerTest.java:225)
Caused by: org.springframework.dao.DataIntegrityViolationException: could not execute statement; SQL [n/a]; constraint [null]; nested exception is org.hibernate.exception.ConstraintViolationException: could not execute statement
	at ru.javawebinar.graduation.controller.meal.MealAdminRestControllerTest.testCreateDuplicate(MealAdminRestControllerTest.java:225)
Caused by: org.hibernate.exception.ConstraintViolationException: could not execute statement
	at ru.javawebinar.graduation.controller.meal.MealAdminRestControllerTest.testCreateDuplicate(MealAdminRestControllerTest.java:225)
Caused by: java.sql.SQLIntegrityConstraintViolationException: integrity constraint violation: unique constraint or index violation: MEALS_UNIQUE_NAME_CREATED_RESTAURANT_IDX
	at ru.javawebinar.graduation.controller.meal.MealAdminRestControllerTest.testCreateDuplicate(MealAdminRestControllerTest.java:225)
Caused by: org.hsqldb.HsqlException: integrity constraint violation: unique constraint or index violation: MEALS_UNIQUE_NAME_CREATED_RESTAURANT_IDX
	at ru.javawebinar.graduation.controller.meal.MealAdminRestControllerTest.testCreateDuplicate(MealAdminRestControllerTest.java:225)

[ERROR] testUpdateHtmlUnsafe  Time elapsed: 0.04 s  <<< FAILURE!
java.lang.AssertionError: Status expected:<422> but was:<400>
	at ru.javawebinar.graduation.controller.meal.MealAdminRestControllerTest.testUpdateHtmlUnsafe(MealAdminRestControllerTest.java:173)

[ERROR] testCreateWithIllegalRequestData  Time elapsed: 0.023 s  <<< ERROR!
org.springframework.web.util.NestedServletException: Request processing failed; nested exception is ru.javawebinar.graduation.util.exception.IllegalRequestDataException: Meal{created=2018-10-12, name='Beef steak', price=3.00, id=100005} must be new (id=null)
	at ru.javawebinar.graduation.controller.meal.MealAdminRestControllerTest.testCreateWithIllegalRequestData(MealAdminRestControllerTest.java:106)
Caused by: ru.javawebinar.graduation.util.exception.IllegalRequestDataException: Meal{created=2018-10-12, name='Beef steak', price=3.00, id=100005} must be new (id=null)
	at ru.javawebinar.graduation.controller.meal.MealAdminRestControllerTest.testCreateWithIllegalRequestData(MealAdminRestControllerTest.java:106)

[ERROR] testCreateInvalid  Time elapsed: 0.038 s  <<< FAILURE!
java.lang.AssertionError: Status expected:<422> but was:<400>
	at ru.javawebinar.graduation.controller.meal.MealAdminRestControllerTest.testCreateInvalid(MealAdminRestControllerTest.java:187)

[INFO] Running ru.javawebinar.graduation.controller.json.JsonUtilTest
{"id":100000,"name":"User","email":"user@yandex.ru","enabled":true,"registered":"2018-10-12T09:32:49.715+0000","roles":["ROLE_USER"]}
{"id":100000,"name":"User","email":"user@yandex.ru","enabled":true,"registered":"2018-10-12T09:32:49.715+0000","roles":["ROLE_USER"],"password":"newPass"}
{"id":100005,"name":"Beef steak","created":"2018-10-12","price":3.00}
[{"id":100005,"name":"Beef steak","created":"2018-10-12","price":3.00},{"id":100006,"name":"Borsch","created":"2018-10-12","price":2.00},{"id":100007,"name":"Pancake","created":"2018-10-12","price":1.00},{"id":100008,"name":"Deep fried potatoes","created":"2018-10-12","price":1.00},{"id":100009,"name":"Macaroni","created":"2018-10-12","price":2.00},{"id":100010,"name":"Bouillon","created":"2018-10-12","price":1.00},{"id":100011,"name":"Porridge","created":"2018-10-12","price":1.50},{"id":100012,"name":"Pizza","created":"2018-10-12","price":2.50}]
[INFO] Tests run: 3, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.056 s - in ru.javawebinar.graduation.controller.json.JsonUtilTest
[INFO] Running ru.javawebinar.graduation.service.MealServiceImplTest
11:32:56.899 [34mINFO [0;39m [36mo.s.t.c.support.AbstractTestContextBootstrapper.getDefaultTestExecutionListenerClassNames:248[0;39m - Loaded default TestExecutionListener class names from location [META-INF/spring.factories]: [org.springframework.security.test.context.support.WithSecurityContextTestExecutionListener, org.springframework.security.test.context.support.ReactorContextTestExecutionListener, org.springframework.test.context.web.ServletTestExecutionListener, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener, org.springframework.test.context.support.DependencyInjectionTestExecutionListener, org.springframework.test.context.support.DirtiesContextTestExecutionListener, org.springframework.test.context.transaction.TransactionalTestExecutionListener, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener]
11:32:56.919 [34mINFO [0;39m [36mo.s.t.c.support.AbstractTestContextBootstrapper.getTestExecutionListeners:177[0;39m - Using TestExecutionListeners: [org.springframework.test.context.web.ServletTestExecutionListener@7c6fc278, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener@23ee92df, org.springframework.test.context.support.DependencyInjectionTestExecutionListener@1a6a4595, org.springframework.test.context.support.DirtiesContextTestExecutionListener@4b1b2255, org.springframework.test.context.transaction.TransactionalTestExecutionListener@4965454c, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener@1e4a4ed5, org.springframework.security.test.context.support.WithSecurityContextTestExecutionListener@5644f664, org.springframework.security.test.context.support.ReactorContextTestExecutionListener@445f6f73]
11:32:56.920 [34mINFO [0;39m [36mo.s.beans.factory.xml.XmlBeanDefinitionReader.loadBeanDefinitions:316[0;39m - Loading XML bean definitions from class path resource [spring/spring-app.xml]
11:32:56.966 [34mINFO [0;39m [36mo.s.beans.factory.xml.XmlBeanDefinitionReader.loadBeanDefinitions:316[0;39m - Loading XML bean definitions from class path resource [spring/spring-tools.xml]
11:32:57.010 [34mINFO [0;39m [36mo.s.beans.factory.xml.XmlBeanDefinitionReader.loadBeanDefinitions:316[0;39m - Loading XML bean definitions from class path resource [spring/spring-security.xml]
11:32:57.073 [34mINFO [0;39m [36mo.s.security.config.SecurityNamespaceHandler.<init>:78[0;39m - Spring Security 'config' module version is 5.0.7.RELEASE
11:32:57.110 [34mINFO [0;39m [36mo.s.s.c.h.FilterInvocationSecurityMetadataSourceParser.parseInterceptUrlsForFilterInvocationRequestMap:194[0;39m - Creating access control expression attribute 'hasRole('ROLE_ADMIN')' for /rest/admin/**
11:32:57.111 [34mINFO [0;39m [36mo.s.s.c.h.FilterInvocationSecurityMetadataSourceParser.parseInterceptUrlsForFilterInvocationRequestMap:194[0;39m - Creating access control expression attribute 'isAnonymous()' for /rest/profile/register
11:32:57.111 [34mINFO [0;39m [36mo.s.s.c.h.FilterInvocationSecurityMetadataSourceParser.parseInterceptUrlsForFilterInvocationRequestMap:194[0;39m - Creating access control expression attribute 'isAuthenticated()' for /**
11:32:57.112 [34mINFO [0;39m [36mo.s.s.config.http.HttpSecurityBeanDefinitionParser.checkFilterChainOrder:307[0;39m - Checking sorted filter chain: [Root bean: class [org.springframework.security.web.context.SecurityContextPersistenceFilter]; scope=; abstract=false; lazyInit=false; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 200, Root bean: class [org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter]; scope=; abstract=false; lazyInit=false; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 400, Root bean: class [org.springframework.security.web.header.HeaderWriterFilter]; scope=; abstract=false; lazyInit=false; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 500, Root bean: class [org.springframework.security.web.authentication.www.BasicAuthenticationFilter]; scope=; abstract=false; lazyInit=false; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 1600, Root bean: class [null]; scope=; abstract=false; lazyInit=false; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=org.springframework.security.config.http.HttpConfigurationBuilder$SecurityContextHolderAwareRequestFilterBeanFactory#0; factoryMethodName=getBean; initMethodName=null; destroyMethodName=null, order = 1800, Root bean: class [org.springframework.security.web.authentication.AnonymousAuthenticationFilter]; scope=; abstract=false; lazyInit=false; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 2100, Root bean: class [org.springframework.security.web.access.ExceptionTranslationFilter]; scope=; abstract=false; lazyInit=false; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 2300, <org.springframework.security.web.access.intercept.FilterSecurityInterceptor#0>, order = 2400]
11:32:57.150 [34mINFO [0;39m [36mo.s.beans.factory.xml.XmlBeanDefinitionReader.loadBeanDefinitions:316[0;39m - Loading XML bean definitions from class path resource [spring/spring-db.xml]
11:32:57.307 [34mINFO [0;39m [36mo.s.context.support.AbstractApplicationContext.prepareRefresh:590[0;39m - Refreshing org.springframework.context.support.GenericApplicationContext@27f31d91: startup date [Fri Oct 12 11:32:57 CEST 2018]; root of context hierarchy
11:32:57.400 [34mINFO [0;39m [36morg.ehcache.jsr107.Eh107CacheManager.registerObject:392[0;39m - Registering Ehcache MBean javax.cache:type=CacheStatistics,CacheManager=file./root/workspace/MerkulovAA/graduation/440307707/target/classes/cache/ehcache.xml,Cache=users
11:32:57.435 [34mINFO [0;39m [36mo.s.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory:361[0;39m - Building JPA container EntityManagerFactory for persistence unit 'default'
11:32:57.435 [34mINFO [0;39m [36morg.hibernate.jpa.internal.util.LogHelper.logPersistenceUnitInformation:31[0;39m - HHH000204: Processing PersistenceUnitInfo [
	name: default
	...]
11:32:57.468 [34mINFO [0;39m [36morg.hibernate.dialect.Dialect.<init>:157[0;39m - HHH000400: Using dialect: org.hibernate.dialect.HSQLDialect
11:32:57.756 [34mINFO [0;39m [36mo.s.orm.jpa.AbstractEntityManagerFactoryBean.buildNativeEntityManagerFactory:415[0;39m - Initialized JPA EntityManagerFactory for persistence unit 'default'
11:32:57.970 [34mINFO [0;39m [36mo.h.hql.internal.QueryTranslatorFactoryInitiator.initiateService:47[0;39m - HHH000397: Using ASTQueryTranslatorFactory
11:32:58.122 [34mINFO [0;39m [36mo.s.security.web.DefaultSecurityFilterChain.<init>:43[0;39m - Creating filter chain: Ant [pattern='/rest/**'], [org.springframework.security.web.context.SecurityContextPersistenceFilter@5b72b13a, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@6a6a3fc4, org.springframework.security.web.header.HeaderWriterFilter@6318ff9, org.springframework.security.web.authentication.www.BasicAuthenticationFilter@1812b564, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@2569afda, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@7683ea43, org.springframework.security.web.access.ExceptionTranslationFilter@6b063695, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@2643ed03]
11:32:58.406 [34mINFO [0;39m [36mo.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:444[0;39m - Executing SQL script from class path resource [db/initDB_hsql.sql]
11:32:58.453 [34mINFO [0;39m [36mo.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:510[0;39m - Executed SQL script from class path resource [db/initDB_hsql.sql] in 41 ms.
11:32:58.455 [34mINFO [0;39m [36mo.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:444[0;39m - Executing SQL script from class path resource [db/populateDB.sql]
11:32:58.460 [34mINFO [0;39m [36mo.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:510[0;39m - Executed SQL script from class path resource [db/populateDB.sql] in 5 ms.
11:32:58.547 [34mINFO [0;39m [36mo.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:444[0;39m - Executing SQL script from class path resource [db/populateDB.sql]
11:32:58.569 [34mINFO [0;39m [36mo.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:510[0;39m - Executed SQL script from class path resource [db/populateDB.sql] in 22 ms.
Hibernate: 
    /* DELETE 
    FROM
        Meal m 
    WHERE
        m.id=:id 
        AND m.restaurant.id=:restaurantId */ delete 
        from
            meals 
        where
            id=? 
            and restaurant_id=?
11:32:58.577 [31mWARN [0;39m [36mo.h.e.j.s.SqlExceptionHelper$StandardWarningHandler.logWarning:230[0;39m - SQL Warning Code: -1100, SQLState: 02000
11:32:58.584 [31mWARN [0;39m [36mo.h.e.j.s.SqlExceptionHelper$StandardWarningHandler.logWarning:231[0;39m - no data
11:32:58.593 [34mINFO [0;39m [36mo.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:444[0;39m - Executing SQL script from class path resource [db/populateDB.sql]
11:32:58.612 [34mINFO [0;39m [36mo.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:510[0;39m - Executed SQL script from class path resource [db/populateDB.sql] in 19 ms.
Hibernate: 
    /* SELECT
        m 
    FROM
        Meal m 
    WHERE
        m.restaurant.id=:restaurantId 
        AND m.created BETWEEN :startDate AND :endDate  
    ORDER BY
        m.created DESC */ select
            meal0_.id as id1_0_,
            meal0_.name as name2_0_,
            meal0_.created as created3_0_,
            meal0_.price as price4_0_,
            meal0_.restaurant_id as restaura5_0_ 
        from
            meals meal0_ 
        where
            meal0_.restaurant_id=? 
            and (
                meal0_.created between ? and ?
            ) 
        order by
            meal0_.created DESC
11:32:58.649 [34mINFO [0;39m [36mo.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:444[0;39m - Executing SQL script from class path resource [db/populateDB.sql]
11:32:58.667 [34mINFO [0;39m [36mo.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:510[0;39m - Executed SQL script from class path resource [db/populateDB.sql] in 17 ms.
Hibernate: 
    select
        meal0_.id as id1_0_0_,
        meal0_.name as name2_0_0_,
        meal0_.created as created3_0_0_,
        meal0_.price as price4_0_0_,
        meal0_.restaurant_id as restaura5_0_0_ 
    from
        meals meal0_ 
    where
        meal0_.id=?
11:32:58.684 [34mINFO [0;39m [36mo.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:444[0;39m - Executing SQL script from class path resource [db/populateDB.sql]
11:32:58.700 [34mINFO [0;39m [36mo.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:510[0;39m - Executed SQL script from class path resource [db/populateDB.sql] in 15 ms.
Hibernate: 
    select
        meal0_.id as id1_0_0_,
        meal0_.name as name2_0_0_,
        meal0_.created as created3_0_0_,
        meal0_.price as price4_0_0_,
        meal0_.restaurant_id as restaura5_0_0_ 
    from
        meals meal0_ 
    where
        meal0_.id=?
11:32:58.713 [34mINFO [0;39m [36mo.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:444[0;39m - Executing SQL script from class path resource [db/populateDB.sql]
11:32:58.727 [34mINFO [0;39m [36mo.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:510[0;39m - Executed SQL script from class path resource [db/populateDB.sql] in 14 ms.
Hibernate: 
    /* SELECT
        m 
    FROM
        Meal m 
    WHERE
        m.restaurant.id=:restaurantId 
        AND m.created=:date 
    ORDER BY
        m.created DESC */ select
            meal0_.id as id1_0_,
            meal0_.name as name2_0_,
            meal0_.created as created3_0_,
            meal0_.price as price4_0_,
            meal0_.restaurant_id as restaura5_0_ 
        from
            meals meal0_ 
        where
            meal0_.restaurant_id=? 
            and meal0_.created=? 
        order by
            meal0_.created DESC
11:32:58.743 [34mINFO [0;39m [36mo.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:444[0;39m - Executing SQL script from class path resource [db/populateDB.sql]
11:32:58.760 [34mINFO [0;39m [36mo.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:510[0;39m - Executed SQL script from class path resource [db/populateDB.sql] in 17 ms.
Hibernate: 
    call next value for global_seq
11:32:58.787 [1;31mERROR[0;39m [36morg.hibernate.internal.ExceptionMapperStandardImpl.mapManagedFlushFailure:39[0;39m - HHH000346: Error during managed flush [Validation failed for classes [ru.javawebinar.graduation.model.Meal] during persist time for groups [ru.javawebinar.graduation.View$Persist, ]
List of constraint violations:[
	ConstraintViolationImpl{interpolatedMessage='must not be blank', propertyPath=name, rootBeanClass=class ru.javawebinar.graduation.model.Meal, messageTemplate='{javax.validation.constraints.NotBlank.message}'}
	ConstraintViolationImpl{interpolatedMessage='size must be between 2 and 100', propertyPath=name, rootBeanClass=class ru.javawebinar.graduation.model.Meal, messageTemplate='{javax.validation.constraints.Size.message}'}
]]
Hibernate: 
    call next value for global_seq
11:32:58.792 [1;31mERROR[0;39m [36morg.hibernate.internal.ExceptionMapperStandardImpl.mapManagedFlushFailure:39[0;39m - HHH000346: Error during managed flush [Validation failed for classes [ru.javawebinar.graduation.model.Meal] during persist time for groups [ru.javawebinar.graduation.View$Persist, ]
List of constraint violations:[
	ConstraintViolationImpl{interpolatedMessage='size must be between 2 and 100', propertyPath=name, rootBeanClass=class ru.javawebinar.graduation.model.Meal, messageTemplate='{javax.validation.constraints.Size.message}'}
]]
Hibernate: 
    call next value for global_seq
11:32:58.808 [1;31mERROR[0;39m [36morg.hibernate.internal.ExceptionMapperStandardImpl.mapManagedFlushFailure:39[0;39m - HHH000346: Error during managed flush [Validation failed for classes [ru.javawebinar.graduation.model.Meal] during persist time for groups [ru.javawebinar.graduation.View$Persist, ]
List of constraint violations:[
	ConstraintViolationImpl{interpolatedMessage='must not be null', propertyPath=price, rootBeanClass=class ru.javawebinar.graduation.model.Meal, messageTemplate='{javax.validation.constraints.NotNull.message}'}
]]
11:32:58.816 [34mINFO [0;39m [36mo.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:444[0;39m - Executing SQL script from class path resource [db/populateDB.sql]
11:32:58.826 [34mINFO [0;39m [36mo.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:510[0;39m - Executed SQL script from class path resource [db/populateDB.sql] in 9 ms.
Hibernate: 
    /* SELECT
        m 
    FROM
        Meal m 
    WHERE
        m.restaurant.id=:restaurantId 
        AND m.created=:date 
    ORDER BY
        m.created DESC */ select
            meal0_.id as id1_0_,
            meal0_.name as name2_0_,
            meal0_.created as created3_0_,
            meal0_.price as price4_0_,
            meal0_.restaurant_id as restaura5_0_ 
        from
            meals meal0_ 
        where
            meal0_.restaurant_id=? 
            and meal0_.created=? 
        order by
            meal0_.created DESC
11:32:58.845 [34mINFO [0;39m [36mo.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:444[0;39m - Executing SQL script from class path resource [db/populateDB.sql]
11:32:58.858 [34mINFO [0;39m [36mo.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:510[0;39m - Executed SQL script from class path resource [db/populateDB.sql] in 12 ms.
Hibernate: 
    select
        meal0_.id as id1_0_0_,
        meal0_.name as name2_0_0_,
        meal0_.created as created3_0_0_,
        meal0_.price as price4_0_0_,
        meal0_.restaurant_id as restaura5_0_0_ 
    from
        meals meal0_ 
    where
        meal0_.id=?
11:32:58.888 [34mINFO [0;39m [36mo.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:444[0;39m - Executing SQL script from class path resource [db/populateDB.sql]
11:32:58.893 [34mINFO [0;39m [36mo.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:510[0;39m - Executed SQL script from class path resource [db/populateDB.sql] in 4 ms.
Hibernate: 
    call next value for global_seq
Hibernate: 
    /* insert ru.javawebinar.graduation.model.Meal
        */ insert 
        into
            meals
            (name, created, price, restaurant_id, id) 
        values
            (?, ?, ?, ?, ?)
Hibernate: 
    /* SELECT
        m 
    FROM
        Meal m 
    WHERE
        m.restaurant.id=:restaurantId 
    ORDER BY
        m.created DESC */ select
            meal0_.id as id1_0_,
            meal0_.name as name2_0_,
            meal0_.created as created3_0_,
            meal0_.price as price4_0_,
            meal0_.restaurant_id as restaura5_0_ 
        from
            meals meal0_ 
        where
            meal0_.restaurant_id=? 
        order by
            meal0_.created DESC
11:32:58.926 [34mINFO [0;39m [36mo.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:444[0;39m - Executing SQL script from class path resource [db/populateDB.sql]
11:32:58.931 [34mINFO [0;39m [36mo.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:510[0;39m - Executed SQL script from class path resource [db/populateDB.sql] in 4 ms.
Hibernate: 
    /* DELETE 
    FROM
        Meal m 
    WHERE
        m.id=:id 
        AND m.restaurant.id=:restaurantId */ delete 
        from
            meals 
        where
            id=? 
            and restaurant_id=?
Hibernate: 
    /* SELECT
        m 
    FROM
        Meal m 
    WHERE
        m.restaurant.id=:restaurantId 
    ORDER BY
        m.created DESC */ select
            meal0_.id as id1_0_,
            meal0_.name as name2_0_,
            meal0_.created as created3_0_,
            meal0_.price as price4_0_,
            meal0_.restaurant_id as restaura5_0_ 
        from
            meals meal0_ 
        where
            meal0_.restaurant_id=? 
        order by
            meal0_.created DESC
11:32:58.951 [34mINFO [0;39m [36mo.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:444[0;39m - Executing SQL script from class path resource [db/populateDB.sql]
11:32:58.958 [34mINFO [0;39m [36mo.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:510[0;39m - Executed SQL script from class path resource [db/populateDB.sql] in 6 ms.
Hibernate: 
    /* SELECT
        m 
    FROM
        Meal m 
    WHERE
        m.restaurant.id=:restaurantId 
    ORDER BY
        m.created DESC */ select
            meal0_.id as id1_0_,
            meal0_.name as name2_0_,
            meal0_.created as created3_0_,
            meal0_.price as price4_0_,
            meal0_.restaurant_id as restaura5_0_ 
        from
            meals meal0_ 
        where
            meal0_.restaurant_id=? 
        order by
            meal0_.created DESC
11:32:58.991 [34mINFO [0;39m [36mo.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:444[0;39m - Executing SQL script from class path resource [db/populateDB.sql]
11:32:59.008 [34mINFO [0;39m [36mo.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:510[0;39m - Executed SQL script from class path resource [db/populateDB.sql] in 10 ms.
Hibernate: 
    select
        meal0_.id as id1_0_0_,
        meal0_.name as name2_0_0_,
        meal0_.created as created3_0_0_,
        meal0_.price as price4_0_0_,
        meal0_.restaurant_id as restaura5_0_0_ 
    from
        meals meal0_ 
    where
        meal0_.id=?
Hibernate: 
    /* load ru.javawebinar.graduation.model.Meal */ select
        meal0_.id as id1_0_0_,
        meal0_.name as name2_0_0_,
        meal0_.created as created3_0_0_,
        meal0_.price as price4_0_0_,
        meal0_.restaurant_id as restaura5_0_0_ 
    from
        meals meal0_ 
    where
        meal0_.id=?
Hibernate: 
    /* update
        ru.javawebinar.graduation.model.Meal */ update
            meals 
        set
            name=?,
            created=?,
            price=?,
            restaurant_id=? 
        where
            id=?
Hibernate: 
    select
        meal0_.id as id1_0_0_,
        meal0_.name as name2_0_0_,
        meal0_.created as created3_0_0_,
        meal0_.price as price4_0_0_,
        meal0_.restaurant_id as restaura5_0_0_ 
    from
        meals meal0_ 
    where
        meal0_.id=?
[INFO] Tests run: 12, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 2.158 s - in ru.javawebinar.graduation.service.MealServiceImplTest
[INFO] Running ru.javawebinar.graduation.service.RestaurantServiceImplTest
11:32:59.063 [34mINFO [0;39m [36mo.s.t.c.support.AbstractTestContextBootstrapper.getDefaultTestExecutionListenerClassNames:248[0;39m - Loaded default TestExecutionListener class names from location [META-INF/spring.factories]: [org.springframework.security.test.context.support.WithSecurityContextTestExecutionListener, org.springframework.security.test.context.support.ReactorContextTestExecutionListener, org.springframework.test.context.web.ServletTestExecutionListener, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener, org.springframework.test.context.support.DependencyInjectionTestExecutionListener, org.springframework.test.context.support.DirtiesContextTestExecutionListener, org.springframework.test.context.transaction.TransactionalTestExecutionListener, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener]
11:32:59.065 [34mINFO [0;39m [36mo.s.t.c.support.AbstractTestContextBootstrapper.getTestExecutionListeners:177[0;39m - Using TestExecutionListeners: [org.springframework.test.context.web.ServletTestExecutionListener@7f09ff10, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener@531b1778, org.springframework.test.context.support.DependencyInjectionTestExecutionListener@ecfff32, org.springframework.test.context.support.DirtiesContextTestExecutionListener@3c65f2e1, org.springframework.test.context.transaction.TransactionalTestExecutionListener@c247b02, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener@78f1d29, org.springframework.security.test.context.support.WithSecurityContextTestExecutionListener@76c85485, org.springframework.security.test.context.support.ReactorContextTestExecutionListener@65294247]
11:32:59.093 [34mINFO [0;39m [36mo.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:444[0;39m - Executing SQL script from class path resource [db/populateDB.sql]
11:32:59.097 [34mINFO [0;39m [36mo.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:510[0;39m - Executed SQL script from class path resource [db/populateDB.sql] in 3 ms.
Hibernate: 
    /* SELECT
        r 
    FROM
        Restaurant r 
    LEFT JOIN
        FETCH r.meals m 
    WHERE
        r.id=:id 
        AND m.created=:date */ select
            restaurant0_.id as id1_1_0_,
            meals1_.id as id1_0_1_,
            restaurant0_.name as name2_1_0_,
            meals1_.name as name2_0_1_,
            meals1_.created as created3_0_1_,
            meals1_.price as price4_0_1_,
            meals1_.restaurant_id as restaura5_0_1_,
            meals1_.restaurant_id as restaura5_0_0__,
            meals1_.id as id1_0_0__ 
        from
            restaurants restaurant0_ 
        left outer join
            meals meals1_ 
                on restaurant0_.id=meals1_.restaurant_id 
        where
            restaurant0_.id=? 
            and meals1_.created=? 
        order by
            meals1_.created desc
11:32:59.116 [34mINFO [0;39m [36mo.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:444[0;39m - Executing SQL script from class path resource [db/populateDB.sql]
11:32:59.128 [34mINFO [0;39m [36mo.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:510[0;39m - Executed SQL script from class path resource [db/populateDB.sql] in 12 ms.
Hibernate: 
    /* DELETE 
    FROM
        Restaurant r 
    WHERE
        r.id=:id */ delete 
        from
            restaurants 
        where
            id=?
11:32:59.134 [31mWARN [0;39m [36mo.h.e.j.s.SqlExceptionHelper$StandardWarningHandler.logWarning:230[0;39m - SQL Warning Code: -1100, SQLState: 02000
11:32:59.136 [31mWARN [0;39m [36mo.h.e.j.s.SqlExceptionHelper$StandardWarningHandler.logWarning:231[0;39m - no data
11:32:59.143 [34mINFO [0;39m [36mo.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:444[0;39m - Executing SQL script from class path resource [db/populateDB.sql]
11:32:59.150 [34mINFO [0;39m [36mo.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:510[0;39m - Executed SQL script from class path resource [db/populateDB.sql] in 5 ms.
Hibernate: 
    select
        restaurant0_.id as id1_1_0_,
        restaurant0_.name as name2_1_0_ 
    from
        restaurants restaurant0_ 
    where
        restaurant0_.id=?
11:32:59.173 [34mINFO [0;39m [36mo.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:444[0;39m - Executing SQL script from class path resource [db/populateDB.sql]
11:32:59.178 [34mINFO [0;39m [36mo.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:510[0;39m - Executed SQL script from class path resource [db/populateDB.sql] in 3 ms.
Hibernate: 
    select
        restaurant0_.id as id1_1_0_,
        restaurant0_.name as name2_1_0_ 
    from
        restaurants restaurant0_ 
    where
        restaurant0_.id=?
11:32:59.194 [34mINFO [0;39m [36mo.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:444[0;39m - Executing SQL script from class path resource [db/populateDB.sql]
11:32:59.199 [34mINFO [0;39m [36mo.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:510[0;39m - Executed SQL script from class path resource [db/populateDB.sql] in 4 ms.
Hibernate: 
    call next value for global_seq
11:32:59.221 [1;31mERROR[0;39m [36morg.hibernate.internal.ExceptionMapperStandardImpl.mapManagedFlushFailure:39[0;39m - HHH000346: Error during managed flush [Validation failed for classes [ru.javawebinar.graduation.model.Restaurant] during persist time for groups [ru.javawebinar.graduation.View$Persist, ]
List of constraint violations:[
	ConstraintViolationImpl{interpolatedMessage='must not be blank', propertyPath=name, rootBeanClass=class ru.javawebinar.graduation.model.Restaurant, messageTemplate='{javax.validation.constraints.NotBlank.message}'}
]]
Hibernate: 
    call next value for global_seq
11:32:59.232 [1;31mERROR[0;39m [36morg.hibernate.internal.ExceptionMapperStandardImpl.mapManagedFlushFailure:39[0;39m - HHH000346: Error during managed flush [Validation failed for classes [ru.javawebinar.graduation.model.Restaurant] during persist time for groups [ru.javawebinar.graduation.View$Persist, ]
List of constraint violations:[
	ConstraintViolationImpl{interpolatedMessage='size must be between 2 and 100', propertyPath=name, rootBeanClass=class ru.javawebinar.graduation.model.Restaurant, messageTemplate='{javax.validation.constraints.Size.message}'}
]]
11:32:59.237 [34mINFO [0;39m [36mo.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:444[0;39m - Executing SQL script from class path resource [db/populateDB.sql]
11:32:59.248 [34mINFO [0;39m [36mo.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:510[0;39m - Executed SQL script from class path resource [db/populateDB.sql] in 3 ms.
Hibernate: 
    /* select
        generatedAlias0 
    from
        Restaurant as generatedAlias0 
    where
        generatedAlias0.name=:param0 */ select
            restaurant0_.id as id1_1_,
            restaurant0_.name as name2_1_ 
        from
            restaurants restaurant0_ 
        where
            restaurant0_.name=?
11:32:59.279 [34mINFO [0;39m [36mo.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:444[0;39m - Executing SQL script from class path resource [db/populateDB.sql]
11:32:59.283 [34mINFO [0;39m [36mo.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:510[0;39m - Executed SQL script from class path resource [db/populateDB.sql] in 4 ms.
Hibernate: 
    /* select
        generatedAlias0 
    from
        Restaurant as generatedAlias0 
    where
        generatedAlias0.name=:param0 */ select
            restaurant0_.id as id1_1_,
            restaurant0_.name as name2_1_ 
        from
            restaurants restaurant0_ 
        where
            restaurant0_.name=?
11:32:59.291 [34mINFO [0;39m [36mo.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:444[0;39m - Executing SQL script from class path resource [db/populateDB.sql]
11:32:59.295 [34mINFO [0;39m [36mo.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:510[0;39m - Executed SQL script from class path resource [db/populateDB.sql] in 3 ms.
Hibernate: 
    select
        restaurant0_.id as id1_1_0_,
        restaurant0_.name as name2_1_0_ 
    from
        restaurants restaurant0_ 
    where
        restaurant0_.id=?
11:32:59.302 [34mINFO [0;39m [36mo.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:444[0;39m - Executing SQL script from class path resource [db/populateDB.sql]
11:32:59.305 [34mINFO [0;39m [36mo.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:510[0;39m - Executed SQL script from class path resource [db/populateDB.sql] in 2 ms.
Hibernate: 
    /* SELECT
        DISTINCT r 
    FROM
        Restaurant r 
    LEFT JOIN
        FETCH r.meals m 
    WHERE
        m.created=:date 
    ORDER BY
        r.name ASC */ select
            distinct restaurant0_.id as id1_1_0_,
            meals1_.id as id1_0_1_,
            restaurant0_.name as name2_1_0_,
            meals1_.name as name2_0_1_,
            meals1_.created as created3_0_1_,
            meals1_.price as price4_0_1_,
            meals1_.restaurant_id as restaura5_0_1_,
            meals1_.restaurant_id as restaura5_0_0__,
            meals1_.id as id1_0_0__ 
        from
            restaurants restaurant0_ 
        left outer join
            meals meals1_ 
                on restaurant0_.id=meals1_.restaurant_id 
        where
            meals1_.created=? 
        order by
            restaurant0_.name ASC,
            meals1_.created desc
11:32:59.317 [34mINFO [0;39m [36mo.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:444[0;39m - Executing SQL script from class path resource [db/populateDB.sql]
11:32:59.320 [34mINFO [0;39m [36mo.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:510[0;39m - Executed SQL script from class path resource [db/populateDB.sql] in 2 ms.
Hibernate: 
    call next value for global_seq
Hibernate: 
    /* insert ru.javawebinar.graduation.model.Restaurant
        */ insert 
        into
            restaurants
            (name, id) 
        values
            (?, ?)
Hibernate: 
    /* select
        generatedAlias0 
    from
        Restaurant as generatedAlias0 
    order by
        generatedAlias0.name asc */ select
            restaurant0_.id as id1_1_,
            restaurant0_.name as name2_1_ 
        from
            restaurants restaurant0_ 
        order by
            restaurant0_.name asc
11:32:59.332 [34mINFO [0;39m [36mo.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:444[0;39m - Executing SQL script from class path resource [db/populateDB.sql]
11:32:59.335 [34mINFO [0;39m [36mo.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:510[0;39m - Executed SQL script from class path resource [db/populateDB.sql] in 2 ms.
Hibernate: 
    /* DELETE 
    FROM
        Restaurant r 
    WHERE
        r.id=:id */ delete 
        from
            restaurants 
        where
            id=?
Hibernate: 
    /* select
        generatedAlias0 
    from
        Restaurant as generatedAlias0 
    order by
        generatedAlias0.name asc */ select
            restaurant0_.id as id1_1_,
            restaurant0_.name as name2_1_ 
        from
            restaurants restaurant0_ 
        order by
            restaurant0_.name asc
11:32:59.344 [34mINFO [0;39m [36mo.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:444[0;39m - Executing SQL script from class path resource [db/populateDB.sql]
11:32:59.347 [34mINFO [0;39m [36mo.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:510[0;39m - Executed SQL script from class path resource [db/populateDB.sql] in 3 ms.
11:32:59.347 [31mWARN [0;39m [36mo.h.e.j.s.SqlExceptionHelper$StandardWarningHandler.logWarning:230[0;39m - SQL Warning Code: -1100, SQLState: 02000
11:32:59.348 [31mWARN [0;39m [36mo.h.e.j.s.SqlExceptionHelper$StandardWarningHandler.logWarning:231[0;39m - no data
Hibernate: 
    /* select
        generatedAlias0 
    from
        Restaurant as generatedAlias0 
    order by
        generatedAlias0.name asc */ select
            restaurant0_.id as id1_1_,
            restaurant0_.name as name2_1_ 
        from
            restaurants restaurant0_ 
        order by
            restaurant0_.name asc
11:32:59.355 [34mINFO [0;39m [36mo.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:444[0;39m - Executing SQL script from class path resource [db/populateDB.sql]
11:32:59.358 [34mINFO [0;39m [36mo.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:510[0;39m - Executed SQL script from class path resource [db/populateDB.sql] in 2 ms.
Hibernate: 
    select
        restaurant0_.id as id1_1_0_,
        restaurant0_.name as name2_1_0_ 
    from
        restaurants restaurant0_ 
    where
        restaurant0_.id=?
Hibernate: 
    /* load ru.javawebinar.graduation.model.Restaurant */ select
        restaurant0_.id as id1_1_0_,
        restaurant0_.name as name2_1_0_ 
    from
        restaurants restaurant0_ 
    where
        restaurant0_.id=?
Hibernate: 
    /* update
        ru.javawebinar.graduation.model.Restaurant */ update
            restaurants 
        set
            name=? 
        where
            id=?
Hibernate: 
    select
        restaurant0_.id as id1_1_0_,
        restaurant0_.name as name2_1_0_ 
    from
        restaurants restaurant0_ 
    where
        restaurant0_.id=?
11:32:59.376 [34mINFO [0;39m [36mo.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:444[0;39m - Executing SQL script from class path resource [db/populateDB.sql]
11:32:59.379 [34mINFO [0;39m [36mo.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:510[0;39m - Executed SQL script from class path resource [db/populateDB.sql] in 3 ms.
Hibernate: 
    /* SELECT
        r 
    FROM
        Restaurant r 
    LEFT JOIN
        FETCH r.meals m 
    WHERE
        r.id=:id 
        AND m.created=:date */ select
            restaurant0_.id as id1_1_0_,
            meals1_.id as id1_0_1_,
            restaurant0_.name as name2_1_0_,
            meals1_.name as name2_0_1_,
            meals1_.created as created3_0_1_,
            meals1_.price as price4_0_1_,
            meals1_.restaurant_id as restaura5_0_1_,
            meals1_.restaurant_id as restaura5_0_0__,
            meals1_.id as id1_0_0__ 
        from
            restaurants restaurant0_ 
        left outer join
            meals meals1_ 
                on restaurant0_.id=meals1_.restaurant_id 
        where
            restaurant0_.id=? 
            and meals1_.created=? 
        order by
            meals1_.created desc
[INFO] Tests run: 14, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.327 s - in ru.javawebinar.graduation.service.RestaurantServiceImplTest
[INFO] Running ru.javawebinar.graduation.service.VoteServiceImplTest
11:32:59.393 [34mINFO [0;39m [36mo.s.t.c.support.AbstractTestContextBootstrapper.getDefaultTestExecutionListenerClassNames:248[0;39m - Loaded default TestExecutionListener class names from location [META-INF/spring.factories]: [org.springframework.security.test.context.support.WithSecurityContextTestExecutionListener, org.springframework.security.test.context.support.ReactorContextTestExecutionListener, org.springframework.test.context.web.ServletTestExecutionListener, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener, org.springframework.test.context.support.DependencyInjectionTestExecutionListener, org.springframework.test.context.support.DirtiesContextTestExecutionListener, org.springframework.test.context.transaction.TransactionalTestExecutionListener, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener]
11:32:59.394 [34mINFO [0;39m [36mo.s.t.c.support.AbstractTestContextBootstrapper.getTestExecutionListeners:177[0;39m - Using TestExecutionListeners: [org.springframework.test.context.web.ServletTestExecutionListener@2d527346, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener@451cef67, org.springframework.test.context.support.DependencyInjectionTestExecutionListener@11fb1691, org.springframework.test.context.support.DirtiesContextTestExecutionListener@1f229c40, org.springframework.test.context.transaction.TransactionalTestExecutionListener@215404a1, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener@391b03b, org.springframework.security.test.context.support.WithSecurityContextTestExecutionListener@4a977146, org.springframework.security.test.context.support.ReactorContextTestExecutionListener@41dc34c8]
11:32:59.402 [34mINFO [0;39m [36mo.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:444[0;39m - Executing SQL script from class path resource [db/populateDB.sql]
11:32:59.414 [34mINFO [0;39m [36mo.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:510[0;39m - Executed SQL script from class path resource [db/populateDB.sql] in 11 ms.
Hibernate: 
    select
        restaurant0_.id as id1_1_0_,
        restaurant0_.name as name2_1_0_ 
    from
        restaurants restaurant0_ 
    where
        restaurant0_.id=?
Hibernate: 
    /* select
        generatedAlias0 
    from
        Vote as generatedAlias0 
    left join
        generatedAlias0.user as generatedAlias1 
    where
        (
            generatedAlias1.id=:param0 
        ) 
        and (
            generatedAlias0.voted=:param1 
        ) */ select
            vote0_.id as id1_4_,
            vote0_.restaurant_id as restaura3_4_,
            vote0_.user_id as user_id4_4_,
            vote0_.voted as voted2_4_ 
        from
            votes vote0_ 
        left outer join
            users user1_ 
                on vote0_.user_id=user1_.id 
        where
            user1_.id=? 
            and vote0_.voted=?
Hibernate: 
    call next value for global_seq
Hibernate: 
    /* insert ru.javawebinar.graduation.model.Vote
        */ insert 
        into
            votes
            (restaurant_id, user_id, voted, id) 
        values
            (?, ?, ?, ?)
[INFO] Tests run: 1, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.053 s - in ru.javawebinar.graduation.service.VoteServiceImplTest
[INFO] Running ru.javawebinar.graduation.service.UserServiceImplTest
11:32:59.457 [34mINFO [0;39m [36mo.s.t.c.support.AbstractTestContextBootstrapper.getDefaultTestExecutionListenerClassNames:248[0;39m - Loaded default TestExecutionListener class names from location [META-INF/spring.factories]: [org.springframework.security.test.context.support.WithSecurityContextTestExecutionListener, org.springframework.security.test.context.support.ReactorContextTestExecutionListener, org.springframework.test.context.web.ServletTestExecutionListener, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener, org.springframework.test.context.support.DependencyInjectionTestExecutionListener, org.springframework.test.context.support.DirtiesContextTestExecutionListener, org.springframework.test.context.transaction.TransactionalTestExecutionListener, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener]
11:32:59.458 [34mINFO [0;39m [36mo.s.t.c.support.AbstractTestContextBootstrapper.getTestExecutionListeners:177[0;39m - Using TestExecutionListeners: [org.springframework.test.context.web.ServletTestExecutionListener@5b2fc2c0, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener@33197c2f, org.springframework.test.context.support.DependencyInjectionTestExecutionListener@24e79a4d, org.springframework.test.context.support.DirtiesContextTestExecutionListener@5542418c, org.springframework.test.context.transaction.TransactionalTestExecutionListener@705eb026, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener@8de4206, org.springframework.security.test.context.support.WithSecurityContextTestExecutionListener@10f384a2, org.springframework.security.test.context.support.ReactorContextTestExecutionListener@57fae911]
11:32:59.472 [34mINFO [0;39m [36mo.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:444[0;39m - Executing SQL script from class path resource [db/populateDB.sql]
11:32:59.475 [34mINFO [0;39m [36mo.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:510[0;39m - Executed SQL script from class path resource [db/populateDB.sql] in 3 ms.
Hibernate: 
    select
        user0_.id as id1_3_0_,
        user0_.name as name2_3_0_,
        user0_.email as email3_3_0_,
        user0_.enabled as enabled4_3_0_,
        user0_.password as password5_3_0_,
        user0_.registered as register6_3_0_,
        roles1_.user_id as user_id1_2_1_,
        roles1_.role as role2_2_1_ 
    from
        users user0_ 
    left outer join
        user_roles roles1_ 
            on user0_.id=roles1_.user_id 
    where
        user0_.id=?
11:32:59.488 [34mINFO [0;39m [36mo.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:444[0;39m - Executing SQL script from class path resource [db/populateDB.sql]
11:32:59.491 [34mINFO [0;39m [36mo.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:510[0;39m - Executed SQL script from class path resource [db/populateDB.sql] in 2 ms.
Hibernate: 
    select
        user0_.id as id1_3_0_,
        user0_.name as name2_3_0_,
        user0_.email as email3_3_0_,
        user0_.enabled as enabled4_3_0_,
        user0_.password as password5_3_0_,
        user0_.registered as register6_3_0_,
        roles1_.user_id as user_id1_2_1_,
        roles1_.role as role2_2_1_ 
    from
        users user0_ 
    left outer join
        user_roles roles1_ 
            on user0_.id=roles1_.user_id 
    where
        user0_.id=?
11:32:59.501 [34mINFO [0;39m [36mo.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:444[0;39m - Executing SQL script from class path resource [db/populateDB.sql]
11:32:59.504 [34mINFO [0;39m [36mo.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:510[0;39m - Executed SQL script from class path resource [db/populateDB.sql] in 3 ms.
Hibernate: 
    call next value for global_seq
11:32:59.667 [1;31mERROR[0;39m [36morg.hibernate.internal.ExceptionMapperStandardImpl.mapManagedFlushFailure:39[0;39m - HHH000346: Error during managed flush [Validation failed for classes [ru.javawebinar.graduation.model.User] during persist time for groups [ru.javawebinar.graduation.View$Persist, ]
List of constraint violations:[
	ConstraintViolationImpl{interpolatedMessage='must not be blank', propertyPath=name, rootBeanClass=class ru.javawebinar.graduation.model.User, messageTemplate='{javax.validation.constraints.NotBlank.message}'}
]]
Hibernate: 
    call next value for global_seq
11:32:59.847 [1;31mERROR[0;39m [36morg.hibernate.internal.ExceptionMapperStandardImpl.mapManagedFlushFailure:39[0;39m - HHH000346: Error during managed flush [Validation failed for classes [ru.javawebinar.graduation.model.User] during persist time for groups [ru.javawebinar.graduation.View$Persist, ]
List of constraint violations:[
	ConstraintViolationImpl{interpolatedMessage='must not be blank', propertyPath=email, rootBeanClass=class ru.javawebinar.graduation.model.User, messageTemplate='{javax.validation.constraints.NotBlank.message}'}
]]
Hibernate: 
    call next value for global_seq
11:32:59.854 [1;31mERROR[0;39m [36morg.hibernate.internal.ExceptionMapperStandardImpl.mapManagedFlushFailure:39[0;39m - HHH000346: Error during managed flush [Validation failed for classes [ru.javawebinar.graduation.model.User] during persist time for groups [ru.javawebinar.graduation.View$Persist, ]
List of constraint violations:[
	ConstraintViolationImpl{interpolatedMessage='must not be blank', propertyPath=password, rootBeanClass=class ru.javawebinar.graduation.model.User, messageTemplate='{javax.validation.constraints.NotBlank.message}'}
	ConstraintViolationImpl{interpolatedMessage='size must be between 5 and 100', propertyPath=password, rootBeanClass=class ru.javawebinar.graduation.model.User, messageTemplate='{javax.validation.constraints.Size.message}'}
]]
Hibernate: 
    call next value for global_seq
11:33:00.031 [1;31mERROR[0;39m [36morg.hibernate.internal.ExceptionMapperStandardImpl.mapManagedFlushFailure:39[0;39m - HHH000346: Error during managed flush [Validation failed for classes [ru.javawebinar.graduation.model.User] during persist time for groups [ru.javawebinar.graduation.View$Persist, ]
List of constraint violations:[
	ConstraintViolationImpl{interpolatedMessage='must be a well-formed email address', propertyPath=email, rootBeanClass=class ru.javawebinar.graduation.model.User, messageTemplate='{javax.validation.constraints.Email.message}'}
]]
11:33:00.036 [34mINFO [0;39m [36mo.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:444[0;39m - Executing SQL script from class path resource [db/populateDB.sql]
11:33:00.041 [34mINFO [0;39m [36mo.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:510[0;39m - Executed SQL script from class path resource [db/populateDB.sql] in 5 ms.
Hibernate: 
    /* DELETE 
    FROM
        User u 
    WHERE
        u.id=:id */ delete 
        from
            users 
        where
            id=?
11:33:00.046 [31mWARN [0;39m [36mo.h.e.j.s.SqlExceptionHelper$StandardWarningHandler.logWarning:230[0;39m - SQL Warning Code: -1100, SQLState: 02000
11:33:00.046 [31mWARN [0;39m [36mo.h.e.j.s.SqlExceptionHelper$StandardWarningHandler.logWarning:231[0;39m - no data
11:33:00.051 [34mINFO [0;39m [36mo.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:444[0;39m - Executing SQL script from class path resource [db/populateDB.sql]
11:33:00.070 [34mINFO [0;39m [36mo.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:510[0;39m - Executed SQL script from class path resource [db/populateDB.sql] in 19 ms.
Hibernate: 
    call next value for global_seq
Hibernate: 
    /* insert ru.javawebinar.graduation.model.User
        */ insert 
        into
            users
            (name, email, enabled, password, registered, id) 
        values
            (?, ?, ?, ?, ?, ?)
11:33:00.275 [31mWARN [0;39m [36morg.hibernate.engine.jdbc.spi.SqlExceptionHelper.logExceptions:137[0;39m - SQL Error: -104, SQLState: 23505
11:33:00.275 [1;31mERROR[0;39m [36morg.hibernate.engine.jdbc.spi.SqlExceptionHelper.logExceptions:142[0;39m - integrity constraint violation: unique constraint or index violation: USERS_UNIQUE_EMAIL_IDX
11:33:00.276 [1;31mERROR[0;39m [36morg.hibernate.internal.ExceptionMapperStandardImpl.mapManagedFlushFailure:39[0;39m - HHH000346: Error during managed flush [org.hibernate.exception.ConstraintViolationException: could not execute statement]
11:33:00.281 [34mINFO [0;39m [36mo.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:444[0;39m - Executing SQL script from class path resource [db/populateDB.sql]
11:33:00.287 [34mINFO [0;39m [36mo.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:510[0;39m - Executed SQL script from class path resource [db/populateDB.sql] in 5 ms.
Hibernate: 
    /* select
        generatedAlias0 
    from
        User as generatedAlias0 
    where
        generatedAlias0.email=:param0 */ select
            user0_.id as id1_3_,
            user0_.name as name2_3_,
            user0_.email as email3_3_,
            user0_.enabled as enabled4_3_,
            user0_.password as password5_3_,
            user0_.registered as register6_3_ 
        from
            users user0_ 
        where
            user0_.email=?
Hibernate: 
    /* load collection ru.javawebinar.graduation.model.User.roles */ select
        roles0_.user_id as user_id1_2_0_,
        roles0_.role as role2_2_0_ 
    from
        user_roles roles0_ 
    where
        roles0_.user_id=?
11:33:00.315 [34mINFO [0;39m [36mo.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:444[0;39m - Executing SQL script from class path resource [db/populateDB.sql]
11:33:00.333 [34mINFO [0;39m [36mo.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:510[0;39m - Executed SQL script from class path resource [db/populateDB.sql] in 18 ms.
Hibernate: 
    call next value for global_seq
Hibernate: 
    /* insert ru.javawebinar.graduation.model.User
        */ insert 
        into
            users
            (name, email, enabled, password, registered, id) 
        values
            (?, ?, ?, ?, ?, ?)
Hibernate: 
    /* insert collection
        row ru.javawebinar.graduation.model.User.roles */ insert 
        into
            user_roles
            (user_id, role) 
        values
            (?, ?)
Hibernate: 
    /* select
        generatedAlias0 
    from
        User as generatedAlias0 
    order by
        generatedAlias0.name asc,
        generatedAlias0.email asc */ select
            user0_.id as id1_3_,
            user0_.name as name2_3_,
            user0_.email as email3_3_,
            user0_.enabled as enabled4_3_,
            user0_.password as password5_3_,
            user0_.registered as register6_3_ 
        from
            users user0_ 
        order by
            user0_.name asc,
            user0_.email asc
Hibernate: 
    /* load collection ru.javawebinar.graduation.model.User.roles */ select
        roles0_.user_id as user_id1_2_0_,
        roles0_.role as role2_2_0_ 
    from
        user_roles roles0_ 
    where
        roles0_.user_id in (
            ?, ?, ?
        )
11:33:00.654 [34mINFO [0;39m [36mo.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:444[0;39m - Executing SQL script from class path resource [db/populateDB.sql]
11:33:00.670 [34mINFO [0;39m [36mo.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:510[0;39m - Executed SQL script from class path resource [db/populateDB.sql] in 16 ms.
Hibernate: 
    /* DELETE 
    FROM
        User u 
    WHERE
        u.id=:id */ delete 
        from
            users 
        where
            id=?
Hibernate: 
    /* select
        generatedAlias0 
    from
        User as generatedAlias0 
    order by
        generatedAlias0.name asc,
        generatedAlias0.email asc */ select
            user0_.id as id1_3_,
            user0_.name as name2_3_,
            user0_.email as email3_3_,
            user0_.enabled as enabled4_3_,
            user0_.password as password5_3_,
            user0_.registered as register6_3_ 
        from
            users user0_ 
        order by
            user0_.name asc,
            user0_.email asc
Hibernate: 
    /* load collection ru.javawebinar.graduation.model.User.roles */ select
        roles0_.user_id as user_id1_2_0_,
        roles0_.role as role2_2_0_ 
    from
        user_roles roles0_ 
    where
        roles0_.user_id=?
11:33:00.689 [34mINFO [0;39m [36mo.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:444[0;39m - Executing SQL script from class path resource [db/populateDB.sql]
11:33:00.694 [34mINFO [0;39m [36mo.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:510[0;39m - Executed SQL script from class path resource [db/populateDB.sql] in 4 ms.
Hibernate: 
    select
        user0_.id as id1_3_0_,
        user0_.name as name2_3_0_,
        user0_.email as email3_3_0_,
        user0_.enabled as enabled4_3_0_,
        user0_.password as password5_3_0_,
        user0_.registered as register6_3_0_,
        roles1_.user_id as user_id1_2_1_,
        roles1_.role as role2_2_1_ 
    from
        users user0_ 
    left outer join
        user_roles roles1_ 
            on user0_.id=roles1_.user_id 
    where
        user0_.id=?
Hibernate: 
    /* update
        ru.javawebinar.graduation.model.User */ update
            users 
        set
            name=?,
            email=?,
            enabled=?,
            password=?,
            registered=? 
        where
            id=?
Hibernate: 
    select
        user0_.id as id1_3_0_,
        user0_.name as name2_3_0_,
        user0_.email as email3_3_0_,
        user0_.enabled as enabled4_3_0_,
        user0_.password as password5_3_0_,
        user0_.registered as register6_3_0_,
        roles1_.user_id as user_id1_2_1_,
        roles1_.role as role2_2_1_ 
    from
        users user0_ 
    left outer join
        user_roles roles1_ 
            on user0_.id=roles1_.user_id 
    where
        user0_.id=?
Hibernate: 
    /* update
        ru.javawebinar.graduation.model.User */ update
            users 
        set
            name=?,
            email=?,
            enabled=?,
            password=?,
            registered=? 
        where
            id=?
Hibernate: 
    select
        user0_.id as id1_3_0_,
        user0_.name as name2_3_0_,
        user0_.email as email3_3_0_,
        user0_.enabled as enabled4_3_0_,
        user0_.password as password5_3_0_,
        user0_.registered as register6_3_0_,
        roles1_.user_id as user_id1_2_1_,
        roles1_.role as role2_2_1_ 
    from
        users user0_ 
    left outer join
        user_roles roles1_ 
            on user0_.id=roles1_.user_id 
    where
        user0_.id=?
11:33:00.766 [34mINFO [0;39m [36mo.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:444[0;39m - Executing SQL script from class path resource [db/populateDB.sql]
11:33:00.770 [34mINFO [0;39m [36mo.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:510[0;39m - Executed SQL script from class path resource [db/populateDB.sql] in 2 ms.
Hibernate: 
    /* select
        generatedAlias0 
    from
        User as generatedAlias0 
    order by
        generatedAlias0.name asc,
        generatedAlias0.email asc */ select
            user0_.id as id1_3_,
            user0_.name as name2_3_,
            user0_.email as email3_3_,
            user0_.enabled as enabled4_3_,
            user0_.password as password5_3_,
            user0_.registered as register6_3_ 
        from
            users user0_ 
        order by
            user0_.name asc,
            user0_.email asc
Hibernate: 
    /* load collection ru.javawebinar.graduation.model.User.roles */ select
        roles0_.user_id as user_id1_2_0_,
        roles0_.role as role2_2_0_ 
    from
        user_roles roles0_ 
    where
        roles0_.user_id in (
            ?, ?
        )
11:33:00.796 [34mINFO [0;39m [36mo.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:444[0;39m - Executing SQL script from class path resource [db/populateDB.sql]
11:33:00.800 [34mINFO [0;39m [36mo.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:510[0;39m - Executed SQL script from class path resource [db/populateDB.sql] in 4 ms.
Hibernate: 
    /* load ru.javawebinar.graduation.model.User */ select
        user0_.id as id1_3_0_,
        user0_.name as name2_3_0_,
        user0_.email as email3_3_0_,
        user0_.enabled as enabled4_3_0_,
        user0_.password as password5_3_0_,
        user0_.registered as register6_3_0_ 
    from
        users user0_ 
    where
        user0_.id=?
Hibernate: 
    /* load collection ru.javawebinar.graduation.model.User.roles */ select
        roles0_.user_id as user_id1_2_0_,
        roles0_.role as role2_2_0_ 
    from
        user_roles roles0_ 
    where
        roles0_.user_id=?
Hibernate: 
    /* update
        ru.javawebinar.graduation.model.User */ update
            users 
        set
            name=?,
            email=?,
            enabled=?,
            password=?,
            registered=? 
        where
            id=?
Hibernate: 
    /* delete collection row ru.javawebinar.graduation.model.User.roles */ delete 
        from
            user_roles 
        where
            user_id=? 
            and role=?
Hibernate: 
    /* insert collection
        row ru.javawebinar.graduation.model.User.roles */ insert 
        into
            user_roles
            (user_id, role) 
        values
            (?, ?)
Hibernate: 
    select
        user0_.id as id1_3_0_,
        user0_.name as name2_3_0_,
        user0_.email as email3_3_0_,
        user0_.enabled as enabled4_3_0_,
        user0_.password as password5_3_0_,
        user0_.registered as register6_3_0_,
        roles1_.user_id as user_id1_2_1_,
        roles1_.role as role2_2_1_ 
    from
        users user0_ 
    left outer join
        user_roles roles1_ 
            on user0_.id=roles1_.user_id 
    where
        user0_.id=?
[INFO] Tests run: 11, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 1.554 s - in ru.javawebinar.graduation.service.UserServiceImplTest
11:33:01.053 [34mINFO [0;39m [36mo.s.context.support.AbstractApplicationContext.doClose:993[0;39m - Closing org.springframework.web.context.support.GenericWebApplicationContext@6b2ea799: startup date [Fri Oct 12 11:32:41 CEST 2018]; root of context hierarchy
11:33:01.069 [34mINFO [0;39m [36mo.s.context.support.AbstractApplicationContext.doClose:993[0;39m - Closing org.springframework.context.support.GenericApplicationContext@27f31d91: startup date [Fri Oct 12 11:32:57 CEST 2018]; root of context hierarchy
11:33:01.132 [34mINFO [0;39m [36mo.s.orm.jpa.AbstractEntityManagerFactoryBean.destroy:597[0;39m - Closing JPA EntityManagerFactory for persistence unit 'default'
11:33:01.146 [34mINFO [0;39m [36morg.ehcache.core.EhcacheManager.removeCache:207[0;39m - Cache 'ru.javawebinar.graduation.model.User' removed from Eh107InternalCacheManager.
11:33:01.165 [34mINFO [0;39m [36mo.s.orm.jpa.AbstractEntityManagerFactoryBean.destroy:597[0;39m - Closing JPA EntityManagerFactory for persistence unit 'default'
11:33:01.165 [34mINFO [0;39m [36morg.ehcache.core.EhcacheManager.removeCache:207[0;39m - Cache 'ru.javawebinar.graduation.model.User.roles' removed from Eh107InternalCacheManager.
11:33:01.195 [34mINFO [0;39m [36morg.ehcache.core.EhcacheManager.removeCache:207[0;39m - Cache 'users' removed from Eh107InternalCacheManager.
[INFO] 
[INFO] Results:
[INFO] 
[ERROR] Failures: 
[ERROR]   MealAdminRestControllerTest.testCreateInvalid:187 Status expected:<422> but was:<400>
[ERROR]   MealAdminRestControllerTest.testUpdateHtmlUnsafe:173 Status expected:<422> but was:<400>
[ERROR]   MealAdminRestControllerTest.testUpdateInvalid:201 Status expected:<422> but was:<400>
[ERROR]   RestaurantAdminRestControllerTest.testCreateInvalid:161 Status expected:<422> but was:<400>
[ERROR]   RestaurantAdminRestControllerTest.testUpdateHtmlUnsafe:148 Status expected:<422> but was:<400>
[ERROR]   RestaurantAdminRestControllerTest.testUpdateInvalid:174 Status expected:<422> but was:<400>
[ERROR]   UserAdminRestControllerTest.testCreateInvalid:159 Status expected:<422> but was:<400>
[ERROR]   UserAdminRestControllerTest.testUpdateHtmlUnsafe:147 Status expected:<422> but was:<400>
[ERROR]   UserAdminRestControllerTest.testUpdateInvalid:172 Status expected:<422> but was:<400>
[ERROR]   UserProfileRestControllerTest.testUpdateInvalid:91 Status expected:<422> but was:<400>
[ERROR] Errors: 
[ERROR]   MealAdminRestControllerTest.testCreateDuplicate:225 » NestedServlet Request pr...
[ERROR]   MealAdminRestControllerTest.testCreateWithIllegalRequestData:106 » NestedServlet
[ERROR]   MealAdminRestControllerTest.testDeleteNotFound:70 » NestedServlet Request proc...
[ERROR]   MealAdminRestControllerTest.testGetNotFound:49 » NestedServlet Request process...
[ERROR]   MealAdminRestControllerTest.testUpdateDuplicate:211 » NestedServlet Request pr...
[ERROR]   RestaurantAdminRestControllerTest.testCreateDuplicate:199 » NestedServlet Requ...
[ERROR]   RestaurantAdminRestControllerTest.testCreateWithIllegalRequestData:100 » NestedServlet
[ERROR]   RestaurantAdminRestControllerTest.testDeleteNotFound:64 » NestedServlet Reques...
[ERROR]   RestaurantAdminRestControllerTest.testGetNotFound:49 » NestedServlet Request p...
[ERROR]   RestaurantAdminRestControllerTest.testUpdateDuplicate:185 » NestedServlet Requ...
[ERROR]   RestaurantProfileRestControllerTest.testChoice:47 » NestedServlet Request proc...
[ERROR]   RestaurantProfileRestControllerTest.testChoiceBadVote:87 » NestedServlet Reque...
[ERROR]   RestaurantProfileRestControllerTest.testChoiceReVote:62 » NestedServlet Reques...
[ERROR]   RestaurantProfileRestControllerTest.testChoiceTimeIsUpReVote:76 » NestedServlet
[ERROR]   UserAdminRestControllerTest.testCreateDuplicate:197 » NestedServlet Request pr...
[ERROR]   UserAdminRestControllerTest.testCreateWithIllegalRequestData:121 » NestedServlet
[ERROR]   UserAdminRestControllerTest.testDeleteNotFound:69 » NestedServlet Request proc...
[ERROR]   UserAdminRestControllerTest.testGetNotFound:43 » NestedServlet Request process...
[ERROR]   UserAdminRestControllerTest.testUpdateDuplicate:183 » NestedServlet Request pr...
[ERROR]   UserProfileRestControllerTest.testDuplicate:101 » NestedServlet Request proces...
[INFO] 
[ERROR] Tests run: 104, Failures: 10, Errors: 20, Skipped: 0
[INFO] 
[INFO] ------------------------------------------------------------------------
[INFO] BUILD FAILURE
[INFO] ------------------------------------------------------------------------
[INFO] Total time: 29.314 s
[INFO] Finished at: 2018-10-12T11:33:01+02:00
[INFO] Final Memory: 18M/370M
[INFO] ------------------------------------------------------------------------
[ERROR] Failed to execute goal org.apache.maven.plugins:maven-surefire-plugin:2.22.0:test (default-test) on project graduation: There are test failures.
[ERROR] 
[ERROR] Please refer to /root/workspace/MerkulovAA/graduation/440307707/target/surefire-reports for the individual test results.
[ERROR] Please refer to dump files (if any exist) [date]-jvmRun[N].dump, [date].dumpstream and [date]-jvmRun[N].dumpstream.
[ERROR] -> [Help 1]
[ERROR] 
[ERROR] To see the full stack trace of the errors, re-run Maven with the -e switch.
[ERROR] Re-run Maven using the -X switch to enable full debug logging.
[ERROR] 
[ERROR] For more information about the errors and possible solutions, please read the following articles:
[ERROR] [Help 1] http://cwiki.apache.org/confluence/display/MAVEN/MojoFailureException
