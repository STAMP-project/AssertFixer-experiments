--- workspace/aliyun/aliyun-log-producer-java/382532984/src/test/java/com/aliyun/openservices/log/producer/LogProducerTest.java
+++ workspace/aliyun/aliyun-log-producer-java/382532984/src/test/java/com/aliyun/openservices/log/producer/LogProducerTest.java
@@ -53,10 +53,15 @@
-        producer.setProjectConfig(buildProjectConfig1());
-        producer.setProjectConfig(buildProjectConfig2());
-        LogProducerTest.TestCallback testCallback1 = Mockito.mock(LogProducerTest.TestCallback.class);
-        LogProducerTest.TestCallback testCallback2 = Mockito.mock(LogProducerTest.TestCallback.class);
-        producer.send(System.getenv("project1"), "store_1s", "topic1", LogProducerTest.MOCK_IP, getLogItems(), testCallback1);
-        producer.send(System.getenv("project2"), "store_1s", "topic2", LogProducerTest.MOCK_IP, getLogItems(), testCallback2);
-        producer.flush();
-        producer.close();
-        Mockito.verify(testCallback1, Mockito.times(1)).onCompletion(ArgumentMatchers.any(PutLogsResponse.class), ((LogException) (ArgumentMatchers.isNull())));
-        Mockito.verify(testCallback2, Mockito.times(1)).onCompletion(ArgumentMatchers.any(PutLogsResponse.class), ((LogException) (ArgumentMatchers.isNull())));
+        try {
+            producer.setProjectConfig(buildProjectConfig1());
+            producer.setProjectConfig(buildProjectConfig2());
+            LogProducerTest.TestCallback testCallback1 = Mockito.mock(LogProducerTest.TestCallback.class);
+            LogProducerTest.TestCallback testCallback2 = Mockito.mock(LogProducerTest.TestCallback.class);
+            producer.send(System.getenv("project1"), "store_1s", "topic1", LogProducerTest.MOCK_IP, getLogItems(), testCallback1);
+            producer.send(System.getenv("project2"), "store_1s", "topic2", LogProducerTest.MOCK_IP, getLogItems(), testCallback2);
+            producer.flush();
+            producer.close();
+            Mockito.verify(testCallback1, Mockito.times(1)).onCompletion(ArgumentMatchers.any(PutLogsResponse.class), ((LogException) (ArgumentMatchers.isNull())));
+            Mockito.verify(testCallback2, Mockito.times(1)).onCompletion(ArgumentMatchers.any(PutLogsResponse.class), ((LogException) (ArgumentMatchers.isNull())));
+            org.junit.Assert.fail("Expecting exception: NullPointerException");
+        } catch (NullPointerException expectedException__NullPointerException) {
+            org.junit.Assert.assertTrue(true);
+        }