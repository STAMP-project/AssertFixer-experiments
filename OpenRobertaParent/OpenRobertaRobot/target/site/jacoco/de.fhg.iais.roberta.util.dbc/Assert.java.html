<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../.resources/report.css" type="text/css"/><link rel="shortcut icon" href="../.resources/report.gif" type="image/gif"/><title>Assert.java</title><link rel="stylesheet" href="../.resources/prettify.css" type="text/css"/><script type="text/javascript" src="../.resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../.sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">OpenRobertaRobot</a> &gt; <a href="index.source.html" class="el_package">de.fhg.iais.roberta.util.dbc</a> &gt; <span class="el_source">Assert.java</span></div><h1>Assert.java</h1><pre class="source lang-java linenums">package de.fhg.iais.roberta.util.dbc;

import edu.umd.cs.findbugs.annotations.SuppressFBWarnings;

/**
 * Assertion-Checker&lt;br&gt;
 * - for programming DBC (design by contract), used for pre- and post-conditions.&lt;br&gt;
 * - everywhere to validate assumptions. &lt;br&gt;
 * If an assertion is violated, a &lt;b&gt;DbcException&lt;/b&gt; is thrown. &lt;br&gt;
 * The optional error message must state, that the assertion is &lt;i&gt;violated&lt;/i&gt;, it must &lt;i&gt;not&lt;/i&gt; express, what the assertion expects: &lt;br&gt;
 * &lt;b&gt;OK&lt;/b&gt;: &lt;code&gt;Assert.isTrue(p == 4,&quot;p is not equal to 4&quot;)&lt;/code&gt;&lt;br&gt;
 * &lt;b&gt;bad&lt;/b&gt;: &lt;code&gt;Assert.isTrue(p == 4,&quot;p equals 4&quot;)&lt;/code&gt;. &lt;br&gt;
 * &lt;b&gt;often OK&lt;/b&gt;: &lt;code&gt;Assert.isTrue(p == 4,&quot;p should be equal to 4&quot;)&lt;/code&gt; &lt;br&gt;
 * &lt;br&gt;
 * Extensions to the class are welcome.
 */
<span class="nc" id="L17">public final class Assert {</span>
    /**
     * &lt;b&gt;DBC:&lt;/b&gt; asserts, that a condition is &lt;code&gt;true&lt;/code&gt;. If the assertion is violated, a {@link DbcException} is thrown.
     *
     * @param b the condition to be checked
     */
    public static void isTrue(boolean b) {
<span class="fc bfc" id="L24" title="All 2 branches covered.">        if ( !b ) {</span>
<span class="fc" id="L25">            throw new DbcException(&quot;Assertion is violated&quot;);</span>
        }
<span class="fc" id="L27">    }</span>

    /**
     * &lt;b&gt;DBC:&lt;/b&gt; asserts, that a condition is &lt;code&gt;true&lt;/code&gt;. If the assertion is violated, a {@link DbcException} is thrown. The error message must state,
     * that the assertion is &lt;i&gt;violated&lt;/i&gt;
     *
     * @param b the condition to be checked
     * @param msg the error message; states, that the assertion is &lt;i&gt;violated&lt;/i&gt;
     */
    public static void isTrue(boolean b, String msg) {
<span class="fc bfc" id="L37" title="All 2 branches covered.">        if ( !b ) {</span>
<span class="fc" id="L38">            throw new DbcException(msg);</span>
        }
<span class="fc" id="L40">    }</span>

    /**
     * &lt;b&gt;DBC:&lt;/b&gt; asserts, that a condition is &lt;code&gt;true&lt;/code&gt;. If the assertion is violated, a {@link DbcException} is thrown. The error message must state,
     * that the assertion is &lt;i&gt;violated&lt;/i&gt;&lt;br&gt;
     * &lt;br&gt;
     * The error-message is build &lt;i&gt;lazily&lt;/i&gt; to optimize performance. This is not 100% true for primitive param types, because these have to be boxed ... .
     * For formatting details, see {@link String#format(String, Object...)}
     *
     * @param b the condition to be checked
     * @param format format for the error message; states, that the assertion is &lt;i&gt;violated&lt;/i&gt;
     * @param params arguments for the format
     */
    public static void isTrue(boolean b, String format, Object... params) {
<span class="pc bpc" id="L54" title="1 of 2 branches missed.">        if ( !b ) {</span>
<span class="nc" id="L55">            String msg = Assert.makeMessage(format, params);</span>
<span class="nc" id="L56">            throw new DbcException(msg);</span>
        }
<span class="fc" id="L58">    }</span>

    /**
     * &lt;b&gt;DBC:&lt;/b&gt; asserts, that a condition is &lt;code&gt;true&lt;/code&gt;. If the assertion is violated, a stacktrace is printed, then a {@link DbcException} is thrown.
     * &lt;br&gt;
     * &lt;br&gt;
     * Use in rare cases. If you have written a class using the DBC paradigm and you suspect, that caller of your class catch DBC exceptions and do not react on
     * DBC exceptions as required, a printed stack trace may help unveiling such a problem.&lt;br&gt;
     * &lt;br&gt;
     * The error-message is build &lt;i&gt;lazily&lt;/i&gt; to optimize performance. This is not 100% true for primitive param types, because these have to be boxed ... .
     * For formatting details, see {@link String#format(String, Object...)}
     *
     * @param b the condition to be checked
     * @param format format for the error message; states, that the assertion is &lt;i&gt;violated&lt;/i&gt;
     * @param params arguments for the format
     */

    public static void isTrueOnErrorPrintStacktrace(boolean b, String format, Object... params) {
<span class="nc bnc" id="L76" title="All 2 branches missed.">        if ( !b ) {</span>
            try {
<span class="nc" id="L78">                throw new DbcException(&quot;Assertion is violated&quot;);</span>
<span class="nc" id="L79">            } catch ( DbcException e ) {</span>
<span class="nc" id="L80">                String msg = Assert.makeMessage(format, params);</span>
<span class="nc" id="L81">                throw new DbcException(msg);</span>
            }
        }
<span class="nc" id="L84">    }</span>

    /**
     * &lt;b&gt;DBC:&lt;/b&gt; asserts, that a condition is &lt;code&gt;false&lt;/code&gt;. If the assertion is violated, a {@link DbcException} is thrown.
     *
     * @param b the condition to be checked
     */
    public static void isFalse(boolean b) {
<span class="nc bnc" id="L92" title="All 2 branches missed.">        if ( b ) {</span>
<span class="nc" id="L93">            throw new DbcException(&quot;Assertion is violated&quot;);</span>
        }
<span class="nc" id="L95">    }</span>

    /**
     * &lt;b&gt;DBC:&lt;/b&gt; asserts, that a condition is &lt;code&gt;false&lt;/code&gt;. If the assertion is violated, a {@link DbcException} is thrown. The error message must
     * state, that the assertion is &lt;i&gt;violated&lt;/i&gt;
     *
     * @param b the condition to be checked
     * @param msg the error message; states, that the assertion is &lt;i&gt;violated&lt;/i&gt;
     */
    public static void isFalse(boolean b, String msg) {
<span class="nc bnc" id="L105" title="All 2 branches missed.">        if ( b ) {</span>
<span class="nc" id="L106">            throw new DbcException(msg);</span>
        }
<span class="nc" id="L108">    }</span>

    /**
     * &lt;b&gt;DBC:&lt;/b&gt; asserts, that a condition is &lt;code&gt;false&lt;/code&gt;. If the assertion is violated, a {@link DbcException} is thrown. The error message must
     * state, that the assertion is &lt;i&gt;violated&lt;/i&gt;&lt;br&gt;
     * &lt;br&gt;
     * The error-message is build &lt;i&gt;lazily&lt;/i&gt; to optimize performance. This is not 100% true for primitive param types, because these have to be boxed ... .
     * For formatting details, see {@link String#format(String, Object...)}
     *
     * @param b the condition to be checked
     * @param format format for the error message; states, that the assertion is &lt;i&gt;violated&lt;/i&gt;
     * @param params arguments for the format
     */
    public static void isFalse(boolean b, String format, Object... params) {
<span class="nc bnc" id="L122" title="All 2 branches missed.">        if ( b ) {</span>
<span class="nc" id="L123">            String msg = Assert.makeMessage(format, params);</span>
<span class="nc" id="L124">            throw new DbcException(msg);</span>
        }
<span class="nc" id="L126">    }</span>

    /**
     * &lt;b&gt;DBC:&lt;/b&gt; asserts, that a condition is &lt;code&gt;false&lt;/code&gt;. If the assertion is violated, a stacktrace is printed, then a {@link DbcException} is
     * thrown. &lt;br&gt;
     * &lt;br&gt;
     * Use in rare cases. If you have written a class using the DBC paradigm and you suspect, that caller of your class catch DBC exceptions and do not react on
     * DBC exceptions as required, a printed stack trace may help unveiling such a problem.&lt;br&gt;
     * &lt;br&gt;
     * The error-message is build &lt;i&gt;lazily&lt;/i&gt; to optimize performance. This is not 100% true for primitive param types, because these have to be boxed ... .
     * For formatting details, see {@link String#format(String, Object...)}
     *
     * @param b the condition to be checked
     * @param format format for the error message; states, that the assertion is &lt;i&gt;violated&lt;/i&gt;
     * @param params arguments for the format
     */

    public static void isFalseOnErrorPrintStacktrace(boolean b, String format, Object... params) {
<span class="nc bnc" id="L144" title="All 2 branches missed.">        if ( b ) {</span>
            try {
<span class="nc" id="L146">                throw new DbcException(&quot;Assertion is violated&quot;);</span>
<span class="nc" id="L147">            } catch ( DbcException e ) {</span>
<span class="nc" id="L148">                String msg = Assert.makeMessage(format, params);</span>
<span class="nc" id="L149">                throw new DbcException(msg);</span>
            }
        }
<span class="nc" id="L152">    }</span>

    /**
     * &lt;b&gt;DBC:&lt;/b&gt; an assertion &lt;i&gt;is&lt;/i&gt; violated, thus a {@link DbcException} is thrown.
     */
    public static void fail() {
<span class="nc" id="L158">        throw new DbcException(&quot;Assertion is violated&quot;);</span>
    }

    /**
     * &lt;b&gt;DBC:&lt;/b&gt; an assertion &lt;i&gt;is&lt;/i&gt; violated, thus a {@link DbcException} is thrown.
     *
     * @param msg the error message; states, why the callers fails to fulfill the contract
     */
    public static void fail(String msg) {
<span class="nc" id="L167">        throw new DbcException(msg);</span>
    }

    /**
     * &lt;b&gt;DBC:&lt;/b&gt; asserts, that an object reference is &lt;i&gt;not&lt;/i&gt; &lt;code&gt;null&lt;/code&gt;. If the assertion is violated, a {@link DbcException} is thrown.&lt;br&gt;
     *
     * @param o expected to be not null
     */
    public static void notNull(Object o) {
<span class="pc bpc" id="L176" title="1 of 2 branches missed.">        if ( o == null ) {</span>
<span class="nc" id="L177">            throw new DbcException(&quot;Assertion notNull is violated&quot;);</span>
        }
<span class="fc" id="L179">    }</span>

    /**
     * &lt;b&gt;DBC:&lt;/b&gt; asserts, that an object reference is &lt;i&gt;not&lt;/i&gt; &lt;code&gt;null&lt;/code&gt;. If the assertion is violated, a {@link DbcException} is thrown.
     *
     * @param o expected to be not null
     * @param msg the error message; states, that the assertion is &lt;i&gt;violated&lt;/i&gt;
     */
    public static void notNull(Object o, String msg) {
<span class="pc bpc" id="L188" title="1 of 2 branches missed.">        if ( o == null ) {</span>
<span class="nc" id="L189">            throw new DbcException(msg);</span>
        }
<span class="fc" id="L191">    }</span>

    /**
     * &lt;b&gt;DBC:&lt;/b&gt; asserts, that an object reference is &lt;i&gt;not&lt;/i&gt; &lt;code&gt;null&lt;/code&gt;. If the assertion is violated, a {@link DbcException} is thrown.&lt;br&gt;
     * &lt;br&gt;
     * The error-message is build &lt;i&gt;lazily&lt;/i&gt; to optimize performance. This is not 100% true for primitive param types, because these have to be boxed ... .
     * For formatting details, see {@link String#format(String, Object...)}
     *
     * @param b the condition to be checked
     * @param format format for the error message; states, that the assertion is &lt;i&gt;violated&lt;/i&gt;
     * @param params arguments for the format
     */
    public static void notNull(Object o, String format, Object... params) {
<span class="nc bnc" id="L204" title="All 2 branches missed.">        if ( o == null ) {</span>
<span class="nc" id="L205">            String msg = Assert.makeMessage(format, params);</span>
<span class="nc" id="L206">            throw new DbcException(msg);</span>
        }
<span class="nc" id="L208">    }</span>

    /**
     * &lt;b&gt;DBC:&lt;/b&gt; asserts, that an object reference is &lt;code&gt;null&lt;/code&gt;. If the assertion is violated, a {@link DbcException} is thrown.&lt;br&gt;
     *
     * @param o expected to be null
     */
    public static void isNull(Object o) {
<span class="nc bnc" id="L216" title="All 2 branches missed.">        if ( o != null ) {</span>
<span class="nc" id="L217">            throw new DbcException(&quot;Assertion isNull is violated&quot;);</span>
        }
<span class="nc" id="L219">    }</span>

    /**
     * &lt;b&gt;DBC:&lt;/b&gt; asserts, that an object reference is &lt;code&gt;null&lt;/code&gt;. If the assertion is violated, a {@link DbcException} is thrown.
     *
     * @param o expected to be null
     * @param msg the error message; states, that the assertion is &lt;i&gt;violated&lt;/i&gt;
     */
    public static void isNull(Object o, String msg) {
<span class="nc bnc" id="L228" title="All 2 branches missed.">        if ( o != null ) {</span>
<span class="nc" id="L229">            throw new DbcException(msg);</span>
        }
<span class="nc" id="L231">    }</span>

    /**
     * &lt;b&gt;DBC:&lt;/b&gt; asserts, that an object reference is &lt;code&gt;null&lt;/code&gt;. If the assertion is violated, a {@link DbcException} is thrown.&lt;br&gt;
     * &lt;br&gt;
     * The error-message is build &lt;i&gt;lazily&lt;/i&gt; to optimize performance. This is not 100% true for primitive param types, because these have to be boxed ... .
     * For formatting details, see {@link String#format(String, Object...)}
     *
     * @param o expected to be null
     * @param format format for the error message; states, that the assertion is &lt;i&gt;violated&lt;/i&gt;
     * @param params arguments for the format
     */
    public static void isNull(Object o, String format, Object... params) {
<span class="pc bpc" id="L244" title="1 of 2 branches missed.">        if ( o != null ) {</span>
<span class="nc" id="L245">            String msg = Assert.makeMessage(format, params);</span>
<span class="nc" id="L246">            throw new DbcException(msg);</span>
        }
<span class="fc" id="L248">    }</span>

    /**
     * &lt;b&gt;DBC:&lt;/b&gt; asserts, that a reference is a non-empty string. If the assertion is violated, a {@link DbcException} is thrown.
     *
     * @param s expected to be a non-empty string
     */
    public static void nonEmptyString(String s) {
<span class="nc bnc" id="L256" title="All 4 branches missed.">        if ( s == null || s.isEmpty() ) {</span>
<span class="nc" id="L257">            throw new DbcException(&quot;Assertion nonEmptyString violated&quot;);</span>
        }
<span class="nc" id="L259">    }</span>

    /**
     * &lt;b&gt;DBC:&lt;/b&gt; asserts, that a reference is a non-empty string. If the assertion is violated, a {@link DbcException} is thrown.
     *
     * @param s expected to be a non-empty string
     * @param msg the error message; states, that the assertion is &lt;i&gt;violated&lt;/i&gt;
     */
    public static void nonEmptyString(String s, String msg) {
<span class="nc bnc" id="L268" title="All 4 branches missed.">        if ( s == null || s.isEmpty() ) {</span>
<span class="nc" id="L269">            throw new DbcException(msg);</span>
        }
<span class="nc" id="L271">    }</span>

    /**
     * &lt;b&gt;DBC:&lt;/b&gt; asserts, that a reference is a non-empty string. If the assertion is violated, a {@link DbcException} is thrown.&lt;br&gt;
     * &lt;br&gt;
     * The error-message is build &lt;i&gt;lazily&lt;/i&gt; to optimize performance. This is not 100% true for primitive param types, because these have to be boxed ... .
     * For formatting details, see {@link String#format(String, Object...)}
     *
     * @param b the condition to be checked
     * @param format format for the error message; states, that the assertion is &lt;i&gt;violated&lt;/i&gt;
     * @param params arguments for the format
     */
    public static void nonEmptyString(String s, String format, Object... params) {
<span class="nc bnc" id="L284" title="All 4 branches missed.">        if ( s == null || s.isEmpty() ) {</span>
<span class="nc" id="L285">            String msg = Assert.makeMessage(format, params);</span>
<span class="nc" id="L286">            throw new DbcException(msg);</span>
        }
<span class="nc" id="L288">    }</span>

    @SuppressFBWarnings(value = &quot;REC_CATCH_EXCEPTION&quot;, justification = &quot;here any exception should generate a default message&quot;)
    private static String makeMessage(String format, Object... params) {
<span class="nc" id="L292">        String msg = &quot;Assertion evaluiert zu FALSE&quot;;</span>
        try {
<span class="nc" id="L294">            msg = String.format(format, params);</span>
<span class="nc" id="L295">        } catch ( Exception e1 ) {</span>
            try {
<span class="nc" id="L297">                StringBuffer sb = new StringBuffer();</span>
<span class="nc" id="L298">                sb.append(format);</span>
<span class="nc" id="L299">                sb.append(&quot; : &quot;);</span>
<span class="nc bnc" id="L300" title="All 2 branches missed.">                if ( params == null ) {</span>
<span class="nc" id="L301">                    sb.append((Object) null);</span>
                } else {
<span class="nc" id="L303">                    boolean first = true;</span>
<span class="nc bnc" id="L304" title="All 2 branches missed.">                    for ( Object param : params ) {</span>
<span class="nc bnc" id="L305" title="All 2 branches missed.">                        if ( first ) {</span>
<span class="nc" id="L306">                            first = false;</span>
                        } else {
<span class="nc" id="L308">                            sb.append(&quot; , &quot;);</span>
                        }
<span class="nc" id="L310">                        sb.append(param);</span>
                    }
<span class="nc" id="L312">                    msg = sb.toString();</span>
                }
<span class="nc" id="L314">            } catch ( Exception e2 ) {</span>
                // use the init-string
<span class="nc" id="L316">            }</span>
<span class="nc" id="L317">        }</span>
<span class="nc" id="L318">        return msg;</span>
    }
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.eclemma.org/jacoco">JaCoCo</a> 0.7.5.201505241946</span></div></body></html>