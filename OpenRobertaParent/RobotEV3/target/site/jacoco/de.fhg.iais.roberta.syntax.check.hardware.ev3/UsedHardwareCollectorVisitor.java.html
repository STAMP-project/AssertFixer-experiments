<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../.resources/report.css" type="text/css"/><link rel="shortcut icon" href="../.resources/report.gif" type="image/gif"/><title>UsedHardwareCollectorVisitor.java</title><link rel="stylesheet" href="../.resources/prettify.css" type="text/css"/><script type="text/javascript" src="../.resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../.sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">RobotEV3</a> &gt; <a href="index.source.html" class="el_package">de.fhg.iais.roberta.syntax.check.hardware.ev3</a> &gt; <span class="el_source">UsedHardwareCollectorVisitor.java</span></div><h1>UsedHardwareCollectorVisitor.java</h1><pre class="source lang-java linenums">package de.fhg.iais.roberta.syntax.check.hardware.ev3;

import java.util.ArrayList;
import java.util.HashSet;
import java.util.Set;

import de.fhg.iais.roberta.components.Configuration;
import de.fhg.iais.roberta.components.SensorType;
import de.fhg.iais.roberta.components.UsedSensor;
import de.fhg.iais.roberta.inter.mode.general.IMode;
import de.fhg.iais.roberta.inter.mode.sensor.ISensorPort;
import de.fhg.iais.roberta.mode.sensor.GyroSensorMode;
import de.fhg.iais.roberta.mode.sensor.InfraredSensorMode;
import de.fhg.iais.roberta.syntax.Phrase;
import de.fhg.iais.roberta.syntax.action.display.ShowPictureAction;
import de.fhg.iais.roberta.syntax.action.sound.SayTextAction;
import de.fhg.iais.roberta.syntax.check.hardware.RobotUsedHardwareCollectorVisitor;
import de.fhg.iais.roberta.syntax.sensor.generic.GyroSensor;
import de.fhg.iais.roberta.syntax.sensor.generic.InfraredSensor;
import de.fhg.iais.roberta.syntax.sensor.generic.TemperatureSensor;

/**
 * This visitor collects information for used actors and sensors in blockly program.
 *
 * @author kcvejoski
 */
public class UsedHardwareCollectorVisitor extends RobotUsedHardwareCollectorVisitor {
<span class="fc" id="L28">    private final Set&lt;String&gt; usedImages = new HashSet&lt;&gt;();</span>

<span class="fc" id="L30">    private boolean isSayTextUsed = false;</span>

    public UsedHardwareCollectorVisitor(ArrayList&lt;ArrayList&lt;Phrase&lt;Void&gt;&gt;&gt; phrasesSet, Configuration brickConfiguration) {
<span class="fc" id="L33">        super(brickConfiguration);</span>
<span class="fc" id="L34">        check(phrasesSet);</span>
<span class="fc" id="L35">    }</span>

    public Set&lt;String&gt; getUsedImages() {
<span class="fc" id="L38">        return this.usedImages;</span>
    }

    public boolean isSayTextUsed() {
<span class="fc" id="L42">        return this.isSayTextUsed;</span>
    }

    @Override
    public Void visitGyroSensor(GyroSensor&lt;Void&gt; gyroSensor) {
<span class="fc bfc" id="L47" title="All 2 branches covered.">        if ( gyroSensor.getMode() != GyroSensorMode.RESET ) {</span>
<span class="fc" id="L48">            super.visitGyroSensor(gyroSensor);</span>
        }
<span class="fc" id="L50">        return null;</span>
    }

    @Override
    public Void visitSayTextAction(SayTextAction&lt;Void&gt; sayTextAction) {
<span class="fc" id="L55">        super.visitSayTextAction(sayTextAction);</span>
<span class="fc" id="L56">        this.isSayTextUsed = true;</span>
<span class="fc" id="L57">        return null;</span>
    }

    @Override
    public Void visitTemperatureSensor(TemperatureSensor&lt;Void&gt; temperatureSensor) {
<span class="nc" id="L62">        return null;</span>
    }

    @Override
    public Void visitShowPictureAction(ShowPictureAction&lt;Void&gt; showPictureAction) {
<span class="fc" id="L67">        super.visitShowPictureAction(showPictureAction);</span>
<span class="fc" id="L68">        this.usedImages.add(showPictureAction.getPicture().toString());</span>
<span class="fc" id="L69">        return null;</span>
    }

    @Override
    public Void visitInfraredSensor(InfraredSensor&lt;Void&gt; infraredSensor) {
<span class="fc" id="L74">        IMode mode = infraredSensor.getMode();</span>
<span class="fc bfc" id="L75" title="All 2 branches covered.">        if ( infraredSensor.getMode().equals(InfraredSensorMode.PRESENCE) ) {</span>
<span class="fc" id="L76">            mode = InfraredSensorMode.SEEK;</span>
        }
<span class="fc" id="L78">        this.usedSensors.add(new UsedSensor((ISensorPort) infraredSensor.getPort(), SensorType.INFRARED, mode));</span>
<span class="fc" id="L79">        return null;</span>
    }

}
</pre><div class="footer"><span class="right">Created with <a href="http://www.eclemma.org/jacoco">JaCoCo</a> 0.7.5.201505241946</span></div></body></html>