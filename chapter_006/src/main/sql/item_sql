create database item_system;

--

create table users (
id serial primary key,
username varchar(20)
);

create table rules(
id serial primary key,
rule varchar(20)
);

create table roles(
id serial primary key,
role varchar(20)
);

create table role_rule_compose (
id serial primary key,
role_id int references roles(id),
rule_id int references rules(id)
);

create table category (
id serial primary key,
category varchar(20)
);

create table state (
id serial primary key,
state varchar(200)
);

create table items (
id serial primary key,
item varchar(200),
user_id int references users(id),
categroy_id int references category(id),
state_id int references state(id)
);

create table comments (
id serial primary key,
comment varchar(255),
item_id int references items(id)
);

create table attaches (
id serial primary key,
attach varchar(1000),
item_id int references items(id)
);

--

insert into users (username) values ('Ivan');
insert into roles (role) values ('admin');
insert into rules (rule) values ('rule1');
insert into role_rule_compose (role_id, rule_id) values (1,1);
insert into items (item, user_id) values ('Item1', 1,);
insert into category (category) values ('category1');
insert into state (state) values ('state1');
insert into attaches (attach, item_id) values ('c:\file.txt', 1);
insert into comments (comment, item_id) values ('comment1',1);
update items set category_id=1, user_id=1, state_id=1 where id=1;

