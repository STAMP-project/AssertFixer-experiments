<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>InvitationMetadata.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">data-security</a> &gt; <a href="index.source.html" class="el_package">org.molgenis.data.security.auth</a> &gt; <span class="el_source">InvitationMetadata.java</span></div><h1>InvitationMetadata.java</h1><pre class="source lang-java linenums">package org.molgenis.data.security.auth;

import org.molgenis.data.meta.AttributeType;
import org.molgenis.data.meta.SystemEntityType;
import org.springframework.stereotype.Component;

import static java.util.Objects.requireNonNull;
import static org.molgenis.data.meta.AttributeType.*;
import static org.molgenis.data.meta.model.EntityType.AttributeRole.ROLE_ID;
import static org.molgenis.data.meta.model.Package.PACKAGE_SEPARATOR;
import static org.molgenis.data.security.auth.InvitationMetadata.Status.PENDING;
import static org.molgenis.data.security.auth.SecurityPackage.PACKAGE_SECURITY;

@Component
public class InvitationMetadata extends SystemEntityType
{
<span class="nc" id="L17">	public enum Status</span>
	{
<span class="nc" id="L19">		PENDING, ACCEPTED, REVOKED, EXPIRED, DECLINED</span>
	}

	private static final String SIMPLE_NAME = &quot;Invitation&quot;;
	public static final String INVITATION = PACKAGE_SECURITY + PACKAGE_SEPARATOR + SIMPLE_NAME;

	public static final String ID = &quot;id&quot;;
	public static final String TOKEN = &quot;token&quot;;
	public static final String EMAIL = &quot;email&quot;;
	public static final String FROM = &quot;from&quot;;
	public static final String TO = &quot;to&quot;;
	public static final String ROLE = &quot;role&quot;;
	public static final String INVITED_BY = &quot;invitedBy&quot;;
	public static final String ISSUED = &quot;issued&quot;;
	public static final String LAST_UPDATE = &quot;lastUpdate&quot;;
	public static final String INVITATION_TEXT = &quot;invitationText&quot;;
	public static final String DECLINE_REASON = &quot;declineReason&quot;;
	public static final String STATUS = &quot;status&quot;;

	private final SecurityPackage securityPackage;
	private final UserMetaData userMetadata;
	private final RoleMetadata roleMetadata;

	public InvitationMetadata(SecurityPackage securityPackage, UserMetaData userMetadata, RoleMetadata roleMetadata)
	{
<span class="nc" id="L44">		super(SIMPLE_NAME, PACKAGE_SECURITY);</span>
<span class="nc" id="L45">		this.securityPackage = requireNonNull(securityPackage);</span>
<span class="nc" id="L46">		this.userMetadata = requireNonNull(userMetadata);</span>
<span class="nc" id="L47">		this.roleMetadata = requireNonNull(roleMetadata);</span>
<span class="nc" id="L48">	}</span>

	@Override
	public void init()
	{
<span class="nc" id="L53">		setPackage(securityPackage);</span>

<span class="nc" id="L55">		setLabel(SIMPLE_NAME);</span>
<span class="nc" id="L56">		setDescription(&quot;An Invitation for a User to join a Group in a certain Role.&quot;);</span>

<span class="nc" id="L58">		addAttribute(ID, ROLE_ID).setAuto(true).setVisible(false).setLabel(&quot;Identifier&quot;);</span>
<span class="nc" id="L59">		addAttribute(TOKEN).setNillable(false)</span>
<span class="nc" id="L60">						   .setLabel(&quot;Token&quot;)</span>
<span class="nc" id="L61">						   .setDescription(&quot;The token used when responding to this invitation.&quot;);</span>
<span class="nc" id="L62">		addAttribute(EMAIL).setNillable(false)</span>
<span class="nc" id="L63">						   .setLabel(&quot;Email&quot;)</span>
<span class="nc" id="L64">						   .setDescription(&quot;Email address of the invited user.&quot;)</span>
<span class="nc" id="L65">						   .setDataType(AttributeType.EMAIL);</span>
<span class="nc" id="L66">		addAttribute(FROM).setNillable(false)</span>
<span class="nc" id="L67">						  .setLabel(&quot;From&quot;)</span>
<span class="nc" id="L68">						  .setDescription(&quot;The proposed start date of the membership.&quot;)</span>
<span class="nc" id="L69">						  .setDataType(DATE_TIME);</span>
<span class="nc" id="L70">		addAttribute(TO).setLabel(&quot;To&quot;)</span>
<span class="nc" id="L71">						.setDescription(&quot;The proposed end date of the membership.&quot;)</span>
<span class="nc" id="L72">						.setDataType(DATE_TIME);</span>
<span class="nc" id="L73">		addAttribute(ROLE).setNillable(false)</span>
<span class="nc" id="L74">						  .setLabel(&quot;Role&quot;)</span>
<span class="nc" id="L75">						  .setDescription(&quot;The role that the user will join the group in.&quot;)</span>
<span class="nc" id="L76">						  .setDataType(XREF)</span>
<span class="nc" id="L77">						  .setRefEntity(roleMetadata);</span>
<span class="nc" id="L78">		addAttribute(INVITED_BY).setNillable(false)</span>
<span class="nc" id="L79">								.setLabel(&quot;Invited by&quot;)</span>
<span class="nc" id="L80">								.setDescription(&quot;The group manager who created this invitation.&quot;)</span>
<span class="nc" id="L81">								.setDataType(XREF)</span>
<span class="nc" id="L82">								.setRefEntity(userMetadata)</span>
<span class="nc" id="L83">								.setAggregatable(true);</span>
<span class="nc" id="L84">		addAttribute(ISSUED).setNillable(false)</span>
<span class="nc" id="L85">							.setAuto(true)</span>
<span class="nc" id="L86">							.setLabel(&quot;Issued&quot;)</span>
<span class="nc" id="L87">							.setDescription(&quot;The moment this invitation was issued.&quot;)</span>
<span class="nc" id="L88">							.setDataType(DATE_TIME);</span>
<span class="nc" id="L89">		addAttribute(LAST_UPDATE).setNillable(false)</span>
<span class="nc" id="L90">								 .setLabel(&quot;Last update&quot;)</span>
<span class="nc" id="L91">								 .setDescription(&quot;The moment this invitation was last updated.&quot;)</span>
<span class="nc" id="L92">								 .setDataType(DATE_TIME);</span>
<span class="nc" id="L93">		addAttribute(INVITATION_TEXT).setNillable(true)</span>
<span class="nc" id="L94">									 .setLabel(&quot;Invitation text&quot;)</span>
<span class="nc" id="L95">									 .setDescription(&quot;Custom text used to invite the user.&quot;)</span>
<span class="nc" id="L96">									 .setDataType(TEXT);</span>
<span class="nc" id="L97">		addAttribute(DECLINE_REASON).setNillable(true)</span>
<span class="nc" id="L98">									.setLabel(&quot;Decline reason&quot;)</span>
<span class="nc" id="L99">									.setDescription(</span>
											&quot;Reason provided by the invited User on why they declined the invitation.&quot;)
<span class="nc" id="L101">									.setDataType(TEXT);</span>
<span class="nc" id="L102">		addAttribute(STATUS).setDataType(ENUM)</span>
<span class="nc" id="L103">							.setEnumOptions(Status.class)</span>
<span class="nc" id="L104">							.setNillable(false)</span>
<span class="nc" id="L105">							.setDefaultValue(PENDING.toString())</span>
<span class="nc" id="L106">							.setAggregatable(true);</span>
<span class="nc" id="L107">	}</span>
}



</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.1.201803210924</span></div></body></html>