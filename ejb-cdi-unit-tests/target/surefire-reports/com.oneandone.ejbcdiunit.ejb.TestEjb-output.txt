SLF4J: Class path contains multiple SLF4J bindings.
SLF4J: Found binding in [jar:file:/root/./workspace/1and1/ejb-cdi-unit/389259868/.m2/org/slf4j/slf4j-log4j12/1.7.21/slf4j-log4j12-1.7.21.jar!/org/slf4j/impl/StaticLoggerBinder.class]
SLF4J: Found binding in [jar:file:/root/./workspace/1and1/ejb-cdi-unit/389259868/.m2/ch/qos/logback/logback-classic/1.0.9/logback-classic-1.0.9.jar!/org/slf4j/impl/StaticLoggerBinder.class]
SLF4J: See http://www.slf4j.org/codes.html#multiple_bindings for an explanation.
SLF4J: Actual binding is of type [org.slf4j.impl.Log4jLoggerFactory]
2018-06-07 19:16:46,553 INFO   (: [  ]  ) [org.jboss.weld.Version] (main) WELD-000900 1.1.14 (Final)
2018-06-07 19:16:47,121 ERROR  (: [  ]  ) [CDI-Unit EJB-ExtensionExtended] (main) Self injection of EJB Type com.oneandone.ejbcdiunit.ejbs.SingletonEJB in field selfejb of Class com.oneandone.ejbcdiunit.ejbs.SingletonEJB can't get simulated by ejb-cdi-unit
2018-06-07 19:16:47,607 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.persistence.PersistenceFactory] (main) creating persistence factory testdb
2018-06-07 19:16:47,779 INFO   (: [  ]  ) [org.hibernate.annotations.common.Version] (main) HCANN000001: Hibernate Commons Annotations {4.0.2.Final}
2018-06-07 19:16:47,784 INFO   (: [  ]  ) [org.hibernate.Version] (main) HHH000412: Hibernate Core {4.2.2.Final}
2018-06-07 19:16:47,786 INFO   (: [  ]  ) [org.hibernate.cfg.Environment] (main) HHH000206: hibernate.properties not found
2018-06-07 19:16:47,788 INFO   (: [  ]  ) [org.hibernate.cfg.Environment] (main) HHH000021: Bytecode provider name : javassist
2018-06-07 19:16:48,041 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000402: Using Hibernate built-in connection pool (not for production use!)
2018-06-07 19:16:48,048 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000115: Hibernate connection pool size: 20
2018-06-07 19:16:48,048 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000006: Autocommit mode: true
2018-06-07 19:16:48,049 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000401: using driver [org.h2.Driver] at URL [jdbc:h2:mem:test;MODE=MySQL;DB_CLOSE_DELAY=0]
2018-06-07 19:16:48,049 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000046: Connection properties: {user=sa, autocommit=true, release_mode=auto}
2018-06-07 19:16:48,315 INFO   (: [  ]  ) [org.hibernate.dialect.Dialect] (main) HHH000400: Using dialect: org.hibernate.dialect.MySQL5Dialect
2018-06-07 19:16:48,489 INFO   (: [  ]  ) [org.hibernate.engine.transaction.internal.TransactionFactoryInitiator] (main) HHH000268: Transaction strategy: org.hibernate.engine.transaction.internal.jdbc.JdbcTransactionFactory
2018-06-07 19:16:48,494 INFO   (: [  ]  ) [org.hibernate.hql.internal.ast.ASTQueryTranslatorFactory] (main) HHH000397: Using ASTQueryTranslatorFactory
2018-06-07 19:16:48,540 INFO   (: [  ]  ) [org.hibernate.validator.internal.util.Version] (main) HV000001: Hibernate Validator 4.3.1.Final
2018-06-07 19:16:48,841 INFO   (: [  ]  ) [org.hibernate.tool.hbm2ddl.SchemaExport] (main) HHH000227: Running hbm2ddl schema export
Hibernate: drop table if exists test_entity_1
Hibernate: drop table if exists hibernate_sequences
Hibernate: create table test_entity_1 (id bigint not null, intAttribute integer not null, stringAttribute varchar(255), primary key (id))
Hibernate: create table hibernate_sequences ( sequence_name varchar(255),  sequence_next_hi_value integer ) 
2018-06-07 19:16:48,851 INFO   (: [  ]  ) [org.hibernate.tool.hbm2ddl.SchemaExport] (main) HHH000230: Schema export complete
check constructions
2018-06-07 19:16:49,028 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L1 changing  from undefined to NOT_SUPPORTED xid: null in StatelessBeanManagedTrasEJB.insertNewInTra
2018-06-07 19:16:49,029 INFO   (: [  ]  ) [ejb-cdi-unit tests] (main) output public variable 200
Hibernate: select sequence_next_hi_value from hibernate_sequences where sequence_name = 'test_entity_1' for update
Hibernate: insert into hibernate_sequences(sequence_name, sequence_next_hi_value) values('test_entity_1', ?)
Hibernate: update hibernate_sequences set sequence_next_hi_value = ? where sequence_next_hi_value = ? and sequence_name = 'test_entity_1'
Hibernate: insert into test_entity_1 (intAttribute, stringAttribute, id) values (?, ?, ?)
2018-06-07 19:16:49,153 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L1 finally   in NOT_SUPPORTED xid: null in StatelessBeanManagedTrasEJB.insertNewInTra
2018-06-07 19:16:49,153 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L1 done      NOT_SUPPORTED back to undefined xid: null in StatelessBeanManagedTrasEJB.insertNewInTra
2018-06-07 19:16:49,159 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.persistence.PersistenceFactory] (main) destroying persistence factory testdb
2018-06-07 19:16:49,159 INFO   (: [  ]  ) [org.hibernate.tool.hbm2ddl.SchemaExport] (main) HHH000227: Running hbm2ddl schema export
Hibernate: drop table if exists test_entity_1
Hibernate: drop table if exists hibernate_sequences
2018-06-07 19:16:49,165 INFO   (: [  ]  ) [org.hibernate.tool.hbm2ddl.SchemaExport] (main) HHH000230: Schema export complete
2018-06-07 19:16:49,165 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000030: Cleaning up connection pool [jdbc:h2:mem:test;MODE=MySQL;DB_CLOSE_DELAY=0]
2018-06-07 19:16:49,265 ERROR  (: [  ]  ) [CDI-Unit EJB-ExtensionExtended] (main) Self injection of EJB Type com.oneandone.ejbcdiunit.ejbs.SingletonEJB in field selfejb of Class com.oneandone.ejbcdiunit.ejbs.SingletonEJB can't get simulated by ejb-cdi-unit
2018-06-07 19:16:49,401 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.persistence.PersistenceFactory] (main) creating persistence factory testdb
2018-06-07 19:16:49,460 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000402: Using Hibernate built-in connection pool (not for production use!)
2018-06-07 19:16:49,460 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000115: Hibernate connection pool size: 20
2018-06-07 19:16:49,460 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000006: Autocommit mode: true
2018-06-07 19:16:49,461 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000401: using driver [org.h2.Driver] at URL [jdbc:h2:mem:test;MODE=MySQL;DB_CLOSE_DELAY=0]
2018-06-07 19:16:49,461 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000046: Connection properties: {user=sa, autocommit=true, release_mode=auto}
2018-06-07 19:16:49,469 INFO   (: [  ]  ) [org.hibernate.dialect.Dialect] (main) HHH000400: Using dialect: org.hibernate.dialect.MySQL5Dialect
2018-06-07 19:16:49,473 INFO   (: [  ]  ) [org.hibernate.engine.transaction.internal.TransactionFactoryInitiator] (main) HHH000268: Transaction strategy: org.hibernate.engine.transaction.internal.jdbc.JdbcTransactionFactory
2018-06-07 19:16:49,474 INFO   (: [  ]  ) [org.hibernate.hql.internal.ast.ASTQueryTranslatorFactory] (main) HHH000397: Using ASTQueryTranslatorFactory
2018-06-07 19:16:49,488 INFO   (: [  ]  ) [org.hibernate.tool.hbm2ddl.SchemaExport] (main) HHH000227: Running hbm2ddl schema export
Hibernate: drop table if exists test_entity_1
Hibernate: drop table if exists hibernate_sequences
Hibernate: create table test_entity_1 (id bigint not null, intAttribute integer not null, stringAttribute varchar(255), primary key (id))
Hibernate: create table hibernate_sequences ( sequence_name varchar(255),  sequence_next_hi_value integer ) 
2018-06-07 19:16:49,491 INFO   (: [  ]  ) [org.hibernate.tool.hbm2ddl.SchemaExport] (main) HHH000230: Schema export complete
check constructions
2018-06-07 19:16:49,502 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L1 changing  from undefined to NOT_SUPPORTED xid: null in StatelessBeanManagedTrasEJB.insertWithoutTra
2018-06-07 19:16:49,502 INFO   (: [  ]  ) [ejb-cdi-unit tests] (main) output public variable 200
2018-06-07 19:16:49,504 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L1 Exception TransactionRequiredException in NOT_SUPPORTED xid: null in StatelessBeanManagedTrasEJB.insertWithoutTra
2018-06-07 19:16:49,504 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L1 finally   in NOT_SUPPORTED xid: null in StatelessBeanManagedTrasEJB.insertWithoutTra
2018-06-07 19:16:49,504 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L1 done      NOT_SUPPORTED back to undefined xid: null in StatelessBeanManagedTrasEJB.insertWithoutTra
2018-06-07 19:16:49,507 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.persistence.PersistenceFactory] (main) destroying persistence factory testdb
2018-06-07 19:16:49,507 INFO   (: [  ]  ) [org.hibernate.tool.hbm2ddl.SchemaExport] (main) HHH000227: Running hbm2ddl schema export
Hibernate: drop table if exists test_entity_1
Hibernate: drop table if exists hibernate_sequences
2018-06-07 19:16:49,510 INFO   (: [  ]  ) [org.hibernate.tool.hbm2ddl.SchemaExport] (main) HHH000230: Schema export complete
2018-06-07 19:16:49,510 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000030: Cleaning up connection pool [jdbc:h2:mem:test;MODE=MySQL;DB_CLOSE_DELAY=0]
2018-06-07 19:16:49,591 ERROR  (: [  ]  ) [CDI-Unit EJB-ExtensionExtended] (main) Self injection of EJB Type com.oneandone.ejbcdiunit.ejbs.SingletonEJB in field selfejb of Class com.oneandone.ejbcdiunit.ejbs.SingletonEJB can't get simulated by ejb-cdi-unit
2018-06-07 19:16:49,700 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.persistence.PersistenceFactory] (main) creating persistence factory testdb
2018-06-07 19:16:49,753 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000402: Using Hibernate built-in connection pool (not for production use!)
2018-06-07 19:16:49,753 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000115: Hibernate connection pool size: 20
2018-06-07 19:16:49,753 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000006: Autocommit mode: true
2018-06-07 19:16:49,754 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000401: using driver [org.h2.Driver] at URL [jdbc:h2:mem:test;MODE=MySQL;DB_CLOSE_DELAY=0]
2018-06-07 19:16:49,754 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000046: Connection properties: {user=sa, autocommit=true, release_mode=auto}
2018-06-07 19:16:49,761 INFO   (: [  ]  ) [org.hibernate.dialect.Dialect] (main) HHH000400: Using dialect: org.hibernate.dialect.MySQL5Dialect
2018-06-07 19:16:49,765 INFO   (: [  ]  ) [org.hibernate.engine.transaction.internal.TransactionFactoryInitiator] (main) HHH000268: Transaction strategy: org.hibernate.engine.transaction.internal.jdbc.JdbcTransactionFactory
2018-06-07 19:16:49,765 INFO   (: [  ]  ) [org.hibernate.hql.internal.ast.ASTQueryTranslatorFactory] (main) HHH000397: Using ASTQueryTranslatorFactory
2018-06-07 19:16:49,780 INFO   (: [  ]  ) [org.hibernate.tool.hbm2ddl.SchemaExport] (main) HHH000227: Running hbm2ddl schema export
Hibernate: drop table if exists test_entity_1
Hibernate: drop table if exists hibernate_sequences
Hibernate: create table test_entity_1 (id bigint not null, intAttribute integer not null, stringAttribute varchar(255), primary key (id))
Hibernate: create table hibernate_sequences ( sequence_name varchar(255),  sequence_next_hi_value integer ) 
2018-06-07 19:16:49,783 INFO   (: [  ]  ) [org.hibernate.tool.hbm2ddl.SchemaExport] (main) HHH000230: Schema export complete
check constructions
2018-06-07 19:16:49,795 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L1 changing  from undefined to NOT_SUPPORTED xid: null in SingletonEJB.methodCallUsingSessionContext
2018-06-07 19:16:49,805 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L2 changing  from NOT_SUPPORTED to REQUIRES_NEW xid: null in SingletonEJB.callInNewTransactionWithParam
singleton bean 10
2018-06-07 19:16:49,806 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L2 finally   in REQUIRES_NEW xid: null in SingletonEJB.callInNewTransactionWithParam
2018-06-07 19:16:49,806 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L2 done      REQUIRES_NEW back to NOT_SUPPORTED xid: null in SingletonEJB.callInNewTransactionWithParam
2018-06-07 19:16:49,806 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L2 changing  from NOT_SUPPORTED to REQUIRES_NEW xid: null in SingletonEJB.callInNewTransaction
singleton bean
2018-06-07 19:16:49,806 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L2 finally   in REQUIRES_NEW xid: null in SingletonEJB.callInNewTransaction
2018-06-07 19:16:49,807 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L2 done      REQUIRES_NEW back to NOT_SUPPORTED xid: null in SingletonEJB.callInNewTransaction
singleton bean
2018-06-07 19:16:49,807 INFO   (: [  ]  ) [ejb-cdi-unit tests] (main) SingletonEJB: methodCallUsingSessionContext called
2018-06-07 19:16:49,807 INFO   (: [  ]  ) [ejb-cdi-unit tests] (main) output public variable 100
2018-06-07 19:16:49,807 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L1 finally   in NOT_SUPPORTED xid: null in SingletonEJB.methodCallUsingSessionContext
2018-06-07 19:16:49,807 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L1 done      NOT_SUPPORTED back to undefined xid: null in SingletonEJB.methodCallUsingSessionContext
2018-06-07 19:16:49,809 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.persistence.PersistenceFactory] (main) destroying persistence factory testdb
2018-06-07 19:16:49,809 INFO   (: [  ]  ) [org.hibernate.tool.hbm2ddl.SchemaExport] (main) HHH000227: Running hbm2ddl schema export
Hibernate: drop table if exists test_entity_1
Hibernate: drop table if exists hibernate_sequences
2018-06-07 19:16:49,812 INFO   (: [  ]  ) [org.hibernate.tool.hbm2ddl.SchemaExport] (main) HHH000230: Schema export complete
2018-06-07 19:16:49,812 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000030: Cleaning up connection pool [jdbc:h2:mem:test;MODE=MySQL;DB_CLOSE_DELAY=0]
2018-06-07 19:16:49,896 ERROR  (: [  ]  ) [CDI-Unit EJB-ExtensionExtended] (main) Self injection of EJB Type com.oneandone.ejbcdiunit.ejbs.SingletonEJB in field selfejb of Class com.oneandone.ejbcdiunit.ejbs.SingletonEJB can't get simulated by ejb-cdi-unit
2018-06-07 19:16:49,997 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.persistence.PersistenceFactory] (main) creating persistence factory testdb
2018-06-07 19:16:50,052 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000402: Using Hibernate built-in connection pool (not for production use!)
2018-06-07 19:16:50,052 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000115: Hibernate connection pool size: 20
2018-06-07 19:16:50,052 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000006: Autocommit mode: true
2018-06-07 19:16:50,053 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000401: using driver [org.h2.Driver] at URL [jdbc:h2:mem:test;MODE=MySQL;DB_CLOSE_DELAY=0]
2018-06-07 19:16:50,053 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000046: Connection properties: {user=sa, autocommit=true, release_mode=auto}
2018-06-07 19:16:50,061 INFO   (: [  ]  ) [org.hibernate.dialect.Dialect] (main) HHH000400: Using dialect: org.hibernate.dialect.MySQL5Dialect
2018-06-07 19:16:50,064 INFO   (: [  ]  ) [org.hibernate.engine.transaction.internal.TransactionFactoryInitiator] (main) HHH000268: Transaction strategy: org.hibernate.engine.transaction.internal.jdbc.JdbcTransactionFactory
2018-06-07 19:16:50,065 INFO   (: [  ]  ) [org.hibernate.hql.internal.ast.ASTQueryTranslatorFactory] (main) HHH000397: Using ASTQueryTranslatorFactory
2018-06-07 19:16:50,081 INFO   (: [  ]  ) [org.hibernate.tool.hbm2ddl.SchemaExport] (main) HHH000227: Running hbm2ddl schema export
Hibernate: drop table if exists test_entity_1
Hibernate: drop table if exists hibernate_sequences
Hibernate: create table test_entity_1 (id bigint not null, intAttribute integer not null, stringAttribute varchar(255), primary key (id))
Hibernate: create table hibernate_sequences ( sequence_name varchar(255),  sequence_next_hi_value integer ) 
2018-06-07 19:16:50,084 INFO   (: [  ]  ) [org.hibernate.tool.hbm2ddl.SchemaExport] (main) HHH000230: Schema export complete
check constructions
2018-06-07 19:16:50,094 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L1 changing  from undefined to REQUIRES_NEW xid: null in TransactionalParentEJB.saveInCurrentTransactionDefaultTraAttribute
Hibernate: select sequence_next_hi_value from hibernate_sequences where sequence_name = 'test_entity_1' for update
Hibernate: insert into hibernate_sequences(sequence_name, sequence_next_hi_value) values('test_entity_1', ?)
Hibernate: update hibernate_sequences set sequence_next_hi_value = ? where sequence_next_hi_value = ? and sequence_name = 'test_entity_1'
2018-06-07 19:16:50,098 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L1 finally   in REQUIRES_NEW xid: 2 in TransactionalParentEJB.saveInCurrentTransactionDefaultTraAttribute
Hibernate: insert into test_entity_1 (intAttribute, stringAttribute, id) values (?, ?, ?)
2018-06-07 19:16:50,104 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L1 done      REQUIRES_NEW back to undefined xid: null in TransactionalParentEJB.saveInCurrentTransactionDefaultTraAttribute
2018-06-07 19:16:50,106 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.persistence.PersistenceFactory] (main) destroying persistence factory testdb
2018-06-07 19:16:50,106 INFO   (: [  ]  ) [org.hibernate.tool.hbm2ddl.SchemaExport] (main) HHH000227: Running hbm2ddl schema export
Hibernate: drop table if exists test_entity_1
Hibernate: drop table if exists hibernate_sequences
2018-06-07 19:16:50,108 INFO   (: [  ]  ) [org.hibernate.tool.hbm2ddl.SchemaExport] (main) HHH000230: Schema export complete
2018-06-07 19:16:50,109 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000030: Cleaning up connection pool [jdbc:h2:mem:test;MODE=MySQL;DB_CLOSE_DELAY=0]
2018-06-07 19:16:50,189 ERROR  (: [  ]  ) [CDI-Unit EJB-ExtensionExtended] (main) Self injection of EJB Type com.oneandone.ejbcdiunit.ejbs.SingletonEJB in field selfejb of Class com.oneandone.ejbcdiunit.ejbs.SingletonEJB can't get simulated by ejb-cdi-unit
2018-06-07 19:16:50,259 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.persistence.PersistenceFactory] (main) creating persistence factory testdb
2018-06-07 19:16:50,290 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000402: Using Hibernate built-in connection pool (not for production use!)
2018-06-07 19:16:50,290 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000115: Hibernate connection pool size: 20
2018-06-07 19:16:50,290 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000006: Autocommit mode: true
2018-06-07 19:16:50,290 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000401: using driver [org.h2.Driver] at URL [jdbc:h2:mem:test;MODE=MySQL;DB_CLOSE_DELAY=0]
2018-06-07 19:16:50,291 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000046: Connection properties: {user=sa, autocommit=true, release_mode=auto}
2018-06-07 19:16:50,294 INFO   (: [  ]  ) [org.hibernate.dialect.Dialect] (main) HHH000400: Using dialect: org.hibernate.dialect.MySQL5Dialect
2018-06-07 19:16:50,297 INFO   (: [  ]  ) [org.hibernate.engine.transaction.internal.TransactionFactoryInitiator] (main) HHH000268: Transaction strategy: org.hibernate.engine.transaction.internal.jdbc.JdbcTransactionFactory
2018-06-07 19:16:50,297 INFO   (: [  ]  ) [org.hibernate.hql.internal.ast.ASTQueryTranslatorFactory] (main) HHH000397: Using ASTQueryTranslatorFactory
2018-06-07 19:16:50,306 INFO   (: [  ]  ) [org.hibernate.tool.hbm2ddl.SchemaExport] (main) HHH000227: Running hbm2ddl schema export
Hibernate: drop table if exists test_entity_1
Hibernate: drop table if exists hibernate_sequences
Hibernate: create table test_entity_1 (id bigint not null, intAttribute integer not null, stringAttribute varchar(255), primary key (id))
Hibernate: create table hibernate_sequences ( sequence_name varchar(255),  sequence_next_hi_value integer ) 
2018-06-07 19:16:50,308 INFO   (: [  ]  ) [org.hibernate.tool.hbm2ddl.SchemaExport] (main) HHH000230: Schema export complete
check constructions
2018-06-07 19:16:50,327 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L1 changing  from undefined to REQUIRED xid: null in StatelessEJB.saveInCurrentTransaction
Hibernate: select sequence_next_hi_value from hibernate_sequences where sequence_name = 'test_entity_1' for update
Hibernate: insert into hibernate_sequences(sequence_name, sequence_next_hi_value) values('test_entity_1', ?)
Hibernate: update hibernate_sequences set sequence_next_hi_value = ? where sequence_next_hi_value = ? and sequence_name = 'test_entity_1'
2018-06-07 19:16:50,329 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L1 finally   in REQUIRED xid: 3 in StatelessEJB.saveInCurrentTransaction
2018-06-07 19:16:50,329 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L1 done      REQUIRED back to undefined xid: 3 in StatelessEJB.saveInCurrentTransaction
Hibernate: insert into test_entity_1 (intAttribute, stringAttribute, id) values (?, ?, ?)
Hibernate: insert into test_entity_1 (intAttribute, stringAttribute, id) values (?, ?, ?)
Hibernate: select count(testentity0_.id) as col_0_0_ from test_entity_1 testentity0_
Hibernate: select count(testentity0_.id) as col_0_0_ from test_entity_1 testentity0_
2018-06-07 19:16:50,468 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.persistence.PersistenceFactory] (main) destroying persistence factory testdb
2018-06-07 19:16:50,469 INFO   (: [  ]  ) [org.hibernate.tool.hbm2ddl.SchemaExport] (main) HHH000227: Running hbm2ddl schema export
Hibernate: drop table if exists test_entity_1
Hibernate: drop table if exists hibernate_sequences
2018-06-07 19:16:50,471 INFO   (: [  ]  ) [org.hibernate.tool.hbm2ddl.SchemaExport] (main) HHH000230: Schema export complete
2018-06-07 19:16:50,471 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000030: Cleaning up connection pool [jdbc:h2:mem:test;MODE=MySQL;DB_CLOSE_DELAY=0]
2018-06-07 19:16:50,532 ERROR  (: [  ]  ) [CDI-Unit EJB-ExtensionExtended] (main) Self injection of EJB Type com.oneandone.ejbcdiunit.ejbs.SingletonEJB in field selfejb of Class com.oneandone.ejbcdiunit.ejbs.SingletonEJB can't get simulated by ejb-cdi-unit
2018-06-07 19:16:50,602 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.persistence.PersistenceFactory] (main) creating persistence factory testdb
2018-06-07 19:16:50,644 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000402: Using Hibernate built-in connection pool (not for production use!)
2018-06-07 19:16:50,644 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000115: Hibernate connection pool size: 20
2018-06-07 19:16:50,644 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000006: Autocommit mode: true
2018-06-07 19:16:50,644 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000401: using driver [org.h2.Driver] at URL [jdbc:h2:mem:test;MODE=MySQL;DB_CLOSE_DELAY=0]
2018-06-07 19:16:50,645 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000046: Connection properties: {user=sa, autocommit=true, release_mode=auto}
2018-06-07 19:16:50,650 INFO   (: [  ]  ) [org.hibernate.dialect.Dialect] (main) HHH000400: Using dialect: org.hibernate.dialect.MySQL5Dialect
2018-06-07 19:16:50,653 INFO   (: [  ]  ) [org.hibernate.engine.transaction.internal.TransactionFactoryInitiator] (main) HHH000268: Transaction strategy: org.hibernate.engine.transaction.internal.jdbc.JdbcTransactionFactory
2018-06-07 19:16:50,654 INFO   (: [  ]  ) [org.hibernate.hql.internal.ast.ASTQueryTranslatorFactory] (main) HHH000397: Using ASTQueryTranslatorFactory
2018-06-07 19:16:50,665 INFO   (: [  ]  ) [org.hibernate.tool.hbm2ddl.SchemaExport] (main) HHH000227: Running hbm2ddl schema export
Hibernate: drop table if exists test_entity_1
Hibernate: drop table if exists hibernate_sequences
Hibernate: create table test_entity_1 (id bigint not null, intAttribute integer not null, stringAttribute varchar(255), primary key (id))
Hibernate: create table hibernate_sequences ( sequence_name varchar(255),  sequence_next_hi_value integer ) 
2018-06-07 19:16:50,667 INFO   (: [  ]  ) [org.hibernate.tool.hbm2ddl.SchemaExport] (main) HHH000230: Schema export complete
check constructions
2018-06-07 19:16:50,675 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L1 changing  from undefined to REQUIRED xid: null in OuterClass.saveNewInRequired
2018-06-07 19:16:50,676 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L2 changing  from REQUIRED to REQUIRES_NEW xid: null in StatelessEJB.saveInNewTransaction
Hibernate: select sequence_next_hi_value from hibernate_sequences where sequence_name = 'test_entity_1' for update
Hibernate: insert into hibernate_sequences(sequence_name, sequence_next_hi_value) values('test_entity_1', ?)
Hibernate: update hibernate_sequences set sequence_next_hi_value = ? where sequence_next_hi_value = ? and sequence_name = 'test_entity_1'
2018-06-07 19:16:50,679 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L2 finally   in REQUIRES_NEW xid: 5 in StatelessEJB.saveInNewTransaction
Hibernate: insert into test_entity_1 (intAttribute, stringAttribute, id) values (?, ?, ?)
2018-06-07 19:16:50,683 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L2 done      REQUIRES_NEW back to REQUIRED xid: 4 in StatelessEJB.saveInNewTransaction
2018-06-07 19:16:50,684 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L1 finally   in REQUIRED xid: 4 in OuterClass.saveNewInRequired
2018-06-07 19:16:50,684 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L1 done      REQUIRED back to undefined xid: 4 in OuterClass.saveNewInRequired
Hibernate: insert into test_entity_1 (intAttribute, stringAttribute, id) values (?, ?, ?)
Hibernate: select count(testentity0_.id) as col_0_0_ from test_entity_1 testentity0_
Hibernate: select count(testentity0_.id) as col_0_0_ from test_entity_1 testentity0_
2018-06-07 19:16:50,693 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.persistence.PersistenceFactory] (main) destroying persistence factory testdb
2018-06-07 19:16:50,693 INFO   (: [  ]  ) [org.hibernate.tool.hbm2ddl.SchemaExport] (main) HHH000227: Running hbm2ddl schema export
Hibernate: drop table if exists test_entity_1
Hibernate: drop table if exists hibernate_sequences
2018-06-07 19:16:50,695 INFO   (: [  ]  ) [org.hibernate.tool.hbm2ddl.SchemaExport] (main) HHH000230: Schema export complete
2018-06-07 19:16:50,696 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000030: Cleaning up connection pool [jdbc:h2:mem:test;MODE=MySQL;DB_CLOSE_DELAY=0]
2018-06-07 19:16:50,741 ERROR  (: [  ]  ) [CDI-Unit EJB-ExtensionExtended] (main) Self injection of EJB Type com.oneandone.ejbcdiunit.ejbs.SingletonEJB in field selfejb of Class com.oneandone.ejbcdiunit.ejbs.SingletonEJB can't get simulated by ejb-cdi-unit
2018-06-07 19:16:50,807 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.persistence.PersistenceFactory] (main) creating persistence factory testdb
2018-06-07 19:16:50,847 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000402: Using Hibernate built-in connection pool (not for production use!)
2018-06-07 19:16:50,847 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000115: Hibernate connection pool size: 20
2018-06-07 19:16:50,847 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000006: Autocommit mode: true
2018-06-07 19:16:50,848 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000401: using driver [org.h2.Driver] at URL [jdbc:h2:mem:test;MODE=MySQL;DB_CLOSE_DELAY=0]
2018-06-07 19:16:50,848 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000046: Connection properties: {user=sa, autocommit=true, release_mode=auto}
2018-06-07 19:16:50,853 INFO   (: [  ]  ) [org.hibernate.dialect.Dialect] (main) HHH000400: Using dialect: org.hibernate.dialect.MySQL5Dialect
2018-06-07 19:16:50,856 INFO   (: [  ]  ) [org.hibernate.engine.transaction.internal.TransactionFactoryInitiator] (main) HHH000268: Transaction strategy: org.hibernate.engine.transaction.internal.jdbc.JdbcTransactionFactory
2018-06-07 19:16:50,856 INFO   (: [  ]  ) [org.hibernate.hql.internal.ast.ASTQueryTranslatorFactory] (main) HHH000397: Using ASTQueryTranslatorFactory
2018-06-07 19:16:50,868 INFO   (: [  ]  ) [org.hibernate.tool.hbm2ddl.SchemaExport] (main) HHH000227: Running hbm2ddl schema export
Hibernate: drop table if exists test_entity_1
Hibernate: drop table if exists hibernate_sequences
Hibernate: create table test_entity_1 (id bigint not null, intAttribute integer not null, stringAttribute varchar(255), primary key (id))
Hibernate: create table hibernate_sequences ( sequence_name varchar(255),  sequence_next_hi_value integer ) 
2018-06-07 19:16:50,871 INFO   (: [  ]  ) [org.hibernate.tool.hbm2ddl.SchemaExport] (main) HHH000230: Schema export complete
check constructions
2018-06-07 19:16:50,879 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L1 changing  from undefined to REQUIRED xid: null in OuterClass.saveNewInRequiredThrowRTException
2018-06-07 19:16:50,879 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L2 changing  from REQUIRED to REQUIRES_NEW xid: null in StatelessEJB.saveInNewTransaction
Hibernate: select sequence_next_hi_value from hibernate_sequences where sequence_name = 'test_entity_1' for update
Hibernate: insert into hibernate_sequences(sequence_name, sequence_next_hi_value) values('test_entity_1', ?)
Hibernate: update hibernate_sequences set sequence_next_hi_value = ? where sequence_next_hi_value = ? and sequence_name = 'test_entity_1'
2018-06-07 19:16:50,882 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L2 finally   in REQUIRES_NEW xid: 7 in StatelessEJB.saveInNewTransaction
Hibernate: insert into test_entity_1 (intAttribute, stringAttribute, id) values (?, ?, ?)
2018-06-07 19:16:50,886 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L2 done      REQUIRES_NEW back to REQUIRED xid: 6 in StatelessEJB.saveInNewTransaction
2018-06-07 19:16:50,887 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L1 Exception RuntimeException in REQUIRED xid: 6 in OuterClass.saveNewInRequiredThrowRTException
2018-06-07 19:16:50,887 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L1 finally   in REQUIRED xid: null in OuterClass.saveNewInRequiredThrowRTException
2018-06-07 19:16:50,888 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L1 done      REQUIRED back to undefined xid: null in OuterClass.saveNewInRequiredThrowRTException
Hibernate: insert into test_entity_1 (intAttribute, stringAttribute, id) values (?, ?, ?)
Hibernate: select count(testentity0_.id) as col_0_0_ from test_entity_1 testentity0_
Hibernate: select count(testentity0_.id) as col_0_0_ from test_entity_1 testentity0_
2018-06-07 19:16:50,896 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.persistence.PersistenceFactory] (main) destroying persistence factory testdb
2018-06-07 19:16:50,896 INFO   (: [  ]  ) [org.hibernate.tool.hbm2ddl.SchemaExport] (main) HHH000227: Running hbm2ddl schema export
Hibernate: drop table if exists test_entity_1
Hibernate: drop table if exists hibernate_sequences
2018-06-07 19:16:50,898 INFO   (: [  ]  ) [org.hibernate.tool.hbm2ddl.SchemaExport] (main) HHH000230: Schema export complete
2018-06-07 19:16:50,898 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000030: Cleaning up connection pool [jdbc:h2:mem:test;MODE=MySQL;DB_CLOSE_DELAY=0]
2018-06-07 19:16:50,939 ERROR  (: [  ]  ) [CDI-Unit EJB-ExtensionExtended] (main) Self injection of EJB Type com.oneandone.ejbcdiunit.ejbs.SingletonEJB in field selfejb of Class com.oneandone.ejbcdiunit.ejbs.SingletonEJB can't get simulated by ejb-cdi-unit
2018-06-07 19:16:51,003 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.persistence.PersistenceFactory] (main) creating persistence factory testdb
2018-06-07 19:16:51,045 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000402: Using Hibernate built-in connection pool (not for production use!)
2018-06-07 19:16:51,046 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000115: Hibernate connection pool size: 20
2018-06-07 19:16:51,046 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000006: Autocommit mode: true
2018-06-07 19:16:51,046 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000401: using driver [org.h2.Driver] at URL [jdbc:h2:mem:test;MODE=MySQL;DB_CLOSE_DELAY=0]
2018-06-07 19:16:51,046 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000046: Connection properties: {user=sa, autocommit=true, release_mode=auto}
2018-06-07 19:16:51,052 INFO   (: [  ]  ) [org.hibernate.dialect.Dialect] (main) HHH000400: Using dialect: org.hibernate.dialect.MySQL5Dialect
2018-06-07 19:16:51,055 INFO   (: [  ]  ) [org.hibernate.engine.transaction.internal.TransactionFactoryInitiator] (main) HHH000268: Transaction strategy: org.hibernate.engine.transaction.internal.jdbc.JdbcTransactionFactory
2018-06-07 19:16:51,055 INFO   (: [  ]  ) [org.hibernate.hql.internal.ast.ASTQueryTranslatorFactory] (main) HHH000397: Using ASTQueryTranslatorFactory
2018-06-07 19:16:51,069 INFO   (: [  ]  ) [org.hibernate.tool.hbm2ddl.SchemaExport] (main) HHH000227: Running hbm2ddl schema export
Hibernate: drop table if exists test_entity_1
Hibernate: drop table if exists hibernate_sequences
Hibernate: create table test_entity_1 (id bigint not null, intAttribute integer not null, stringAttribute varchar(255), primary key (id))
Hibernate: create table hibernate_sequences ( sequence_name varchar(255),  sequence_next_hi_value integer ) 
2018-06-07 19:16:51,072 INFO   (: [  ]  ) [org.hibernate.tool.hbm2ddl.SchemaExport] (main) HHH000230: Schema export complete
check constructions
2018-06-07 19:16:51,080 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L1 changing  from undefined to REQUIRES_NEW xid: null in StatelessEJB.saveInNewTransaction
Hibernate: select sequence_next_hi_value from hibernate_sequences where sequence_name = 'test_entity_1' for update
Hibernate: insert into hibernate_sequences(sequence_name, sequence_next_hi_value) values('test_entity_1', ?)
Hibernate: update hibernate_sequences set sequence_next_hi_value = ? where sequence_next_hi_value = ? and sequence_name = 'test_entity_1'
2018-06-07 19:16:51,084 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L1 finally   in REQUIRES_NEW xid: 10 in StatelessEJB.saveInNewTransaction
Hibernate: insert into test_entity_1 (intAttribute, stringAttribute, id) values (?, ?, ?)
2018-06-07 19:16:51,088 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L1 done      REQUIRES_NEW back to undefined xid: 9 in StatelessEJB.saveInNewTransaction
Hibernate: insert into test_entity_1 (intAttribute, stringAttribute, id) values (?, ?, ?)
Hibernate: select count(testentity0_.id) as col_0_0_ from test_entity_1 testentity0_
Hibernate: select count(testentity0_.id) as col_0_0_ from test_entity_1 testentity0_
2018-06-07 19:16:51,098 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.persistence.PersistenceFactory] (main) destroying persistence factory testdb
2018-06-07 19:16:51,098 INFO   (: [  ]  ) [org.hibernate.tool.hbm2ddl.SchemaExport] (main) HHH000227: Running hbm2ddl schema export
Hibernate: drop table if exists test_entity_1
Hibernate: drop table if exists hibernate_sequences
2018-06-07 19:16:51,100 INFO   (: [  ]  ) [org.hibernate.tool.hbm2ddl.SchemaExport] (main) HHH000230: Schema export complete
2018-06-07 19:16:51,100 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000030: Cleaning up connection pool [jdbc:h2:mem:test;MODE=MySQL;DB_CLOSE_DELAY=0]
2018-06-07 19:16:51,144 ERROR  (: [  ]  ) [CDI-Unit EJB-ExtensionExtended] (main) Self injection of EJB Type com.oneandone.ejbcdiunit.ejbs.SingletonEJB in field selfejb of Class com.oneandone.ejbcdiunit.ejbs.SingletonEJB can't get simulated by ejb-cdi-unit
2018-06-07 19:16:51,210 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.persistence.PersistenceFactory] (main) creating persistence factory testdb
2018-06-07 19:16:51,248 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000402: Using Hibernate built-in connection pool (not for production use!)
2018-06-07 19:16:51,248 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000115: Hibernate connection pool size: 20
2018-06-07 19:16:51,248 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000006: Autocommit mode: true
2018-06-07 19:16:51,249 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000401: using driver [org.h2.Driver] at URL [jdbc:h2:mem:test;MODE=MySQL;DB_CLOSE_DELAY=0]
2018-06-07 19:16:51,249 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000046: Connection properties: {user=sa, autocommit=true, release_mode=auto}
2018-06-07 19:16:51,253 INFO   (: [  ]  ) [org.hibernate.dialect.Dialect] (main) HHH000400: Using dialect: org.hibernate.dialect.MySQL5Dialect
2018-06-07 19:16:51,256 INFO   (: [  ]  ) [org.hibernate.engine.transaction.internal.TransactionFactoryInitiator] (main) HHH000268: Transaction strategy: org.hibernate.engine.transaction.internal.jdbc.JdbcTransactionFactory
2018-06-07 19:16:51,257 INFO   (: [  ]  ) [org.hibernate.hql.internal.ast.ASTQueryTranslatorFactory] (main) HHH000397: Using ASTQueryTranslatorFactory
2018-06-07 19:16:51,270 INFO   (: [  ]  ) [org.hibernate.tool.hbm2ddl.SchemaExport] (main) HHH000227: Running hbm2ddl schema export
Hibernate: drop table if exists test_entity_1
Hibernate: drop table if exists hibernate_sequences
Hibernate: create table test_entity_1 (id bigint not null, intAttribute integer not null, stringAttribute varchar(255), primary key (id))
Hibernate: create table hibernate_sequences ( sequence_name varchar(255),  sequence_next_hi_value integer ) 
2018-06-07 19:16:51,273 INFO   (: [  ]  ) [org.hibernate.tool.hbm2ddl.SchemaExport] (main) HHH000230: Schema export complete
check constructions
2018-06-07 19:16:51,281 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L1 changing  from undefined to REQUIRED xid: null in OuterClass.saveRequiredInRequired
2018-06-07 19:16:51,282 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L2 changing  from REQUIRED to REQUIRED xid: null in StatelessEJB.saveInCurrentTransaction
Hibernate: select sequence_next_hi_value from hibernate_sequences where sequence_name = 'test_entity_1' for update
Hibernate: insert into hibernate_sequences(sequence_name, sequence_next_hi_value) values('test_entity_1', ?)
Hibernate: update hibernate_sequences set sequence_next_hi_value = ? where sequence_next_hi_value = ? and sequence_name = 'test_entity_1'
2018-06-07 19:16:51,284 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L2 finally   in REQUIRED xid: 11 in StatelessEJB.saveInCurrentTransaction
2018-06-07 19:16:51,285 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L2 done      REQUIRED back to REQUIRED xid: 11 in StatelessEJB.saveInCurrentTransaction
2018-06-07 19:16:51,285 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L1 finally   in REQUIRED xid: 11 in OuterClass.saveRequiredInRequired
2018-06-07 19:16:51,285 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L1 done      REQUIRED back to undefined xid: 11 in OuterClass.saveRequiredInRequired
Hibernate: insert into test_entity_1 (intAttribute, stringAttribute, id) values (?, ?, ?)
Hibernate: insert into test_entity_1 (intAttribute, stringAttribute, id) values (?, ?, ?)
Hibernate: select count(testentity0_.id) as col_0_0_ from test_entity_1 testentity0_
Hibernate: select count(testentity0_.id) as col_0_0_ from test_entity_1 testentity0_
2018-06-07 19:16:51,296 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.persistence.PersistenceFactory] (main) destroying persistence factory testdb
2018-06-07 19:16:51,296 INFO   (: [  ]  ) [org.hibernate.tool.hbm2ddl.SchemaExport] (main) HHH000227: Running hbm2ddl schema export
Hibernate: drop table if exists test_entity_1
Hibernate: drop table if exists hibernate_sequences
2018-06-07 19:16:51,298 INFO   (: [  ]  ) [org.hibernate.tool.hbm2ddl.SchemaExport] (main) HHH000230: Schema export complete
2018-06-07 19:16:51,298 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000030: Cleaning up connection pool [jdbc:h2:mem:test;MODE=MySQL;DB_CLOSE_DELAY=0]
2018-06-07 19:16:51,368 ERROR  (: [  ]  ) [CDI-Unit EJB-ExtensionExtended] (main) Self injection of EJB Type com.oneandone.ejbcdiunit.ejbs.SingletonEJB in field selfejb of Class com.oneandone.ejbcdiunit.ejbs.SingletonEJB can't get simulated by ejb-cdi-unit
2018-06-07 19:16:51,426 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.persistence.PersistenceFactory] (main) creating persistence factory testdb
2018-06-07 19:16:51,459 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000402: Using Hibernate built-in connection pool (not for production use!)
2018-06-07 19:16:51,459 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000115: Hibernate connection pool size: 20
2018-06-07 19:16:51,459 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000006: Autocommit mode: true
2018-06-07 19:16:51,460 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000401: using driver [org.h2.Driver] at URL [jdbc:h2:mem:test;MODE=MySQL;DB_CLOSE_DELAY=0]
2018-06-07 19:16:51,460 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000046: Connection properties: {user=sa, autocommit=true, release_mode=auto}
2018-06-07 19:16:51,466 INFO   (: [  ]  ) [org.hibernate.dialect.Dialect] (main) HHH000400: Using dialect: org.hibernate.dialect.MySQL5Dialect
2018-06-07 19:16:51,469 INFO   (: [  ]  ) [org.hibernate.engine.transaction.internal.TransactionFactoryInitiator] (main) HHH000268: Transaction strategy: org.hibernate.engine.transaction.internal.jdbc.JdbcTransactionFactory
2018-06-07 19:16:51,469 INFO   (: [  ]  ) [org.hibernate.hql.internal.ast.ASTQueryTranslatorFactory] (main) HHH000397: Using ASTQueryTranslatorFactory
2018-06-07 19:16:51,481 INFO   (: [  ]  ) [org.hibernate.tool.hbm2ddl.SchemaExport] (main) HHH000227: Running hbm2ddl schema export
Hibernate: drop table if exists test_entity_1
Hibernate: drop table if exists hibernate_sequences
Hibernate: create table test_entity_1 (id bigint not null, intAttribute integer not null, stringAttribute varchar(255), primary key (id))
Hibernate: create table hibernate_sequences ( sequence_name varchar(255),  sequence_next_hi_value integer ) 
2018-06-07 19:16:51,484 INFO   (: [  ]  ) [org.hibernate.tool.hbm2ddl.SchemaExport] (main) HHH000230: Schema export complete
check constructions
2018-06-07 19:16:51,492 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L1 changing  from undefined to NOT_SUPPORTED xid: null in StatelessBeanManagedTrasEJB.insertWithoutTra
2018-06-07 19:16:51,492 INFO   (: [  ]  ) [ejb-cdi-unit tests] (main) output public variable 200
2018-06-07 19:16:51,492 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L1 Exception TransactionRequiredException in NOT_SUPPORTED xid: null in StatelessBeanManagedTrasEJB.insertWithoutTra
2018-06-07 19:16:51,492 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L1 finally   in NOT_SUPPORTED xid: null in StatelessBeanManagedTrasEJB.insertWithoutTra
2018-06-07 19:16:51,492 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L1 done      NOT_SUPPORTED back to undefined xid: null in StatelessBeanManagedTrasEJB.insertWithoutTra
2018-06-07 19:16:51,493 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.persistence.PersistenceFactory] (main) destroying persistence factory testdb
2018-06-07 19:16:51,493 INFO   (: [  ]  ) [org.hibernate.tool.hbm2ddl.SchemaExport] (main) HHH000227: Running hbm2ddl schema export
Hibernate: drop table if exists test_entity_1
Hibernate: drop table if exists hibernate_sequences
2018-06-07 19:16:51,495 INFO   (: [  ]  ) [org.hibernate.tool.hbm2ddl.SchemaExport] (main) HHH000230: Schema export complete
2018-06-07 19:16:51,495 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000030: Cleaning up connection pool [jdbc:h2:mem:test;MODE=MySQL;DB_CLOSE_DELAY=0]
2018-06-07 19:16:51,541 ERROR  (: [  ]  ) [CDI-Unit EJB-ExtensionExtended] (main) Self injection of EJB Type com.oneandone.ejbcdiunit.ejbs.SingletonEJB in field selfejb of Class com.oneandone.ejbcdiunit.ejbs.SingletonEJB can't get simulated by ejb-cdi-unit
2018-06-07 19:16:51,610 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.persistence.PersistenceFactory] (main) creating persistence factory testdb
2018-06-07 19:16:51,644 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000402: Using Hibernate built-in connection pool (not for production use!)
2018-06-07 19:16:51,645 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000115: Hibernate connection pool size: 20
2018-06-07 19:16:51,645 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000006: Autocommit mode: true
2018-06-07 19:16:51,645 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000401: using driver [org.h2.Driver] at URL [jdbc:h2:mem:test;MODE=MySQL;DB_CLOSE_DELAY=0]
2018-06-07 19:16:51,645 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000046: Connection properties: {user=sa, autocommit=true, release_mode=auto}
2018-06-07 19:16:51,650 INFO   (: [  ]  ) [org.hibernate.dialect.Dialect] (main) HHH000400: Using dialect: org.hibernate.dialect.MySQL5Dialect
2018-06-07 19:16:51,653 INFO   (: [  ]  ) [org.hibernate.engine.transaction.internal.TransactionFactoryInitiator] (main) HHH000268: Transaction strategy: org.hibernate.engine.transaction.internal.jdbc.JdbcTransactionFactory
2018-06-07 19:16:51,654 INFO   (: [  ]  ) [org.hibernate.hql.internal.ast.ASTQueryTranslatorFactory] (main) HHH000397: Using ASTQueryTranslatorFactory
2018-06-07 19:16:51,674 INFO   (: [  ]  ) [org.hibernate.tool.hbm2ddl.SchemaExport] (main) HHH000227: Running hbm2ddl schema export
Hibernate: drop table if exists test_entity_1
Hibernate: drop table if exists hibernate_sequences
Hibernate: create table test_entity_1 (id bigint not null, intAttribute integer not null, stringAttribute varchar(255), primary key (id))
Hibernate: create table hibernate_sequences ( sequence_name varchar(255),  sequence_next_hi_value integer ) 
2018-06-07 19:16:51,676 INFO   (: [  ]  ) [org.hibernate.tool.hbm2ddl.SchemaExport] (main) HHH000230: Schema export complete
check constructions
2018-06-07 19:16:51,686 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L1 changing  from undefined to REQUIRES_NEW xid: null in OuterClass.saveRequiredPlusNewInNewTraButDirectCallAndThrow
2018-06-07 19:16:51,686 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L2 changing  from REQUIRES_NEW to REQUIRED xid: null in StatelessEJB.saveInCurrentTransactionAndSaveNewInNewButDirectCall
Hibernate: select sequence_next_hi_value from hibernate_sequences where sequence_name = 'test_entity_1' for update
Hibernate: insert into hibernate_sequences(sequence_name, sequence_next_hi_value) values('test_entity_1', ?)
Hibernate: update hibernate_sequences set sequence_next_hi_value = ? where sequence_next_hi_value = ? and sequence_name = 'test_entity_1'
2018-06-07 19:16:51,690 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L2 finally   in REQUIRED xid: 13 in StatelessEJB.saveInCurrentTransactionAndSaveNewInNewButDirectCall
2018-06-07 19:16:51,690 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L2 done      REQUIRED back to REQUIRES_NEW xid: 13 in StatelessEJB.saveInCurrentTransactionAndSaveNewInNewButDirectCall
2018-06-07 19:16:51,691 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L1 Exception RuntimeException in REQUIRES_NEW xid: 13 in OuterClass.saveRequiredPlusNewInNewTraButDirectCallAndThrow
2018-06-07 19:16:51,691 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L1 finally   in REQUIRES_NEW xid: 12 in OuterClass.saveRequiredPlusNewInNewTraButDirectCallAndThrow
2018-06-07 19:16:51,692 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L1 done      REQUIRES_NEW back to undefined xid: null in OuterClass.saveRequiredPlusNewInNewTraButDirectCallAndThrow
Hibernate: insert into test_entity_1 (intAttribute, stringAttribute, id) values (?, ?, ?)
Hibernate: select count(testentity0_.id) as col_0_0_ from test_entity_1 testentity0_
Hibernate: select count(testentity0_.id) as col_0_0_ from test_entity_1 testentity0_
2018-06-07 19:16:51,702 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.persistence.PersistenceFactory] (main) destroying persistence factory testdb
2018-06-07 19:16:51,703 INFO   (: [  ]  ) [org.hibernate.tool.hbm2ddl.SchemaExport] (main) HHH000227: Running hbm2ddl schema export
Hibernate: drop table if exists test_entity_1
Hibernate: drop table if exists hibernate_sequences
2018-06-07 19:16:51,705 INFO   (: [  ]  ) [org.hibernate.tool.hbm2ddl.SchemaExport] (main) HHH000230: Schema export complete
2018-06-07 19:16:51,705 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000030: Cleaning up connection pool [jdbc:h2:mem:test;MODE=MySQL;DB_CLOSE_DELAY=0]
2018-06-07 19:16:51,743 ERROR  (: [  ]  ) [CDI-Unit EJB-ExtensionExtended] (main) Self injection of EJB Type com.oneandone.ejbcdiunit.ejbs.SingletonEJB in field selfejb of Class com.oneandone.ejbcdiunit.ejbs.SingletonEJB can't get simulated by ejb-cdi-unit
2018-06-07 19:16:51,806 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.persistence.PersistenceFactory] (main) creating persistence factory testdb
2018-06-07 19:16:51,854 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000402: Using Hibernate built-in connection pool (not for production use!)
2018-06-07 19:16:51,854 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000115: Hibernate connection pool size: 20
2018-06-07 19:16:51,854 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000006: Autocommit mode: true
2018-06-07 19:16:51,855 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000401: using driver [org.h2.Driver] at URL [jdbc:h2:mem:test;MODE=MySQL;DB_CLOSE_DELAY=0]
2018-06-07 19:16:51,855 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000046: Connection properties: {user=sa, autocommit=true, release_mode=auto}
2018-06-07 19:16:51,858 INFO   (: [  ]  ) [org.hibernate.dialect.Dialect] (main) HHH000400: Using dialect: org.hibernate.dialect.MySQL5Dialect
2018-06-07 19:16:51,860 INFO   (: [  ]  ) [org.hibernate.engine.transaction.internal.TransactionFactoryInitiator] (main) HHH000268: Transaction strategy: org.hibernate.engine.transaction.internal.jdbc.JdbcTransactionFactory
2018-06-07 19:16:51,860 INFO   (: [  ]  ) [org.hibernate.hql.internal.ast.ASTQueryTranslatorFactory] (main) HHH000397: Using ASTQueryTranslatorFactory
2018-06-07 19:16:51,869 INFO   (: [  ]  ) [org.hibernate.tool.hbm2ddl.SchemaExport] (main) HHH000227: Running hbm2ddl schema export
Hibernate: drop table if exists test_entity_1
Hibernate: drop table if exists hibernate_sequences
Hibernate: create table test_entity_1 (id bigint not null, intAttribute integer not null, stringAttribute varchar(255), primary key (id))
Hibernate: create table hibernate_sequences ( sequence_name varchar(255),  sequence_next_hi_value integer ) 
2018-06-07 19:16:51,871 INFO   (: [  ]  ) [org.hibernate.tool.hbm2ddl.SchemaExport] (main) HHH000230: Schema export complete
check constructions
2018-06-07 19:16:51,878 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L1 changing  from undefined to REQUIRED xid: null in OuterClass.saveRequiredInRequiredThrowException
2018-06-07 19:16:51,878 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L2 changing  from REQUIRED to REQUIRED xid: null in StatelessEJB.saveInCurrentTransaction
Hibernate: select sequence_next_hi_value from hibernate_sequences where sequence_name = 'test_entity_1' for update
Hibernate: insert into hibernate_sequences(sequence_name, sequence_next_hi_value) values('test_entity_1', ?)
Hibernate: update hibernate_sequences set sequence_next_hi_value = ? where sequence_next_hi_value = ? and sequence_name = 'test_entity_1'
2018-06-07 19:16:51,880 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L2 finally   in REQUIRED xid: 14 in StatelessEJB.saveInCurrentTransaction
2018-06-07 19:16:51,880 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L2 done      REQUIRED back to REQUIRED xid: 14 in StatelessEJB.saveInCurrentTransaction
2018-06-07 19:16:51,881 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L1 Exception RuntimeException in REQUIRED xid: 14 in OuterClass.saveRequiredInRequiredThrowException
2018-06-07 19:16:51,881 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L1 finally   in REQUIRED xid: null in OuterClass.saveRequiredInRequiredThrowException
2018-06-07 19:16:51,881 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L1 done      REQUIRED back to undefined xid: null in OuterClass.saveRequiredInRequiredThrowException
Hibernate: insert into test_entity_1 (intAttribute, stringAttribute, id) values (?, ?, ?)
Hibernate: select count(testentity0_.id) as col_0_0_ from test_entity_1 testentity0_
Hibernate: select count(testentity0_.id) as col_0_0_ from test_entity_1 testentity0_
2018-06-07 19:16:51,889 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.persistence.PersistenceFactory] (main) destroying persistence factory testdb
2018-06-07 19:16:51,890 INFO   (: [  ]  ) [org.hibernate.tool.hbm2ddl.SchemaExport] (main) HHH000227: Running hbm2ddl schema export
Hibernate: drop table if exists test_entity_1
Hibernate: drop table if exists hibernate_sequences
2018-06-07 19:16:51,892 INFO   (: [  ]  ) [org.hibernate.tool.hbm2ddl.SchemaExport] (main) HHH000230: Schema export complete
2018-06-07 19:16:51,892 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000030: Cleaning up connection pool [jdbc:h2:mem:test;MODE=MySQL;DB_CLOSE_DELAY=0]
2018-06-07 19:16:51,931 ERROR  (: [  ]  ) [CDI-Unit EJB-ExtensionExtended] (main) Self injection of EJB Type com.oneandone.ejbcdiunit.ejbs.SingletonEJB in field selfejb of Class com.oneandone.ejbcdiunit.ejbs.SingletonEJB can't get simulated by ejb-cdi-unit
2018-06-07 19:16:51,989 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.persistence.PersistenceFactory] (main) creating persistence factory testdb
2018-06-07 19:16:52,021 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000402: Using Hibernate built-in connection pool (not for production use!)
2018-06-07 19:16:52,021 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000115: Hibernate connection pool size: 20
2018-06-07 19:16:52,022 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000006: Autocommit mode: true
2018-06-07 19:16:52,022 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000401: using driver [org.h2.Driver] at URL [jdbc:h2:mem:test;MODE=MySQL;DB_CLOSE_DELAY=0]
2018-06-07 19:16:52,022 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000046: Connection properties: {user=sa, autocommit=true, release_mode=auto}
2018-06-07 19:16:52,026 INFO   (: [  ]  ) [org.hibernate.dialect.Dialect] (main) HHH000400: Using dialect: org.hibernate.dialect.MySQL5Dialect
2018-06-07 19:16:52,029 INFO   (: [  ]  ) [org.hibernate.engine.transaction.internal.TransactionFactoryInitiator] (main) HHH000268: Transaction strategy: org.hibernate.engine.transaction.internal.jdbc.JdbcTransactionFactory
2018-06-07 19:16:52,029 INFO   (: [  ]  ) [org.hibernate.hql.internal.ast.ASTQueryTranslatorFactory] (main) HHH000397: Using ASTQueryTranslatorFactory
2018-06-07 19:16:52,041 INFO   (: [  ]  ) [org.hibernate.tool.hbm2ddl.SchemaExport] (main) HHH000227: Running hbm2ddl schema export
Hibernate: drop table if exists test_entity_1
Hibernate: drop table if exists hibernate_sequences
Hibernate: create table test_entity_1 (id bigint not null, intAttribute integer not null, stringAttribute varchar(255), primary key (id))
Hibernate: create table hibernate_sequences ( sequence_name varchar(255),  sequence_next_hi_value integer ) 
2018-06-07 19:16:52,043 INFO   (: [  ]  ) [org.hibernate.tool.hbm2ddl.SchemaExport] (main) HHH000230: Schema export complete
check constructions
2018-06-07 19:16:52,052 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L1 changing  from undefined to REQUIRES_NEW xid: null in OuterClass.saveRequiresNewLocalUsingSelfAndThrow
2018-06-07 19:16:52,052 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L2 changing  from REQUIRES_NEW to REQUIRED xid: null in SingletonEJB.saveRequiresNewLocalUsingSelf
Hibernate: select sequence_next_hi_value from hibernate_sequences where sequence_name = 'test_entity_1' for update
Hibernate: insert into hibernate_sequences(sequence_name, sequence_next_hi_value) values('test_entity_1', ?)
Hibernate: update hibernate_sequences set sequence_next_hi_value = ? where sequence_next_hi_value = ? and sequence_name = 'test_entity_1'
2018-06-07 19:16:52,055 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L3 changing  from REQUIRED to REQUIRES_NEW xid: 17 in SingletonEJB.saveInNewTransaction
2018-06-07 19:16:52,056 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L3 finally   in REQUIRES_NEW xid: 18 in SingletonEJB.saveInNewTransaction
Hibernate: insert into test_entity_1 (intAttribute, stringAttribute, id) values (?, ?, ?)
2018-06-07 19:16:52,059 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L3 done      REQUIRES_NEW back to REQUIRED xid: 17 in SingletonEJB.saveInNewTransaction
2018-06-07 19:16:52,060 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L2 finally   in REQUIRED xid: 17 in SingletonEJB.saveRequiresNewLocalUsingSelf
2018-06-07 19:16:52,060 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L2 done      REQUIRED back to REQUIRES_NEW xid: 17 in SingletonEJB.saveRequiresNewLocalUsingSelf
2018-06-07 19:16:52,060 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L1 Exception RuntimeException in REQUIRES_NEW xid: 17 in OuterClass.saveRequiresNewLocalUsingSelfAndThrow
2018-06-07 19:16:52,060 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L1 finally   in REQUIRES_NEW xid: 16 in OuterClass.saveRequiresNewLocalUsingSelfAndThrow
2018-06-07 19:16:52,061 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L1 done      REQUIRES_NEW back to undefined xid: null in OuterClass.saveRequiresNewLocalUsingSelfAndThrow
Hibernate: insert into test_entity_1 (intAttribute, stringAttribute, id) values (?, ?, ?)
Hibernate: select count(testentity0_.id) as col_0_0_ from test_entity_1 testentity0_
Hibernate: select count(testentity0_.id) as col_0_0_ from test_entity_1 testentity0_
2018-06-07 19:16:52,068 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.persistence.PersistenceFactory] (main) destroying persistence factory testdb
2018-06-07 19:16:52,068 INFO   (: [  ]  ) [org.hibernate.tool.hbm2ddl.SchemaExport] (main) HHH000227: Running hbm2ddl schema export
Hibernate: drop table if exists test_entity_1
Hibernate: drop table if exists hibernate_sequences
2018-06-07 19:16:52,070 INFO   (: [  ]  ) [org.hibernate.tool.hbm2ddl.SchemaExport] (main) HHH000230: Schema export complete
2018-06-07 19:16:52,070 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000030: Cleaning up connection pool [jdbc:h2:mem:test;MODE=MySQL;DB_CLOSE_DELAY=0]
2018-06-07 19:16:52,116 ERROR  (: [  ]  ) [CDI-Unit EJB-ExtensionExtended] (main) Self injection of EJB Type com.oneandone.ejbcdiunit.ejbs.SingletonEJB in field selfejb of Class com.oneandone.ejbcdiunit.ejbs.SingletonEJB can't get simulated by ejb-cdi-unit
2018-06-07 19:16:52,169 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.persistence.PersistenceFactory] (main) creating persistence factory testdb
2018-06-07 19:16:52,200 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000402: Using Hibernate built-in connection pool (not for production use!)
2018-06-07 19:16:52,200 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000115: Hibernate connection pool size: 20
2018-06-07 19:16:52,200 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000006: Autocommit mode: true
2018-06-07 19:16:52,200 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000401: using driver [org.h2.Driver] at URL [jdbc:h2:mem:test;MODE=MySQL;DB_CLOSE_DELAY=0]
2018-06-07 19:16:52,200 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000046: Connection properties: {user=sa, autocommit=true, release_mode=auto}
2018-06-07 19:16:52,205 INFO   (: [  ]  ) [org.hibernate.dialect.Dialect] (main) HHH000400: Using dialect: org.hibernate.dialect.MySQL5Dialect
2018-06-07 19:16:52,207 INFO   (: [  ]  ) [org.hibernate.engine.transaction.internal.TransactionFactoryInitiator] (main) HHH000268: Transaction strategy: org.hibernate.engine.transaction.internal.jdbc.JdbcTransactionFactory
2018-06-07 19:16:52,208 INFO   (: [  ]  ) [org.hibernate.hql.internal.ast.ASTQueryTranslatorFactory] (main) HHH000397: Using ASTQueryTranslatorFactory
2018-06-07 19:16:52,219 INFO   (: [  ]  ) [org.hibernate.tool.hbm2ddl.SchemaExport] (main) HHH000227: Running hbm2ddl schema export
Hibernate: drop table if exists test_entity_1
Hibernate: drop table if exists hibernate_sequences
Hibernate: create table test_entity_1 (id bigint not null, intAttribute integer not null, stringAttribute varchar(255), primary key (id))
Hibernate: create table hibernate_sequences ( sequence_name varchar(255),  sequence_next_hi_value integer ) 
2018-06-07 19:16:52,222 INFO   (: [  ]  ) [org.hibernate.tool.hbm2ddl.SchemaExport] (main) HHH000230: Schema export complete
check constructions
2018-06-07 19:16:52,228 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L1 changing  from undefined to REQUIRED xid: null in TransactionalParentEJB.saveInCurrentTransactionRequiredTraAttribute
Hibernate: select sequence_next_hi_value from hibernate_sequences where sequence_name = 'test_entity_1' for update
Hibernate: insert into hibernate_sequences(sequence_name, sequence_next_hi_value) values('test_entity_1', ?)
Hibernate: update hibernate_sequences set sequence_next_hi_value = ? where sequence_next_hi_value = ? and sequence_name = 'test_entity_1'
2018-06-07 19:16:52,231 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L1 finally   in REQUIRED xid: 19 in TransactionalParentEJB.saveInCurrentTransactionRequiredTraAttribute
2018-06-07 19:16:52,231 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L1 done      REQUIRED back to undefined xid: 19 in TransactionalParentEJB.saveInCurrentTransactionRequiredTraAttribute
Hibernate: insert into test_entity_1 (intAttribute, stringAttribute, id) values (?, ?, ?)
2018-06-07 19:16:52,236 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.persistence.PersistenceFactory] (main) destroying persistence factory testdb
2018-06-07 19:16:52,236 INFO   (: [  ]  ) [org.hibernate.tool.hbm2ddl.SchemaExport] (main) HHH000227: Running hbm2ddl schema export
Hibernate: drop table if exists test_entity_1
Hibernate: drop table if exists hibernate_sequences
2018-06-07 19:16:52,238 INFO   (: [  ]  ) [org.hibernate.tool.hbm2ddl.SchemaExport] (main) HHH000230: Schema export complete
2018-06-07 19:16:52,238 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000030: Cleaning up connection pool [jdbc:h2:mem:test;MODE=MySQL;DB_CLOSE_DELAY=0]
2018-06-07 19:16:52,281 ERROR  (: [  ]  ) [CDI-Unit EJB-ExtensionExtended] (main) Self injection of EJB Type com.oneandone.ejbcdiunit.ejbs.SingletonEJB in field selfejb of Class com.oneandone.ejbcdiunit.ejbs.SingletonEJB can't get simulated by ejb-cdi-unit
2018-06-07 19:16:52,332 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.persistence.PersistenceFactory] (main) creating persistence factory testdb
2018-06-07 19:16:52,363 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000402: Using Hibernate built-in connection pool (not for production use!)
2018-06-07 19:16:52,364 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000115: Hibernate connection pool size: 20
2018-06-07 19:16:52,364 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000006: Autocommit mode: true
2018-06-07 19:16:52,364 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000401: using driver [org.h2.Driver] at URL [jdbc:h2:mem:test;MODE=MySQL;DB_CLOSE_DELAY=0]
2018-06-07 19:16:52,365 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000046: Connection properties: {user=sa, autocommit=true, release_mode=auto}
2018-06-07 19:16:52,370 INFO   (: [  ]  ) [org.hibernate.dialect.Dialect] (main) HHH000400: Using dialect: org.hibernate.dialect.MySQL5Dialect
2018-06-07 19:16:52,373 INFO   (: [  ]  ) [org.hibernate.engine.transaction.internal.TransactionFactoryInitiator] (main) HHH000268: Transaction strategy: org.hibernate.engine.transaction.internal.jdbc.JdbcTransactionFactory
2018-06-07 19:16:52,373 INFO   (: [  ]  ) [org.hibernate.hql.internal.ast.ASTQueryTranslatorFactory] (main) HHH000397: Using ASTQueryTranslatorFactory
2018-06-07 19:16:52,385 INFO   (: [  ]  ) [org.hibernate.tool.hbm2ddl.SchemaExport] (main) HHH000227: Running hbm2ddl schema export
Hibernate: drop table if exists test_entity_1
Hibernate: drop table if exists hibernate_sequences
Hibernate: create table test_entity_1 (id bigint not null, intAttribute integer not null, stringAttribute varchar(255), primary key (id))
Hibernate: create table hibernate_sequences ( sequence_name varchar(255),  sequence_next_hi_value integer ) 
2018-06-07 19:16:52,387 INFO   (: [  ]  ) [org.hibernate.tool.hbm2ddl.SchemaExport] (main) HHH000230: Schema export complete
check constructions
2018-06-07 19:16:52,394 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.persistence.PersistenceFactory] (main) destroying persistence factory testdb
2018-06-07 19:16:52,395 INFO   (: [  ]  ) [org.hibernate.tool.hbm2ddl.SchemaExport] (main) HHH000227: Running hbm2ddl schema export
Hibernate: drop table if exists test_entity_1
Hibernate: drop table if exists hibernate_sequences
2018-06-07 19:16:52,397 INFO   (: [  ]  ) [org.hibernate.tool.hbm2ddl.SchemaExport] (main) HHH000230: Schema export complete
2018-06-07 19:16:52,397 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000030: Cleaning up connection pool [jdbc:h2:mem:test;MODE=MySQL;DB_CLOSE_DELAY=0]
2018-06-07 19:16:52,445 ERROR  (: [  ]  ) [CDI-Unit EJB-ExtensionExtended] (main) Self injection of EJB Type com.oneandone.ejbcdiunit.ejbs.SingletonEJB in field selfejb of Class com.oneandone.ejbcdiunit.ejbs.SingletonEJB can't get simulated by ejb-cdi-unit
2018-06-07 19:16:52,520 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.persistence.PersistenceFactory] (main) creating persistence factory testdb
2018-06-07 19:16:52,549 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000402: Using Hibernate built-in connection pool (not for production use!)
2018-06-07 19:16:52,549 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000115: Hibernate connection pool size: 20
2018-06-07 19:16:52,549 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000006: Autocommit mode: true
2018-06-07 19:16:52,549 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000401: using driver [org.h2.Driver] at URL [jdbc:h2:mem:test;MODE=MySQL;DB_CLOSE_DELAY=0]
2018-06-07 19:16:52,549 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000046: Connection properties: {user=sa, autocommit=true, release_mode=auto}
2018-06-07 19:16:52,555 INFO   (: [  ]  ) [org.hibernate.dialect.Dialect] (main) HHH000400: Using dialect: org.hibernate.dialect.MySQL5Dialect
2018-06-07 19:16:52,558 INFO   (: [  ]  ) [org.hibernate.engine.transaction.internal.TransactionFactoryInitiator] (main) HHH000268: Transaction strategy: org.hibernate.engine.transaction.internal.jdbc.JdbcTransactionFactory
2018-06-07 19:16:52,559 INFO   (: [  ]  ) [org.hibernate.hql.internal.ast.ASTQueryTranslatorFactory] (main) HHH000397: Using ASTQueryTranslatorFactory
2018-06-07 19:16:52,570 INFO   (: [  ]  ) [org.hibernate.tool.hbm2ddl.SchemaExport] (main) HHH000227: Running hbm2ddl schema export
Hibernate: drop table if exists test_entity_1
Hibernate: drop table if exists hibernate_sequences
Hibernate: create table test_entity_1 (id bigint not null, intAttribute integer not null, stringAttribute varchar(255), primary key (id))
Hibernate: create table hibernate_sequences ( sequence_name varchar(255),  sequence_next_hi_value integer ) 
2018-06-07 19:16:52,573 INFO   (: [  ]  ) [org.hibernate.tool.hbm2ddl.SchemaExport] (main) HHH000230: Schema export complete
check constructions
2018-06-07 19:16:52,582 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L1 changing  from undefined to REQUIRES_NEW xid: null in OuterClass.saveNewInNewTra
2018-06-07 19:16:52,582 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L2 changing  from REQUIRES_NEW to REQUIRES_NEW xid: null in StatelessEJB.saveInNewTransaction
Hibernate: select sequence_next_hi_value from hibernate_sequences where sequence_name = 'test_entity_1' for update
Hibernate: insert into hibernate_sequences(sequence_name, sequence_next_hi_value) values('test_entity_1', ?)
Hibernate: update hibernate_sequences set sequence_next_hi_value = ? where sequence_next_hi_value = ? and sequence_name = 'test_entity_1'
2018-06-07 19:16:52,585 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L2 finally   in REQUIRES_NEW xid: 22 in StatelessEJB.saveInNewTransaction
Hibernate: insert into test_entity_1 (intAttribute, stringAttribute, id) values (?, ?, ?)
2018-06-07 19:16:52,589 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L2 done      REQUIRES_NEW back to REQUIRES_NEW xid: 21 in StatelessEJB.saveInNewTransaction
2018-06-07 19:16:52,589 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L1 finally   in REQUIRES_NEW xid: 21 in OuterClass.saveNewInNewTra
2018-06-07 19:16:52,589 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L1 done      REQUIRES_NEW back to undefined xid: 20 in OuterClass.saveNewInNewTra
Hibernate: insert into test_entity_1 (intAttribute, stringAttribute, id) values (?, ?, ?)
Hibernate: select count(testentity0_.id) as col_0_0_ from test_entity_1 testentity0_
Hibernate: select count(testentity0_.id) as col_0_0_ from test_entity_1 testentity0_
2018-06-07 19:16:52,598 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.persistence.PersistenceFactory] (main) destroying persistence factory testdb
2018-06-07 19:16:52,598 INFO   (: [  ]  ) [org.hibernate.tool.hbm2ddl.SchemaExport] (main) HHH000227: Running hbm2ddl schema export
Hibernate: drop table if exists test_entity_1
Hibernate: drop table if exists hibernate_sequences
2018-06-07 19:16:52,600 INFO   (: [  ]  ) [org.hibernate.tool.hbm2ddl.SchemaExport] (main) HHH000230: Schema export complete
2018-06-07 19:16:52,600 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000030: Cleaning up connection pool [jdbc:h2:mem:test;MODE=MySQL;DB_CLOSE_DELAY=0]
2018-06-07 19:16:52,644 ERROR  (: [  ]  ) [CDI-Unit EJB-ExtensionExtended] (main) Self injection of EJB Type com.oneandone.ejbcdiunit.ejbs.SingletonEJB in field selfejb of Class com.oneandone.ejbcdiunit.ejbs.SingletonEJB can't get simulated by ejb-cdi-unit
2018-06-07 19:16:52,687 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.persistence.PersistenceFactory] (main) creating persistence factory testdb
2018-06-07 19:16:52,710 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000402: Using Hibernate built-in connection pool (not for production use!)
2018-06-07 19:16:52,710 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000115: Hibernate connection pool size: 20
2018-06-07 19:16:52,710 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000006: Autocommit mode: true
2018-06-07 19:16:52,710 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000401: using driver [org.h2.Driver] at URL [jdbc:h2:mem:test;MODE=MySQL;DB_CLOSE_DELAY=0]
2018-06-07 19:16:52,711 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000046: Connection properties: {user=sa, autocommit=true, release_mode=auto}
2018-06-07 19:16:52,715 INFO   (: [  ]  ) [org.hibernate.dialect.Dialect] (main) HHH000400: Using dialect: org.hibernate.dialect.MySQL5Dialect
2018-06-07 19:16:52,718 INFO   (: [  ]  ) [org.hibernate.engine.transaction.internal.TransactionFactoryInitiator] (main) HHH000268: Transaction strategy: org.hibernate.engine.transaction.internal.jdbc.JdbcTransactionFactory
2018-06-07 19:16:52,718 INFO   (: [  ]  ) [org.hibernate.hql.internal.ast.ASTQueryTranslatorFactory] (main) HHH000397: Using ASTQueryTranslatorFactory
2018-06-07 19:16:52,730 INFO   (: [  ]  ) [org.hibernate.tool.hbm2ddl.SchemaExport] (main) HHH000227: Running hbm2ddl schema export
Hibernate: drop table if exists test_entity_1
Hibernate: drop table if exists hibernate_sequences
Hibernate: create table test_entity_1 (id bigint not null, intAttribute integer not null, stringAttribute varchar(255), primary key (id))
Hibernate: create table hibernate_sequences ( sequence_name varchar(255),  sequence_next_hi_value integer ) 
2018-06-07 19:16:52,733 INFO   (: [  ]  ) [org.hibernate.tool.hbm2ddl.SchemaExport] (main) HHH000230: Schema export complete
check constructions
2018-06-07 19:16:52,738 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L1 changing  from undefined to SUPPORTS xid: null in StatelessEJB.saveInSupportedTransaction
2018-06-07 19:16:52,738 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L1 Exception TransactionRequiredException in SUPPORTS xid: null in StatelessEJB.saveInSupportedTransaction
2018-06-07 19:16:52,739 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L1 finally   in SUPPORTS xid: null in StatelessEJB.saveInSupportedTransaction
2018-06-07 19:16:52,739 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L1 done      SUPPORTS back to undefined xid: null in StatelessEJB.saveInSupportedTransaction
2018-06-07 19:16:52,740 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.persistence.PersistenceFactory] (main) destroying persistence factory testdb
2018-06-07 19:16:52,740 INFO   (: [  ]  ) [org.hibernate.tool.hbm2ddl.SchemaExport] (main) HHH000227: Running hbm2ddl schema export
Hibernate: drop table if exists test_entity_1
Hibernate: drop table if exists hibernate_sequences
2018-06-07 19:16:52,742 INFO   (: [  ]  ) [org.hibernate.tool.hbm2ddl.SchemaExport] (main) HHH000230: Schema export complete
2018-06-07 19:16:52,742 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000030: Cleaning up connection pool [jdbc:h2:mem:test;MODE=MySQL;DB_CLOSE_DELAY=0]
2018-06-07 19:16:52,777 ERROR  (: [  ]  ) [CDI-Unit EJB-ExtensionExtended] (main) Self injection of EJB Type com.oneandone.ejbcdiunit.ejbs.SingletonEJB in field selfejb of Class com.oneandone.ejbcdiunit.ejbs.SingletonEJB can't get simulated by ejb-cdi-unit
2018-06-07 19:16:52,817 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.persistence.PersistenceFactory] (main) creating persistence factory testdb
2018-06-07 19:16:52,838 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000402: Using Hibernate built-in connection pool (not for production use!)
2018-06-07 19:16:52,838 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000115: Hibernate connection pool size: 20
2018-06-07 19:16:52,838 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000006: Autocommit mode: true
2018-06-07 19:16:52,839 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000401: using driver [org.h2.Driver] at URL [jdbc:h2:mem:test;MODE=MySQL;DB_CLOSE_DELAY=0]
2018-06-07 19:16:52,839 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000046: Connection properties: {user=sa, autocommit=true, release_mode=auto}
2018-06-07 19:16:52,841 INFO   (: [  ]  ) [org.hibernate.dialect.Dialect] (main) HHH000400: Using dialect: org.hibernate.dialect.MySQL5Dialect
2018-06-07 19:16:52,843 INFO   (: [  ]  ) [org.hibernate.engine.transaction.internal.TransactionFactoryInitiator] (main) HHH000268: Transaction strategy: org.hibernate.engine.transaction.internal.jdbc.JdbcTransactionFactory
2018-06-07 19:16:52,843 INFO   (: [  ]  ) [org.hibernate.hql.internal.ast.ASTQueryTranslatorFactory] (main) HHH000397: Using ASTQueryTranslatorFactory
2018-06-07 19:16:52,850 INFO   (: [  ]  ) [org.hibernate.tool.hbm2ddl.SchemaExport] (main) HHH000227: Running hbm2ddl schema export
Hibernate: drop table if exists test_entity_1
Hibernate: drop table if exists hibernate_sequences
Hibernate: create table test_entity_1 (id bigint not null, intAttribute integer not null, stringAttribute varchar(255), primary key (id))
Hibernate: create table hibernate_sequences ( sequence_name varchar(255),  sequence_next_hi_value integer ) 
2018-06-07 19:16:52,852 INFO   (: [  ]  ) [org.hibernate.tool.hbm2ddl.SchemaExport] (main) HHH000230: Schema export complete
check constructions
2018-06-07 19:16:52,857 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L1 changing  from undefined to NOT_SUPPORTED xid: null in StatelessBeanManagedTrasEJB.insertNewInTra
2018-06-07 19:16:52,857 INFO   (: [  ]  ) [ejb-cdi-unit tests] (main) output public variable 200
Hibernate: select sequence_next_hi_value from hibernate_sequences where sequence_name = 'test_entity_1' for update
Hibernate: insert into hibernate_sequences(sequence_name, sequence_next_hi_value) values('test_entity_1', ?)
Hibernate: update hibernate_sequences set sequence_next_hi_value = ? where sequence_next_hi_value = ? and sequence_name = 'test_entity_1'
Hibernate: insert into test_entity_1 (intAttribute, stringAttribute, id) values (?, ?, ?)
2018-06-07 19:16:52,862 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L1 finally   in NOT_SUPPORTED xid: null in StatelessBeanManagedTrasEJB.insertNewInTra
2018-06-07 19:16:52,862 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L1 done      NOT_SUPPORTED back to undefined xid: null in StatelessBeanManagedTrasEJB.insertNewInTra
2018-06-07 19:16:52,863 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.persistence.PersistenceFactory] (main) destroying persistence factory testdb
2018-06-07 19:16:52,863 INFO   (: [  ]  ) [org.hibernate.tool.hbm2ddl.SchemaExport] (main) HHH000227: Running hbm2ddl schema export
Hibernate: drop table if exists test_entity_1
Hibernate: drop table if exists hibernate_sequences
2018-06-07 19:16:52,864 INFO   (: [  ]  ) [org.hibernate.tool.hbm2ddl.SchemaExport] (main) HHH000230: Schema export complete
2018-06-07 19:16:52,864 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000030: Cleaning up connection pool [jdbc:h2:mem:test;MODE=MySQL;DB_CLOSE_DELAY=0]
2018-06-07 19:16:52,894 ERROR  (: [  ]  ) [CDI-Unit EJB-ExtensionExtended] (main) Self injection of EJB Type com.oneandone.ejbcdiunit.ejbs.SingletonEJB in field selfejb of Class com.oneandone.ejbcdiunit.ejbs.SingletonEJB can't get simulated by ejb-cdi-unit
2018-06-07 19:16:52,934 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.persistence.PersistenceFactory] (main) creating persistence factory testdb
2018-06-07 19:16:52,956 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000402: Using Hibernate built-in connection pool (not for production use!)
2018-06-07 19:16:52,956 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000115: Hibernate connection pool size: 20
2018-06-07 19:16:52,957 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000006: Autocommit mode: true
2018-06-07 19:16:52,957 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000401: using driver [org.h2.Driver] at URL [jdbc:h2:mem:test;MODE=MySQL;DB_CLOSE_DELAY=0]
2018-06-07 19:16:52,957 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000046: Connection properties: {user=sa, autocommit=true, release_mode=auto}
2018-06-07 19:16:52,959 INFO   (: [  ]  ) [org.hibernate.dialect.Dialect] (main) HHH000400: Using dialect: org.hibernate.dialect.MySQL5Dialect
2018-06-07 19:16:52,961 INFO   (: [  ]  ) [org.hibernate.engine.transaction.internal.TransactionFactoryInitiator] (main) HHH000268: Transaction strategy: org.hibernate.engine.transaction.internal.jdbc.JdbcTransactionFactory
2018-06-07 19:16:52,962 INFO   (: [  ]  ) [org.hibernate.hql.internal.ast.ASTQueryTranslatorFactory] (main) HHH000397: Using ASTQueryTranslatorFactory
2018-06-07 19:16:52,972 INFO   (: [  ]  ) [org.hibernate.tool.hbm2ddl.SchemaExport] (main) HHH000227: Running hbm2ddl schema export
Hibernate: drop table if exists test_entity_1
Hibernate: drop table if exists hibernate_sequences
Hibernate: create table test_entity_1 (id bigint not null, intAttribute integer not null, stringAttribute varchar(255), primary key (id))
Hibernate: create table hibernate_sequences ( sequence_name varchar(255),  sequence_next_hi_value integer ) 
2018-06-07 19:16:52,974 INFO   (: [  ]  ) [org.hibernate.tool.hbm2ddl.SchemaExport] (main) HHH000230: Schema export complete
check constructions
2018-06-07 19:16:52,979 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L1 changing  from undefined to REQUIRES_NEW xid: null in OuterClass.saveRequiresNewLocalAsBusinessObjectAndThrow
2018-06-07 19:16:52,980 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L2 changing  from REQUIRES_NEW to REQUIRED xid: null in StatelessEJB.saveRequiresNewLocalAsBusinessObject
Hibernate: select sequence_next_hi_value from hibernate_sequences where sequence_name = 'test_entity_1' for update
Hibernate: insert into hibernate_sequences(sequence_name, sequence_next_hi_value) values('test_entity_1', ?)
Hibernate: update hibernate_sequences set sequence_next_hi_value = ? where sequence_next_hi_value = ? and sequence_name = 'test_entity_1'
2018-06-07 19:16:52,991 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L3 changing  from REQUIRED to REQUIRES_NEW xid: 25 in StatelessEJB.saveInNewTransaction
2018-06-07 19:16:52,991 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L3 finally   in REQUIRES_NEW xid: 26 in StatelessEJB.saveInNewTransaction
Hibernate: insert into test_entity_1 (intAttribute, stringAttribute, id) values (?, ?, ?)
2018-06-07 19:16:52,994 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L3 done      REQUIRES_NEW back to REQUIRED xid: 25 in StatelessEJB.saveInNewTransaction
2018-06-07 19:16:52,994 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L2 finally   in REQUIRED xid: 25 in StatelessEJB.saveRequiresNewLocalAsBusinessObject
2018-06-07 19:16:52,994 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L2 done      REQUIRED back to REQUIRES_NEW xid: 25 in StatelessEJB.saveRequiresNewLocalAsBusinessObject
2018-06-07 19:16:52,994 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L1 Exception RuntimeException in REQUIRES_NEW xid: 25 in OuterClass.saveRequiresNewLocalAsBusinessObjectAndThrow
2018-06-07 19:16:52,995 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L1 finally   in REQUIRES_NEW xid: 24 in OuterClass.saveRequiresNewLocalAsBusinessObjectAndThrow
2018-06-07 19:16:52,995 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L1 done      REQUIRES_NEW back to undefined xid: null in OuterClass.saveRequiresNewLocalAsBusinessObjectAndThrow
Hibernate: insert into test_entity_1 (intAttribute, stringAttribute, id) values (?, ?, ?)
Hibernate: select count(testentity0_.id) as col_0_0_ from test_entity_1 testentity0_
Hibernate: select count(testentity0_.id) as col_0_0_ from test_entity_1 testentity0_
2018-06-07 19:16:53,001 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.persistence.PersistenceFactory] (main) destroying persistence factory testdb
2018-06-07 19:16:53,002 INFO   (: [  ]  ) [org.hibernate.tool.hbm2ddl.SchemaExport] (main) HHH000227: Running hbm2ddl schema export
Hibernate: drop table if exists test_entity_1
Hibernate: drop table if exists hibernate_sequences
2018-06-07 19:16:53,003 INFO   (: [  ]  ) [org.hibernate.tool.hbm2ddl.SchemaExport] (main) HHH000230: Schema export complete
2018-06-07 19:16:53,003 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000030: Cleaning up connection pool [jdbc:h2:mem:test;MODE=MySQL;DB_CLOSE_DELAY=0]
2018-06-07 19:16:53,036 ERROR  (: [  ]  ) [CDI-Unit EJB-ExtensionExtended] (main) Self injection of EJB Type com.oneandone.ejbcdiunit.ejbs.SingletonEJB in field selfejb of Class com.oneandone.ejbcdiunit.ejbs.SingletonEJB can't get simulated by ejb-cdi-unit
2018-06-07 19:16:53,073 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.persistence.PersistenceFactory] (main) creating persistence factory testdb
2018-06-07 19:16:53,094 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000402: Using Hibernate built-in connection pool (not for production use!)
2018-06-07 19:16:53,094 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000115: Hibernate connection pool size: 20
2018-06-07 19:16:53,094 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000006: Autocommit mode: true
2018-06-07 19:16:53,094 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000401: using driver [org.h2.Driver] at URL [jdbc:h2:mem:test;MODE=MySQL;DB_CLOSE_DELAY=0]
2018-06-07 19:16:53,094 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000046: Connection properties: {user=sa, autocommit=true, release_mode=auto}
2018-06-07 19:16:53,098 INFO   (: [  ]  ) [org.hibernate.dialect.Dialect] (main) HHH000400: Using dialect: org.hibernate.dialect.MySQL5Dialect
2018-06-07 19:16:53,100 INFO   (: [  ]  ) [org.hibernate.engine.transaction.internal.TransactionFactoryInitiator] (main) HHH000268: Transaction strategy: org.hibernate.engine.transaction.internal.jdbc.JdbcTransactionFactory
2018-06-07 19:16:53,100 INFO   (: [  ]  ) [org.hibernate.hql.internal.ast.ASTQueryTranslatorFactory] (main) HHH000397: Using ASTQueryTranslatorFactory
2018-06-07 19:16:53,109 INFO   (: [  ]  ) [org.hibernate.tool.hbm2ddl.SchemaExport] (main) HHH000227: Running hbm2ddl schema export
Hibernate: drop table if exists test_entity_1
Hibernate: drop table if exists hibernate_sequences
Hibernate: create table test_entity_1 (id bigint not null, intAttribute integer not null, stringAttribute varchar(255), primary key (id))
Hibernate: create table hibernate_sequences ( sequence_name varchar(255),  sequence_next_hi_value integer ) 
2018-06-07 19:16:53,111 INFO   (: [  ]  ) [org.hibernate.tool.hbm2ddl.SchemaExport] (main) HHH000230: Schema export complete
check constructions
2018-06-07 19:16:53,117 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L1 changing  from undefined to REQUIRED xid: null in StatelessEJB.saveInCurrentTransactionDefaultTraAttribute
2018-06-07 19:16:53,117 INFO   (: [  ]  ) [ejb-cdi-unit tests] (main) output public variable 200
Hibernate: select sequence_next_hi_value from hibernate_sequences where sequence_name = 'test_entity_1' for update
Hibernate: insert into hibernate_sequences(sequence_name, sequence_next_hi_value) values('test_entity_1', ?)
Hibernate: update hibernate_sequences set sequence_next_hi_value = ? where sequence_next_hi_value = ? and sequence_name = 'test_entity_1'
2018-06-07 19:16:53,119 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L1 finally   in REQUIRED xid: 27 in StatelessEJB.saveInCurrentTransactionDefaultTraAttribute
2018-06-07 19:16:53,119 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L1 done      REQUIRED back to undefined xid: 27 in StatelessEJB.saveInCurrentTransactionDefaultTraAttribute
Hibernate: insert into test_entity_1 (intAttribute, stringAttribute, id) values (?, ?, ?)
Hibernate: insert into test_entity_1 (intAttribute, stringAttribute, id) values (?, ?, ?)
Hibernate: select count(testentity0_.id) as col_0_0_ from test_entity_1 testentity0_
Hibernate: select count(testentity0_.id) as col_0_0_ from test_entity_1 testentity0_
2018-06-07 19:16:53,126 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.persistence.PersistenceFactory] (main) destroying persistence factory testdb
2018-06-07 19:16:53,127 INFO   (: [  ]  ) [org.hibernate.tool.hbm2ddl.SchemaExport] (main) HHH000227: Running hbm2ddl schema export
Hibernate: drop table if exists test_entity_1
Hibernate: drop table if exists hibernate_sequences
2018-06-07 19:16:53,128 INFO   (: [  ]  ) [org.hibernate.tool.hbm2ddl.SchemaExport] (main) HHH000230: Schema export complete
2018-06-07 19:16:53,128 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000030: Cleaning up connection pool [jdbc:h2:mem:test;MODE=MySQL;DB_CLOSE_DELAY=0]
2018-06-07 19:16:53,158 ERROR  (: [  ]  ) [CDI-Unit EJB-ExtensionExtended] (main) Self injection of EJB Type com.oneandone.ejbcdiunit.ejbs.SingletonEJB in field selfejb of Class com.oneandone.ejbcdiunit.ejbs.SingletonEJB can't get simulated by ejb-cdi-unit
2018-06-07 19:16:53,196 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.persistence.PersistenceFactory] (main) creating persistence factory testdb
2018-06-07 19:16:53,216 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000402: Using Hibernate built-in connection pool (not for production use!)
2018-06-07 19:16:53,216 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000115: Hibernate connection pool size: 20
2018-06-07 19:16:53,217 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000006: Autocommit mode: true
2018-06-07 19:16:53,217 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000401: using driver [org.h2.Driver] at URL [jdbc:h2:mem:test;MODE=MySQL;DB_CLOSE_DELAY=0]
2018-06-07 19:16:53,217 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000046: Connection properties: {user=sa, autocommit=true, release_mode=auto}
2018-06-07 19:16:53,220 INFO   (: [  ]  ) [org.hibernate.dialect.Dialect] (main) HHH000400: Using dialect: org.hibernate.dialect.MySQL5Dialect
2018-06-07 19:16:53,222 INFO   (: [  ]  ) [org.hibernate.engine.transaction.internal.TransactionFactoryInitiator] (main) HHH000268: Transaction strategy: org.hibernate.engine.transaction.internal.jdbc.JdbcTransactionFactory
2018-06-07 19:16:53,222 INFO   (: [  ]  ) [org.hibernate.hql.internal.ast.ASTQueryTranslatorFactory] (main) HHH000397: Using ASTQueryTranslatorFactory
2018-06-07 19:16:53,230 INFO   (: [  ]  ) [org.hibernate.tool.hbm2ddl.SchemaExport] (main) HHH000227: Running hbm2ddl schema export
Hibernate: drop table if exists test_entity_1
Hibernate: drop table if exists hibernate_sequences
Hibernate: create table test_entity_1 (id bigint not null, intAttribute integer not null, stringAttribute varchar(255), primary key (id))
Hibernate: create table hibernate_sequences ( sequence_name varchar(255),  sequence_next_hi_value integer ) 
2018-06-07 19:16:53,232 INFO   (: [  ]  ) [org.hibernate.tool.hbm2ddl.SchemaExport] (main) HHH000230: Schema export complete
check constructions
2018-06-07 19:16:53,237 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L1 changing  from undefined to REQUIRES_NEW xid: null in OuterClass.saveRequiredInNewTra
2018-06-07 19:16:53,238 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L2 changing  from REQUIRES_NEW to REQUIRED xid: null in StatelessEJB.saveInCurrentTransaction
Hibernate: select sequence_next_hi_value from hibernate_sequences where sequence_name = 'test_entity_1' for update
Hibernate: insert into hibernate_sequences(sequence_name, sequence_next_hi_value) values('test_entity_1', ?)
Hibernate: update hibernate_sequences set sequence_next_hi_value = ? where sequence_next_hi_value = ? and sequence_name = 'test_entity_1'
2018-06-07 19:16:53,240 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L2 finally   in REQUIRED xid: 29 in StatelessEJB.saveInCurrentTransaction
2018-06-07 19:16:53,240 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L2 done      REQUIRED back to REQUIRES_NEW xid: 29 in StatelessEJB.saveInCurrentTransaction
2018-06-07 19:16:53,240 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L1 finally   in REQUIRES_NEW xid: 29 in OuterClass.saveRequiredInNewTra
Hibernate: insert into test_entity_1 (intAttribute, stringAttribute, id) values (?, ?, ?)
2018-06-07 19:16:53,242 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L1 done      REQUIRES_NEW back to undefined xid: 28 in OuterClass.saveRequiredInNewTra
Hibernate: insert into test_entity_1 (intAttribute, stringAttribute, id) values (?, ?, ?)
Hibernate: select count(testentity0_.id) as col_0_0_ from test_entity_1 testentity0_
Hibernate: select count(testentity0_.id) as col_0_0_ from test_entity_1 testentity0_
2018-06-07 19:16:53,247 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.persistence.PersistenceFactory] (main) destroying persistence factory testdb
2018-06-07 19:16:53,248 INFO   (: [  ]  ) [org.hibernate.tool.hbm2ddl.SchemaExport] (main) HHH000227: Running hbm2ddl schema export
Hibernate: drop table if exists test_entity_1
Hibernate: drop table if exists hibernate_sequences
2018-06-07 19:16:53,249 INFO   (: [  ]  ) [org.hibernate.tool.hbm2ddl.SchemaExport] (main) HHH000230: Schema export complete
2018-06-07 19:16:53,249 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000030: Cleaning up connection pool [jdbc:h2:mem:test;MODE=MySQL;DB_CLOSE_DELAY=0]
2018-06-07 19:16:53,281 ERROR  (: [  ]  ) [CDI-Unit EJB-ExtensionExtended] (main) Self injection of EJB Type com.oneandone.ejbcdiunit.ejbs.SingletonEJB in field selfejb of Class com.oneandone.ejbcdiunit.ejbs.SingletonEJB can't get simulated by ejb-cdi-unit
2018-06-07 19:16:53,349 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.persistence.PersistenceFactory] (main) creating persistence factory testdb
2018-06-07 19:16:53,378 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000402: Using Hibernate built-in connection pool (not for production use!)
2018-06-07 19:16:53,378 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000115: Hibernate connection pool size: 20
2018-06-07 19:16:53,378 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000006: Autocommit mode: true
2018-06-07 19:16:53,378 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000401: using driver [org.h2.Driver] at URL [jdbc:h2:mem:test;MODE=MySQL;DB_CLOSE_DELAY=0]
2018-06-07 19:16:53,379 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000046: Connection properties: {user=sa, autocommit=true, release_mode=auto}
2018-06-07 19:16:53,382 INFO   (: [  ]  ) [org.hibernate.dialect.Dialect] (main) HHH000400: Using dialect: org.hibernate.dialect.MySQL5Dialect
2018-06-07 19:16:53,385 INFO   (: [  ]  ) [org.hibernate.engine.transaction.internal.TransactionFactoryInitiator] (main) HHH000268: Transaction strategy: org.hibernate.engine.transaction.internal.jdbc.JdbcTransactionFactory
2018-06-07 19:16:53,385 INFO   (: [  ]  ) [org.hibernate.hql.internal.ast.ASTQueryTranslatorFactory] (main) HHH000397: Using ASTQueryTranslatorFactory
2018-06-07 19:16:53,394 INFO   (: [  ]  ) [org.hibernate.tool.hbm2ddl.SchemaExport] (main) HHH000227: Running hbm2ddl schema export
Hibernate: drop table if exists test_entity_1
Hibernate: drop table if exists hibernate_sequences
Hibernate: create table test_entity_1 (id bigint not null, intAttribute integer not null, stringAttribute varchar(255), primary key (id))
Hibernate: create table hibernate_sequences ( sequence_name varchar(255),  sequence_next_hi_value integer ) 
2018-06-07 19:16:53,395 INFO   (: [  ]  ) [org.hibernate.tool.hbm2ddl.SchemaExport] (main) HHH000230: Schema export complete
check constructions
2018-06-07 19:16:53,401 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L1 changing  from undefined to REQUIRES_NEW xid: null in OuterClass.saveToSetRollbackOnlyAndTryAdditionalSave
2018-06-07 19:16:53,401 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L2 changing  from REQUIRES_NEW to REQUIRED xid: null in StatelessEJB.persistRequiredAndRTException
Hibernate: select sequence_next_hi_value from hibernate_sequences where sequence_name = 'test_entity_1' for update
Hibernate: insert into hibernate_sequences(sequence_name, sequence_next_hi_value) values('test_entity_1', ?)
Hibernate: update hibernate_sequences set sequence_next_hi_value = ? where sequence_next_hi_value = ? and sequence_name = 'test_entity_1'
2018-06-07 19:16:53,404 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L2 Exception RuntimeException in REQUIRED xid: 31 in StatelessEJB.persistRequiredAndRTException
2018-06-07 19:16:53,404 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L2 finally   in REQUIRED xid: null in StatelessEJB.persistRequiredAndRTException
2018-06-07 19:16:53,404 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L2 done      REQUIRED back to REQUIRES_NEW xid: null in StatelessEJB.persistRequiredAndRTException
2018-06-07 19:16:53,404 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L2 changing  from REQUIRES_NEW to REQUIRED xid: null in StatelessEJB.saveInCurrentTransaction
2018-06-07 19:16:53,405 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L2 Exception TransactionRequiredException in REQUIRED xid: null in StatelessEJB.saveInCurrentTransaction
2018-06-07 19:16:53,405 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L2 finally   in REQUIRED xid: null in StatelessEJB.saveInCurrentTransaction
2018-06-07 19:16:53,405 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L2 done      REQUIRED back to REQUIRES_NEW xid: null in StatelessEJB.saveInCurrentTransaction
2018-06-07 19:16:53,405 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L1 Exception EJBException in REQUIRES_NEW xid: null in OuterClass.saveToSetRollbackOnlyAndTryAdditionalSave
2018-06-07 19:16:53,405 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L1 finally   in REQUIRES_NEW xid: null in OuterClass.saveToSetRollbackOnlyAndTryAdditionalSave
2018-06-07 19:16:53,405 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L1 done      REQUIRES_NEW back to undefined xid: 30 in OuterClass.saveToSetRollbackOnlyAndTryAdditionalSave
Hibernate: insert into test_entity_1 (intAttribute, stringAttribute, id) values (?, ?, ?)
Hibernate: select count(testentity0_.id) as col_0_0_ from test_entity_1 testentity0_
Hibernate: select count(testentity0_.id) as col_0_0_ from test_entity_1 testentity0_
2018-06-07 19:16:53,412 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.persistence.PersistenceFactory] (main) destroying persistence factory testdb
2018-06-07 19:16:53,412 INFO   (: [  ]  ) [org.hibernate.tool.hbm2ddl.SchemaExport] (main) HHH000227: Running hbm2ddl schema export
Hibernate: drop table if exists test_entity_1
Hibernate: drop table if exists hibernate_sequences
2018-06-07 19:16:53,413 INFO   (: [  ]  ) [org.hibernate.tool.hbm2ddl.SchemaExport] (main) HHH000230: Schema export complete
2018-06-07 19:16:53,413 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000030: Cleaning up connection pool [jdbc:h2:mem:test;MODE=MySQL;DB_CLOSE_DELAY=0]
2018-06-07 19:16:53,443 ERROR  (: [  ]  ) [CDI-Unit EJB-ExtensionExtended] (main) Self injection of EJB Type com.oneandone.ejbcdiunit.ejbs.SingletonEJB in field selfejb of Class com.oneandone.ejbcdiunit.ejbs.SingletonEJB can't get simulated by ejb-cdi-unit
2018-06-07 19:16:53,482 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.persistence.PersistenceFactory] (main) creating persistence factory testdb
2018-06-07 19:16:53,510 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000402: Using Hibernate built-in connection pool (not for production use!)
2018-06-07 19:16:53,511 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000115: Hibernate connection pool size: 20
2018-06-07 19:16:53,511 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000006: Autocommit mode: true
2018-06-07 19:16:53,511 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000401: using driver [org.h2.Driver] at URL [jdbc:h2:mem:test;MODE=MySQL;DB_CLOSE_DELAY=0]
2018-06-07 19:16:53,511 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000046: Connection properties: {user=sa, autocommit=true, release_mode=auto}
2018-06-07 19:16:53,515 INFO   (: [  ]  ) [org.hibernate.dialect.Dialect] (main) HHH000400: Using dialect: org.hibernate.dialect.MySQL5Dialect
2018-06-07 19:16:53,517 INFO   (: [  ]  ) [org.hibernate.engine.transaction.internal.TransactionFactoryInitiator] (main) HHH000268: Transaction strategy: org.hibernate.engine.transaction.internal.jdbc.JdbcTransactionFactory
2018-06-07 19:16:53,518 INFO   (: [  ]  ) [org.hibernate.hql.internal.ast.ASTQueryTranslatorFactory] (main) HHH000397: Using ASTQueryTranslatorFactory
2018-06-07 19:16:53,529 INFO   (: [  ]  ) [org.hibernate.tool.hbm2ddl.SchemaExport] (main) HHH000227: Running hbm2ddl schema export
Hibernate: drop table if exists test_entity_1
Hibernate: drop table if exists hibernate_sequences
Hibernate: create table test_entity_1 (id bigint not null, intAttribute integer not null, stringAttribute varchar(255), primary key (id))
Hibernate: create table hibernate_sequences ( sequence_name varchar(255),  sequence_next_hi_value integer ) 
2018-06-07 19:16:53,531 INFO   (: [  ]  ) [org.hibernate.tool.hbm2ddl.SchemaExport] (main) HHH000230: Schema export complete
check constructions
2018-06-07 19:16:53,537 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L1 changing  from undefined to NEVER xid: null in TransactionalParentEJB.saveInCurrentTransactionNeverTraAttribute
2018-06-07 19:16:53,537 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L1 Exception TransactionRequiredException in NEVER xid: null in TransactionalParentEJB.saveInCurrentTransactionNeverTraAttribute
2018-06-07 19:16:53,538 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L1 finally   in NEVER xid: null in TransactionalParentEJB.saveInCurrentTransactionNeverTraAttribute
2018-06-07 19:16:53,538 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L1 done      NEVER back to undefined xid: null in TransactionalParentEJB.saveInCurrentTransactionNeverTraAttribute
2018-06-07 19:16:53,539 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.persistence.PersistenceFactory] (main) destroying persistence factory testdb
2018-06-07 19:16:53,539 INFO   (: [  ]  ) [org.hibernate.tool.hbm2ddl.SchemaExport] (main) HHH000227: Running hbm2ddl schema export
Hibernate: drop table if exists test_entity_1
Hibernate: drop table if exists hibernate_sequences
2018-06-07 19:16:53,541 INFO   (: [  ]  ) [org.hibernate.tool.hbm2ddl.SchemaExport] (main) HHH000230: Schema export complete
2018-06-07 19:16:53,541 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000030: Cleaning up connection pool [jdbc:h2:mem:test;MODE=MySQL;DB_CLOSE_DELAY=0]
2018-06-07 19:16:53,583 ERROR  (: [  ]  ) [CDI-Unit EJB-ExtensionExtended] (main) Self injection of EJB Type com.oneandone.ejbcdiunit.ejbs.SingletonEJB in field selfejb of Class com.oneandone.ejbcdiunit.ejbs.SingletonEJB can't get simulated by ejb-cdi-unit
2018-06-07 19:16:53,628 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.persistence.PersistenceFactory] (main) creating persistence factory testdb
2018-06-07 19:16:53,656 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000402: Using Hibernate built-in connection pool (not for production use!)
2018-06-07 19:16:53,656 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000115: Hibernate connection pool size: 20
2018-06-07 19:16:53,656 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000006: Autocommit mode: true
2018-06-07 19:16:53,657 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000401: using driver [org.h2.Driver] at URL [jdbc:h2:mem:test;MODE=MySQL;DB_CLOSE_DELAY=0]
2018-06-07 19:16:53,657 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000046: Connection properties: {user=sa, autocommit=true, release_mode=auto}
2018-06-07 19:16:53,660 INFO   (: [  ]  ) [org.hibernate.dialect.Dialect] (main) HHH000400: Using dialect: org.hibernate.dialect.MySQL5Dialect
2018-06-07 19:16:53,663 INFO   (: [  ]  ) [org.hibernate.engine.transaction.internal.TransactionFactoryInitiator] (main) HHH000268: Transaction strategy: org.hibernate.engine.transaction.internal.jdbc.JdbcTransactionFactory
2018-06-07 19:16:53,663 INFO   (: [  ]  ) [org.hibernate.hql.internal.ast.ASTQueryTranslatorFactory] (main) HHH000397: Using ASTQueryTranslatorFactory
2018-06-07 19:16:53,675 INFO   (: [  ]  ) [org.hibernate.tool.hbm2ddl.SchemaExport] (main) HHH000227: Running hbm2ddl schema export
Hibernate: drop table if exists test_entity_1
Hibernate: drop table if exists hibernate_sequences
Hibernate: create table test_entity_1 (id bigint not null, intAttribute integer not null, stringAttribute varchar(255), primary key (id))
Hibernate: create table hibernate_sequences ( sequence_name varchar(255),  sequence_next_hi_value integer ) 
2018-06-07 19:16:53,677 INFO   (: [  ]  ) [org.hibernate.tool.hbm2ddl.SchemaExport] (main) HHH000230: Schema export complete
check constructions
2018-06-07 19:16:53,683 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L1 changing  from undefined to REQUIRED xid: null in StatelessEJB.method1
2018-06-07 19:16:53,683 INFO   (: [  ]  ) [ejb-cdi-unit tests] (main) StatelessEJB: methodCallUsingSessionContext called
2018-06-07 19:16:53,684 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L1 finally   in REQUIRED xid: null in StatelessEJB.method1
2018-06-07 19:16:53,684 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L1 done      REQUIRED back to undefined xid: null in StatelessEJB.method1
2018-06-07 19:16:53,684 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L1 changing  from undefined to NOT_SUPPORTED xid: null in SingletonEJB.methodCallUsingSessionContext
2018-06-07 19:16:53,684 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L2 changing  from NOT_SUPPORTED to REQUIRES_NEW xid: null in SingletonEJB.callInNewTransactionWithParam
singleton bean 10
2018-06-07 19:16:53,685 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L2 finally   in REQUIRES_NEW xid: null in SingletonEJB.callInNewTransactionWithParam
2018-06-07 19:16:53,685 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L2 done      REQUIRES_NEW back to NOT_SUPPORTED xid: null in SingletonEJB.callInNewTransactionWithParam
2018-06-07 19:16:53,685 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L2 changing  from NOT_SUPPORTED to REQUIRES_NEW xid: null in SingletonEJB.callInNewTransaction
singleton bean
2018-06-07 19:16:53,685 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L2 finally   in REQUIRES_NEW xid: null in SingletonEJB.callInNewTransaction
2018-06-07 19:16:53,685 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L2 done      REQUIRES_NEW back to NOT_SUPPORTED xid: null in SingletonEJB.callInNewTransaction
singleton bean
2018-06-07 19:16:53,685 INFO   (: [  ]  ) [ejb-cdi-unit tests] (main) SingletonEJB: methodCallUsingSessionContext called
2018-06-07 19:16:53,685 INFO   (: [  ]  ) [ejb-cdi-unit tests] (main) output public variable 100
2018-06-07 19:16:53,685 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L1 finally   in NOT_SUPPORTED xid: null in SingletonEJB.methodCallUsingSessionContext
2018-06-07 19:16:53,686 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L1 done      NOT_SUPPORTED back to undefined xid: null in SingletonEJB.methodCallUsingSessionContext
2018-06-07 19:16:53,686 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L1 changing  from undefined to NOT_SUPPORTED xid: null in SingletonEJB.methodCallUsingSelf
2018-06-07 19:16:53,686 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L2 changing  from NOT_SUPPORTED to REQUIRES_NEW xid: null in SingletonEJB.callInNewTransaction
singleton bean
2018-06-07 19:16:53,686 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L2 finally   in REQUIRES_NEW xid: null in SingletonEJB.callInNewTransaction
2018-06-07 19:16:53,686 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L2 done      REQUIRES_NEW back to NOT_SUPPORTED xid: null in SingletonEJB.callInNewTransaction
singleton bean
2018-06-07 19:16:53,686 INFO   (: [  ]  ) [ejb-cdi-unit tests] (main) SingletonEJB: methodCallUsingSessionContext called
2018-06-07 19:16:53,686 INFO   (: [  ]  ) [ejb-cdi-unit tests] (main) output public variable 100
2018-06-07 19:16:53,687 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L1 finally   in NOT_SUPPORTED xid: null in SingletonEJB.methodCallUsingSelf
2018-06-07 19:16:53,687 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L1 done      NOT_SUPPORTED back to undefined xid: null in SingletonEJB.methodCallUsingSelf
2018-06-07 19:16:53,687 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L1 changing  from undefined to REQUIRED xid: null in StatelessEJB.method1
2018-06-07 19:16:53,687 INFO   (: [  ]  ) [ejb-cdi-unit tests] (main) StatelessEJB: methodCallUsingSessionContext called
2018-06-07 19:16:53,687 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L1 finally   in REQUIRED xid: null in StatelessEJB.method1
2018-06-07 19:16:53,687 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L1 done      REQUIRED back to undefined xid: null in StatelessEJB.method1
2018-06-07 19:16:53,687 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L1 changing  from undefined to NOT_SUPPORTED xid: null in SingletonEJB.methodCallUsingSessionContext
2018-06-07 19:16:53,688 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L2 changing  from NOT_SUPPORTED to REQUIRES_NEW xid: null in SingletonEJB.callInNewTransactionWithParam
singleton bean 10
2018-06-07 19:16:53,688 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L2 finally   in REQUIRES_NEW xid: null in SingletonEJB.callInNewTransactionWithParam
2018-06-07 19:16:53,688 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L2 done      REQUIRES_NEW back to NOT_SUPPORTED xid: null in SingletonEJB.callInNewTransactionWithParam
2018-06-07 19:16:53,688 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L2 changing  from NOT_SUPPORTED to REQUIRES_NEW xid: null in SingletonEJB.callInNewTransaction
singleton bean
2018-06-07 19:16:53,688 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L2 finally   in REQUIRES_NEW xid: null in SingletonEJB.callInNewTransaction
2018-06-07 19:16:53,689 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L2 done      REQUIRES_NEW back to NOT_SUPPORTED xid: null in SingletonEJB.callInNewTransaction
singleton bean
2018-06-07 19:16:53,689 INFO   (: [  ]  ) [ejb-cdi-unit tests] (main) SingletonEJB: methodCallUsingSessionContext called
2018-06-07 19:16:53,689 INFO   (: [  ]  ) [ejb-cdi-unit tests] (main) output public variable 100
2018-06-07 19:16:53,689 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L1 finally   in NOT_SUPPORTED xid: null in SingletonEJB.methodCallUsingSessionContext
2018-06-07 19:16:53,689 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L1 done      NOT_SUPPORTED back to undefined xid: null in SingletonEJB.methodCallUsingSessionContext
2018-06-07 19:16:53,690 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.persistence.PersistenceFactory] (main) destroying persistence factory testdb
2018-06-07 19:16:53,691 INFO   (: [  ]  ) [org.hibernate.tool.hbm2ddl.SchemaExport] (main) HHH000227: Running hbm2ddl schema export
Hibernate: drop table if exists test_entity_1
Hibernate: drop table if exists hibernate_sequences
2018-06-07 19:16:53,692 INFO   (: [  ]  ) [org.hibernate.tool.hbm2ddl.SchemaExport] (main) HHH000230: Schema export complete
2018-06-07 19:16:53,693 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000030: Cleaning up connection pool [jdbc:h2:mem:test;MODE=MySQL;DB_CLOSE_DELAY=0]
2018-06-07 19:16:53,730 ERROR  (: [  ]  ) [CDI-Unit EJB-ExtensionExtended] (main) Self injection of EJB Type com.oneandone.ejbcdiunit.ejbs.SingletonEJB in field selfejb of Class com.oneandone.ejbcdiunit.ejbs.SingletonEJB can't get simulated by ejb-cdi-unit
2018-06-07 19:16:53,772 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.persistence.PersistenceFactory] (main) creating persistence factory testdb
2018-06-07 19:16:53,800 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000402: Using Hibernate built-in connection pool (not for production use!)
2018-06-07 19:16:53,801 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000115: Hibernate connection pool size: 20
2018-06-07 19:16:53,801 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000006: Autocommit mode: true
2018-06-07 19:16:53,801 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000401: using driver [org.h2.Driver] at URL [jdbc:h2:mem:test;MODE=MySQL;DB_CLOSE_DELAY=0]
2018-06-07 19:16:53,801 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000046: Connection properties: {user=sa, autocommit=true, release_mode=auto}
2018-06-07 19:16:53,805 INFO   (: [  ]  ) [org.hibernate.dialect.Dialect] (main) HHH000400: Using dialect: org.hibernate.dialect.MySQL5Dialect
2018-06-07 19:16:53,807 INFO   (: [  ]  ) [org.hibernate.engine.transaction.internal.TransactionFactoryInitiator] (main) HHH000268: Transaction strategy: org.hibernate.engine.transaction.internal.jdbc.JdbcTransactionFactory
2018-06-07 19:16:53,807 INFO   (: [  ]  ) [org.hibernate.hql.internal.ast.ASTQueryTranslatorFactory] (main) HHH000397: Using ASTQueryTranslatorFactory
2018-06-07 19:16:53,818 INFO   (: [  ]  ) [org.hibernate.tool.hbm2ddl.SchemaExport] (main) HHH000227: Running hbm2ddl schema export
Hibernate: drop table if exists test_entity_1
Hibernate: drop table if exists hibernate_sequences
Hibernate: create table test_entity_1 (id bigint not null, intAttribute integer not null, stringAttribute varchar(255), primary key (id))
Hibernate: create table hibernate_sequences ( sequence_name varchar(255),  sequence_next_hi_value integer ) 
2018-06-07 19:16:53,820 INFO   (: [  ]  ) [org.hibernate.tool.hbm2ddl.SchemaExport] (main) HHH000230: Schema export complete
check constructions
2018-06-07 19:16:53,828 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L1 changing  from undefined to REQUIRES_NEW xid: null in OuterClass.saveRequiredInNewTraThrow
2018-06-07 19:16:53,828 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L2 changing  from REQUIRES_NEW to REQUIRED xid: null in StatelessEJB.saveInCurrentTransaction
Hibernate: select sequence_next_hi_value from hibernate_sequences where sequence_name = 'test_entity_1' for update
Hibernate: insert into hibernate_sequences(sequence_name, sequence_next_hi_value) values('test_entity_1', ?)
Hibernate: update hibernate_sequences set sequence_next_hi_value = ? where sequence_next_hi_value = ? and sequence_name = 'test_entity_1'
2018-06-07 19:16:53,831 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L2 finally   in REQUIRED xid: 33 in StatelessEJB.saveInCurrentTransaction
2018-06-07 19:16:53,831 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L2 done      REQUIRED back to REQUIRES_NEW xid: 33 in StatelessEJB.saveInCurrentTransaction
2018-06-07 19:16:53,831 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L1 Exception RuntimeException in REQUIRES_NEW xid: 33 in OuterClass.saveRequiredInNewTraThrow
2018-06-07 19:16:53,832 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L1 finally   in REQUIRES_NEW xid: 32 in OuterClass.saveRequiredInNewTraThrow
2018-06-07 19:16:53,832 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L1 done      REQUIRES_NEW back to undefined xid: null in OuterClass.saveRequiredInNewTraThrow
Hibernate: insert into test_entity_1 (intAttribute, stringAttribute, id) values (?, ?, ?)
Hibernate: select count(testentity0_.id) as col_0_0_ from test_entity_1 testentity0_
Hibernate: select count(testentity0_.id) as col_0_0_ from test_entity_1 testentity0_
2018-06-07 19:16:53,840 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.persistence.PersistenceFactory] (main) destroying persistence factory testdb
2018-06-07 19:16:53,840 INFO   (: [  ]  ) [org.hibernate.tool.hbm2ddl.SchemaExport] (main) HHH000227: Running hbm2ddl schema export
Hibernate: drop table if exists test_entity_1
Hibernate: drop table if exists hibernate_sequences
2018-06-07 19:16:53,842 INFO   (: [  ]  ) [org.hibernate.tool.hbm2ddl.SchemaExport] (main) HHH000230: Schema export complete
2018-06-07 19:16:53,842 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000030: Cleaning up connection pool [jdbc:h2:mem:test;MODE=MySQL;DB_CLOSE_DELAY=0]
2018-06-07 19:16:53,883 ERROR  (: [  ]  ) [CDI-Unit EJB-ExtensionExtended] (main) Self injection of EJB Type com.oneandone.ejbcdiunit.ejbs.SingletonEJB in field selfejb of Class com.oneandone.ejbcdiunit.ejbs.SingletonEJB can't get simulated by ejb-cdi-unit
2018-06-07 19:16:53,928 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.persistence.PersistenceFactory] (main) creating persistence factory testdb
2018-06-07 19:16:53,953 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000402: Using Hibernate built-in connection pool (not for production use!)
2018-06-07 19:16:53,953 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000115: Hibernate connection pool size: 20
2018-06-07 19:16:53,953 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000006: Autocommit mode: true
2018-06-07 19:16:53,953 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000401: using driver [org.h2.Driver] at URL [jdbc:h2:mem:test;MODE=MySQL;DB_CLOSE_DELAY=0]
2018-06-07 19:16:53,953 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000046: Connection properties: {user=sa, autocommit=true, release_mode=auto}
2018-06-07 19:16:53,955 INFO   (: [  ]  ) [org.hibernate.dialect.Dialect] (main) HHH000400: Using dialect: org.hibernate.dialect.MySQL5Dialect
2018-06-07 19:16:53,957 INFO   (: [  ]  ) [org.hibernate.engine.transaction.internal.TransactionFactoryInitiator] (main) HHH000268: Transaction strategy: org.hibernate.engine.transaction.internal.jdbc.JdbcTransactionFactory
2018-06-07 19:16:53,957 INFO   (: [  ]  ) [org.hibernate.hql.internal.ast.ASTQueryTranslatorFactory] (main) HHH000397: Using ASTQueryTranslatorFactory
2018-06-07 19:16:53,965 INFO   (: [  ]  ) [org.hibernate.tool.hbm2ddl.SchemaExport] (main) HHH000227: Running hbm2ddl schema export
Hibernate: drop table if exists test_entity_1
Hibernate: drop table if exists hibernate_sequences
Hibernate: create table test_entity_1 (id bigint not null, intAttribute integer not null, stringAttribute varchar(255), primary key (id))
Hibernate: create table hibernate_sequences ( sequence_name varchar(255),  sequence_next_hi_value integer ) 
2018-06-07 19:16:53,966 INFO   (: [  ]  ) [org.hibernate.tool.hbm2ddl.SchemaExport] (main) HHH000230: Schema export complete
check constructions
2018-06-07 19:16:53,971 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L1 changing  from undefined to NOT_SUPPORTED xid: null in StatelessEJB.trySaveInNotSupportedTransaction
2018-06-07 19:16:53,971 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L1 Exception TransactionRequiredException in NOT_SUPPORTED xid: null in StatelessEJB.trySaveInNotSupportedTransaction
2018-06-07 19:16:53,971 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L1 finally   in NOT_SUPPORTED xid: null in StatelessEJB.trySaveInNotSupportedTransaction
2018-06-07 19:16:53,971 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L1 done      NOT_SUPPORTED back to undefined xid: null in StatelessEJB.trySaveInNotSupportedTransaction
2018-06-07 19:16:53,972 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.persistence.PersistenceFactory] (main) destroying persistence factory testdb
2018-06-07 19:16:53,972 INFO   (: [  ]  ) [org.hibernate.tool.hbm2ddl.SchemaExport] (main) HHH000227: Running hbm2ddl schema export
Hibernate: drop table if exists test_entity_1
Hibernate: drop table if exists hibernate_sequences
2018-06-07 19:16:53,974 INFO   (: [  ]  ) [org.hibernate.tool.hbm2ddl.SchemaExport] (main) HHH000230: Schema export complete
2018-06-07 19:16:53,974 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000030: Cleaning up connection pool [jdbc:h2:mem:test;MODE=MySQL;DB_CLOSE_DELAY=0]
2018-06-07 19:16:54,003 ERROR  (: [  ]  ) [CDI-Unit EJB-ExtensionExtended] (main) Self injection of EJB Type com.oneandone.ejbcdiunit.ejbs.SingletonEJB in field selfejb of Class com.oneandone.ejbcdiunit.ejbs.SingletonEJB can't get simulated by ejb-cdi-unit
2018-06-07 19:16:54,038 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.persistence.PersistenceFactory] (main) creating persistence factory testdb
2018-06-07 19:16:54,059 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000402: Using Hibernate built-in connection pool (not for production use!)
2018-06-07 19:16:54,059 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000115: Hibernate connection pool size: 20
2018-06-07 19:16:54,059 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000006: Autocommit mode: true
2018-06-07 19:16:54,059 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000401: using driver [org.h2.Driver] at URL [jdbc:h2:mem:test;MODE=MySQL;DB_CLOSE_DELAY=0]
2018-06-07 19:16:54,059 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000046: Connection properties: {user=sa, autocommit=true, release_mode=auto}
2018-06-07 19:16:54,062 INFO   (: [  ]  ) [org.hibernate.dialect.Dialect] (main) HHH000400: Using dialect: org.hibernate.dialect.MySQL5Dialect
2018-06-07 19:16:54,064 INFO   (: [  ]  ) [org.hibernate.engine.transaction.internal.TransactionFactoryInitiator] (main) HHH000268: Transaction strategy: org.hibernate.engine.transaction.internal.jdbc.JdbcTransactionFactory
2018-06-07 19:16:54,064 INFO   (: [  ]  ) [org.hibernate.hql.internal.ast.ASTQueryTranslatorFactory] (main) HHH000397: Using ASTQueryTranslatorFactory
2018-06-07 19:16:54,073 INFO   (: [  ]  ) [org.hibernate.tool.hbm2ddl.SchemaExport] (main) HHH000227: Running hbm2ddl schema export
Hibernate: drop table if exists test_entity_1
Hibernate: drop table if exists hibernate_sequences
Hibernate: create table test_entity_1 (id bigint not null, intAttribute integer not null, stringAttribute varchar(255), primary key (id))
Hibernate: create table hibernate_sequences ( sequence_name varchar(255),  sequence_next_hi_value integer ) 
2018-06-07 19:16:54,075 INFO   (: [  ]  ) [org.hibernate.tool.hbm2ddl.SchemaExport] (main) HHH000230: Schema export complete
check constructions
2018-06-07 19:16:54,082 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L1 changing  from undefined to REQUIRES_NEW xid: null in OuterClass.saveRequiresNewLocalAsBusinessObject
2018-06-07 19:16:54,082 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L2 changing  from REQUIRES_NEW to REQUIRED xid: null in StatelessEJB.saveRequiresNewLocalAsBusinessObject
Hibernate: select sequence_next_hi_value from hibernate_sequences where sequence_name = 'test_entity_1' for update
Hibernate: insert into hibernate_sequences(sequence_name, sequence_next_hi_value) values('test_entity_1', ?)
Hibernate: update hibernate_sequences set sequence_next_hi_value = ? where sequence_next_hi_value = ? and sequence_name = 'test_entity_1'
2018-06-07 19:16:54,085 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L3 changing  from REQUIRED to REQUIRES_NEW xid: 35 in StatelessEJB.saveInNewTransaction
2018-06-07 19:16:54,085 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L3 finally   in REQUIRES_NEW xid: 36 in StatelessEJB.saveInNewTransaction
Hibernate: insert into test_entity_1 (intAttribute, stringAttribute, id) values (?, ?, ?)
2018-06-07 19:16:54,088 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L3 done      REQUIRES_NEW back to REQUIRED xid: 35 in StatelessEJB.saveInNewTransaction
2018-06-07 19:16:54,088 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L2 finally   in REQUIRED xid: 35 in StatelessEJB.saveRequiresNewLocalAsBusinessObject
2018-06-07 19:16:54,088 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L2 done      REQUIRED back to REQUIRES_NEW xid: 35 in StatelessEJB.saveRequiresNewLocalAsBusinessObject
2018-06-07 19:16:54,088 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L1 finally   in REQUIRES_NEW xid: 35 in OuterClass.saveRequiresNewLocalAsBusinessObject
Hibernate: insert into test_entity_1 (intAttribute, stringAttribute, id) values (?, ?, ?)
2018-06-07 19:16:54,090 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L1 done      REQUIRES_NEW back to undefined xid: 34 in OuterClass.saveRequiresNewLocalAsBusinessObject
Hibernate: insert into test_entity_1 (intAttribute, stringAttribute, id) values (?, ?, ?)
Hibernate: select count(testentity0_.id) as col_0_0_ from test_entity_1 testentity0_
Hibernate: select count(testentity0_.id) as col_0_0_ from test_entity_1 testentity0_
2018-06-07 19:16:54,096 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.persistence.PersistenceFactory] (main) destroying persistence factory testdb
2018-06-07 19:16:54,096 INFO   (: [  ]  ) [org.hibernate.tool.hbm2ddl.SchemaExport] (main) HHH000227: Running hbm2ddl schema export
Hibernate: drop table if exists test_entity_1
Hibernate: drop table if exists hibernate_sequences
2018-06-07 19:16:54,098 INFO   (: [  ]  ) [org.hibernate.tool.hbm2ddl.SchemaExport] (main) HHH000230: Schema export complete
2018-06-07 19:16:54,098 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000030: Cleaning up connection pool [jdbc:h2:mem:test;MODE=MySQL;DB_CLOSE_DELAY=0]
2018-06-07 19:16:54,126 ERROR  (: [  ]  ) [CDI-Unit EJB-ExtensionExtended] (main) Self injection of EJB Type com.oneandone.ejbcdiunit.ejbs.SingletonEJB in field selfejb of Class com.oneandone.ejbcdiunit.ejbs.SingletonEJB can't get simulated by ejb-cdi-unit
2018-06-07 19:16:54,157 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.persistence.PersistenceFactory] (main) creating persistence factory testdb
2018-06-07 19:16:54,178 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000402: Using Hibernate built-in connection pool (not for production use!)
2018-06-07 19:16:54,178 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000115: Hibernate connection pool size: 20
2018-06-07 19:16:54,178 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000006: Autocommit mode: true
2018-06-07 19:16:54,178 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000401: using driver [org.h2.Driver] at URL [jdbc:h2:mem:test;MODE=MySQL;DB_CLOSE_DELAY=0]
2018-06-07 19:16:54,178 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000046: Connection properties: {user=sa, autocommit=true, release_mode=auto}
2018-06-07 19:16:54,181 INFO   (: [  ]  ) [org.hibernate.dialect.Dialect] (main) HHH000400: Using dialect: org.hibernate.dialect.MySQL5Dialect
2018-06-07 19:16:54,184 INFO   (: [  ]  ) [org.hibernate.engine.transaction.internal.TransactionFactoryInitiator] (main) HHH000268: Transaction strategy: org.hibernate.engine.transaction.internal.jdbc.JdbcTransactionFactory
2018-06-07 19:16:54,184 INFO   (: [  ]  ) [org.hibernate.hql.internal.ast.ASTQueryTranslatorFactory] (main) HHH000397: Using ASTQueryTranslatorFactory
2018-06-07 19:16:54,192 INFO   (: [  ]  ) [org.hibernate.tool.hbm2ddl.SchemaExport] (main) HHH000227: Running hbm2ddl schema export
Hibernate: drop table if exists test_entity_1
Hibernate: drop table if exists hibernate_sequences
Hibernate: create table test_entity_1 (id bigint not null, intAttribute integer not null, stringAttribute varchar(255), primary key (id))
Hibernate: create table hibernate_sequences ( sequence_name varchar(255),  sequence_next_hi_value integer ) 
2018-06-07 19:16:54,194 INFO   (: [  ]  ) [org.hibernate.tool.hbm2ddl.SchemaExport] (main) HHH000230: Schema export complete
check constructions
2018-06-07 19:16:54,199 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L1 changing  from undefined to REQUIRES_NEW xid: null in OuterClass.saveRequiredPlusNewInNewTra
2018-06-07 19:16:54,199 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L2 changing  from REQUIRES_NEW to REQUIRED xid: null in StatelessEJB.saveInCurrentTransactionAndSaveNewInNewButDirectCall
Hibernate: select sequence_next_hi_value from hibernate_sequences where sequence_name = 'test_entity_1' for update
Hibernate: insert into hibernate_sequences(sequence_name, sequence_next_hi_value) values('test_entity_1', ?)
Hibernate: update hibernate_sequences set sequence_next_hi_value = ? where sequence_next_hi_value = ? and sequence_name = 'test_entity_1'
2018-06-07 19:16:54,202 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L2 finally   in REQUIRED xid: 38 in StatelessEJB.saveInCurrentTransactionAndSaveNewInNewButDirectCall
2018-06-07 19:16:54,202 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L2 done      REQUIRED back to REQUIRES_NEW xid: 38 in StatelessEJB.saveInCurrentTransactionAndSaveNewInNewButDirectCall
2018-06-07 19:16:54,202 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L1 finally   in REQUIRES_NEW xid: 38 in OuterClass.saveRequiredPlusNewInNewTra
Hibernate: insert into test_entity_1 (intAttribute, stringAttribute, id) values (?, ?, ?)
Hibernate: insert into test_entity_1 (intAttribute, stringAttribute, id) values (?, ?, ?)
2018-06-07 19:16:54,205 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L1 done      REQUIRES_NEW back to undefined xid: 37 in OuterClass.saveRequiredPlusNewInNewTra
Hibernate: insert into test_entity_1 (intAttribute, stringAttribute, id) values (?, ?, ?)
Hibernate: select count(testentity0_.id) as col_0_0_ from test_entity_1 testentity0_
Hibernate: select count(testentity0_.id) as col_0_0_ from test_entity_1 testentity0_
2018-06-07 19:16:54,213 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.persistence.PersistenceFactory] (main) destroying persistence factory testdb
2018-06-07 19:16:54,213 INFO   (: [  ]  ) [org.hibernate.tool.hbm2ddl.SchemaExport] (main) HHH000227: Running hbm2ddl schema export
Hibernate: drop table if exists test_entity_1
Hibernate: drop table if exists hibernate_sequences
2018-06-07 19:16:54,214 INFO   (: [  ]  ) [org.hibernate.tool.hbm2ddl.SchemaExport] (main) HHH000230: Schema export complete
2018-06-07 19:16:54,215 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000030: Cleaning up connection pool [jdbc:h2:mem:test;MODE=MySQL;DB_CLOSE_DELAY=0]
2018-06-07 19:16:54,247 ERROR  (: [  ]  ) [CDI-Unit EJB-ExtensionExtended] (main) Self injection of EJB Type com.oneandone.ejbcdiunit.ejbs.SingletonEJB in field selfejb of Class com.oneandone.ejbcdiunit.ejbs.SingletonEJB can't get simulated by ejb-cdi-unit
2018-06-07 19:16:54,292 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.persistence.PersistenceFactory] (main) creating persistence factory testdb
2018-06-07 19:16:54,321 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000402: Using Hibernate built-in connection pool (not for production use!)
2018-06-07 19:16:54,321 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000115: Hibernate connection pool size: 20
2018-06-07 19:16:54,321 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000006: Autocommit mode: true
2018-06-07 19:16:54,321 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000401: using driver [org.h2.Driver] at URL [jdbc:h2:mem:test;MODE=MySQL;DB_CLOSE_DELAY=0]
2018-06-07 19:16:54,321 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000046: Connection properties: {user=sa, autocommit=true, release_mode=auto}
2018-06-07 19:16:54,325 INFO   (: [  ]  ) [org.hibernate.dialect.Dialect] (main) HHH000400: Using dialect: org.hibernate.dialect.MySQL5Dialect
2018-06-07 19:16:54,327 INFO   (: [  ]  ) [org.hibernate.engine.transaction.internal.TransactionFactoryInitiator] (main) HHH000268: Transaction strategy: org.hibernate.engine.transaction.internal.jdbc.JdbcTransactionFactory
2018-06-07 19:16:54,328 INFO   (: [  ]  ) [org.hibernate.hql.internal.ast.ASTQueryTranslatorFactory] (main) HHH000397: Using ASTQueryTranslatorFactory
2018-06-07 19:16:54,340 INFO   (: [  ]  ) [org.hibernate.tool.hbm2ddl.SchemaExport] (main) HHH000227: Running hbm2ddl schema export
Hibernate: drop table if exists test_entity_1
Hibernate: drop table if exists hibernate_sequences
Hibernate: create table test_entity_1 (id bigint not null, intAttribute integer not null, stringAttribute varchar(255), primary key (id))
Hibernate: create table hibernate_sequences ( sequence_name varchar(255),  sequence_next_hi_value integer ) 
2018-06-07 19:16:54,341 INFO   (: [  ]  ) [org.hibernate.tool.hbm2ddl.SchemaExport] (main) HHH000230: Schema export complete
check constructions
2018-06-07 19:16:54,346 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L1 changing  from undefined to NOT_SUPPORTED xid: null in SingletonEJB.methodCallUsingSelf
2018-06-07 19:16:54,347 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L2 changing  from NOT_SUPPORTED to REQUIRES_NEW xid: null in SingletonEJB.callInNewTransaction
singleton bean
2018-06-07 19:16:54,347 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L2 finally   in REQUIRES_NEW xid: null in SingletonEJB.callInNewTransaction
2018-06-07 19:16:54,347 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L2 done      REQUIRES_NEW back to NOT_SUPPORTED xid: null in SingletonEJB.callInNewTransaction
singleton bean
2018-06-07 19:16:54,347 INFO   (: [  ]  ) [ejb-cdi-unit tests] (main) SingletonEJB: methodCallUsingSessionContext called
2018-06-07 19:16:54,347 INFO   (: [  ]  ) [ejb-cdi-unit tests] (main) output public variable 100
2018-06-07 19:16:54,347 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L1 finally   in NOT_SUPPORTED xid: null in SingletonEJB.methodCallUsingSelf
2018-06-07 19:16:54,347 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L1 done      NOT_SUPPORTED back to undefined xid: null in SingletonEJB.methodCallUsingSelf
2018-06-07 19:16:54,348 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.persistence.PersistenceFactory] (main) destroying persistence factory testdb
2018-06-07 19:16:54,348 INFO   (: [  ]  ) [org.hibernate.tool.hbm2ddl.SchemaExport] (main) HHH000227: Running hbm2ddl schema export
Hibernate: drop table if exists test_entity_1
Hibernate: drop table if exists hibernate_sequences
2018-06-07 19:16:54,349 INFO   (: [  ]  ) [org.hibernate.tool.hbm2ddl.SchemaExport] (main) HHH000230: Schema export complete
2018-06-07 19:16:54,349 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000030: Cleaning up connection pool [jdbc:h2:mem:test;MODE=MySQL;DB_CLOSE_DELAY=0]
2018-06-07 19:16:54,388 ERROR  (: [  ]  ) [CDI-Unit EJB-ExtensionExtended] (main) Self injection of EJB Type com.oneandone.ejbcdiunit.ejbs.SingletonEJB in field selfejb of Class com.oneandone.ejbcdiunit.ejbs.SingletonEJB can't get simulated by ejb-cdi-unit
2018-06-07 19:16:54,426 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.persistence.PersistenceFactory] (main) creating persistence factory testdb
2018-06-07 19:16:54,459 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000402: Using Hibernate built-in connection pool (not for production use!)
2018-06-07 19:16:54,460 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000115: Hibernate connection pool size: 20
2018-06-07 19:16:54,460 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000006: Autocommit mode: true
2018-06-07 19:16:54,460 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000401: using driver [org.h2.Driver] at URL [jdbc:h2:mem:test;MODE=MySQL;DB_CLOSE_DELAY=0]
2018-06-07 19:16:54,460 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000046: Connection properties: {user=sa, autocommit=true, release_mode=auto}
2018-06-07 19:16:54,463 INFO   (: [  ]  ) [org.hibernate.dialect.Dialect] (main) HHH000400: Using dialect: org.hibernate.dialect.MySQL5Dialect
2018-06-07 19:16:54,464 INFO   (: [  ]  ) [org.hibernate.engine.transaction.internal.TransactionFactoryInitiator] (main) HHH000268: Transaction strategy: org.hibernate.engine.transaction.internal.jdbc.JdbcTransactionFactory
2018-06-07 19:16:54,465 INFO   (: [  ]  ) [org.hibernate.hql.internal.ast.ASTQueryTranslatorFactory] (main) HHH000397: Using ASTQueryTranslatorFactory
2018-06-07 19:16:54,491 INFO   (: [  ]  ) [org.hibernate.tool.hbm2ddl.SchemaExport] (main) HHH000227: Running hbm2ddl schema export
Hibernate: drop table if exists test_entity_1
Hibernate: drop table if exists hibernate_sequences
Hibernate: create table test_entity_1 (id bigint not null, intAttribute integer not null, stringAttribute varchar(255), primary key (id))
Hibernate: create table hibernate_sequences ( sequence_name varchar(255),  sequence_next_hi_value integer ) 
2018-06-07 19:16:54,493 INFO   (: [  ]  ) [org.hibernate.tool.hbm2ddl.SchemaExport] (main) HHH000230: Schema export complete
check constructions
Hibernate: select sequence_next_hi_value from hibernate_sequences where sequence_name = 'test_entity_1' for update
Hibernate: insert into hibernate_sequences(sequence_name, sequence_next_hi_value) values('test_entity_1', ?)
Hibernate: update hibernate_sequences set sequence_next_hi_value = ? where sequence_next_hi_value = ? and sequence_name = 'test_entity_1'
Hibernate: insert into test_entity_1 (intAttribute, stringAttribute, id) values (?, ?, ?)
Hibernate: select testentity0_.id as id1_0_0_, testentity0_.intAttribute as intAttri2_0_0_, testentity0_.stringAttribute as stringAt3_0_0_ from test_entity_1 testentity0_ where testentity0_.id=?
Hibernate: select testentity0_.id as id1_0_0_, testentity0_.intAttribute as intAttri2_0_0_, testentity0_.stringAttribute as stringAt3_0_0_ from test_entity_1 testentity0_ where testentity0_.id=?
Hibernate: update test_entity_1 set intAttribute=?, stringAttribute=? where id=?
Hibernate: select testentity0_.id as id1_0_0_, testentity0_.intAttribute as intAttri2_0_0_, testentity0_.stringAttribute as stringAt3_0_0_ from test_entity_1 testentity0_ where testentity0_.id=?
2018-06-07 19:16:54,519 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.persistence.PersistenceFactory] (main) destroying persistence factory testdb
2018-06-07 19:16:54,520 INFO   (: [  ]  ) [org.hibernate.tool.hbm2ddl.SchemaExport] (main) HHH000227: Running hbm2ddl schema export
Hibernate: drop table if exists test_entity_1
Hibernate: drop table if exists hibernate_sequences
2018-06-07 19:16:54,521 INFO   (: [  ]  ) [org.hibernate.tool.hbm2ddl.SchemaExport] (main) HHH000230: Schema export complete
2018-06-07 19:16:54,521 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000030: Cleaning up connection pool [jdbc:h2:mem:test;MODE=MySQL;DB_CLOSE_DELAY=0]
2018-06-07 19:16:54,548 ERROR  (: [  ]  ) [CDI-Unit EJB-ExtensionExtended] (main) Self injection of EJB Type com.oneandone.ejbcdiunit.ejbs.SingletonEJB in field selfejb of Class com.oneandone.ejbcdiunit.ejbs.SingletonEJB can't get simulated by ejb-cdi-unit
2018-06-07 19:16:54,581 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.persistence.PersistenceFactory] (main) creating persistence factory testdb
2018-06-07 19:16:54,605 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000402: Using Hibernate built-in connection pool (not for production use!)
2018-06-07 19:16:54,605 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000115: Hibernate connection pool size: 20
2018-06-07 19:16:54,605 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000006: Autocommit mode: true
2018-06-07 19:16:54,605 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000401: using driver [org.h2.Driver] at URL [jdbc:h2:mem:test;MODE=MySQL;DB_CLOSE_DELAY=0]
2018-06-07 19:16:54,605 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000046: Connection properties: {user=sa, autocommit=true, release_mode=auto}
2018-06-07 19:16:54,608 INFO   (: [  ]  ) [org.hibernate.dialect.Dialect] (main) HHH000400: Using dialect: org.hibernate.dialect.MySQL5Dialect
2018-06-07 19:16:54,610 INFO   (: [  ]  ) [org.hibernate.engine.transaction.internal.TransactionFactoryInitiator] (main) HHH000268: Transaction strategy: org.hibernate.engine.transaction.internal.jdbc.JdbcTransactionFactory
2018-06-07 19:16:54,610 INFO   (: [  ]  ) [org.hibernate.hql.internal.ast.ASTQueryTranslatorFactory] (main) HHH000397: Using ASTQueryTranslatorFactory
2018-06-07 19:16:54,618 INFO   (: [  ]  ) [org.hibernate.tool.hbm2ddl.SchemaExport] (main) HHH000227: Running hbm2ddl schema export
Hibernate: drop table if exists test_entity_1
Hibernate: drop table if exists hibernate_sequences
Hibernate: create table test_entity_1 (id bigint not null, intAttribute integer not null, stringAttribute varchar(255), primary key (id))
Hibernate: create table hibernate_sequences ( sequence_name varchar(255),  sequence_next_hi_value integer ) 
2018-06-07 19:16:54,620 INFO   (: [  ]  ) [org.hibernate.tool.hbm2ddl.SchemaExport] (main) HHH000230: Schema export complete
check constructions
2018-06-07 19:16:54,625 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L1 changing  from undefined to NOT_SUPPORTED xid: null in StatelessEJB.trySaveInNotSupportedTransaction
2018-06-07 19:16:54,626 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L1 Exception TransactionRequiredException in NOT_SUPPORTED xid: null in StatelessEJB.trySaveInNotSupportedTransaction
2018-06-07 19:16:54,626 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L1 finally   in NOT_SUPPORTED xid: null in StatelessEJB.trySaveInNotSupportedTransaction
2018-06-07 19:16:54,626 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L1 done      NOT_SUPPORTED back to undefined xid: null in StatelessEJB.trySaveInNotSupportedTransaction
2018-06-07 19:16:54,627 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.persistence.PersistenceFactory] (main) destroying persistence factory testdb
2018-06-07 19:16:54,627 INFO   (: [  ]  ) [org.hibernate.tool.hbm2ddl.SchemaExport] (main) HHH000227: Running hbm2ddl schema export
Hibernate: drop table if exists test_entity_1
Hibernate: drop table if exists hibernate_sequences
2018-06-07 19:16:54,628 INFO   (: [  ]  ) [org.hibernate.tool.hbm2ddl.SchemaExport] (main) HHH000230: Schema export complete
2018-06-07 19:16:54,628 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000030: Cleaning up connection pool [jdbc:h2:mem:test;MODE=MySQL;DB_CLOSE_DELAY=0]
2018-06-07 19:16:54,655 ERROR  (: [  ]  ) [CDI-Unit EJB-ExtensionExtended] (main) Self injection of EJB Type com.oneandone.ejbcdiunit.ejbs.SingletonEJB in field selfejb of Class com.oneandone.ejbcdiunit.ejbs.SingletonEJB can't get simulated by ejb-cdi-unit
2018-06-07 19:16:54,688 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.persistence.PersistenceFactory] (main) creating persistence factory testdb
2018-06-07 19:16:54,712 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000402: Using Hibernate built-in connection pool (not for production use!)
2018-06-07 19:16:54,712 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000115: Hibernate connection pool size: 20
2018-06-07 19:16:54,712 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000006: Autocommit mode: true
2018-06-07 19:16:54,712 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000401: using driver [org.h2.Driver] at URL [jdbc:h2:mem:test;MODE=MySQL;DB_CLOSE_DELAY=0]
2018-06-07 19:16:54,712 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000046: Connection properties: {user=sa, autocommit=true, release_mode=auto}
2018-06-07 19:16:54,714 INFO   (: [  ]  ) [org.hibernate.dialect.Dialect] (main) HHH000400: Using dialect: org.hibernate.dialect.MySQL5Dialect
2018-06-07 19:16:54,716 INFO   (: [  ]  ) [org.hibernate.engine.transaction.internal.TransactionFactoryInitiator] (main) HHH000268: Transaction strategy: org.hibernate.engine.transaction.internal.jdbc.JdbcTransactionFactory
2018-06-07 19:16:54,717 INFO   (: [  ]  ) [org.hibernate.hql.internal.ast.ASTQueryTranslatorFactory] (main) HHH000397: Using ASTQueryTranslatorFactory
2018-06-07 19:16:54,727 INFO   (: [  ]  ) [org.hibernate.tool.hbm2ddl.SchemaExport] (main) HHH000227: Running hbm2ddl schema export
Hibernate: drop table if exists test_entity_1
Hibernate: drop table if exists hibernate_sequences
Hibernate: create table test_entity_1 (id bigint not null, intAttribute integer not null, stringAttribute varchar(255), primary key (id))
Hibernate: create table hibernate_sequences ( sequence_name varchar(255),  sequence_next_hi_value integer ) 
2018-06-07 19:16:54,729 INFO   (: [  ]  ) [org.hibernate.tool.hbm2ddl.SchemaExport] (main) HHH000230: Schema export complete
check constructions
2018-06-07 19:16:54,733 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L1 changing  from undefined to SUPPORTS xid: null in StatelessEJB.saveInSupportedTransaction
Hibernate: select sequence_next_hi_value from hibernate_sequences where sequence_name = 'test_entity_1' for update
Hibernate: insert into hibernate_sequences(sequence_name, sequence_next_hi_value) values('test_entity_1', ?)
Hibernate: update hibernate_sequences set sequence_next_hi_value = ? where sequence_next_hi_value = ? and sequence_name = 'test_entity_1'
2018-06-07 19:16:54,735 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L1 finally   in SUPPORTS xid: 41 in StatelessEJB.saveInSupportedTransaction
2018-06-07 19:16:54,735 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L1 done      SUPPORTS back to undefined xid: 41 in StatelessEJB.saveInSupportedTransaction
Hibernate: insert into test_entity_1 (intAttribute, stringAttribute, id) values (?, ?, ?)
2018-06-07 19:16:54,738 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.persistence.PersistenceFactory] (main) destroying persistence factory testdb
2018-06-07 19:16:54,738 INFO   (: [  ]  ) [org.hibernate.tool.hbm2ddl.SchemaExport] (main) HHH000227: Running hbm2ddl schema export
Hibernate: drop table if exists test_entity_1
Hibernate: drop table if exists hibernate_sequences
2018-06-07 19:16:54,739 INFO   (: [  ]  ) [org.hibernate.tool.hbm2ddl.SchemaExport] (main) HHH000230: Schema export complete
2018-06-07 19:16:54,739 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000030: Cleaning up connection pool [jdbc:h2:mem:test;MODE=MySQL;DB_CLOSE_DELAY=0]
2018-06-07 19:16:54,767 ERROR  (: [  ]  ) [CDI-Unit EJB-ExtensionExtended] (main) Self injection of EJB Type com.oneandone.ejbcdiunit.ejbs.SingletonEJB in field selfejb of Class com.oneandone.ejbcdiunit.ejbs.SingletonEJB can't get simulated by ejb-cdi-unit
2018-06-07 19:16:54,798 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.persistence.PersistenceFactory] (main) creating persistence factory testdb
2018-06-07 19:16:54,816 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000402: Using Hibernate built-in connection pool (not for production use!)
2018-06-07 19:16:54,816 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000115: Hibernate connection pool size: 20
2018-06-07 19:16:54,816 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000006: Autocommit mode: true
2018-06-07 19:16:54,816 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000401: using driver [org.h2.Driver] at URL [jdbc:h2:mem:test;MODE=MySQL;DB_CLOSE_DELAY=0]
2018-06-07 19:16:54,816 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000046: Connection properties: {user=sa, autocommit=true, release_mode=auto}
2018-06-07 19:16:54,818 INFO   (: [  ]  ) [org.hibernate.dialect.Dialect] (main) HHH000400: Using dialect: org.hibernate.dialect.MySQL5Dialect
2018-06-07 19:16:54,820 INFO   (: [  ]  ) [org.hibernate.engine.transaction.internal.TransactionFactoryInitiator] (main) HHH000268: Transaction strategy: org.hibernate.engine.transaction.internal.jdbc.JdbcTransactionFactory
2018-06-07 19:16:54,820 INFO   (: [  ]  ) [org.hibernate.hql.internal.ast.ASTQueryTranslatorFactory] (main) HHH000397: Using ASTQueryTranslatorFactory
2018-06-07 19:16:54,828 INFO   (: [  ]  ) [org.hibernate.tool.hbm2ddl.SchemaExport] (main) HHH000227: Running hbm2ddl schema export
Hibernate: drop table if exists test_entity_1
Hibernate: drop table if exists hibernate_sequences
Hibernate: create table test_entity_1 (id bigint not null, intAttribute integer not null, stringAttribute varchar(255), primary key (id))
Hibernate: create table hibernate_sequences ( sequence_name varchar(255),  sequence_next_hi_value integer ) 
2018-06-07 19:16:54,829 INFO   (: [  ]  ) [org.hibernate.tool.hbm2ddl.SchemaExport] (main) HHH000230: Schema export complete
check constructions
2018-06-07 19:16:54,835 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L1 changing  from undefined to NOT_SUPPORTED xid: null in SingletonEJB.methodCallUsingSelfEjb
2018-06-07 19:16:54,835 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L2 changing  from NOT_SUPPORTED to REQUIRES_NEW xid: null in SingletonEJB.callInNewTransaction
singleton bean
2018-06-07 19:16:54,835 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L2 finally   in REQUIRES_NEW xid: null in SingletonEJB.callInNewTransaction
2018-06-07 19:16:54,835 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L2 done      REQUIRES_NEW back to NOT_SUPPORTED xid: null in SingletonEJB.callInNewTransaction
singleton bean
2018-06-07 19:16:54,835 INFO   (: [  ]  ) [ejb-cdi-unit tests] (main) SingletonEJB: methodCallUsingSessionContext called
2018-06-07 19:16:54,835 INFO   (: [  ]  ) [ejb-cdi-unit tests] (main) output public variable 100
2018-06-07 19:16:54,835 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L1 finally   in NOT_SUPPORTED xid: null in SingletonEJB.methodCallUsingSelfEjb
2018-06-07 19:16:54,835 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L1 done      NOT_SUPPORTED back to undefined xid: null in SingletonEJB.methodCallUsingSelfEjb
2018-06-07 19:16:54,836 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.persistence.PersistenceFactory] (main) destroying persistence factory testdb
2018-06-07 19:16:54,836 INFO   (: [  ]  ) [org.hibernate.tool.hbm2ddl.SchemaExport] (main) HHH000227: Running hbm2ddl schema export
Hibernate: drop table if exists test_entity_1
Hibernate: drop table if exists hibernate_sequences
2018-06-07 19:16:54,837 INFO   (: [  ]  ) [org.hibernate.tool.hbm2ddl.SchemaExport] (main) HHH000230: Schema export complete
2018-06-07 19:16:54,837 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000030: Cleaning up connection pool [jdbc:h2:mem:test;MODE=MySQL;DB_CLOSE_DELAY=0]
2018-06-07 19:16:54,864 ERROR  (: [  ]  ) [CDI-Unit EJB-ExtensionExtended] (main) Self injection of EJB Type com.oneandone.ejbcdiunit.ejbs.SingletonEJB in field selfejb of Class com.oneandone.ejbcdiunit.ejbs.SingletonEJB can't get simulated by ejb-cdi-unit
2018-06-07 19:16:54,893 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.persistence.PersistenceFactory] (main) creating persistence factory testdb
2018-06-07 19:16:54,912 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000402: Using Hibernate built-in connection pool (not for production use!)
2018-06-07 19:16:54,912 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000115: Hibernate connection pool size: 20
2018-06-07 19:16:54,912 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000006: Autocommit mode: true
2018-06-07 19:16:54,912 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000401: using driver [org.h2.Driver] at URL [jdbc:h2:mem:test;MODE=MySQL;DB_CLOSE_DELAY=0]
2018-06-07 19:16:54,912 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000046: Connection properties: {user=sa, autocommit=true, release_mode=auto}
2018-06-07 19:16:54,914 INFO   (: [  ]  ) [org.hibernate.dialect.Dialect] (main) HHH000400: Using dialect: org.hibernate.dialect.MySQL5Dialect
2018-06-07 19:16:54,916 INFO   (: [  ]  ) [org.hibernate.engine.transaction.internal.TransactionFactoryInitiator] (main) HHH000268: Transaction strategy: org.hibernate.engine.transaction.internal.jdbc.JdbcTransactionFactory
2018-06-07 19:16:54,916 INFO   (: [  ]  ) [org.hibernate.hql.internal.ast.ASTQueryTranslatorFactory] (main) HHH000397: Using ASTQueryTranslatorFactory
2018-06-07 19:16:54,924 INFO   (: [  ]  ) [org.hibernate.tool.hbm2ddl.SchemaExport] (main) HHH000227: Running hbm2ddl schema export
Hibernate: drop table if exists test_entity_1
Hibernate: drop table if exists hibernate_sequences
Hibernate: create table test_entity_1 (id bigint not null, intAttribute integer not null, stringAttribute varchar(255), primary key (id))
Hibernate: create table hibernate_sequences ( sequence_name varchar(255),  sequence_next_hi_value integer ) 
2018-06-07 19:16:54,925 INFO   (: [  ]  ) [org.hibernate.tool.hbm2ddl.SchemaExport] (main) HHH000230: Schema export complete
check constructions
2018-06-07 19:16:54,930 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L1 changing  from undefined to REQUIRES_NEW xid: null in OuterClass.saveNewInNewTraThrow
2018-06-07 19:16:54,930 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L2 changing  from REQUIRES_NEW to REQUIRES_NEW xid: null in StatelessEJB.saveInNewTransaction
Hibernate: select sequence_next_hi_value from hibernate_sequences where sequence_name = 'test_entity_1' for update
Hibernate: insert into hibernate_sequences(sequence_name, sequence_next_hi_value) values('test_entity_1', ?)
Hibernate: update hibernate_sequences set sequence_next_hi_value = ? where sequence_next_hi_value = ? and sequence_name = 'test_entity_1'
2018-06-07 19:16:54,932 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L2 finally   in REQUIRES_NEW xid: 44 in StatelessEJB.saveInNewTransaction
Hibernate: insert into test_entity_1 (intAttribute, stringAttribute, id) values (?, ?, ?)
2018-06-07 19:16:54,934 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L2 done      REQUIRES_NEW back to REQUIRES_NEW xid: 43 in StatelessEJB.saveInNewTransaction
2018-06-07 19:16:54,934 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L1 Exception RuntimeException in REQUIRES_NEW xid: 43 in OuterClass.saveNewInNewTraThrow
2018-06-07 19:16:54,934 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L1 finally   in REQUIRES_NEW xid: 42 in OuterClass.saveNewInNewTraThrow
2018-06-07 19:16:54,934 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L1 done      REQUIRES_NEW back to undefined xid: null in OuterClass.saveNewInNewTraThrow
Hibernate: insert into test_entity_1 (intAttribute, stringAttribute, id) values (?, ?, ?)
Hibernate: select count(testentity0_.id) as col_0_0_ from test_entity_1 testentity0_
Hibernate: select count(testentity0_.id) as col_0_0_ from test_entity_1 testentity0_
2018-06-07 19:16:54,939 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.persistence.PersistenceFactory] (main) destroying persistence factory testdb
2018-06-07 19:16:54,939 INFO   (: [  ]  ) [org.hibernate.tool.hbm2ddl.SchemaExport] (main) HHH000227: Running hbm2ddl schema export
Hibernate: drop table if exists test_entity_1
Hibernate: drop table if exists hibernate_sequences
2018-06-07 19:16:54,940 INFO   (: [  ]  ) [org.hibernate.tool.hbm2ddl.SchemaExport] (main) HHH000230: Schema export complete
2018-06-07 19:16:54,941 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000030: Cleaning up connection pool [jdbc:h2:mem:test;MODE=MySQL;DB_CLOSE_DELAY=0]
