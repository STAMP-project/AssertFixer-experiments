SLF4J: Class path contains multiple SLF4J bindings.
SLF4J: Found binding in [jar:file:/root/./workspace/1and1/ejb-cdi-unit/389259854/.m2/org/slf4j/slf4j-log4j12/1.7.21/slf4j-log4j12-1.7.21.jar!/org/slf4j/impl/StaticLoggerBinder.class]
SLF4J: Found binding in [jar:file:/root/./workspace/1and1/ejb-cdi-unit/389259854/.m2/ch/qos/logback/logback-classic/1.0.9/logback-classic-1.0.9.jar!/org/slf4j/impl/StaticLoggerBinder.class]
SLF4J: See http://www.slf4j.org/codes.html#multiple_bindings for an explanation.
SLF4J: Actual binding is of type [org.slf4j.impl.Log4jLoggerFactory]
2018-06-07 16:18:28,258 INFO   (: [  ]  ) [org.jboss.weld.Version] (main) WELD-000900 1.1.14 (Final)
2018-06-07 16:18:28,778 ERROR  (: [  ]  ) [CDI-Unit EJB-ExtensionExtended] (main) Self injection of EJB Type com.oneandone.ejbcdiunit.ejbs.SingletonEJB in field selfejb of Class com.oneandone.ejbcdiunit.ejbs.SingletonEJB can't get simulated by ejb-cdi-unit
2018-06-07 16:18:29,242 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.persistence.PersistenceFactory] (main) creating persistence factory testdb
2018-06-07 16:18:29,400 INFO   (: [  ]  ) [org.hibernate.annotations.common.Version] (main) HCANN000001: Hibernate Commons Annotations {4.0.2.Final}
2018-06-07 16:18:29,405 INFO   (: [  ]  ) [org.hibernate.Version] (main) HHH000412: Hibernate Core {4.2.2.Final}
2018-06-07 16:18:29,407 INFO   (: [  ]  ) [org.hibernate.cfg.Environment] (main) HHH000206: hibernate.properties not found
2018-06-07 16:18:29,409 INFO   (: [  ]  ) [org.hibernate.cfg.Environment] (main) HHH000021: Bytecode provider name : javassist
2018-06-07 16:18:29,656 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000402: Using Hibernate built-in connection pool (not for production use!)
2018-06-07 16:18:29,663 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000115: Hibernate connection pool size: 20
2018-06-07 16:18:29,663 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000006: Autocommit mode: true
2018-06-07 16:18:29,664 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000401: using driver [org.h2.Driver] at URL [jdbc:h2:mem:test;MODE=MySQL;DB_CLOSE_DELAY=0]
2018-06-07 16:18:29,664 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000046: Connection properties: {user=sa, autocommit=true, release_mode=auto}
2018-06-07 16:18:29,917 INFO   (: [  ]  ) [org.hibernate.dialect.Dialect] (main) HHH000400: Using dialect: org.hibernate.dialect.MySQL5Dialect
2018-06-07 16:18:30,047 INFO   (: [  ]  ) [org.hibernate.engine.transaction.internal.TransactionFactoryInitiator] (main) HHH000268: Transaction strategy: org.hibernate.engine.transaction.internal.jdbc.JdbcTransactionFactory
2018-06-07 16:18:30,052 INFO   (: [  ]  ) [org.hibernate.hql.internal.ast.ASTQueryTranslatorFactory] (main) HHH000397: Using ASTQueryTranslatorFactory
2018-06-07 16:18:30,096 INFO   (: [  ]  ) [org.hibernate.validator.internal.util.Version] (main) HV000001: Hibernate Validator 4.3.1.Final
2018-06-07 16:18:30,363 INFO   (: [  ]  ) [org.hibernate.tool.hbm2ddl.SchemaExport] (main) HHH000227: Running hbm2ddl schema export
Hibernate: drop table if exists test_entity_1
Hibernate: drop table if exists hibernate_sequences
Hibernate: create table test_entity_1 (id bigint not null, intAttribute integer not null, stringAttribute varchar(255), primary key (id))
Hibernate: create table hibernate_sequences ( sequence_name varchar(255),  sequence_next_hi_value integer ) 
2018-06-07 16:18:30,371 INFO   (: [  ]  ) [org.hibernate.tool.hbm2ddl.SchemaExport] (main) HHH000230: Schema export complete
check constructions
2018-06-07 16:18:30,533 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L1 changing  from undefined to NOT_SUPPORTED xid: null in StatelessBeanManagedTrasEJB.insertNewInTra
2018-06-07 16:18:30,534 INFO   (: [  ]  ) [ejb-cdi-unit tests] (main) output public variable 200
Hibernate: select sequence_next_hi_value from hibernate_sequences where sequence_name = 'test_entity_1' for update
Hibernate: insert into hibernate_sequences(sequence_name, sequence_next_hi_value) values('test_entity_1', ?)
Hibernate: update hibernate_sequences set sequence_next_hi_value = ? where sequence_next_hi_value = ? and sequence_name = 'test_entity_1'
Hibernate: insert into test_entity_1 (intAttribute, stringAttribute, id) values (?, ?, ?)
2018-06-07 16:18:30,657 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L1 finally   in NOT_SUPPORTED xid: null in StatelessBeanManagedTrasEJB.insertNewInTra
2018-06-07 16:18:30,657 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L1 done      NOT_SUPPORTED back to undefined xid: null in StatelessBeanManagedTrasEJB.insertNewInTra
2018-06-07 16:18:30,661 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.persistence.PersistenceFactory] (main) destroying persistence factory testdb
2018-06-07 16:18:30,661 INFO   (: [  ]  ) [org.hibernate.tool.hbm2ddl.SchemaExport] (main) HHH000227: Running hbm2ddl schema export
Hibernate: drop table if exists test_entity_1
Hibernate: drop table if exists hibernate_sequences
2018-06-07 16:18:30,665 INFO   (: [  ]  ) [org.hibernate.tool.hbm2ddl.SchemaExport] (main) HHH000230: Schema export complete
2018-06-07 16:18:30,665 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000030: Cleaning up connection pool [jdbc:h2:mem:test;MODE=MySQL;DB_CLOSE_DELAY=0]
2018-06-07 16:18:30,762 ERROR  (: [  ]  ) [CDI-Unit EJB-ExtensionExtended] (main) Self injection of EJB Type com.oneandone.ejbcdiunit.ejbs.SingletonEJB in field selfejb of Class com.oneandone.ejbcdiunit.ejbs.SingletonEJB can't get simulated by ejb-cdi-unit
2018-06-07 16:18:30,903 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.persistence.PersistenceFactory] (main) creating persistence factory testdb
2018-06-07 16:18:30,968 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000402: Using Hibernate built-in connection pool (not for production use!)
2018-06-07 16:18:30,969 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000115: Hibernate connection pool size: 20
2018-06-07 16:18:30,969 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000006: Autocommit mode: true
2018-06-07 16:18:30,969 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000401: using driver [org.h2.Driver] at URL [jdbc:h2:mem:test;MODE=MySQL;DB_CLOSE_DELAY=0]
2018-06-07 16:18:30,970 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000046: Connection properties: {user=sa, autocommit=true, release_mode=auto}
2018-06-07 16:18:30,978 INFO   (: [  ]  ) [org.hibernate.dialect.Dialect] (main) HHH000400: Using dialect: org.hibernate.dialect.MySQL5Dialect
2018-06-07 16:18:30,982 INFO   (: [  ]  ) [org.hibernate.engine.transaction.internal.TransactionFactoryInitiator] (main) HHH000268: Transaction strategy: org.hibernate.engine.transaction.internal.jdbc.JdbcTransactionFactory
2018-06-07 16:18:30,983 INFO   (: [  ]  ) [org.hibernate.hql.internal.ast.ASTQueryTranslatorFactory] (main) HHH000397: Using ASTQueryTranslatorFactory
2018-06-07 16:18:30,997 INFO   (: [  ]  ) [org.hibernate.tool.hbm2ddl.SchemaExport] (main) HHH000227: Running hbm2ddl schema export
Hibernate: drop table if exists test_entity_1
Hibernate: drop table if exists hibernate_sequences
Hibernate: create table test_entity_1 (id bigint not null, intAttribute integer not null, stringAttribute varchar(255), primary key (id))
Hibernate: create table hibernate_sequences ( sequence_name varchar(255),  sequence_next_hi_value integer ) 
2018-06-07 16:18:31,001 INFO   (: [  ]  ) [org.hibernate.tool.hbm2ddl.SchemaExport] (main) HHH000230: Schema export complete
check constructions
2018-06-07 16:18:31,011 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L1 changing  from undefined to NOT_SUPPORTED xid: null in StatelessBeanManagedTrasEJB.insertWithoutTra
2018-06-07 16:18:31,011 INFO   (: [  ]  ) [ejb-cdi-unit tests] (main) output public variable 200
2018-06-07 16:18:31,013 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L1 Exception TransactionRequiredException in NOT_SUPPORTED xid: null in StatelessBeanManagedTrasEJB.insertWithoutTra
2018-06-07 16:18:31,013 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L1 finally   in NOT_SUPPORTED xid: null in StatelessBeanManagedTrasEJB.insertWithoutTra
2018-06-07 16:18:31,013 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L1 done      NOT_SUPPORTED back to undefined xid: null in StatelessBeanManagedTrasEJB.insertWithoutTra
2018-06-07 16:18:31,015 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.persistence.PersistenceFactory] (main) destroying persistence factory testdb
2018-06-07 16:18:31,016 INFO   (: [  ]  ) [org.hibernate.tool.hbm2ddl.SchemaExport] (main) HHH000227: Running hbm2ddl schema export
Hibernate: drop table if exists test_entity_1
Hibernate: drop table if exists hibernate_sequences
2018-06-07 16:18:31,018 INFO   (: [  ]  ) [org.hibernate.tool.hbm2ddl.SchemaExport] (main) HHH000230: Schema export complete
2018-06-07 16:18:31,019 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000030: Cleaning up connection pool [jdbc:h2:mem:test;MODE=MySQL;DB_CLOSE_DELAY=0]
2018-06-07 16:18:31,098 ERROR  (: [  ]  ) [CDI-Unit EJB-ExtensionExtended] (main) Self injection of EJB Type com.oneandone.ejbcdiunit.ejbs.SingletonEJB in field selfejb of Class com.oneandone.ejbcdiunit.ejbs.SingletonEJB can't get simulated by ejb-cdi-unit
2018-06-07 16:18:31,201 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.persistence.PersistenceFactory] (main) creating persistence factory testdb
2018-06-07 16:18:31,253 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000402: Using Hibernate built-in connection pool (not for production use!)
2018-06-07 16:18:31,253 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000115: Hibernate connection pool size: 20
2018-06-07 16:18:31,253 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000006: Autocommit mode: true
2018-06-07 16:18:31,253 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000401: using driver [org.h2.Driver] at URL [jdbc:h2:mem:test;MODE=MySQL;DB_CLOSE_DELAY=0]
2018-06-07 16:18:31,254 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000046: Connection properties: {user=sa, autocommit=true, release_mode=auto}
2018-06-07 16:18:31,261 INFO   (: [  ]  ) [org.hibernate.dialect.Dialect] (main) HHH000400: Using dialect: org.hibernate.dialect.MySQL5Dialect
2018-06-07 16:18:31,264 INFO   (: [  ]  ) [org.hibernate.engine.transaction.internal.TransactionFactoryInitiator] (main) HHH000268: Transaction strategy: org.hibernate.engine.transaction.internal.jdbc.JdbcTransactionFactory
2018-06-07 16:18:31,264 INFO   (: [  ]  ) [org.hibernate.hql.internal.ast.ASTQueryTranslatorFactory] (main) HHH000397: Using ASTQueryTranslatorFactory
2018-06-07 16:18:31,274 INFO   (: [  ]  ) [org.hibernate.tool.hbm2ddl.SchemaExport] (main) HHH000227: Running hbm2ddl schema export
Hibernate: drop table if exists test_entity_1
Hibernate: drop table if exists hibernate_sequences
Hibernate: create table test_entity_1 (id bigint not null, intAttribute integer not null, stringAttribute varchar(255), primary key (id))
Hibernate: create table hibernate_sequences ( sequence_name varchar(255),  sequence_next_hi_value integer ) 
2018-06-07 16:18:31,277 INFO   (: [  ]  ) [org.hibernate.tool.hbm2ddl.SchemaExport] (main) HHH000230: Schema export complete
check constructions
2018-06-07 16:18:31,290 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L1 changing  from undefined to NOT_SUPPORTED xid: null in SingletonEJB.methodCallUsingSessionContext
2018-06-07 16:18:31,300 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L2 changing  from NOT_SUPPORTED to REQUIRES_NEW xid: null in SingletonEJB.callInNewTransactionWithParam
singleton bean 10
2018-06-07 16:18:31,301 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L2 finally   in REQUIRES_NEW xid: null in SingletonEJB.callInNewTransactionWithParam
2018-06-07 16:18:31,301 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L2 done      REQUIRES_NEW back to NOT_SUPPORTED xid: null in SingletonEJB.callInNewTransactionWithParam
2018-06-07 16:18:31,301 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L2 changing  from NOT_SUPPORTED to REQUIRES_NEW xid: null in SingletonEJB.callInNewTransaction
singleton bean
2018-06-07 16:18:31,301 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L2 finally   in REQUIRES_NEW xid: null in SingletonEJB.callInNewTransaction
2018-06-07 16:18:31,301 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L2 done      REQUIRES_NEW back to NOT_SUPPORTED xid: null in SingletonEJB.callInNewTransaction
singleton bean
2018-06-07 16:18:31,302 INFO   (: [  ]  ) [ejb-cdi-unit tests] (main) SingletonEJB: methodCallUsingSessionContext called
2018-06-07 16:18:31,302 INFO   (: [  ]  ) [ejb-cdi-unit tests] (main) output public variable 100
2018-06-07 16:18:31,302 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L1 finally   in NOT_SUPPORTED xid: null in SingletonEJB.methodCallUsingSessionContext
2018-06-07 16:18:31,302 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L1 done      NOT_SUPPORTED back to undefined xid: null in SingletonEJB.methodCallUsingSessionContext
2018-06-07 16:18:31,304 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.persistence.PersistenceFactory] (main) destroying persistence factory testdb
2018-06-07 16:18:31,304 INFO   (: [  ]  ) [org.hibernate.tool.hbm2ddl.SchemaExport] (main) HHH000227: Running hbm2ddl schema export
Hibernate: drop table if exists test_entity_1
Hibernate: drop table if exists hibernate_sequences
2018-06-07 16:18:31,306 INFO   (: [  ]  ) [org.hibernate.tool.hbm2ddl.SchemaExport] (main) HHH000230: Schema export complete
2018-06-07 16:18:31,306 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000030: Cleaning up connection pool [jdbc:h2:mem:test;MODE=MySQL;DB_CLOSE_DELAY=0]
2018-06-07 16:18:31,379 ERROR  (: [  ]  ) [CDI-Unit EJB-ExtensionExtended] (main) Self injection of EJB Type com.oneandone.ejbcdiunit.ejbs.SingletonEJB in field selfejb of Class com.oneandone.ejbcdiunit.ejbs.SingletonEJB can't get simulated by ejb-cdi-unit
2018-06-07 16:18:31,480 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.persistence.PersistenceFactory] (main) creating persistence factory testdb
2018-06-07 16:18:31,537 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000402: Using Hibernate built-in connection pool (not for production use!)
2018-06-07 16:18:31,537 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000115: Hibernate connection pool size: 20
2018-06-07 16:18:31,538 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000006: Autocommit mode: true
2018-06-07 16:18:31,538 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000401: using driver [org.h2.Driver] at URL [jdbc:h2:mem:test;MODE=MySQL;DB_CLOSE_DELAY=0]
2018-06-07 16:18:31,538 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000046: Connection properties: {user=sa, autocommit=true, release_mode=auto}
2018-06-07 16:18:31,545 INFO   (: [  ]  ) [org.hibernate.dialect.Dialect] (main) HHH000400: Using dialect: org.hibernate.dialect.MySQL5Dialect
2018-06-07 16:18:31,549 INFO   (: [  ]  ) [org.hibernate.engine.transaction.internal.TransactionFactoryInitiator] (main) HHH000268: Transaction strategy: org.hibernate.engine.transaction.internal.jdbc.JdbcTransactionFactory
2018-06-07 16:18:31,549 INFO   (: [  ]  ) [org.hibernate.hql.internal.ast.ASTQueryTranslatorFactory] (main) HHH000397: Using ASTQueryTranslatorFactory
2018-06-07 16:18:31,566 INFO   (: [  ]  ) [org.hibernate.tool.hbm2ddl.SchemaExport] (main) HHH000227: Running hbm2ddl schema export
Hibernate: drop table if exists test_entity_1
Hibernate: drop table if exists hibernate_sequences
Hibernate: create table test_entity_1 (id bigint not null, intAttribute integer not null, stringAttribute varchar(255), primary key (id))
Hibernate: create table hibernate_sequences ( sequence_name varchar(255),  sequence_next_hi_value integer ) 
2018-06-07 16:18:31,569 INFO   (: [  ]  ) [org.hibernate.tool.hbm2ddl.SchemaExport] (main) HHH000230: Schema export complete
check constructions
2018-06-07 16:18:31,579 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L1 changing  from undefined to REQUIRES_NEW xid: null in TransactionalParentEJB.saveInCurrentTransactionDefaultTraAttribute
Hibernate: select sequence_next_hi_value from hibernate_sequences where sequence_name = 'test_entity_1' for update
Hibernate: insert into hibernate_sequences(sequence_name, sequence_next_hi_value) values('test_entity_1', ?)
Hibernate: update hibernate_sequences set sequence_next_hi_value = ? where sequence_next_hi_value = ? and sequence_name = 'test_entity_1'
2018-06-07 16:18:31,599 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L1 finally   in REQUIRES_NEW xid: 2 in TransactionalParentEJB.saveInCurrentTransactionDefaultTraAttribute
Hibernate: insert into test_entity_1 (intAttribute, stringAttribute, id) values (?, ?, ?)
2018-06-07 16:18:31,603 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L1 done      REQUIRES_NEW back to undefined xid: null in TransactionalParentEJB.saveInCurrentTransactionDefaultTraAttribute
2018-06-07 16:18:31,604 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.persistence.PersistenceFactory] (main) destroying persistence factory testdb
2018-06-07 16:18:31,604 INFO   (: [  ]  ) [org.hibernate.tool.hbm2ddl.SchemaExport] (main) HHH000227: Running hbm2ddl schema export
Hibernate: drop table if exists test_entity_1
Hibernate: drop table if exists hibernate_sequences
2018-06-07 16:18:31,606 INFO   (: [  ]  ) [org.hibernate.tool.hbm2ddl.SchemaExport] (main) HHH000230: Schema export complete
2018-06-07 16:18:31,606 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000030: Cleaning up connection pool [jdbc:h2:mem:test;MODE=MySQL;DB_CLOSE_DELAY=0]
2018-06-07 16:18:31,649 ERROR  (: [  ]  ) [CDI-Unit EJB-ExtensionExtended] (main) Self injection of EJB Type com.oneandone.ejbcdiunit.ejbs.SingletonEJB in field selfejb of Class com.oneandone.ejbcdiunit.ejbs.SingletonEJB can't get simulated by ejb-cdi-unit
2018-06-07 16:18:31,719 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.persistence.PersistenceFactory] (main) creating persistence factory testdb
2018-06-07 16:18:31,763 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000402: Using Hibernate built-in connection pool (not for production use!)
2018-06-07 16:18:31,764 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000115: Hibernate connection pool size: 20
2018-06-07 16:18:31,764 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000006: Autocommit mode: true
2018-06-07 16:18:31,764 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000401: using driver [org.h2.Driver] at URL [jdbc:h2:mem:test;MODE=MySQL;DB_CLOSE_DELAY=0]
2018-06-07 16:18:31,764 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000046: Connection properties: {user=sa, autocommit=true, release_mode=auto}
2018-06-07 16:18:31,770 INFO   (: [  ]  ) [org.hibernate.dialect.Dialect] (main) HHH000400: Using dialect: org.hibernate.dialect.MySQL5Dialect
2018-06-07 16:18:31,774 INFO   (: [  ]  ) [org.hibernate.engine.transaction.internal.TransactionFactoryInitiator] (main) HHH000268: Transaction strategy: org.hibernate.engine.transaction.internal.jdbc.JdbcTransactionFactory
2018-06-07 16:18:31,774 INFO   (: [  ]  ) [org.hibernate.hql.internal.ast.ASTQueryTranslatorFactory] (main) HHH000397: Using ASTQueryTranslatorFactory
2018-06-07 16:18:31,785 INFO   (: [  ]  ) [org.hibernate.tool.hbm2ddl.SchemaExport] (main) HHH000227: Running hbm2ddl schema export
Hibernate: drop table if exists test_entity_1
Hibernate: drop table if exists hibernate_sequences
Hibernate: create table test_entity_1 (id bigint not null, intAttribute integer not null, stringAttribute varchar(255), primary key (id))
Hibernate: create table hibernate_sequences ( sequence_name varchar(255),  sequence_next_hi_value integer ) 
2018-06-07 16:18:31,787 INFO   (: [  ]  ) [org.hibernate.tool.hbm2ddl.SchemaExport] (main) HHH000230: Schema export complete
check constructions
2018-06-07 16:18:31,813 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L1 changing  from undefined to REQUIRED xid: null in StatelessEJB.saveInCurrentTransaction
Hibernate: select sequence_next_hi_value from hibernate_sequences where sequence_name = 'test_entity_1' for update
Hibernate: insert into hibernate_sequences(sequence_name, sequence_next_hi_value) values('test_entity_1', ?)
Hibernate: update hibernate_sequences set sequence_next_hi_value = ? where sequence_next_hi_value = ? and sequence_name = 'test_entity_1'
2018-06-07 16:18:31,816 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L1 finally   in REQUIRED xid: 3 in StatelessEJB.saveInCurrentTransaction
2018-06-07 16:18:31,816 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L1 done      REQUIRED back to undefined xid: 3 in StatelessEJB.saveInCurrentTransaction
Hibernate: insert into test_entity_1 (intAttribute, stringAttribute, id) values (?, ?, ?)
Hibernate: insert into test_entity_1 (intAttribute, stringAttribute, id) values (?, ?, ?)
Hibernate: select count(testentity0_.id) as col_0_0_ from test_entity_1 testentity0_
Hibernate: select count(testentity0_.id) as col_0_0_ from test_entity_1 testentity0_
2018-06-07 16:18:31,959 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.persistence.PersistenceFactory] (main) destroying persistence factory testdb
2018-06-07 16:18:31,959 INFO   (: [  ]  ) [org.hibernate.tool.hbm2ddl.SchemaExport] (main) HHH000227: Running hbm2ddl schema export
Hibernate: drop table if exists test_entity_1
Hibernate: drop table if exists hibernate_sequences
2018-06-07 16:18:31,962 INFO   (: [  ]  ) [org.hibernate.tool.hbm2ddl.SchemaExport] (main) HHH000230: Schema export complete
2018-06-07 16:18:31,962 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000030: Cleaning up connection pool [jdbc:h2:mem:test;MODE=MySQL;DB_CLOSE_DELAY=0]
2018-06-07 16:18:32,019 ERROR  (: [  ]  ) [CDI-Unit EJB-ExtensionExtended] (main) Self injection of EJB Type com.oneandone.ejbcdiunit.ejbs.SingletonEJB in field selfejb of Class com.oneandone.ejbcdiunit.ejbs.SingletonEJB can't get simulated by ejb-cdi-unit
2018-06-07 16:18:32,087 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.persistence.PersistenceFactory] (main) creating persistence factory testdb
2018-06-07 16:18:32,129 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000402: Using Hibernate built-in connection pool (not for production use!)
2018-06-07 16:18:32,129 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000115: Hibernate connection pool size: 20
2018-06-07 16:18:32,129 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000006: Autocommit mode: true
2018-06-07 16:18:32,130 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000401: using driver [org.h2.Driver] at URL [jdbc:h2:mem:test;MODE=MySQL;DB_CLOSE_DELAY=0]
2018-06-07 16:18:32,130 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000046: Connection properties: {user=sa, autocommit=true, release_mode=auto}
2018-06-07 16:18:32,135 INFO   (: [  ]  ) [org.hibernate.dialect.Dialect] (main) HHH000400: Using dialect: org.hibernate.dialect.MySQL5Dialect
2018-06-07 16:18:32,138 INFO   (: [  ]  ) [org.hibernate.engine.transaction.internal.TransactionFactoryInitiator] (main) HHH000268: Transaction strategy: org.hibernate.engine.transaction.internal.jdbc.JdbcTransactionFactory
2018-06-07 16:18:32,138 INFO   (: [  ]  ) [org.hibernate.hql.internal.ast.ASTQueryTranslatorFactory] (main) HHH000397: Using ASTQueryTranslatorFactory
2018-06-07 16:18:32,150 INFO   (: [  ]  ) [org.hibernate.tool.hbm2ddl.SchemaExport] (main) HHH000227: Running hbm2ddl schema export
Hibernate: drop table if exists test_entity_1
Hibernate: drop table if exists hibernate_sequences
Hibernate: create table test_entity_1 (id bigint not null, intAttribute integer not null, stringAttribute varchar(255), primary key (id))
Hibernate: create table hibernate_sequences ( sequence_name varchar(255),  sequence_next_hi_value integer ) 
2018-06-07 16:18:32,151 INFO   (: [  ]  ) [org.hibernate.tool.hbm2ddl.SchemaExport] (main) HHH000230: Schema export complete
check constructions
2018-06-07 16:18:32,159 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L1 changing  from undefined to REQUIRED xid: null in OuterClass.saveNewInRequired
2018-06-07 16:18:32,159 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L2 changing  from REQUIRED to REQUIRES_NEW xid: null in StatelessEJB.saveInNewTransaction
Hibernate: select sequence_next_hi_value from hibernate_sequences where sequence_name = 'test_entity_1' for update
Hibernate: insert into hibernate_sequences(sequence_name, sequence_next_hi_value) values('test_entity_1', ?)
Hibernate: update hibernate_sequences set sequence_next_hi_value = ? where sequence_next_hi_value = ? and sequence_name = 'test_entity_1'
2018-06-07 16:18:32,161 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L2 finally   in REQUIRES_NEW xid: 5 in StatelessEJB.saveInNewTransaction
Hibernate: insert into test_entity_1 (intAttribute, stringAttribute, id) values (?, ?, ?)
2018-06-07 16:18:32,165 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L2 done      REQUIRES_NEW back to REQUIRED xid: 4 in StatelessEJB.saveInNewTransaction
2018-06-07 16:18:32,166 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L1 finally   in REQUIRED xid: 4 in OuterClass.saveNewInRequired
2018-06-07 16:18:32,166 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L1 done      REQUIRED back to undefined xid: 4 in OuterClass.saveNewInRequired
Hibernate: insert into test_entity_1 (intAttribute, stringAttribute, id) values (?, ?, ?)
Hibernate: select count(testentity0_.id) as col_0_0_ from test_entity_1 testentity0_
Hibernate: select count(testentity0_.id) as col_0_0_ from test_entity_1 testentity0_
2018-06-07 16:18:32,173 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.persistence.PersistenceFactory] (main) destroying persistence factory testdb
2018-06-07 16:18:32,173 INFO   (: [  ]  ) [org.hibernate.tool.hbm2ddl.SchemaExport] (main) HHH000227: Running hbm2ddl schema export
Hibernate: drop table if exists test_entity_1
Hibernate: drop table if exists hibernate_sequences
2018-06-07 16:18:32,175 INFO   (: [  ]  ) [org.hibernate.tool.hbm2ddl.SchemaExport] (main) HHH000230: Schema export complete
2018-06-07 16:18:32,176 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000030: Cleaning up connection pool [jdbc:h2:mem:test;MODE=MySQL;DB_CLOSE_DELAY=0]
2018-06-07 16:18:32,218 ERROR  (: [  ]  ) [CDI-Unit EJB-ExtensionExtended] (main) Self injection of EJB Type com.oneandone.ejbcdiunit.ejbs.SingletonEJB in field selfejb of Class com.oneandone.ejbcdiunit.ejbs.SingletonEJB can't get simulated by ejb-cdi-unit
2018-06-07 16:18:32,281 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.persistence.PersistenceFactory] (main) creating persistence factory testdb
2018-06-07 16:18:32,319 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000402: Using Hibernate built-in connection pool (not for production use!)
2018-06-07 16:18:32,319 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000115: Hibernate connection pool size: 20
2018-06-07 16:18:32,319 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000006: Autocommit mode: true
2018-06-07 16:18:32,320 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000401: using driver [org.h2.Driver] at URL [jdbc:h2:mem:test;MODE=MySQL;DB_CLOSE_DELAY=0]
2018-06-07 16:18:32,320 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000046: Connection properties: {user=sa, autocommit=true, release_mode=auto}
2018-06-07 16:18:32,325 INFO   (: [  ]  ) [org.hibernate.dialect.Dialect] (main) HHH000400: Using dialect: org.hibernate.dialect.MySQL5Dialect
2018-06-07 16:18:32,328 INFO   (: [  ]  ) [org.hibernate.engine.transaction.internal.TransactionFactoryInitiator] (main) HHH000268: Transaction strategy: org.hibernate.engine.transaction.internal.jdbc.JdbcTransactionFactory
2018-06-07 16:18:32,328 INFO   (: [  ]  ) [org.hibernate.hql.internal.ast.ASTQueryTranslatorFactory] (main) HHH000397: Using ASTQueryTranslatorFactory
2018-06-07 16:18:32,341 INFO   (: [  ]  ) [org.hibernate.tool.hbm2ddl.SchemaExport] (main) HHH000227: Running hbm2ddl schema export
Hibernate: drop table if exists test_entity_1
Hibernate: drop table if exists hibernate_sequences
Hibernate: create table test_entity_1 (id bigint not null, intAttribute integer not null, stringAttribute varchar(255), primary key (id))
Hibernate: create table hibernate_sequences ( sequence_name varchar(255),  sequence_next_hi_value integer ) 
2018-06-07 16:18:32,343 INFO   (: [  ]  ) [org.hibernate.tool.hbm2ddl.SchemaExport] (main) HHH000230: Schema export complete
check constructions
2018-06-07 16:18:32,351 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L1 changing  from undefined to REQUIRED xid: null in OuterClass.saveNewInRequiredThrowRTException
2018-06-07 16:18:32,351 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L2 changing  from REQUIRED to REQUIRES_NEW xid: null in StatelessEJB.saveInNewTransaction
Hibernate: select sequence_next_hi_value from hibernate_sequences where sequence_name = 'test_entity_1' for update
Hibernate: insert into hibernate_sequences(sequence_name, sequence_next_hi_value) values('test_entity_1', ?)
Hibernate: update hibernate_sequences set sequence_next_hi_value = ? where sequence_next_hi_value = ? and sequence_name = 'test_entity_1'
2018-06-07 16:18:32,354 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L2 finally   in REQUIRES_NEW xid: 7 in StatelessEJB.saveInNewTransaction
Hibernate: insert into test_entity_1 (intAttribute, stringAttribute, id) values (?, ?, ?)
2018-06-07 16:18:32,358 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L2 done      REQUIRES_NEW back to REQUIRED xid: 6 in StatelessEJB.saveInNewTransaction
2018-06-07 16:18:32,359 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L1 Exception RuntimeException in REQUIRED xid: 6 in OuterClass.saveNewInRequiredThrowRTException
2018-06-07 16:18:32,359 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L1 finally   in REQUIRED xid: null in OuterClass.saveNewInRequiredThrowRTException
2018-06-07 16:18:32,359 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L1 done      REQUIRED back to undefined xid: null in OuterClass.saveNewInRequiredThrowRTException
Hibernate: insert into test_entity_1 (intAttribute, stringAttribute, id) values (?, ?, ?)
Hibernate: select count(testentity0_.id) as col_0_0_ from test_entity_1 testentity0_
Hibernate: select count(testentity0_.id) as col_0_0_ from test_entity_1 testentity0_
2018-06-07 16:18:32,368 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.persistence.PersistenceFactory] (main) destroying persistence factory testdb
2018-06-07 16:18:32,368 INFO   (: [  ]  ) [org.hibernate.tool.hbm2ddl.SchemaExport] (main) HHH000227: Running hbm2ddl schema export
Hibernate: drop table if exists test_entity_1
Hibernate: drop table if exists hibernate_sequences
2018-06-07 16:18:32,370 INFO   (: [  ]  ) [org.hibernate.tool.hbm2ddl.SchemaExport] (main) HHH000230: Schema export complete
2018-06-07 16:18:32,370 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000030: Cleaning up connection pool [jdbc:h2:mem:test;MODE=MySQL;DB_CLOSE_DELAY=0]
2018-06-07 16:18:32,411 ERROR  (: [  ]  ) [CDI-Unit EJB-ExtensionExtended] (main) Self injection of EJB Type com.oneandone.ejbcdiunit.ejbs.SingletonEJB in field selfejb of Class com.oneandone.ejbcdiunit.ejbs.SingletonEJB can't get simulated by ejb-cdi-unit
2018-06-07 16:18:32,471 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.persistence.PersistenceFactory] (main) creating persistence factory testdb
2018-06-07 16:18:32,514 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000402: Using Hibernate built-in connection pool (not for production use!)
2018-06-07 16:18:32,514 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000115: Hibernate connection pool size: 20
2018-06-07 16:18:32,515 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000006: Autocommit mode: true
2018-06-07 16:18:32,515 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000401: using driver [org.h2.Driver] at URL [jdbc:h2:mem:test;MODE=MySQL;DB_CLOSE_DELAY=0]
2018-06-07 16:18:32,515 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000046: Connection properties: {user=sa, autocommit=true, release_mode=auto}
2018-06-07 16:18:32,520 INFO   (: [  ]  ) [org.hibernate.dialect.Dialect] (main) HHH000400: Using dialect: org.hibernate.dialect.MySQL5Dialect
2018-06-07 16:18:32,523 INFO   (: [  ]  ) [org.hibernate.engine.transaction.internal.TransactionFactoryInitiator] (main) HHH000268: Transaction strategy: org.hibernate.engine.transaction.internal.jdbc.JdbcTransactionFactory
2018-06-07 16:18:32,523 INFO   (: [  ]  ) [org.hibernate.hql.internal.ast.ASTQueryTranslatorFactory] (main) HHH000397: Using ASTQueryTranslatorFactory
2018-06-07 16:18:32,537 INFO   (: [  ]  ) [org.hibernate.tool.hbm2ddl.SchemaExport] (main) HHH000227: Running hbm2ddl schema export
Hibernate: drop table if exists test_entity_1
Hibernate: drop table if exists hibernate_sequences
Hibernate: create table test_entity_1 (id bigint not null, intAttribute integer not null, stringAttribute varchar(255), primary key (id))
Hibernate: create table hibernate_sequences ( sequence_name varchar(255),  sequence_next_hi_value integer ) 
2018-06-07 16:18:32,540 INFO   (: [  ]  ) [org.hibernate.tool.hbm2ddl.SchemaExport] (main) HHH000230: Schema export complete
check constructions
2018-06-07 16:18:32,549 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L1 changing  from undefined to REQUIRES_NEW xid: null in StatelessEJB.saveInNewTransaction
Hibernate: select sequence_next_hi_value from hibernate_sequences where sequence_name = 'test_entity_1' for update
Hibernate: insert into hibernate_sequences(sequence_name, sequence_next_hi_value) values('test_entity_1', ?)
Hibernate: update hibernate_sequences set sequence_next_hi_value = ? where sequence_next_hi_value = ? and sequence_name = 'test_entity_1'
2018-06-07 16:18:32,552 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L1 finally   in REQUIRES_NEW xid: 10 in StatelessEJB.saveInNewTransaction
Hibernate: insert into test_entity_1 (intAttribute, stringAttribute, id) values (?, ?, ?)
2018-06-07 16:18:32,556 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L1 done      REQUIRES_NEW back to undefined xid: 9 in StatelessEJB.saveInNewTransaction
Hibernate: insert into test_entity_1 (intAttribute, stringAttribute, id) values (?, ?, ?)
Hibernate: select count(testentity0_.id) as col_0_0_ from test_entity_1 testentity0_
Hibernate: select count(testentity0_.id) as col_0_0_ from test_entity_1 testentity0_
2018-06-07 16:18:32,563 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.persistence.PersistenceFactory] (main) destroying persistence factory testdb
2018-06-07 16:18:32,564 INFO   (: [  ]  ) [org.hibernate.tool.hbm2ddl.SchemaExport] (main) HHH000227: Running hbm2ddl schema export
Hibernate: drop table if exists test_entity_1
Hibernate: drop table if exists hibernate_sequences
2018-06-07 16:18:32,565 INFO   (: [  ]  ) [org.hibernate.tool.hbm2ddl.SchemaExport] (main) HHH000230: Schema export complete
2018-06-07 16:18:32,565 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000030: Cleaning up connection pool [jdbc:h2:mem:test;MODE=MySQL;DB_CLOSE_DELAY=0]
2018-06-07 16:18:32,610 ERROR  (: [  ]  ) [CDI-Unit EJB-ExtensionExtended] (main) Self injection of EJB Type com.oneandone.ejbcdiunit.ejbs.SingletonEJB in field selfejb of Class com.oneandone.ejbcdiunit.ejbs.SingletonEJB can't get simulated by ejb-cdi-unit
2018-06-07 16:18:32,674 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.persistence.PersistenceFactory] (main) creating persistence factory testdb
2018-06-07 16:18:32,711 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000402: Using Hibernate built-in connection pool (not for production use!)
2018-06-07 16:18:32,711 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000115: Hibernate connection pool size: 20
2018-06-07 16:18:32,711 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000006: Autocommit mode: true
2018-06-07 16:18:32,711 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000401: using driver [org.h2.Driver] at URL [jdbc:h2:mem:test;MODE=MySQL;DB_CLOSE_DELAY=0]
2018-06-07 16:18:32,711 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000046: Connection properties: {user=sa, autocommit=true, release_mode=auto}
2018-06-07 16:18:32,716 INFO   (: [  ]  ) [org.hibernate.dialect.Dialect] (main) HHH000400: Using dialect: org.hibernate.dialect.MySQL5Dialect
2018-06-07 16:18:32,719 INFO   (: [  ]  ) [org.hibernate.engine.transaction.internal.TransactionFactoryInitiator] (main) HHH000268: Transaction strategy: org.hibernate.engine.transaction.internal.jdbc.JdbcTransactionFactory
2018-06-07 16:18:32,719 INFO   (: [  ]  ) [org.hibernate.hql.internal.ast.ASTQueryTranslatorFactory] (main) HHH000397: Using ASTQueryTranslatorFactory
2018-06-07 16:18:32,733 INFO   (: [  ]  ) [org.hibernate.tool.hbm2ddl.SchemaExport] (main) HHH000227: Running hbm2ddl schema export
Hibernate: drop table if exists test_entity_1
Hibernate: drop table if exists hibernate_sequences
Hibernate: create table test_entity_1 (id bigint not null, intAttribute integer not null, stringAttribute varchar(255), primary key (id))
Hibernate: create table hibernate_sequences ( sequence_name varchar(255),  sequence_next_hi_value integer ) 
2018-06-07 16:18:32,736 INFO   (: [  ]  ) [org.hibernate.tool.hbm2ddl.SchemaExport] (main) HHH000230: Schema export complete
check constructions
2018-06-07 16:18:32,745 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L1 changing  from undefined to REQUIRED xid: null in OuterClass.saveRequiredInRequired
2018-06-07 16:18:32,745 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L2 changing  from REQUIRED to REQUIRED xid: null in StatelessEJB.saveInCurrentTransaction
Hibernate: select sequence_next_hi_value from hibernate_sequences where sequence_name = 'test_entity_1' for update
Hibernate: insert into hibernate_sequences(sequence_name, sequence_next_hi_value) values('test_entity_1', ?)
Hibernate: update hibernate_sequences set sequence_next_hi_value = ? where sequence_next_hi_value = ? and sequence_name = 'test_entity_1'
2018-06-07 16:18:32,748 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L2 finally   in REQUIRED xid: 11 in StatelessEJB.saveInCurrentTransaction
2018-06-07 16:18:32,748 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L2 done      REQUIRED back to REQUIRED xid: 11 in StatelessEJB.saveInCurrentTransaction
2018-06-07 16:18:32,748 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L1 finally   in REQUIRED xid: 11 in OuterClass.saveRequiredInRequired
2018-06-07 16:18:32,748 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L1 done      REQUIRED back to undefined xid: 11 in OuterClass.saveRequiredInRequired
Hibernate: insert into test_entity_1 (intAttribute, stringAttribute, id) values (?, ?, ?)
Hibernate: insert into test_entity_1 (intAttribute, stringAttribute, id) values (?, ?, ?)
Hibernate: select count(testentity0_.id) as col_0_0_ from test_entity_1 testentity0_
Hibernate: select count(testentity0_.id) as col_0_0_ from test_entity_1 testentity0_
2018-06-07 16:18:32,760 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.persistence.PersistenceFactory] (main) destroying persistence factory testdb
2018-06-07 16:18:32,760 INFO   (: [  ]  ) [org.hibernate.tool.hbm2ddl.SchemaExport] (main) HHH000227: Running hbm2ddl schema export
Hibernate: drop table if exists test_entity_1
Hibernate: drop table if exists hibernate_sequences
2018-06-07 16:18:32,762 INFO   (: [  ]  ) [org.hibernate.tool.hbm2ddl.SchemaExport] (main) HHH000230: Schema export complete
2018-06-07 16:18:32,762 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000030: Cleaning up connection pool [jdbc:h2:mem:test;MODE=MySQL;DB_CLOSE_DELAY=0]
2018-06-07 16:18:32,827 ERROR  (: [  ]  ) [CDI-Unit EJB-ExtensionExtended] (main) Self injection of EJB Type com.oneandone.ejbcdiunit.ejbs.SingletonEJB in field selfejb of Class com.oneandone.ejbcdiunit.ejbs.SingletonEJB can't get simulated by ejb-cdi-unit
2018-06-07 16:18:32,879 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.persistence.PersistenceFactory] (main) creating persistence factory testdb
2018-06-07 16:18:32,903 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000402: Using Hibernate built-in connection pool (not for production use!)
2018-06-07 16:18:32,903 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000115: Hibernate connection pool size: 20
2018-06-07 16:18:32,903 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000006: Autocommit mode: true
2018-06-07 16:18:32,903 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000401: using driver [org.h2.Driver] at URL [jdbc:h2:mem:test;MODE=MySQL;DB_CLOSE_DELAY=0]
2018-06-07 16:18:32,904 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000046: Connection properties: {user=sa, autocommit=true, release_mode=auto}
2018-06-07 16:18:32,907 INFO   (: [  ]  ) [org.hibernate.dialect.Dialect] (main) HHH000400: Using dialect: org.hibernate.dialect.MySQL5Dialect
2018-06-07 16:18:32,909 INFO   (: [  ]  ) [org.hibernate.engine.transaction.internal.TransactionFactoryInitiator] (main) HHH000268: Transaction strategy: org.hibernate.engine.transaction.internal.jdbc.JdbcTransactionFactory
2018-06-07 16:18:32,910 INFO   (: [  ]  ) [org.hibernate.hql.internal.ast.ASTQueryTranslatorFactory] (main) HHH000397: Using ASTQueryTranslatorFactory
2018-06-07 16:18:32,918 INFO   (: [  ]  ) [org.hibernate.tool.hbm2ddl.SchemaExport] (main) HHH000227: Running hbm2ddl schema export
Hibernate: drop table if exists test_entity_1
Hibernate: drop table if exists hibernate_sequences
Hibernate: create table test_entity_1 (id bigint not null, intAttribute integer not null, stringAttribute varchar(255), primary key (id))
Hibernate: create table hibernate_sequences ( sequence_name varchar(255),  sequence_next_hi_value integer ) 
2018-06-07 16:18:32,920 INFO   (: [  ]  ) [org.hibernate.tool.hbm2ddl.SchemaExport] (main) HHH000230: Schema export complete
check constructions
2018-06-07 16:18:32,926 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L1 changing  from undefined to NOT_SUPPORTED xid: null in StatelessBeanManagedTrasEJB.insertWithoutTra
2018-06-07 16:18:32,926 INFO   (: [  ]  ) [ejb-cdi-unit tests] (main) output public variable 200
2018-06-07 16:18:32,926 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L1 Exception TransactionRequiredException in NOT_SUPPORTED xid: null in StatelessBeanManagedTrasEJB.insertWithoutTra
2018-06-07 16:18:32,926 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L1 finally   in NOT_SUPPORTED xid: null in StatelessBeanManagedTrasEJB.insertWithoutTra
2018-06-07 16:18:32,926 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L1 done      NOT_SUPPORTED back to undefined xid: null in StatelessBeanManagedTrasEJB.insertWithoutTra
2018-06-07 16:18:32,928 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.persistence.PersistenceFactory] (main) destroying persistence factory testdb
2018-06-07 16:18:32,928 INFO   (: [  ]  ) [org.hibernate.tool.hbm2ddl.SchemaExport] (main) HHH000227: Running hbm2ddl schema export
Hibernate: drop table if exists test_entity_1
Hibernate: drop table if exists hibernate_sequences
2018-06-07 16:18:32,929 INFO   (: [  ]  ) [org.hibernate.tool.hbm2ddl.SchemaExport] (main) HHH000230: Schema export complete
2018-06-07 16:18:32,930 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000030: Cleaning up connection pool [jdbc:h2:mem:test;MODE=MySQL;DB_CLOSE_DELAY=0]
2018-06-07 16:18:32,963 ERROR  (: [  ]  ) [CDI-Unit EJB-ExtensionExtended] (main) Self injection of EJB Type com.oneandone.ejbcdiunit.ejbs.SingletonEJB in field selfejb of Class com.oneandone.ejbcdiunit.ejbs.SingletonEJB can't get simulated by ejb-cdi-unit
2018-06-07 16:18:33,016 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.persistence.PersistenceFactory] (main) creating persistence factory testdb
2018-06-07 16:18:33,041 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000402: Using Hibernate built-in connection pool (not for production use!)
2018-06-07 16:18:33,041 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000115: Hibernate connection pool size: 20
2018-06-07 16:18:33,041 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000006: Autocommit mode: true
2018-06-07 16:18:33,041 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000401: using driver [org.h2.Driver] at URL [jdbc:h2:mem:test;MODE=MySQL;DB_CLOSE_DELAY=0]
2018-06-07 16:18:33,041 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000046: Connection properties: {user=sa, autocommit=true, release_mode=auto}
2018-06-07 16:18:33,044 INFO   (: [  ]  ) [org.hibernate.dialect.Dialect] (main) HHH000400: Using dialect: org.hibernate.dialect.MySQL5Dialect
2018-06-07 16:18:33,047 INFO   (: [  ]  ) [org.hibernate.engine.transaction.internal.TransactionFactoryInitiator] (main) HHH000268: Transaction strategy: org.hibernate.engine.transaction.internal.jdbc.JdbcTransactionFactory
2018-06-07 16:18:33,047 INFO   (: [  ]  ) [org.hibernate.hql.internal.ast.ASTQueryTranslatorFactory] (main) HHH000397: Using ASTQueryTranslatorFactory
2018-06-07 16:18:33,055 INFO   (: [  ]  ) [org.hibernate.tool.hbm2ddl.SchemaExport] (main) HHH000227: Running hbm2ddl schema export
Hibernate: drop table if exists test_entity_1
Hibernate: drop table if exists hibernate_sequences
Hibernate: create table test_entity_1 (id bigint not null, intAttribute integer not null, stringAttribute varchar(255), primary key (id))
Hibernate: create table hibernate_sequences ( sequence_name varchar(255),  sequence_next_hi_value integer ) 
2018-06-07 16:18:33,057 INFO   (: [  ]  ) [org.hibernate.tool.hbm2ddl.SchemaExport] (main) HHH000230: Schema export complete
check constructions
2018-06-07 16:18:33,064 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L1 changing  from undefined to REQUIRES_NEW xid: null in OuterClass.saveRequiredPlusNewInNewTraButDirectCallAndThrow
2018-06-07 16:18:33,064 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L2 changing  from REQUIRES_NEW to REQUIRED xid: null in StatelessEJB.saveInCurrentTransactionAndSaveNewInNewButDirectCall
Hibernate: select sequence_next_hi_value from hibernate_sequences where sequence_name = 'test_entity_1' for update
Hibernate: insert into hibernate_sequences(sequence_name, sequence_next_hi_value) values('test_entity_1', ?)
Hibernate: update hibernate_sequences set sequence_next_hi_value = ? where sequence_next_hi_value = ? and sequence_name = 'test_entity_1'
2018-06-07 16:18:33,067 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L2 finally   in REQUIRED xid: 13 in StatelessEJB.saveInCurrentTransactionAndSaveNewInNewButDirectCall
2018-06-07 16:18:33,067 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L2 done      REQUIRED back to REQUIRES_NEW xid: 13 in StatelessEJB.saveInCurrentTransactionAndSaveNewInNewButDirectCall
2018-06-07 16:18:33,067 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L1 Exception RuntimeException in REQUIRES_NEW xid: 13 in OuterClass.saveRequiredPlusNewInNewTraButDirectCallAndThrow
2018-06-07 16:18:33,067 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L1 finally   in REQUIRES_NEW xid: 12 in OuterClass.saveRequiredPlusNewInNewTraButDirectCallAndThrow
2018-06-07 16:18:33,067 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L1 done      REQUIRES_NEW back to undefined xid: null in OuterClass.saveRequiredPlusNewInNewTraButDirectCallAndThrow
Hibernate: insert into test_entity_1 (intAttribute, stringAttribute, id) values (?, ?, ?)
Hibernate: select count(testentity0_.id) as col_0_0_ from test_entity_1 testentity0_
Hibernate: select count(testentity0_.id) as col_0_0_ from test_entity_1 testentity0_
2018-06-07 16:18:33,075 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.persistence.PersistenceFactory] (main) destroying persistence factory testdb
2018-06-07 16:18:33,075 INFO   (: [  ]  ) [org.hibernate.tool.hbm2ddl.SchemaExport] (main) HHH000227: Running hbm2ddl schema export
Hibernate: drop table if exists test_entity_1
Hibernate: drop table if exists hibernate_sequences
2018-06-07 16:18:33,077 INFO   (: [  ]  ) [org.hibernate.tool.hbm2ddl.SchemaExport] (main) HHH000230: Schema export complete
2018-06-07 16:18:33,077 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000030: Cleaning up connection pool [jdbc:h2:mem:test;MODE=MySQL;DB_CLOSE_DELAY=0]
2018-06-07 16:18:33,111 ERROR  (: [  ]  ) [CDI-Unit EJB-ExtensionExtended] (main) Self injection of EJB Type com.oneandone.ejbcdiunit.ejbs.SingletonEJB in field selfejb of Class com.oneandone.ejbcdiunit.ejbs.SingletonEJB can't get simulated by ejb-cdi-unit
2018-06-07 16:18:33,157 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.persistence.PersistenceFactory] (main) creating persistence factory testdb
2018-06-07 16:18:33,181 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000402: Using Hibernate built-in connection pool (not for production use!)
2018-06-07 16:18:33,181 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000115: Hibernate connection pool size: 20
2018-06-07 16:18:33,181 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000006: Autocommit mode: true
2018-06-07 16:18:33,181 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000401: using driver [org.h2.Driver] at URL [jdbc:h2:mem:test;MODE=MySQL;DB_CLOSE_DELAY=0]
2018-06-07 16:18:33,181 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000046: Connection properties: {user=sa, autocommit=true, release_mode=auto}
2018-06-07 16:18:33,184 INFO   (: [  ]  ) [org.hibernate.dialect.Dialect] (main) HHH000400: Using dialect: org.hibernate.dialect.MySQL5Dialect
2018-06-07 16:18:33,187 INFO   (: [  ]  ) [org.hibernate.engine.transaction.internal.TransactionFactoryInitiator] (main) HHH000268: Transaction strategy: org.hibernate.engine.transaction.internal.jdbc.JdbcTransactionFactory
2018-06-07 16:18:33,187 INFO   (: [  ]  ) [org.hibernate.hql.internal.ast.ASTQueryTranslatorFactory] (main) HHH000397: Using ASTQueryTranslatorFactory
2018-06-07 16:18:33,195 INFO   (: [  ]  ) [org.hibernate.tool.hbm2ddl.SchemaExport] (main) HHH000227: Running hbm2ddl schema export
Hibernate: drop table if exists test_entity_1
Hibernate: drop table if exists hibernate_sequences
Hibernate: create table test_entity_1 (id bigint not null, intAttribute integer not null, stringAttribute varchar(255), primary key (id))
Hibernate: create table hibernate_sequences ( sequence_name varchar(255),  sequence_next_hi_value integer ) 
2018-06-07 16:18:33,197 INFO   (: [  ]  ) [org.hibernate.tool.hbm2ddl.SchemaExport] (main) HHH000230: Schema export complete
check constructions
2018-06-07 16:18:33,203 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L1 changing  from undefined to REQUIRED xid: null in OuterClass.saveRequiredInRequiredThrowException
2018-06-07 16:18:33,203 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L2 changing  from REQUIRED to REQUIRED xid: null in StatelessEJB.saveInCurrentTransaction
Hibernate: select sequence_next_hi_value from hibernate_sequences where sequence_name = 'test_entity_1' for update
Hibernate: insert into hibernate_sequences(sequence_name, sequence_next_hi_value) values('test_entity_1', ?)
Hibernate: update hibernate_sequences set sequence_next_hi_value = ? where sequence_next_hi_value = ? and sequence_name = 'test_entity_1'
2018-06-07 16:18:33,205 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L2 finally   in REQUIRED xid: 14 in StatelessEJB.saveInCurrentTransaction
2018-06-07 16:18:33,205 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L2 done      REQUIRED back to REQUIRED xid: 14 in StatelessEJB.saveInCurrentTransaction
2018-06-07 16:18:33,205 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L1 Exception RuntimeException in REQUIRED xid: 14 in OuterClass.saveRequiredInRequiredThrowException
2018-06-07 16:18:33,206 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L1 finally   in REQUIRED xid: null in OuterClass.saveRequiredInRequiredThrowException
2018-06-07 16:18:33,206 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L1 done      REQUIRED back to undefined xid: null in OuterClass.saveRequiredInRequiredThrowException
Hibernate: insert into test_entity_1 (intAttribute, stringAttribute, id) values (?, ?, ?)
Hibernate: select count(testentity0_.id) as col_0_0_ from test_entity_1 testentity0_
Hibernate: select count(testentity0_.id) as col_0_0_ from test_entity_1 testentity0_
2018-06-07 16:18:33,214 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.persistence.PersistenceFactory] (main) destroying persistence factory testdb
2018-06-07 16:18:33,214 INFO   (: [  ]  ) [org.hibernate.tool.hbm2ddl.SchemaExport] (main) HHH000227: Running hbm2ddl schema export
Hibernate: drop table if exists test_entity_1
Hibernate: drop table if exists hibernate_sequences
2018-06-07 16:18:33,215 INFO   (: [  ]  ) [org.hibernate.tool.hbm2ddl.SchemaExport] (main) HHH000230: Schema export complete
2018-06-07 16:18:33,216 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000030: Cleaning up connection pool [jdbc:h2:mem:test;MODE=MySQL;DB_CLOSE_DELAY=0]
2018-06-07 16:18:33,257 ERROR  (: [  ]  ) [CDI-Unit EJB-ExtensionExtended] (main) Self injection of EJB Type com.oneandone.ejbcdiunit.ejbs.SingletonEJB in field selfejb of Class com.oneandone.ejbcdiunit.ejbs.SingletonEJB can't get simulated by ejb-cdi-unit
2018-06-07 16:18:33,315 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.persistence.PersistenceFactory] (main) creating persistence factory testdb
2018-06-07 16:18:33,348 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000402: Using Hibernate built-in connection pool (not for production use!)
2018-06-07 16:18:33,348 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000115: Hibernate connection pool size: 20
2018-06-07 16:18:33,348 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000006: Autocommit mode: true
2018-06-07 16:18:33,348 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000401: using driver [org.h2.Driver] at URL [jdbc:h2:mem:test;MODE=MySQL;DB_CLOSE_DELAY=0]
2018-06-07 16:18:33,348 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000046: Connection properties: {user=sa, autocommit=true, release_mode=auto}
2018-06-07 16:18:33,353 INFO   (: [  ]  ) [org.hibernate.dialect.Dialect] (main) HHH000400: Using dialect: org.hibernate.dialect.MySQL5Dialect
2018-06-07 16:18:33,355 INFO   (: [  ]  ) [org.hibernate.engine.transaction.internal.TransactionFactoryInitiator] (main) HHH000268: Transaction strategy: org.hibernate.engine.transaction.internal.jdbc.JdbcTransactionFactory
2018-06-07 16:18:33,356 INFO   (: [  ]  ) [org.hibernate.hql.internal.ast.ASTQueryTranslatorFactory] (main) HHH000397: Using ASTQueryTranslatorFactory
2018-06-07 16:18:33,367 INFO   (: [  ]  ) [org.hibernate.tool.hbm2ddl.SchemaExport] (main) HHH000227: Running hbm2ddl schema export
Hibernate: drop table if exists test_entity_1
Hibernate: drop table if exists hibernate_sequences
Hibernate: create table test_entity_1 (id bigint not null, intAttribute integer not null, stringAttribute varchar(255), primary key (id))
Hibernate: create table hibernate_sequences ( sequence_name varchar(255),  sequence_next_hi_value integer ) 
2018-06-07 16:18:33,369 INFO   (: [  ]  ) [org.hibernate.tool.hbm2ddl.SchemaExport] (main) HHH000230: Schema export complete
check constructions
2018-06-07 16:18:33,377 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L1 changing  from undefined to REQUIRES_NEW xid: null in OuterClass.saveRequiresNewLocalUsingSelfAndThrow
2018-06-07 16:18:33,378 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L2 changing  from REQUIRES_NEW to REQUIRED xid: null in SingletonEJB.saveRequiresNewLocalUsingSelf
Hibernate: select sequence_next_hi_value from hibernate_sequences where sequence_name = 'test_entity_1' for update
Hibernate: insert into hibernate_sequences(sequence_name, sequence_next_hi_value) values('test_entity_1', ?)
Hibernate: update hibernate_sequences set sequence_next_hi_value = ? where sequence_next_hi_value = ? and sequence_name = 'test_entity_1'
2018-06-07 16:18:33,381 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L3 changing  from REQUIRED to REQUIRES_NEW xid: 17 in SingletonEJB.saveInNewTransaction
2018-06-07 16:18:33,381 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L3 finally   in REQUIRES_NEW xid: 18 in SingletonEJB.saveInNewTransaction
Hibernate: insert into test_entity_1 (intAttribute, stringAttribute, id) values (?, ?, ?)
2018-06-07 16:18:33,385 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L3 done      REQUIRES_NEW back to REQUIRED xid: 17 in SingletonEJB.saveInNewTransaction
2018-06-07 16:18:33,385 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L2 finally   in REQUIRED xid: 17 in SingletonEJB.saveRequiresNewLocalUsingSelf
2018-06-07 16:18:33,385 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L2 done      REQUIRED back to REQUIRES_NEW xid: 17 in SingletonEJB.saveRequiresNewLocalUsingSelf
2018-06-07 16:18:33,385 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L1 Exception RuntimeException in REQUIRES_NEW xid: 17 in OuterClass.saveRequiresNewLocalUsingSelfAndThrow
2018-06-07 16:18:33,385 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L1 finally   in REQUIRES_NEW xid: 16 in OuterClass.saveRequiresNewLocalUsingSelfAndThrow
2018-06-07 16:18:33,386 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L1 done      REQUIRES_NEW back to undefined xid: null in OuterClass.saveRequiresNewLocalUsingSelfAndThrow
Hibernate: insert into test_entity_1 (intAttribute, stringAttribute, id) values (?, ?, ?)
Hibernate: select count(testentity0_.id) as col_0_0_ from test_entity_1 testentity0_
Hibernate: select count(testentity0_.id) as col_0_0_ from test_entity_1 testentity0_
2018-06-07 16:18:33,393 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.persistence.PersistenceFactory] (main) destroying persistence factory testdb
2018-06-07 16:18:33,394 INFO   (: [  ]  ) [org.hibernate.tool.hbm2ddl.SchemaExport] (main) HHH000227: Running hbm2ddl schema export
Hibernate: drop table if exists test_entity_1
Hibernate: drop table if exists hibernate_sequences
2018-06-07 16:18:33,396 INFO   (: [  ]  ) [org.hibernate.tool.hbm2ddl.SchemaExport] (main) HHH000230: Schema export complete
2018-06-07 16:18:33,396 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000030: Cleaning up connection pool [jdbc:h2:mem:test;MODE=MySQL;DB_CLOSE_DELAY=0]
2018-06-07 16:18:33,439 ERROR  (: [  ]  ) [CDI-Unit EJB-ExtensionExtended] (main) Self injection of EJB Type com.oneandone.ejbcdiunit.ejbs.SingletonEJB in field selfejb of Class com.oneandone.ejbcdiunit.ejbs.SingletonEJB can't get simulated by ejb-cdi-unit
2018-06-07 16:18:33,492 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.persistence.PersistenceFactory] (main) creating persistence factory testdb
2018-06-07 16:18:33,524 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000402: Using Hibernate built-in connection pool (not for production use!)
2018-06-07 16:18:33,524 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000115: Hibernate connection pool size: 20
2018-06-07 16:18:33,525 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000006: Autocommit mode: true
2018-06-07 16:18:33,526 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000401: using driver [org.h2.Driver] at URL [jdbc:h2:mem:test;MODE=MySQL;DB_CLOSE_DELAY=0]
2018-06-07 16:18:33,526 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000046: Connection properties: {user=sa, autocommit=true, release_mode=auto}
2018-06-07 16:18:33,530 INFO   (: [  ]  ) [org.hibernate.dialect.Dialect] (main) HHH000400: Using dialect: org.hibernate.dialect.MySQL5Dialect
2018-06-07 16:18:33,533 INFO   (: [  ]  ) [org.hibernate.engine.transaction.internal.TransactionFactoryInitiator] (main) HHH000268: Transaction strategy: org.hibernate.engine.transaction.internal.jdbc.JdbcTransactionFactory
2018-06-07 16:18:33,533 INFO   (: [  ]  ) [org.hibernate.hql.internal.ast.ASTQueryTranslatorFactory] (main) HHH000397: Using ASTQueryTranslatorFactory
2018-06-07 16:18:33,545 INFO   (: [  ]  ) [org.hibernate.tool.hbm2ddl.SchemaExport] (main) HHH000227: Running hbm2ddl schema export
Hibernate: drop table if exists test_entity_1
Hibernate: drop table if exists hibernate_sequences
Hibernate: create table test_entity_1 (id bigint not null, intAttribute integer not null, stringAttribute varchar(255), primary key (id))
Hibernate: create table hibernate_sequences ( sequence_name varchar(255),  sequence_next_hi_value integer ) 
2018-06-07 16:18:33,547 INFO   (: [  ]  ) [org.hibernate.tool.hbm2ddl.SchemaExport] (main) HHH000230: Schema export complete
check constructions
2018-06-07 16:18:33,553 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L1 changing  from undefined to REQUIRED xid: null in TransactionalParentEJB.saveInCurrentTransactionRequiredTraAttribute
Hibernate: select sequence_next_hi_value from hibernate_sequences where sequence_name = 'test_entity_1' for update
Hibernate: insert into hibernate_sequences(sequence_name, sequence_next_hi_value) values('test_entity_1', ?)
Hibernate: update hibernate_sequences set sequence_next_hi_value = ? where sequence_next_hi_value = ? and sequence_name = 'test_entity_1'
2018-06-07 16:18:33,556 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L1 finally   in REQUIRED xid: 19 in TransactionalParentEJB.saveInCurrentTransactionRequiredTraAttribute
2018-06-07 16:18:33,556 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L1 done      REQUIRED back to undefined xid: 19 in TransactionalParentEJB.saveInCurrentTransactionRequiredTraAttribute
Hibernate: insert into test_entity_1 (intAttribute, stringAttribute, id) values (?, ?, ?)
2018-06-07 16:18:33,561 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.persistence.PersistenceFactory] (main) destroying persistence factory testdb
2018-06-07 16:18:33,561 INFO   (: [  ]  ) [org.hibernate.tool.hbm2ddl.SchemaExport] (main) HHH000227: Running hbm2ddl schema export
Hibernate: drop table if exists test_entity_1
Hibernate: drop table if exists hibernate_sequences
2018-06-07 16:18:33,563 INFO   (: [  ]  ) [org.hibernate.tool.hbm2ddl.SchemaExport] (main) HHH000230: Schema export complete
2018-06-07 16:18:33,563 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000030: Cleaning up connection pool [jdbc:h2:mem:test;MODE=MySQL;DB_CLOSE_DELAY=0]
2018-06-07 16:18:33,609 ERROR  (: [  ]  ) [CDI-Unit EJB-ExtensionExtended] (main) Self injection of EJB Type com.oneandone.ejbcdiunit.ejbs.SingletonEJB in field selfejb of Class com.oneandone.ejbcdiunit.ejbs.SingletonEJB can't get simulated by ejb-cdi-unit
2018-06-07 16:18:33,666 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.persistence.PersistenceFactory] (main) creating persistence factory testdb
2018-06-07 16:18:33,699 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000402: Using Hibernate built-in connection pool (not for production use!)
2018-06-07 16:18:33,700 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000115: Hibernate connection pool size: 20
2018-06-07 16:18:33,700 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000006: Autocommit mode: true
2018-06-07 16:18:33,700 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000401: using driver [org.h2.Driver] at URL [jdbc:h2:mem:test;MODE=MySQL;DB_CLOSE_DELAY=0]
2018-06-07 16:18:33,700 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000046: Connection properties: {user=sa, autocommit=true, release_mode=auto}
2018-06-07 16:18:33,705 INFO   (: [  ]  ) [org.hibernate.dialect.Dialect] (main) HHH000400: Using dialect: org.hibernate.dialect.MySQL5Dialect
2018-06-07 16:18:33,707 INFO   (: [  ]  ) [org.hibernate.engine.transaction.internal.TransactionFactoryInitiator] (main) HHH000268: Transaction strategy: org.hibernate.engine.transaction.internal.jdbc.JdbcTransactionFactory
2018-06-07 16:18:33,708 INFO   (: [  ]  ) [org.hibernate.hql.internal.ast.ASTQueryTranslatorFactory] (main) HHH000397: Using ASTQueryTranslatorFactory
2018-06-07 16:18:33,720 INFO   (: [  ]  ) [org.hibernate.tool.hbm2ddl.SchemaExport] (main) HHH000227: Running hbm2ddl schema export
Hibernate: drop table if exists test_entity_1
Hibernate: drop table if exists hibernate_sequences
Hibernate: create table test_entity_1 (id bigint not null, intAttribute integer not null, stringAttribute varchar(255), primary key (id))
Hibernate: create table hibernate_sequences ( sequence_name varchar(255),  sequence_next_hi_value integer ) 
2018-06-07 16:18:33,722 INFO   (: [  ]  ) [org.hibernate.tool.hbm2ddl.SchemaExport] (main) HHH000230: Schema export complete
check constructions
2018-06-07 16:18:33,730 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.persistence.PersistenceFactory] (main) destroying persistence factory testdb
2018-06-07 16:18:33,730 INFO   (: [  ]  ) [org.hibernate.tool.hbm2ddl.SchemaExport] (main) HHH000227: Running hbm2ddl schema export
Hibernate: drop table if exists test_entity_1
Hibernate: drop table if exists hibernate_sequences
2018-06-07 16:18:33,732 INFO   (: [  ]  ) [org.hibernate.tool.hbm2ddl.SchemaExport] (main) HHH000230: Schema export complete
2018-06-07 16:18:33,732 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000030: Cleaning up connection pool [jdbc:h2:mem:test;MODE=MySQL;DB_CLOSE_DELAY=0]
2018-06-07 16:18:33,809 ERROR  (: [  ]  ) [CDI-Unit EJB-ExtensionExtended] (main) Self injection of EJB Type com.oneandone.ejbcdiunit.ejbs.SingletonEJB in field selfejb of Class com.oneandone.ejbcdiunit.ejbs.SingletonEJB can't get simulated by ejb-cdi-unit
2018-06-07 16:18:33,870 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.persistence.PersistenceFactory] (main) creating persistence factory testdb
2018-06-07 16:18:33,899 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000402: Using Hibernate built-in connection pool (not for production use!)
2018-06-07 16:18:33,899 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000115: Hibernate connection pool size: 20
2018-06-07 16:18:33,899 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000006: Autocommit mode: true
2018-06-07 16:18:33,899 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000401: using driver [org.h2.Driver] at URL [jdbc:h2:mem:test;MODE=MySQL;DB_CLOSE_DELAY=0]
2018-06-07 16:18:33,899 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000046: Connection properties: {user=sa, autocommit=true, release_mode=auto}
2018-06-07 16:18:33,906 INFO   (: [  ]  ) [org.hibernate.dialect.Dialect] (main) HHH000400: Using dialect: org.hibernate.dialect.MySQL5Dialect
2018-06-07 16:18:33,909 INFO   (: [  ]  ) [org.hibernate.engine.transaction.internal.TransactionFactoryInitiator] (main) HHH000268: Transaction strategy: org.hibernate.engine.transaction.internal.jdbc.JdbcTransactionFactory
2018-06-07 16:18:33,909 INFO   (: [  ]  ) [org.hibernate.hql.internal.ast.ASTQueryTranslatorFactory] (main) HHH000397: Using ASTQueryTranslatorFactory
2018-06-07 16:18:33,920 INFO   (: [  ]  ) [org.hibernate.tool.hbm2ddl.SchemaExport] (main) HHH000227: Running hbm2ddl schema export
Hibernate: drop table if exists test_entity_1
Hibernate: drop table if exists hibernate_sequences
Hibernate: create table test_entity_1 (id bigint not null, intAttribute integer not null, stringAttribute varchar(255), primary key (id))
Hibernate: create table hibernate_sequences ( sequence_name varchar(255),  sequence_next_hi_value integer ) 
2018-06-07 16:18:33,923 INFO   (: [  ]  ) [org.hibernate.tool.hbm2ddl.SchemaExport] (main) HHH000230: Schema export complete
check constructions
2018-06-07 16:18:33,933 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L1 changing  from undefined to REQUIRES_NEW xid: null in OuterClass.saveNewInNewTra
2018-06-07 16:18:33,934 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L2 changing  from REQUIRES_NEW to REQUIRES_NEW xid: null in StatelessEJB.saveInNewTransaction
Hibernate: select sequence_next_hi_value from hibernate_sequences where sequence_name = 'test_entity_1' for update
Hibernate: insert into hibernate_sequences(sequence_name, sequence_next_hi_value) values('test_entity_1', ?)
Hibernate: update hibernate_sequences set sequence_next_hi_value = ? where sequence_next_hi_value = ? and sequence_name = 'test_entity_1'
2018-06-07 16:18:33,937 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L2 finally   in REQUIRES_NEW xid: 22 in StatelessEJB.saveInNewTransaction
Hibernate: insert into test_entity_1 (intAttribute, stringAttribute, id) values (?, ?, ?)
2018-06-07 16:18:33,940 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L2 done      REQUIRES_NEW back to REQUIRES_NEW xid: 21 in StatelessEJB.saveInNewTransaction
2018-06-07 16:18:33,940 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L1 finally   in REQUIRES_NEW xid: 21 in OuterClass.saveNewInNewTra
2018-06-07 16:18:33,940 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L1 done      REQUIRES_NEW back to undefined xid: 20 in OuterClass.saveNewInNewTra
Hibernate: insert into test_entity_1 (intAttribute, stringAttribute, id) values (?, ?, ?)
Hibernate: select count(testentity0_.id) as col_0_0_ from test_entity_1 testentity0_
Hibernate: select count(testentity0_.id) as col_0_0_ from test_entity_1 testentity0_
2018-06-07 16:18:33,949 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.persistence.PersistenceFactory] (main) destroying persistence factory testdb
2018-06-07 16:18:33,949 INFO   (: [  ]  ) [org.hibernate.tool.hbm2ddl.SchemaExport] (main) HHH000227: Running hbm2ddl schema export
Hibernate: drop table if exists test_entity_1
Hibernate: drop table if exists hibernate_sequences
2018-06-07 16:18:33,952 INFO   (: [  ]  ) [org.hibernate.tool.hbm2ddl.SchemaExport] (main) HHH000230: Schema export complete
2018-06-07 16:18:33,952 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000030: Cleaning up connection pool [jdbc:h2:mem:test;MODE=MySQL;DB_CLOSE_DELAY=0]
2018-06-07 16:18:33,985 ERROR  (: [  ]  ) [CDI-Unit EJB-ExtensionExtended] (main) Self injection of EJB Type com.oneandone.ejbcdiunit.ejbs.SingletonEJB in field selfejb of Class com.oneandone.ejbcdiunit.ejbs.SingletonEJB can't get simulated by ejb-cdi-unit
2018-06-07 16:18:34,023 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.persistence.PersistenceFactory] (main) creating persistence factory testdb
2018-06-07 16:18:34,044 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000402: Using Hibernate built-in connection pool (not for production use!)
2018-06-07 16:18:34,044 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000115: Hibernate connection pool size: 20
2018-06-07 16:18:34,044 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000006: Autocommit mode: true
2018-06-07 16:18:34,044 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000401: using driver [org.h2.Driver] at URL [jdbc:h2:mem:test;MODE=MySQL;DB_CLOSE_DELAY=0]
2018-06-07 16:18:34,044 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000046: Connection properties: {user=sa, autocommit=true, release_mode=auto}
2018-06-07 16:18:34,048 INFO   (: [  ]  ) [org.hibernate.dialect.Dialect] (main) HHH000400: Using dialect: org.hibernate.dialect.MySQL5Dialect
2018-06-07 16:18:34,051 INFO   (: [  ]  ) [org.hibernate.engine.transaction.internal.TransactionFactoryInitiator] (main) HHH000268: Transaction strategy: org.hibernate.engine.transaction.internal.jdbc.JdbcTransactionFactory
2018-06-07 16:18:34,052 INFO   (: [  ]  ) [org.hibernate.hql.internal.ast.ASTQueryTranslatorFactory] (main) HHH000397: Using ASTQueryTranslatorFactory
2018-06-07 16:18:34,063 INFO   (: [  ]  ) [org.hibernate.tool.hbm2ddl.SchemaExport] (main) HHH000227: Running hbm2ddl schema export
Hibernate: drop table if exists test_entity_1
Hibernate: drop table if exists hibernate_sequences
Hibernate: create table test_entity_1 (id bigint not null, intAttribute integer not null, stringAttribute varchar(255), primary key (id))
Hibernate: create table hibernate_sequences ( sequence_name varchar(255),  sequence_next_hi_value integer ) 
2018-06-07 16:18:34,065 INFO   (: [  ]  ) [org.hibernate.tool.hbm2ddl.SchemaExport] (main) HHH000230: Schema export complete
check constructions
2018-06-07 16:18:34,072 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L1 changing  from undefined to SUPPORTS xid: null in StatelessEJB.saveInSupportedTransaction
2018-06-07 16:18:34,073 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L1 Exception TransactionRequiredException in SUPPORTS xid: null in StatelessEJB.saveInSupportedTransaction
2018-06-07 16:18:34,073 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L1 finally   in SUPPORTS xid: null in StatelessEJB.saveInSupportedTransaction
2018-06-07 16:18:34,073 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L1 done      SUPPORTS back to undefined xid: null in StatelessEJB.saveInSupportedTransaction
2018-06-07 16:18:34,074 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.persistence.PersistenceFactory] (main) destroying persistence factory testdb
2018-06-07 16:18:34,074 INFO   (: [  ]  ) [org.hibernate.tool.hbm2ddl.SchemaExport] (main) HHH000227: Running hbm2ddl schema export
Hibernate: drop table if exists test_entity_1
Hibernate: drop table if exists hibernate_sequences
2018-06-07 16:18:34,076 INFO   (: [  ]  ) [org.hibernate.tool.hbm2ddl.SchemaExport] (main) HHH000230: Schema export complete
2018-06-07 16:18:34,076 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000030: Cleaning up connection pool [jdbc:h2:mem:test;MODE=MySQL;DB_CLOSE_DELAY=0]
2018-06-07 16:18:34,110 ERROR  (: [  ]  ) [CDI-Unit EJB-ExtensionExtended] (main) Self injection of EJB Type com.oneandone.ejbcdiunit.ejbs.SingletonEJB in field selfejb of Class com.oneandone.ejbcdiunit.ejbs.SingletonEJB can't get simulated by ejb-cdi-unit
2018-06-07 16:18:34,154 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.persistence.PersistenceFactory] (main) creating persistence factory testdb
2018-06-07 16:18:34,182 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000402: Using Hibernate built-in connection pool (not for production use!)
2018-06-07 16:18:34,182 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000115: Hibernate connection pool size: 20
2018-06-07 16:18:34,182 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000006: Autocommit mode: true
2018-06-07 16:18:34,182 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000401: using driver [org.h2.Driver] at URL [jdbc:h2:mem:test;MODE=MySQL;DB_CLOSE_DELAY=0]
2018-06-07 16:18:34,182 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000046: Connection properties: {user=sa, autocommit=true, release_mode=auto}
2018-06-07 16:18:34,185 INFO   (: [  ]  ) [org.hibernate.dialect.Dialect] (main) HHH000400: Using dialect: org.hibernate.dialect.MySQL5Dialect
2018-06-07 16:18:34,188 INFO   (: [  ]  ) [org.hibernate.engine.transaction.internal.TransactionFactoryInitiator] (main) HHH000268: Transaction strategy: org.hibernate.engine.transaction.internal.jdbc.JdbcTransactionFactory
2018-06-07 16:18:34,188 INFO   (: [  ]  ) [org.hibernate.hql.internal.ast.ASTQueryTranslatorFactory] (main) HHH000397: Using ASTQueryTranslatorFactory
2018-06-07 16:18:34,198 INFO   (: [  ]  ) [org.hibernate.tool.hbm2ddl.SchemaExport] (main) HHH000227: Running hbm2ddl schema export
Hibernate: drop table if exists test_entity_1
Hibernate: drop table if exists hibernate_sequences
Hibernate: create table test_entity_1 (id bigint not null, intAttribute integer not null, stringAttribute varchar(255), primary key (id))
Hibernate: create table hibernate_sequences ( sequence_name varchar(255),  sequence_next_hi_value integer ) 
2018-06-07 16:18:34,200 INFO   (: [  ]  ) [org.hibernate.tool.hbm2ddl.SchemaExport] (main) HHH000230: Schema export complete
check constructions
2018-06-07 16:18:34,206 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L1 changing  from undefined to NOT_SUPPORTED xid: null in StatelessBeanManagedTrasEJB.insertNewInTra
2018-06-07 16:18:34,207 INFO   (: [  ]  ) [ejb-cdi-unit tests] (main) output public variable 200
Hibernate: select sequence_next_hi_value from hibernate_sequences where sequence_name = 'test_entity_1' for update
Hibernate: insert into hibernate_sequences(sequence_name, sequence_next_hi_value) values('test_entity_1', ?)
Hibernate: update hibernate_sequences set sequence_next_hi_value = ? where sequence_next_hi_value = ? and sequence_name = 'test_entity_1'
Hibernate: insert into test_entity_1 (intAttribute, stringAttribute, id) values (?, ?, ?)
2018-06-07 16:18:34,212 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L1 finally   in NOT_SUPPORTED xid: null in StatelessBeanManagedTrasEJB.insertNewInTra
2018-06-07 16:18:34,212 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L1 done      NOT_SUPPORTED back to undefined xid: null in StatelessBeanManagedTrasEJB.insertNewInTra
2018-06-07 16:18:34,213 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.persistence.PersistenceFactory] (main) destroying persistence factory testdb
2018-06-07 16:18:34,214 INFO   (: [  ]  ) [org.hibernate.tool.hbm2ddl.SchemaExport] (main) HHH000227: Running hbm2ddl schema export
Hibernate: drop table if exists test_entity_1
Hibernate: drop table if exists hibernate_sequences
2018-06-07 16:18:34,215 INFO   (: [  ]  ) [org.hibernate.tool.hbm2ddl.SchemaExport] (main) HHH000230: Schema export complete
2018-06-07 16:18:34,216 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000030: Cleaning up connection pool [jdbc:h2:mem:test;MODE=MySQL;DB_CLOSE_DELAY=0]
2018-06-07 16:18:34,248 ERROR  (: [  ]  ) [CDI-Unit EJB-ExtensionExtended] (main) Self injection of EJB Type com.oneandone.ejbcdiunit.ejbs.SingletonEJB in field selfejb of Class com.oneandone.ejbcdiunit.ejbs.SingletonEJB can't get simulated by ejb-cdi-unit
2018-06-07 16:18:34,287 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.persistence.PersistenceFactory] (main) creating persistence factory testdb
2018-06-07 16:18:34,312 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000402: Using Hibernate built-in connection pool (not for production use!)
2018-06-07 16:18:34,312 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000115: Hibernate connection pool size: 20
2018-06-07 16:18:34,312 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000006: Autocommit mode: true
2018-06-07 16:18:34,312 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000401: using driver [org.h2.Driver] at URL [jdbc:h2:mem:test;MODE=MySQL;DB_CLOSE_DELAY=0]
2018-06-07 16:18:34,312 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000046: Connection properties: {user=sa, autocommit=true, release_mode=auto}
2018-06-07 16:18:34,316 INFO   (: [  ]  ) [org.hibernate.dialect.Dialect] (main) HHH000400: Using dialect: org.hibernate.dialect.MySQL5Dialect
2018-06-07 16:18:34,319 INFO   (: [  ]  ) [org.hibernate.engine.transaction.internal.TransactionFactoryInitiator] (main) HHH000268: Transaction strategy: org.hibernate.engine.transaction.internal.jdbc.JdbcTransactionFactory
2018-06-07 16:18:34,319 INFO   (: [  ]  ) [org.hibernate.hql.internal.ast.ASTQueryTranslatorFactory] (main) HHH000397: Using ASTQueryTranslatorFactory
2018-06-07 16:18:34,328 INFO   (: [  ]  ) [org.hibernate.tool.hbm2ddl.SchemaExport] (main) HHH000227: Running hbm2ddl schema export
Hibernate: drop table if exists test_entity_1
Hibernate: drop table if exists hibernate_sequences
Hibernate: create table test_entity_1 (id bigint not null, intAttribute integer not null, stringAttribute varchar(255), primary key (id))
Hibernate: create table hibernate_sequences ( sequence_name varchar(255),  sequence_next_hi_value integer ) 
2018-06-07 16:18:34,330 INFO   (: [  ]  ) [org.hibernate.tool.hbm2ddl.SchemaExport] (main) HHH000230: Schema export complete
check constructions
2018-06-07 16:18:34,335 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L1 changing  from undefined to REQUIRES_NEW xid: null in OuterClass.saveRequiresNewLocalAsBusinessObjectAndThrow
2018-06-07 16:18:34,335 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L2 changing  from REQUIRES_NEW to REQUIRED xid: null in StatelessEJB.saveRequiresNewLocalAsBusinessObject
Hibernate: select sequence_next_hi_value from hibernate_sequences where sequence_name = 'test_entity_1' for update
Hibernate: insert into hibernate_sequences(sequence_name, sequence_next_hi_value) values('test_entity_1', ?)
Hibernate: update hibernate_sequences set sequence_next_hi_value = ? where sequence_next_hi_value = ? and sequence_name = 'test_entity_1'
2018-06-07 16:18:34,349 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L3 changing  from REQUIRED to REQUIRES_NEW xid: 25 in StatelessEJB.saveInNewTransaction
2018-06-07 16:18:34,350 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L3 finally   in REQUIRES_NEW xid: 26 in StatelessEJB.saveInNewTransaction
Hibernate: insert into test_entity_1 (intAttribute, stringAttribute, id) values (?, ?, ?)
2018-06-07 16:18:34,353 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L3 done      REQUIRES_NEW back to REQUIRED xid: 25 in StatelessEJB.saveInNewTransaction
2018-06-07 16:18:34,353 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L2 finally   in REQUIRED xid: 25 in StatelessEJB.saveRequiresNewLocalAsBusinessObject
2018-06-07 16:18:34,353 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L2 done      REQUIRED back to REQUIRES_NEW xid: 25 in StatelessEJB.saveRequiresNewLocalAsBusinessObject
2018-06-07 16:18:34,353 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L1 Exception RuntimeException in REQUIRES_NEW xid: 25 in OuterClass.saveRequiresNewLocalAsBusinessObjectAndThrow
2018-06-07 16:18:34,354 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L1 finally   in REQUIRES_NEW xid: 24 in OuterClass.saveRequiresNewLocalAsBusinessObjectAndThrow
2018-06-07 16:18:34,354 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L1 done      REQUIRES_NEW back to undefined xid: null in OuterClass.saveRequiresNewLocalAsBusinessObjectAndThrow
Hibernate: insert into test_entity_1 (intAttribute, stringAttribute, id) values (?, ?, ?)
Hibernate: select count(testentity0_.id) as col_0_0_ from test_entity_1 testentity0_
Hibernate: select count(testentity0_.id) as col_0_0_ from test_entity_1 testentity0_
2018-06-07 16:18:34,362 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.persistence.PersistenceFactory] (main) destroying persistence factory testdb
2018-06-07 16:18:34,362 INFO   (: [  ]  ) [org.hibernate.tool.hbm2ddl.SchemaExport] (main) HHH000227: Running hbm2ddl schema export
Hibernate: drop table if exists test_entity_1
Hibernate: drop table if exists hibernate_sequences
2018-06-07 16:18:34,363 INFO   (: [  ]  ) [org.hibernate.tool.hbm2ddl.SchemaExport] (main) HHH000230: Schema export complete
2018-06-07 16:18:34,363 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000030: Cleaning up connection pool [jdbc:h2:mem:test;MODE=MySQL;DB_CLOSE_DELAY=0]
2018-06-07 16:18:34,393 ERROR  (: [  ]  ) [CDI-Unit EJB-ExtensionExtended] (main) Self injection of EJB Type com.oneandone.ejbcdiunit.ejbs.SingletonEJB in field selfejb of Class com.oneandone.ejbcdiunit.ejbs.SingletonEJB can't get simulated by ejb-cdi-unit
2018-06-07 16:18:34,430 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.persistence.PersistenceFactory] (main) creating persistence factory testdb
2018-06-07 16:18:34,452 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000402: Using Hibernate built-in connection pool (not for production use!)
2018-06-07 16:18:34,452 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000115: Hibernate connection pool size: 20
2018-06-07 16:18:34,452 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000006: Autocommit mode: true
2018-06-07 16:18:34,453 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000401: using driver [org.h2.Driver] at URL [jdbc:h2:mem:test;MODE=MySQL;DB_CLOSE_DELAY=0]
2018-06-07 16:18:34,453 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000046: Connection properties: {user=sa, autocommit=true, release_mode=auto}
2018-06-07 16:18:34,455 INFO   (: [  ]  ) [org.hibernate.dialect.Dialect] (main) HHH000400: Using dialect: org.hibernate.dialect.MySQL5Dialect
2018-06-07 16:18:34,457 INFO   (: [  ]  ) [org.hibernate.engine.transaction.internal.TransactionFactoryInitiator] (main) HHH000268: Transaction strategy: org.hibernate.engine.transaction.internal.jdbc.JdbcTransactionFactory
2018-06-07 16:18:34,457 INFO   (: [  ]  ) [org.hibernate.hql.internal.ast.ASTQueryTranslatorFactory] (main) HHH000397: Using ASTQueryTranslatorFactory
2018-06-07 16:18:34,465 INFO   (: [  ]  ) [org.hibernate.tool.hbm2ddl.SchemaExport] (main) HHH000227: Running hbm2ddl schema export
Hibernate: drop table if exists test_entity_1
Hibernate: drop table if exists hibernate_sequences
Hibernate: create table test_entity_1 (id bigint not null, intAttribute integer not null, stringAttribute varchar(255), primary key (id))
Hibernate: create table hibernate_sequences ( sequence_name varchar(255),  sequence_next_hi_value integer ) 
2018-06-07 16:18:34,467 INFO   (: [  ]  ) [org.hibernate.tool.hbm2ddl.SchemaExport] (main) HHH000230: Schema export complete
check constructions
2018-06-07 16:18:34,472 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L1 changing  from undefined to REQUIRED xid: null in StatelessEJB.saveInCurrentTransactionDefaultTraAttribute
2018-06-07 16:18:34,473 INFO   (: [  ]  ) [ejb-cdi-unit tests] (main) output public variable 200
Hibernate: select sequence_next_hi_value from hibernate_sequences where sequence_name = 'test_entity_1' for update
Hibernate: insert into hibernate_sequences(sequence_name, sequence_next_hi_value) values('test_entity_1', ?)
Hibernate: update hibernate_sequences set sequence_next_hi_value = ? where sequence_next_hi_value = ? and sequence_name = 'test_entity_1'
2018-06-07 16:18:34,474 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L1 finally   in REQUIRED xid: 27 in StatelessEJB.saveInCurrentTransactionDefaultTraAttribute
2018-06-07 16:18:34,475 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L1 done      REQUIRED back to undefined xid: 27 in StatelessEJB.saveInCurrentTransactionDefaultTraAttribute
Hibernate: insert into test_entity_1 (intAttribute, stringAttribute, id) values (?, ?, ?)
Hibernate: insert into test_entity_1 (intAttribute, stringAttribute, id) values (?, ?, ?)
Hibernate: select count(testentity0_.id) as col_0_0_ from test_entity_1 testentity0_
Hibernate: select count(testentity0_.id) as col_0_0_ from test_entity_1 testentity0_
2018-06-07 16:18:34,481 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.persistence.PersistenceFactory] (main) destroying persistence factory testdb
2018-06-07 16:18:34,481 INFO   (: [  ]  ) [org.hibernate.tool.hbm2ddl.SchemaExport] (main) HHH000227: Running hbm2ddl schema export
Hibernate: drop table if exists test_entity_1
Hibernate: drop table if exists hibernate_sequences
2018-06-07 16:18:34,483 INFO   (: [  ]  ) [org.hibernate.tool.hbm2ddl.SchemaExport] (main) HHH000230: Schema export complete
2018-06-07 16:18:34,483 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000030: Cleaning up connection pool [jdbc:h2:mem:test;MODE=MySQL;DB_CLOSE_DELAY=0]
2018-06-07 16:18:34,513 ERROR  (: [  ]  ) [CDI-Unit EJB-ExtensionExtended] (main) Self injection of EJB Type com.oneandone.ejbcdiunit.ejbs.SingletonEJB in field selfejb of Class com.oneandone.ejbcdiunit.ejbs.SingletonEJB can't get simulated by ejb-cdi-unit
2018-06-07 16:18:34,547 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.persistence.PersistenceFactory] (main) creating persistence factory testdb
2018-06-07 16:18:34,566 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000402: Using Hibernate built-in connection pool (not for production use!)
2018-06-07 16:18:34,566 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000115: Hibernate connection pool size: 20
2018-06-07 16:18:34,566 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000006: Autocommit mode: true
2018-06-07 16:18:34,566 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000401: using driver [org.h2.Driver] at URL [jdbc:h2:mem:test;MODE=MySQL;DB_CLOSE_DELAY=0]
2018-06-07 16:18:34,566 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000046: Connection properties: {user=sa, autocommit=true, release_mode=auto}
2018-06-07 16:18:34,569 INFO   (: [  ]  ) [org.hibernate.dialect.Dialect] (main) HHH000400: Using dialect: org.hibernate.dialect.MySQL5Dialect
2018-06-07 16:18:34,571 INFO   (: [  ]  ) [org.hibernate.engine.transaction.internal.TransactionFactoryInitiator] (main) HHH000268: Transaction strategy: org.hibernate.engine.transaction.internal.jdbc.JdbcTransactionFactory
2018-06-07 16:18:34,571 INFO   (: [  ]  ) [org.hibernate.hql.internal.ast.ASTQueryTranslatorFactory] (main) HHH000397: Using ASTQueryTranslatorFactory
2018-06-07 16:18:34,578 INFO   (: [  ]  ) [org.hibernate.tool.hbm2ddl.SchemaExport] (main) HHH000227: Running hbm2ddl schema export
Hibernate: drop table if exists test_entity_1
Hibernate: drop table if exists hibernate_sequences
Hibernate: create table test_entity_1 (id bigint not null, intAttribute integer not null, stringAttribute varchar(255), primary key (id))
Hibernate: create table hibernate_sequences ( sequence_name varchar(255),  sequence_next_hi_value integer ) 
2018-06-07 16:18:34,580 INFO   (: [  ]  ) [org.hibernate.tool.hbm2ddl.SchemaExport] (main) HHH000230: Schema export complete
check constructions
2018-06-07 16:18:34,585 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L1 changing  from undefined to REQUIRES_NEW xid: null in OuterClass.saveRequiredInNewTra
2018-06-07 16:18:34,585 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L2 changing  from REQUIRES_NEW to REQUIRED xid: null in StatelessEJB.saveInCurrentTransaction
Hibernate: select sequence_next_hi_value from hibernate_sequences where sequence_name = 'test_entity_1' for update
Hibernate: insert into hibernate_sequences(sequence_name, sequence_next_hi_value) values('test_entity_1', ?)
Hibernate: update hibernate_sequences set sequence_next_hi_value = ? where sequence_next_hi_value = ? and sequence_name = 'test_entity_1'
2018-06-07 16:18:34,587 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L2 finally   in REQUIRED xid: 29 in StatelessEJB.saveInCurrentTransaction
2018-06-07 16:18:34,588 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L2 done      REQUIRED back to REQUIRES_NEW xid: 29 in StatelessEJB.saveInCurrentTransaction
2018-06-07 16:18:34,588 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L1 finally   in REQUIRES_NEW xid: 29 in OuterClass.saveRequiredInNewTra
Hibernate: insert into test_entity_1 (intAttribute, stringAttribute, id) values (?, ?, ?)
2018-06-07 16:18:34,590 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L1 done      REQUIRES_NEW back to undefined xid: 28 in OuterClass.saveRequiredInNewTra
Hibernate: insert into test_entity_1 (intAttribute, stringAttribute, id) values (?, ?, ?)
Hibernate: select count(testentity0_.id) as col_0_0_ from test_entity_1 testentity0_
Hibernate: select count(testentity0_.id) as col_0_0_ from test_entity_1 testentity0_
2018-06-07 16:18:34,596 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.persistence.PersistenceFactory] (main) destroying persistence factory testdb
2018-06-07 16:18:34,596 INFO   (: [  ]  ) [org.hibernate.tool.hbm2ddl.SchemaExport] (main) HHH000227: Running hbm2ddl schema export
Hibernate: drop table if exists test_entity_1
Hibernate: drop table if exists hibernate_sequences
2018-06-07 16:18:34,597 INFO   (: [  ]  ) [org.hibernate.tool.hbm2ddl.SchemaExport] (main) HHH000230: Schema export complete
2018-06-07 16:18:34,597 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000030: Cleaning up connection pool [jdbc:h2:mem:test;MODE=MySQL;DB_CLOSE_DELAY=0]
2018-06-07 16:18:34,640 ERROR  (: [  ]  ) [CDI-Unit EJB-ExtensionExtended] (main) Self injection of EJB Type com.oneandone.ejbcdiunit.ejbs.SingletonEJB in field selfejb of Class com.oneandone.ejbcdiunit.ejbs.SingletonEJB can't get simulated by ejb-cdi-unit
2018-06-07 16:18:34,684 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.persistence.PersistenceFactory] (main) creating persistence factory testdb
2018-06-07 16:18:34,707 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000402: Using Hibernate built-in connection pool (not for production use!)
2018-06-07 16:18:34,707 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000115: Hibernate connection pool size: 20
2018-06-07 16:18:34,707 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000006: Autocommit mode: true
2018-06-07 16:18:34,707 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000401: using driver [org.h2.Driver] at URL [jdbc:h2:mem:test;MODE=MySQL;DB_CLOSE_DELAY=0]
2018-06-07 16:18:34,707 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000046: Connection properties: {user=sa, autocommit=true, release_mode=auto}
2018-06-07 16:18:34,710 INFO   (: [  ]  ) [org.hibernate.dialect.Dialect] (main) HHH000400: Using dialect: org.hibernate.dialect.MySQL5Dialect
2018-06-07 16:18:34,713 INFO   (: [  ]  ) [org.hibernate.engine.transaction.internal.TransactionFactoryInitiator] (main) HHH000268: Transaction strategy: org.hibernate.engine.transaction.internal.jdbc.JdbcTransactionFactory
2018-06-07 16:18:34,713 INFO   (: [  ]  ) [org.hibernate.hql.internal.ast.ASTQueryTranslatorFactory] (main) HHH000397: Using ASTQueryTranslatorFactory
2018-06-07 16:18:34,724 INFO   (: [  ]  ) [org.hibernate.tool.hbm2ddl.SchemaExport] (main) HHH000227: Running hbm2ddl schema export
Hibernate: drop table if exists test_entity_1
Hibernate: drop table if exists hibernate_sequences
Hibernate: create table test_entity_1 (id bigint not null, intAttribute integer not null, stringAttribute varchar(255), primary key (id))
Hibernate: create table hibernate_sequences ( sequence_name varchar(255),  sequence_next_hi_value integer ) 
2018-06-07 16:18:34,726 INFO   (: [  ]  ) [org.hibernate.tool.hbm2ddl.SchemaExport] (main) HHH000230: Schema export complete
check constructions
2018-06-07 16:18:34,732 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L1 changing  from undefined to REQUIRES_NEW xid: null in OuterClass.saveToSetRollbackOnlyAndTryAdditionalSave
2018-06-07 16:18:34,733 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L2 changing  from REQUIRES_NEW to REQUIRED xid: null in StatelessEJB.persistRequiredAndRTException
Hibernate: select sequence_next_hi_value from hibernate_sequences where sequence_name = 'test_entity_1' for update
Hibernate: insert into hibernate_sequences(sequence_name, sequence_next_hi_value) values('test_entity_1', ?)
Hibernate: update hibernate_sequences set sequence_next_hi_value = ? where sequence_next_hi_value = ? and sequence_name = 'test_entity_1'
2018-06-07 16:18:34,736 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L2 Exception RuntimeException in REQUIRED xid: 31 in StatelessEJB.persistRequiredAndRTException
2018-06-07 16:18:34,736 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L2 finally   in REQUIRED xid: null in StatelessEJB.persistRequiredAndRTException
2018-06-07 16:18:34,736 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L2 done      REQUIRED back to REQUIRES_NEW xid: null in StatelessEJB.persistRequiredAndRTException
2018-06-07 16:18:34,737 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L2 changing  from REQUIRES_NEW to REQUIRED xid: null in StatelessEJB.saveInCurrentTransaction
2018-06-07 16:18:34,737 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L2 Exception TransactionRequiredException in REQUIRED xid: null in StatelessEJB.saveInCurrentTransaction
2018-06-07 16:18:34,737 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L2 finally   in REQUIRED xid: null in StatelessEJB.saveInCurrentTransaction
2018-06-07 16:18:34,737 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L2 done      REQUIRED back to REQUIRES_NEW xid: null in StatelessEJB.saveInCurrentTransaction
2018-06-07 16:18:34,737 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L1 Exception EJBException in REQUIRES_NEW xid: null in OuterClass.saveToSetRollbackOnlyAndTryAdditionalSave
2018-06-07 16:18:34,737 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L1 finally   in REQUIRES_NEW xid: null in OuterClass.saveToSetRollbackOnlyAndTryAdditionalSave
2018-06-07 16:18:34,738 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L1 done      REQUIRES_NEW back to undefined xid: 30 in OuterClass.saveToSetRollbackOnlyAndTryAdditionalSave
Hibernate: insert into test_entity_1 (intAttribute, stringAttribute, id) values (?, ?, ?)
Hibernate: select count(testentity0_.id) as col_0_0_ from test_entity_1 testentity0_
Hibernate: select count(testentity0_.id) as col_0_0_ from test_entity_1 testentity0_
2018-06-07 16:18:34,748 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.persistence.PersistenceFactory] (main) destroying persistence factory testdb
2018-06-07 16:18:34,748 INFO   (: [  ]  ) [org.hibernate.tool.hbm2ddl.SchemaExport] (main) HHH000227: Running hbm2ddl schema export
Hibernate: drop table if exists test_entity_1
Hibernate: drop table if exists hibernate_sequences
2018-06-07 16:18:34,750 INFO   (: [  ]  ) [org.hibernate.tool.hbm2ddl.SchemaExport] (main) HHH000230: Schema export complete
2018-06-07 16:18:34,750 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000030: Cleaning up connection pool [jdbc:h2:mem:test;MODE=MySQL;DB_CLOSE_DELAY=0]
2018-06-07 16:18:34,792 ERROR  (: [  ]  ) [CDI-Unit EJB-ExtensionExtended] (main) Self injection of EJB Type com.oneandone.ejbcdiunit.ejbs.SingletonEJB in field selfejb of Class com.oneandone.ejbcdiunit.ejbs.SingletonEJB can't get simulated by ejb-cdi-unit
2018-06-07 16:18:34,837 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.persistence.PersistenceFactory] (main) creating persistence factory testdb
2018-06-07 16:18:34,867 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000402: Using Hibernate built-in connection pool (not for production use!)
2018-06-07 16:18:34,868 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000115: Hibernate connection pool size: 20
2018-06-07 16:18:34,868 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000006: Autocommit mode: true
2018-06-07 16:18:34,868 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000401: using driver [org.h2.Driver] at URL [jdbc:h2:mem:test;MODE=MySQL;DB_CLOSE_DELAY=0]
2018-06-07 16:18:34,868 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000046: Connection properties: {user=sa, autocommit=true, release_mode=auto}
2018-06-07 16:18:34,872 INFO   (: [  ]  ) [org.hibernate.dialect.Dialect] (main) HHH000400: Using dialect: org.hibernate.dialect.MySQL5Dialect
2018-06-07 16:18:34,875 INFO   (: [  ]  ) [org.hibernate.engine.transaction.internal.TransactionFactoryInitiator] (main) HHH000268: Transaction strategy: org.hibernate.engine.transaction.internal.jdbc.JdbcTransactionFactory
2018-06-07 16:18:34,875 INFO   (: [  ]  ) [org.hibernate.hql.internal.ast.ASTQueryTranslatorFactory] (main) HHH000397: Using ASTQueryTranslatorFactory
2018-06-07 16:18:34,886 INFO   (: [  ]  ) [org.hibernate.tool.hbm2ddl.SchemaExport] (main) HHH000227: Running hbm2ddl schema export
Hibernate: drop table if exists test_entity_1
Hibernate: drop table if exists hibernate_sequences
Hibernate: create table test_entity_1 (id bigint not null, intAttribute integer not null, stringAttribute varchar(255), primary key (id))
Hibernate: create table hibernate_sequences ( sequence_name varchar(255),  sequence_next_hi_value integer ) 
2018-06-07 16:18:34,888 INFO   (: [  ]  ) [org.hibernate.tool.hbm2ddl.SchemaExport] (main) HHH000230: Schema export complete
check constructions
2018-06-07 16:18:34,895 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L1 changing  from undefined to NEVER xid: null in TransactionalParentEJB.saveInCurrentTransactionNeverTraAttribute
2018-06-07 16:18:34,895 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L1 Exception TransactionRequiredException in NEVER xid: null in TransactionalParentEJB.saveInCurrentTransactionNeverTraAttribute
2018-06-07 16:18:34,895 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L1 finally   in NEVER xid: null in TransactionalParentEJB.saveInCurrentTransactionNeverTraAttribute
2018-06-07 16:18:34,895 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L1 done      NEVER back to undefined xid: null in TransactionalParentEJB.saveInCurrentTransactionNeverTraAttribute
2018-06-07 16:18:34,897 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.persistence.PersistenceFactory] (main) destroying persistence factory testdb
2018-06-07 16:18:34,897 INFO   (: [  ]  ) [org.hibernate.tool.hbm2ddl.SchemaExport] (main) HHH000227: Running hbm2ddl schema export
Hibernate: drop table if exists test_entity_1
Hibernate: drop table if exists hibernate_sequences
2018-06-07 16:18:34,899 INFO   (: [  ]  ) [org.hibernate.tool.hbm2ddl.SchemaExport] (main) HHH000230: Schema export complete
2018-06-07 16:18:34,899 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000030: Cleaning up connection pool [jdbc:h2:mem:test;MODE=MySQL;DB_CLOSE_DELAY=0]
2018-06-07 16:18:34,941 ERROR  (: [  ]  ) [CDI-Unit EJB-ExtensionExtended] (main) Self injection of EJB Type com.oneandone.ejbcdiunit.ejbs.SingletonEJB in field selfejb of Class com.oneandone.ejbcdiunit.ejbs.SingletonEJB can't get simulated by ejb-cdi-unit
2018-06-07 16:18:34,995 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.persistence.PersistenceFactory] (main) creating persistence factory testdb
2018-06-07 16:18:35,022 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000402: Using Hibernate built-in connection pool (not for production use!)
2018-06-07 16:18:35,022 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000115: Hibernate connection pool size: 20
2018-06-07 16:18:35,022 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000006: Autocommit mode: true
2018-06-07 16:18:35,023 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000401: using driver [org.h2.Driver] at URL [jdbc:h2:mem:test;MODE=MySQL;DB_CLOSE_DELAY=0]
2018-06-07 16:18:35,023 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000046: Connection properties: {user=sa, autocommit=true, release_mode=auto}
2018-06-07 16:18:35,026 INFO   (: [  ]  ) [org.hibernate.dialect.Dialect] (main) HHH000400: Using dialect: org.hibernate.dialect.MySQL5Dialect
2018-06-07 16:18:35,029 INFO   (: [  ]  ) [org.hibernate.engine.transaction.internal.TransactionFactoryInitiator] (main) HHH000268: Transaction strategy: org.hibernate.engine.transaction.internal.jdbc.JdbcTransactionFactory
2018-06-07 16:18:35,029 INFO   (: [  ]  ) [org.hibernate.hql.internal.ast.ASTQueryTranslatorFactory] (main) HHH000397: Using ASTQueryTranslatorFactory
2018-06-07 16:18:35,039 INFO   (: [  ]  ) [org.hibernate.tool.hbm2ddl.SchemaExport] (main) HHH000227: Running hbm2ddl schema export
Hibernate: drop table if exists test_entity_1
Hibernate: drop table if exists hibernate_sequences
Hibernate: create table test_entity_1 (id bigint not null, intAttribute integer not null, stringAttribute varchar(255), primary key (id))
Hibernate: create table hibernate_sequences ( sequence_name varchar(255),  sequence_next_hi_value integer ) 
2018-06-07 16:18:35,042 INFO   (: [  ]  ) [org.hibernate.tool.hbm2ddl.SchemaExport] (main) HHH000230: Schema export complete
check constructions
2018-06-07 16:18:35,049 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L1 changing  from undefined to REQUIRED xid: null in StatelessEJB.method1
2018-06-07 16:18:35,049 INFO   (: [  ]  ) [ejb-cdi-unit tests] (main) StatelessEJB: methodCallUsingSessionContext called
2018-06-07 16:18:35,049 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L1 finally   in REQUIRED xid: null in StatelessEJB.method1
2018-06-07 16:18:35,049 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L1 done      REQUIRED back to undefined xid: null in StatelessEJB.method1
2018-06-07 16:18:35,049 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L1 changing  from undefined to NOT_SUPPORTED xid: null in SingletonEJB.methodCallUsingSessionContext
2018-06-07 16:18:35,050 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L2 changing  from NOT_SUPPORTED to REQUIRES_NEW xid: null in SingletonEJB.callInNewTransactionWithParam
singleton bean 10
2018-06-07 16:18:35,050 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L2 finally   in REQUIRES_NEW xid: null in SingletonEJB.callInNewTransactionWithParam
2018-06-07 16:18:35,050 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L2 done      REQUIRES_NEW back to NOT_SUPPORTED xid: null in SingletonEJB.callInNewTransactionWithParam
2018-06-07 16:18:35,050 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L2 changing  from NOT_SUPPORTED to REQUIRES_NEW xid: null in SingletonEJB.callInNewTransaction
singleton bean
2018-06-07 16:18:35,050 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L2 finally   in REQUIRES_NEW xid: null in SingletonEJB.callInNewTransaction
2018-06-07 16:18:35,050 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L2 done      REQUIRES_NEW back to NOT_SUPPORTED xid: null in SingletonEJB.callInNewTransaction
singleton bean
2018-06-07 16:18:35,051 INFO   (: [  ]  ) [ejb-cdi-unit tests] (main) SingletonEJB: methodCallUsingSessionContext called
2018-06-07 16:18:35,051 INFO   (: [  ]  ) [ejb-cdi-unit tests] (main) output public variable 100
2018-06-07 16:18:35,051 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L1 finally   in NOT_SUPPORTED xid: null in SingletonEJB.methodCallUsingSessionContext
2018-06-07 16:18:35,051 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L1 done      NOT_SUPPORTED back to undefined xid: null in SingletonEJB.methodCallUsingSessionContext
2018-06-07 16:18:35,051 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L1 changing  from undefined to NOT_SUPPORTED xid: null in SingletonEJB.methodCallUsingSelf
2018-06-07 16:18:35,051 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L2 changing  from NOT_SUPPORTED to REQUIRES_NEW xid: null in SingletonEJB.callInNewTransaction
singleton bean
2018-06-07 16:18:35,052 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L2 finally   in REQUIRES_NEW xid: null in SingletonEJB.callInNewTransaction
2018-06-07 16:18:35,052 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L2 done      REQUIRES_NEW back to NOT_SUPPORTED xid: null in SingletonEJB.callInNewTransaction
singleton bean
2018-06-07 16:18:35,052 INFO   (: [  ]  ) [ejb-cdi-unit tests] (main) SingletonEJB: methodCallUsingSessionContext called
2018-06-07 16:18:35,052 INFO   (: [  ]  ) [ejb-cdi-unit tests] (main) output public variable 100
2018-06-07 16:18:35,052 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L1 finally   in NOT_SUPPORTED xid: null in SingletonEJB.methodCallUsingSelf
2018-06-07 16:18:35,052 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L1 done      NOT_SUPPORTED back to undefined xid: null in SingletonEJB.methodCallUsingSelf
2018-06-07 16:18:35,052 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L1 changing  from undefined to REQUIRED xid: null in StatelessEJB.method1
2018-06-07 16:18:35,052 INFO   (: [  ]  ) [ejb-cdi-unit tests] (main) StatelessEJB: methodCallUsingSessionContext called
2018-06-07 16:18:35,053 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L1 finally   in REQUIRED xid: null in StatelessEJB.method1
2018-06-07 16:18:35,053 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L1 done      REQUIRED back to undefined xid: null in StatelessEJB.method1
2018-06-07 16:18:35,053 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L1 changing  from undefined to NOT_SUPPORTED xid: null in SingletonEJB.methodCallUsingSessionContext
2018-06-07 16:18:35,053 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L2 changing  from NOT_SUPPORTED to REQUIRES_NEW xid: null in SingletonEJB.callInNewTransactionWithParam
singleton bean 10
2018-06-07 16:18:35,053 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L2 finally   in REQUIRES_NEW xid: null in SingletonEJB.callInNewTransactionWithParam
2018-06-07 16:18:35,053 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L2 done      REQUIRES_NEW back to NOT_SUPPORTED xid: null in SingletonEJB.callInNewTransactionWithParam
2018-06-07 16:18:35,054 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L2 changing  from NOT_SUPPORTED to REQUIRES_NEW xid: null in SingletonEJB.callInNewTransaction
singleton bean
2018-06-07 16:18:35,054 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L2 finally   in REQUIRES_NEW xid: null in SingletonEJB.callInNewTransaction
2018-06-07 16:18:35,054 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L2 done      REQUIRES_NEW back to NOT_SUPPORTED xid: null in SingletonEJB.callInNewTransaction
singleton bean
2018-06-07 16:18:35,054 INFO   (: [  ]  ) [ejb-cdi-unit tests] (main) SingletonEJB: methodCallUsingSessionContext called
2018-06-07 16:18:35,054 INFO   (: [  ]  ) [ejb-cdi-unit tests] (main) output public variable 100
2018-06-07 16:18:35,054 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L1 finally   in NOT_SUPPORTED xid: null in SingletonEJB.methodCallUsingSessionContext
2018-06-07 16:18:35,054 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L1 done      NOT_SUPPORTED back to undefined xid: null in SingletonEJB.methodCallUsingSessionContext
2018-06-07 16:18:35,055 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.persistence.PersistenceFactory] (main) destroying persistence factory testdb
2018-06-07 16:18:35,055 INFO   (: [  ]  ) [org.hibernate.tool.hbm2ddl.SchemaExport] (main) HHH000227: Running hbm2ddl schema export
Hibernate: drop table if exists test_entity_1
Hibernate: drop table if exists hibernate_sequences
2018-06-07 16:18:35,057 INFO   (: [  ]  ) [org.hibernate.tool.hbm2ddl.SchemaExport] (main) HHH000230: Schema export complete
2018-06-07 16:18:35,057 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000030: Cleaning up connection pool [jdbc:h2:mem:test;MODE=MySQL;DB_CLOSE_DELAY=0]
2018-06-07 16:18:35,094 ERROR  (: [  ]  ) [CDI-Unit EJB-ExtensionExtended] (main) Self injection of EJB Type com.oneandone.ejbcdiunit.ejbs.SingletonEJB in field selfejb of Class com.oneandone.ejbcdiunit.ejbs.SingletonEJB can't get simulated by ejb-cdi-unit
2018-06-07 16:18:35,140 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.persistence.PersistenceFactory] (main) creating persistence factory testdb
2018-06-07 16:18:35,166 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000402: Using Hibernate built-in connection pool (not for production use!)
2018-06-07 16:18:35,166 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000115: Hibernate connection pool size: 20
2018-06-07 16:18:35,166 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000006: Autocommit mode: true
2018-06-07 16:18:35,167 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000401: using driver [org.h2.Driver] at URL [jdbc:h2:mem:test;MODE=MySQL;DB_CLOSE_DELAY=0]
2018-06-07 16:18:35,167 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000046: Connection properties: {user=sa, autocommit=true, release_mode=auto}
2018-06-07 16:18:35,170 INFO   (: [  ]  ) [org.hibernate.dialect.Dialect] (main) HHH000400: Using dialect: org.hibernate.dialect.MySQL5Dialect
2018-06-07 16:18:35,172 INFO   (: [  ]  ) [org.hibernate.engine.transaction.internal.TransactionFactoryInitiator] (main) HHH000268: Transaction strategy: org.hibernate.engine.transaction.internal.jdbc.JdbcTransactionFactory
2018-06-07 16:18:35,172 INFO   (: [  ]  ) [org.hibernate.hql.internal.ast.ASTQueryTranslatorFactory] (main) HHH000397: Using ASTQueryTranslatorFactory
2018-06-07 16:18:35,182 INFO   (: [  ]  ) [org.hibernate.tool.hbm2ddl.SchemaExport] (main) HHH000227: Running hbm2ddl schema export
Hibernate: drop table if exists test_entity_1
Hibernate: drop table if exists hibernate_sequences
Hibernate: create table test_entity_1 (id bigint not null, intAttribute integer not null, stringAttribute varchar(255), primary key (id))
Hibernate: create table hibernate_sequences ( sequence_name varchar(255),  sequence_next_hi_value integer ) 
2018-06-07 16:18:35,184 INFO   (: [  ]  ) [org.hibernate.tool.hbm2ddl.SchemaExport] (main) HHH000230: Schema export complete
check constructions
2018-06-07 16:18:35,190 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L1 changing  from undefined to REQUIRES_NEW xid: null in OuterClass.saveRequiredInNewTraThrow
2018-06-07 16:18:35,190 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L2 changing  from REQUIRES_NEW to REQUIRED xid: null in StatelessEJB.saveInCurrentTransaction
Hibernate: select sequence_next_hi_value from hibernate_sequences where sequence_name = 'test_entity_1' for update
Hibernate: insert into hibernate_sequences(sequence_name, sequence_next_hi_value) values('test_entity_1', ?)
Hibernate: update hibernate_sequences set sequence_next_hi_value = ? where sequence_next_hi_value = ? and sequence_name = 'test_entity_1'
2018-06-07 16:18:35,192 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L2 finally   in REQUIRED xid: 33 in StatelessEJB.saveInCurrentTransaction
2018-06-07 16:18:35,192 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L2 done      REQUIRED back to REQUIRES_NEW xid: 33 in StatelessEJB.saveInCurrentTransaction
2018-06-07 16:18:35,193 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L1 Exception RuntimeException in REQUIRES_NEW xid: 33 in OuterClass.saveRequiredInNewTraThrow
2018-06-07 16:18:35,193 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L1 finally   in REQUIRES_NEW xid: 32 in OuterClass.saveRequiredInNewTraThrow
2018-06-07 16:18:35,193 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L1 done      REQUIRES_NEW back to undefined xid: null in OuterClass.saveRequiredInNewTraThrow
Hibernate: insert into test_entity_1 (intAttribute, stringAttribute, id) values (?, ?, ?)
Hibernate: select count(testentity0_.id) as col_0_0_ from test_entity_1 testentity0_
Hibernate: select count(testentity0_.id) as col_0_0_ from test_entity_1 testentity0_
2018-06-07 16:18:35,201 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.persistence.PersistenceFactory] (main) destroying persistence factory testdb
2018-06-07 16:18:35,201 INFO   (: [  ]  ) [org.hibernate.tool.hbm2ddl.SchemaExport] (main) HHH000227: Running hbm2ddl schema export
Hibernate: drop table if exists test_entity_1
Hibernate: drop table if exists hibernate_sequences
2018-06-07 16:18:35,202 INFO   (: [  ]  ) [org.hibernate.tool.hbm2ddl.SchemaExport] (main) HHH000230: Schema export complete
2018-06-07 16:18:35,203 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000030: Cleaning up connection pool [jdbc:h2:mem:test;MODE=MySQL;DB_CLOSE_DELAY=0]
2018-06-07 16:18:35,240 ERROR  (: [  ]  ) [CDI-Unit EJB-ExtensionExtended] (main) Self injection of EJB Type com.oneandone.ejbcdiunit.ejbs.SingletonEJB in field selfejb of Class com.oneandone.ejbcdiunit.ejbs.SingletonEJB can't get simulated by ejb-cdi-unit
2018-06-07 16:18:35,283 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.persistence.PersistenceFactory] (main) creating persistence factory testdb
2018-06-07 16:18:35,309 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000402: Using Hibernate built-in connection pool (not for production use!)
2018-06-07 16:18:35,309 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000115: Hibernate connection pool size: 20
2018-06-07 16:18:35,309 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000006: Autocommit mode: true
2018-06-07 16:18:35,310 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000401: using driver [org.h2.Driver] at URL [jdbc:h2:mem:test;MODE=MySQL;DB_CLOSE_DELAY=0]
2018-06-07 16:18:35,310 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000046: Connection properties: {user=sa, autocommit=true, release_mode=auto}
2018-06-07 16:18:35,313 INFO   (: [  ]  ) [org.hibernate.dialect.Dialect] (main) HHH000400: Using dialect: org.hibernate.dialect.MySQL5Dialect
2018-06-07 16:18:35,315 INFO   (: [  ]  ) [org.hibernate.engine.transaction.internal.TransactionFactoryInitiator] (main) HHH000268: Transaction strategy: org.hibernate.engine.transaction.internal.jdbc.JdbcTransactionFactory
2018-06-07 16:18:35,315 INFO   (: [  ]  ) [org.hibernate.hql.internal.ast.ASTQueryTranslatorFactory] (main) HHH000397: Using ASTQueryTranslatorFactory
2018-06-07 16:18:35,325 INFO   (: [  ]  ) [org.hibernate.tool.hbm2ddl.SchemaExport] (main) HHH000227: Running hbm2ddl schema export
Hibernate: drop table if exists test_entity_1
Hibernate: drop table if exists hibernate_sequences
Hibernate: create table test_entity_1 (id bigint not null, intAttribute integer not null, stringAttribute varchar(255), primary key (id))
Hibernate: create table hibernate_sequences ( sequence_name varchar(255),  sequence_next_hi_value integer ) 
2018-06-07 16:18:35,328 INFO   (: [  ]  ) [org.hibernate.tool.hbm2ddl.SchemaExport] (main) HHH000230: Schema export complete
check constructions
2018-06-07 16:18:35,337 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L1 changing  from undefined to NOT_SUPPORTED xid: null in StatelessEJB.trySaveInNotSupportedTransaction
2018-06-07 16:18:35,338 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L1 Exception TransactionRequiredException in NOT_SUPPORTED xid: null in StatelessEJB.trySaveInNotSupportedTransaction
2018-06-07 16:18:35,338 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L1 finally   in NOT_SUPPORTED xid: null in StatelessEJB.trySaveInNotSupportedTransaction
2018-06-07 16:18:35,338 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L1 done      NOT_SUPPORTED back to undefined xid: null in StatelessEJB.trySaveInNotSupportedTransaction
2018-06-07 16:18:35,339 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.persistence.PersistenceFactory] (main) destroying persistence factory testdb
2018-06-07 16:18:35,339 INFO   (: [  ]  ) [org.hibernate.tool.hbm2ddl.SchemaExport] (main) HHH000227: Running hbm2ddl schema export
Hibernate: drop table if exists test_entity_1
Hibernate: drop table if exists hibernate_sequences
2018-06-07 16:18:35,341 INFO   (: [  ]  ) [org.hibernate.tool.hbm2ddl.SchemaExport] (main) HHH000230: Schema export complete
2018-06-07 16:18:35,341 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000030: Cleaning up connection pool [jdbc:h2:mem:test;MODE=MySQL;DB_CLOSE_DELAY=0]
2018-06-07 16:18:35,378 ERROR  (: [  ]  ) [CDI-Unit EJB-ExtensionExtended] (main) Self injection of EJB Type com.oneandone.ejbcdiunit.ejbs.SingletonEJB in field selfejb of Class com.oneandone.ejbcdiunit.ejbs.SingletonEJB can't get simulated by ejb-cdi-unit
2018-06-07 16:18:35,420 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.persistence.PersistenceFactory] (main) creating persistence factory testdb
2018-06-07 16:18:35,446 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000402: Using Hibernate built-in connection pool (not for production use!)
2018-06-07 16:18:35,447 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000115: Hibernate connection pool size: 20
2018-06-07 16:18:35,447 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000006: Autocommit mode: true
2018-06-07 16:18:35,447 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000401: using driver [org.h2.Driver] at URL [jdbc:h2:mem:test;MODE=MySQL;DB_CLOSE_DELAY=0]
2018-06-07 16:18:35,447 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000046: Connection properties: {user=sa, autocommit=true, release_mode=auto}
2018-06-07 16:18:35,450 INFO   (: [  ]  ) [org.hibernate.dialect.Dialect] (main) HHH000400: Using dialect: org.hibernate.dialect.MySQL5Dialect
2018-06-07 16:18:35,452 INFO   (: [  ]  ) [org.hibernate.engine.transaction.internal.TransactionFactoryInitiator] (main) HHH000268: Transaction strategy: org.hibernate.engine.transaction.internal.jdbc.JdbcTransactionFactory
2018-06-07 16:18:35,453 INFO   (: [  ]  ) [org.hibernate.hql.internal.ast.ASTQueryTranslatorFactory] (main) HHH000397: Using ASTQueryTranslatorFactory
2018-06-07 16:18:35,463 INFO   (: [  ]  ) [org.hibernate.tool.hbm2ddl.SchemaExport] (main) HHH000227: Running hbm2ddl schema export
Hibernate: drop table if exists test_entity_1
Hibernate: drop table if exists hibernate_sequences
Hibernate: create table test_entity_1 (id bigint not null, intAttribute integer not null, stringAttribute varchar(255), primary key (id))
Hibernate: create table hibernate_sequences ( sequence_name varchar(255),  sequence_next_hi_value integer ) 
2018-06-07 16:18:35,465 INFO   (: [  ]  ) [org.hibernate.tool.hbm2ddl.SchemaExport] (main) HHH000230: Schema export complete
check constructions
2018-06-07 16:18:35,471 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L1 changing  from undefined to REQUIRES_NEW xid: null in OuterClass.saveRequiresNewLocalAsBusinessObject
2018-06-07 16:18:35,472 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L2 changing  from REQUIRES_NEW to REQUIRED xid: null in StatelessEJB.saveRequiresNewLocalAsBusinessObject
Hibernate: select sequence_next_hi_value from hibernate_sequences where sequence_name = 'test_entity_1' for update
Hibernate: insert into hibernate_sequences(sequence_name, sequence_next_hi_value) values('test_entity_1', ?)
Hibernate: update hibernate_sequences set sequence_next_hi_value = ? where sequence_next_hi_value = ? and sequence_name = 'test_entity_1'
2018-06-07 16:18:35,475 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L3 changing  from REQUIRED to REQUIRES_NEW xid: 35 in StatelessEJB.saveInNewTransaction
2018-06-07 16:18:35,475 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L3 finally   in REQUIRES_NEW xid: 36 in StatelessEJB.saveInNewTransaction
Hibernate: insert into test_entity_1 (intAttribute, stringAttribute, id) values (?, ?, ?)
2018-06-07 16:18:35,478 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L3 done      REQUIRES_NEW back to REQUIRED xid: 35 in StatelessEJB.saveInNewTransaction
2018-06-07 16:18:35,478 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L2 finally   in REQUIRED xid: 35 in StatelessEJB.saveRequiresNewLocalAsBusinessObject
2018-06-07 16:18:35,478 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L2 done      REQUIRED back to REQUIRES_NEW xid: 35 in StatelessEJB.saveRequiresNewLocalAsBusinessObject
2018-06-07 16:18:35,478 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L1 finally   in REQUIRES_NEW xid: 35 in OuterClass.saveRequiresNewLocalAsBusinessObject
Hibernate: insert into test_entity_1 (intAttribute, stringAttribute, id) values (?, ?, ?)
2018-06-07 16:18:35,479 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L1 done      REQUIRES_NEW back to undefined xid: 34 in OuterClass.saveRequiresNewLocalAsBusinessObject
Hibernate: insert into test_entity_1 (intAttribute, stringAttribute, id) values (?, ?, ?)
Hibernate: select count(testentity0_.id) as col_0_0_ from test_entity_1 testentity0_
Hibernate: select count(testentity0_.id) as col_0_0_ from test_entity_1 testentity0_
2018-06-07 16:18:35,486 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.persistence.PersistenceFactory] (main) destroying persistence factory testdb
2018-06-07 16:18:35,486 INFO   (: [  ]  ) [org.hibernate.tool.hbm2ddl.SchemaExport] (main) HHH000227: Running hbm2ddl schema export
Hibernate: drop table if exists test_entity_1
Hibernate: drop table if exists hibernate_sequences
2018-06-07 16:18:35,487 INFO   (: [  ]  ) [org.hibernate.tool.hbm2ddl.SchemaExport] (main) HHH000230: Schema export complete
2018-06-07 16:18:35,487 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000030: Cleaning up connection pool [jdbc:h2:mem:test;MODE=MySQL;DB_CLOSE_DELAY=0]
2018-06-07 16:18:35,524 ERROR  (: [  ]  ) [CDI-Unit EJB-ExtensionExtended] (main) Self injection of EJB Type com.oneandone.ejbcdiunit.ejbs.SingletonEJB in field selfejb of Class com.oneandone.ejbcdiunit.ejbs.SingletonEJB can't get simulated by ejb-cdi-unit
2018-06-07 16:18:35,566 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.persistence.PersistenceFactory] (main) creating persistence factory testdb
2018-06-07 16:18:35,591 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000402: Using Hibernate built-in connection pool (not for production use!)
2018-06-07 16:18:35,591 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000115: Hibernate connection pool size: 20
2018-06-07 16:18:35,591 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000006: Autocommit mode: true
2018-06-07 16:18:35,592 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000401: using driver [org.h2.Driver] at URL [jdbc:h2:mem:test;MODE=MySQL;DB_CLOSE_DELAY=0]
2018-06-07 16:18:35,592 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000046: Connection properties: {user=sa, autocommit=true, release_mode=auto}
2018-06-07 16:18:35,595 INFO   (: [  ]  ) [org.hibernate.dialect.Dialect] (main) HHH000400: Using dialect: org.hibernate.dialect.MySQL5Dialect
2018-06-07 16:18:35,597 INFO   (: [  ]  ) [org.hibernate.engine.transaction.internal.TransactionFactoryInitiator] (main) HHH000268: Transaction strategy: org.hibernate.engine.transaction.internal.jdbc.JdbcTransactionFactory
2018-06-07 16:18:35,597 INFO   (: [  ]  ) [org.hibernate.hql.internal.ast.ASTQueryTranslatorFactory] (main) HHH000397: Using ASTQueryTranslatorFactory
2018-06-07 16:18:35,609 INFO   (: [  ]  ) [org.hibernate.tool.hbm2ddl.SchemaExport] (main) HHH000227: Running hbm2ddl schema export
Hibernate: drop table if exists test_entity_1
Hibernate: drop table if exists hibernate_sequences
Hibernate: create table test_entity_1 (id bigint not null, intAttribute integer not null, stringAttribute varchar(255), primary key (id))
Hibernate: create table hibernate_sequences ( sequence_name varchar(255),  sequence_next_hi_value integer ) 
2018-06-07 16:18:35,611 INFO   (: [  ]  ) [org.hibernate.tool.hbm2ddl.SchemaExport] (main) HHH000230: Schema export complete
check constructions
2018-06-07 16:18:35,618 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L1 changing  from undefined to REQUIRES_NEW xid: null in OuterClass.saveRequiredPlusNewInNewTra
2018-06-07 16:18:35,618 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L2 changing  from REQUIRES_NEW to REQUIRED xid: null in StatelessEJB.saveInCurrentTransactionAndSaveNewInNewButDirectCall
Hibernate: select sequence_next_hi_value from hibernate_sequences where sequence_name = 'test_entity_1' for update
Hibernate: insert into hibernate_sequences(sequence_name, sequence_next_hi_value) values('test_entity_1', ?)
Hibernate: update hibernate_sequences set sequence_next_hi_value = ? where sequence_next_hi_value = ? and sequence_name = 'test_entity_1'
2018-06-07 16:18:35,621 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L2 finally   in REQUIRED xid: 38 in StatelessEJB.saveInCurrentTransactionAndSaveNewInNewButDirectCall
2018-06-07 16:18:35,621 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L2 done      REQUIRED back to REQUIRES_NEW xid: 38 in StatelessEJB.saveInCurrentTransactionAndSaveNewInNewButDirectCall
2018-06-07 16:18:35,622 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L1 finally   in REQUIRES_NEW xid: 38 in OuterClass.saveRequiredPlusNewInNewTra
Hibernate: insert into test_entity_1 (intAttribute, stringAttribute, id) values (?, ?, ?)
Hibernate: insert into test_entity_1 (intAttribute, stringAttribute, id) values (?, ?, ?)
2018-06-07 16:18:35,626 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L1 done      REQUIRES_NEW back to undefined xid: 37 in OuterClass.saveRequiredPlusNewInNewTra
Hibernate: insert into test_entity_1 (intAttribute, stringAttribute, id) values (?, ?, ?)
Hibernate: select count(testentity0_.id) as col_0_0_ from test_entity_1 testentity0_
Hibernate: select count(testentity0_.id) as col_0_0_ from test_entity_1 testentity0_
2018-06-07 16:18:35,635 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.persistence.PersistenceFactory] (main) destroying persistence factory testdb
2018-06-07 16:18:35,635 INFO   (: [  ]  ) [org.hibernate.tool.hbm2ddl.SchemaExport] (main) HHH000227: Running hbm2ddl schema export
Hibernate: drop table if exists test_entity_1
Hibernate: drop table if exists hibernate_sequences
2018-06-07 16:18:35,637 INFO   (: [  ]  ) [org.hibernate.tool.hbm2ddl.SchemaExport] (main) HHH000230: Schema export complete
2018-06-07 16:18:35,638 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000030: Cleaning up connection pool [jdbc:h2:mem:test;MODE=MySQL;DB_CLOSE_DELAY=0]
2018-06-07 16:18:35,686 ERROR  (: [  ]  ) [CDI-Unit EJB-ExtensionExtended] (main) Self injection of EJB Type com.oneandone.ejbcdiunit.ejbs.SingletonEJB in field selfejb of Class com.oneandone.ejbcdiunit.ejbs.SingletonEJB can't get simulated by ejb-cdi-unit
2018-06-07 16:18:35,743 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.persistence.PersistenceFactory] (main) creating persistence factory testdb
2018-06-07 16:18:35,775 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000402: Using Hibernate built-in connection pool (not for production use!)
2018-06-07 16:18:35,775 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000115: Hibernate connection pool size: 20
2018-06-07 16:18:35,775 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000006: Autocommit mode: true
2018-06-07 16:18:35,776 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000401: using driver [org.h2.Driver] at URL [jdbc:h2:mem:test;MODE=MySQL;DB_CLOSE_DELAY=0]
2018-06-07 16:18:35,776 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000046: Connection properties: {user=sa, autocommit=true, release_mode=auto}
2018-06-07 16:18:35,779 INFO   (: [  ]  ) [org.hibernate.dialect.Dialect] (main) HHH000400: Using dialect: org.hibernate.dialect.MySQL5Dialect
2018-06-07 16:18:35,782 INFO   (: [  ]  ) [org.hibernate.engine.transaction.internal.TransactionFactoryInitiator] (main) HHH000268: Transaction strategy: org.hibernate.engine.transaction.internal.jdbc.JdbcTransactionFactory
2018-06-07 16:18:35,782 INFO   (: [  ]  ) [org.hibernate.hql.internal.ast.ASTQueryTranslatorFactory] (main) HHH000397: Using ASTQueryTranslatorFactory
2018-06-07 16:18:35,793 INFO   (: [  ]  ) [org.hibernate.tool.hbm2ddl.SchemaExport] (main) HHH000227: Running hbm2ddl schema export
Hibernate: drop table if exists test_entity_1
Hibernate: drop table if exists hibernate_sequences
Hibernate: create table test_entity_1 (id bigint not null, intAttribute integer not null, stringAttribute varchar(255), primary key (id))
Hibernate: create table hibernate_sequences ( sequence_name varchar(255),  sequence_next_hi_value integer ) 
2018-06-07 16:18:35,795 INFO   (: [  ]  ) [org.hibernate.tool.hbm2ddl.SchemaExport] (main) HHH000230: Schema export complete
check constructions
2018-06-07 16:18:35,802 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L1 changing  from undefined to NOT_SUPPORTED xid: null in SingletonEJB.methodCallUsingSelf
2018-06-07 16:18:35,802 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L2 changing  from NOT_SUPPORTED to REQUIRES_NEW xid: null in SingletonEJB.callInNewTransaction
singleton bean
2018-06-07 16:18:35,802 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L2 finally   in REQUIRES_NEW xid: null in SingletonEJB.callInNewTransaction
2018-06-07 16:18:35,802 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L2 done      REQUIRES_NEW back to NOT_SUPPORTED xid: null in SingletonEJB.callInNewTransaction
singleton bean
2018-06-07 16:18:35,802 INFO   (: [  ]  ) [ejb-cdi-unit tests] (main) SingletonEJB: methodCallUsingSessionContext called
2018-06-07 16:18:35,802 INFO   (: [  ]  ) [ejb-cdi-unit tests] (main) output public variable 100
2018-06-07 16:18:35,802 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L1 finally   in NOT_SUPPORTED xid: null in SingletonEJB.methodCallUsingSelf
2018-06-07 16:18:35,802 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L1 done      NOT_SUPPORTED back to undefined xid: null in SingletonEJB.methodCallUsingSelf
2018-06-07 16:18:35,803 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.persistence.PersistenceFactory] (main) destroying persistence factory testdb
2018-06-07 16:18:35,803 INFO   (: [  ]  ) [org.hibernate.tool.hbm2ddl.SchemaExport] (main) HHH000227: Running hbm2ddl schema export
Hibernate: drop table if exists test_entity_1
Hibernate: drop table if exists hibernate_sequences
2018-06-07 16:18:35,805 INFO   (: [  ]  ) [org.hibernate.tool.hbm2ddl.SchemaExport] (main) HHH000230: Schema export complete
2018-06-07 16:18:35,805 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000030: Cleaning up connection pool [jdbc:h2:mem:test;MODE=MySQL;DB_CLOSE_DELAY=0]
2018-06-07 16:18:35,850 ERROR  (: [  ]  ) [CDI-Unit EJB-ExtensionExtended] (main) Self injection of EJB Type com.oneandone.ejbcdiunit.ejbs.SingletonEJB in field selfejb of Class com.oneandone.ejbcdiunit.ejbs.SingletonEJB can't get simulated by ejb-cdi-unit
2018-06-07 16:18:35,917 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.persistence.PersistenceFactory] (main) creating persistence factory testdb
2018-06-07 16:18:35,944 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000402: Using Hibernate built-in connection pool (not for production use!)
2018-06-07 16:18:35,945 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000115: Hibernate connection pool size: 20
2018-06-07 16:18:35,945 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000006: Autocommit mode: true
2018-06-07 16:18:35,945 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000401: using driver [org.h2.Driver] at URL [jdbc:h2:mem:test;MODE=MySQL;DB_CLOSE_DELAY=0]
2018-06-07 16:18:35,945 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000046: Connection properties: {user=sa, autocommit=true, release_mode=auto}
2018-06-07 16:18:35,948 INFO   (: [  ]  ) [org.hibernate.dialect.Dialect] (main) HHH000400: Using dialect: org.hibernate.dialect.MySQL5Dialect
2018-06-07 16:18:35,951 INFO   (: [  ]  ) [org.hibernate.engine.transaction.internal.TransactionFactoryInitiator] (main) HHH000268: Transaction strategy: org.hibernate.engine.transaction.internal.jdbc.JdbcTransactionFactory
2018-06-07 16:18:35,951 INFO   (: [  ]  ) [org.hibernate.hql.internal.ast.ASTQueryTranslatorFactory] (main) HHH000397: Using ASTQueryTranslatorFactory
2018-06-07 16:18:35,962 INFO   (: [  ]  ) [org.hibernate.tool.hbm2ddl.SchemaExport] (main) HHH000227: Running hbm2ddl schema export
Hibernate: drop table if exists test_entity_1
Hibernate: drop table if exists hibernate_sequences
Hibernate: create table test_entity_1 (id bigint not null, intAttribute integer not null, stringAttribute varchar(255), primary key (id))
Hibernate: create table hibernate_sequences ( sequence_name varchar(255),  sequence_next_hi_value integer ) 
2018-06-07 16:18:35,965 INFO   (: [  ]  ) [org.hibernate.tool.hbm2ddl.SchemaExport] (main) HHH000230: Schema export complete
check constructions
Hibernate: select sequence_next_hi_value from hibernate_sequences where sequence_name = 'test_entity_1' for update
Hibernate: insert into hibernate_sequences(sequence_name, sequence_next_hi_value) values('test_entity_1', ?)
Hibernate: update hibernate_sequences set sequence_next_hi_value = ? where sequence_next_hi_value = ? and sequence_name = 'test_entity_1'
Hibernate: insert into test_entity_1 (intAttribute, stringAttribute, id) values (?, ?, ?)
Hibernate: select testentity0_.id as id1_0_0_, testentity0_.intAttribute as intAttri2_0_0_, testentity0_.stringAttribute as stringAt3_0_0_ from test_entity_1 testentity0_ where testentity0_.id=?
Hibernate: select testentity0_.id as id1_0_0_, testentity0_.intAttribute as intAttri2_0_0_, testentity0_.stringAttribute as stringAt3_0_0_ from test_entity_1 testentity0_ where testentity0_.id=?
Hibernate: update test_entity_1 set intAttribute=?, stringAttribute=? where id=?
Hibernate: select testentity0_.id as id1_0_0_, testentity0_.intAttribute as intAttri2_0_0_, testentity0_.stringAttribute as stringAt3_0_0_ from test_entity_1 testentity0_ where testentity0_.id=?
2018-06-07 16:18:35,994 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.persistence.PersistenceFactory] (main) destroying persistence factory testdb
2018-06-07 16:18:35,994 INFO   (: [  ]  ) [org.hibernate.tool.hbm2ddl.SchemaExport] (main) HHH000227: Running hbm2ddl schema export
Hibernate: drop table if exists test_entity_1
Hibernate: drop table if exists hibernate_sequences
2018-06-07 16:18:35,996 INFO   (: [  ]  ) [org.hibernate.tool.hbm2ddl.SchemaExport] (main) HHH000230: Schema export complete
2018-06-07 16:18:35,996 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000030: Cleaning up connection pool [jdbc:h2:mem:test;MODE=MySQL;DB_CLOSE_DELAY=0]
2018-06-07 16:18:36,037 ERROR  (: [  ]  ) [CDI-Unit EJB-ExtensionExtended] (main) Self injection of EJB Type com.oneandone.ejbcdiunit.ejbs.SingletonEJB in field selfejb of Class com.oneandone.ejbcdiunit.ejbs.SingletonEJB can't get simulated by ejb-cdi-unit
2018-06-07 16:18:36,071 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.persistence.PersistenceFactory] (main) creating persistence factory testdb
2018-06-07 16:18:36,092 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000402: Using Hibernate built-in connection pool (not for production use!)
2018-06-07 16:18:36,093 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000115: Hibernate connection pool size: 20
2018-06-07 16:18:36,093 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000006: Autocommit mode: true
2018-06-07 16:18:36,093 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000401: using driver [org.h2.Driver] at URL [jdbc:h2:mem:test;MODE=MySQL;DB_CLOSE_DELAY=0]
2018-06-07 16:18:36,093 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000046: Connection properties: {user=sa, autocommit=true, release_mode=auto}
2018-06-07 16:18:36,096 INFO   (: [  ]  ) [org.hibernate.dialect.Dialect] (main) HHH000400: Using dialect: org.hibernate.dialect.MySQL5Dialect
2018-06-07 16:18:36,097 INFO   (: [  ]  ) [org.hibernate.engine.transaction.internal.TransactionFactoryInitiator] (main) HHH000268: Transaction strategy: org.hibernate.engine.transaction.internal.jdbc.JdbcTransactionFactory
2018-06-07 16:18:36,098 INFO   (: [  ]  ) [org.hibernate.hql.internal.ast.ASTQueryTranslatorFactory] (main) HHH000397: Using ASTQueryTranslatorFactory
2018-06-07 16:18:36,106 INFO   (: [  ]  ) [org.hibernate.tool.hbm2ddl.SchemaExport] (main) HHH000227: Running hbm2ddl schema export
Hibernate: drop table if exists test_entity_1
Hibernate: drop table if exists hibernate_sequences
Hibernate: create table test_entity_1 (id bigint not null, intAttribute integer not null, stringAttribute varchar(255), primary key (id))
Hibernate: create table hibernate_sequences ( sequence_name varchar(255),  sequence_next_hi_value integer ) 
2018-06-07 16:18:36,108 INFO   (: [  ]  ) [org.hibernate.tool.hbm2ddl.SchemaExport] (main) HHH000230: Schema export complete
check constructions
2018-06-07 16:18:36,112 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L1 changing  from undefined to NOT_SUPPORTED xid: null in StatelessEJB.trySaveInNotSupportedTransaction
2018-06-07 16:18:36,112 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L1 Exception TransactionRequiredException in NOT_SUPPORTED xid: null in StatelessEJB.trySaveInNotSupportedTransaction
2018-06-07 16:18:36,113 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L1 finally   in NOT_SUPPORTED xid: null in StatelessEJB.trySaveInNotSupportedTransaction
2018-06-07 16:18:36,113 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L1 done      NOT_SUPPORTED back to undefined xid: null in StatelessEJB.trySaveInNotSupportedTransaction
2018-06-07 16:18:36,113 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.persistence.PersistenceFactory] (main) destroying persistence factory testdb
2018-06-07 16:18:36,113 INFO   (: [  ]  ) [org.hibernate.tool.hbm2ddl.SchemaExport] (main) HHH000227: Running hbm2ddl schema export
Hibernate: drop table if exists test_entity_1
Hibernate: drop table if exists hibernate_sequences
2018-06-07 16:18:36,115 INFO   (: [  ]  ) [org.hibernate.tool.hbm2ddl.SchemaExport] (main) HHH000230: Schema export complete
2018-06-07 16:18:36,115 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000030: Cleaning up connection pool [jdbc:h2:mem:test;MODE=MySQL;DB_CLOSE_DELAY=0]
2018-06-07 16:18:36,143 ERROR  (: [  ]  ) [CDI-Unit EJB-ExtensionExtended] (main) Self injection of EJB Type com.oneandone.ejbcdiunit.ejbs.SingletonEJB in field selfejb of Class com.oneandone.ejbcdiunit.ejbs.SingletonEJB can't get simulated by ejb-cdi-unit
2018-06-07 16:18:36,175 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.persistence.PersistenceFactory] (main) creating persistence factory testdb
2018-06-07 16:18:36,194 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000402: Using Hibernate built-in connection pool (not for production use!)
2018-06-07 16:18:36,194 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000115: Hibernate connection pool size: 20
2018-06-07 16:18:36,195 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000006: Autocommit mode: true
2018-06-07 16:18:36,195 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000401: using driver [org.h2.Driver] at URL [jdbc:h2:mem:test;MODE=MySQL;DB_CLOSE_DELAY=0]
2018-06-07 16:18:36,195 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000046: Connection properties: {user=sa, autocommit=true, release_mode=auto}
2018-06-07 16:18:36,197 INFO   (: [  ]  ) [org.hibernate.dialect.Dialect] (main) HHH000400: Using dialect: org.hibernate.dialect.MySQL5Dialect
2018-06-07 16:18:36,199 INFO   (: [  ]  ) [org.hibernate.engine.transaction.internal.TransactionFactoryInitiator] (main) HHH000268: Transaction strategy: org.hibernate.engine.transaction.internal.jdbc.JdbcTransactionFactory
2018-06-07 16:18:36,199 INFO   (: [  ]  ) [org.hibernate.hql.internal.ast.ASTQueryTranslatorFactory] (main) HHH000397: Using ASTQueryTranslatorFactory
2018-06-07 16:18:36,207 INFO   (: [  ]  ) [org.hibernate.tool.hbm2ddl.SchemaExport] (main) HHH000227: Running hbm2ddl schema export
Hibernate: drop table if exists test_entity_1
Hibernate: drop table if exists hibernate_sequences
Hibernate: create table test_entity_1 (id bigint not null, intAttribute integer not null, stringAttribute varchar(255), primary key (id))
Hibernate: create table hibernate_sequences ( sequence_name varchar(255),  sequence_next_hi_value integer ) 
2018-06-07 16:18:36,208 INFO   (: [  ]  ) [org.hibernate.tool.hbm2ddl.SchemaExport] (main) HHH000230: Schema export complete
check constructions
2018-06-07 16:18:36,212 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L1 changing  from undefined to SUPPORTS xid: null in StatelessEJB.saveInSupportedTransaction
Hibernate: select sequence_next_hi_value from hibernate_sequences where sequence_name = 'test_entity_1' for update
Hibernate: insert into hibernate_sequences(sequence_name, sequence_next_hi_value) values('test_entity_1', ?)
Hibernate: update hibernate_sequences set sequence_next_hi_value = ? where sequence_next_hi_value = ? and sequence_name = 'test_entity_1'
2018-06-07 16:18:36,213 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L1 finally   in SUPPORTS xid: 41 in StatelessEJB.saveInSupportedTransaction
2018-06-07 16:18:36,213 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L1 done      SUPPORTS back to undefined xid: 41 in StatelessEJB.saveInSupportedTransaction
Hibernate: insert into test_entity_1 (intAttribute, stringAttribute, id) values (?, ?, ?)
2018-06-07 16:18:36,216 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.persistence.PersistenceFactory] (main) destroying persistence factory testdb
2018-06-07 16:18:36,216 INFO   (: [  ]  ) [org.hibernate.tool.hbm2ddl.SchemaExport] (main) HHH000227: Running hbm2ddl schema export
Hibernate: drop table if exists test_entity_1
Hibernate: drop table if exists hibernate_sequences
2018-06-07 16:18:36,217 INFO   (: [  ]  ) [org.hibernate.tool.hbm2ddl.SchemaExport] (main) HHH000230: Schema export complete
2018-06-07 16:18:36,217 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000030: Cleaning up connection pool [jdbc:h2:mem:test;MODE=MySQL;DB_CLOSE_DELAY=0]
2018-06-07 16:18:36,247 ERROR  (: [  ]  ) [CDI-Unit EJB-ExtensionExtended] (main) Self injection of EJB Type com.oneandone.ejbcdiunit.ejbs.SingletonEJB in field selfejb of Class com.oneandone.ejbcdiunit.ejbs.SingletonEJB can't get simulated by ejb-cdi-unit
2018-06-07 16:18:36,276 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.persistence.PersistenceFactory] (main) creating persistence factory testdb
2018-06-07 16:18:36,294 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000402: Using Hibernate built-in connection pool (not for production use!)
2018-06-07 16:18:36,294 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000115: Hibernate connection pool size: 20
2018-06-07 16:18:36,294 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000006: Autocommit mode: true
2018-06-07 16:18:36,295 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000401: using driver [org.h2.Driver] at URL [jdbc:h2:mem:test;MODE=MySQL;DB_CLOSE_DELAY=0]
2018-06-07 16:18:36,295 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000046: Connection properties: {user=sa, autocommit=true, release_mode=auto}
2018-06-07 16:18:36,297 INFO   (: [  ]  ) [org.hibernate.dialect.Dialect] (main) HHH000400: Using dialect: org.hibernate.dialect.MySQL5Dialect
2018-06-07 16:18:36,299 INFO   (: [  ]  ) [org.hibernate.engine.transaction.internal.TransactionFactoryInitiator] (main) HHH000268: Transaction strategy: org.hibernate.engine.transaction.internal.jdbc.JdbcTransactionFactory
2018-06-07 16:18:36,299 INFO   (: [  ]  ) [org.hibernate.hql.internal.ast.ASTQueryTranslatorFactory] (main) HHH000397: Using ASTQueryTranslatorFactory
2018-06-07 16:18:36,307 INFO   (: [  ]  ) [org.hibernate.tool.hbm2ddl.SchemaExport] (main) HHH000227: Running hbm2ddl schema export
Hibernate: drop table if exists test_entity_1
Hibernate: drop table if exists hibernate_sequences
Hibernate: create table test_entity_1 (id bigint not null, intAttribute integer not null, stringAttribute varchar(255), primary key (id))
Hibernate: create table hibernate_sequences ( sequence_name varchar(255),  sequence_next_hi_value integer ) 
2018-06-07 16:18:36,308 INFO   (: [  ]  ) [org.hibernate.tool.hbm2ddl.SchemaExport] (main) HHH000230: Schema export complete
check constructions
2018-06-07 16:18:36,312 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L1 changing  from undefined to NOT_SUPPORTED xid: null in SingletonEJB.methodCallUsingSelfEjb
2018-06-07 16:18:36,312 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L2 changing  from NOT_SUPPORTED to REQUIRES_NEW xid: null in SingletonEJB.callInNewTransaction
singleton bean
2018-06-07 16:18:36,313 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L2 finally   in REQUIRES_NEW xid: null in SingletonEJB.callInNewTransaction
2018-06-07 16:18:36,313 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L2 done      REQUIRES_NEW back to NOT_SUPPORTED xid: null in SingletonEJB.callInNewTransaction
singleton bean
2018-06-07 16:18:36,313 INFO   (: [  ]  ) [ejb-cdi-unit tests] (main) SingletonEJB: methodCallUsingSessionContext called
2018-06-07 16:18:36,313 INFO   (: [  ]  ) [ejb-cdi-unit tests] (main) output public variable 100
2018-06-07 16:18:36,313 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L1 finally   in NOT_SUPPORTED xid: null in SingletonEJB.methodCallUsingSelfEjb
2018-06-07 16:18:36,313 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L1 done      NOT_SUPPORTED back to undefined xid: null in SingletonEJB.methodCallUsingSelfEjb
2018-06-07 16:18:36,313 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.persistence.PersistenceFactory] (main) destroying persistence factory testdb
2018-06-07 16:18:36,314 INFO   (: [  ]  ) [org.hibernate.tool.hbm2ddl.SchemaExport] (main) HHH000227: Running hbm2ddl schema export
Hibernate: drop table if exists test_entity_1
Hibernate: drop table if exists hibernate_sequences
2018-06-07 16:18:36,315 INFO   (: [  ]  ) [org.hibernate.tool.hbm2ddl.SchemaExport] (main) HHH000230: Schema export complete
2018-06-07 16:18:36,315 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000030: Cleaning up connection pool [jdbc:h2:mem:test;MODE=MySQL;DB_CLOSE_DELAY=0]
2018-06-07 16:18:36,342 ERROR  (: [  ]  ) [CDI-Unit EJB-ExtensionExtended] (main) Self injection of EJB Type com.oneandone.ejbcdiunit.ejbs.SingletonEJB in field selfejb of Class com.oneandone.ejbcdiunit.ejbs.SingletonEJB can't get simulated by ejb-cdi-unit
2018-06-07 16:18:36,373 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.persistence.PersistenceFactory] (main) creating persistence factory testdb
2018-06-07 16:18:36,391 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000402: Using Hibernate built-in connection pool (not for production use!)
2018-06-07 16:18:36,391 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000115: Hibernate connection pool size: 20
2018-06-07 16:18:36,391 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000006: Autocommit mode: true
2018-06-07 16:18:36,392 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000401: using driver [org.h2.Driver] at URL [jdbc:h2:mem:test;MODE=MySQL;DB_CLOSE_DELAY=0]
2018-06-07 16:18:36,392 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000046: Connection properties: {user=sa, autocommit=true, release_mode=auto}
2018-06-07 16:18:36,394 INFO   (: [  ]  ) [org.hibernate.dialect.Dialect] (main) HHH000400: Using dialect: org.hibernate.dialect.MySQL5Dialect
2018-06-07 16:18:36,395 INFO   (: [  ]  ) [org.hibernate.engine.transaction.internal.TransactionFactoryInitiator] (main) HHH000268: Transaction strategy: org.hibernate.engine.transaction.internal.jdbc.JdbcTransactionFactory
2018-06-07 16:18:36,395 INFO   (: [  ]  ) [org.hibernate.hql.internal.ast.ASTQueryTranslatorFactory] (main) HHH000397: Using ASTQueryTranslatorFactory
2018-06-07 16:18:36,402 INFO   (: [  ]  ) [org.hibernate.tool.hbm2ddl.SchemaExport] (main) HHH000227: Running hbm2ddl schema export
Hibernate: drop table if exists test_entity_1
Hibernate: drop table if exists hibernate_sequences
Hibernate: create table test_entity_1 (id bigint not null, intAttribute integer not null, stringAttribute varchar(255), primary key (id))
Hibernate: create table hibernate_sequences ( sequence_name varchar(255),  sequence_next_hi_value integer ) 
2018-06-07 16:18:36,404 INFO   (: [  ]  ) [org.hibernate.tool.hbm2ddl.SchemaExport] (main) HHH000230: Schema export complete
check constructions
2018-06-07 16:18:36,408 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L1 changing  from undefined to REQUIRES_NEW xid: null in OuterClass.saveNewInNewTraThrow
2018-06-07 16:18:36,408 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L2 changing  from REQUIRES_NEW to REQUIRES_NEW xid: null in StatelessEJB.saveInNewTransaction
Hibernate: select sequence_next_hi_value from hibernate_sequences where sequence_name = 'test_entity_1' for update
Hibernate: insert into hibernate_sequences(sequence_name, sequence_next_hi_value) values('test_entity_1', ?)
Hibernate: update hibernate_sequences set sequence_next_hi_value = ? where sequence_next_hi_value = ? and sequence_name = 'test_entity_1'
2018-06-07 16:18:36,411 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L2 finally   in REQUIRES_NEW xid: 44 in StatelessEJB.saveInNewTransaction
Hibernate: insert into test_entity_1 (intAttribute, stringAttribute, id) values (?, ?, ?)
2018-06-07 16:18:36,414 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L2 done      REQUIRES_NEW back to REQUIRES_NEW xid: 43 in StatelessEJB.saveInNewTransaction
2018-06-07 16:18:36,414 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L1 Exception RuntimeException in REQUIRES_NEW xid: 43 in OuterClass.saveNewInNewTraThrow
2018-06-07 16:18:36,414 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L1 finally   in REQUIRES_NEW xid: 42 in OuterClass.saveNewInNewTraThrow
2018-06-07 16:18:36,414 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L1 done      REQUIRES_NEW back to undefined xid: null in OuterClass.saveNewInNewTraThrow
Hibernate: insert into test_entity_1 (intAttribute, stringAttribute, id) values (?, ?, ?)
Hibernate: select count(testentity0_.id) as col_0_0_ from test_entity_1 testentity0_
Hibernate: select count(testentity0_.id) as col_0_0_ from test_entity_1 testentity0_
2018-06-07 16:18:36,420 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.persistence.PersistenceFactory] (main) destroying persistence factory testdb
2018-06-07 16:18:36,420 INFO   (: [  ]  ) [org.hibernate.tool.hbm2ddl.SchemaExport] (main) HHH000227: Running hbm2ddl schema export
Hibernate: drop table if exists test_entity_1
Hibernate: drop table if exists hibernate_sequences
2018-06-07 16:18:36,421 INFO   (: [  ]  ) [org.hibernate.tool.hbm2ddl.SchemaExport] (main) HHH000230: Schema export complete
2018-06-07 16:18:36,421 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000030: Cleaning up connection pool [jdbc:h2:mem:test;MODE=MySQL;DB_CLOSE_DELAY=0]
