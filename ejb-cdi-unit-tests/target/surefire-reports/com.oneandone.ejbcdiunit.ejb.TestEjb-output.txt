SLF4J: Class path contains multiple SLF4J bindings.
SLF4J: Found binding in [jar:file:/root/./workspace/1and1/ejb-cdi-unit/389259868/.m2/org/slf4j/slf4j-log4j12/1.7.21/slf4j-log4j12-1.7.21.jar!/org/slf4j/impl/StaticLoggerBinder.class]
SLF4J: Found binding in [jar:file:/root/./workspace/1and1/ejb-cdi-unit/389259868/.m2/ch/qos/logback/logback-classic/1.0.9/logback-classic-1.0.9.jar!/org/slf4j/impl/StaticLoggerBinder.class]
SLF4J: See http://www.slf4j.org/codes.html#multiple_bindings for an explanation.
SLF4J: Actual binding is of type [org.slf4j.impl.Log4jLoggerFactory]
2018-06-07 16:37:03,518 INFO   (: [  ]  ) [org.jboss.weld.Version] (main) WELD-000900 1.1.14 (Final)
2018-06-07 16:37:04,138 ERROR  (: [  ]  ) [CDI-Unit EJB-ExtensionExtended] (main) Self injection of EJB Type com.oneandone.ejbcdiunit.ejbs.SingletonEJB in field selfejb of Class com.oneandone.ejbcdiunit.ejbs.SingletonEJB can't get simulated by ejb-cdi-unit
2018-06-07 16:37:04,663 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.persistence.PersistenceFactory] (main) creating persistence factory testdb
2018-06-07 16:37:04,832 INFO   (: [  ]  ) [org.hibernate.annotations.common.Version] (main) HCANN000001: Hibernate Commons Annotations {4.0.2.Final}
2018-06-07 16:37:04,839 INFO   (: [  ]  ) [org.hibernate.Version] (main) HHH000412: Hibernate Core {4.2.2.Final}
2018-06-07 16:37:04,841 INFO   (: [  ]  ) [org.hibernate.cfg.Environment] (main) HHH000206: hibernate.properties not found
2018-06-07 16:37:04,843 INFO   (: [  ]  ) [org.hibernate.cfg.Environment] (main) HHH000021: Bytecode provider name : javassist
2018-06-07 16:37:05,106 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000402: Using Hibernate built-in connection pool (not for production use!)
2018-06-07 16:37:05,113 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000115: Hibernate connection pool size: 20
2018-06-07 16:37:05,113 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000006: Autocommit mode: true
2018-06-07 16:37:05,114 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000401: using driver [org.h2.Driver] at URL [jdbc:h2:mem:test;MODE=MySQL;DB_CLOSE_DELAY=0]
2018-06-07 16:37:05,114 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000046: Connection properties: {user=sa, autocommit=true, release_mode=auto}
2018-06-07 16:37:05,372 INFO   (: [  ]  ) [org.hibernate.dialect.Dialect] (main) HHH000400: Using dialect: org.hibernate.dialect.MySQL5Dialect
2018-06-07 16:37:05,537 INFO   (: [  ]  ) [org.hibernate.engine.transaction.internal.TransactionFactoryInitiator] (main) HHH000268: Transaction strategy: org.hibernate.engine.transaction.internal.jdbc.JdbcTransactionFactory
2018-06-07 16:37:05,543 INFO   (: [  ]  ) [org.hibernate.hql.internal.ast.ASTQueryTranslatorFactory] (main) HHH000397: Using ASTQueryTranslatorFactory
2018-06-07 16:37:05,590 INFO   (: [  ]  ) [org.hibernate.validator.internal.util.Version] (main) HV000001: Hibernate Validator 4.3.1.Final
2018-06-07 16:37:05,933 INFO   (: [  ]  ) [org.hibernate.tool.hbm2ddl.SchemaExport] (main) HHH000227: Running hbm2ddl schema export
Hibernate: drop table if exists test_entity_1
Hibernate: drop table if exists hibernate_sequences
Hibernate: create table test_entity_1 (id bigint not null, intAttribute integer not null, stringAttribute varchar(255), primary key (id))
Hibernate: create table hibernate_sequences ( sequence_name varchar(255),  sequence_next_hi_value integer ) 
2018-06-07 16:37:05,942 INFO   (: [  ]  ) [org.hibernate.tool.hbm2ddl.SchemaExport] (main) HHH000230: Schema export complete
check constructions
2018-06-07 16:37:06,130 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L1 changing  from undefined to NOT_SUPPORTED xid: null in StatelessBeanManagedTrasEJB.insertNewInTra
2018-06-07 16:37:06,131 INFO   (: [  ]  ) [ejb-cdi-unit tests] (main) output public variable 200
Hibernate: select sequence_next_hi_value from hibernate_sequences where sequence_name = 'test_entity_1' for update
Hibernate: insert into hibernate_sequences(sequence_name, sequence_next_hi_value) values('test_entity_1', ?)
Hibernate: update hibernate_sequences set sequence_next_hi_value = ? where sequence_next_hi_value = ? and sequence_name = 'test_entity_1'
Hibernate: insert into test_entity_1 (intAttribute, stringAttribute, id) values (?, ?, ?)
2018-06-07 16:37:06,307 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L1 finally   in NOT_SUPPORTED xid: null in StatelessBeanManagedTrasEJB.insertNewInTra
2018-06-07 16:37:06,307 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L1 done      NOT_SUPPORTED back to undefined xid: null in StatelessBeanManagedTrasEJB.insertNewInTra
2018-06-07 16:37:06,313 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.persistence.PersistenceFactory] (main) destroying persistence factory testdb
2018-06-07 16:37:06,313 INFO   (: [  ]  ) [org.hibernate.tool.hbm2ddl.SchemaExport] (main) HHH000227: Running hbm2ddl schema export
Hibernate: drop table if exists test_entity_1
Hibernate: drop table if exists hibernate_sequences
2018-06-07 16:37:06,319 INFO   (: [  ]  ) [org.hibernate.tool.hbm2ddl.SchemaExport] (main) HHH000230: Schema export complete
2018-06-07 16:37:06,320 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000030: Cleaning up connection pool [jdbc:h2:mem:test;MODE=MySQL;DB_CLOSE_DELAY=0]
2018-06-07 16:37:06,406 ERROR  (: [  ]  ) [CDI-Unit EJB-ExtensionExtended] (main) Self injection of EJB Type com.oneandone.ejbcdiunit.ejbs.SingletonEJB in field selfejb of Class com.oneandone.ejbcdiunit.ejbs.SingletonEJB can't get simulated by ejb-cdi-unit
2018-06-07 16:37:06,542 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.persistence.PersistenceFactory] (main) creating persistence factory testdb
2018-06-07 16:37:06,602 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000402: Using Hibernate built-in connection pool (not for production use!)
2018-06-07 16:37:06,602 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000115: Hibernate connection pool size: 20
2018-06-07 16:37:06,602 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000006: Autocommit mode: true
2018-06-07 16:37:06,603 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000401: using driver [org.h2.Driver] at URL [jdbc:h2:mem:test;MODE=MySQL;DB_CLOSE_DELAY=0]
2018-06-07 16:37:06,603 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000046: Connection properties: {user=sa, autocommit=true, release_mode=auto}
2018-06-07 16:37:06,609 INFO   (: [  ]  ) [org.hibernate.dialect.Dialect] (main) HHH000400: Using dialect: org.hibernate.dialect.MySQL5Dialect
2018-06-07 16:37:06,613 INFO   (: [  ]  ) [org.hibernate.engine.transaction.internal.TransactionFactoryInitiator] (main) HHH000268: Transaction strategy: org.hibernate.engine.transaction.internal.jdbc.JdbcTransactionFactory
2018-06-07 16:37:06,613 INFO   (: [  ]  ) [org.hibernate.hql.internal.ast.ASTQueryTranslatorFactory] (main) HHH000397: Using ASTQueryTranslatorFactory
2018-06-07 16:37:06,624 INFO   (: [  ]  ) [org.hibernate.tool.hbm2ddl.SchemaExport] (main) HHH000227: Running hbm2ddl schema export
Hibernate: drop table if exists test_entity_1
Hibernate: drop table if exists hibernate_sequences
Hibernate: create table test_entity_1 (id bigint not null, intAttribute integer not null, stringAttribute varchar(255), primary key (id))
Hibernate: create table hibernate_sequences ( sequence_name varchar(255),  sequence_next_hi_value integer ) 
2018-06-07 16:37:06,627 INFO   (: [  ]  ) [org.hibernate.tool.hbm2ddl.SchemaExport] (main) HHH000230: Schema export complete
check constructions
2018-06-07 16:37:06,638 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L1 changing  from undefined to NOT_SUPPORTED xid: null in StatelessBeanManagedTrasEJB.insertWithoutTra
2018-06-07 16:37:06,638 INFO   (: [  ]  ) [ejb-cdi-unit tests] (main) output public variable 200
2018-06-07 16:37:06,640 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L1 Exception TransactionRequiredException in NOT_SUPPORTED xid: null in StatelessBeanManagedTrasEJB.insertWithoutTra
2018-06-07 16:37:06,640 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L1 finally   in NOT_SUPPORTED xid: null in StatelessBeanManagedTrasEJB.insertWithoutTra
2018-06-07 16:37:06,640 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L1 done      NOT_SUPPORTED back to undefined xid: null in StatelessBeanManagedTrasEJB.insertWithoutTra
2018-06-07 16:37:06,642 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.persistence.PersistenceFactory] (main) destroying persistence factory testdb
2018-06-07 16:37:06,642 INFO   (: [  ]  ) [org.hibernate.tool.hbm2ddl.SchemaExport] (main) HHH000227: Running hbm2ddl schema export
Hibernate: drop table if exists test_entity_1
Hibernate: drop table if exists hibernate_sequences
2018-06-07 16:37:06,645 INFO   (: [  ]  ) [org.hibernate.tool.hbm2ddl.SchemaExport] (main) HHH000230: Schema export complete
2018-06-07 16:37:06,645 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000030: Cleaning up connection pool [jdbc:h2:mem:test;MODE=MySQL;DB_CLOSE_DELAY=0]
2018-06-07 16:37:06,735 ERROR  (: [  ]  ) [CDI-Unit EJB-ExtensionExtended] (main) Self injection of EJB Type com.oneandone.ejbcdiunit.ejbs.SingletonEJB in field selfejb of Class com.oneandone.ejbcdiunit.ejbs.SingletonEJB can't get simulated by ejb-cdi-unit
2018-06-07 16:37:06,844 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.persistence.PersistenceFactory] (main) creating persistence factory testdb
2018-06-07 16:37:06,902 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000402: Using Hibernate built-in connection pool (not for production use!)
2018-06-07 16:37:06,902 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000115: Hibernate connection pool size: 20
2018-06-07 16:37:06,902 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000006: Autocommit mode: true
2018-06-07 16:37:06,903 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000401: using driver [org.h2.Driver] at URL [jdbc:h2:mem:test;MODE=MySQL;DB_CLOSE_DELAY=0]
2018-06-07 16:37:06,903 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000046: Connection properties: {user=sa, autocommit=true, release_mode=auto}
2018-06-07 16:37:06,911 INFO   (: [  ]  ) [org.hibernate.dialect.Dialect] (main) HHH000400: Using dialect: org.hibernate.dialect.MySQL5Dialect
2018-06-07 16:37:06,915 INFO   (: [  ]  ) [org.hibernate.engine.transaction.internal.TransactionFactoryInitiator] (main) HHH000268: Transaction strategy: org.hibernate.engine.transaction.internal.jdbc.JdbcTransactionFactory
2018-06-07 16:37:06,916 INFO   (: [  ]  ) [org.hibernate.hql.internal.ast.ASTQueryTranslatorFactory] (main) HHH000397: Using ASTQueryTranslatorFactory
2018-06-07 16:37:06,930 INFO   (: [  ]  ) [org.hibernate.tool.hbm2ddl.SchemaExport] (main) HHH000227: Running hbm2ddl schema export
Hibernate: drop table if exists test_entity_1
Hibernate: drop table if exists hibernate_sequences
Hibernate: create table test_entity_1 (id bigint not null, intAttribute integer not null, stringAttribute varchar(255), primary key (id))
Hibernate: create table hibernate_sequences ( sequence_name varchar(255),  sequence_next_hi_value integer ) 
2018-06-07 16:37:06,934 INFO   (: [  ]  ) [org.hibernate.tool.hbm2ddl.SchemaExport] (main) HHH000230: Schema export complete
check constructions
2018-06-07 16:37:06,947 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L1 changing  from undefined to NOT_SUPPORTED xid: null in SingletonEJB.methodCallUsingSessionContext
2018-06-07 16:37:06,957 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L2 changing  from NOT_SUPPORTED to REQUIRES_NEW xid: null in SingletonEJB.callInNewTransactionWithParam
singleton bean 10
2018-06-07 16:37:06,957 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L2 finally   in REQUIRES_NEW xid: null in SingletonEJB.callInNewTransactionWithParam
2018-06-07 16:37:06,957 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L2 done      REQUIRES_NEW back to NOT_SUPPORTED xid: null in SingletonEJB.callInNewTransactionWithParam
2018-06-07 16:37:06,957 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L2 changing  from NOT_SUPPORTED to REQUIRES_NEW xid: null in SingletonEJB.callInNewTransaction
singleton bean
2018-06-07 16:37:06,957 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L2 finally   in REQUIRES_NEW xid: null in SingletonEJB.callInNewTransaction
2018-06-07 16:37:06,958 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L2 done      REQUIRES_NEW back to NOT_SUPPORTED xid: null in SingletonEJB.callInNewTransaction
singleton bean
2018-06-07 16:37:06,958 INFO   (: [  ]  ) [ejb-cdi-unit tests] (main) SingletonEJB: methodCallUsingSessionContext called
2018-06-07 16:37:06,958 INFO   (: [  ]  ) [ejb-cdi-unit tests] (main) output public variable 100
2018-06-07 16:37:06,958 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L1 finally   in NOT_SUPPORTED xid: null in SingletonEJB.methodCallUsingSessionContext
2018-06-07 16:37:06,958 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L1 done      NOT_SUPPORTED back to undefined xid: null in SingletonEJB.methodCallUsingSessionContext
2018-06-07 16:37:06,959 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.persistence.PersistenceFactory] (main) destroying persistence factory testdb
2018-06-07 16:37:06,959 INFO   (: [  ]  ) [org.hibernate.tool.hbm2ddl.SchemaExport] (main) HHH000227: Running hbm2ddl schema export
Hibernate: drop table if exists test_entity_1
Hibernate: drop table if exists hibernate_sequences
2018-06-07 16:37:06,961 INFO   (: [  ]  ) [org.hibernate.tool.hbm2ddl.SchemaExport] (main) HHH000230: Schema export complete
2018-06-07 16:37:06,961 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000030: Cleaning up connection pool [jdbc:h2:mem:test;MODE=MySQL;DB_CLOSE_DELAY=0]
2018-06-07 16:37:07,027 ERROR  (: [  ]  ) [CDI-Unit EJB-ExtensionExtended] (main) Self injection of EJB Type com.oneandone.ejbcdiunit.ejbs.SingletonEJB in field selfejb of Class com.oneandone.ejbcdiunit.ejbs.SingletonEJB can't get simulated by ejb-cdi-unit
2018-06-07 16:37:07,110 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.persistence.PersistenceFactory] (main) creating persistence factory testdb
2018-06-07 16:37:07,159 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000402: Using Hibernate built-in connection pool (not for production use!)
2018-06-07 16:37:07,159 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000115: Hibernate connection pool size: 20
2018-06-07 16:37:07,159 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000006: Autocommit mode: true
2018-06-07 16:37:07,160 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000401: using driver [org.h2.Driver] at URL [jdbc:h2:mem:test;MODE=MySQL;DB_CLOSE_DELAY=0]
2018-06-07 16:37:07,160 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000046: Connection properties: {user=sa, autocommit=true, release_mode=auto}
2018-06-07 16:37:07,168 INFO   (: [  ]  ) [org.hibernate.dialect.Dialect] (main) HHH000400: Using dialect: org.hibernate.dialect.MySQL5Dialect
2018-06-07 16:37:07,172 INFO   (: [  ]  ) [org.hibernate.engine.transaction.internal.TransactionFactoryInitiator] (main) HHH000268: Transaction strategy: org.hibernate.engine.transaction.internal.jdbc.JdbcTransactionFactory
2018-06-07 16:37:07,172 INFO   (: [  ]  ) [org.hibernate.hql.internal.ast.ASTQueryTranslatorFactory] (main) HHH000397: Using ASTQueryTranslatorFactory
2018-06-07 16:37:07,189 INFO   (: [  ]  ) [org.hibernate.tool.hbm2ddl.SchemaExport] (main) HHH000227: Running hbm2ddl schema export
Hibernate: drop table if exists test_entity_1
Hibernate: drop table if exists hibernate_sequences
Hibernate: create table test_entity_1 (id bigint not null, intAttribute integer not null, stringAttribute varchar(255), primary key (id))
Hibernate: create table hibernate_sequences ( sequence_name varchar(255),  sequence_next_hi_value integer ) 
2018-06-07 16:37:07,192 INFO   (: [  ]  ) [org.hibernate.tool.hbm2ddl.SchemaExport] (main) HHH000230: Schema export complete
check constructions
2018-06-07 16:37:07,206 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L1 changing  from undefined to REQUIRES_NEW xid: null in TransactionalParentEJB.saveInCurrentTransactionDefaultTraAttribute
Hibernate: select sequence_next_hi_value from hibernate_sequences where sequence_name = 'test_entity_1' for update
Hibernate: insert into hibernate_sequences(sequence_name, sequence_next_hi_value) values('test_entity_1', ?)
Hibernate: update hibernate_sequences set sequence_next_hi_value = ? where sequence_next_hi_value = ? and sequence_name = 'test_entity_1'
2018-06-07 16:37:07,210 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L1 finally   in REQUIRES_NEW xid: 2 in TransactionalParentEJB.saveInCurrentTransactionDefaultTraAttribute
Hibernate: insert into test_entity_1 (intAttribute, stringAttribute, id) values (?, ?, ?)
2018-06-07 16:37:07,216 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L1 done      REQUIRES_NEW back to undefined xid: null in TransactionalParentEJB.saveInCurrentTransactionDefaultTraAttribute
2018-06-07 16:37:07,217 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.persistence.PersistenceFactory] (main) destroying persistence factory testdb
2018-06-07 16:37:07,217 INFO   (: [  ]  ) [org.hibernate.tool.hbm2ddl.SchemaExport] (main) HHH000227: Running hbm2ddl schema export
Hibernate: drop table if exists test_entity_1
Hibernate: drop table if exists hibernate_sequences
2018-06-07 16:37:07,220 INFO   (: [  ]  ) [org.hibernate.tool.hbm2ddl.SchemaExport] (main) HHH000230: Schema export complete
2018-06-07 16:37:07,220 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000030: Cleaning up connection pool [jdbc:h2:mem:test;MODE=MySQL;DB_CLOSE_DELAY=0]
2018-06-07 16:37:07,306 ERROR  (: [  ]  ) [CDI-Unit EJB-ExtensionExtended] (main) Self injection of EJB Type com.oneandone.ejbcdiunit.ejbs.SingletonEJB in field selfejb of Class com.oneandone.ejbcdiunit.ejbs.SingletonEJB can't get simulated by ejb-cdi-unit
2018-06-07 16:37:07,394 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.persistence.PersistenceFactory] (main) creating persistence factory testdb
2018-06-07 16:37:07,443 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000402: Using Hibernate built-in connection pool (not for production use!)
2018-06-07 16:37:07,443 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000115: Hibernate connection pool size: 20
2018-06-07 16:37:07,443 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000006: Autocommit mode: true
2018-06-07 16:37:07,444 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000401: using driver [org.h2.Driver] at URL [jdbc:h2:mem:test;MODE=MySQL;DB_CLOSE_DELAY=0]
2018-06-07 16:37:07,444 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000046: Connection properties: {user=sa, autocommit=true, release_mode=auto}
2018-06-07 16:37:07,450 INFO   (: [  ]  ) [org.hibernate.dialect.Dialect] (main) HHH000400: Using dialect: org.hibernate.dialect.MySQL5Dialect
2018-06-07 16:37:07,453 INFO   (: [  ]  ) [org.hibernate.engine.transaction.internal.TransactionFactoryInitiator] (main) HHH000268: Transaction strategy: org.hibernate.engine.transaction.internal.jdbc.JdbcTransactionFactory
2018-06-07 16:37:07,453 INFO   (: [  ]  ) [org.hibernate.hql.internal.ast.ASTQueryTranslatorFactory] (main) HHH000397: Using ASTQueryTranslatorFactory
2018-06-07 16:37:07,464 INFO   (: [  ]  ) [org.hibernate.tool.hbm2ddl.SchemaExport] (main) HHH000227: Running hbm2ddl schema export
Hibernate: drop table if exists test_entity_1
Hibernate: drop table if exists hibernate_sequences
Hibernate: create table test_entity_1 (id bigint not null, intAttribute integer not null, stringAttribute varchar(255), primary key (id))
Hibernate: create table hibernate_sequences ( sequence_name varchar(255),  sequence_next_hi_value integer ) 
2018-06-07 16:37:07,467 INFO   (: [  ]  ) [org.hibernate.tool.hbm2ddl.SchemaExport] (main) HHH000230: Schema export complete
check constructions
2018-06-07 16:37:07,491 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L1 changing  from undefined to REQUIRED xid: null in StatelessEJB.saveInCurrentTransaction
Hibernate: select sequence_next_hi_value from hibernate_sequences where sequence_name = 'test_entity_1' for update
Hibernate: insert into hibernate_sequences(sequence_name, sequence_next_hi_value) values('test_entity_1', ?)
Hibernate: update hibernate_sequences set sequence_next_hi_value = ? where sequence_next_hi_value = ? and sequence_name = 'test_entity_1'
2018-06-07 16:37:07,494 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L1 finally   in REQUIRED xid: 3 in StatelessEJB.saveInCurrentTransaction
2018-06-07 16:37:07,494 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L1 done      REQUIRED back to undefined xid: 3 in StatelessEJB.saveInCurrentTransaction
Hibernate: insert into test_entity_1 (intAttribute, stringAttribute, id) values (?, ?, ?)
Hibernate: insert into test_entity_1 (intAttribute, stringAttribute, id) values (?, ?, ?)
Hibernate: select count(testentity0_.id) as col_0_0_ from test_entity_1 testentity0_
Hibernate: select count(testentity0_.id) as col_0_0_ from test_entity_1 testentity0_
2018-06-07 16:37:07,659 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.persistence.PersistenceFactory] (main) destroying persistence factory testdb
2018-06-07 16:37:07,660 INFO   (: [  ]  ) [org.hibernate.tool.hbm2ddl.SchemaExport] (main) HHH000227: Running hbm2ddl schema export
Hibernate: drop table if exists test_entity_1
Hibernate: drop table if exists hibernate_sequences
2018-06-07 16:37:07,663 INFO   (: [  ]  ) [org.hibernate.tool.hbm2ddl.SchemaExport] (main) HHH000230: Schema export complete
2018-06-07 16:37:07,663 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000030: Cleaning up connection pool [jdbc:h2:mem:test;MODE=MySQL;DB_CLOSE_DELAY=0]
2018-06-07 16:37:07,727 ERROR  (: [  ]  ) [CDI-Unit EJB-ExtensionExtended] (main) Self injection of EJB Type com.oneandone.ejbcdiunit.ejbs.SingletonEJB in field selfejb of Class com.oneandone.ejbcdiunit.ejbs.SingletonEJB can't get simulated by ejb-cdi-unit
2018-06-07 16:37:07,813 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.persistence.PersistenceFactory] (main) creating persistence factory testdb
2018-06-07 16:37:07,854 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000402: Using Hibernate built-in connection pool (not for production use!)
2018-06-07 16:37:07,854 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000115: Hibernate connection pool size: 20
2018-06-07 16:37:07,854 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000006: Autocommit mode: true
2018-06-07 16:37:07,854 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000401: using driver [org.h2.Driver] at URL [jdbc:h2:mem:test;MODE=MySQL;DB_CLOSE_DELAY=0]
2018-06-07 16:37:07,854 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000046: Connection properties: {user=sa, autocommit=true, release_mode=auto}
2018-06-07 16:37:07,858 INFO   (: [  ]  ) [org.hibernate.dialect.Dialect] (main) HHH000400: Using dialect: org.hibernate.dialect.MySQL5Dialect
2018-06-07 16:37:07,862 INFO   (: [  ]  ) [org.hibernate.engine.transaction.internal.TransactionFactoryInitiator] (main) HHH000268: Transaction strategy: org.hibernate.engine.transaction.internal.jdbc.JdbcTransactionFactory
2018-06-07 16:37:07,862 INFO   (: [  ]  ) [org.hibernate.hql.internal.ast.ASTQueryTranslatorFactory] (main) HHH000397: Using ASTQueryTranslatorFactory
2018-06-07 16:37:07,874 INFO   (: [  ]  ) [org.hibernate.tool.hbm2ddl.SchemaExport] (main) HHH000227: Running hbm2ddl schema export
Hibernate: drop table if exists test_entity_1
Hibernate: drop table if exists hibernate_sequences
Hibernate: create table test_entity_1 (id bigint not null, intAttribute integer not null, stringAttribute varchar(255), primary key (id))
Hibernate: create table hibernate_sequences ( sequence_name varchar(255),  sequence_next_hi_value integer ) 
2018-06-07 16:37:07,875 INFO   (: [  ]  ) [org.hibernate.tool.hbm2ddl.SchemaExport] (main) HHH000230: Schema export complete
check constructions
2018-06-07 16:37:07,882 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L1 changing  from undefined to REQUIRED xid: null in OuterClass.saveNewInRequired
2018-06-07 16:37:07,882 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L2 changing  from REQUIRED to REQUIRES_NEW xid: null in StatelessEJB.saveInNewTransaction
Hibernate: select sequence_next_hi_value from hibernate_sequences where sequence_name = 'test_entity_1' for update
Hibernate: insert into hibernate_sequences(sequence_name, sequence_next_hi_value) values('test_entity_1', ?)
Hibernate: update hibernate_sequences set sequence_next_hi_value = ? where sequence_next_hi_value = ? and sequence_name = 'test_entity_1'
2018-06-07 16:37:07,885 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L2 finally   in REQUIRES_NEW xid: 5 in StatelessEJB.saveInNewTransaction
Hibernate: insert into test_entity_1 (intAttribute, stringAttribute, id) values (?, ?, ?)
2018-06-07 16:37:07,888 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L2 done      REQUIRES_NEW back to REQUIRED xid: 4 in StatelessEJB.saveInNewTransaction
2018-06-07 16:37:07,888 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L1 finally   in REQUIRED xid: 4 in OuterClass.saveNewInRequired
2018-06-07 16:37:07,888 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L1 done      REQUIRED back to undefined xid: 4 in OuterClass.saveNewInRequired
Hibernate: insert into test_entity_1 (intAttribute, stringAttribute, id) values (?, ?, ?)
Hibernate: select count(testentity0_.id) as col_0_0_ from test_entity_1 testentity0_
Hibernate: select count(testentity0_.id) as col_0_0_ from test_entity_1 testentity0_
2018-06-07 16:37:07,895 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.persistence.PersistenceFactory] (main) destroying persistence factory testdb
2018-06-07 16:37:07,895 INFO   (: [  ]  ) [org.hibernate.tool.hbm2ddl.SchemaExport] (main) HHH000227: Running hbm2ddl schema export
Hibernate: drop table if exists test_entity_1
Hibernate: drop table if exists hibernate_sequences
2018-06-07 16:37:07,897 INFO   (: [  ]  ) [org.hibernate.tool.hbm2ddl.SchemaExport] (main) HHH000230: Schema export complete
2018-06-07 16:37:07,897 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000030: Cleaning up connection pool [jdbc:h2:mem:test;MODE=MySQL;DB_CLOSE_DELAY=0]
2018-06-07 16:37:07,942 ERROR  (: [  ]  ) [CDI-Unit EJB-ExtensionExtended] (main) Self injection of EJB Type com.oneandone.ejbcdiunit.ejbs.SingletonEJB in field selfejb of Class com.oneandone.ejbcdiunit.ejbs.SingletonEJB can't get simulated by ejb-cdi-unit
2018-06-07 16:37:08,019 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.persistence.PersistenceFactory] (main) creating persistence factory testdb
2018-06-07 16:37:08,063 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000402: Using Hibernate built-in connection pool (not for production use!)
2018-06-07 16:37:08,064 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000115: Hibernate connection pool size: 20
2018-06-07 16:37:08,064 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000006: Autocommit mode: true
2018-06-07 16:37:08,064 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000401: using driver [org.h2.Driver] at URL [jdbc:h2:mem:test;MODE=MySQL;DB_CLOSE_DELAY=0]
2018-06-07 16:37:08,065 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000046: Connection properties: {user=sa, autocommit=true, release_mode=auto}
2018-06-07 16:37:08,070 INFO   (: [  ]  ) [org.hibernate.dialect.Dialect] (main) HHH000400: Using dialect: org.hibernate.dialect.MySQL5Dialect
2018-06-07 16:37:08,073 INFO   (: [  ]  ) [org.hibernate.engine.transaction.internal.TransactionFactoryInitiator] (main) HHH000268: Transaction strategy: org.hibernate.engine.transaction.internal.jdbc.JdbcTransactionFactory
2018-06-07 16:37:08,074 INFO   (: [  ]  ) [org.hibernate.hql.internal.ast.ASTQueryTranslatorFactory] (main) HHH000397: Using ASTQueryTranslatorFactory
2018-06-07 16:37:08,086 INFO   (: [  ]  ) [org.hibernate.tool.hbm2ddl.SchemaExport] (main) HHH000227: Running hbm2ddl schema export
Hibernate: drop table if exists test_entity_1
Hibernate: drop table if exists hibernate_sequences
Hibernate: create table test_entity_1 (id bigint not null, intAttribute integer not null, stringAttribute varchar(255), primary key (id))
Hibernate: create table hibernate_sequences ( sequence_name varchar(255),  sequence_next_hi_value integer ) 
2018-06-07 16:37:08,091 INFO   (: [  ]  ) [org.hibernate.tool.hbm2ddl.SchemaExport] (main) HHH000230: Schema export complete
check constructions
2018-06-07 16:37:08,100 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L1 changing  from undefined to REQUIRED xid: null in OuterClass.saveNewInRequiredThrowRTException
2018-06-07 16:37:08,100 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L2 changing  from REQUIRED to REQUIRES_NEW xid: null in StatelessEJB.saveInNewTransaction
Hibernate: select sequence_next_hi_value from hibernate_sequences where sequence_name = 'test_entity_1' for update
Hibernate: insert into hibernate_sequences(sequence_name, sequence_next_hi_value) values('test_entity_1', ?)
Hibernate: update hibernate_sequences set sequence_next_hi_value = ? where sequence_next_hi_value = ? and sequence_name = 'test_entity_1'
2018-06-07 16:37:08,104 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L2 finally   in REQUIRES_NEW xid: 7 in StatelessEJB.saveInNewTransaction
Hibernate: insert into test_entity_1 (intAttribute, stringAttribute, id) values (?, ?, ?)
2018-06-07 16:37:08,108 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L2 done      REQUIRES_NEW back to REQUIRED xid: 6 in StatelessEJB.saveInNewTransaction
2018-06-07 16:37:08,109 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L1 Exception RuntimeException in REQUIRED xid: 6 in OuterClass.saveNewInRequiredThrowRTException
2018-06-07 16:37:08,109 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L1 finally   in REQUIRED xid: null in OuterClass.saveNewInRequiredThrowRTException
2018-06-07 16:37:08,109 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L1 done      REQUIRED back to undefined xid: null in OuterClass.saveNewInRequiredThrowRTException
Hibernate: insert into test_entity_1 (intAttribute, stringAttribute, id) values (?, ?, ?)
Hibernate: select count(testentity0_.id) as col_0_0_ from test_entity_1 testentity0_
Hibernate: select count(testentity0_.id) as col_0_0_ from test_entity_1 testentity0_
2018-06-07 16:37:08,117 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.persistence.PersistenceFactory] (main) destroying persistence factory testdb
2018-06-07 16:37:08,118 INFO   (: [  ]  ) [org.hibernate.tool.hbm2ddl.SchemaExport] (main) HHH000227: Running hbm2ddl schema export
Hibernate: drop table if exists test_entity_1
Hibernate: drop table if exists hibernate_sequences
2018-06-07 16:37:08,121 INFO   (: [  ]  ) [org.hibernate.tool.hbm2ddl.SchemaExport] (main) HHH000230: Schema export complete
2018-06-07 16:37:08,121 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000030: Cleaning up connection pool [jdbc:h2:mem:test;MODE=MySQL;DB_CLOSE_DELAY=0]
2018-06-07 16:37:08,167 ERROR  (: [  ]  ) [CDI-Unit EJB-ExtensionExtended] (main) Self injection of EJB Type com.oneandone.ejbcdiunit.ejbs.SingletonEJB in field selfejb of Class com.oneandone.ejbcdiunit.ejbs.SingletonEJB can't get simulated by ejb-cdi-unit
2018-06-07 16:37:08,266 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.persistence.PersistenceFactory] (main) creating persistence factory testdb
2018-06-07 16:37:08,310 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000402: Using Hibernate built-in connection pool (not for production use!)
2018-06-07 16:37:08,311 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000115: Hibernate connection pool size: 20
2018-06-07 16:37:08,311 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000006: Autocommit mode: true
2018-06-07 16:37:08,311 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000401: using driver [org.h2.Driver] at URL [jdbc:h2:mem:test;MODE=MySQL;DB_CLOSE_DELAY=0]
2018-06-07 16:37:08,311 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000046: Connection properties: {user=sa, autocommit=true, release_mode=auto}
2018-06-07 16:37:08,317 INFO   (: [  ]  ) [org.hibernate.dialect.Dialect] (main) HHH000400: Using dialect: org.hibernate.dialect.MySQL5Dialect
2018-06-07 16:37:08,320 INFO   (: [  ]  ) [org.hibernate.engine.transaction.internal.TransactionFactoryInitiator] (main) HHH000268: Transaction strategy: org.hibernate.engine.transaction.internal.jdbc.JdbcTransactionFactory
2018-06-07 16:37:08,320 INFO   (: [  ]  ) [org.hibernate.hql.internal.ast.ASTQueryTranslatorFactory] (main) HHH000397: Using ASTQueryTranslatorFactory
2018-06-07 16:37:08,337 INFO   (: [  ]  ) [org.hibernate.tool.hbm2ddl.SchemaExport] (main) HHH000227: Running hbm2ddl schema export
Hibernate: drop table if exists test_entity_1
Hibernate: drop table if exists hibernate_sequences
Hibernate: create table test_entity_1 (id bigint not null, intAttribute integer not null, stringAttribute varchar(255), primary key (id))
Hibernate: create table hibernate_sequences ( sequence_name varchar(255),  sequence_next_hi_value integer ) 
2018-06-07 16:37:08,340 INFO   (: [  ]  ) [org.hibernate.tool.hbm2ddl.SchemaExport] (main) HHH000230: Schema export complete
check constructions
2018-06-07 16:37:08,352 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L1 changing  from undefined to REQUIRES_NEW xid: null in StatelessEJB.saveInNewTransaction
Hibernate: select sequence_next_hi_value from hibernate_sequences where sequence_name = 'test_entity_1' for update
Hibernate: insert into hibernate_sequences(sequence_name, sequence_next_hi_value) values('test_entity_1', ?)
Hibernate: update hibernate_sequences set sequence_next_hi_value = ? where sequence_next_hi_value = ? and sequence_name = 'test_entity_1'
2018-06-07 16:37:08,355 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L1 finally   in REQUIRES_NEW xid: 10 in StatelessEJB.saveInNewTransaction
Hibernate: insert into test_entity_1 (intAttribute, stringAttribute, id) values (?, ?, ?)
2018-06-07 16:37:08,360 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L1 done      REQUIRES_NEW back to undefined xid: 9 in StatelessEJB.saveInNewTransaction
Hibernate: insert into test_entity_1 (intAttribute, stringAttribute, id) values (?, ?, ?)
Hibernate: select count(testentity0_.id) as col_0_0_ from test_entity_1 testentity0_
Hibernate: select count(testentity0_.id) as col_0_0_ from test_entity_1 testentity0_
2018-06-07 16:37:08,370 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.persistence.PersistenceFactory] (main) destroying persistence factory testdb
2018-06-07 16:37:08,370 INFO   (: [  ]  ) [org.hibernate.tool.hbm2ddl.SchemaExport] (main) HHH000227: Running hbm2ddl schema export
Hibernate: drop table if exists test_entity_1
Hibernate: drop table if exists hibernate_sequences
2018-06-07 16:37:08,372 INFO   (: [  ]  ) [org.hibernate.tool.hbm2ddl.SchemaExport] (main) HHH000230: Schema export complete
2018-06-07 16:37:08,372 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000030: Cleaning up connection pool [jdbc:h2:mem:test;MODE=MySQL;DB_CLOSE_DELAY=0]
2018-06-07 16:37:08,428 ERROR  (: [  ]  ) [CDI-Unit EJB-ExtensionExtended] (main) Self injection of EJB Type com.oneandone.ejbcdiunit.ejbs.SingletonEJB in field selfejb of Class com.oneandone.ejbcdiunit.ejbs.SingletonEJB can't get simulated by ejb-cdi-unit
2018-06-07 16:37:08,531 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.persistence.PersistenceFactory] (main) creating persistence factory testdb
2018-06-07 16:37:08,591 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000402: Using Hibernate built-in connection pool (not for production use!)
2018-06-07 16:37:08,591 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000115: Hibernate connection pool size: 20
2018-06-07 16:37:08,591 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000006: Autocommit mode: true
2018-06-07 16:37:08,592 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000401: using driver [org.h2.Driver] at URL [jdbc:h2:mem:test;MODE=MySQL;DB_CLOSE_DELAY=0]
2018-06-07 16:37:08,592 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000046: Connection properties: {user=sa, autocommit=true, release_mode=auto}
2018-06-07 16:37:08,596 INFO   (: [  ]  ) [org.hibernate.dialect.Dialect] (main) HHH000400: Using dialect: org.hibernate.dialect.MySQL5Dialect
2018-06-07 16:37:08,598 INFO   (: [  ]  ) [org.hibernate.engine.transaction.internal.TransactionFactoryInitiator] (main) HHH000268: Transaction strategy: org.hibernate.engine.transaction.internal.jdbc.JdbcTransactionFactory
2018-06-07 16:37:08,599 INFO   (: [  ]  ) [org.hibernate.hql.internal.ast.ASTQueryTranslatorFactory] (main) HHH000397: Using ASTQueryTranslatorFactory
2018-06-07 16:37:08,611 INFO   (: [  ]  ) [org.hibernate.tool.hbm2ddl.SchemaExport] (main) HHH000227: Running hbm2ddl schema export
Hibernate: drop table if exists test_entity_1
Hibernate: drop table if exists hibernate_sequences
Hibernate: create table test_entity_1 (id bigint not null, intAttribute integer not null, stringAttribute varchar(255), primary key (id))
Hibernate: create table hibernate_sequences ( sequence_name varchar(255),  sequence_next_hi_value integer ) 
2018-06-07 16:37:08,613 INFO   (: [  ]  ) [org.hibernate.tool.hbm2ddl.SchemaExport] (main) HHH000230: Schema export complete
check constructions
2018-06-07 16:37:08,622 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L1 changing  from undefined to REQUIRED xid: null in OuterClass.saveRequiredInRequired
2018-06-07 16:37:08,622 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L2 changing  from REQUIRED to REQUIRED xid: null in StatelessEJB.saveInCurrentTransaction
Hibernate: select sequence_next_hi_value from hibernate_sequences where sequence_name = 'test_entity_1' for update
Hibernate: insert into hibernate_sequences(sequence_name, sequence_next_hi_value) values('test_entity_1', ?)
Hibernate: update hibernate_sequences set sequence_next_hi_value = ? where sequence_next_hi_value = ? and sequence_name = 'test_entity_1'
2018-06-07 16:37:08,625 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L2 finally   in REQUIRED xid: 11 in StatelessEJB.saveInCurrentTransaction
2018-06-07 16:37:08,625 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L2 done      REQUIRED back to REQUIRED xid: 11 in StatelessEJB.saveInCurrentTransaction
2018-06-07 16:37:08,625 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L1 finally   in REQUIRED xid: 11 in OuterClass.saveRequiredInRequired
2018-06-07 16:37:08,625 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L1 done      REQUIRED back to undefined xid: 11 in OuterClass.saveRequiredInRequired
Hibernate: insert into test_entity_1 (intAttribute, stringAttribute, id) values (?, ?, ?)
Hibernate: insert into test_entity_1 (intAttribute, stringAttribute, id) values (?, ?, ?)
Hibernate: select count(testentity0_.id) as col_0_0_ from test_entity_1 testentity0_
Hibernate: select count(testentity0_.id) as col_0_0_ from test_entity_1 testentity0_
2018-06-07 16:37:08,636 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.persistence.PersistenceFactory] (main) destroying persistence factory testdb
2018-06-07 16:37:08,636 INFO   (: [  ]  ) [org.hibernate.tool.hbm2ddl.SchemaExport] (main) HHH000227: Running hbm2ddl schema export
Hibernate: drop table if exists test_entity_1
Hibernate: drop table if exists hibernate_sequences
2018-06-07 16:37:08,639 INFO   (: [  ]  ) [org.hibernate.tool.hbm2ddl.SchemaExport] (main) HHH000230: Schema export complete
2018-06-07 16:37:08,639 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000030: Cleaning up connection pool [jdbc:h2:mem:test;MODE=MySQL;DB_CLOSE_DELAY=0]
2018-06-07 16:37:08,729 ERROR  (: [  ]  ) [CDI-Unit EJB-ExtensionExtended] (main) Self injection of EJB Type com.oneandone.ejbcdiunit.ejbs.SingletonEJB in field selfejb of Class com.oneandone.ejbcdiunit.ejbs.SingletonEJB can't get simulated by ejb-cdi-unit
2018-06-07 16:37:08,805 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.persistence.PersistenceFactory] (main) creating persistence factory testdb
2018-06-07 16:37:08,838 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000402: Using Hibernate built-in connection pool (not for production use!)
2018-06-07 16:37:08,839 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000115: Hibernate connection pool size: 20
2018-06-07 16:37:08,839 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000006: Autocommit mode: true
2018-06-07 16:37:08,839 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000401: using driver [org.h2.Driver] at URL [jdbc:h2:mem:test;MODE=MySQL;DB_CLOSE_DELAY=0]
2018-06-07 16:37:08,839 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000046: Connection properties: {user=sa, autocommit=true, release_mode=auto}
2018-06-07 16:37:08,845 INFO   (: [  ]  ) [org.hibernate.dialect.Dialect] (main) HHH000400: Using dialect: org.hibernate.dialect.MySQL5Dialect
2018-06-07 16:37:08,847 INFO   (: [  ]  ) [org.hibernate.engine.transaction.internal.TransactionFactoryInitiator] (main) HHH000268: Transaction strategy: org.hibernate.engine.transaction.internal.jdbc.JdbcTransactionFactory
2018-06-07 16:37:08,848 INFO   (: [  ]  ) [org.hibernate.hql.internal.ast.ASTQueryTranslatorFactory] (main) HHH000397: Using ASTQueryTranslatorFactory
2018-06-07 16:37:08,859 INFO   (: [  ]  ) [org.hibernate.tool.hbm2ddl.SchemaExport] (main) HHH000227: Running hbm2ddl schema export
Hibernate: drop table if exists test_entity_1
Hibernate: drop table if exists hibernate_sequences
Hibernate: create table test_entity_1 (id bigint not null, intAttribute integer not null, stringAttribute varchar(255), primary key (id))
Hibernate: create table hibernate_sequences ( sequence_name varchar(255),  sequence_next_hi_value integer ) 
2018-06-07 16:37:08,861 INFO   (: [  ]  ) [org.hibernate.tool.hbm2ddl.SchemaExport] (main) HHH000230: Schema export complete
check constructions
2018-06-07 16:37:08,869 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L1 changing  from undefined to NOT_SUPPORTED xid: null in StatelessBeanManagedTrasEJB.insertWithoutTra
2018-06-07 16:37:08,869 INFO   (: [  ]  ) [ejb-cdi-unit tests] (main) output public variable 200
2018-06-07 16:37:08,869 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L1 Exception TransactionRequiredException in NOT_SUPPORTED xid: null in StatelessBeanManagedTrasEJB.insertWithoutTra
2018-06-07 16:37:08,869 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L1 finally   in NOT_SUPPORTED xid: null in StatelessBeanManagedTrasEJB.insertWithoutTra
2018-06-07 16:37:08,870 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L1 done      NOT_SUPPORTED back to undefined xid: null in StatelessBeanManagedTrasEJB.insertWithoutTra
2018-06-07 16:37:08,871 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.persistence.PersistenceFactory] (main) destroying persistence factory testdb
2018-06-07 16:37:08,871 INFO   (: [  ]  ) [org.hibernate.tool.hbm2ddl.SchemaExport] (main) HHH000227: Running hbm2ddl schema export
Hibernate: drop table if exists test_entity_1
Hibernate: drop table if exists hibernate_sequences
2018-06-07 16:37:08,873 INFO   (: [  ]  ) [org.hibernate.tool.hbm2ddl.SchemaExport] (main) HHH000230: Schema export complete
2018-06-07 16:37:08,873 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000030: Cleaning up connection pool [jdbc:h2:mem:test;MODE=MySQL;DB_CLOSE_DELAY=0]
2018-06-07 16:37:08,919 ERROR  (: [  ]  ) [CDI-Unit EJB-ExtensionExtended] (main) Self injection of EJB Type com.oneandone.ejbcdiunit.ejbs.SingletonEJB in field selfejb of Class com.oneandone.ejbcdiunit.ejbs.SingletonEJB can't get simulated by ejb-cdi-unit
2018-06-07 16:37:08,984 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.persistence.PersistenceFactory] (main) creating persistence factory testdb
2018-06-07 16:37:09,020 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000402: Using Hibernate built-in connection pool (not for production use!)
2018-06-07 16:37:09,020 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000115: Hibernate connection pool size: 20
2018-06-07 16:37:09,020 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000006: Autocommit mode: true
2018-06-07 16:37:09,021 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000401: using driver [org.h2.Driver] at URL [jdbc:h2:mem:test;MODE=MySQL;DB_CLOSE_DELAY=0]
2018-06-07 16:37:09,021 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000046: Connection properties: {user=sa, autocommit=true, release_mode=auto}
2018-06-07 16:37:09,026 INFO   (: [  ]  ) [org.hibernate.dialect.Dialect] (main) HHH000400: Using dialect: org.hibernate.dialect.MySQL5Dialect
2018-06-07 16:37:09,029 INFO   (: [  ]  ) [org.hibernate.engine.transaction.internal.TransactionFactoryInitiator] (main) HHH000268: Transaction strategy: org.hibernate.engine.transaction.internal.jdbc.JdbcTransactionFactory
2018-06-07 16:37:09,029 INFO   (: [  ]  ) [org.hibernate.hql.internal.ast.ASTQueryTranslatorFactory] (main) HHH000397: Using ASTQueryTranslatorFactory
2018-06-07 16:37:09,042 INFO   (: [  ]  ) [org.hibernate.tool.hbm2ddl.SchemaExport] (main) HHH000227: Running hbm2ddl schema export
Hibernate: drop table if exists test_entity_1
Hibernate: drop table if exists hibernate_sequences
Hibernate: create table test_entity_1 (id bigint not null, intAttribute integer not null, stringAttribute varchar(255), primary key (id))
Hibernate: create table hibernate_sequences ( sequence_name varchar(255),  sequence_next_hi_value integer ) 
2018-06-07 16:37:09,044 INFO   (: [  ]  ) [org.hibernate.tool.hbm2ddl.SchemaExport] (main) HHH000230: Schema export complete
check constructions
2018-06-07 16:37:09,053 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L1 changing  from undefined to REQUIRES_NEW xid: null in OuterClass.saveRequiredPlusNewInNewTraButDirectCallAndThrow
2018-06-07 16:37:09,054 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L2 changing  from REQUIRES_NEW to REQUIRED xid: null in StatelessEJB.saveInCurrentTransactionAndSaveNewInNewButDirectCall
Hibernate: select sequence_next_hi_value from hibernate_sequences where sequence_name = 'test_entity_1' for update
Hibernate: insert into hibernate_sequences(sequence_name, sequence_next_hi_value) values('test_entity_1', ?)
Hibernate: update hibernate_sequences set sequence_next_hi_value = ? where sequence_next_hi_value = ? and sequence_name = 'test_entity_1'
2018-06-07 16:37:09,058 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L2 finally   in REQUIRED xid: 13 in StatelessEJB.saveInCurrentTransactionAndSaveNewInNewButDirectCall
2018-06-07 16:37:09,058 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L2 done      REQUIRED back to REQUIRES_NEW xid: 13 in StatelessEJB.saveInCurrentTransactionAndSaveNewInNewButDirectCall
2018-06-07 16:37:09,058 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L1 Exception RuntimeException in REQUIRES_NEW xid: 13 in OuterClass.saveRequiredPlusNewInNewTraButDirectCallAndThrow
2018-06-07 16:37:09,059 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L1 finally   in REQUIRES_NEW xid: 12 in OuterClass.saveRequiredPlusNewInNewTraButDirectCallAndThrow
2018-06-07 16:37:09,059 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L1 done      REQUIRES_NEW back to undefined xid: null in OuterClass.saveRequiredPlusNewInNewTraButDirectCallAndThrow
Hibernate: insert into test_entity_1 (intAttribute, stringAttribute, id) values (?, ?, ?)
Hibernate: select count(testentity0_.id) as col_0_0_ from test_entity_1 testentity0_
Hibernate: select count(testentity0_.id) as col_0_0_ from test_entity_1 testentity0_
2018-06-07 16:37:09,070 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.persistence.PersistenceFactory] (main) destroying persistence factory testdb
2018-06-07 16:37:09,070 INFO   (: [  ]  ) [org.hibernate.tool.hbm2ddl.SchemaExport] (main) HHH000227: Running hbm2ddl schema export
Hibernate: drop table if exists test_entity_1
Hibernate: drop table if exists hibernate_sequences
2018-06-07 16:37:09,072 INFO   (: [  ]  ) [org.hibernate.tool.hbm2ddl.SchemaExport] (main) HHH000230: Schema export complete
2018-06-07 16:37:09,073 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000030: Cleaning up connection pool [jdbc:h2:mem:test;MODE=MySQL;DB_CLOSE_DELAY=0]
2018-06-07 16:37:09,118 ERROR  (: [  ]  ) [CDI-Unit EJB-ExtensionExtended] (main) Self injection of EJB Type com.oneandone.ejbcdiunit.ejbs.SingletonEJB in field selfejb of Class com.oneandone.ejbcdiunit.ejbs.SingletonEJB can't get simulated by ejb-cdi-unit
2018-06-07 16:37:09,181 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.persistence.PersistenceFactory] (main) creating persistence factory testdb
2018-06-07 16:37:09,217 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000402: Using Hibernate built-in connection pool (not for production use!)
2018-06-07 16:37:09,217 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000115: Hibernate connection pool size: 20
2018-06-07 16:37:09,217 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000006: Autocommit mode: true
2018-06-07 16:37:09,218 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000401: using driver [org.h2.Driver] at URL [jdbc:h2:mem:test;MODE=MySQL;DB_CLOSE_DELAY=0]
2018-06-07 16:37:09,218 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000046: Connection properties: {user=sa, autocommit=true, release_mode=auto}
2018-06-07 16:37:09,222 INFO   (: [  ]  ) [org.hibernate.dialect.Dialect] (main) HHH000400: Using dialect: org.hibernate.dialect.MySQL5Dialect
2018-06-07 16:37:09,225 INFO   (: [  ]  ) [org.hibernate.engine.transaction.internal.TransactionFactoryInitiator] (main) HHH000268: Transaction strategy: org.hibernate.engine.transaction.internal.jdbc.JdbcTransactionFactory
2018-06-07 16:37:09,226 INFO   (: [  ]  ) [org.hibernate.hql.internal.ast.ASTQueryTranslatorFactory] (main) HHH000397: Using ASTQueryTranslatorFactory
2018-06-07 16:37:09,239 INFO   (: [  ]  ) [org.hibernate.tool.hbm2ddl.SchemaExport] (main) HHH000227: Running hbm2ddl schema export
Hibernate: drop table if exists test_entity_1
Hibernate: drop table if exists hibernate_sequences
Hibernate: create table test_entity_1 (id bigint not null, intAttribute integer not null, stringAttribute varchar(255), primary key (id))
Hibernate: create table hibernate_sequences ( sequence_name varchar(255),  sequence_next_hi_value integer ) 
2018-06-07 16:37:09,241 INFO   (: [  ]  ) [org.hibernate.tool.hbm2ddl.SchemaExport] (main) HHH000230: Schema export complete
check constructions
2018-06-07 16:37:09,250 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L1 changing  from undefined to REQUIRED xid: null in OuterClass.saveRequiredInRequiredThrowException
2018-06-07 16:37:09,250 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L2 changing  from REQUIRED to REQUIRED xid: null in StatelessEJB.saveInCurrentTransaction
Hibernate: select sequence_next_hi_value from hibernate_sequences where sequence_name = 'test_entity_1' for update
Hibernate: insert into hibernate_sequences(sequence_name, sequence_next_hi_value) values('test_entity_1', ?)
Hibernate: update hibernate_sequences set sequence_next_hi_value = ? where sequence_next_hi_value = ? and sequence_name = 'test_entity_1'
2018-06-07 16:37:09,253 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L2 finally   in REQUIRED xid: 14 in StatelessEJB.saveInCurrentTransaction
2018-06-07 16:37:09,253 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L2 done      REQUIRED back to REQUIRED xid: 14 in StatelessEJB.saveInCurrentTransaction
2018-06-07 16:37:09,253 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L1 Exception RuntimeException in REQUIRED xid: 14 in OuterClass.saveRequiredInRequiredThrowException
2018-06-07 16:37:09,254 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L1 finally   in REQUIRED xid: null in OuterClass.saveRequiredInRequiredThrowException
2018-06-07 16:37:09,254 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L1 done      REQUIRED back to undefined xid: null in OuterClass.saveRequiredInRequiredThrowException
Hibernate: insert into test_entity_1 (intAttribute, stringAttribute, id) values (?, ?, ?)
Hibernate: select count(testentity0_.id) as col_0_0_ from test_entity_1 testentity0_
Hibernate: select count(testentity0_.id) as col_0_0_ from test_entity_1 testentity0_
2018-06-07 16:37:09,264 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.persistence.PersistenceFactory] (main) destroying persistence factory testdb
2018-06-07 16:37:09,265 INFO   (: [  ]  ) [org.hibernate.tool.hbm2ddl.SchemaExport] (main) HHH000227: Running hbm2ddl schema export
Hibernate: drop table if exists test_entity_1
Hibernate: drop table if exists hibernate_sequences
2018-06-07 16:37:09,267 INFO   (: [  ]  ) [org.hibernate.tool.hbm2ddl.SchemaExport] (main) HHH000230: Schema export complete
2018-06-07 16:37:09,267 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000030: Cleaning up connection pool [jdbc:h2:mem:test;MODE=MySQL;DB_CLOSE_DELAY=0]
2018-06-07 16:37:09,316 ERROR  (: [  ]  ) [CDI-Unit EJB-ExtensionExtended] (main) Self injection of EJB Type com.oneandone.ejbcdiunit.ejbs.SingletonEJB in field selfejb of Class com.oneandone.ejbcdiunit.ejbs.SingletonEJB can't get simulated by ejb-cdi-unit
2018-06-07 16:37:09,385 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.persistence.PersistenceFactory] (main) creating persistence factory testdb
2018-06-07 16:37:09,422 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000402: Using Hibernate built-in connection pool (not for production use!)
2018-06-07 16:37:09,422 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000115: Hibernate connection pool size: 20
2018-06-07 16:37:09,422 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000006: Autocommit mode: true
2018-06-07 16:37:09,423 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000401: using driver [org.h2.Driver] at URL [jdbc:h2:mem:test;MODE=MySQL;DB_CLOSE_DELAY=0]
2018-06-07 16:37:09,423 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000046: Connection properties: {user=sa, autocommit=true, release_mode=auto}
2018-06-07 16:37:09,428 INFO   (: [  ]  ) [org.hibernate.dialect.Dialect] (main) HHH000400: Using dialect: org.hibernate.dialect.MySQL5Dialect
2018-06-07 16:37:09,430 INFO   (: [  ]  ) [org.hibernate.engine.transaction.internal.TransactionFactoryInitiator] (main) HHH000268: Transaction strategy: org.hibernate.engine.transaction.internal.jdbc.JdbcTransactionFactory
2018-06-07 16:37:09,431 INFO   (: [  ]  ) [org.hibernate.hql.internal.ast.ASTQueryTranslatorFactory] (main) HHH000397: Using ASTQueryTranslatorFactory
2018-06-07 16:37:09,443 INFO   (: [  ]  ) [org.hibernate.tool.hbm2ddl.SchemaExport] (main) HHH000227: Running hbm2ddl schema export
Hibernate: drop table if exists test_entity_1
Hibernate: drop table if exists hibernate_sequences
Hibernate: create table test_entity_1 (id bigint not null, intAttribute integer not null, stringAttribute varchar(255), primary key (id))
Hibernate: create table hibernate_sequences ( sequence_name varchar(255),  sequence_next_hi_value integer ) 
2018-06-07 16:37:09,446 INFO   (: [  ]  ) [org.hibernate.tool.hbm2ddl.SchemaExport] (main) HHH000230: Schema export complete
check constructions
2018-06-07 16:37:09,454 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L1 changing  from undefined to REQUIRES_NEW xid: null in OuterClass.saveRequiresNewLocalUsingSelfAndThrow
2018-06-07 16:37:09,454 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L2 changing  from REQUIRES_NEW to REQUIRED xid: null in SingletonEJB.saveRequiresNewLocalUsingSelf
Hibernate: select sequence_next_hi_value from hibernate_sequences where sequence_name = 'test_entity_1' for update
Hibernate: insert into hibernate_sequences(sequence_name, sequence_next_hi_value) values('test_entity_1', ?)
Hibernate: update hibernate_sequences set sequence_next_hi_value = ? where sequence_next_hi_value = ? and sequence_name = 'test_entity_1'
2018-06-07 16:37:09,458 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L3 changing  from REQUIRED to REQUIRES_NEW xid: 17 in SingletonEJB.saveInNewTransaction
2018-06-07 16:37:09,459 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L3 finally   in REQUIRES_NEW xid: 18 in SingletonEJB.saveInNewTransaction
Hibernate: insert into test_entity_1 (intAttribute, stringAttribute, id) values (?, ?, ?)
2018-06-07 16:37:09,462 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L3 done      REQUIRES_NEW back to REQUIRED xid: 17 in SingletonEJB.saveInNewTransaction
2018-06-07 16:37:09,462 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L2 finally   in REQUIRED xid: 17 in SingletonEJB.saveRequiresNewLocalUsingSelf
2018-06-07 16:37:09,463 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L2 done      REQUIRED back to REQUIRES_NEW xid: 17 in SingletonEJB.saveRequiresNewLocalUsingSelf
2018-06-07 16:37:09,463 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L1 Exception RuntimeException in REQUIRES_NEW xid: 17 in OuterClass.saveRequiresNewLocalUsingSelfAndThrow
2018-06-07 16:37:09,463 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L1 finally   in REQUIRES_NEW xid: 16 in OuterClass.saveRequiresNewLocalUsingSelfAndThrow
2018-06-07 16:37:09,464 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L1 done      REQUIRES_NEW back to undefined xid: null in OuterClass.saveRequiresNewLocalUsingSelfAndThrow
Hibernate: insert into test_entity_1 (intAttribute, stringAttribute, id) values (?, ?, ?)
Hibernate: select count(testentity0_.id) as col_0_0_ from test_entity_1 testentity0_
Hibernate: select count(testentity0_.id) as col_0_0_ from test_entity_1 testentity0_
2018-06-07 16:37:09,472 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.persistence.PersistenceFactory] (main) destroying persistence factory testdb
2018-06-07 16:37:09,472 INFO   (: [  ]  ) [org.hibernate.tool.hbm2ddl.SchemaExport] (main) HHH000227: Running hbm2ddl schema export
Hibernate: drop table if exists test_entity_1
Hibernate: drop table if exists hibernate_sequences
2018-06-07 16:37:09,475 INFO   (: [  ]  ) [org.hibernate.tool.hbm2ddl.SchemaExport] (main) HHH000230: Schema export complete
2018-06-07 16:37:09,475 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000030: Cleaning up connection pool [jdbc:h2:mem:test;MODE=MySQL;DB_CLOSE_DELAY=0]
2018-06-07 16:37:09,521 ERROR  (: [  ]  ) [CDI-Unit EJB-ExtensionExtended] (main) Self injection of EJB Type com.oneandone.ejbcdiunit.ejbs.SingletonEJB in field selfejb of Class com.oneandone.ejbcdiunit.ejbs.SingletonEJB can't get simulated by ejb-cdi-unit
2018-06-07 16:37:09,579 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.persistence.PersistenceFactory] (main) creating persistence factory testdb
2018-06-07 16:37:09,608 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000402: Using Hibernate built-in connection pool (not for production use!)
2018-06-07 16:37:09,608 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000115: Hibernate connection pool size: 20
2018-06-07 16:37:09,609 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000006: Autocommit mode: true
2018-06-07 16:37:09,609 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000401: using driver [org.h2.Driver] at URL [jdbc:h2:mem:test;MODE=MySQL;DB_CLOSE_DELAY=0]
2018-06-07 16:37:09,609 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000046: Connection properties: {user=sa, autocommit=true, release_mode=auto}
2018-06-07 16:37:09,613 INFO   (: [  ]  ) [org.hibernate.dialect.Dialect] (main) HHH000400: Using dialect: org.hibernate.dialect.MySQL5Dialect
2018-06-07 16:37:09,616 INFO   (: [  ]  ) [org.hibernate.engine.transaction.internal.TransactionFactoryInitiator] (main) HHH000268: Transaction strategy: org.hibernate.engine.transaction.internal.jdbc.JdbcTransactionFactory
2018-06-07 16:37:09,617 INFO   (: [  ]  ) [org.hibernate.hql.internal.ast.ASTQueryTranslatorFactory] (main) HHH000397: Using ASTQueryTranslatorFactory
2018-06-07 16:37:09,630 INFO   (: [  ]  ) [org.hibernate.tool.hbm2ddl.SchemaExport] (main) HHH000227: Running hbm2ddl schema export
Hibernate: drop table if exists test_entity_1
Hibernate: drop table if exists hibernate_sequences
Hibernate: create table test_entity_1 (id bigint not null, intAttribute integer not null, stringAttribute varchar(255), primary key (id))
Hibernate: create table hibernate_sequences ( sequence_name varchar(255),  sequence_next_hi_value integer ) 
2018-06-07 16:37:09,633 INFO   (: [  ]  ) [org.hibernate.tool.hbm2ddl.SchemaExport] (main) HHH000230: Schema export complete
check constructions
2018-06-07 16:37:09,641 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L1 changing  from undefined to REQUIRED xid: null in TransactionalParentEJB.saveInCurrentTransactionRequiredTraAttribute
Hibernate: select sequence_next_hi_value from hibernate_sequences where sequence_name = 'test_entity_1' for update
Hibernate: insert into hibernate_sequences(sequence_name, sequence_next_hi_value) values('test_entity_1', ?)
Hibernate: update hibernate_sequences set sequence_next_hi_value = ? where sequence_next_hi_value = ? and sequence_name = 'test_entity_1'
2018-06-07 16:37:09,643 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L1 finally   in REQUIRED xid: 19 in TransactionalParentEJB.saveInCurrentTransactionRequiredTraAttribute
2018-06-07 16:37:09,643 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L1 done      REQUIRED back to undefined xid: 19 in TransactionalParentEJB.saveInCurrentTransactionRequiredTraAttribute
Hibernate: insert into test_entity_1 (intAttribute, stringAttribute, id) values (?, ?, ?)
2018-06-07 16:37:09,648 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.persistence.PersistenceFactory] (main) destroying persistence factory testdb
2018-06-07 16:37:09,648 INFO   (: [  ]  ) [org.hibernate.tool.hbm2ddl.SchemaExport] (main) HHH000227: Running hbm2ddl schema export
Hibernate: drop table if exists test_entity_1
Hibernate: drop table if exists hibernate_sequences
2018-06-07 16:37:09,650 INFO   (: [  ]  ) [org.hibernate.tool.hbm2ddl.SchemaExport] (main) HHH000230: Schema export complete
2018-06-07 16:37:09,651 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000030: Cleaning up connection pool [jdbc:h2:mem:test;MODE=MySQL;DB_CLOSE_DELAY=0]
2018-06-07 16:37:09,698 ERROR  (: [  ]  ) [CDI-Unit EJB-ExtensionExtended] (main) Self injection of EJB Type com.oneandone.ejbcdiunit.ejbs.SingletonEJB in field selfejb of Class com.oneandone.ejbcdiunit.ejbs.SingletonEJB can't get simulated by ejb-cdi-unit
2018-06-07 16:37:09,755 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.persistence.PersistenceFactory] (main) creating persistence factory testdb
2018-06-07 16:37:09,789 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000402: Using Hibernate built-in connection pool (not for production use!)
2018-06-07 16:37:09,789 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000115: Hibernate connection pool size: 20
2018-06-07 16:37:09,790 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000006: Autocommit mode: true
2018-06-07 16:37:09,790 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000401: using driver [org.h2.Driver] at URL [jdbc:h2:mem:test;MODE=MySQL;DB_CLOSE_DELAY=0]
2018-06-07 16:37:09,790 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000046: Connection properties: {user=sa, autocommit=true, release_mode=auto}
2018-06-07 16:37:09,793 INFO   (: [  ]  ) [org.hibernate.dialect.Dialect] (main) HHH000400: Using dialect: org.hibernate.dialect.MySQL5Dialect
2018-06-07 16:37:09,796 INFO   (: [  ]  ) [org.hibernate.engine.transaction.internal.TransactionFactoryInitiator] (main) HHH000268: Transaction strategy: org.hibernate.engine.transaction.internal.jdbc.JdbcTransactionFactory
2018-06-07 16:37:09,796 INFO   (: [  ]  ) [org.hibernate.hql.internal.ast.ASTQueryTranslatorFactory] (main) HHH000397: Using ASTQueryTranslatorFactory
2018-06-07 16:37:09,807 INFO   (: [  ]  ) [org.hibernate.tool.hbm2ddl.SchemaExport] (main) HHH000227: Running hbm2ddl schema export
Hibernate: drop table if exists test_entity_1
Hibernate: drop table if exists hibernate_sequences
Hibernate: create table test_entity_1 (id bigint not null, intAttribute integer not null, stringAttribute varchar(255), primary key (id))
Hibernate: create table hibernate_sequences ( sequence_name varchar(255),  sequence_next_hi_value integer ) 
2018-06-07 16:37:09,811 INFO   (: [  ]  ) [org.hibernate.tool.hbm2ddl.SchemaExport] (main) HHH000230: Schema export complete
check constructions
2018-06-07 16:37:09,818 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.persistence.PersistenceFactory] (main) destroying persistence factory testdb
2018-06-07 16:37:09,819 INFO   (: [  ]  ) [org.hibernate.tool.hbm2ddl.SchemaExport] (main) HHH000227: Running hbm2ddl schema export
Hibernate: drop table if exists test_entity_1
Hibernate: drop table if exists hibernate_sequences
2018-06-07 16:37:09,820 INFO   (: [  ]  ) [org.hibernate.tool.hbm2ddl.SchemaExport] (main) HHH000230: Schema export complete
2018-06-07 16:37:09,821 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000030: Cleaning up connection pool [jdbc:h2:mem:test;MODE=MySQL;DB_CLOSE_DELAY=0]
2018-06-07 16:37:09,877 ERROR  (: [  ]  ) [CDI-Unit EJB-ExtensionExtended] (main) Self injection of EJB Type com.oneandone.ejbcdiunit.ejbs.SingletonEJB in field selfejb of Class com.oneandone.ejbcdiunit.ejbs.SingletonEJB can't get simulated by ejb-cdi-unit
2018-06-07 16:37:09,973 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.persistence.PersistenceFactory] (main) creating persistence factory testdb
2018-06-07 16:37:10,002 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000402: Using Hibernate built-in connection pool (not for production use!)
2018-06-07 16:37:10,002 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000115: Hibernate connection pool size: 20
2018-06-07 16:37:10,002 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000006: Autocommit mode: true
2018-06-07 16:37:10,002 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000401: using driver [org.h2.Driver] at URL [jdbc:h2:mem:test;MODE=MySQL;DB_CLOSE_DELAY=0]
2018-06-07 16:37:10,002 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000046: Connection properties: {user=sa, autocommit=true, release_mode=auto}
2018-06-07 16:37:10,008 INFO   (: [  ]  ) [org.hibernate.dialect.Dialect] (main) HHH000400: Using dialect: org.hibernate.dialect.MySQL5Dialect
2018-06-07 16:37:10,011 INFO   (: [  ]  ) [org.hibernate.engine.transaction.internal.TransactionFactoryInitiator] (main) HHH000268: Transaction strategy: org.hibernate.engine.transaction.internal.jdbc.JdbcTransactionFactory
2018-06-07 16:37:10,012 INFO   (: [  ]  ) [org.hibernate.hql.internal.ast.ASTQueryTranslatorFactory] (main) HHH000397: Using ASTQueryTranslatorFactory
2018-06-07 16:37:10,025 INFO   (: [  ]  ) [org.hibernate.tool.hbm2ddl.SchemaExport] (main) HHH000227: Running hbm2ddl schema export
Hibernate: drop table if exists test_entity_1
Hibernate: drop table if exists hibernate_sequences
Hibernate: create table test_entity_1 (id bigint not null, intAttribute integer not null, stringAttribute varchar(255), primary key (id))
Hibernate: create table hibernate_sequences ( sequence_name varchar(255),  sequence_next_hi_value integer ) 
2018-06-07 16:37:10,027 INFO   (: [  ]  ) [org.hibernate.tool.hbm2ddl.SchemaExport] (main) HHH000230: Schema export complete
check constructions
2018-06-07 16:37:10,038 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L1 changing  from undefined to REQUIRES_NEW xid: null in OuterClass.saveNewInNewTra
2018-06-07 16:37:10,038 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L2 changing  from REQUIRES_NEW to REQUIRES_NEW xid: null in StatelessEJB.saveInNewTransaction
Hibernate: select sequence_next_hi_value from hibernate_sequences where sequence_name = 'test_entity_1' for update
Hibernate: insert into hibernate_sequences(sequence_name, sequence_next_hi_value) values('test_entity_1', ?)
Hibernate: update hibernate_sequences set sequence_next_hi_value = ? where sequence_next_hi_value = ? and sequence_name = 'test_entity_1'
2018-06-07 16:37:10,042 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L2 finally   in REQUIRES_NEW xid: 22 in StatelessEJB.saveInNewTransaction
Hibernate: insert into test_entity_1 (intAttribute, stringAttribute, id) values (?, ?, ?)
2018-06-07 16:37:10,045 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L2 done      REQUIRES_NEW back to REQUIRES_NEW xid: 21 in StatelessEJB.saveInNewTransaction
2018-06-07 16:37:10,045 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L1 finally   in REQUIRES_NEW xid: 21 in OuterClass.saveNewInNewTra
2018-06-07 16:37:10,045 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L1 done      REQUIRES_NEW back to undefined xid: 20 in OuterClass.saveNewInNewTra
Hibernate: insert into test_entity_1 (intAttribute, stringAttribute, id) values (?, ?, ?)
Hibernate: select count(testentity0_.id) as col_0_0_ from test_entity_1 testentity0_
Hibernate: select count(testentity0_.id) as col_0_0_ from test_entity_1 testentity0_
2018-06-07 16:37:10,053 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.persistence.PersistenceFactory] (main) destroying persistence factory testdb
2018-06-07 16:37:10,053 INFO   (: [  ]  ) [org.hibernate.tool.hbm2ddl.SchemaExport] (main) HHH000227: Running hbm2ddl schema export
Hibernate: drop table if exists test_entity_1
Hibernate: drop table if exists hibernate_sequences
2018-06-07 16:37:10,055 INFO   (: [  ]  ) [org.hibernate.tool.hbm2ddl.SchemaExport] (main) HHH000230: Schema export complete
2018-06-07 16:37:10,055 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000030: Cleaning up connection pool [jdbc:h2:mem:test;MODE=MySQL;DB_CLOSE_DELAY=0]
2018-06-07 16:37:10,098 ERROR  (: [  ]  ) [CDI-Unit EJB-ExtensionExtended] (main) Self injection of EJB Type com.oneandone.ejbcdiunit.ejbs.SingletonEJB in field selfejb of Class com.oneandone.ejbcdiunit.ejbs.SingletonEJB can't get simulated by ejb-cdi-unit
2018-06-07 16:37:10,148 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.persistence.PersistenceFactory] (main) creating persistence factory testdb
2018-06-07 16:37:10,175 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000402: Using Hibernate built-in connection pool (not for production use!)
2018-06-07 16:37:10,175 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000115: Hibernate connection pool size: 20
2018-06-07 16:37:10,175 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000006: Autocommit mode: true
2018-06-07 16:37:10,176 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000401: using driver [org.h2.Driver] at URL [jdbc:h2:mem:test;MODE=MySQL;DB_CLOSE_DELAY=0]
2018-06-07 16:37:10,176 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000046: Connection properties: {user=sa, autocommit=true, release_mode=auto}
2018-06-07 16:37:10,179 INFO   (: [  ]  ) [org.hibernate.dialect.Dialect] (main) HHH000400: Using dialect: org.hibernate.dialect.MySQL5Dialect
2018-06-07 16:37:10,181 INFO   (: [  ]  ) [org.hibernate.engine.transaction.internal.TransactionFactoryInitiator] (main) HHH000268: Transaction strategy: org.hibernate.engine.transaction.internal.jdbc.JdbcTransactionFactory
2018-06-07 16:37:10,182 INFO   (: [  ]  ) [org.hibernate.hql.internal.ast.ASTQueryTranslatorFactory] (main) HHH000397: Using ASTQueryTranslatorFactory
2018-06-07 16:37:10,192 INFO   (: [  ]  ) [org.hibernate.tool.hbm2ddl.SchemaExport] (main) HHH000227: Running hbm2ddl schema export
Hibernate: drop table if exists test_entity_1
Hibernate: drop table if exists hibernate_sequences
Hibernate: create table test_entity_1 (id bigint not null, intAttribute integer not null, stringAttribute varchar(255), primary key (id))
Hibernate: create table hibernate_sequences ( sequence_name varchar(255),  sequence_next_hi_value integer ) 
2018-06-07 16:37:10,194 INFO   (: [  ]  ) [org.hibernate.tool.hbm2ddl.SchemaExport] (main) HHH000230: Schema export complete
check constructions
2018-06-07 16:37:10,201 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L1 changing  from undefined to SUPPORTS xid: null in StatelessEJB.saveInSupportedTransaction
2018-06-07 16:37:10,201 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L1 Exception TransactionRequiredException in SUPPORTS xid: null in StatelessEJB.saveInSupportedTransaction
2018-06-07 16:37:10,201 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L1 finally   in SUPPORTS xid: null in StatelessEJB.saveInSupportedTransaction
2018-06-07 16:37:10,201 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L1 done      SUPPORTS back to undefined xid: null in StatelessEJB.saveInSupportedTransaction
2018-06-07 16:37:10,202 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.persistence.PersistenceFactory] (main) destroying persistence factory testdb
2018-06-07 16:37:10,203 INFO   (: [  ]  ) [org.hibernate.tool.hbm2ddl.SchemaExport] (main) HHH000227: Running hbm2ddl schema export
Hibernate: drop table if exists test_entity_1
Hibernate: drop table if exists hibernate_sequences
2018-06-07 16:37:10,204 INFO   (: [  ]  ) [org.hibernate.tool.hbm2ddl.SchemaExport] (main) HHH000230: Schema export complete
2018-06-07 16:37:10,204 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000030: Cleaning up connection pool [jdbc:h2:mem:test;MODE=MySQL;DB_CLOSE_DELAY=0]
2018-06-07 16:37:10,246 ERROR  (: [  ]  ) [CDI-Unit EJB-ExtensionExtended] (main) Self injection of EJB Type com.oneandone.ejbcdiunit.ejbs.SingletonEJB in field selfejb of Class com.oneandone.ejbcdiunit.ejbs.SingletonEJB can't get simulated by ejb-cdi-unit
2018-06-07 16:37:10,291 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.persistence.PersistenceFactory] (main) creating persistence factory testdb
2018-06-07 16:37:10,319 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000402: Using Hibernate built-in connection pool (not for production use!)
2018-06-07 16:37:10,319 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000115: Hibernate connection pool size: 20
2018-06-07 16:37:10,319 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000006: Autocommit mode: true
2018-06-07 16:37:10,319 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000401: using driver [org.h2.Driver] at URL [jdbc:h2:mem:test;MODE=MySQL;DB_CLOSE_DELAY=0]
2018-06-07 16:37:10,320 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000046: Connection properties: {user=sa, autocommit=true, release_mode=auto}
2018-06-07 16:37:10,323 INFO   (: [  ]  ) [org.hibernate.dialect.Dialect] (main) HHH000400: Using dialect: org.hibernate.dialect.MySQL5Dialect
2018-06-07 16:37:10,325 INFO   (: [  ]  ) [org.hibernate.engine.transaction.internal.TransactionFactoryInitiator] (main) HHH000268: Transaction strategy: org.hibernate.engine.transaction.internal.jdbc.JdbcTransactionFactory
2018-06-07 16:37:10,326 INFO   (: [  ]  ) [org.hibernate.hql.internal.ast.ASTQueryTranslatorFactory] (main) HHH000397: Using ASTQueryTranslatorFactory
2018-06-07 16:37:10,336 INFO   (: [  ]  ) [org.hibernate.tool.hbm2ddl.SchemaExport] (main) HHH000227: Running hbm2ddl schema export
Hibernate: drop table if exists test_entity_1
Hibernate: drop table if exists hibernate_sequences
Hibernate: create table test_entity_1 (id bigint not null, intAttribute integer not null, stringAttribute varchar(255), primary key (id))
Hibernate: create table hibernate_sequences ( sequence_name varchar(255),  sequence_next_hi_value integer ) 
2018-06-07 16:37:10,338 INFO   (: [  ]  ) [org.hibernate.tool.hbm2ddl.SchemaExport] (main) HHH000230: Schema export complete
check constructions
2018-06-07 16:37:10,345 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L1 changing  from undefined to NOT_SUPPORTED xid: null in StatelessBeanManagedTrasEJB.insertNewInTra
2018-06-07 16:37:10,345 INFO   (: [  ]  ) [ejb-cdi-unit tests] (main) output public variable 200
Hibernate: select sequence_next_hi_value from hibernate_sequences where sequence_name = 'test_entity_1' for update
Hibernate: insert into hibernate_sequences(sequence_name, sequence_next_hi_value) values('test_entity_1', ?)
Hibernate: update hibernate_sequences set sequence_next_hi_value = ? where sequence_next_hi_value = ? and sequence_name = 'test_entity_1'
Hibernate: insert into test_entity_1 (intAttribute, stringAttribute, id) values (?, ?, ?)
2018-06-07 16:37:10,350 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L1 finally   in NOT_SUPPORTED xid: null in StatelessBeanManagedTrasEJB.insertNewInTra
2018-06-07 16:37:10,350 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L1 done      NOT_SUPPORTED back to undefined xid: null in StatelessBeanManagedTrasEJB.insertNewInTra
2018-06-07 16:37:10,351 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.persistence.PersistenceFactory] (main) destroying persistence factory testdb
2018-06-07 16:37:10,351 INFO   (: [  ]  ) [org.hibernate.tool.hbm2ddl.SchemaExport] (main) HHH000227: Running hbm2ddl schema export
Hibernate: drop table if exists test_entity_1
Hibernate: drop table if exists hibernate_sequences
2018-06-07 16:37:10,353 INFO   (: [  ]  ) [org.hibernate.tool.hbm2ddl.SchemaExport] (main) HHH000230: Schema export complete
2018-06-07 16:37:10,353 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000030: Cleaning up connection pool [jdbc:h2:mem:test;MODE=MySQL;DB_CLOSE_DELAY=0]
2018-06-07 16:37:10,391 ERROR  (: [  ]  ) [CDI-Unit EJB-ExtensionExtended] (main) Self injection of EJB Type com.oneandone.ejbcdiunit.ejbs.SingletonEJB in field selfejb of Class com.oneandone.ejbcdiunit.ejbs.SingletonEJB can't get simulated by ejb-cdi-unit
2018-06-07 16:37:10,440 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.persistence.PersistenceFactory] (main) creating persistence factory testdb
2018-06-07 16:37:10,478 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000402: Using Hibernate built-in connection pool (not for production use!)
2018-06-07 16:37:10,478 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000115: Hibernate connection pool size: 20
2018-06-07 16:37:10,480 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000006: Autocommit mode: true
2018-06-07 16:37:10,481 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000401: using driver [org.h2.Driver] at URL [jdbc:h2:mem:test;MODE=MySQL;DB_CLOSE_DELAY=0]
2018-06-07 16:37:10,481 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000046: Connection properties: {user=sa, autocommit=true, release_mode=auto}
2018-06-07 16:37:10,487 INFO   (: [  ]  ) [org.hibernate.dialect.Dialect] (main) HHH000400: Using dialect: org.hibernate.dialect.MySQL5Dialect
2018-06-07 16:37:10,505 INFO   (: [  ]  ) [org.hibernate.engine.transaction.internal.TransactionFactoryInitiator] (main) HHH000268: Transaction strategy: org.hibernate.engine.transaction.internal.jdbc.JdbcTransactionFactory
2018-06-07 16:37:10,505 INFO   (: [  ]  ) [org.hibernate.hql.internal.ast.ASTQueryTranslatorFactory] (main) HHH000397: Using ASTQueryTranslatorFactory
2018-06-07 16:37:10,517 INFO   (: [  ]  ) [org.hibernate.tool.hbm2ddl.SchemaExport] (main) HHH000227: Running hbm2ddl schema export
Hibernate: drop table if exists test_entity_1
Hibernate: drop table if exists hibernate_sequences
Hibernate: create table test_entity_1 (id bigint not null, intAttribute integer not null, stringAttribute varchar(255), primary key (id))
Hibernate: create table hibernate_sequences ( sequence_name varchar(255),  sequence_next_hi_value integer ) 
2018-06-07 16:37:10,519 INFO   (: [  ]  ) [org.hibernate.tool.hbm2ddl.SchemaExport] (main) HHH000230: Schema export complete
check constructions
2018-06-07 16:37:10,525 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L1 changing  from undefined to REQUIRES_NEW xid: null in OuterClass.saveRequiresNewLocalAsBusinessObjectAndThrow
2018-06-07 16:37:10,525 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L2 changing  from REQUIRES_NEW to REQUIRED xid: null in StatelessEJB.saveRequiresNewLocalAsBusinessObject
Hibernate: select sequence_next_hi_value from hibernate_sequences where sequence_name = 'test_entity_1' for update
Hibernate: insert into hibernate_sequences(sequence_name, sequence_next_hi_value) values('test_entity_1', ?)
Hibernate: update hibernate_sequences set sequence_next_hi_value = ? where sequence_next_hi_value = ? and sequence_name = 'test_entity_1'
2018-06-07 16:37:10,538 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L3 changing  from REQUIRED to REQUIRES_NEW xid: 25 in StatelessEJB.saveInNewTransaction
2018-06-07 16:37:10,538 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L3 finally   in REQUIRES_NEW xid: 26 in StatelessEJB.saveInNewTransaction
Hibernate: insert into test_entity_1 (intAttribute, stringAttribute, id) values (?, ?, ?)
2018-06-07 16:37:10,542 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L3 done      REQUIRES_NEW back to REQUIRED xid: 25 in StatelessEJB.saveInNewTransaction
2018-06-07 16:37:10,542 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L2 finally   in REQUIRED xid: 25 in StatelessEJB.saveRequiresNewLocalAsBusinessObject
2018-06-07 16:37:10,542 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L2 done      REQUIRED back to REQUIRES_NEW xid: 25 in StatelessEJB.saveRequiresNewLocalAsBusinessObject
2018-06-07 16:37:10,543 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L1 Exception RuntimeException in REQUIRES_NEW xid: 25 in OuterClass.saveRequiresNewLocalAsBusinessObjectAndThrow
2018-06-07 16:37:10,543 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L1 finally   in REQUIRES_NEW xid: 24 in OuterClass.saveRequiresNewLocalAsBusinessObjectAndThrow
2018-06-07 16:37:10,544 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L1 done      REQUIRES_NEW back to undefined xid: null in OuterClass.saveRequiresNewLocalAsBusinessObjectAndThrow
Hibernate: insert into test_entity_1 (intAttribute, stringAttribute, id) values (?, ?, ?)
Hibernate: select count(testentity0_.id) as col_0_0_ from test_entity_1 testentity0_
Hibernate: select count(testentity0_.id) as col_0_0_ from test_entity_1 testentity0_
2018-06-07 16:37:10,552 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.persistence.PersistenceFactory] (main) destroying persistence factory testdb
2018-06-07 16:37:10,553 INFO   (: [  ]  ) [org.hibernate.tool.hbm2ddl.SchemaExport] (main) HHH000227: Running hbm2ddl schema export
Hibernate: drop table if exists test_entity_1
Hibernate: drop table if exists hibernate_sequences
2018-06-07 16:37:10,555 INFO   (: [  ]  ) [org.hibernate.tool.hbm2ddl.SchemaExport] (main) HHH000230: Schema export complete
2018-06-07 16:37:10,555 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000030: Cleaning up connection pool [jdbc:h2:mem:test;MODE=MySQL;DB_CLOSE_DELAY=0]
2018-06-07 16:37:10,603 ERROR  (: [  ]  ) [CDI-Unit EJB-ExtensionExtended] (main) Self injection of EJB Type com.oneandone.ejbcdiunit.ejbs.SingletonEJB in field selfejb of Class com.oneandone.ejbcdiunit.ejbs.SingletonEJB can't get simulated by ejb-cdi-unit
2018-06-07 16:37:10,654 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.persistence.PersistenceFactory] (main) creating persistence factory testdb
2018-06-07 16:37:10,682 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000402: Using Hibernate built-in connection pool (not for production use!)
2018-06-07 16:37:10,682 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000115: Hibernate connection pool size: 20
2018-06-07 16:37:10,683 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000006: Autocommit mode: true
2018-06-07 16:37:10,683 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000401: using driver [org.h2.Driver] at URL [jdbc:h2:mem:test;MODE=MySQL;DB_CLOSE_DELAY=0]
2018-06-07 16:37:10,683 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000046: Connection properties: {user=sa, autocommit=true, release_mode=auto}
2018-06-07 16:37:10,687 INFO   (: [  ]  ) [org.hibernate.dialect.Dialect] (main) HHH000400: Using dialect: org.hibernate.dialect.MySQL5Dialect
2018-06-07 16:37:10,689 INFO   (: [  ]  ) [org.hibernate.engine.transaction.internal.TransactionFactoryInitiator] (main) HHH000268: Transaction strategy: org.hibernate.engine.transaction.internal.jdbc.JdbcTransactionFactory
2018-06-07 16:37:10,690 INFO   (: [  ]  ) [org.hibernate.hql.internal.ast.ASTQueryTranslatorFactory] (main) HHH000397: Using ASTQueryTranslatorFactory
2018-06-07 16:37:10,700 INFO   (: [  ]  ) [org.hibernate.tool.hbm2ddl.SchemaExport] (main) HHH000227: Running hbm2ddl schema export
Hibernate: drop table if exists test_entity_1
Hibernate: drop table if exists hibernate_sequences
Hibernate: create table test_entity_1 (id bigint not null, intAttribute integer not null, stringAttribute varchar(255), primary key (id))
Hibernate: create table hibernate_sequences ( sequence_name varchar(255),  sequence_next_hi_value integer ) 
2018-06-07 16:37:10,702 INFO   (: [  ]  ) [org.hibernate.tool.hbm2ddl.SchemaExport] (main) HHH000230: Schema export complete
check constructions
2018-06-07 16:37:10,708 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L1 changing  from undefined to REQUIRED xid: null in StatelessEJB.saveInCurrentTransactionDefaultTraAttribute
2018-06-07 16:37:10,708 INFO   (: [  ]  ) [ejb-cdi-unit tests] (main) output public variable 200
Hibernate: select sequence_next_hi_value from hibernate_sequences where sequence_name = 'test_entity_1' for update
Hibernate: insert into hibernate_sequences(sequence_name, sequence_next_hi_value) values('test_entity_1', ?)
Hibernate: update hibernate_sequences set sequence_next_hi_value = ? where sequence_next_hi_value = ? and sequence_name = 'test_entity_1'
2018-06-07 16:37:10,711 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L1 finally   in REQUIRED xid: 27 in StatelessEJB.saveInCurrentTransactionDefaultTraAttribute
2018-06-07 16:37:10,711 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L1 done      REQUIRED back to undefined xid: 27 in StatelessEJB.saveInCurrentTransactionDefaultTraAttribute
Hibernate: insert into test_entity_1 (intAttribute, stringAttribute, id) values (?, ?, ?)
Hibernate: insert into test_entity_1 (intAttribute, stringAttribute, id) values (?, ?, ?)
Hibernate: select count(testentity0_.id) as col_0_0_ from test_entity_1 testentity0_
Hibernate: select count(testentity0_.id) as col_0_0_ from test_entity_1 testentity0_
2018-06-07 16:37:10,720 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.persistence.PersistenceFactory] (main) destroying persistence factory testdb
2018-06-07 16:37:10,720 INFO   (: [  ]  ) [org.hibernate.tool.hbm2ddl.SchemaExport] (main) HHH000227: Running hbm2ddl schema export
Hibernate: drop table if exists test_entity_1
Hibernate: drop table if exists hibernate_sequences
2018-06-07 16:37:10,722 INFO   (: [  ]  ) [org.hibernate.tool.hbm2ddl.SchemaExport] (main) HHH000230: Schema export complete
2018-06-07 16:37:10,722 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000030: Cleaning up connection pool [jdbc:h2:mem:test;MODE=MySQL;DB_CLOSE_DELAY=0]
2018-06-07 16:37:10,764 ERROR  (: [  ]  ) [CDI-Unit EJB-ExtensionExtended] (main) Self injection of EJB Type com.oneandone.ejbcdiunit.ejbs.SingletonEJB in field selfejb of Class com.oneandone.ejbcdiunit.ejbs.SingletonEJB can't get simulated by ejb-cdi-unit
2018-06-07 16:37:10,816 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.persistence.PersistenceFactory] (main) creating persistence factory testdb
2018-06-07 16:37:10,846 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000402: Using Hibernate built-in connection pool (not for production use!)
2018-06-07 16:37:10,846 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000115: Hibernate connection pool size: 20
2018-06-07 16:37:10,846 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000006: Autocommit mode: true
2018-06-07 16:37:10,846 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000401: using driver [org.h2.Driver] at URL [jdbc:h2:mem:test;MODE=MySQL;DB_CLOSE_DELAY=0]
2018-06-07 16:37:10,847 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000046: Connection properties: {user=sa, autocommit=true, release_mode=auto}
2018-06-07 16:37:10,850 INFO   (: [  ]  ) [org.hibernate.dialect.Dialect] (main) HHH000400: Using dialect: org.hibernate.dialect.MySQL5Dialect
2018-06-07 16:37:10,853 INFO   (: [  ]  ) [org.hibernate.engine.transaction.internal.TransactionFactoryInitiator] (main) HHH000268: Transaction strategy: org.hibernate.engine.transaction.internal.jdbc.JdbcTransactionFactory
2018-06-07 16:37:10,854 INFO   (: [  ]  ) [org.hibernate.hql.internal.ast.ASTQueryTranslatorFactory] (main) HHH000397: Using ASTQueryTranslatorFactory
2018-06-07 16:37:10,865 INFO   (: [  ]  ) [org.hibernate.tool.hbm2ddl.SchemaExport] (main) HHH000227: Running hbm2ddl schema export
Hibernate: drop table if exists test_entity_1
Hibernate: drop table if exists hibernate_sequences
Hibernate: create table test_entity_1 (id bigint not null, intAttribute integer not null, stringAttribute varchar(255), primary key (id))
Hibernate: create table hibernate_sequences ( sequence_name varchar(255),  sequence_next_hi_value integer ) 
2018-06-07 16:37:10,867 INFO   (: [  ]  ) [org.hibernate.tool.hbm2ddl.SchemaExport] (main) HHH000230: Schema export complete
check constructions
2018-06-07 16:37:10,875 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L1 changing  from undefined to REQUIRES_NEW xid: null in OuterClass.saveRequiredInNewTra
2018-06-07 16:37:10,875 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L2 changing  from REQUIRES_NEW to REQUIRED xid: null in StatelessEJB.saveInCurrentTransaction
Hibernate: select sequence_next_hi_value from hibernate_sequences where sequence_name = 'test_entity_1' for update
Hibernate: insert into hibernate_sequences(sequence_name, sequence_next_hi_value) values('test_entity_1', ?)
Hibernate: update hibernate_sequences set sequence_next_hi_value = ? where sequence_next_hi_value = ? and sequence_name = 'test_entity_1'
2018-06-07 16:37:10,878 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L2 finally   in REQUIRED xid: 29 in StatelessEJB.saveInCurrentTransaction
2018-06-07 16:37:10,878 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L2 done      REQUIRED back to REQUIRES_NEW xid: 29 in StatelessEJB.saveInCurrentTransaction
2018-06-07 16:37:10,878 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L1 finally   in REQUIRES_NEW xid: 29 in OuterClass.saveRequiredInNewTra
Hibernate: insert into test_entity_1 (intAttribute, stringAttribute, id) values (?, ?, ?)
2018-06-07 16:37:10,882 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L1 done      REQUIRES_NEW back to undefined xid: 28 in OuterClass.saveRequiredInNewTra
Hibernate: insert into test_entity_1 (intAttribute, stringAttribute, id) values (?, ?, ?)
Hibernate: select count(testentity0_.id) as col_0_0_ from test_entity_1 testentity0_
Hibernate: select count(testentity0_.id) as col_0_0_ from test_entity_1 testentity0_
2018-06-07 16:37:10,888 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.persistence.PersistenceFactory] (main) destroying persistence factory testdb
2018-06-07 16:37:10,888 INFO   (: [  ]  ) [org.hibernate.tool.hbm2ddl.SchemaExport] (main) HHH000227: Running hbm2ddl schema export
Hibernate: drop table if exists test_entity_1
Hibernate: drop table if exists hibernate_sequences
2018-06-07 16:37:10,890 INFO   (: [  ]  ) [org.hibernate.tool.hbm2ddl.SchemaExport] (main) HHH000230: Schema export complete
2018-06-07 16:37:10,890 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000030: Cleaning up connection pool [jdbc:h2:mem:test;MODE=MySQL;DB_CLOSE_DELAY=0]
2018-06-07 16:37:10,925 ERROR  (: [  ]  ) [CDI-Unit EJB-ExtensionExtended] (main) Self injection of EJB Type com.oneandone.ejbcdiunit.ejbs.SingletonEJB in field selfejb of Class com.oneandone.ejbcdiunit.ejbs.SingletonEJB can't get simulated by ejb-cdi-unit
2018-06-07 16:37:10,964 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.persistence.PersistenceFactory] (main) creating persistence factory testdb
2018-06-07 16:37:10,994 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000402: Using Hibernate built-in connection pool (not for production use!)
2018-06-07 16:37:10,995 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000115: Hibernate connection pool size: 20
2018-06-07 16:37:10,995 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000006: Autocommit mode: true
2018-06-07 16:37:10,995 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000401: using driver [org.h2.Driver] at URL [jdbc:h2:mem:test;MODE=MySQL;DB_CLOSE_DELAY=0]
2018-06-07 16:37:10,995 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000046: Connection properties: {user=sa, autocommit=true, release_mode=auto}
2018-06-07 16:37:10,999 INFO   (: [  ]  ) [org.hibernate.dialect.Dialect] (main) HHH000400: Using dialect: org.hibernate.dialect.MySQL5Dialect
2018-06-07 16:37:11,004 INFO   (: [  ]  ) [org.hibernate.engine.transaction.internal.TransactionFactoryInitiator] (main) HHH000268: Transaction strategy: org.hibernate.engine.transaction.internal.jdbc.JdbcTransactionFactory
2018-06-07 16:37:11,004 INFO   (: [  ]  ) [org.hibernate.hql.internal.ast.ASTQueryTranslatorFactory] (main) HHH000397: Using ASTQueryTranslatorFactory
2018-06-07 16:37:11,018 INFO   (: [  ]  ) [org.hibernate.tool.hbm2ddl.SchemaExport] (main) HHH000227: Running hbm2ddl schema export
Hibernate: drop table if exists test_entity_1
Hibernate: drop table if exists hibernate_sequences
Hibernate: create table test_entity_1 (id bigint not null, intAttribute integer not null, stringAttribute varchar(255), primary key (id))
Hibernate: create table hibernate_sequences ( sequence_name varchar(255),  sequence_next_hi_value integer ) 
2018-06-07 16:37:11,020 INFO   (: [  ]  ) [org.hibernate.tool.hbm2ddl.SchemaExport] (main) HHH000230: Schema export complete
check constructions
2018-06-07 16:37:11,026 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L1 changing  from undefined to REQUIRES_NEW xid: null in OuterClass.saveToSetRollbackOnlyAndTryAdditionalSave
2018-06-07 16:37:11,026 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L2 changing  from REQUIRES_NEW to REQUIRED xid: null in StatelessEJB.persistRequiredAndRTException
Hibernate: select sequence_next_hi_value from hibernate_sequences where sequence_name = 'test_entity_1' for update
Hibernate: insert into hibernate_sequences(sequence_name, sequence_next_hi_value) values('test_entity_1', ?)
Hibernate: update hibernate_sequences set sequence_next_hi_value = ? where sequence_next_hi_value = ? and sequence_name = 'test_entity_1'
2018-06-07 16:37:11,028 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L2 Exception RuntimeException in REQUIRED xid: 31 in StatelessEJB.persistRequiredAndRTException
2018-06-07 16:37:11,029 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L2 finally   in REQUIRED xid: null in StatelessEJB.persistRequiredAndRTException
2018-06-07 16:37:11,029 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L2 done      REQUIRED back to REQUIRES_NEW xid: null in StatelessEJB.persistRequiredAndRTException
2018-06-07 16:37:11,029 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L2 changing  from REQUIRES_NEW to REQUIRED xid: null in StatelessEJB.saveInCurrentTransaction
2018-06-07 16:37:11,029 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L2 Exception TransactionRequiredException in REQUIRED xid: null in StatelessEJB.saveInCurrentTransaction
2018-06-07 16:37:11,029 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L2 finally   in REQUIRED xid: null in StatelessEJB.saveInCurrentTransaction
2018-06-07 16:37:11,029 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L2 done      REQUIRED back to REQUIRES_NEW xid: null in StatelessEJB.saveInCurrentTransaction
2018-06-07 16:37:11,030 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L1 Exception EJBException in REQUIRES_NEW xid: null in OuterClass.saveToSetRollbackOnlyAndTryAdditionalSave
2018-06-07 16:37:11,030 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L1 finally   in REQUIRES_NEW xid: null in OuterClass.saveToSetRollbackOnlyAndTryAdditionalSave
2018-06-07 16:37:11,030 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L1 done      REQUIRES_NEW back to undefined xid: 30 in OuterClass.saveToSetRollbackOnlyAndTryAdditionalSave
Hibernate: insert into test_entity_1 (intAttribute, stringAttribute, id) values (?, ?, ?)
Hibernate: select count(testentity0_.id) as col_0_0_ from test_entity_1 testentity0_
Hibernate: select count(testentity0_.id) as col_0_0_ from test_entity_1 testentity0_
2018-06-07 16:37:11,037 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.persistence.PersistenceFactory] (main) destroying persistence factory testdb
2018-06-07 16:37:11,037 INFO   (: [  ]  ) [org.hibernate.tool.hbm2ddl.SchemaExport] (main) HHH000227: Running hbm2ddl schema export
Hibernate: drop table if exists test_entity_1
Hibernate: drop table if exists hibernate_sequences
2018-06-07 16:37:11,040 INFO   (: [  ]  ) [org.hibernate.tool.hbm2ddl.SchemaExport] (main) HHH000230: Schema export complete
2018-06-07 16:37:11,040 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000030: Cleaning up connection pool [jdbc:h2:mem:test;MODE=MySQL;DB_CLOSE_DELAY=0]
2018-06-07 16:37:11,092 ERROR  (: [  ]  ) [CDI-Unit EJB-ExtensionExtended] (main) Self injection of EJB Type com.oneandone.ejbcdiunit.ejbs.SingletonEJB in field selfejb of Class com.oneandone.ejbcdiunit.ejbs.SingletonEJB can't get simulated by ejb-cdi-unit
2018-06-07 16:37:11,139 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.persistence.PersistenceFactory] (main) creating persistence factory testdb
2018-06-07 16:37:11,165 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000402: Using Hibernate built-in connection pool (not for production use!)
2018-06-07 16:37:11,165 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000115: Hibernate connection pool size: 20
2018-06-07 16:37:11,165 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000006: Autocommit mode: true
2018-06-07 16:37:11,165 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000401: using driver [org.h2.Driver] at URL [jdbc:h2:mem:test;MODE=MySQL;DB_CLOSE_DELAY=0]
2018-06-07 16:37:11,166 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000046: Connection properties: {user=sa, autocommit=true, release_mode=auto}
2018-06-07 16:37:11,169 INFO   (: [  ]  ) [org.hibernate.dialect.Dialect] (main) HHH000400: Using dialect: org.hibernate.dialect.MySQL5Dialect
2018-06-07 16:37:11,171 INFO   (: [  ]  ) [org.hibernate.engine.transaction.internal.TransactionFactoryInitiator] (main) HHH000268: Transaction strategy: org.hibernate.engine.transaction.internal.jdbc.JdbcTransactionFactory
2018-06-07 16:37:11,171 INFO   (: [  ]  ) [org.hibernate.hql.internal.ast.ASTQueryTranslatorFactory] (main) HHH000397: Using ASTQueryTranslatorFactory
2018-06-07 16:37:11,182 INFO   (: [  ]  ) [org.hibernate.tool.hbm2ddl.SchemaExport] (main) HHH000227: Running hbm2ddl schema export
Hibernate: drop table if exists test_entity_1
Hibernate: drop table if exists hibernate_sequences
Hibernate: create table test_entity_1 (id bigint not null, intAttribute integer not null, stringAttribute varchar(255), primary key (id))
Hibernate: create table hibernate_sequences ( sequence_name varchar(255),  sequence_next_hi_value integer ) 
2018-06-07 16:37:11,184 INFO   (: [  ]  ) [org.hibernate.tool.hbm2ddl.SchemaExport] (main) HHH000230: Schema export complete
check constructions
2018-06-07 16:37:11,190 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L1 changing  from undefined to NEVER xid: null in TransactionalParentEJB.saveInCurrentTransactionNeverTraAttribute
2018-06-07 16:37:11,190 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L1 Exception TransactionRequiredException in NEVER xid: null in TransactionalParentEJB.saveInCurrentTransactionNeverTraAttribute
2018-06-07 16:37:11,190 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L1 finally   in NEVER xid: null in TransactionalParentEJB.saveInCurrentTransactionNeverTraAttribute
2018-06-07 16:37:11,190 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L1 done      NEVER back to undefined xid: null in TransactionalParentEJB.saveInCurrentTransactionNeverTraAttribute
2018-06-07 16:37:11,191 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.persistence.PersistenceFactory] (main) destroying persistence factory testdb
2018-06-07 16:37:11,191 INFO   (: [  ]  ) [org.hibernate.tool.hbm2ddl.SchemaExport] (main) HHH000227: Running hbm2ddl schema export
Hibernate: drop table if exists test_entity_1
Hibernate: drop table if exists hibernate_sequences
2018-06-07 16:37:11,193 INFO   (: [  ]  ) [org.hibernate.tool.hbm2ddl.SchemaExport] (main) HHH000230: Schema export complete
2018-06-07 16:37:11,193 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000030: Cleaning up connection pool [jdbc:h2:mem:test;MODE=MySQL;DB_CLOSE_DELAY=0]
2018-06-07 16:37:11,234 ERROR  (: [  ]  ) [CDI-Unit EJB-ExtensionExtended] (main) Self injection of EJB Type com.oneandone.ejbcdiunit.ejbs.SingletonEJB in field selfejb of Class com.oneandone.ejbcdiunit.ejbs.SingletonEJB can't get simulated by ejb-cdi-unit
2018-06-07 16:37:11,281 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.persistence.PersistenceFactory] (main) creating persistence factory testdb
2018-06-07 16:37:11,378 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000402: Using Hibernate built-in connection pool (not for production use!)
2018-06-07 16:37:11,379 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000115: Hibernate connection pool size: 20
2018-06-07 16:37:11,379 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000006: Autocommit mode: true
2018-06-07 16:37:11,379 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000401: using driver [org.h2.Driver] at URL [jdbc:h2:mem:test;MODE=MySQL;DB_CLOSE_DELAY=0]
2018-06-07 16:37:11,379 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000046: Connection properties: {user=sa, autocommit=true, release_mode=auto}
2018-06-07 16:37:11,383 INFO   (: [  ]  ) [org.hibernate.dialect.Dialect] (main) HHH000400: Using dialect: org.hibernate.dialect.MySQL5Dialect
2018-06-07 16:37:11,386 INFO   (: [  ]  ) [org.hibernate.engine.transaction.internal.TransactionFactoryInitiator] (main) HHH000268: Transaction strategy: org.hibernate.engine.transaction.internal.jdbc.JdbcTransactionFactory
2018-06-07 16:37:11,386 INFO   (: [  ]  ) [org.hibernate.hql.internal.ast.ASTQueryTranslatorFactory] (main) HHH000397: Using ASTQueryTranslatorFactory
2018-06-07 16:37:11,403 INFO   (: [  ]  ) [org.hibernate.tool.hbm2ddl.SchemaExport] (main) HHH000227: Running hbm2ddl schema export
Hibernate: drop table if exists test_entity_1
Hibernate: drop table if exists hibernate_sequences
Hibernate: create table test_entity_1 (id bigint not null, intAttribute integer not null, stringAttribute varchar(255), primary key (id))
Hibernate: create table hibernate_sequences ( sequence_name varchar(255),  sequence_next_hi_value integer ) 
2018-06-07 16:37:11,408 INFO   (: [  ]  ) [org.hibernate.tool.hbm2ddl.SchemaExport] (main) HHH000230: Schema export complete
check constructions
2018-06-07 16:37:11,428 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L1 changing  from undefined to REQUIRED xid: null in StatelessEJB.method1
2018-06-07 16:37:11,428 INFO   (: [  ]  ) [ejb-cdi-unit tests] (main) StatelessEJB: methodCallUsingSessionContext called
2018-06-07 16:37:11,428 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L1 finally   in REQUIRED xid: null in StatelessEJB.method1
2018-06-07 16:37:11,428 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L1 done      REQUIRED back to undefined xid: null in StatelessEJB.method1
2018-06-07 16:37:11,429 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L1 changing  from undefined to NOT_SUPPORTED xid: null in SingletonEJB.methodCallUsingSessionContext
2018-06-07 16:37:11,429 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L2 changing  from NOT_SUPPORTED to REQUIRES_NEW xid: null in SingletonEJB.callInNewTransactionWithParam
singleton bean 10
2018-06-07 16:37:11,429 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L2 finally   in REQUIRES_NEW xid: null in SingletonEJB.callInNewTransactionWithParam
2018-06-07 16:37:11,429 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L2 done      REQUIRES_NEW back to NOT_SUPPORTED xid: null in SingletonEJB.callInNewTransactionWithParam
2018-06-07 16:37:11,429 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L2 changing  from NOT_SUPPORTED to REQUIRES_NEW xid: null in SingletonEJB.callInNewTransaction
singleton bean
2018-06-07 16:37:11,430 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L2 finally   in REQUIRES_NEW xid: null in SingletonEJB.callInNewTransaction
2018-06-07 16:37:11,430 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L2 done      REQUIRES_NEW back to NOT_SUPPORTED xid: null in SingletonEJB.callInNewTransaction
singleton bean
2018-06-07 16:37:11,431 INFO   (: [  ]  ) [ejb-cdi-unit tests] (main) SingletonEJB: methodCallUsingSessionContext called
2018-06-07 16:37:11,431 INFO   (: [  ]  ) [ejb-cdi-unit tests] (main) output public variable 100
2018-06-07 16:37:11,431 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L1 finally   in NOT_SUPPORTED xid: null in SingletonEJB.methodCallUsingSessionContext
2018-06-07 16:37:11,431 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L1 done      NOT_SUPPORTED back to undefined xid: null in SingletonEJB.methodCallUsingSessionContext
2018-06-07 16:37:11,434 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L1 changing  from undefined to NOT_SUPPORTED xid: null in SingletonEJB.methodCallUsingSelf
2018-06-07 16:37:11,435 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L2 changing  from NOT_SUPPORTED to REQUIRES_NEW xid: null in SingletonEJB.callInNewTransaction
singleton bean
2018-06-07 16:37:11,435 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L2 finally   in REQUIRES_NEW xid: null in SingletonEJB.callInNewTransaction
2018-06-07 16:37:11,435 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L2 done      REQUIRES_NEW back to NOT_SUPPORTED xid: null in SingletonEJB.callInNewTransaction
singleton bean
2018-06-07 16:37:11,435 INFO   (: [  ]  ) [ejb-cdi-unit tests] (main) SingletonEJB: methodCallUsingSessionContext called
2018-06-07 16:37:11,435 INFO   (: [  ]  ) [ejb-cdi-unit tests] (main) output public variable 100
2018-06-07 16:37:11,435 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L1 finally   in NOT_SUPPORTED xid: null in SingletonEJB.methodCallUsingSelf
2018-06-07 16:37:11,435 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L1 done      NOT_SUPPORTED back to undefined xid: null in SingletonEJB.methodCallUsingSelf
2018-06-07 16:37:11,436 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L1 changing  from undefined to REQUIRED xid: null in StatelessEJB.method1
2018-06-07 16:37:11,436 INFO   (: [  ]  ) [ejb-cdi-unit tests] (main) StatelessEJB: methodCallUsingSessionContext called
2018-06-07 16:37:11,436 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L1 finally   in REQUIRED xid: null in StatelessEJB.method1
2018-06-07 16:37:11,436 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L1 done      REQUIRED back to undefined xid: null in StatelessEJB.method1
2018-06-07 16:37:11,436 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L1 changing  from undefined to NOT_SUPPORTED xid: null in SingletonEJB.methodCallUsingSessionContext
2018-06-07 16:37:11,436 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L2 changing  from NOT_SUPPORTED to REQUIRES_NEW xid: null in SingletonEJB.callInNewTransactionWithParam
singleton bean 10
2018-06-07 16:37:11,436 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L2 finally   in REQUIRES_NEW xid: null in SingletonEJB.callInNewTransactionWithParam
2018-06-07 16:37:11,437 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L2 done      REQUIRES_NEW back to NOT_SUPPORTED xid: null in SingletonEJB.callInNewTransactionWithParam
2018-06-07 16:37:11,437 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L2 changing  from NOT_SUPPORTED to REQUIRES_NEW xid: null in SingletonEJB.callInNewTransaction
singleton bean
2018-06-07 16:37:11,437 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L2 finally   in REQUIRES_NEW xid: null in SingletonEJB.callInNewTransaction
2018-06-07 16:37:11,437 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L2 done      REQUIRES_NEW back to NOT_SUPPORTED xid: null in SingletonEJB.callInNewTransaction
singleton bean
2018-06-07 16:37:11,437 INFO   (: [  ]  ) [ejb-cdi-unit tests] (main) SingletonEJB: methodCallUsingSessionContext called
2018-06-07 16:37:11,437 INFO   (: [  ]  ) [ejb-cdi-unit tests] (main) output public variable 100
2018-06-07 16:37:11,437 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L1 finally   in NOT_SUPPORTED xid: null in SingletonEJB.methodCallUsingSessionContext
2018-06-07 16:37:11,437 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L1 done      NOT_SUPPORTED back to undefined xid: null in SingletonEJB.methodCallUsingSessionContext
2018-06-07 16:37:11,438 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.persistence.PersistenceFactory] (main) destroying persistence factory testdb
2018-06-07 16:37:11,438 INFO   (: [  ]  ) [org.hibernate.tool.hbm2ddl.SchemaExport] (main) HHH000227: Running hbm2ddl schema export
Hibernate: drop table if exists test_entity_1
Hibernate: drop table if exists hibernate_sequences
2018-06-07 16:37:11,440 INFO   (: [  ]  ) [org.hibernate.tool.hbm2ddl.SchemaExport] (main) HHH000230: Schema export complete
2018-06-07 16:37:11,440 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000030: Cleaning up connection pool [jdbc:h2:mem:test;MODE=MySQL;DB_CLOSE_DELAY=0]
2018-06-07 16:37:11,480 ERROR  (: [  ]  ) [CDI-Unit EJB-ExtensionExtended] (main) Self injection of EJB Type com.oneandone.ejbcdiunit.ejbs.SingletonEJB in field selfejb of Class com.oneandone.ejbcdiunit.ejbs.SingletonEJB can't get simulated by ejb-cdi-unit
2018-06-07 16:37:11,525 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.persistence.PersistenceFactory] (main) creating persistence factory testdb
2018-06-07 16:37:11,546 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000402: Using Hibernate built-in connection pool (not for production use!)
2018-06-07 16:37:11,546 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000115: Hibernate connection pool size: 20
2018-06-07 16:37:11,546 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000006: Autocommit mode: true
2018-06-07 16:37:11,546 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000401: using driver [org.h2.Driver] at URL [jdbc:h2:mem:test;MODE=MySQL;DB_CLOSE_DELAY=0]
2018-06-07 16:37:11,547 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000046: Connection properties: {user=sa, autocommit=true, release_mode=auto}
2018-06-07 16:37:11,550 INFO   (: [  ]  ) [org.hibernate.dialect.Dialect] (main) HHH000400: Using dialect: org.hibernate.dialect.MySQL5Dialect
2018-06-07 16:37:11,552 INFO   (: [  ]  ) [org.hibernate.engine.transaction.internal.TransactionFactoryInitiator] (main) HHH000268: Transaction strategy: org.hibernate.engine.transaction.internal.jdbc.JdbcTransactionFactory
2018-06-07 16:37:11,552 INFO   (: [  ]  ) [org.hibernate.hql.internal.ast.ASTQueryTranslatorFactory] (main) HHH000397: Using ASTQueryTranslatorFactory
2018-06-07 16:37:11,560 INFO   (: [  ]  ) [org.hibernate.tool.hbm2ddl.SchemaExport] (main) HHH000227: Running hbm2ddl schema export
Hibernate: drop table if exists test_entity_1
Hibernate: drop table if exists hibernate_sequences
Hibernate: create table test_entity_1 (id bigint not null, intAttribute integer not null, stringAttribute varchar(255), primary key (id))
Hibernate: create table hibernate_sequences ( sequence_name varchar(255),  sequence_next_hi_value integer ) 
2018-06-07 16:37:11,562 INFO   (: [  ]  ) [org.hibernate.tool.hbm2ddl.SchemaExport] (main) HHH000230: Schema export complete
check constructions
2018-06-07 16:37:11,568 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L1 changing  from undefined to REQUIRES_NEW xid: null in OuterClass.saveRequiredInNewTraThrow
2018-06-07 16:37:11,568 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L2 changing  from REQUIRES_NEW to REQUIRED xid: null in StatelessEJB.saveInCurrentTransaction
Hibernate: select sequence_next_hi_value from hibernate_sequences where sequence_name = 'test_entity_1' for update
Hibernate: insert into hibernate_sequences(sequence_name, sequence_next_hi_value) values('test_entity_1', ?)
Hibernate: update hibernate_sequences set sequence_next_hi_value = ? where sequence_next_hi_value = ? and sequence_name = 'test_entity_1'
2018-06-07 16:37:11,570 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L2 finally   in REQUIRED xid: 33 in StatelessEJB.saveInCurrentTransaction
2018-06-07 16:37:11,571 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L2 done      REQUIRED back to REQUIRES_NEW xid: 33 in StatelessEJB.saveInCurrentTransaction
2018-06-07 16:37:11,571 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L1 Exception RuntimeException in REQUIRES_NEW xid: 33 in OuterClass.saveRequiredInNewTraThrow
2018-06-07 16:37:11,571 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L1 finally   in REQUIRES_NEW xid: 32 in OuterClass.saveRequiredInNewTraThrow
2018-06-07 16:37:11,572 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L1 done      REQUIRES_NEW back to undefined xid: null in OuterClass.saveRequiredInNewTraThrow
Hibernate: insert into test_entity_1 (intAttribute, stringAttribute, id) values (?, ?, ?)
Hibernate: select count(testentity0_.id) as col_0_0_ from test_entity_1 testentity0_
Hibernate: select count(testentity0_.id) as col_0_0_ from test_entity_1 testentity0_
2018-06-07 16:37:11,580 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.persistence.PersistenceFactory] (main) destroying persistence factory testdb
2018-06-07 16:37:11,580 INFO   (: [  ]  ) [org.hibernate.tool.hbm2ddl.SchemaExport] (main) HHH000227: Running hbm2ddl schema export
Hibernate: drop table if exists test_entity_1
Hibernate: drop table if exists hibernate_sequences
2018-06-07 16:37:11,582 INFO   (: [  ]  ) [org.hibernate.tool.hbm2ddl.SchemaExport] (main) HHH000230: Schema export complete
2018-06-07 16:37:11,582 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000030: Cleaning up connection pool [jdbc:h2:mem:test;MODE=MySQL;DB_CLOSE_DELAY=0]
2018-06-07 16:37:11,616 ERROR  (: [  ]  ) [CDI-Unit EJB-ExtensionExtended] (main) Self injection of EJB Type com.oneandone.ejbcdiunit.ejbs.SingletonEJB in field selfejb of Class com.oneandone.ejbcdiunit.ejbs.SingletonEJB can't get simulated by ejb-cdi-unit
2018-06-07 16:37:11,659 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.persistence.PersistenceFactory] (main) creating persistence factory testdb
2018-06-07 16:37:11,686 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000402: Using Hibernate built-in connection pool (not for production use!)
2018-06-07 16:37:11,687 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000115: Hibernate connection pool size: 20
2018-06-07 16:37:11,687 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000006: Autocommit mode: true
2018-06-07 16:37:11,687 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000401: using driver [org.h2.Driver] at URL [jdbc:h2:mem:test;MODE=MySQL;DB_CLOSE_DELAY=0]
2018-06-07 16:37:11,687 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000046: Connection properties: {user=sa, autocommit=true, release_mode=auto}
2018-06-07 16:37:11,690 INFO   (: [  ]  ) [org.hibernate.dialect.Dialect] (main) HHH000400: Using dialect: org.hibernate.dialect.MySQL5Dialect
2018-06-07 16:37:11,693 INFO   (: [  ]  ) [org.hibernate.engine.transaction.internal.TransactionFactoryInitiator] (main) HHH000268: Transaction strategy: org.hibernate.engine.transaction.internal.jdbc.JdbcTransactionFactory
2018-06-07 16:37:11,693 INFO   (: [  ]  ) [org.hibernate.hql.internal.ast.ASTQueryTranslatorFactory] (main) HHH000397: Using ASTQueryTranslatorFactory
2018-06-07 16:37:11,704 INFO   (: [  ]  ) [org.hibernate.tool.hbm2ddl.SchemaExport] (main) HHH000227: Running hbm2ddl schema export
Hibernate: drop table if exists test_entity_1
Hibernate: drop table if exists hibernate_sequences
Hibernate: create table test_entity_1 (id bigint not null, intAttribute integer not null, stringAttribute varchar(255), primary key (id))
Hibernate: create table hibernate_sequences ( sequence_name varchar(255),  sequence_next_hi_value integer ) 
2018-06-07 16:37:11,707 INFO   (: [  ]  ) [org.hibernate.tool.hbm2ddl.SchemaExport] (main) HHH000230: Schema export complete
check constructions
2018-06-07 16:37:11,714 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L1 changing  from undefined to NOT_SUPPORTED xid: null in StatelessEJB.trySaveInNotSupportedTransaction
2018-06-07 16:37:11,714 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L1 Exception TransactionRequiredException in NOT_SUPPORTED xid: null in StatelessEJB.trySaveInNotSupportedTransaction
2018-06-07 16:37:11,714 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L1 finally   in NOT_SUPPORTED xid: null in StatelessEJB.trySaveInNotSupportedTransaction
2018-06-07 16:37:11,714 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L1 done      NOT_SUPPORTED back to undefined xid: null in StatelessEJB.trySaveInNotSupportedTransaction
2018-06-07 16:37:11,715 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.persistence.PersistenceFactory] (main) destroying persistence factory testdb
2018-06-07 16:37:11,716 INFO   (: [  ]  ) [org.hibernate.tool.hbm2ddl.SchemaExport] (main) HHH000227: Running hbm2ddl schema export
Hibernate: drop table if exists test_entity_1
Hibernate: drop table if exists hibernate_sequences
2018-06-07 16:37:11,717 INFO   (: [  ]  ) [org.hibernate.tool.hbm2ddl.SchemaExport] (main) HHH000230: Schema export complete
2018-06-07 16:37:11,717 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000030: Cleaning up connection pool [jdbc:h2:mem:test;MODE=MySQL;DB_CLOSE_DELAY=0]
2018-06-07 16:37:11,755 ERROR  (: [  ]  ) [CDI-Unit EJB-ExtensionExtended] (main) Self injection of EJB Type com.oneandone.ejbcdiunit.ejbs.SingletonEJB in field selfejb of Class com.oneandone.ejbcdiunit.ejbs.SingletonEJB can't get simulated by ejb-cdi-unit
2018-06-07 16:37:11,798 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.persistence.PersistenceFactory] (main) creating persistence factory testdb
2018-06-07 16:37:11,821 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000402: Using Hibernate built-in connection pool (not for production use!)
2018-06-07 16:37:11,821 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000115: Hibernate connection pool size: 20
2018-06-07 16:37:11,821 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000006: Autocommit mode: true
2018-06-07 16:37:11,821 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000401: using driver [org.h2.Driver] at URL [jdbc:h2:mem:test;MODE=MySQL;DB_CLOSE_DELAY=0]
2018-06-07 16:37:11,822 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000046: Connection properties: {user=sa, autocommit=true, release_mode=auto}
2018-06-07 16:37:11,824 INFO   (: [  ]  ) [org.hibernate.dialect.Dialect] (main) HHH000400: Using dialect: org.hibernate.dialect.MySQL5Dialect
2018-06-07 16:37:11,826 INFO   (: [  ]  ) [org.hibernate.engine.transaction.internal.TransactionFactoryInitiator] (main) HHH000268: Transaction strategy: org.hibernate.engine.transaction.internal.jdbc.JdbcTransactionFactory
2018-06-07 16:37:11,826 INFO   (: [  ]  ) [org.hibernate.hql.internal.ast.ASTQueryTranslatorFactory] (main) HHH000397: Using ASTQueryTranslatorFactory
2018-06-07 16:37:11,834 INFO   (: [  ]  ) [org.hibernate.tool.hbm2ddl.SchemaExport] (main) HHH000227: Running hbm2ddl schema export
Hibernate: drop table if exists test_entity_1
Hibernate: drop table if exists hibernate_sequences
Hibernate: create table test_entity_1 (id bigint not null, intAttribute integer not null, stringAttribute varchar(255), primary key (id))
Hibernate: create table hibernate_sequences ( sequence_name varchar(255),  sequence_next_hi_value integer ) 
2018-06-07 16:37:11,836 INFO   (: [  ]  ) [org.hibernate.tool.hbm2ddl.SchemaExport] (main) HHH000230: Schema export complete
check constructions
2018-06-07 16:37:11,841 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L1 changing  from undefined to REQUIRES_NEW xid: null in OuterClass.saveRequiresNewLocalAsBusinessObject
2018-06-07 16:37:11,841 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L2 changing  from REQUIRES_NEW to REQUIRED xid: null in StatelessEJB.saveRequiresNewLocalAsBusinessObject
Hibernate: select sequence_next_hi_value from hibernate_sequences where sequence_name = 'test_entity_1' for update
Hibernate: insert into hibernate_sequences(sequence_name, sequence_next_hi_value) values('test_entity_1', ?)
Hibernate: update hibernate_sequences set sequence_next_hi_value = ? where sequence_next_hi_value = ? and sequence_name = 'test_entity_1'
2018-06-07 16:37:11,844 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L3 changing  from REQUIRED to REQUIRES_NEW xid: 35 in StatelessEJB.saveInNewTransaction
2018-06-07 16:37:11,844 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L3 finally   in REQUIRES_NEW xid: 36 in StatelessEJB.saveInNewTransaction
Hibernate: insert into test_entity_1 (intAttribute, stringAttribute, id) values (?, ?, ?)
2018-06-07 16:37:11,848 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L3 done      REQUIRES_NEW back to REQUIRED xid: 35 in StatelessEJB.saveInNewTransaction
2018-06-07 16:37:11,848 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L2 finally   in REQUIRED xid: 35 in StatelessEJB.saveRequiresNewLocalAsBusinessObject
2018-06-07 16:37:11,848 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L2 done      REQUIRED back to REQUIRES_NEW xid: 35 in StatelessEJB.saveRequiresNewLocalAsBusinessObject
2018-06-07 16:37:11,848 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L1 finally   in REQUIRES_NEW xid: 35 in OuterClass.saveRequiresNewLocalAsBusinessObject
Hibernate: insert into test_entity_1 (intAttribute, stringAttribute, id) values (?, ?, ?)
2018-06-07 16:37:11,849 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L1 done      REQUIRES_NEW back to undefined xid: 34 in OuterClass.saveRequiresNewLocalAsBusinessObject
Hibernate: insert into test_entity_1 (intAttribute, stringAttribute, id) values (?, ?, ?)
Hibernate: select count(testentity0_.id) as col_0_0_ from test_entity_1 testentity0_
Hibernate: select count(testentity0_.id) as col_0_0_ from test_entity_1 testentity0_
2018-06-07 16:37:11,856 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.persistence.PersistenceFactory] (main) destroying persistence factory testdb
2018-06-07 16:37:11,856 INFO   (: [  ]  ) [org.hibernate.tool.hbm2ddl.SchemaExport] (main) HHH000227: Running hbm2ddl schema export
Hibernate: drop table if exists test_entity_1
Hibernate: drop table if exists hibernate_sequences
2018-06-07 16:37:11,857 INFO   (: [  ]  ) [org.hibernate.tool.hbm2ddl.SchemaExport] (main) HHH000230: Schema export complete
2018-06-07 16:37:11,857 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000030: Cleaning up connection pool [jdbc:h2:mem:test;MODE=MySQL;DB_CLOSE_DELAY=0]
2018-06-07 16:37:11,896 ERROR  (: [  ]  ) [CDI-Unit EJB-ExtensionExtended] (main) Self injection of EJB Type com.oneandone.ejbcdiunit.ejbs.SingletonEJB in field selfejb of Class com.oneandone.ejbcdiunit.ejbs.SingletonEJB can't get simulated by ejb-cdi-unit
2018-06-07 16:37:11,930 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.persistence.PersistenceFactory] (main) creating persistence factory testdb
2018-06-07 16:37:11,956 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000402: Using Hibernate built-in connection pool (not for production use!)
2018-06-07 16:37:11,956 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000115: Hibernate connection pool size: 20
2018-06-07 16:37:11,956 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000006: Autocommit mode: true
2018-06-07 16:37:11,956 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000401: using driver [org.h2.Driver] at URL [jdbc:h2:mem:test;MODE=MySQL;DB_CLOSE_DELAY=0]
2018-06-07 16:37:11,957 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000046: Connection properties: {user=sa, autocommit=true, release_mode=auto}
2018-06-07 16:37:11,960 INFO   (: [  ]  ) [org.hibernate.dialect.Dialect] (main) HHH000400: Using dialect: org.hibernate.dialect.MySQL5Dialect
2018-06-07 16:37:11,962 INFO   (: [  ]  ) [org.hibernate.engine.transaction.internal.TransactionFactoryInitiator] (main) HHH000268: Transaction strategy: org.hibernate.engine.transaction.internal.jdbc.JdbcTransactionFactory
2018-06-07 16:37:11,963 INFO   (: [  ]  ) [org.hibernate.hql.internal.ast.ASTQueryTranslatorFactory] (main) HHH000397: Using ASTQueryTranslatorFactory
2018-06-07 16:37:11,971 INFO   (: [  ]  ) [org.hibernate.tool.hbm2ddl.SchemaExport] (main) HHH000227: Running hbm2ddl schema export
Hibernate: drop table if exists test_entity_1
Hibernate: drop table if exists hibernate_sequences
Hibernate: create table test_entity_1 (id bigint not null, intAttribute integer not null, stringAttribute varchar(255), primary key (id))
Hibernate: create table hibernate_sequences ( sequence_name varchar(255),  sequence_next_hi_value integer ) 
2018-06-07 16:37:11,973 INFO   (: [  ]  ) [org.hibernate.tool.hbm2ddl.SchemaExport] (main) HHH000230: Schema export complete
check constructions
2018-06-07 16:37:11,978 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L1 changing  from undefined to REQUIRES_NEW xid: null in OuterClass.saveRequiredPlusNewInNewTra
2018-06-07 16:37:11,979 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L2 changing  from REQUIRES_NEW to REQUIRED xid: null in StatelessEJB.saveInCurrentTransactionAndSaveNewInNewButDirectCall
Hibernate: select sequence_next_hi_value from hibernate_sequences where sequence_name = 'test_entity_1' for update
Hibernate: insert into hibernate_sequences(sequence_name, sequence_next_hi_value) values('test_entity_1', ?)
Hibernate: update hibernate_sequences set sequence_next_hi_value = ? where sequence_next_hi_value = ? and sequence_name = 'test_entity_1'
2018-06-07 16:37:11,981 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L2 finally   in REQUIRED xid: 38 in StatelessEJB.saveInCurrentTransactionAndSaveNewInNewButDirectCall
2018-06-07 16:37:11,982 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L2 done      REQUIRED back to REQUIRES_NEW xid: 38 in StatelessEJB.saveInCurrentTransactionAndSaveNewInNewButDirectCall
2018-06-07 16:37:11,982 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L1 finally   in REQUIRES_NEW xid: 38 in OuterClass.saveRequiredPlusNewInNewTra
Hibernate: insert into test_entity_1 (intAttribute, stringAttribute, id) values (?, ?, ?)
Hibernate: insert into test_entity_1 (intAttribute, stringAttribute, id) values (?, ?, ?)
2018-06-07 16:37:11,991 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L1 done      REQUIRES_NEW back to undefined xid: 37 in OuterClass.saveRequiredPlusNewInNewTra
Hibernate: insert into test_entity_1 (intAttribute, stringAttribute, id) values (?, ?, ?)
Hibernate: select count(testentity0_.id) as col_0_0_ from test_entity_1 testentity0_
Hibernate: select count(testentity0_.id) as col_0_0_ from test_entity_1 testentity0_
2018-06-07 16:37:12,001 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.persistence.PersistenceFactory] (main) destroying persistence factory testdb
2018-06-07 16:37:12,002 INFO   (: [  ]  ) [org.hibernate.tool.hbm2ddl.SchemaExport] (main) HHH000227: Running hbm2ddl schema export
Hibernate: drop table if exists test_entity_1
Hibernate: drop table if exists hibernate_sequences
2018-06-07 16:37:12,004 INFO   (: [  ]  ) [org.hibernate.tool.hbm2ddl.SchemaExport] (main) HHH000230: Schema export complete
2018-06-07 16:37:12,004 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000030: Cleaning up connection pool [jdbc:h2:mem:test;MODE=MySQL;DB_CLOSE_DELAY=0]
2018-06-07 16:37:12,047 ERROR  (: [  ]  ) [CDI-Unit EJB-ExtensionExtended] (main) Self injection of EJB Type com.oneandone.ejbcdiunit.ejbs.SingletonEJB in field selfejb of Class com.oneandone.ejbcdiunit.ejbs.SingletonEJB can't get simulated by ejb-cdi-unit
2018-06-07 16:37:12,092 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.persistence.PersistenceFactory] (main) creating persistence factory testdb
2018-06-07 16:37:12,121 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000402: Using Hibernate built-in connection pool (not for production use!)
2018-06-07 16:37:12,122 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000115: Hibernate connection pool size: 20
2018-06-07 16:37:12,122 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000006: Autocommit mode: true
2018-06-07 16:37:12,122 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000401: using driver [org.h2.Driver] at URL [jdbc:h2:mem:test;MODE=MySQL;DB_CLOSE_DELAY=0]
2018-06-07 16:37:12,122 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000046: Connection properties: {user=sa, autocommit=true, release_mode=auto}
2018-06-07 16:37:12,124 INFO   (: [  ]  ) [org.hibernate.dialect.Dialect] (main) HHH000400: Using dialect: org.hibernate.dialect.MySQL5Dialect
2018-06-07 16:37:12,127 INFO   (: [  ]  ) [org.hibernate.engine.transaction.internal.TransactionFactoryInitiator] (main) HHH000268: Transaction strategy: org.hibernate.engine.transaction.internal.jdbc.JdbcTransactionFactory
2018-06-07 16:37:12,128 INFO   (: [  ]  ) [org.hibernate.hql.internal.ast.ASTQueryTranslatorFactory] (main) HHH000397: Using ASTQueryTranslatorFactory
2018-06-07 16:37:12,139 INFO   (: [  ]  ) [org.hibernate.tool.hbm2ddl.SchemaExport] (main) HHH000227: Running hbm2ddl schema export
Hibernate: drop table if exists test_entity_1
Hibernate: drop table if exists hibernate_sequences
Hibernate: create table test_entity_1 (id bigint not null, intAttribute integer not null, stringAttribute varchar(255), primary key (id))
Hibernate: create table hibernate_sequences ( sequence_name varchar(255),  sequence_next_hi_value integer ) 
2018-06-07 16:37:12,143 INFO   (: [  ]  ) [org.hibernate.tool.hbm2ddl.SchemaExport] (main) HHH000230: Schema export complete
check constructions
2018-06-07 16:37:12,149 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L1 changing  from undefined to NOT_SUPPORTED xid: null in SingletonEJB.methodCallUsingSelf
2018-06-07 16:37:12,150 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L2 changing  from NOT_SUPPORTED to REQUIRES_NEW xid: null in SingletonEJB.callInNewTransaction
singleton bean
2018-06-07 16:37:12,150 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L2 finally   in REQUIRES_NEW xid: null in SingletonEJB.callInNewTransaction
2018-06-07 16:37:12,150 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L2 done      REQUIRES_NEW back to NOT_SUPPORTED xid: null in SingletonEJB.callInNewTransaction
singleton bean
2018-06-07 16:37:12,150 INFO   (: [  ]  ) [ejb-cdi-unit tests] (main) SingletonEJB: methodCallUsingSessionContext called
2018-06-07 16:37:12,150 INFO   (: [  ]  ) [ejb-cdi-unit tests] (main) output public variable 100
2018-06-07 16:37:12,150 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L1 finally   in NOT_SUPPORTED xid: null in SingletonEJB.methodCallUsingSelf
2018-06-07 16:37:12,150 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L1 done      NOT_SUPPORTED back to undefined xid: null in SingletonEJB.methodCallUsingSelf
2018-06-07 16:37:12,151 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.persistence.PersistenceFactory] (main) destroying persistence factory testdb
2018-06-07 16:37:12,151 INFO   (: [  ]  ) [org.hibernate.tool.hbm2ddl.SchemaExport] (main) HHH000227: Running hbm2ddl schema export
Hibernate: drop table if exists test_entity_1
Hibernate: drop table if exists hibernate_sequences
2018-06-07 16:37:12,153 INFO   (: [  ]  ) [org.hibernate.tool.hbm2ddl.SchemaExport] (main) HHH000230: Schema export complete
2018-06-07 16:37:12,153 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000030: Cleaning up connection pool [jdbc:h2:mem:test;MODE=MySQL;DB_CLOSE_DELAY=0]
2018-06-07 16:37:12,183 ERROR  (: [  ]  ) [CDI-Unit EJB-ExtensionExtended] (main) Self injection of EJB Type com.oneandone.ejbcdiunit.ejbs.SingletonEJB in field selfejb of Class com.oneandone.ejbcdiunit.ejbs.SingletonEJB can't get simulated by ejb-cdi-unit
2018-06-07 16:37:12,231 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.persistence.PersistenceFactory] (main) creating persistence factory testdb
2018-06-07 16:37:12,291 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000402: Using Hibernate built-in connection pool (not for production use!)
2018-06-07 16:37:12,291 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000115: Hibernate connection pool size: 20
2018-06-07 16:37:12,291 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000006: Autocommit mode: true
2018-06-07 16:37:12,292 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000401: using driver [org.h2.Driver] at URL [jdbc:h2:mem:test;MODE=MySQL;DB_CLOSE_DELAY=0]
2018-06-07 16:37:12,292 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000046: Connection properties: {user=sa, autocommit=true, release_mode=auto}
2018-06-07 16:37:12,296 INFO   (: [  ]  ) [org.hibernate.dialect.Dialect] (main) HHH000400: Using dialect: org.hibernate.dialect.MySQL5Dialect
2018-06-07 16:37:12,298 INFO   (: [  ]  ) [org.hibernate.engine.transaction.internal.TransactionFactoryInitiator] (main) HHH000268: Transaction strategy: org.hibernate.engine.transaction.internal.jdbc.JdbcTransactionFactory
2018-06-07 16:37:12,299 INFO   (: [  ]  ) [org.hibernate.hql.internal.ast.ASTQueryTranslatorFactory] (main) HHH000397: Using ASTQueryTranslatorFactory
2018-06-07 16:37:12,308 INFO   (: [  ]  ) [org.hibernate.tool.hbm2ddl.SchemaExport] (main) HHH000227: Running hbm2ddl schema export
Hibernate: drop table if exists test_entity_1
Hibernate: drop table if exists hibernate_sequences
Hibernate: create table test_entity_1 (id bigint not null, intAttribute integer not null, stringAttribute varchar(255), primary key (id))
Hibernate: create table hibernate_sequences ( sequence_name varchar(255),  sequence_next_hi_value integer ) 
2018-06-07 16:37:12,311 INFO   (: [  ]  ) [org.hibernate.tool.hbm2ddl.SchemaExport] (main) HHH000230: Schema export complete
check constructions
Hibernate: select sequence_next_hi_value from hibernate_sequences where sequence_name = 'test_entity_1' for update
Hibernate: insert into hibernate_sequences(sequence_name, sequence_next_hi_value) values('test_entity_1', ?)
Hibernate: update hibernate_sequences set sequence_next_hi_value = ? where sequence_next_hi_value = ? and sequence_name = 'test_entity_1'
Hibernate: insert into test_entity_1 (intAttribute, stringAttribute, id) values (?, ?, ?)
Hibernate: select testentity0_.id as id1_0_0_, testentity0_.intAttribute as intAttri2_0_0_, testentity0_.stringAttribute as stringAt3_0_0_ from test_entity_1 testentity0_ where testentity0_.id=?
Hibernate: select testentity0_.id as id1_0_0_, testentity0_.intAttribute as intAttri2_0_0_, testentity0_.stringAttribute as stringAt3_0_0_ from test_entity_1 testentity0_ where testentity0_.id=?
Hibernate: update test_entity_1 set intAttribute=?, stringAttribute=? where id=?
Hibernate: select testentity0_.id as id1_0_0_, testentity0_.intAttribute as intAttri2_0_0_, testentity0_.stringAttribute as stringAt3_0_0_ from test_entity_1 testentity0_ where testentity0_.id=?
2018-06-07 16:37:12,339 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.persistence.PersistenceFactory] (main) destroying persistence factory testdb
2018-06-07 16:37:12,340 INFO   (: [  ]  ) [org.hibernate.tool.hbm2ddl.SchemaExport] (main) HHH000227: Running hbm2ddl schema export
Hibernate: drop table if exists test_entity_1
Hibernate: drop table if exists hibernate_sequences
2018-06-07 16:37:12,342 INFO   (: [  ]  ) [org.hibernate.tool.hbm2ddl.SchemaExport] (main) HHH000230: Schema export complete
2018-06-07 16:37:12,342 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000030: Cleaning up connection pool [jdbc:h2:mem:test;MODE=MySQL;DB_CLOSE_DELAY=0]
2018-06-07 16:37:12,383 ERROR  (: [  ]  ) [CDI-Unit EJB-ExtensionExtended] (main) Self injection of EJB Type com.oneandone.ejbcdiunit.ejbs.SingletonEJB in field selfejb of Class com.oneandone.ejbcdiunit.ejbs.SingletonEJB can't get simulated by ejb-cdi-unit
2018-06-07 16:37:12,424 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.persistence.PersistenceFactory] (main) creating persistence factory testdb
2018-06-07 16:37:12,446 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000402: Using Hibernate built-in connection pool (not for production use!)
2018-06-07 16:37:12,446 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000115: Hibernate connection pool size: 20
2018-06-07 16:37:12,446 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000006: Autocommit mode: true
2018-06-07 16:37:12,447 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000401: using driver [org.h2.Driver] at URL [jdbc:h2:mem:test;MODE=MySQL;DB_CLOSE_DELAY=0]
2018-06-07 16:37:12,447 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000046: Connection properties: {user=sa, autocommit=true, release_mode=auto}
2018-06-07 16:37:12,451 INFO   (: [  ]  ) [org.hibernate.dialect.Dialect] (main) HHH000400: Using dialect: org.hibernate.dialect.MySQL5Dialect
2018-06-07 16:37:12,453 INFO   (: [  ]  ) [org.hibernate.engine.transaction.internal.TransactionFactoryInitiator] (main) HHH000268: Transaction strategy: org.hibernate.engine.transaction.internal.jdbc.JdbcTransactionFactory
2018-06-07 16:37:12,454 INFO   (: [  ]  ) [org.hibernate.hql.internal.ast.ASTQueryTranslatorFactory] (main) HHH000397: Using ASTQueryTranslatorFactory
2018-06-07 16:37:12,466 INFO   (: [  ]  ) [org.hibernate.tool.hbm2ddl.SchemaExport] (main) HHH000227: Running hbm2ddl schema export
Hibernate: drop table if exists test_entity_1
Hibernate: drop table if exists hibernate_sequences
Hibernate: create table test_entity_1 (id bigint not null, intAttribute integer not null, stringAttribute varchar(255), primary key (id))
Hibernate: create table hibernate_sequences ( sequence_name varchar(255),  sequence_next_hi_value integer ) 
2018-06-07 16:37:12,469 INFO   (: [  ]  ) [org.hibernate.tool.hbm2ddl.SchemaExport] (main) HHH000230: Schema export complete
check constructions
2018-06-07 16:37:12,476 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L1 changing  from undefined to NOT_SUPPORTED xid: null in StatelessEJB.trySaveInNotSupportedTransaction
2018-06-07 16:37:12,476 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L1 Exception TransactionRequiredException in NOT_SUPPORTED xid: null in StatelessEJB.trySaveInNotSupportedTransaction
2018-06-07 16:37:12,476 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L1 finally   in NOT_SUPPORTED xid: null in StatelessEJB.trySaveInNotSupportedTransaction
2018-06-07 16:37:12,477 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L1 done      NOT_SUPPORTED back to undefined xid: null in StatelessEJB.trySaveInNotSupportedTransaction
2018-06-07 16:37:12,477 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.persistence.PersistenceFactory] (main) destroying persistence factory testdb
2018-06-07 16:37:12,478 INFO   (: [  ]  ) [org.hibernate.tool.hbm2ddl.SchemaExport] (main) HHH000227: Running hbm2ddl schema export
Hibernate: drop table if exists test_entity_1
Hibernate: drop table if exists hibernate_sequences
2018-06-07 16:37:12,479 INFO   (: [  ]  ) [org.hibernate.tool.hbm2ddl.SchemaExport] (main) HHH000230: Schema export complete
2018-06-07 16:37:12,479 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000030: Cleaning up connection pool [jdbc:h2:mem:test;MODE=MySQL;DB_CLOSE_DELAY=0]
2018-06-07 16:37:12,515 ERROR  (: [  ]  ) [CDI-Unit EJB-ExtensionExtended] (main) Self injection of EJB Type com.oneandone.ejbcdiunit.ejbs.SingletonEJB in field selfejb of Class com.oneandone.ejbcdiunit.ejbs.SingletonEJB can't get simulated by ejb-cdi-unit
2018-06-07 16:37:12,567 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.persistence.PersistenceFactory] (main) creating persistence factory testdb
2018-06-07 16:37:12,586 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000402: Using Hibernate built-in connection pool (not for production use!)
2018-06-07 16:37:12,586 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000115: Hibernate connection pool size: 20
2018-06-07 16:37:12,586 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000006: Autocommit mode: true
2018-06-07 16:37:12,586 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000401: using driver [org.h2.Driver] at URL [jdbc:h2:mem:test;MODE=MySQL;DB_CLOSE_DELAY=0]
2018-06-07 16:37:12,586 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000046: Connection properties: {user=sa, autocommit=true, release_mode=auto}
2018-06-07 16:37:12,588 INFO   (: [  ]  ) [org.hibernate.dialect.Dialect] (main) HHH000400: Using dialect: org.hibernate.dialect.MySQL5Dialect
2018-06-07 16:37:12,591 INFO   (: [  ]  ) [org.hibernate.engine.transaction.internal.TransactionFactoryInitiator] (main) HHH000268: Transaction strategy: org.hibernate.engine.transaction.internal.jdbc.JdbcTransactionFactory
2018-06-07 16:37:12,592 INFO   (: [  ]  ) [org.hibernate.hql.internal.ast.ASTQueryTranslatorFactory] (main) HHH000397: Using ASTQueryTranslatorFactory
2018-06-07 16:37:12,602 INFO   (: [  ]  ) [org.hibernate.tool.hbm2ddl.SchemaExport] (main) HHH000227: Running hbm2ddl schema export
Hibernate: drop table if exists test_entity_1
Hibernate: drop table if exists hibernate_sequences
Hibernate: create table test_entity_1 (id bigint not null, intAttribute integer not null, stringAttribute varchar(255), primary key (id))
Hibernate: create table hibernate_sequences ( sequence_name varchar(255),  sequence_next_hi_value integer ) 
2018-06-07 16:37:12,604 INFO   (: [  ]  ) [org.hibernate.tool.hbm2ddl.SchemaExport] (main) HHH000230: Schema export complete
check constructions
2018-06-07 16:37:12,612 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L1 changing  from undefined to SUPPORTS xid: null in StatelessEJB.saveInSupportedTransaction
Hibernate: select sequence_next_hi_value from hibernate_sequences where sequence_name = 'test_entity_1' for update
Hibernate: insert into hibernate_sequences(sequence_name, sequence_next_hi_value) values('test_entity_1', ?)
Hibernate: update hibernate_sequences set sequence_next_hi_value = ? where sequence_next_hi_value = ? and sequence_name = 'test_entity_1'
2018-06-07 16:37:12,613 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L1 finally   in SUPPORTS xid: 41 in StatelessEJB.saveInSupportedTransaction
2018-06-07 16:37:12,613 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L1 done      SUPPORTS back to undefined xid: 41 in StatelessEJB.saveInSupportedTransaction
Hibernate: insert into test_entity_1 (intAttribute, stringAttribute, id) values (?, ?, ?)
2018-06-07 16:37:12,616 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.persistence.PersistenceFactory] (main) destroying persistence factory testdb
2018-06-07 16:37:12,616 INFO   (: [  ]  ) [org.hibernate.tool.hbm2ddl.SchemaExport] (main) HHH000227: Running hbm2ddl schema export
Hibernate: drop table if exists test_entity_1
Hibernate: drop table if exists hibernate_sequences
2018-06-07 16:37:12,618 INFO   (: [  ]  ) [org.hibernate.tool.hbm2ddl.SchemaExport] (main) HHH000230: Schema export complete
2018-06-07 16:37:12,618 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000030: Cleaning up connection pool [jdbc:h2:mem:test;MODE=MySQL;DB_CLOSE_DELAY=0]
2018-06-07 16:37:12,650 ERROR  (: [  ]  ) [CDI-Unit EJB-ExtensionExtended] (main) Self injection of EJB Type com.oneandone.ejbcdiunit.ejbs.SingletonEJB in field selfejb of Class com.oneandone.ejbcdiunit.ejbs.SingletonEJB can't get simulated by ejb-cdi-unit
2018-06-07 16:37:12,695 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.persistence.PersistenceFactory] (main) creating persistence factory testdb
2018-06-07 16:37:12,724 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000402: Using Hibernate built-in connection pool (not for production use!)
2018-06-07 16:37:12,724 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000115: Hibernate connection pool size: 20
2018-06-07 16:37:12,724 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000006: Autocommit mode: true
2018-06-07 16:37:12,724 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000401: using driver [org.h2.Driver] at URL [jdbc:h2:mem:test;MODE=MySQL;DB_CLOSE_DELAY=0]
2018-06-07 16:37:12,725 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000046: Connection properties: {user=sa, autocommit=true, release_mode=auto}
2018-06-07 16:37:12,728 INFO   (: [  ]  ) [org.hibernate.dialect.Dialect] (main) HHH000400: Using dialect: org.hibernate.dialect.MySQL5Dialect
2018-06-07 16:37:12,731 INFO   (: [  ]  ) [org.hibernate.engine.transaction.internal.TransactionFactoryInitiator] (main) HHH000268: Transaction strategy: org.hibernate.engine.transaction.internal.jdbc.JdbcTransactionFactory
2018-06-07 16:37:12,731 INFO   (: [  ]  ) [org.hibernate.hql.internal.ast.ASTQueryTranslatorFactory] (main) HHH000397: Using ASTQueryTranslatorFactory
2018-06-07 16:37:12,744 INFO   (: [  ]  ) [org.hibernate.tool.hbm2ddl.SchemaExport] (main) HHH000227: Running hbm2ddl schema export
Hibernate: drop table if exists test_entity_1
Hibernate: drop table if exists hibernate_sequences
Hibernate: create table test_entity_1 (id bigint not null, intAttribute integer not null, stringAttribute varchar(255), primary key (id))
Hibernate: create table hibernate_sequences ( sequence_name varchar(255),  sequence_next_hi_value integer ) 
2018-06-07 16:37:12,748 INFO   (: [  ]  ) [org.hibernate.tool.hbm2ddl.SchemaExport] (main) HHH000230: Schema export complete
check constructions
2018-06-07 16:37:12,755 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L1 changing  from undefined to NOT_SUPPORTED xid: null in SingletonEJB.methodCallUsingSelfEjb
2018-06-07 16:37:12,755 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L2 changing  from NOT_SUPPORTED to REQUIRES_NEW xid: null in SingletonEJB.callInNewTransaction
singleton bean
2018-06-07 16:37:12,755 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L2 finally   in REQUIRES_NEW xid: null in SingletonEJB.callInNewTransaction
2018-06-07 16:37:12,755 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L2 done      REQUIRES_NEW back to NOT_SUPPORTED xid: null in SingletonEJB.callInNewTransaction
singleton bean
2018-06-07 16:37:12,755 INFO   (: [  ]  ) [ejb-cdi-unit tests] (main) SingletonEJB: methodCallUsingSessionContext called
2018-06-07 16:37:12,755 INFO   (: [  ]  ) [ejb-cdi-unit tests] (main) output public variable 100
2018-06-07 16:37:12,755 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L1 finally   in NOT_SUPPORTED xid: null in SingletonEJB.methodCallUsingSelfEjb
2018-06-07 16:37:12,756 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L1 done      NOT_SUPPORTED back to undefined xid: null in SingletonEJB.methodCallUsingSelfEjb
2018-06-07 16:37:12,756 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.persistence.PersistenceFactory] (main) destroying persistence factory testdb
2018-06-07 16:37:12,756 INFO   (: [  ]  ) [org.hibernate.tool.hbm2ddl.SchemaExport] (main) HHH000227: Running hbm2ddl schema export
Hibernate: drop table if exists test_entity_1
Hibernate: drop table if exists hibernate_sequences
2018-06-07 16:37:12,758 INFO   (: [  ]  ) [org.hibernate.tool.hbm2ddl.SchemaExport] (main) HHH000230: Schema export complete
2018-06-07 16:37:12,758 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000030: Cleaning up connection pool [jdbc:h2:mem:test;MODE=MySQL;DB_CLOSE_DELAY=0]
2018-06-07 16:37:12,796 ERROR  (: [  ]  ) [CDI-Unit EJB-ExtensionExtended] (main) Self injection of EJB Type com.oneandone.ejbcdiunit.ejbs.SingletonEJB in field selfejb of Class com.oneandone.ejbcdiunit.ejbs.SingletonEJB can't get simulated by ejb-cdi-unit
2018-06-07 16:37:12,839 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.persistence.PersistenceFactory] (main) creating persistence factory testdb
2018-06-07 16:37:12,869 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000402: Using Hibernate built-in connection pool (not for production use!)
2018-06-07 16:37:12,869 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000115: Hibernate connection pool size: 20
2018-06-07 16:37:12,869 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000006: Autocommit mode: true
2018-06-07 16:37:12,870 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000401: using driver [org.h2.Driver] at URL [jdbc:h2:mem:test;MODE=MySQL;DB_CLOSE_DELAY=0]
2018-06-07 16:37:12,870 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000046: Connection properties: {user=sa, autocommit=true, release_mode=auto}
2018-06-07 16:37:12,873 INFO   (: [  ]  ) [org.hibernate.dialect.Dialect] (main) HHH000400: Using dialect: org.hibernate.dialect.MySQL5Dialect
2018-06-07 16:37:12,876 INFO   (: [  ]  ) [org.hibernate.engine.transaction.internal.TransactionFactoryInitiator] (main) HHH000268: Transaction strategy: org.hibernate.engine.transaction.internal.jdbc.JdbcTransactionFactory
2018-06-07 16:37:12,876 INFO   (: [  ]  ) [org.hibernate.hql.internal.ast.ASTQueryTranslatorFactory] (main) HHH000397: Using ASTQueryTranslatorFactory
2018-06-07 16:37:12,887 INFO   (: [  ]  ) [org.hibernate.tool.hbm2ddl.SchemaExport] (main) HHH000227: Running hbm2ddl schema export
Hibernate: drop table if exists test_entity_1
Hibernate: drop table if exists hibernate_sequences
Hibernate: create table test_entity_1 (id bigint not null, intAttribute integer not null, stringAttribute varchar(255), primary key (id))
Hibernate: create table hibernate_sequences ( sequence_name varchar(255),  sequence_next_hi_value integer ) 
2018-06-07 16:37:12,888 INFO   (: [  ]  ) [org.hibernate.tool.hbm2ddl.SchemaExport] (main) HHH000230: Schema export complete
check constructions
2018-06-07 16:37:12,896 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L1 changing  from undefined to REQUIRES_NEW xid: null in OuterClass.saveNewInNewTraThrow
2018-06-07 16:37:12,896 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L2 changing  from REQUIRES_NEW to REQUIRES_NEW xid: null in StatelessEJB.saveInNewTransaction
Hibernate: select sequence_next_hi_value from hibernate_sequences where sequence_name = 'test_entity_1' for update
Hibernate: insert into hibernate_sequences(sequence_name, sequence_next_hi_value) values('test_entity_1', ?)
Hibernate: update hibernate_sequences set sequence_next_hi_value = ? where sequence_next_hi_value = ? and sequence_name = 'test_entity_1'
2018-06-07 16:37:12,898 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L2 finally   in REQUIRES_NEW xid: 44 in StatelessEJB.saveInNewTransaction
Hibernate: insert into test_entity_1 (intAttribute, stringAttribute, id) values (?, ?, ?)
2018-06-07 16:37:12,901 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L2 done      REQUIRES_NEW back to REQUIRES_NEW xid: 43 in StatelessEJB.saveInNewTransaction
2018-06-07 16:37:12,902 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L1 Exception RuntimeException in REQUIRES_NEW xid: 43 in OuterClass.saveNewInNewTraThrow
2018-06-07 16:37:12,902 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L1 finally   in REQUIRES_NEW xid: 42 in OuterClass.saveNewInNewTraThrow
2018-06-07 16:37:12,902 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.internal.TransactionalInterceptor] (main) Thread 1 L1 done      REQUIRES_NEW back to undefined xid: null in OuterClass.saveNewInNewTraThrow
Hibernate: insert into test_entity_1 (intAttribute, stringAttribute, id) values (?, ?, ?)
Hibernate: select count(testentity0_.id) as col_0_0_ from test_entity_1 testentity0_
Hibernate: select count(testentity0_.id) as col_0_0_ from test_entity_1 testentity0_
2018-06-07 16:37:12,909 INFO   (: [  ]  ) [com.oneandone.ejbcdiunit.persistence.PersistenceFactory] (main) destroying persistence factory testdb
2018-06-07 16:37:12,909 INFO   (: [  ]  ) [org.hibernate.tool.hbm2ddl.SchemaExport] (main) HHH000227: Running hbm2ddl schema export
Hibernate: drop table if exists test_entity_1
Hibernate: drop table if exists hibernate_sequences
2018-06-07 16:37:12,911 INFO   (: [  ]  ) [org.hibernate.tool.hbm2ddl.SchemaExport] (main) HHH000230: Schema export complete
2018-06-07 16:37:12,911 INFO   (: [  ]  ) [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (main) HHH000030: Cleaning up connection pool [jdbc:h2:mem:test;MODE=MySQL;DB_CLOSE_DELAY=0]
