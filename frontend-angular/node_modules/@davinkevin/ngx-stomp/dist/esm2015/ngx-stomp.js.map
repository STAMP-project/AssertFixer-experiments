{
	"version": 3,
	"file": null,
	"sources": [
		"configuration.js",
		"stomp.service.js",
		"stomp.module.js",
		"index.js",
		"ngx-stomp.js"
	],
	"sourcesContent": [
		"/**\n * @fileoverview added by tsickle\n * @suppress {checkTypes} checked by tsc\n */\nimport { InjectionToken } from '@angular/core';\nexport const /** @type {?} */ STOMP_CONFIGURATION = new InjectionToken('STOMP_CONFIGURATION');\n/**\n * @record\n */\nexport function StompConfiguration() { }\nfunction StompConfiguration_tsickle_Closure_declarations() {\n    /** @type {?} */\n    StompConfiguration.prototype.login;\n    /** @type {?} */\n    StompConfiguration.prototype.password;\n    /** @type {?} */\n    StompConfiguration.prototype.url;\n    /** @type {?} */\n    StompConfiguration.prototype.debug;\n    /** @type {?} */\n    StompConfiguration.prototype.vhost;\n    /** @type {?} */\n    StompConfiguration.prototype.headers;\n    /** @type {?|undefined} */\n    StompConfiguration.prototype.over;\n}\nexport const /** @type {?} */ STOMP_JS = new InjectionToken('STOMP_JS');\n//# sourceMappingURL=configuration.js.map",
		"/**\n * @fileoverview added by tsickle\n * @suppress {checkTypes} checked by tsc\n */\nimport { Inject, Injectable } from '@angular/core';\nimport { STOMP_CONFIGURATION, STOMP_JS } from './configuration';\nimport { Observable } from 'rxjs/Observable';\nimport { concatMap, map, publishReplay } from 'rxjs/operators';\nimport { DOCUMENT } from '@angular/common';\n/**\n * @record\n */\nexport function Stomp() { }\nfunction Stomp_tsickle_Closure_declarations() {\n    /** @type {?} */\n    Stomp.prototype.client;\n    /** @type {?} */\n    Stomp.prototype.over;\n}\nexport class StompService {\n    /**\n     * @param {?} conf\n     * @param {?} stomp\n     * @param {?} document\n     */\n    constructor(conf, stomp, document) {\n        this.conf = conf;\n        this.stomp = stomp;\n        this.cl = initClient(stomp, this.conf.over, this.conf.url, document.location);\n        this.cl.debug = initDebug(this.conf.debug);\n        this.connection$ = initConnection(this.cl, this.conf);\n    }\n    /**\n     * @template T\n     * @param {?} topic\n     * @return {?}\n     */\n    on(topic) {\n        return this.connection$.pipe(onTopic(topic), toJSON());\n    }\n}\nStompService.decorators = [\n    { type: Injectable },\n];\n/** @nocollapse */\nStompService.ctorParameters = () => [\n    { type: undefined, decorators: [{ type: Inject, args: [STOMP_CONFIGURATION,] },] },\n    { type: undefined, decorators: [{ type: Inject, args: [STOMP_JS,] },] },\n    { type: undefined, decorators: [{ type: Inject, args: [DOCUMENT,] },] },\n];\nfunction StompService_tsickle_Closure_declarations() {\n    /** @type {!Array<{type: !Function, args: (undefined|!Array<?>)}>} */\n    StompService.decorators;\n    /**\n     * @nocollapse\n     * @type {function(): !Array<(null|{type: ?, decorators: (undefined|!Array<{type: !Function, args: (undefined|!Array<?>)}>)})>}\n     */\n    StompService.ctorParameters;\n    /** @type {?} */\n    StompService.prototype.cl;\n    /** @type {?} */\n    StompService.prototype.connection$;\n    /** @type {?} */\n    StompService.prototype.conf;\n    /** @type {?} */\n    StompService.prototype.stomp;\n}\n/**\n * @param {?} topic\n * @return {?}\n */\nfunction onTopic(topic) {\n    return concatMap((c) => Observable.create(observer => {\n        const /** @type {?} */ subscription = c.subscribe(topic, v => observer.next(v), {});\n        return () => {\n            subscription.unsubscribe();\n        };\n    }));\n}\n/**\n * @template T\n * @return {?}\n */\nfunction toJSON() {\n    return map((m) => JSON.parse(m.body));\n}\n/**\n * @param {?} stomp\n * @param {?} c\n * @param {?} url\n * @param {?} loc\n * @return {?}\n */\nfunction initClient(stomp, c, url, loc) {\n    if (c) {\n        return stomp.over(c);\n    }\n    const /** @type {?} */ urlNormalized = normalizeUrl(url, loc);\n    console.log(urlNormalized);\n    return stomp.client(urlNormalized);\n}\n/**\n * @param {?} isActivated\n * @return {?}\n */\nfunction initDebug(isActivated) {\n    return isActivated ? console.log : () => { };\n}\n/**\n * @param {?} client\n * @param {?} config\n * @return {?}\n */\nfunction initConnection(client, config) {\n    const /** @type {?} */ c$ = Observable.create(obs => {\n        client.connect(config.login, config.password, () => obs.next(client), e => obs.error(e), config.vhost);\n    })\n        .pipe(publishReplay(1));\n    c$.connect();\n    return c$;\n}\n/**\n * @param {?} url\n * @param {?} loc\n * @return {?}\n */\nfunction normalizeUrl(url, loc) {\n    if (url == null) {\n        throw new Error('No url found for web-socket');\n    }\n    if (url.startsWith('/')) {\n        return toWsProtocol(loc.protocol) + '//' + loc.hostname + ':' + loc.port + url;\n    }\n    try {\n        return new URL(url).toString();\n    }\n    catch (/** @type {?} */ e) {\n        console.error(e);\n        throw new Error(`Url with format ${url} not handle for now. Should be complete or start with /`);\n    }\n}\n/**\n * @param {?} protocol\n * @return {?}\n */\nfunction toWsProtocol(protocol) {\n    return 'http:' === protocol ? 'ws:' : 'wss:';\n}\n//# sourceMappingURL=stomp.service.js.map",
		"/**\n * @fileoverview added by tsickle\n * @suppress {checkTypes} checked by tsc\n */\nimport { NgModule } from '@angular/core';\nimport { STOMP_CONFIGURATION, STOMP_JS } from './configuration';\nimport { StompService } from './stomp.service';\nimport * as StompJS from 'stompjs';\n/**\n * @return {?}\n */\nexport function stompJsFactory() {\n    return StompJS;\n}\nexport class NgxStompModule {\n    /**\n     * @param {?} config\n     * @return {?}\n     */\n    static withConfig(config) {\n        return {\n            ngModule: NgxStompModule,\n            providers: [\n                { provide: STOMP_CONFIGURATION, useValue: config },\n                { provide: STOMP_JS, useFactory: stompJsFactory },\n                StompService\n            ]\n        };\n    }\n}\nNgxStompModule.decorators = [\n    { type: NgModule, args: [{},] },\n];\n/** @nocollapse */\nNgxStompModule.ctorParameters = () => [];\nfunction NgxStompModule_tsickle_Closure_declarations() {\n    /** @type {!Array<{type: !Function, args: (undefined|!Array<?>)}>} */\n    NgxStompModule.decorators;\n    /**\n     * @nocollapse\n     * @type {function(): !Array<(null|{type: ?, decorators: (undefined|!Array<{type: !Function, args: (undefined|!Array<?>)}>)})>}\n     */\n    NgxStompModule.ctorParameters;\n}\n//# sourceMappingURL=stomp.module.js.map",
		"/**\n * @fileoverview added by tsickle\n * @suppress {checkTypes} checked by tsc\n */\nexport { stompJsFactory, NgxStompModule } from './stomp.module';\nexport { StompService } from './stomp.service';\nexport { STOMP_CONFIGURATION, STOMP_JS } from './configuration';\n//# sourceMappingURL=index.js.map",
		"/**\n * @fileoverview added by tsickle\n * @suppress {checkTypes} checked by tsc\n */\n/**\n * Generated bundle index. Do not edit.\n */\nexport { stompJsFactory, NgxStompModule, StompService, STOMP_CONFIGURATION, STOMP_JS } from './index';\n//# sourceMappingURL=ngx-stomp.js.map"
	],
	"names": [
		"Observable"
	],
	"mappings": ";;;;;;AAAA;;;;AAIA,AACO,MAAuB,mBAAmB,GAAG,IAAI,cAAc,CAAC,qBAAqB,CAAC,CAAC;;;;AAI9F,AAAwC;AACxC,AAgBO,MAAuB,QAAQ,GAAG,IAAI,cAAc,CAAC,UAAU,CAAC;;AC1BvE;;;;AAIA,AAKA;;;AAGA,AAA2B;AAC3B,AAMO,MAAM,YAAY,CAAC;;;;;;IAMtB,WAAW,CAAC,IAAI,EAAE,KAAK,EAAE,QAAQ,EAAE;QAC/B,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC;QACjB,IAAI,CAAC,KAAK,GAAG,KAAK,CAAC;QACnB,IAAI,CAAC,EAAE,GAAG,UAAU,CAAC,KAAK,EAAE,IAAI,CAAC,IAAI,CAAC,IAAI,EAAE,IAAI,CAAC,IAAI,CAAC,GAAG,EAAE,QAAQ,CAAC,QAAQ,CAAC,CAAC;QAC9E,IAAI,CAAC,EAAE,CAAC,KAAK,GAAG,SAAS,CAAC,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;QAC3C,IAAI,CAAC,WAAW,GAAG,cAAc,CAAC,IAAI,CAAC,EAAE,EAAE,IAAI,CAAC,IAAI,CAAC,CAAC;KACzD;;;;;;IAMD,EAAE,CAAC,KAAK,EAAE;QACN,OAAO,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,OAAO,CAAC,KAAK,CAAC,EAAE,MAAM,EAAE,CAAC,CAAC;KAC1D;CACJ;AACD,YAAY,CAAC,UAAU,GAAG;IACtB,EAAE,IAAI,EAAE,UAAU,EAAE;CACvB,CAAC;;AAEF,YAAY,CAAC,cAAc,GAAG,MAAM;IAChC,EAAE,IAAI,EAAE,SAAS,EAAE,UAAU,EAAE,CAAC,EAAE,IAAI,EAAE,MAAM,EAAE,IAAI,EAAE,CAAC,mBAAmB,EAAE,EAAE,EAAE,EAAE;IAClF,EAAE,IAAI,EAAE,SAAS,EAAE,UAAU,EAAE,CAAC,EAAE,IAAI,EAAE,MAAM,EAAE,IAAI,EAAE,CAAC,QAAQ,EAAE,EAAE,EAAE,EAAE;IACvE,EAAE,IAAI,EAAE,SAAS,EAAE,UAAU,EAAE,CAAC,EAAE,IAAI,EAAE,MAAM,EAAE,IAAI,EAAE,CAAC,QAAQ,EAAE,EAAE,EAAE,EAAE;CAC1E,CAAC;AACF,AAiBA;;;;AAIA,SAAS,OAAO,CAAC,KAAK,EAAE;IACpB,OAAO,SAAS,CAAC,CAAC,CAAC,KAAKA,YAAU,CAAC,MAAM,CAAC,QAAQ,IAAI;QAClD,uBAAuB,YAAY,GAAG,CAAC,CAAC,SAAS,CAAC,KAAK,EAAE,CAAC,IAAI,QAAQ,CAAC,IAAI,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC;QACpF,OAAO,MAAM;YACT,YAAY,CAAC,WAAW,EAAE,CAAC;SAC9B,CAAC;KACL,CAAC,CAAC,CAAC;CACP;;;;;AAKD,SAAS,MAAM,GAAG;IACd,OAAO,GAAG,CAAC,CAAC,CAAC,KAAK,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC;CACzC;;;;;;;;AAQD,SAAS,UAAU,CAAC,KAAK,EAAE,CAAC,EAAE,GAAG,EAAE,GAAG,EAAE;IACpC,IAAI,CAAC,EAAE;QACH,OAAO,KAAK,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC;KACxB;IACD,uBAAuB,aAAa,GAAG,YAAY,CAAC,GAAG,EAAE,GAAG,CAAC,CAAC;IAC9D,OAAO,CAAC,GAAG,CAAC,aAAa,CAAC,CAAC;IAC3B,OAAO,KAAK,CAAC,MAAM,CAAC,aAAa,CAAC,CAAC;CACtC;;;;;AAKD,SAAS,SAAS,CAAC,WAAW,EAAE;IAC5B,OAAO,WAAW,GAAG,OAAO,CAAC,GAAG,GAAG,MAAM,GAAG,CAAC;CAChD;;;;;;AAMD,SAAS,cAAc,CAAC,MAAM,EAAE,MAAM,EAAE;IACpC,uBAAuB,EAAE,GAAGA,YAAU,CAAC,MAAM,CAAC,GAAG,IAAI;QACjD,MAAM,CAAC,OAAO,CAAC,MAAM,CAAC,KAAK,EAAE,MAAM,CAAC,QAAQ,EAAE,MAAM,GAAG,CAAC,IAAI,CAAC,MAAM,CAAC,EAAE,CAAC,IAAI,GAAG,CAAC,KAAK,CAAC,CAAC,CAAC,EAAE,MAAM,CAAC,KAAK,CAAC,CAAC;KAC1G,CAAC;SACG,IAAI,CAAC,aAAa,CAAC,CAAC,CAAC,CAAC,CAAC;IAC5B,EAAE,CAAC,OAAO,EAAE,CAAC;IACb,OAAO,EAAE,CAAC;CACb;;;;;;AAMD,SAAS,YAAY,CAAC,GAAG,EAAE,GAAG,EAAE;IAC5B,IAAI,GAAG,IAAI,IAAI,EAAE;QACb,MAAM,IAAI,KAAK,CAAC,6BAA6B,CAAC,CAAC;KAClD;IACD,IAAI,GAAG,CAAC,UAAU,CAAC,GAAG,CAAC,EAAE;QACrB,OAAO,YAAY,CAAC,GAAG,CAAC,QAAQ,CAAC,GAAG,IAAI,GAAG,GAAG,CAAC,QAAQ,GAAG,GAAG,GAAG,GAAG,CAAC,IAAI,GAAG,GAAG,CAAC;KAClF;IACD,IAAI;QACA,OAAO,IAAI,GAAG,CAAC,GAAG,CAAC,CAAC,QAAQ,EAAE,CAAC;KAClC;IACD,wBAAwB,CAAC,EAAE;QACvB,OAAO,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC;QACjB,MAAM,IAAI,KAAK,CAAC,CAAC,gBAAgB,EAAE,GAAG,CAAC,uDAAuD,CAAC,CAAC,CAAC;KACpG;CACJ;;;;;AAKD,SAAS,YAAY,CAAC,QAAQ,EAAE;IAC5B,OAAO,OAAO,KAAK,QAAQ,GAAG,KAAK,GAAG,MAAM,CAAC;CAChD;;ACnJD;;;;AAIA,AAIA;;;AAGA,AAAO,SAAS,cAAc,GAAG;IAC7B,OAAO,OAAO,CAAC;CAClB;AACD,AAAO,MAAM,cAAc,CAAC;;;;;IAKxB,OAAO,UAAU,CAAC,MAAM,EAAE;QACtB,OAAO;YACH,QAAQ,EAAE,cAAc;YACxB,SAAS,EAAE;gBACP,EAAE,OAAO,EAAE,mBAAmB,EAAE,QAAQ,EAAE,MAAM,EAAE;gBAClD,EAAE,OAAO,EAAE,QAAQ,EAAE,UAAU,EAAE,cAAc,EAAE;gBACjD,YAAY;aACf;SACJ,CAAC;KACL;CACJ;AACD,cAAc,CAAC,UAAU,GAAG;IACxB,EAAE,IAAI,EAAE,QAAQ,EAAE,IAAI,EAAE,CAAC,EAAE,EAAE,EAAE;CAClC,CAAC;;AAEF,cAAc,CAAC,cAAc,GAAG,MAAM,EAAE,CAAC;;AClCzC;;;GAGG;;ACHH;;;;;;GAMG;;;;"
}
