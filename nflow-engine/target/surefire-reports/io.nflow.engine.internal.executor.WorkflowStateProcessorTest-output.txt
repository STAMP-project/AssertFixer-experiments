05.06.2018 09:53:28 ERROR [pool-3-thread-1] xecutor.WorkflowStateProcessor - [user:] Failed to save workflow instance new state, retrying after 1 seconds
java.lang.RuntimeException: some failure
	at io.nflow.engine.internal.executor.WorkflowStateProcessor.persistWorkflowInstanceState(WorkflowStateProcessor.java:241)
	at io.nflow.engine.internal.executor.WorkflowStateProcessor.saveWorkflowInstanceState(WorkflowStateProcessor.java:214)
	at io.nflow.engine.internal.executor.WorkflowStateProcessor.runImpl(WorkflowStateProcessor.java:156)
	at io.nflow.engine.internal.executor.WorkflowStateProcessor.run(WorkflowStateProcessor.java:103)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)
	at java.lang.Thread.run(Thread.java:745)
05.06.2018 09:53:29 ERROR [pool-3-thread-1] xecutor.WorkflowStateProcessor - [user:] Failed to save workflow instance new state, retrying after 1 seconds
java.lang.RuntimeException: some failure
	at io.nflow.engine.internal.executor.WorkflowStateProcessor.persistWorkflowInstanceState(WorkflowStateProcessor.java:241)
	at io.nflow.engine.internal.executor.WorkflowStateProcessor.saveWorkflowInstanceState(WorkflowStateProcessor.java:214)
	at io.nflow.engine.internal.executor.WorkflowStateProcessor.runImpl(WorkflowStateProcessor.java:156)
	at io.nflow.engine.internal.executor.WorkflowStateProcessor.run(WorkflowStateProcessor.java:103)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)
	at java.lang.Thread.run(Thread.java:745)
05.06.2018 09:53:30 WARN  [Time-limited test] xecutor.WorkflowStateProcessor - [user:] Workflow type test not configured to this nFlow instance - rescheduling workflow instance
05.06.2018 09:53:30 WARN  [Time-limited test] xecutor.WorkflowStateProcessor - [user:] Workflow state invalid not configured to workflow type simple-test - rescheduling workflow instance
05.06.2018 09:53:30 ERROR [Time-limited test] xecutor.WorkflowStateProcessor - [user:] Handler threw exception, trying again later.
java.lang.RuntimeException: test-fail
	at io.nflow.engine.internal.executor.WorkflowStateProcessorTest$FailingTestWorkflow.start(WorkflowStateProcessorTest.java:950)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.springframework.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:216)
	at io.nflow.engine.internal.executor.WorkflowStateProcessor$NormalStateHandler.getNextAction(WorkflowStateProcessor.java:347)
	at io.nflow.engine.internal.executor.WorkflowStateProcessor$StateHandler.processState(WorkflowStateProcessor.java:396)
	at io.nflow.engine.internal.executor.WorkflowStateProcessor$ProcessingExecutorListener.process(WorkflowStateProcessor.java:333)
	at io.nflow.engine.internal.executor.WorkflowStateProcessor$ExecutorListenerChain.next(WorkflowStateProcessor.java:313)
	at io.nflow.engine.internal.executor.WorkflowStateProcessorTest$2.answer(WorkflowStateProcessorTest.java:391)
	at org.mockito.internal.stubbing.StubbedInvocationMatcher.answer(StubbedInvocationMatcher.java:35)
	at org.mockito.internal.handler.MockHandlerImpl.handle(MockHandlerImpl.java:92)
	at org.mockito.internal.handler.NullResultGuardian.handle(NullResultGuardian.java:32)
	at org.mockito.internal.handler.InvocationNotifierHandler.handle(InvocationNotifierHandler.java:36)
	at org.mockito.internal.creation.bytebuddy.MockMethodInterceptor.doIntercept(MockMethodInterceptor.java:41)
	at org.mockito.internal.creation.bytebuddy.MockMethodInterceptor$DispatcherDefaultingToRealMethod.interceptAbstract(MockMethodInterceptor.java:120)
	at io.nflow.engine.listener.WorkflowExecutorListener$MockitoMock$1810067102.process(Unknown Source)
	at io.nflow.engine.internal.executor.WorkflowStateProcessor$ExecutorListenerChain.next(WorkflowStateProcessor.java:313)
	at io.nflow.engine.internal.executor.WorkflowStateProcessorTest$2.answer(WorkflowStateProcessorTest.java:391)
	at org.mockito.internal.stubbing.StubbedInvocationMatcher.answer(StubbedInvocationMatcher.java:35)
	at org.mockito.internal.handler.MockHandlerImpl.handle(MockHandlerImpl.java:92)
	at org.mockito.internal.handler.NullResultGuardian.handle(NullResultGuardian.java:32)
	at org.mockito.internal.handler.InvocationNotifierHandler.handle(InvocationNotifierHandler.java:36)
	at org.mockito.internal.creation.bytebuddy.MockMethodInterceptor.doIntercept(MockMethodInterceptor.java:41)
	at org.mockito.internal.creation.bytebuddy.MockMethodInterceptor$DispatcherDefaultingToRealMethod.interceptAbstract(MockMethodInterceptor.java:120)
	at io.nflow.engine.listener.WorkflowExecutorListener$MockitoMock$1810067102.process(Unknown Source)
	at io.nflow.engine.internal.executor.WorkflowStateProcessor$ExecutorListenerChain.next(WorkflowStateProcessor.java:313)
	at io.nflow.engine.internal.executor.WorkflowStateProcessor.processWithListeners(WorkflowStateProcessor.java:295)
	at io.nflow.engine.internal.executor.WorkflowStateProcessor.runImpl(WorkflowStateProcessor.java:141)
	at io.nflow.engine.internal.executor.WorkflowStateProcessor.run(WorkflowStateProcessor.java:103)
	at io.nflow.engine.internal.executor.WorkflowStateProcessorTest.runWorkflowThroughToFailureState(WorkflowStateProcessorTest.java:220)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:50)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:47)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:298)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:292)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.lang.Thread.run(Thread.java:745)
05.06.2018 09:53:30 ERROR [Time-limited test] xecutor.WorkflowStateProcessor - [user:] Handler threw exception, trying again later.
java.lang.RuntimeException: test-fail
	at io.nflow.engine.internal.executor.WorkflowStateProcessorTest$FailingTestWorkflow.start(WorkflowStateProcessorTest.java:950)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.springframework.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:216)
	at io.nflow.engine.internal.executor.WorkflowStateProcessor$NormalStateHandler.getNextAction(WorkflowStateProcessor.java:347)
	at io.nflow.engine.internal.executor.WorkflowStateProcessor$StateHandler.processState(WorkflowStateProcessor.java:396)
	at io.nflow.engine.internal.executor.WorkflowStateProcessor$ProcessingExecutorListener.process(WorkflowStateProcessor.java:333)
	at io.nflow.engine.internal.executor.WorkflowStateProcessor$ExecutorListenerChain.next(WorkflowStateProcessor.java:313)
	at io.nflow.engine.internal.executor.WorkflowStateProcessorTest$2.answer(WorkflowStateProcessorTest.java:391)
	at org.mockito.internal.stubbing.StubbedInvocationMatcher.answer(StubbedInvocationMatcher.java:35)
	at org.mockito.internal.handler.MockHandlerImpl.handle(MockHandlerImpl.java:92)
	at org.mockito.internal.handler.NullResultGuardian.handle(NullResultGuardian.java:32)
	at org.mockito.internal.handler.InvocationNotifierHandler.handle(InvocationNotifierHandler.java:36)
	at org.mockito.internal.creation.bytebuddy.MockMethodInterceptor.doIntercept(MockMethodInterceptor.java:41)
	at org.mockito.internal.creation.bytebuddy.MockMethodInterceptor$DispatcherDefaultingToRealMethod.interceptAbstract(MockMethodInterceptor.java:120)
	at io.nflow.engine.listener.WorkflowExecutorListener$MockitoMock$1810067102.process(Unknown Source)
	at io.nflow.engine.internal.executor.WorkflowStateProcessor$ExecutorListenerChain.next(WorkflowStateProcessor.java:313)
	at io.nflow.engine.internal.executor.WorkflowStateProcessorTest$2.answer(WorkflowStateProcessorTest.java:391)
	at org.mockito.internal.stubbing.StubbedInvocationMatcher.answer(StubbedInvocationMatcher.java:35)
	at org.mockito.internal.handler.MockHandlerImpl.handle(MockHandlerImpl.java:92)
	at org.mockito.internal.handler.NullResultGuardian.handle(NullResultGuardian.java:32)
	at org.mockito.internal.handler.InvocationNotifierHandler.handle(InvocationNotifierHandler.java:36)
	at org.mockito.internal.creation.bytebuddy.MockMethodInterceptor.doIntercept(MockMethodInterceptor.java:41)
	at org.mockito.internal.creation.bytebuddy.MockMethodInterceptor$DispatcherDefaultingToRealMethod.interceptAbstract(MockMethodInterceptor.java:120)
	at io.nflow.engine.listener.WorkflowExecutorListener$MockitoMock$1810067102.process(Unknown Source)
	at io.nflow.engine.internal.executor.WorkflowStateProcessor$ExecutorListenerChain.next(WorkflowStateProcessor.java:313)
	at io.nflow.engine.internal.executor.WorkflowStateProcessor.processWithListeners(WorkflowStateProcessor.java:295)
	at io.nflow.engine.internal.executor.WorkflowStateProcessor.runImpl(WorkflowStateProcessor.java:141)
	at io.nflow.engine.internal.executor.WorkflowStateProcessor.run(WorkflowStateProcessor.java:103)
	at io.nflow.engine.internal.executor.WorkflowStateProcessorTest.failureListenersAreExecutedAfterFailure(WorkflowStateProcessorTest.java:657)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:50)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:47)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:298)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:292)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.lang.Thread.run(Thread.java:745)
05.06.2018 09:53:30 ERROR [Time-limited test] xecutor.WorkflowStateProcessor - [user:] State 'processReturnNullNextState' handler method failed to return valid next action, proceeding to error state 'error'
io.nflow.engine.internal.executor.InvalidNextActionException: Next state can not be null
	at io.nflow.engine.workflow.definition.NextAction.assertNotNull(NextAction.java:109)
	at io.nflow.engine.workflow.definition.NextAction.moveToState(NextAction.java:78)
	at io.nflow.engine.internal.executor.WorkflowStateProcessorTest$FailingTestWorkflow.processReturnNullNextState(WorkflowStateProcessorTest.java:966)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.springframework.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:216)
	at io.nflow.engine.internal.executor.WorkflowStateProcessor$NormalStateHandler.getNextAction(WorkflowStateProcessor.java:347)
	at io.nflow.engine.internal.executor.WorkflowStateProcessor$StateHandler.processState(WorkflowStateProcessor.java:396)
	at io.nflow.engine.internal.executor.WorkflowStateProcessor$ProcessingExecutorListener.process(WorkflowStateProcessor.java:333)
	at io.nflow.engine.internal.executor.WorkflowStateProcessor$ExecutorListenerChain.next(WorkflowStateProcessor.java:313)
	at io.nflow.engine.internal.executor.WorkflowStateProcessorTest$2.answer(WorkflowStateProcessorTest.java:391)
	at org.mockito.internal.stubbing.StubbedInvocationMatcher.answer(StubbedInvocationMatcher.java:35)
	at org.mockito.internal.handler.MockHandlerImpl.handle(MockHandlerImpl.java:92)
	at org.mockito.internal.handler.NullResultGuardian.handle(NullResultGuardian.java:32)
	at org.mockito.internal.handler.InvocationNotifierHandler.handle(InvocationNotifierHandler.java:36)
	at org.mockito.internal.creation.bytebuddy.MockMethodInterceptor.doIntercept(MockMethodInterceptor.java:41)
	at org.mockito.internal.creation.bytebuddy.MockMethodInterceptor$DispatcherDefaultingToRealMethod.interceptAbstract(MockMethodInterceptor.java:120)
	at io.nflow.engine.listener.WorkflowExecutorListener$MockitoMock$1810067102.process(Unknown Source)
	at io.nflow.engine.internal.executor.WorkflowStateProcessor$ExecutorListenerChain.next(WorkflowStateProcessor.java:313)
	at io.nflow.engine.internal.executor.WorkflowStateProcessorTest$2.answer(WorkflowStateProcessorTest.java:391)
	at org.mockito.internal.stubbing.StubbedInvocationMatcher.answer(StubbedInvocationMatcher.java:35)
	at org.mockito.internal.handler.MockHandlerImpl.handle(MockHandlerImpl.java:92)
	at org.mockito.internal.handler.NullResultGuardian.handle(NullResultGuardian.java:32)
	at org.mockito.internal.handler.InvocationNotifierHandler.handle(InvocationNotifierHandler.java:36)
	at org.mockito.internal.creation.bytebuddy.MockMethodInterceptor.doIntercept(MockMethodInterceptor.java:41)
	at org.mockito.internal.creation.bytebuddy.MockMethodInterceptor$DispatcherDefaultingToRealMethod.interceptAbstract(MockMethodInterceptor.java:120)
	at io.nflow.engine.listener.WorkflowExecutorListener$MockitoMock$1810067102.process(Unknown Source)
	at io.nflow.engine.internal.executor.WorkflowStateProcessor$ExecutorListenerChain.next(WorkflowStateProcessor.java:313)
	at io.nflow.engine.internal.executor.WorkflowStateProcessor.processWithListeners(WorkflowStateProcessor.java:295)
	at io.nflow.engine.internal.executor.WorkflowStateProcessor.runImpl(WorkflowStateProcessor.java:141)
	at io.nflow.engine.internal.executor.WorkflowStateProcessor.run(WorkflowStateProcessor.java:103)
	at io.nflow.engine.internal.executor.WorkflowStateProcessorTest.goToErrorStateWhenNextStateIsNull(WorkflowStateProcessorTest.java:401)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:50)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:47)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:298)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:292)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.lang.Thread.run(Thread.java:745)
05.06.2018 09:53:30 INFO  [Time-limited test] xecutor.WorkflowStateProcessor - [user:] Woke up parent workflow instance 999
05.06.2018 09:53:30 ERROR [Time-limited test] xecutor.WorkflowStateProcessor - [user:] Error in io.nflow.engine.listener.WorkflowExecutorListener$MockitoMock$1810067102.beforeProcessing (null)
java.lang.RuntimeException: null
05.06.2018 09:53:30 ERROR [Time-limited test] xecutor.WorkflowStateProcessor - [user:] Error in io.nflow.engine.listener.WorkflowExecutorListener$MockitoMock$1810067102.afterProcessing (null)
java.lang.RuntimeException: null
05.06.2018 09:53:30 WARN  [Time-limited test] xecutor.WorkflowStateProcessor - [user:] State transition from 'illegalStateChange' to 'start' is not allowed by workflow definition.
05.06.2018 09:53:30 ERROR [Time-limited test] xecutor.WorkflowStateProcessor - [user:] Handler threw exception, trying again later.
java.lang.RuntimeException: test-fail
	at io.nflow.engine.internal.executor.WorkflowStateProcessorTest$FailingTestWorkflow.start(WorkflowStateProcessorTest.java:950)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.springframework.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:216)
	at io.nflow.engine.internal.executor.WorkflowStateProcessor$NormalStateHandler.getNextAction(WorkflowStateProcessor.java:347)
	at io.nflow.engine.internal.executor.WorkflowStateProcessor$StateHandler.processState(WorkflowStateProcessor.java:396)
	at io.nflow.engine.internal.executor.WorkflowStateProcessor$ProcessingExecutorListener.process(WorkflowStateProcessor.java:333)
	at io.nflow.engine.internal.executor.WorkflowStateProcessor$ExecutorListenerChain.next(WorkflowStateProcessor.java:313)
	at io.nflow.engine.internal.executor.WorkflowStateProcessorTest$2.answer(WorkflowStateProcessorTest.java:391)
	at org.mockito.internal.stubbing.StubbedInvocationMatcher.answer(StubbedInvocationMatcher.java:35)
	at org.mockito.internal.handler.MockHandlerImpl.handle(MockHandlerImpl.java:92)
	at org.mockito.internal.handler.NullResultGuardian.handle(NullResultGuardian.java:32)
	at org.mockito.internal.handler.InvocationNotifierHandler.handle(InvocationNotifierHandler.java:36)
	at org.mockito.internal.creation.bytebuddy.MockMethodInterceptor.doIntercept(MockMethodInterceptor.java:41)
	at org.mockito.internal.creation.bytebuddy.MockMethodInterceptor$DispatcherDefaultingToRealMethod.interceptAbstract(MockMethodInterceptor.java:120)
	at io.nflow.engine.listener.WorkflowExecutorListener$MockitoMock$1810067102.process(Unknown Source)
	at io.nflow.engine.internal.executor.WorkflowStateProcessor$ExecutorListenerChain.next(WorkflowStateProcessor.java:313)
	at io.nflow.engine.internal.executor.WorkflowStateProcessorTest$2.answer(WorkflowStateProcessorTest.java:391)
	at org.mockito.internal.stubbing.StubbedInvocationMatcher.answer(StubbedInvocationMatcher.java:35)
	at org.mockito.internal.handler.MockHandlerImpl.handle(MockHandlerImpl.java:92)
	at org.mockito.internal.handler.NullResultGuardian.handle(NullResultGuardian.java:32)
	at org.mockito.internal.handler.InvocationNotifierHandler.handle(InvocationNotifierHandler.java:36)
	at org.mockito.internal.creation.bytebuddy.MockMethodInterceptor.doIntercept(MockMethodInterceptor.java:41)
	at org.mockito.internal.creation.bytebuddy.MockMethodInterceptor$DispatcherDefaultingToRealMethod.interceptAbstract(MockMethodInterceptor.java:120)
	at io.nflow.engine.listener.WorkflowExecutorListener$MockitoMock$1810067102.process(Unknown Source)
	at io.nflow.engine.internal.executor.WorkflowStateProcessor$ExecutorListenerChain.next(WorkflowStateProcessor.java:313)
	at io.nflow.engine.internal.executor.WorkflowStateProcessor.processWithListeners(WorkflowStateProcessor.java:295)
	at io.nflow.engine.internal.executor.WorkflowStateProcessor.runImpl(WorkflowStateProcessor.java:141)
	at io.nflow.engine.internal.executor.WorkflowStateProcessor.run(WorkflowStateProcessor.java:103)
	at io.nflow.engine.internal.executor.WorkflowStateProcessorTest.runWorkflowThroughOneFailedState(WorkflowStateProcessorTest.java:207)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:50)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:47)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:298)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:292)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.lang.Thread.run(Thread.java:745)
05.06.2018 09:53:30 WARN  [Time-limited test] al.workflow.StateExecutionImpl - [user:] wakeUpParentWorkflow called on non-child workflow
05.06.2018 09:53:30 ERROR [Time-limited test] xecutor.WorkflowStateProcessor - [user:] State 'illegalStateChange' is not a state of 'failing' workflow definition, proceeding to error state 'error'
05.06.2018 09:53:30 ERROR [Time-limited test] xecutor.WorkflowStateProcessor - [user:] Handler threw exception, trying again later.
java.lang.RuntimeException: test-fail
	at io.nflow.engine.internal.executor.WorkflowStateProcessorTest$FailingTestWorkflow.start(WorkflowStateProcessorTest.java:950)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.springframework.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:216)
	at io.nflow.engine.internal.executor.WorkflowStateProcessor$NormalStateHandler.getNextAction(WorkflowStateProcessor.java:347)
	at io.nflow.engine.internal.executor.WorkflowStateProcessor$StateHandler.processState(WorkflowStateProcessor.java:396)
	at io.nflow.engine.internal.executor.WorkflowStateProcessor$ProcessingExecutorListener.process(WorkflowStateProcessor.java:333)
	at io.nflow.engine.internal.executor.WorkflowStateProcessor$ExecutorListenerChain.next(WorkflowStateProcessor.java:313)
	at io.nflow.engine.internal.executor.WorkflowStateProcessorTest$2.answer(WorkflowStateProcessorTest.java:391)
	at org.mockito.internal.stubbing.StubbedInvocationMatcher.answer(StubbedInvocationMatcher.java:35)
	at org.mockito.internal.handler.MockHandlerImpl.handle(MockHandlerImpl.java:92)
	at org.mockito.internal.handler.NullResultGuardian.handle(NullResultGuardian.java:32)
	at org.mockito.internal.handler.InvocationNotifierHandler.handle(InvocationNotifierHandler.java:36)
	at org.mockito.internal.creation.bytebuddy.MockMethodInterceptor.doIntercept(MockMethodInterceptor.java:41)
	at org.mockito.internal.creation.bytebuddy.MockMethodInterceptor$DispatcherDefaultingToRealMethod.interceptAbstract(MockMethodInterceptor.java:120)
	at io.nflow.engine.listener.WorkflowExecutorListener$MockitoMock$1810067102.process(Unknown Source)
	at io.nflow.engine.internal.executor.WorkflowStateProcessor$ExecutorListenerChain.next(WorkflowStateProcessor.java:313)
	at io.nflow.engine.internal.executor.WorkflowStateProcessorTest$2.answer(WorkflowStateProcessorTest.java:391)
	at org.mockito.internal.stubbing.StubbedInvocationMatcher.answer(StubbedInvocationMatcher.java:35)
	at org.mockito.internal.handler.MockHandlerImpl.handle(MockHandlerImpl.java:92)
	at org.mockito.internal.handler.NullResultGuardian.handle(NullResultGuardian.java:32)
	at org.mockito.internal.handler.InvocationNotifierHandler.handle(InvocationNotifierHandler.java:36)
	at org.mockito.internal.creation.bytebuddy.MockMethodInterceptor.doIntercept(MockMethodInterceptor.java:41)
	at org.mockito.internal.creation.bytebuddy.MockMethodInterceptor$DispatcherDefaultingToRealMethod.interceptAbstract(MockMethodInterceptor.java:120)
	at io.nflow.engine.listener.WorkflowExecutorListener$MockitoMock$1810067102.process(Unknown Source)
	at io.nflow.engine.internal.executor.WorkflowStateProcessor$ExecutorListenerChain.next(WorkflowStateProcessor.java:313)
	at io.nflow.engine.internal.executor.WorkflowStateProcessor.processWithListeners(WorkflowStateProcessor.java:295)
	at io.nflow.engine.internal.executor.WorkflowStateProcessor.runImpl(WorkflowStateProcessor.java:141)
	at io.nflow.engine.internal.executor.WorkflowStateProcessor.run(WorkflowStateProcessor.java:103)
	at io.nflow.engine.internal.executor.WorkflowStateProcessorTest.continueProcessingWhenAfterFailureListenerThrowsException(WorkflowStateProcessorTest.java:506)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:50)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:47)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:298)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:292)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.lang.Thread.run(Thread.java:745)
05.06.2018 09:53:30 ERROR [Time-limited test] xecutor.WorkflowStateProcessor - [user:] Error in io.nflow.engine.listener.WorkflowExecutorListener$MockitoMock$1810067102.afterFailure (null)
java.lang.RuntimeException: null
05.06.2018 09:53:30 INFO  [Time-limited test] xecutor.WorkflowStateProcessor - [user:] Did not woke up parent workflow instance 999
05.06.2018 09:53:30 ERROR [Time-limited test] xecutor.WorkflowStateProcessor - [user:] State 'processReturnNull' handler method returned null, proceeding to error state 'error'
05.06.2018 09:53:30 WARN  [Time-limited test] xecutor.WorkflowStateProcessor - [user:] State transition from 'illegalStateChange' to 'start' is not allowed by workflow definition.
Executing error state
