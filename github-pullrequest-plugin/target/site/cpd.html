<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<!-- Generated by Apache Maven Doxia Site Renderer 1.4 at 2018-06-05 -->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <title>CPD Results</title>
    <style type="text/css" media="all">
      @import url("./css/maven-base.css");
      @import url("./css/maven-theme.css");
      @import url("./css/site.css");
    </style>
    <link rel="stylesheet" href="./css/print.css" type="text/css" media="print" />
    <meta name="Date-Revision-yyyymmdd" content="20180605" />
    <meta http-equiv="Content-Language" content="en" />
        
        </head>
  <body class="composite">
    <div id="banner">
                      <div class="clear">
        <hr/>
      </div>
    </div>
    <div id="breadcrumbs">
            
                    
                <div class="xleft">
        <span id="publishDate">Last Published: 2018-06-05</span>
                  &nbsp;| <span id="projectVersion">Version: 0.2.0-SNAPSHOT</span>
                      </div>
            <div class="xright">        
                    
      </div>
      <div class="clear">
        <hr/>
      </div>
    </div>
    <div id="leftColumn">
      <div id="navcolumn">
             
                    
                                      <a href="http://maven.apache.org/" title="Built by Maven" class="poweredBy">
        <img class="poweredBy" alt="Built by Maven" src="./images/logos/maven-feather.png" />
      </a>
                   
                    
            </div>
    </div>
    <div id="bodyColumn">
      <div id="contentBox">
        <div class="section">
<h2>CPD Results<a name="CPD_Results"></a></h2>
<p>The following document contains the results of PMD's  <a class="externalLink" href="http://pmd.sourceforge.net/cpd.html">CPD</a> 5.3.5.</p></div>
<div class="section">
<h2>Duplications<a name="Duplications"></a></h2>
<table border="0" class="bodyTable">
<tr class="a">
<th>File</th>
<th>Line</th></tr>
<tr class="b">
<td>com/github/kostyasha/github/integration/generic/repoprovider/GitHubPluginRepoProvider.java</td>
<td>101</td></tr>
<tr class="a">
<td>com/github/kostyasha/github/integration/multibranch/repoprovider/GitHubPluginRepoProvider2.java</td>
<td>100</td></tr>
<tr class="b"><td colspan='2'>
<div>
<pre>        Optional&lt;GitHub&gt; client = from(GitHubPlugin.configuration().findGithubConfig(withHost(repoFullName.getHost())))
                .firstMatch(withPermission(repoFullName, getRepoPermission()));
        if (client.isPresent()) {
            gitHub = client.get();
            return gitHub;
        }

        throw new GHPluginConfigException(&quot;GitHubPluginRepoProvider can't find appropriate client for github repo &quot; +
                &quot;&lt;%s&gt;. Probably you didn't configure 'GitHub Plugin' global 'GitHub Server Settings' or there is no tokens&quot; +
                &quot;with %s access to this repository.&quot;,
                repoFullName.toString(), getRepoPermission());
    }

    private NullSafePredicate&lt;GitHub&gt; withPermission(final GitHubRepositoryName name, GHPermission permission) {
        return new NullSafePredicate&lt;GitHub&gt;() {
            @Override
            protected boolean applyNullSafe(@Nonnull GitHub gh) {
                try {
                    final GHRepository repo = gh.getRepository(name.getUserName() + &quot;/&quot; + name.getRepositoryName());
                    if (permission == GHPermission.ADMIN) {
                        return repo.hasAdminAccess();
                    } else if (permission == GHPermission.PUSH) {
                        return repo.hasPushAccess();
                    } else {
                        return repo.hasPullAccess();
                    }
                } catch (IOException e) {
                    return false;
                }
            }
        };
    }

    @CheckForNull
    @Override
    public synchronized GHRepository getGHRepository(GitHubTrigger trigger) {</pre></div></td></tr></table>
<table border="0" class="bodyTable">
<tr class="a">
<th>File</th>
<th>Line</th></tr>
<tr class="b">
<td>org/jenkinsci/plugins/github/pullrequest/events/impl/GitHubPRLabelExistsEvent.java</td>
<td>37</td></tr>
<tr class="a">
<td>org/jenkinsci/plugins/github/pullrequest/events/impl/GitHubPRLabelNotExistsEvent.java</td>
<td>37</td></tr>
<tr class="b"><td colspan='2'>
<div>
<pre>    public GitHubPRLabelExistsEvent(GitHubPRLabel label, boolean skip) {
        this.label = label;
        this.skip = skip;
    }

    @Override
    public GitHubPRCause check(@Nonnull GitHubPRDecisionContext prDecisionContext) throws IOException {
        TaskListener listener = prDecisionContext.getListener();
        GHPullRequest remotePR = prDecisionContext.getRemotePR();

        if (remotePR.getState().equals(GHIssueState.CLOSED)) {
            return null; // already closed, skip check?
        }

        GitHubPRCause cause = null;

        Collection&lt;GHLabel&gt; remoteLabels = remotePR.getRepository().getIssue(remotePR.getNumber()).getLabels();
        Set&lt;String&gt; existingLabels = new HashSet&lt;&gt;();

        for (GHLabel ghLabel : remoteLabels) {
            existingLabels.add(ghLabel.getName());
        }</pre></div></td></tr></table>
<table border="0" class="bodyTable">
<tr class="a">
<th>File</th>
<th>Line</th></tr>
<tr class="b">
<td>com/github/kostyasha/github/integration/branch/events/impl/GitHubBranchRestrictionFilter.java</td>
<td>36</td></tr>
<tr class="a">
<td>com/github/kostyasha/github/integration/tag/events/impl/GitHubTagRestrictionFilter.java</td>
<td>35</td></tr>
<tr class="b"><td colspan='2'>
<div>
<pre>    public GitHubBranchRestrictionFilter() {
    }

    public String getMatchCriteriaStr() {
        return String.join(LINE_SEPARATOR, matchCriteria);
    }

    @DataBoundSetter
    public void setMatchCriteriaStr(String matchCriteria) {
        this.matchCriteria = Stream.of(matchCriteria
                .split(LINE_SEPARATOR))
                .collect(Collectors.toSet());
    }

    public boolean isExclude() {
        return exclude;
    }

    @DataBoundSetter
    public void setExclude(boolean exclude) {
        this.exclude = exclude;
    }

    public boolean isMatchAsPattern() {
        return matchAsPattern;
    }

    @DataBoundSetter
    public void setMatchAsPattern(boolean matchAsPattern) {
        this.matchAsPattern = matchAsPattern;
    }

    // visible for testing
    public Set&lt;String&gt; getMatchCriteria() {
        return matchCriteria;
    }

    @Override
    public GitHubBranchCause check(@Nonnull GitHubBranchDecisionContext context) throws IOException {</pre></div></td></tr></table>
<table border="0" class="bodyTable">
<tr class="a">
<th>File</th>
<th>Line</th></tr>
<tr class="b">
<td>com/github/kostyasha/github/integration/branch/dsl/context/GitHubBranchTriggerDslContext.java</td>
<td>30</td></tr>
<tr class="a">
<td>org/jenkinsci/plugins/github/pullrequest/dsl/context/GitHubPRTriggerDslContext.java</td>
<td>26</td></tr>
<tr class="b"><td colspan='2'>
<div>
<pre>    private List&lt;GitHubBranchEvent&gt; events = new ArrayList&lt;&gt;();
    private List&lt;GitHubRepoProvider&gt; repoProviders = new ArrayList&lt;&gt;(asList(new GitHubPluginRepoProvider()));


    public void cron(String cron) {
        this.cron = cron;
    }

    public void mode(Runnable closure) {
        GitHubPRTriggerModeDslContext modeContext = new GitHubPRTriggerModeDslContext();
        ContextExtensionPoint.executeInContext(closure, modeContext);

        mode = modeContext.mode();
    }

    public void setPreStatus() {
        setPreStatus = true;
    }

    public void cancelQueued() {
        cancelQueued = true;
    }

    public void abortRunning() {
        abortRunning = true;
    }

    public void events(Runnable closure) {</pre></div></td></tr></table>
<table border="0" class="bodyTable">
<tr class="a">
<th>File</th>
<th>Line</th></tr>
<tr class="b">
<td>com/github/kostyasha/github/integration/branch/trigger/JobRunnerForBranchCause.java</td>
<td>115</td></tr>
<tr class="a">
<td>org/jenkinsci/plugins/github/pullrequest/trigger/JobRunnerForCause.java</td>
<td>251</td></tr>
<tr class="b"><td colspan='2'>
<div>
<pre>    public QueueTaskFuture&lt;?&gt; startJob(GitHubBranchCause cause, Cause additionalCause) {
        ParametersAction parametersAction;
        List&lt;ParameterValue&gt; parameters = getDefaultParametersValues(job);
        cause.fillParameters(parameters);

        try {
            Constructor&lt;ParametersAction&gt; constructor = ParametersAction.class.getConstructor(List.class, Collection.class);
            Set&lt;String&gt; names = new HashSet&lt;&gt;();
            for (ParameterValue param : parameters) {
                names.add(param.getName());
            }
            parametersAction = constructor.newInstance(parameters, names);
        } catch (NoSuchMethodException | IllegalAccessException | InstantiationException
                | InvocationTargetException ex) {
            parametersAction = new ParametersAction(parameters);
        }</pre></div></td></tr></table>
<table border="0" class="bodyTable">
<tr class="a">
<th>File</th>
<th>Line</th></tr>
<tr class="b">
<td>com/github/kostyasha/github/integration/branch/GitHubBranchRepository.java</td>
<td>161</td></tr>
<tr class="a">
<td>org/jenkinsci/plugins/github/pullrequest/GitHubPRRepository.java</td>
<td>163</td></tr>
<tr class="b"><td colspan='2'>
<div>
<pre>                Map&lt;String, List&lt;Run&lt;?, ?&gt;&gt;&gt; builds = getAllBranchBuilds();
                for (List&lt;Run&lt;?, ?&gt;&gt; buildList : builds.values()) {
                    if (!buildList.isEmpty() &amp;&amp; Result.FAILURE.equals(buildList.get(0).getResult())) {
                        Run&lt;?, ?&gt; lastBuild = buildList.get(0);
                        rebuild(lastBuild);
                    }
                }
                result = FormValidation.ok(&quot;Rebuild scheduled&quot;);
            } else {
                result = FormValidation.error(&quot;Forbidden&quot;);
            }
        } catch (Exception e) {
            LOG.error(&quot;Can't start rebuild&quot;, e.getMessage());</pre></div></td></tr></table></div>
      </div>
    </div>
    <div class="clear">
      <hr/>
    </div>
    <div id="footer">
      <div class="xright">
              Copyright &#169;                   2016-2018.
          All Rights Reserved.      
                    
                  </div>
      <div class="clear">
        <hr/>
      </div>
    </div>
  </body>
</html>
