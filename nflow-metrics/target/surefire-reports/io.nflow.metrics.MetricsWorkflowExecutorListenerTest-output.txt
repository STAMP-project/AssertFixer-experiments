11:53:54.698 [main] DEBUG org.springframework.mock.env.MockEnvironment - Initialized MockEnvironment with PropertySources []
11:53:54.702 [main] DEBUG org.springframework.mock.env.MockEnvironment - Adding [mockProperties] PropertySource with lowest search precedence
11:53:54.702 [main] DEBUG org.springframework.mock.env.MockEnvironment - Activating profile 'metrics'
11:53:54.702 [main] DEBUG org.springframework.core.env.PropertySourcesPropertyResolver - Could not find key 'spring.profiles.active' in any property source
11:53:54.702 [main] DEBUG org.springframework.mock.env.MockEnvironment - Activating profile 'jmx'
11:53:54.702 [main] DEBUG org.springframework.mock.env.MockEnvironment - Activating profile 'nflow.db.h2'
11:53:54.722 [main] DEBUG org.springframework.context.annotation.ClassPathBeanDefinitionScanner - JSR-330 'javax.inject.Named' annotation found and supported for component scanning
11:53:54.752 [main] INFO io.nflow.metrics.MetricsWorkflowExecutorListenerTest$1 - Refreshing io.nflow.metrics.MetricsWorkflowExecutorListenerTest$1@5f9b2141: startup date [Tue Jun 05 11:53:54 CEST 2018]; root of context hierarchy
11:53:54.755 [main] DEBUG io.nflow.metrics.MetricsWorkflowExecutorListenerTest$1 - Bean factory for io.nflow.metrics.MetricsWorkflowExecutorListenerTest$1@5f9b2141: org.springframework.beans.factory.support.DefaultListableBeanFactory@5745ca0e: defining beans [org.springframework.context.annotation.internalConfigurationAnnotationProcessor,org.springframework.context.annotation.internalAutowiredAnnotationProcessor,org.springframework.context.annotation.internalRequiredAnnotationProcessor,org.springframework.context.annotation.internalCommonAnnotationProcessor,org.springframework.context.event.internalEventListenerProcessor,org.springframework.context.event.internalEventListenerFactory,metricsWorkflowExecutorListenerTest.Config]; root of factory hierarchy
11:53:54.768 [main] DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'org.springframework.context.annotation.internalConfigurationAnnotationProcessor'
11:53:54.768 [main] DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory - Creating instance of bean 'org.springframework.context.annotation.internalConfigurationAnnotationProcessor'
11:53:54.783 [main] DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory - Eagerly caching bean 'org.springframework.context.annotation.internalConfigurationAnnotationProcessor' to allow for resolving potential circular references
11:53:54.785 [main] DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory - Finished creating instance of bean 'org.springframework.context.annotation.internalConfigurationAnnotationProcessor'
11:53:54.821 [main] DEBUG org.springframework.context.annotation.ConfigurationClassBeanDefinitionReader - Registered bean definition for imported class 'nflowMetrics/metricsContext'
11:53:54.825 [main] DEBUG org.springframework.context.annotation.ConfigurationClassBeanDefinitionReader - Registering bean definition for @Bean method io.nflow.metrics.NflowMetricsContext.metricsWorkflowExecutorListener()
11:53:54.831 [main] DEBUG org.springframework.context.annotation.ConfigurationClassBeanDefinitionReader - Registering bean definition for @Bean method io.nflow.metrics.NflowMetricsContext.jmxMetricsReporter()
11:53:54.832 [main] DEBUG org.springframework.context.annotation.ConfigurationClassBeanDefinitionReader - Registering bean definition for @Bean method io.nflow.metrics.NflowMetricsContext.databaseConnectionHealthCheck()
11:53:54.833 [main] DEBUG org.springframework.context.annotation.ConfigurationClassBeanDefinitionReader - Registering bean definition for @Bean method io.nflow.metrics.MetricsWorkflowExecutorListenerTest$Config.metricRegistry()
11:53:54.834 [main] DEBUG org.springframework.context.annotation.ConfigurationClassBeanDefinitionReader - Registering bean definition for @Bean method io.nflow.metrics.MetricsWorkflowExecutorListenerTest$Config.healthCheckService()
11:53:54.835 [main] DEBUG org.springframework.context.annotation.ConfigurationClassBeanDefinitionReader - Registering bean definition for @Bean method io.nflow.metrics.MetricsWorkflowExecutorListenerTest$Config.healthCheckRegistry()
11:53:54.836 [main] DEBUG org.springframework.context.annotation.ConfigurationClassBeanDefinitionReader - Registering bean definition for @Bean method io.nflow.metrics.MetricsWorkflowExecutorListenerTest$Config.SQLVariants()
11:53:54.837 [main] DEBUG org.springframework.context.annotation.ConfigurationClassBeanDefinitionReader - Registering bean definition for @Bean method io.nflow.metrics.MetricsWorkflowExecutorListenerTest$Config.jdbcTemplate()
11:53:54.838 [main] DEBUG org.springframework.context.annotation.ConfigurationClassBeanDefinitionReader - Registering bean definition for @Bean method io.nflow.metrics.MetricsWorkflowExecutorListenerTest$Config.executorDao()
11:53:54.900 [main] DEBUG org.springframework.context.annotation.ConfigurationClassEnhancer - Successfully enhanced io.nflow.metrics.MetricsWorkflowExecutorListenerTest$Config; enhanced class name is: io.nflow.metrics.MetricsWorkflowExecutorListenerTest$Config$$EnhancerBySpringCGLIB$$b54728c7
11:53:54.900 [main] DEBUG org.springframework.context.annotation.ConfigurationClassPostProcessor - Replacing bean definition 'metricsWorkflowExecutorListenerTest.Config' existing class 'io.nflow.metrics.MetricsWorkflowExecutorListenerTest$Config' with enhanced class 'io.nflow.metrics.MetricsWorkflowExecutorListenerTest$Config$$EnhancerBySpringCGLIB$$b54728c7'
11:53:54.904 [main] DEBUG org.springframework.context.annotation.ConfigurationClassEnhancer - Successfully enhanced io.nflow.metrics.NflowMetricsContext; enhanced class name is: io.nflow.metrics.NflowMetricsContext$$EnhancerBySpringCGLIB$$9c15e25a
11:53:54.904 [main] DEBUG org.springframework.context.annotation.ConfigurationClassPostProcessor - Replacing bean definition 'nflowMetrics/metricsContext' existing class 'io.nflow.metrics.NflowMetricsContext' with enhanced class 'io.nflow.metrics.NflowMetricsContext$$EnhancerBySpringCGLIB$$9c15e25a'
11:53:54.907 [main] DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'org.springframework.context.annotation.internalAutowiredAnnotationProcessor'
11:53:54.907 [main] DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory - Creating instance of bean 'org.springframework.context.annotation.internalAutowiredAnnotationProcessor'
11:53:54.908 [main] INFO org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor - JSR-330 'javax.inject.Inject' annotation found and supported for autowiring
11:53:54.908 [main] DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory - Eagerly caching bean 'org.springframework.context.annotation.internalAutowiredAnnotationProcessor' to allow for resolving potential circular references
11:53:54.908 [main] DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory - Finished creating instance of bean 'org.springframework.context.annotation.internalAutowiredAnnotationProcessor'
11:53:54.908 [main] DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'org.springframework.context.annotation.internalRequiredAnnotationProcessor'
11:53:54.908 [main] DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory - Creating instance of bean 'org.springframework.context.annotation.internalRequiredAnnotationProcessor'
11:53:54.908 [main] DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory - Eagerly caching bean 'org.springframework.context.annotation.internalRequiredAnnotationProcessor' to allow for resolving potential circular references
11:53:54.908 [main] DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory - Finished creating instance of bean 'org.springframework.context.annotation.internalRequiredAnnotationProcessor'
11:53:54.909 [main] DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'org.springframework.context.annotation.internalCommonAnnotationProcessor'
11:53:54.909 [main] DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory - Creating instance of bean 'org.springframework.context.annotation.internalCommonAnnotationProcessor'
11:53:54.911 [main] DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory - Eagerly caching bean 'org.springframework.context.annotation.internalCommonAnnotationProcessor' to allow for resolving potential circular references
11:53:54.911 [main] DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory - Finished creating instance of bean 'org.springframework.context.annotation.internalCommonAnnotationProcessor'
11:53:54.911 [main] DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'org.springframework.context.annotation.ConfigurationClassPostProcessor.importAwareProcessor'
11:53:54.911 [main] DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory - Creating instance of bean 'org.springframework.context.annotation.ConfigurationClassPostProcessor.importAwareProcessor'
11:53:54.911 [main] DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory - Eagerly caching bean 'org.springframework.context.annotation.ConfigurationClassPostProcessor.importAwareProcessor' to allow for resolving potential circular references
11:53:54.911 [main] DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory - Finished creating instance of bean 'org.springframework.context.annotation.ConfigurationClassPostProcessor.importAwareProcessor'
11:53:54.911 [main] DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'org.springframework.context.annotation.ConfigurationClassPostProcessor.enhancedConfigurationProcessor'
11:53:54.911 [main] DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory - Creating instance of bean 'org.springframework.context.annotation.ConfigurationClassPostProcessor.enhancedConfigurationProcessor'
11:53:54.912 [main] DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory - Eagerly caching bean 'org.springframework.context.annotation.ConfigurationClassPostProcessor.enhancedConfigurationProcessor' to allow for resolving potential circular references
11:53:54.912 [main] DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory - Finished creating instance of bean 'org.springframework.context.annotation.ConfigurationClassPostProcessor.enhancedConfigurationProcessor'
11:53:54.913 [main] DEBUG io.nflow.metrics.MetricsWorkflowExecutorListenerTest$1 - Unable to locate MessageSource with name 'messageSource': using default [org.springframework.context.support.DelegatingMessageSource@5a9f4771]
11:53:54.915 [main] DEBUG io.nflow.metrics.MetricsWorkflowExecutorListenerTest$1 - Unable to locate ApplicationEventMulticaster with name 'applicationEventMulticaster': using default [org.springframework.context.event.SimpleApplicationEventMulticaster@5965be2d]
11:53:54.916 [main] DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory - Pre-instantiating singletons in org.springframework.beans.factory.support.DefaultListableBeanFactory@5745ca0e: defining beans [org.springframework.context.annotation.internalConfigurationAnnotationProcessor,org.springframework.context.annotation.internalAutowiredAnnotationProcessor,org.springframework.context.annotation.internalRequiredAnnotationProcessor,org.springframework.context.annotation.internalCommonAnnotationProcessor,org.springframework.context.event.internalEventListenerProcessor,org.springframework.context.event.internalEventListenerFactory,metricsWorkflowExecutorListenerTest.Config,org.springframework.context.annotation.ConfigurationClassPostProcessor.importAwareProcessor,org.springframework.context.annotation.ConfigurationClassPostProcessor.enhancedConfigurationProcessor,nflowMetrics/metricsContext,metricsWorkflowExecutorListener,jmxMetricsReporter,databaseConnectionHealthCheck,metricRegistry,healthCheckService,healthCheckRegistry,SQLVariants,jdbcTemplate,executorDao]; root of factory hierarchy
11:53:54.916 [main] DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory - Returning cached instance of singleton bean 'org.springframework.context.annotation.internalConfigurationAnnotationProcessor'
11:53:54.916 [main] DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory - Returning cached instance of singleton bean 'org.springframework.context.annotation.internalAutowiredAnnotationProcessor'
11:53:54.916 [main] DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory - Returning cached instance of singleton bean 'org.springframework.context.annotation.internalRequiredAnnotationProcessor'
11:53:54.916 [main] DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory - Returning cached instance of singleton bean 'org.springframework.context.annotation.internalCommonAnnotationProcessor'
11:53:54.917 [main] DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'org.springframework.context.event.internalEventListenerProcessor'
11:53:54.917 [main] DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory - Creating instance of bean 'org.springframework.context.event.internalEventListenerProcessor'
11:53:54.921 [main] DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory - Eagerly caching bean 'org.springframework.context.event.internalEventListenerProcessor' to allow for resolving potential circular references
11:53:54.935 [main] DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory - Finished creating instance of bean 'org.springframework.context.event.internalEventListenerProcessor'
11:53:54.935 [main] DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'org.springframework.context.event.internalEventListenerFactory'
11:53:54.936 [main] DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory - Creating instance of bean 'org.springframework.context.event.internalEventListenerFactory'
11:53:54.936 [main] DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory - Eagerly caching bean 'org.springframework.context.event.internalEventListenerFactory' to allow for resolving potential circular references
11:53:54.940 [main] DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory - Finished creating instance of bean 'org.springframework.context.event.internalEventListenerFactory'
11:53:54.940 [main] DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'metricsWorkflowExecutorListenerTest.Config'
11:53:54.940 [main] DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory - Creating instance of bean 'metricsWorkflowExecutorListenerTest.Config'
11:53:54.942 [main] DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory - Eagerly caching bean 'metricsWorkflowExecutorListenerTest.Config' to allow for resolving potential circular references
11:53:54.945 [main] DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory - Finished creating instance of bean 'metricsWorkflowExecutorListenerTest.Config'
11:53:54.945 [main] DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory - Returning cached instance of singleton bean 'org.springframework.context.annotation.ConfigurationClassPostProcessor.importAwareProcessor'
11:53:54.945 [main] DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory - Returning cached instance of singleton bean 'org.springframework.context.annotation.ConfigurationClassPostProcessor.enhancedConfigurationProcessor'
11:53:54.946 [main] DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'nflowMetrics/metricsContext'
11:53:54.946 [main] DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory - Creating instance of bean 'nflowMetrics/metricsContext'
11:53:54.946 [main] DEBUG org.springframework.context.annotation.CommonAnnotationBeanPostProcessor - Found init method on class [io.nflow.metrics.NflowMetricsContext$$EnhancerBySpringCGLIB$$9c15e25a]: public void io.nflow.metrics.NflowMetricsContext.registerHealthChecks()
11:53:54.946 [main] DEBUG org.springframework.context.annotation.CommonAnnotationBeanPostProcessor - Registered init method on class [io.nflow.metrics.NflowMetricsContext$$EnhancerBySpringCGLIB$$9c15e25a]: org.springframework.beans.factory.annotation.InitDestroyAnnotationBeanPostProcessor$LifecycleElement@e2261c2a
11:53:54.951 [main] DEBUG org.springframework.beans.factory.annotation.InjectionMetadata - Registered injected element on class [io.nflow.metrics.NflowMetricsContext$$EnhancerBySpringCGLIB$$9c15e25a]: AutowiredFieldElement for private io.nflow.engine.service.HealthCheckService io.nflow.metrics.NflowMetricsContext.healthCheckService
11:53:54.951 [main] DEBUG org.springframework.beans.factory.annotation.InjectionMetadata - Registered injected element on class [io.nflow.metrics.NflowMetricsContext$$EnhancerBySpringCGLIB$$9c15e25a]: AutowiredFieldElement for private com.codahale.metrics.MetricRegistry io.nflow.metrics.NflowMetricsContext.metricRegistry
11:53:54.951 [main] DEBUG org.springframework.beans.factory.annotation.InjectionMetadata - Registered injected element on class [io.nflow.metrics.NflowMetricsContext$$EnhancerBySpringCGLIB$$9c15e25a]: AutowiredFieldElement for private com.codahale.metrics.health.HealthCheckRegistry io.nflow.metrics.NflowMetricsContext.healthCheckRegistry
11:53:54.951 [main] DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory - Eagerly caching bean 'nflowMetrics/metricsContext' to allow for resolving potential circular references
11:53:54.955 [main] DEBUG org.springframework.beans.factory.annotation.InjectionMetadata - Processing injected element of bean 'nflowMetrics/metricsContext': AutowiredFieldElement for private io.nflow.engine.service.HealthCheckService io.nflow.metrics.NflowMetricsContext.healthCheckService
11:53:54.960 [main] DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'healthCheckService'
11:53:54.960 [main] DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory - Creating instance of bean 'healthCheckService'
11:53:54.961 [main] DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory - Returning cached instance of singleton bean 'metricsWorkflowExecutorListenerTest.Config'
11:53:55.016 [main] DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory - Eagerly caching bean 'healthCheckService' to allow for resolving potential circular references
11:53:55.020 [main] DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory - Finished creating instance of bean 'healthCheckService'
11:53:55.021 [main] DEBUG org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor - Autowiring by type from bean name 'nflowMetrics/metricsContext' to bean named 'healthCheckService'
11:53:55.021 [main] DEBUG org.springframework.beans.factory.annotation.InjectionMetadata - Processing injected element of bean 'nflowMetrics/metricsContext': AutowiredFieldElement for private com.codahale.metrics.MetricRegistry io.nflow.metrics.NflowMetricsContext.metricRegistry
11:53:55.022 [main] DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'metricRegistry'
11:53:55.022 [main] DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory - Creating instance of bean 'metricRegistry'
11:53:55.022 [main] DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory - Returning cached instance of singleton bean 'metricsWorkflowExecutorListenerTest.Config'
11:53:55.026 [main] DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory - Eagerly caching bean 'metricRegistry' to allow for resolving potential circular references
11:53:55.033 [main] DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory - Finished creating instance of bean 'metricRegistry'
11:53:55.033 [main] DEBUG org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor - Autowiring by type from bean name 'nflowMetrics/metricsContext' to bean named 'metricRegistry'
11:53:55.033 [main] DEBUG org.springframework.beans.factory.annotation.InjectionMetadata - Processing injected element of bean 'nflowMetrics/metricsContext': AutowiredFieldElement for private com.codahale.metrics.health.HealthCheckRegistry io.nflow.metrics.NflowMetricsContext.healthCheckRegistry
11:53:55.034 [main] DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'healthCheckRegistry'
11:53:55.034 [main] DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory - Creating instance of bean 'healthCheckRegistry'
11:53:55.034 [main] DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory - Returning cached instance of singleton bean 'metricsWorkflowExecutorListenerTest.Config'
11:53:55.036 [main] DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory - Eagerly caching bean 'healthCheckRegistry' to allow for resolving potential circular references
11:53:55.038 [main] DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory - Finished creating instance of bean 'healthCheckRegistry'
11:53:55.038 [main] DEBUG org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor - Autowiring by type from bean name 'nflowMetrics/metricsContext' to bean named 'healthCheckRegistry'
11:53:55.039 [main] DEBUG org.springframework.context.annotation.CommonAnnotationBeanPostProcessor - Invoking init method on bean 'nflowMetrics/metricsContext': public void io.nflow.metrics.NflowMetricsContext.registerHealthChecks()
11:53:55.039 [main] DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'databaseConnectionHealthCheck'
11:53:55.039 [main] DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory - Creating instance of bean 'databaseConnectionHealthCheck'
11:53:55.039 [main] DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory - Returning eagerly cached instance of singleton bean 'nflowMetrics/metricsContext' that is not fully initialized yet - a consequence of a circular reference
11:53:55.047 [main] DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory - Eagerly caching bean 'databaseConnectionHealthCheck' to allow for resolving potential circular references
11:53:55.050 [main] DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory - Finished creating instance of bean 'databaseConnectionHealthCheck'
11:53:55.050 [main] DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory - Finished creating instance of bean 'nflowMetrics/metricsContext'
11:53:55.050 [main] DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'metricsWorkflowExecutorListener'
11:53:55.050 [main] DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory - Creating instance of bean 'metricsWorkflowExecutorListener'
11:53:55.051 [main] DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory - Returning cached instance of singleton bean 'nflowMetrics/metricsContext'
11:53:55.054 [main] DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'executorDao'
11:53:55.054 [main] DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory - Creating instance of bean 'executorDao'
11:53:55.055 [main] DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory - Returning cached instance of singleton bean 'metricsWorkflowExecutorListenerTest.Config'
11:53:55.162 [main] DEBUG org.springframework.context.annotation.CommonAnnotationBeanPostProcessor - Found init method on class [io.nflow.engine.internal.dao.ExecutorDao$MockitoMock$1360062573]: public void io.nflow.engine.internal.dao.ExecutorDao$MockitoMock$1360062573.findHostMaxLength()
11:53:55.162 [main] DEBUG org.springframework.context.annotation.CommonAnnotationBeanPostProcessor - Found init method on class [io.nflow.engine.internal.dao.ExecutorDao$MockitoMock$1360062573]: public void io.nflow.engine.internal.dao.ExecutorDao.findHostMaxLength()
11:53:55.162 [main] DEBUG org.springframework.context.annotation.CommonAnnotationBeanPostProcessor - Registered init method on class [io.nflow.engine.internal.dao.ExecutorDao$MockitoMock$1360062573]: org.springframework.beans.factory.annotation.InitDestroyAnnotationBeanPostProcessor$LifecycleElement@c6974769
11:53:55.170 [main] DEBUG org.springframework.beans.factory.annotation.InjectionMetadata - Registered injected element on class [io.nflow.engine.internal.dao.ExecutorDao$MockitoMock$1360062573]: AutowiredMethodElement for public void io.nflow.engine.internal.dao.ExecutorDao$MockitoMock$1360062573.setEnvironment(org.springframework.core.env.Environment)
11:53:55.171 [main] DEBUG org.springframework.beans.factory.annotation.InjectionMetadata - Registered injected element on class [io.nflow.engine.internal.dao.ExecutorDao$MockitoMock$1360062573]: AutowiredMethodElement for public void io.nflow.engine.internal.dao.ExecutorDao$MockitoMock$1360062573.setSqlVariants(io.nflow.engine.internal.storage.db.SQLVariants)
11:53:55.171 [main] DEBUG org.springframework.beans.factory.annotation.InjectionMetadata - Registered injected element on class [io.nflow.engine.internal.dao.ExecutorDao$MockitoMock$1360062573]: AutowiredMethodElement for public void io.nflow.engine.internal.dao.ExecutorDao$MockitoMock$1360062573.setJdbcTemplate(org.springframework.jdbc.core.JdbcTemplate)
11:53:55.171 [main] DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory - Eagerly caching bean 'executorDao' to allow for resolving potential circular references
11:53:55.171 [main] DEBUG org.springframework.beans.factory.annotation.InjectionMetadata - Processing injected element of bean 'executorDao': AutowiredMethodElement for public void io.nflow.engine.internal.dao.ExecutorDao$MockitoMock$1360062573.setEnvironment(org.springframework.core.env.Environment)
11:53:55.172 [main] DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory - Returning cached instance of singleton bean 'environment'
11:53:55.172 [main] DEBUG org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor - Autowiring by type from bean name 'executorDao' to bean named 'environment'
11:53:55.173 [main] DEBUG org.springframework.beans.factory.annotation.InjectionMetadata - Processing injected element of bean 'executorDao': AutowiredMethodElement for public void io.nflow.engine.internal.dao.ExecutorDao$MockitoMock$1360062573.setSqlVariants(io.nflow.engine.internal.storage.db.SQLVariants)
11:53:55.173 [main] DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'SQLVariants'
11:53:55.173 [main] DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory - Creating instance of bean 'SQLVariants'
11:53:55.173 [main] DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory - Returning cached instance of singleton bean 'metricsWorkflowExecutorListenerTest.Config'
11:53:55.233 [main] DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory - Eagerly caching bean 'SQLVariants' to allow for resolving potential circular references
11:53:55.236 [main] DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory - Finished creating instance of bean 'SQLVariants'
11:53:55.237 [main] DEBUG org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor - Autowiring by type from bean name 'executorDao' to bean named 'SQLVariants'
11:53:55.237 [main] DEBUG org.springframework.beans.factory.annotation.InjectionMetadata - Processing injected element of bean 'executorDao': AutowiredMethodElement for public void io.nflow.engine.internal.dao.ExecutorDao$MockitoMock$1360062573.setJdbcTemplate(org.springframework.jdbc.core.JdbcTemplate)
11:53:55.238 [main] DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'jdbcTemplate'
11:53:55.238 [main] DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory - Creating instance of bean 'jdbcTemplate'
11:53:55.238 [main] DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory - Returning cached instance of singleton bean 'metricsWorkflowExecutorListenerTest.Config'
11:53:55.743 [main] DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory - Eagerly caching bean 'jdbcTemplate' to allow for resolving potential circular references
11:53:55.770 [main] DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory - Invoking afterPropertiesSet() on bean with name 'jdbcTemplate'
11:53:55.771 [main] DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory - Finished creating instance of bean 'jdbcTemplate'
11:53:55.771 [main] DEBUG org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor - Autowiring by type from bean name 'executorDao' to bean named 'jdbcTemplate'
11:53:55.772 [main] DEBUG org.springframework.context.annotation.CommonAnnotationBeanPostProcessor - Invoking init method on bean 'executorDao': public void io.nflow.engine.internal.dao.ExecutorDao.findHostMaxLength()
11:53:55.772 [main] DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory - Finished creating instance of bean 'executorDao'
11:53:55.773 [main] DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory - Autowiring by type from bean name 'metricsWorkflowExecutorListener' via factory method to bean named 'executorDao'
11:53:55.773 [main] INFO io.nflow.metrics.NflowMetricsContext - Enabling MetricsWorkflowExecutorListener
11:53:55.777 [main] DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory - Eagerly caching bean 'metricsWorkflowExecutorListener' to allow for resolving potential circular references
11:53:55.780 [main] DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory - Finished creating instance of bean 'metricsWorkflowExecutorListener'
11:53:55.780 [main] DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'jmxMetricsReporter'
11:53:55.780 [main] DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory - Creating instance of bean 'jmxMetricsReporter'
11:53:55.780 [main] DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory - Returning cached instance of singleton bean 'nflowMetrics/metricsContext'
11:53:55.781 [main] INFO io.nflow.metrics.NflowMetricsContext - Enabling Metrics JmxReporter
11:53:55.832 [main] DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory - Eagerly caching bean 'jmxMetricsReporter' to allow for resolving potential circular references
11:53:55.833 [main] DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory - Finished creating instance of bean 'jmxMetricsReporter'
11:53:55.834 [main] DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory - Returning cached instance of singleton bean 'databaseConnectionHealthCheck'
11:53:55.834 [main] DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory - Returning cached instance of singleton bean 'metricRegistry'
11:53:55.834 [main] DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory - Returning cached instance of singleton bean 'healthCheckService'
11:53:55.834 [main] DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory - Returning cached instance of singleton bean 'healthCheckRegistry'
11:53:55.834 [main] DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory - Returning cached instance of singleton bean 'SQLVariants'
11:53:55.834 [main] DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory - Returning cached instance of singleton bean 'jdbcTemplate'
11:53:55.834 [main] DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory - Returning cached instance of singleton bean 'executorDao'
11:53:55.834 [main] DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory - Returning cached instance of singleton bean 'org.springframework.context.event.internalEventListenerFactory'
11:53:55.865 [main] DEBUG io.nflow.metrics.MetricsWorkflowExecutorListenerTest$1 - Unable to locate LifecycleProcessor with name 'lifecycleProcessor': using default [org.springframework.context.support.DefaultLifecycleProcessor@2f7a7219]
11:53:55.865 [main] DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory - Returning cached instance of singleton bean 'lifecycleProcessor'
11:53:55.867 [main] DEBUG org.springframework.core.env.PropertySourcesPropertyResolver - Could not find key 'spring.liveBeansView.mbeanDomain' in any property source
11:53:55.868 [main] DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory - Returning cached instance of singleton bean 'metricRegistry'
11:53:55.869 [main] DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory - Returning cached instance of singleton bean 'metricsWorkflowExecutorListener'
11:53:55.884 [main] DEBUG org.springframework.mock.env.MockEnvironment - Initialized MockEnvironment with PropertySources []
11:53:55.884 [main] DEBUG org.springframework.mock.env.MockEnvironment - Adding [mockProperties] PropertySource with lowest search precedence
11:53:55.884 [main] DEBUG org.springframework.mock.env.MockEnvironment - Activating profile 'metrics'
11:53:55.884 [main] DEBUG org.springframework.core.env.PropertySourcesPropertyResolver - Could not find key 'spring.profiles.active' in any property source
11:53:55.884 [main] DEBUG org.springframework.mock.env.MockEnvironment - Activating profile 'jmx'
11:53:55.884 [main] DEBUG org.springframework.mock.env.MockEnvironment - Activating profile 'nflow.db.h2'
11:53:55.885 [main] DEBUG org.springframework.context.annotation.ClassPathBeanDefinitionScanner - JSR-330 'javax.inject.Named' annotation found and supported for component scanning
11:53:55.886 [main] INFO io.nflow.metrics.MetricsWorkflowExecutorListenerTest$1 - Refreshing io.nflow.metrics.MetricsWorkflowExecutorListenerTest$1@791cbf87: startup date [Tue Jun 05 11:53:55 CEST 2018]; root of context hierarchy
11:53:55.886 [main] DEBUG io.nflow.metrics.MetricsWorkflowExecutorListenerTest$1 - Bean factory for io.nflow.metrics.MetricsWorkflowExecutorListenerTest$1@791cbf87: org.springframework.beans.factory.support.DefaultListableBeanFactory@a7e2d9d: defining beans [org.springframework.context.annotation.internalConfigurationAnnotationProcessor,org.springframework.context.annotation.internalAutowiredAnnotationProcessor,org.springframework.context.annotation.internalRequiredAnnotationProcessor,org.springframework.context.annotation.internalCommonAnnotationProcessor,org.springframework.context.event.internalEventListenerProcessor,org.springframework.context.event.internalEventListenerFactory,metricsWorkflowExecutorListenerTest.Config]; root of factory hierarchy
11:53:55.886 [main] DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'org.springframework.context.annotation.internalConfigurationAnnotationProcessor'
11:53:55.886 [main] DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory - Creating instance of bean 'org.springframework.context.annotation.internalConfigurationAnnotationProcessor'
11:53:55.887 [main] DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory - Eagerly caching bean 'org.springframework.context.annotation.internalConfigurationAnnotationProcessor' to allow for resolving potential circular references
11:53:55.887 [main] DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory - Finished creating instance of bean 'org.springframework.context.annotation.internalConfigurationAnnotationProcessor'
11:53:55.888 [main] DEBUG org.springframework.context.annotation.ConfigurationClassBeanDefinitionReader - Registered bean definition for imported class 'nflowMetrics/metricsContext'
11:53:55.889 [main] DEBUG org.springframework.context.annotation.ConfigurationClassBeanDefinitionReader - Registering bean definition for @Bean method io.nflow.metrics.NflowMetricsContext.metricsWorkflowExecutorListener()
11:53:55.890 [main] DEBUG org.springframework.context.annotation.ConfigurationClassBeanDefinitionReader - Registering bean definition for @Bean method io.nflow.metrics.NflowMetricsContext.jmxMetricsReporter()
11:53:55.890 [main] DEBUG org.springframework.context.annotation.ConfigurationClassBeanDefinitionReader - Registering bean definition for @Bean method io.nflow.metrics.NflowMetricsContext.databaseConnectionHealthCheck()
11:53:55.890 [main] DEBUG org.springframework.context.annotation.ConfigurationClassBeanDefinitionReader - Registering bean definition for @Bean method io.nflow.metrics.MetricsWorkflowExecutorListenerTest$Config.metricRegistry()
11:53:55.890 [main] DEBUG org.springframework.context.annotation.ConfigurationClassBeanDefinitionReader - Registering bean definition for @Bean method io.nflow.metrics.MetricsWorkflowExecutorListenerTest$Config.healthCheckService()
11:53:55.891 [main] DEBUG org.springframework.context.annotation.ConfigurationClassBeanDefinitionReader - Registering bean definition for @Bean method io.nflow.metrics.MetricsWorkflowExecutorListenerTest$Config.healthCheckRegistry()
11:53:55.892 [main] DEBUG org.springframework.context.annotation.ConfigurationClassBeanDefinitionReader - Registering bean definition for @Bean method io.nflow.metrics.MetricsWorkflowExecutorListenerTest$Config.SQLVariants()
11:53:55.893 [main] DEBUG org.springframework.context.annotation.ConfigurationClassBeanDefinitionReader - Registering bean definition for @Bean method io.nflow.metrics.MetricsWorkflowExecutorListenerTest$Config.jdbcTemplate()
11:53:55.893 [main] DEBUG org.springframework.context.annotation.ConfigurationClassBeanDefinitionReader - Registering bean definition for @Bean method io.nflow.metrics.MetricsWorkflowExecutorListenerTest$Config.executorDao()
11:53:55.895 [main] DEBUG org.springframework.context.annotation.ConfigurationClassEnhancer - Successfully enhanced io.nflow.metrics.MetricsWorkflowExecutorListenerTest$Config; enhanced class name is: io.nflow.metrics.MetricsWorkflowExecutorListenerTest$Config$$EnhancerBySpringCGLIB$$b54728c7
11:53:55.895 [main] DEBUG org.springframework.context.annotation.ConfigurationClassPostProcessor - Replacing bean definition 'metricsWorkflowExecutorListenerTest.Config' existing class 'io.nflow.metrics.MetricsWorkflowExecutorListenerTest$Config' with enhanced class 'io.nflow.metrics.MetricsWorkflowExecutorListenerTest$Config$$EnhancerBySpringCGLIB$$b54728c7'
11:53:55.895 [main] DEBUG org.springframework.context.annotation.ConfigurationClassEnhancer - Successfully enhanced io.nflow.metrics.NflowMetricsContext; enhanced class name is: io.nflow.metrics.NflowMetricsContext$$EnhancerBySpringCGLIB$$9c15e25a
11:53:55.895 [main] DEBUG org.springframework.context.annotation.ConfigurationClassPostProcessor - Replacing bean definition 'nflowMetrics/metricsContext' existing class 'io.nflow.metrics.NflowMetricsContext' with enhanced class 'io.nflow.metrics.NflowMetricsContext$$EnhancerBySpringCGLIB$$9c15e25a'
11:53:55.897 [main] DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'org.springframework.context.annotation.internalAutowiredAnnotationProcessor'
11:53:55.897 [main] DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory - Creating instance of bean 'org.springframework.context.annotation.internalAutowiredAnnotationProcessor'
11:53:55.897 [main] INFO org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor - JSR-330 'javax.inject.Inject' annotation found and supported for autowiring
11:53:55.897 [main] DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory - Eagerly caching bean 'org.springframework.context.annotation.internalAutowiredAnnotationProcessor' to allow for resolving potential circular references
11:53:55.897 [main] DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory - Finished creating instance of bean 'org.springframework.context.annotation.internalAutowiredAnnotationProcessor'
11:53:55.897 [main] DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'org.springframework.context.annotation.internalRequiredAnnotationProcessor'
11:53:55.897 [main] DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory - Creating instance of bean 'org.springframework.context.annotation.internalRequiredAnnotationProcessor'
11:53:55.897 [main] DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory - Eagerly caching bean 'org.springframework.context.annotation.internalRequiredAnnotationProcessor' to allow for resolving potential circular references
11:53:55.897 [main] DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory - Finished creating instance of bean 'org.springframework.context.annotation.internalRequiredAnnotationProcessor'
11:53:55.897 [main] DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'org.springframework.context.annotation.internalCommonAnnotationProcessor'
11:53:55.898 [main] DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory - Creating instance of bean 'org.springframework.context.annotation.internalCommonAnnotationProcessor'
11:53:55.898 [main] DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory - Eagerly caching bean 'org.springframework.context.annotation.internalCommonAnnotationProcessor' to allow for resolving potential circular references
11:53:55.898 [main] DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory - Finished creating instance of bean 'org.springframework.context.annotation.internalCommonAnnotationProcessor'
11:53:55.898 [main] DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'org.springframework.context.annotation.ConfigurationClassPostProcessor.importAwareProcessor'
11:53:55.898 [main] DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory - Creating instance of bean 'org.springframework.context.annotation.ConfigurationClassPostProcessor.importAwareProcessor'
11:53:55.898 [main] DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory - Eagerly caching bean 'org.springframework.context.annotation.ConfigurationClassPostProcessor.importAwareProcessor' to allow for resolving potential circular references
11:53:55.898 [main] DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory - Finished creating instance of bean 'org.springframework.context.annotation.ConfigurationClassPostProcessor.importAwareProcessor'
11:53:55.898 [main] DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'org.springframework.context.annotation.ConfigurationClassPostProcessor.enhancedConfigurationProcessor'
11:53:55.898 [main] DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory - Creating instance of bean 'org.springframework.context.annotation.ConfigurationClassPostProcessor.enhancedConfigurationProcessor'
11:53:55.898 [main] DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory - Eagerly caching bean 'org.springframework.context.annotation.ConfigurationClassPostProcessor.enhancedConfigurationProcessor' to allow for resolving potential circular references
11:53:55.898 [main] DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory - Finished creating instance of bean 'org.springframework.context.annotation.ConfigurationClassPostProcessor.enhancedConfigurationProcessor'
11:53:55.899 [main] DEBUG io.nflow.metrics.MetricsWorkflowExecutorListenerTest$1 - Unable to locate MessageSource with name 'messageSource': using default [org.springframework.context.support.DelegatingMessageSource@5990e6c5]
11:53:55.899 [main] DEBUG io.nflow.metrics.MetricsWorkflowExecutorListenerTest$1 - Unable to locate ApplicationEventMulticaster with name 'applicationEventMulticaster': using default [org.springframework.context.event.SimpleApplicationEventMulticaster@56e07a08]
11:53:55.899 [main] DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory - Pre-instantiating singletons in org.springframework.beans.factory.support.DefaultListableBeanFactory@a7e2d9d: defining beans [org.springframework.context.annotation.internalConfigurationAnnotationProcessor,org.springframework.context.annotation.internalAutowiredAnnotationProcessor,org.springframework.context.annotation.internalRequiredAnnotationProcessor,org.springframework.context.annotation.internalCommonAnnotationProcessor,org.springframework.context.event.internalEventListenerProcessor,org.springframework.context.event.internalEventListenerFactory,metricsWorkflowExecutorListenerTest.Config,org.springframework.context.annotation.ConfigurationClassPostProcessor.importAwareProcessor,org.springframework.context.annotation.ConfigurationClassPostProcessor.enhancedConfigurationProcessor,nflowMetrics/metricsContext,metricsWorkflowExecutorListener,jmxMetricsReporter,databaseConnectionHealthCheck,metricRegistry,healthCheckService,healthCheckRegistry,SQLVariants,jdbcTemplate,executorDao]; root of factory hierarchy
11:53:55.899 [main] DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory - Returning cached instance of singleton bean 'org.springframework.context.annotation.internalConfigurationAnnotationProcessor'
11:53:55.899 [main] DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory - Returning cached instance of singleton bean 'org.springframework.context.annotation.internalAutowiredAnnotationProcessor'
11:53:55.899 [main] DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory - Returning cached instance of singleton bean 'org.springframework.context.annotation.internalRequiredAnnotationProcessor'
11:53:55.899 [main] DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory - Returning cached instance of singleton bean 'org.springframework.context.annotation.internalCommonAnnotationProcessor'
11:53:55.899 [main] DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'org.springframework.context.event.internalEventListenerProcessor'
11:53:55.899 [main] DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory - Creating instance of bean 'org.springframework.context.event.internalEventListenerProcessor'
11:53:55.900 [main] DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory - Eagerly caching bean 'org.springframework.context.event.internalEventListenerProcessor' to allow for resolving potential circular references
11:53:55.901 [main] DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory - Finished creating instance of bean 'org.springframework.context.event.internalEventListenerProcessor'
11:53:55.901 [main] DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'org.springframework.context.event.internalEventListenerFactory'
11:53:55.901 [main] DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory - Creating instance of bean 'org.springframework.context.event.internalEventListenerFactory'
11:53:55.902 [main] DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory - Eagerly caching bean 'org.springframework.context.event.internalEventListenerFactory' to allow for resolving potential circular references
11:53:55.903 [main] DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory - Finished creating instance of bean 'org.springframework.context.event.internalEventListenerFactory'
11:53:55.903 [main] DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'metricsWorkflowExecutorListenerTest.Config'
11:53:55.903 [main] DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory - Creating instance of bean 'metricsWorkflowExecutorListenerTest.Config'
11:53:55.904 [main] DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory - Eagerly caching bean 'metricsWorkflowExecutorListenerTest.Config' to allow for resolving potential circular references
11:53:55.905 [main] DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory - Finished creating instance of bean 'metricsWorkflowExecutorListenerTest.Config'
11:53:55.905 [main] DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory - Returning cached instance of singleton bean 'org.springframework.context.annotation.ConfigurationClassPostProcessor.importAwareProcessor'
11:53:55.905 [main] DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory - Returning cached instance of singleton bean 'org.springframework.context.annotation.ConfigurationClassPostProcessor.enhancedConfigurationProcessor'
11:53:55.905 [main] DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'nflowMetrics/metricsContext'
11:53:55.905 [main] DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory - Creating instance of bean 'nflowMetrics/metricsContext'
11:53:55.905 [main] DEBUG org.springframework.context.annotation.CommonAnnotationBeanPostProcessor - Found init method on class [io.nflow.metrics.NflowMetricsContext$$EnhancerBySpringCGLIB$$9c15e25a]: public void io.nflow.metrics.NflowMetricsContext.registerHealthChecks()
11:53:55.905 [main] DEBUG org.springframework.context.annotation.CommonAnnotationBeanPostProcessor - Registered init method on class [io.nflow.metrics.NflowMetricsContext$$EnhancerBySpringCGLIB$$9c15e25a]: org.springframework.beans.factory.annotation.InitDestroyAnnotationBeanPostProcessor$LifecycleElement@e2261c2a
11:53:55.906 [main] DEBUG org.springframework.beans.factory.annotation.InjectionMetadata - Registered injected element on class [io.nflow.metrics.NflowMetricsContext$$EnhancerBySpringCGLIB$$9c15e25a]: AutowiredFieldElement for private io.nflow.engine.service.HealthCheckService io.nflow.metrics.NflowMetricsContext.healthCheckService
11:53:55.906 [main] DEBUG org.springframework.beans.factory.annotation.InjectionMetadata - Registered injected element on class [io.nflow.metrics.NflowMetricsContext$$EnhancerBySpringCGLIB$$9c15e25a]: AutowiredFieldElement for private com.codahale.metrics.MetricRegistry io.nflow.metrics.NflowMetricsContext.metricRegistry
11:53:55.906 [main] DEBUG org.springframework.beans.factory.annotation.InjectionMetadata - Registered injected element on class [io.nflow.metrics.NflowMetricsContext$$EnhancerBySpringCGLIB$$9c15e25a]: AutowiredFieldElement for private com.codahale.metrics.health.HealthCheckRegistry io.nflow.metrics.NflowMetricsContext.healthCheckRegistry
11:53:55.906 [main] DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory - Eagerly caching bean 'nflowMetrics/metricsContext' to allow for resolving potential circular references
11:53:55.907 [main] DEBUG org.springframework.beans.factory.annotation.InjectionMetadata - Processing injected element of bean 'nflowMetrics/metricsContext': AutowiredFieldElement for private io.nflow.engine.service.HealthCheckService io.nflow.metrics.NflowMetricsContext.healthCheckService
11:53:55.908 [main] DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'healthCheckService'
11:53:55.908 [main] DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory - Creating instance of bean 'healthCheckService'
11:53:55.908 [main] DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory - Returning cached instance of singleton bean 'metricsWorkflowExecutorListenerTest.Config'
11:53:55.909 [main] DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory - Eagerly caching bean 'healthCheckService' to allow for resolving potential circular references
11:53:55.910 [main] DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory - Finished creating instance of bean 'healthCheckService'
11:53:55.910 [main] DEBUG org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor - Autowiring by type from bean name 'nflowMetrics/metricsContext' to bean named 'healthCheckService'
11:53:55.910 [main] DEBUG org.springframework.beans.factory.annotation.InjectionMetadata - Processing injected element of bean 'nflowMetrics/metricsContext': AutowiredFieldElement for private com.codahale.metrics.MetricRegistry io.nflow.metrics.NflowMetricsContext.metricRegistry
11:53:55.910 [main] DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'metricRegistry'
11:53:55.910 [main] DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory - Creating instance of bean 'metricRegistry'
11:53:55.910 [main] DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory - Returning cached instance of singleton bean 'metricsWorkflowExecutorListenerTest.Config'
11:53:55.911 [main] DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory - Eagerly caching bean 'metricRegistry' to allow for resolving potential circular references
11:53:55.912 [main] DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory - Finished creating instance of bean 'metricRegistry'
11:53:55.912 [main] DEBUG org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor - Autowiring by type from bean name 'nflowMetrics/metricsContext' to bean named 'metricRegistry'
11:53:55.912 [main] DEBUG org.springframework.beans.factory.annotation.InjectionMetadata - Processing injected element of bean 'nflowMetrics/metricsContext': AutowiredFieldElement for private com.codahale.metrics.health.HealthCheckRegistry io.nflow.metrics.NflowMetricsContext.healthCheckRegistry
11:53:55.912 [main] DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'healthCheckRegistry'
11:53:55.912 [main] DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory - Creating instance of bean 'healthCheckRegistry'
11:53:55.912 [main] DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory - Returning cached instance of singleton bean 'metricsWorkflowExecutorListenerTest.Config'
11:53:55.913 [main] DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory - Eagerly caching bean 'healthCheckRegistry' to allow for resolving potential circular references
11:53:55.913 [main] DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory - Finished creating instance of bean 'healthCheckRegistry'
11:53:55.913 [main] DEBUG org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor - Autowiring by type from bean name 'nflowMetrics/metricsContext' to bean named 'healthCheckRegistry'
11:53:55.913 [main] DEBUG org.springframework.context.annotation.CommonAnnotationBeanPostProcessor - Invoking init method on bean 'nflowMetrics/metricsContext': public void io.nflow.metrics.NflowMetricsContext.registerHealthChecks()
11:53:55.913 [main] DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'databaseConnectionHealthCheck'
11:53:55.913 [main] DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory - Creating instance of bean 'databaseConnectionHealthCheck'
11:53:55.914 [main] DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory - Returning eagerly cached instance of singleton bean 'nflowMetrics/metricsContext' that is not fully initialized yet - a consequence of a circular reference
11:53:55.914 [main] DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory - Eagerly caching bean 'databaseConnectionHealthCheck' to allow for resolving potential circular references
11:53:55.914 [main] DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory - Finished creating instance of bean 'databaseConnectionHealthCheck'
11:53:55.914 [main] DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory - Finished creating instance of bean 'nflowMetrics/metricsContext'
11:53:55.914 [main] DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'metricsWorkflowExecutorListener'
11:53:55.914 [main] DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory - Creating instance of bean 'metricsWorkflowExecutorListener'
11:53:55.915 [main] DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory - Returning cached instance of singleton bean 'nflowMetrics/metricsContext'
11:53:55.916 [main] DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'executorDao'
11:53:55.916 [main] DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory - Creating instance of bean 'executorDao'
11:53:55.916 [main] DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory - Returning cached instance of singleton bean 'metricsWorkflowExecutorListenerTest.Config'
11:53:55.917 [main] DEBUG org.springframework.context.annotation.CommonAnnotationBeanPostProcessor - Found init method on class [io.nflow.engine.internal.dao.ExecutorDao$MockitoMock$1360062573]: public void io.nflow.engine.internal.dao.ExecutorDao$MockitoMock$1360062573.findHostMaxLength()
11:53:55.917 [main] DEBUG org.springframework.context.annotation.CommonAnnotationBeanPostProcessor - Found init method on class [io.nflow.engine.internal.dao.ExecutorDao$MockitoMock$1360062573]: public void io.nflow.engine.internal.dao.ExecutorDao.findHostMaxLength()
11:53:55.917 [main] DEBUG org.springframework.context.annotation.CommonAnnotationBeanPostProcessor - Registered init method on class [io.nflow.engine.internal.dao.ExecutorDao$MockitoMock$1360062573]: org.springframework.beans.factory.annotation.InitDestroyAnnotationBeanPostProcessor$LifecycleElement@c6974769
11:53:55.920 [main] DEBUG org.springframework.beans.factory.annotation.InjectionMetadata - Registered injected element on class [io.nflow.engine.internal.dao.ExecutorDao$MockitoMock$1360062573]: AutowiredMethodElement for public void io.nflow.engine.internal.dao.ExecutorDao$MockitoMock$1360062573.setEnvironment(org.springframework.core.env.Environment)
11:53:55.920 [main] DEBUG org.springframework.beans.factory.annotation.InjectionMetadata - Registered injected element on class [io.nflow.engine.internal.dao.ExecutorDao$MockitoMock$1360062573]: AutowiredMethodElement for public void io.nflow.engine.internal.dao.ExecutorDao$MockitoMock$1360062573.setSqlVariants(io.nflow.engine.internal.storage.db.SQLVariants)
11:53:55.920 [main] DEBUG org.springframework.beans.factory.annotation.InjectionMetadata - Registered injected element on class [io.nflow.engine.internal.dao.ExecutorDao$MockitoMock$1360062573]: AutowiredMethodElement for public void io.nflow.engine.internal.dao.ExecutorDao$MockitoMock$1360062573.setJdbcTemplate(org.springframework.jdbc.core.JdbcTemplate)
11:53:55.920 [main] DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory - Eagerly caching bean 'executorDao' to allow for resolving potential circular references
11:53:55.920 [main] DEBUG org.springframework.beans.factory.annotation.InjectionMetadata - Processing injected element of bean 'executorDao': AutowiredMethodElement for public void io.nflow.engine.internal.dao.ExecutorDao$MockitoMock$1360062573.setEnvironment(org.springframework.core.env.Environment)
11:53:55.921 [main] DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory - Returning cached instance of singleton bean 'environment'
11:53:55.921 [main] DEBUG org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor - Autowiring by type from bean name 'executorDao' to bean named 'environment'
11:53:55.921 [main] DEBUG org.springframework.beans.factory.annotation.InjectionMetadata - Processing injected element of bean 'executorDao': AutowiredMethodElement for public void io.nflow.engine.internal.dao.ExecutorDao$MockitoMock$1360062573.setSqlVariants(io.nflow.engine.internal.storage.db.SQLVariants)
11:53:55.921 [main] DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'SQLVariants'
11:53:55.921 [main] DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory - Creating instance of bean 'SQLVariants'
11:53:55.922 [main] DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory - Returning cached instance of singleton bean 'metricsWorkflowExecutorListenerTest.Config'
11:53:55.922 [main] DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory - Eagerly caching bean 'SQLVariants' to allow for resolving potential circular references
11:53:55.924 [main] DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory - Finished creating instance of bean 'SQLVariants'
11:53:55.924 [main] DEBUG org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor - Autowiring by type from bean name 'executorDao' to bean named 'SQLVariants'
11:53:55.924 [main] DEBUG org.springframework.beans.factory.annotation.InjectionMetadata - Processing injected element of bean 'executorDao': AutowiredMethodElement for public void io.nflow.engine.internal.dao.ExecutorDao$MockitoMock$1360062573.setJdbcTemplate(org.springframework.jdbc.core.JdbcTemplate)
11:53:55.925 [main] DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'jdbcTemplate'
11:53:55.925 [main] DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory - Creating instance of bean 'jdbcTemplate'
11:53:55.925 [main] DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory - Returning cached instance of singleton bean 'metricsWorkflowExecutorListenerTest.Config'
11:53:55.927 [main] DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory - Eagerly caching bean 'jdbcTemplate' to allow for resolving potential circular references
11:53:55.929 [main] DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory - Invoking afterPropertiesSet() on bean with name 'jdbcTemplate'
11:53:55.930 [main] DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory - Finished creating instance of bean 'jdbcTemplate'
11:53:55.930 [main] DEBUG org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor - Autowiring by type from bean name 'executorDao' to bean named 'jdbcTemplate'
11:53:55.930 [main] DEBUG org.springframework.context.annotation.CommonAnnotationBeanPostProcessor - Invoking init method on bean 'executorDao': public void io.nflow.engine.internal.dao.ExecutorDao.findHostMaxLength()
11:53:55.930 [main] DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory - Finished creating instance of bean 'executorDao'
11:53:55.930 [main] DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory - Autowiring by type from bean name 'metricsWorkflowExecutorListener' via factory method to bean named 'executorDao'
11:53:55.930 [main] INFO io.nflow.metrics.NflowMetricsContext - Enabling MetricsWorkflowExecutorListener
11:53:55.931 [main] DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory - Eagerly caching bean 'metricsWorkflowExecutorListener' to allow for resolving potential circular references
11:53:55.931 [main] DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory - Finished creating instance of bean 'metricsWorkflowExecutorListener'
11:53:55.932 [main] DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'jmxMetricsReporter'
11:53:55.932 [main] DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory - Creating instance of bean 'jmxMetricsReporter'
11:53:55.932 [main] DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory - Returning cached instance of singleton bean 'nflowMetrics/metricsContext'
11:53:55.932 [main] INFO io.nflow.metrics.NflowMetricsContext - Enabling Metrics JmxReporter
11:53:55.932 [main] DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory - Eagerly caching bean 'jmxMetricsReporter' to allow for resolving potential circular references
11:53:55.933 [main] DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory - Finished creating instance of bean 'jmxMetricsReporter'
11:53:55.933 [main] DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory - Returning cached instance of singleton bean 'databaseConnectionHealthCheck'
11:53:55.933 [main] DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory - Returning cached instance of singleton bean 'metricRegistry'
11:53:55.933 [main] DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory - Returning cached instance of singleton bean 'healthCheckService'
11:53:55.933 [main] DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory - Returning cached instance of singleton bean 'healthCheckRegistry'
11:53:55.933 [main] DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory - Returning cached instance of singleton bean 'SQLVariants'
11:53:55.934 [main] DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory - Returning cached instance of singleton bean 'jdbcTemplate'
11:53:55.934 [main] DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory - Returning cached instance of singleton bean 'executorDao'
11:53:55.934 [main] DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory - Returning cached instance of singleton bean 'org.springframework.context.event.internalEventListenerFactory'
11:53:55.957 [main] DEBUG io.nflow.metrics.MetricsWorkflowExecutorListenerTest$1 - Unable to locate LifecycleProcessor with name 'lifecycleProcessor': using default [org.springframework.context.support.DefaultLifecycleProcessor@47428937]
11:53:55.957 [main] DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory - Returning cached instance of singleton bean 'lifecycleProcessor'
11:53:55.957 [main] DEBUG org.springframework.core.env.PropertySourcesPropertyResolver - Could not find key 'spring.liveBeansView.mbeanDomain' in any property source
11:53:55.957 [main] DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory - Returning cached instance of singleton bean 'metricRegistry'
11:53:55.958 [main] DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory - Returning cached instance of singleton bean 'metricsWorkflowExecutorListener'
11:53:55.961 [main] DEBUG com.codahale.metrics.JmxReporter - Unable to register timer
javax.management.InstanceAlreadyExistsException: nflow.metrics:name=foobarName.0.myWorkflow.my-state.execution-time
	at com.sun.jmx.mbeanserver.Repository.addMBean(Repository.java:437)
	at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.registerWithRepository(DefaultMBeanServerInterceptor.java:1898)
	at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.registerDynamicMBean(DefaultMBeanServerInterceptor.java:966)
	at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.registerObject(DefaultMBeanServerInterceptor.java:900)
	at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.registerMBean(DefaultMBeanServerInterceptor.java:324)
	at com.sun.jmx.mbeanserver.JmxMBeanServer.registerMBean(JmxMBeanServer.java:522)
	at com.codahale.metrics.JmxReporter$JmxListener.registerMBean(JmxReporter.java:505)
	at com.codahale.metrics.JmxReporter$JmxListener.onTimerAdded(JmxReporter.java:634)
	at com.codahale.metrics.MetricRegistry.notifyListenerOfAddedMetric(MetricRegistry.java:356)
	at com.codahale.metrics.MetricRegistry.onMetricAdded(MetricRegistry.java:342)
	at com.codahale.metrics.MetricRegistry.register(MetricRegistry.java:89)
	at com.codahale.metrics.MetricRegistry.getOrAdd(MetricRegistry.java:317)
	at com.codahale.metrics.MetricRegistry.timer(MetricRegistry.java:148)
	at io.nflow.metrics.MetricsWorkflowExecutorListener.beforeProcessing(MetricsWorkflowExecutorListener.java:38)
	at io.nflow.metrics.MetricsWorkflowExecutorListenerTest.afterFailure(MetricsWorkflowExecutorListenerTest.java:94)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:50)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:47)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:325)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:78)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:57)
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:290)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288)
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:58)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:363)
	at org.apache.maven.surefire.junit4.JUnit4Provider.execute(JUnit4Provider.java:367)
	at org.apache.maven.surefire.junit4.JUnit4Provider.executeWithRerun(JUnit4Provider.java:274)
	at org.apache.maven.surefire.junit4.JUnit4Provider.executeTestSet(JUnit4Provider.java:238)
	at org.apache.maven.surefire.junit4.JUnit4Provider.invoke(JUnit4Provider.java:161)
	at org.apache.maven.surefire.booter.ForkedBooter.invokeProviderInSameClassLoader(ForkedBooter.java:290)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:242)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:121)
11:53:55.961 [main] DEBUG com.codahale.metrics.JmxReporter - Unable to register histogram
javax.management.InstanceAlreadyExistsException: nflow.metrics:name=foobarName.0.myWorkflow.my-state.retries
	at com.sun.jmx.mbeanserver.Repository.addMBean(Repository.java:437)
	at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.registerWithRepository(DefaultMBeanServerInterceptor.java:1898)
	at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.registerDynamicMBean(DefaultMBeanServerInterceptor.java:966)
	at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.registerObject(DefaultMBeanServerInterceptor.java:900)
	at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.registerMBean(DefaultMBeanServerInterceptor.java:324)
	at com.sun.jmx.mbeanserver.JmxMBeanServer.registerMBean(JmxMBeanServer.java:522)
	at com.codahale.metrics.JmxReporter$JmxListener.registerMBean(JmxReporter.java:505)
	at com.codahale.metrics.JmxReporter$JmxListener.onHistogramAdded(JmxReporter.java:582)
	at com.codahale.metrics.MetricRegistry.notifyListenerOfAddedMetric(MetricRegistry.java:352)
	at com.codahale.metrics.MetricRegistry.onMetricAdded(MetricRegistry.java:342)
	at com.codahale.metrics.MetricRegistry.register(MetricRegistry.java:89)
	at com.codahale.metrics.MetricRegistry.getOrAdd(MetricRegistry.java:317)
	at com.codahale.metrics.MetricRegistry.histogram(MetricRegistry.java:126)
	at io.nflow.metrics.MetricsWorkflowExecutorListener.meterRetries(MetricsWorkflowExecutorListener.java:46)
	at io.nflow.metrics.MetricsWorkflowExecutorListener.beforeProcessing(MetricsWorkflowExecutorListener.java:41)
	at io.nflow.metrics.MetricsWorkflowExecutorListenerTest.afterFailure(MetricsWorkflowExecutorListenerTest.java:94)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:50)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:47)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:325)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:78)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:57)
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:290)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288)
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:58)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:363)
	at org.apache.maven.surefire.junit4.JUnit4Provider.execute(JUnit4Provider.java:367)
	at org.apache.maven.surefire.junit4.JUnit4Provider.executeWithRerun(JUnit4Provider.java:274)
	at org.apache.maven.surefire.junit4.JUnit4Provider.executeTestSet(JUnit4Provider.java:238)
	at org.apache.maven.surefire.junit4.JUnit4Provider.invoke(JUnit4Provider.java:161)
	at org.apache.maven.surefire.booter.ForkedBooter.invokeProviderInSameClassLoader(ForkedBooter.java:290)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:242)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:121)
11:53:55.965 [main] DEBUG org.springframework.mock.env.MockEnvironment - Initialized MockEnvironment with PropertySources []
11:53:55.965 [main] DEBUG org.springframework.mock.env.MockEnvironment - Adding [mockProperties] PropertySource with lowest search precedence
11:53:55.965 [main] DEBUG org.springframework.mock.env.MockEnvironment - Activating profile 'metrics'
11:53:55.965 [main] DEBUG org.springframework.core.env.PropertySourcesPropertyResolver - Could not find key 'spring.profiles.active' in any property source
11:53:55.965 [main] DEBUG org.springframework.mock.env.MockEnvironment - Activating profile 'jmx'
11:53:55.965 [main] DEBUG org.springframework.mock.env.MockEnvironment - Activating profile 'nflow.db.h2'
11:53:55.966 [main] DEBUG org.springframework.context.annotation.ClassPathBeanDefinitionScanner - JSR-330 'javax.inject.Named' annotation found and supported for component scanning
11:53:55.967 [main] INFO io.nflow.metrics.MetricsWorkflowExecutorListenerTest$1 - Refreshing io.nflow.metrics.MetricsWorkflowExecutorListenerTest$1@26be6ca7: startup date [Tue Jun 05 11:53:55 CEST 2018]; root of context hierarchy
11:53:55.967 [main] DEBUG io.nflow.metrics.MetricsWorkflowExecutorListenerTest$1 - Bean factory for io.nflow.metrics.MetricsWorkflowExecutorListenerTest$1@26be6ca7: org.springframework.beans.factory.support.DefaultListableBeanFactory@6ea1bcdc: defining beans [org.springframework.context.annotation.internalConfigurationAnnotationProcessor,org.springframework.context.annotation.internalAutowiredAnnotationProcessor,org.springframework.context.annotation.internalRequiredAnnotationProcessor,org.springframework.context.annotation.internalCommonAnnotationProcessor,org.springframework.context.event.internalEventListenerProcessor,org.springframework.context.event.internalEventListenerFactory,metricsWorkflowExecutorListenerTest.Config]; root of factory hierarchy
11:53:55.967 [main] DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'org.springframework.context.annotation.internalConfigurationAnnotationProcessor'
11:53:55.967 [main] DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory - Creating instance of bean 'org.springframework.context.annotation.internalConfigurationAnnotationProcessor'
11:53:55.967 [main] DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory - Eagerly caching bean 'org.springframework.context.annotation.internalConfigurationAnnotationProcessor' to allow for resolving potential circular references
11:53:55.967 [main] DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory - Finished creating instance of bean 'org.springframework.context.annotation.internalConfigurationAnnotationProcessor'
11:53:55.969 [main] DEBUG org.springframework.context.annotation.ConfigurationClassBeanDefinitionReader - Registered bean definition for imported class 'nflowMetrics/metricsContext'
11:53:55.969 [main] DEBUG org.springframework.context.annotation.ConfigurationClassBeanDefinitionReader - Registering bean definition for @Bean method io.nflow.metrics.NflowMetricsContext.metricsWorkflowExecutorListener()
11:53:55.969 [main] DEBUG org.springframework.context.annotation.ConfigurationClassBeanDefinitionReader - Registering bean definition for @Bean method io.nflow.metrics.NflowMetricsContext.jmxMetricsReporter()
11:53:55.970 [main] DEBUG org.springframework.context.annotation.ConfigurationClassBeanDefinitionReader - Registering bean definition for @Bean method io.nflow.metrics.NflowMetricsContext.databaseConnectionHealthCheck()
11:53:55.970 [main] DEBUG org.springframework.context.annotation.ConfigurationClassBeanDefinitionReader - Registering bean definition for @Bean method io.nflow.metrics.MetricsWorkflowExecutorListenerTest$Config.metricRegistry()
11:53:55.970 [main] DEBUG org.springframework.context.annotation.ConfigurationClassBeanDefinitionReader - Registering bean definition for @Bean method io.nflow.metrics.MetricsWorkflowExecutorListenerTest$Config.healthCheckService()
11:53:55.970 [main] DEBUG org.springframework.context.annotation.ConfigurationClassBeanDefinitionReader - Registering bean definition for @Bean method io.nflow.metrics.MetricsWorkflowExecutorListenerTest$Config.healthCheckRegistry()
11:53:55.971 [main] DEBUG org.springframework.context.annotation.ConfigurationClassBeanDefinitionReader - Registering bean definition for @Bean method io.nflow.metrics.MetricsWorkflowExecutorListenerTest$Config.SQLVariants()
11:53:55.971 [main] DEBUG org.springframework.context.annotation.ConfigurationClassBeanDefinitionReader - Registering bean definition for @Bean method io.nflow.metrics.MetricsWorkflowExecutorListenerTest$Config.jdbcTemplate()
11:53:55.971 [main] DEBUG org.springframework.context.annotation.ConfigurationClassBeanDefinitionReader - Registering bean definition for @Bean method io.nflow.metrics.MetricsWorkflowExecutorListenerTest$Config.executorDao()
11:53:55.973 [main] DEBUG org.springframework.context.annotation.ConfigurationClassEnhancer - Successfully enhanced io.nflow.metrics.MetricsWorkflowExecutorListenerTest$Config; enhanced class name is: io.nflow.metrics.MetricsWorkflowExecutorListenerTest$Config$$EnhancerBySpringCGLIB$$b54728c7
11:53:55.973 [main] DEBUG org.springframework.context.annotation.ConfigurationClassPostProcessor - Replacing bean definition 'metricsWorkflowExecutorListenerTest.Config' existing class 'io.nflow.metrics.MetricsWorkflowExecutorListenerTest$Config' with enhanced class 'io.nflow.metrics.MetricsWorkflowExecutorListenerTest$Config$$EnhancerBySpringCGLIB$$b54728c7'
11:53:55.973 [main] DEBUG org.springframework.context.annotation.ConfigurationClassEnhancer - Successfully enhanced io.nflow.metrics.NflowMetricsContext; enhanced class name is: io.nflow.metrics.NflowMetricsContext$$EnhancerBySpringCGLIB$$9c15e25a
11:53:55.973 [main] DEBUG org.springframework.context.annotation.ConfigurationClassPostProcessor - Replacing bean definition 'nflowMetrics/metricsContext' existing class 'io.nflow.metrics.NflowMetricsContext' with enhanced class 'io.nflow.metrics.NflowMetricsContext$$EnhancerBySpringCGLIB$$9c15e25a'
11:53:55.975 [main] DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'org.springframework.context.annotation.internalAutowiredAnnotationProcessor'
11:53:55.975 [main] DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory - Creating instance of bean 'org.springframework.context.annotation.internalAutowiredAnnotationProcessor'
11:53:55.975 [main] INFO org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor - JSR-330 'javax.inject.Inject' annotation found and supported for autowiring
11:53:55.975 [main] DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory - Eagerly caching bean 'org.springframework.context.annotation.internalAutowiredAnnotationProcessor' to allow for resolving potential circular references
11:53:55.975 [main] DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory - Finished creating instance of bean 'org.springframework.context.annotation.internalAutowiredAnnotationProcessor'
11:53:55.975 [main] DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'org.springframework.context.annotation.internalRequiredAnnotationProcessor'
11:53:55.975 [main] DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory - Creating instance of bean 'org.springframework.context.annotation.internalRequiredAnnotationProcessor'
11:53:55.975 [main] DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory - Eagerly caching bean 'org.springframework.context.annotation.internalRequiredAnnotationProcessor' to allow for resolving potential circular references
11:53:55.975 [main] DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory - Finished creating instance of bean 'org.springframework.context.annotation.internalRequiredAnnotationProcessor'
11:53:55.975 [main] DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'org.springframework.context.annotation.internalCommonAnnotationProcessor'
11:53:55.975 [main] DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory - Creating instance of bean 'org.springframework.context.annotation.internalCommonAnnotationProcessor'
11:53:55.975 [main] DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory - Eagerly caching bean 'org.springframework.context.annotation.internalCommonAnnotationProcessor' to allow for resolving potential circular references
11:53:55.976 [main] DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory - Finished creating instance of bean 'org.springframework.context.annotation.internalCommonAnnotationProcessor'
11:53:55.976 [main] DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'org.springframework.context.annotation.ConfigurationClassPostProcessor.importAwareProcessor'
11:53:55.976 [main] DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory - Creating instance of bean 'org.springframework.context.annotation.ConfigurationClassPostProcessor.importAwareProcessor'
11:53:55.976 [main] DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory - Eagerly caching bean 'org.springframework.context.annotation.ConfigurationClassPostProcessor.importAwareProcessor' to allow for resolving potential circular references
11:53:55.976 [main] DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory - Finished creating instance of bean 'org.springframework.context.annotation.ConfigurationClassPostProcessor.importAwareProcessor'
11:53:55.976 [main] DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'org.springframework.context.annotation.ConfigurationClassPostProcessor.enhancedConfigurationProcessor'
11:53:55.976 [main] DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory - Creating instance of bean 'org.springframework.context.annotation.ConfigurationClassPostProcessor.enhancedConfigurationProcessor'
11:53:55.976 [main] DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory - Eagerly caching bean 'org.springframework.context.annotation.ConfigurationClassPostProcessor.enhancedConfigurationProcessor' to allow for resolving potential circular references
11:53:55.976 [main] DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory - Finished creating instance of bean 'org.springframework.context.annotation.ConfigurationClassPostProcessor.enhancedConfigurationProcessor'
11:53:55.976 [main] DEBUG io.nflow.metrics.MetricsWorkflowExecutorListenerTest$1 - Unable to locate MessageSource with name 'messageSource': using default [org.springframework.context.support.DelegatingMessageSource@48c40605]
11:53:55.976 [main] DEBUG io.nflow.metrics.MetricsWorkflowExecutorListenerTest$1 - Unable to locate ApplicationEventMulticaster with name 'applicationEventMulticaster': using default [org.springframework.context.event.SimpleApplicationEventMulticaster@54107f42]
11:53:55.977 [main] DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory - Pre-instantiating singletons in org.springframework.beans.factory.support.DefaultListableBeanFactory@6ea1bcdc: defining beans [org.springframework.context.annotation.internalConfigurationAnnotationProcessor,org.springframework.context.annotation.internalAutowiredAnnotationProcessor,org.springframework.context.annotation.internalRequiredAnnotationProcessor,org.springframework.context.annotation.internalCommonAnnotationProcessor,org.springframework.context.event.internalEventListenerProcessor,org.springframework.context.event.internalEventListenerFactory,metricsWorkflowExecutorListenerTest.Config,org.springframework.context.annotation.ConfigurationClassPostProcessor.importAwareProcessor,org.springframework.context.annotation.ConfigurationClassPostProcessor.enhancedConfigurationProcessor,nflowMetrics/metricsContext,metricsWorkflowExecutorListener,jmxMetricsReporter,databaseConnectionHealthCheck,metricRegistry,healthCheckService,healthCheckRegistry,SQLVariants,jdbcTemplate,executorDao]; root of factory hierarchy
11:53:55.977 [main] DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory - Returning cached instance of singleton bean 'org.springframework.context.annotation.internalConfigurationAnnotationProcessor'
11:53:55.977 [main] DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory - Returning cached instance of singleton bean 'org.springframework.context.annotation.internalAutowiredAnnotationProcessor'
11:53:55.977 [main] DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory - Returning cached instance of singleton bean 'org.springframework.context.annotation.internalRequiredAnnotationProcessor'
11:53:55.977 [main] DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory - Returning cached instance of singleton bean 'org.springframework.context.annotation.internalCommonAnnotationProcessor'
11:53:55.977 [main] DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'org.springframework.context.event.internalEventListenerProcessor'
11:53:55.977 [main] DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory - Creating instance of bean 'org.springframework.context.event.internalEventListenerProcessor'
11:53:55.978 [main] DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory - Eagerly caching bean 'org.springframework.context.event.internalEventListenerProcessor' to allow for resolving potential circular references
11:53:55.979 [main] DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory - Finished creating instance of bean 'org.springframework.context.event.internalEventListenerProcessor'
11:53:55.979 [main] DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'org.springframework.context.event.internalEventListenerFactory'
11:53:55.980 [main] DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory - Creating instance of bean 'org.springframework.context.event.internalEventListenerFactory'
11:53:55.980 [main] DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory - Eagerly caching bean 'org.springframework.context.event.internalEventListenerFactory' to allow for resolving potential circular references
11:53:55.981 [main] DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory - Finished creating instance of bean 'org.springframework.context.event.internalEventListenerFactory'
11:53:55.981 [main] DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'metricsWorkflowExecutorListenerTest.Config'
11:53:55.981 [main] DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory - Creating instance of bean 'metricsWorkflowExecutorListenerTest.Config'
11:53:55.982 [main] DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory - Eagerly caching bean 'metricsWorkflowExecutorListenerTest.Config' to allow for resolving potential circular references
11:53:55.983 [main] DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory - Finished creating instance of bean 'metricsWorkflowExecutorListenerTest.Config'
11:53:55.983 [main] DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory - Returning cached instance of singleton bean 'org.springframework.context.annotation.ConfigurationClassPostProcessor.importAwareProcessor'
11:53:55.983 [main] DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory - Returning cached instance of singleton bean 'org.springframework.context.annotation.ConfigurationClassPostProcessor.enhancedConfigurationProcessor'
11:53:55.984 [main] DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'nflowMetrics/metricsContext'
11:53:55.984 [main] DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory - Creating instance of bean 'nflowMetrics/metricsContext'
11:53:55.984 [main] DEBUG org.springframework.context.annotation.CommonAnnotationBeanPostProcessor - Found init method on class [io.nflow.metrics.NflowMetricsContext$$EnhancerBySpringCGLIB$$9c15e25a]: public void io.nflow.metrics.NflowMetricsContext.registerHealthChecks()
11:53:55.984 [main] DEBUG org.springframework.context.annotation.CommonAnnotationBeanPostProcessor - Registered init method on class [io.nflow.metrics.NflowMetricsContext$$EnhancerBySpringCGLIB$$9c15e25a]: org.springframework.beans.factory.annotation.InitDestroyAnnotationBeanPostProcessor$LifecycleElement@e2261c2a
11:53:55.985 [main] DEBUG org.springframework.beans.factory.annotation.InjectionMetadata - Registered injected element on class [io.nflow.metrics.NflowMetricsContext$$EnhancerBySpringCGLIB$$9c15e25a]: AutowiredFieldElement for private io.nflow.engine.service.HealthCheckService io.nflow.metrics.NflowMetricsContext.healthCheckService
11:53:55.985 [main] DEBUG org.springframework.beans.factory.annotation.InjectionMetadata - Registered injected element on class [io.nflow.metrics.NflowMetricsContext$$EnhancerBySpringCGLIB$$9c15e25a]: AutowiredFieldElement for private com.codahale.metrics.MetricRegistry io.nflow.metrics.NflowMetricsContext.metricRegistry
11:53:55.985 [main] DEBUG org.springframework.beans.factory.annotation.InjectionMetadata - Registered injected element on class [io.nflow.metrics.NflowMetricsContext$$EnhancerBySpringCGLIB$$9c15e25a]: AutowiredFieldElement for private com.codahale.metrics.health.HealthCheckRegistry io.nflow.metrics.NflowMetricsContext.healthCheckRegistry
11:53:55.985 [main] DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory - Eagerly caching bean 'nflowMetrics/metricsContext' to allow for resolving potential circular references
11:53:55.986 [main] DEBUG org.springframework.beans.factory.annotation.InjectionMetadata - Processing injected element of bean 'nflowMetrics/metricsContext': AutowiredFieldElement for private io.nflow.engine.service.HealthCheckService io.nflow.metrics.NflowMetricsContext.healthCheckService
11:53:55.987 [main] DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'healthCheckService'
11:53:55.987 [main] DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory - Creating instance of bean 'healthCheckService'
11:53:55.987 [main] DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory - Returning cached instance of singleton bean 'metricsWorkflowExecutorListenerTest.Config'
11:53:55.987 [main] DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory - Eagerly caching bean 'healthCheckService' to allow for resolving potential circular references
11:53:55.989 [main] DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory - Finished creating instance of bean 'healthCheckService'
11:53:55.989 [main] DEBUG org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor - Autowiring by type from bean name 'nflowMetrics/metricsContext' to bean named 'healthCheckService'
11:53:55.989 [main] DEBUG org.springframework.beans.factory.annotation.InjectionMetadata - Processing injected element of bean 'nflowMetrics/metricsContext': AutowiredFieldElement for private com.codahale.metrics.MetricRegistry io.nflow.metrics.NflowMetricsContext.metricRegistry
11:53:55.989 [main] DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'metricRegistry'
11:53:55.989 [main] DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory - Creating instance of bean 'metricRegistry'
11:53:55.989 [main] DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory - Returning cached instance of singleton bean 'metricsWorkflowExecutorListenerTest.Config'
11:53:55.990 [main] DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory - Eagerly caching bean 'metricRegistry' to allow for resolving potential circular references
11:53:55.991 [main] DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory - Finished creating instance of bean 'metricRegistry'
11:53:55.991 [main] DEBUG org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor - Autowiring by type from bean name 'nflowMetrics/metricsContext' to bean named 'metricRegistry'
11:53:55.991 [main] DEBUG org.springframework.beans.factory.annotation.InjectionMetadata - Processing injected element of bean 'nflowMetrics/metricsContext': AutowiredFieldElement for private com.codahale.metrics.health.HealthCheckRegistry io.nflow.metrics.NflowMetricsContext.healthCheckRegistry
11:53:55.992 [main] DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'healthCheckRegistry'
11:53:55.992 [main] DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory - Creating instance of bean 'healthCheckRegistry'
11:53:55.992 [main] DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory - Returning cached instance of singleton bean 'metricsWorkflowExecutorListenerTest.Config'
11:53:55.992 [main] DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory - Eagerly caching bean 'healthCheckRegistry' to allow for resolving potential circular references
11:53:55.993 [main] DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory - Finished creating instance of bean 'healthCheckRegistry'
11:53:55.993 [main] DEBUG org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor - Autowiring by type from bean name 'nflowMetrics/metricsContext' to bean named 'healthCheckRegistry'
11:53:55.993 [main] DEBUG org.springframework.context.annotation.CommonAnnotationBeanPostProcessor - Invoking init method on bean 'nflowMetrics/metricsContext': public void io.nflow.metrics.NflowMetricsContext.registerHealthChecks()
11:53:55.993 [main] DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'databaseConnectionHealthCheck'
11:53:55.993 [main] DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory - Creating instance of bean 'databaseConnectionHealthCheck'
11:53:55.993 [main] DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory - Returning eagerly cached instance of singleton bean 'nflowMetrics/metricsContext' that is not fully initialized yet - a consequence of a circular reference
11:53:55.994 [main] DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory - Eagerly caching bean 'databaseConnectionHealthCheck' to allow for resolving potential circular references
11:53:55.994 [main] DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory - Finished creating instance of bean 'databaseConnectionHealthCheck'
11:53:55.994 [main] DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory - Finished creating instance of bean 'nflowMetrics/metricsContext'
11:53:55.994 [main] DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'metricsWorkflowExecutorListener'
11:53:55.994 [main] DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory - Creating instance of bean 'metricsWorkflowExecutorListener'
11:53:55.995 [main] DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory - Returning cached instance of singleton bean 'nflowMetrics/metricsContext'
11:53:55.996 [main] DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'executorDao'
11:53:55.996 [main] DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory - Creating instance of bean 'executorDao'
11:53:55.996 [main] DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory - Returning cached instance of singleton bean 'metricsWorkflowExecutorListenerTest.Config'
11:53:55.997 [main] DEBUG org.springframework.context.annotation.CommonAnnotationBeanPostProcessor - Found init method on class [io.nflow.engine.internal.dao.ExecutorDao$MockitoMock$1360062573]: public void io.nflow.engine.internal.dao.ExecutorDao$MockitoMock$1360062573.findHostMaxLength()
11:53:55.997 [main] DEBUG org.springframework.context.annotation.CommonAnnotationBeanPostProcessor - Found init method on class [io.nflow.engine.internal.dao.ExecutorDao$MockitoMock$1360062573]: public void io.nflow.engine.internal.dao.ExecutorDao.findHostMaxLength()
11:53:55.997 [main] DEBUG org.springframework.context.annotation.CommonAnnotationBeanPostProcessor - Registered init method on class [io.nflow.engine.internal.dao.ExecutorDao$MockitoMock$1360062573]: org.springframework.beans.factory.annotation.InitDestroyAnnotationBeanPostProcessor$LifecycleElement@c6974769
11:53:55.999 [main] DEBUG org.springframework.beans.factory.annotation.InjectionMetadata - Registered injected element on class [io.nflow.engine.internal.dao.ExecutorDao$MockitoMock$1360062573]: AutowiredMethodElement for public void io.nflow.engine.internal.dao.ExecutorDao$MockitoMock$1360062573.setEnvironment(org.springframework.core.env.Environment)
11:53:55.999 [main] DEBUG org.springframework.beans.factory.annotation.InjectionMetadata - Registered injected element on class [io.nflow.engine.internal.dao.ExecutorDao$MockitoMock$1360062573]: AutowiredMethodElement for public void io.nflow.engine.internal.dao.ExecutorDao$MockitoMock$1360062573.setSqlVariants(io.nflow.engine.internal.storage.db.SQLVariants)
11:53:55.999 [main] DEBUG org.springframework.beans.factory.annotation.InjectionMetadata - Registered injected element on class [io.nflow.engine.internal.dao.ExecutorDao$MockitoMock$1360062573]: AutowiredMethodElement for public void io.nflow.engine.internal.dao.ExecutorDao$MockitoMock$1360062573.setJdbcTemplate(org.springframework.jdbc.core.JdbcTemplate)
11:53:56.000 [main] DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory - Eagerly caching bean 'executorDao' to allow for resolving potential circular references
11:53:56.000 [main] DEBUG org.springframework.beans.factory.annotation.InjectionMetadata - Processing injected element of bean 'executorDao': AutowiredMethodElement for public void io.nflow.engine.internal.dao.ExecutorDao$MockitoMock$1360062573.setEnvironment(org.springframework.core.env.Environment)
11:53:56.000 [main] DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory - Returning cached instance of singleton bean 'environment'
11:53:56.000 [main] DEBUG org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor - Autowiring by type from bean name 'executorDao' to bean named 'environment'
11:53:56.000 [main] DEBUG org.springframework.beans.factory.annotation.InjectionMetadata - Processing injected element of bean 'executorDao': AutowiredMethodElement for public void io.nflow.engine.internal.dao.ExecutorDao$MockitoMock$1360062573.setSqlVariants(io.nflow.engine.internal.storage.db.SQLVariants)
11:53:56.000 [main] DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'SQLVariants'
11:53:56.001 [main] DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory - Creating instance of bean 'SQLVariants'
11:53:56.001 [main] DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory - Returning cached instance of singleton bean 'metricsWorkflowExecutorListenerTest.Config'
11:53:56.001 [main] DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory - Eagerly caching bean 'SQLVariants' to allow for resolving potential circular references
11:53:56.003 [main] DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory - Finished creating instance of bean 'SQLVariants'
11:53:56.003 [main] DEBUG org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor - Autowiring by type from bean name 'executorDao' to bean named 'SQLVariants'
11:53:56.003 [main] DEBUG org.springframework.beans.factory.annotation.InjectionMetadata - Processing injected element of bean 'executorDao': AutowiredMethodElement for public void io.nflow.engine.internal.dao.ExecutorDao$MockitoMock$1360062573.setJdbcTemplate(org.springframework.jdbc.core.JdbcTemplate)
11:53:56.004 [main] DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'jdbcTemplate'
11:53:56.004 [main] DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory - Creating instance of bean 'jdbcTemplate'
11:53:56.004 [main] DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory - Returning cached instance of singleton bean 'metricsWorkflowExecutorListenerTest.Config'
11:53:56.005 [main] DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory - Eagerly caching bean 'jdbcTemplate' to allow for resolving potential circular references
11:53:56.009 [main] DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory - Invoking afterPropertiesSet() on bean with name 'jdbcTemplate'
11:53:56.010 [main] DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory - Finished creating instance of bean 'jdbcTemplate'
11:53:56.010 [main] DEBUG org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor - Autowiring by type from bean name 'executorDao' to bean named 'jdbcTemplate'
11:53:56.010 [main] DEBUG org.springframework.context.annotation.CommonAnnotationBeanPostProcessor - Invoking init method on bean 'executorDao': public void io.nflow.engine.internal.dao.ExecutorDao.findHostMaxLength()
11:53:56.010 [main] DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory - Finished creating instance of bean 'executorDao'
11:53:56.010 [main] DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory - Autowiring by type from bean name 'metricsWorkflowExecutorListener' via factory method to bean named 'executorDao'
11:53:56.011 [main] INFO io.nflow.metrics.NflowMetricsContext - Enabling MetricsWorkflowExecutorListener
11:53:56.011 [main] DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory - Eagerly caching bean 'metricsWorkflowExecutorListener' to allow for resolving potential circular references
11:53:56.012 [main] DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory - Finished creating instance of bean 'metricsWorkflowExecutorListener'
11:53:56.012 [main] DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'jmxMetricsReporter'
11:53:56.012 [main] DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory - Creating instance of bean 'jmxMetricsReporter'
11:53:56.012 [main] DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory - Returning cached instance of singleton bean 'nflowMetrics/metricsContext'
11:53:56.012 [main] INFO io.nflow.metrics.NflowMetricsContext - Enabling Metrics JmxReporter
11:53:56.012 [main] DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory - Eagerly caching bean 'jmxMetricsReporter' to allow for resolving potential circular references
11:53:56.013 [main] DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory - Finished creating instance of bean 'jmxMetricsReporter'
11:53:56.013 [main] DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory - Returning cached instance of singleton bean 'databaseConnectionHealthCheck'
11:53:56.013 [main] DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory - Returning cached instance of singleton bean 'metricRegistry'
11:53:56.013 [main] DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory - Returning cached instance of singleton bean 'healthCheckService'
11:53:56.013 [main] DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory - Returning cached instance of singleton bean 'healthCheckRegistry'
11:53:56.013 [main] DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory - Returning cached instance of singleton bean 'SQLVariants'
11:53:56.013 [main] DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory - Returning cached instance of singleton bean 'jdbcTemplate'
11:53:56.013 [main] DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory - Returning cached instance of singleton bean 'executorDao'
11:53:56.013 [main] DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory - Returning cached instance of singleton bean 'org.springframework.context.event.internalEventListenerFactory'
11:53:56.025 [main] DEBUG io.nflow.metrics.MetricsWorkflowExecutorListenerTest$1 - Unable to locate LifecycleProcessor with name 'lifecycleProcessor': using default [org.springframework.context.support.DefaultLifecycleProcessor@4b21844c]
11:53:56.026 [main] DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory - Returning cached instance of singleton bean 'lifecycleProcessor'
11:53:56.026 [main] DEBUG org.springframework.core.env.PropertySourcesPropertyResolver - Could not find key 'spring.liveBeansView.mbeanDomain' in any property source
11:53:56.026 [main] DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory - Returning cached instance of singleton bean 'metricRegistry'
11:53:56.026 [main] DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory - Returning cached instance of singleton bean 'metricsWorkflowExecutorListener'
11:53:56.026 [main] DEBUG com.codahale.metrics.JmxReporter - Unable to register timer
javax.management.InstanceAlreadyExistsException: nflow.metrics:name=foobarName.0.myWorkflow.my-state.execution-time
	at com.sun.jmx.mbeanserver.Repository.addMBean(Repository.java:437)
	at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.registerWithRepository(DefaultMBeanServerInterceptor.java:1898)
	at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.registerDynamicMBean(DefaultMBeanServerInterceptor.java:966)
	at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.registerObject(DefaultMBeanServerInterceptor.java:900)
	at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.registerMBean(DefaultMBeanServerInterceptor.java:324)
	at com.sun.jmx.mbeanserver.JmxMBeanServer.registerMBean(JmxMBeanServer.java:522)
	at com.codahale.metrics.JmxReporter$JmxListener.registerMBean(JmxReporter.java:505)
	at com.codahale.metrics.JmxReporter$JmxListener.onTimerAdded(JmxReporter.java:634)
	at com.codahale.metrics.MetricRegistry.notifyListenerOfAddedMetric(MetricRegistry.java:356)
	at com.codahale.metrics.MetricRegistry.onMetricAdded(MetricRegistry.java:342)
	at com.codahale.metrics.MetricRegistry.register(MetricRegistry.java:89)
	at com.codahale.metrics.MetricRegistry.getOrAdd(MetricRegistry.java:317)
	at com.codahale.metrics.MetricRegistry.timer(MetricRegistry.java:148)
	at io.nflow.metrics.MetricsWorkflowExecutorListener.beforeProcessing(MetricsWorkflowExecutorListener.java:38)
	at io.nflow.metrics.MetricsWorkflowExecutorListenerTest.whenNextActivationIsSetToNullBeforeContext(MetricsWorkflowExecutorListenerTest.java:69)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:50)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:47)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:325)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:78)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:57)
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:290)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288)
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:58)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:363)
	at org.apache.maven.surefire.junit4.JUnit4Provider.execute(JUnit4Provider.java:367)
	at org.apache.maven.surefire.junit4.JUnit4Provider.executeWithRerun(JUnit4Provider.java:274)
	at org.apache.maven.surefire.junit4.JUnit4Provider.executeTestSet(JUnit4Provider.java:238)
	at org.apache.maven.surefire.junit4.JUnit4Provider.invoke(JUnit4Provider.java:161)
	at org.apache.maven.surefire.booter.ForkedBooter.invokeProviderInSameClassLoader(ForkedBooter.java:290)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:242)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:121)
11:53:56.027 [main] DEBUG com.codahale.metrics.JmxReporter - Unable to register histogram
javax.management.InstanceAlreadyExistsException: nflow.metrics:name=foobarName.0.myWorkflow.my-state.retries
	at com.sun.jmx.mbeanserver.Repository.addMBean(Repository.java:437)
	at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.registerWithRepository(DefaultMBeanServerInterceptor.java:1898)
	at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.registerDynamicMBean(DefaultMBeanServerInterceptor.java:966)
	at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.registerObject(DefaultMBeanServerInterceptor.java:900)
	at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.registerMBean(DefaultMBeanServerInterceptor.java:324)
	at com.sun.jmx.mbeanserver.JmxMBeanServer.registerMBean(JmxMBeanServer.java:522)
	at com.codahale.metrics.JmxReporter$JmxListener.registerMBean(JmxReporter.java:505)
	at com.codahale.metrics.JmxReporter$JmxListener.onHistogramAdded(JmxReporter.java:582)
	at com.codahale.metrics.MetricRegistry.notifyListenerOfAddedMetric(MetricRegistry.java:352)
	at com.codahale.metrics.MetricRegistry.onMetricAdded(MetricRegistry.java:342)
	at com.codahale.metrics.MetricRegistry.register(MetricRegistry.java:89)
	at com.codahale.metrics.MetricRegistry.getOrAdd(MetricRegistry.java:317)
	at com.codahale.metrics.MetricRegistry.histogram(MetricRegistry.java:126)
	at io.nflow.metrics.MetricsWorkflowExecutorListener.meterRetries(MetricsWorkflowExecutorListener.java:46)
	at io.nflow.metrics.MetricsWorkflowExecutorListener.beforeProcessing(MetricsWorkflowExecutorListener.java:41)
	at io.nflow.metrics.MetricsWorkflowExecutorListenerTest.whenNextActivationIsSetToNullBeforeContext(MetricsWorkflowExecutorListenerTest.java:69)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:50)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:47)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:325)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:78)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:57)
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:290)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288)
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:58)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:363)
	at org.apache.maven.surefire.junit4.JUnit4Provider.execute(JUnit4Provider.java:367)
	at org.apache.maven.surefire.junit4.JUnit4Provider.executeWithRerun(JUnit4Provider.java:274)
	at org.apache.maven.surefire.junit4.JUnit4Provider.executeTestSet(JUnit4Provider.java:238)
	at org.apache.maven.surefire.junit4.JUnit4Provider.invoke(JUnit4Provider.java:161)
	at org.apache.maven.surefire.booter.ForkedBooter.invokeProviderInSameClassLoader(ForkedBooter.java:290)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:242)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:121)
11:53:56.030 [main] DEBUG org.springframework.mock.env.MockEnvironment - Initialized MockEnvironment with PropertySources []
11:53:56.030 [main] DEBUG org.springframework.mock.env.MockEnvironment - Adding [mockProperties] PropertySource with lowest search precedence
11:53:56.030 [main] DEBUG org.springframework.mock.env.MockEnvironment - Activating profile 'metrics'
11:53:56.030 [main] DEBUG org.springframework.core.env.PropertySourcesPropertyResolver - Could not find key 'spring.profiles.active' in any property source
11:53:56.030 [main] DEBUG org.springframework.mock.env.MockEnvironment - Activating profile 'jmx'
11:53:56.030 [main] DEBUG org.springframework.mock.env.MockEnvironment - Activating profile 'nflow.db.h2'
11:53:56.031 [main] DEBUG org.springframework.context.annotation.ClassPathBeanDefinitionScanner - JSR-330 'javax.inject.Named' annotation found and supported for component scanning
11:53:56.031 [main] INFO io.nflow.metrics.MetricsWorkflowExecutorListenerTest$1 - Refreshing io.nflow.metrics.MetricsWorkflowExecutorListenerTest$1@1b28f282: startup date [Tue Jun 05 11:53:56 CEST 2018]; root of context hierarchy
11:53:56.031 [main] DEBUG io.nflow.metrics.MetricsWorkflowExecutorListenerTest$1 - Bean factory for io.nflow.metrics.MetricsWorkflowExecutorListenerTest$1@1b28f282: org.springframework.beans.factory.support.DefaultListableBeanFactory@138fe6ec: defining beans [org.springframework.context.annotation.internalConfigurationAnnotationProcessor,org.springframework.context.annotation.internalAutowiredAnnotationProcessor,org.springframework.context.annotation.internalRequiredAnnotationProcessor,org.springframework.context.annotation.internalCommonAnnotationProcessor,org.springframework.context.event.internalEventListenerProcessor,org.springframework.context.event.internalEventListenerFactory,metricsWorkflowExecutorListenerTest.Config]; root of factory hierarchy
11:53:56.032 [main] DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'org.springframework.context.annotation.internalConfigurationAnnotationProcessor'
11:53:56.032 [main] DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory - Creating instance of bean 'org.springframework.context.annotation.internalConfigurationAnnotationProcessor'
11:53:56.032 [main] DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory - Eagerly caching bean 'org.springframework.context.annotation.internalConfigurationAnnotationProcessor' to allow for resolving potential circular references
11:53:56.032 [main] DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory - Finished creating instance of bean 'org.springframework.context.annotation.internalConfigurationAnnotationProcessor'
11:53:56.034 [main] DEBUG org.springframework.context.annotation.ConfigurationClassBeanDefinitionReader - Registered bean definition for imported class 'nflowMetrics/metricsContext'
11:53:56.035 [main] DEBUG org.springframework.context.annotation.ConfigurationClassBeanDefinitionReader - Registering bean definition for @Bean method io.nflow.metrics.NflowMetricsContext.metricsWorkflowExecutorListener()
11:53:56.035 [main] DEBUG org.springframework.context.annotation.ConfigurationClassBeanDefinitionReader - Registering bean definition for @Bean method io.nflow.metrics.NflowMetricsContext.jmxMetricsReporter()
11:53:56.035 [main] DEBUG org.springframework.context.annotation.ConfigurationClassBeanDefinitionReader - Registering bean definition for @Bean method io.nflow.metrics.NflowMetricsContext.databaseConnectionHealthCheck()
11:53:56.035 [main] DEBUG org.springframework.context.annotation.ConfigurationClassBeanDefinitionReader - Registering bean definition for @Bean method io.nflow.metrics.MetricsWorkflowExecutorListenerTest$Config.metricRegistry()
11:53:56.036 [main] DEBUG org.springframework.context.annotation.ConfigurationClassBeanDefinitionReader - Registering bean definition for @Bean method io.nflow.metrics.MetricsWorkflowExecutorListenerTest$Config.healthCheckService()
11:53:56.036 [main] DEBUG org.springframework.context.annotation.ConfigurationClassBeanDefinitionReader - Registering bean definition for @Bean method io.nflow.metrics.MetricsWorkflowExecutorListenerTest$Config.healthCheckRegistry()
11:53:56.036 [main] DEBUG org.springframework.context.annotation.ConfigurationClassBeanDefinitionReader - Registering bean definition for @Bean method io.nflow.metrics.MetricsWorkflowExecutorListenerTest$Config.SQLVariants()
11:53:56.037 [main] DEBUG org.springframework.context.annotation.ConfigurationClassBeanDefinitionReader - Registering bean definition for @Bean method io.nflow.metrics.MetricsWorkflowExecutorListenerTest$Config.jdbcTemplate()
11:53:56.037 [main] DEBUG org.springframework.context.annotation.ConfigurationClassBeanDefinitionReader - Registering bean definition for @Bean method io.nflow.metrics.MetricsWorkflowExecutorListenerTest$Config.executorDao()
11:53:56.038 [main] DEBUG org.springframework.context.annotation.ConfigurationClassEnhancer - Successfully enhanced io.nflow.metrics.MetricsWorkflowExecutorListenerTest$Config; enhanced class name is: io.nflow.metrics.MetricsWorkflowExecutorListenerTest$Config$$EnhancerBySpringCGLIB$$b54728c7
11:53:56.039 [main] DEBUG org.springframework.context.annotation.ConfigurationClassPostProcessor - Replacing bean definition 'metricsWorkflowExecutorListenerTest.Config' existing class 'io.nflow.metrics.MetricsWorkflowExecutorListenerTest$Config' with enhanced class 'io.nflow.metrics.MetricsWorkflowExecutorListenerTest$Config$$EnhancerBySpringCGLIB$$b54728c7'
11:53:56.039 [main] DEBUG org.springframework.context.annotation.ConfigurationClassEnhancer - Successfully enhanced io.nflow.metrics.NflowMetricsContext; enhanced class name is: io.nflow.metrics.NflowMetricsContext$$EnhancerBySpringCGLIB$$9c15e25a
11:53:56.039 [main] DEBUG org.springframework.context.annotation.ConfigurationClassPostProcessor - Replacing bean definition 'nflowMetrics/metricsContext' existing class 'io.nflow.metrics.NflowMetricsContext' with enhanced class 'io.nflow.metrics.NflowMetricsContext$$EnhancerBySpringCGLIB$$9c15e25a'
11:53:56.040 [main] DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'org.springframework.context.annotation.internalAutowiredAnnotationProcessor'
11:53:56.040 [main] DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory - Creating instance of bean 'org.springframework.context.annotation.internalAutowiredAnnotationProcessor'
11:53:56.040 [main] INFO org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor - JSR-330 'javax.inject.Inject' annotation found and supported for autowiring
11:53:56.041 [main] DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory - Eagerly caching bean 'org.springframework.context.annotation.internalAutowiredAnnotationProcessor' to allow for resolving potential circular references
11:53:56.041 [main] DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory - Finished creating instance of bean 'org.springframework.context.annotation.internalAutowiredAnnotationProcessor'
11:53:56.041 [main] DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'org.springframework.context.annotation.internalRequiredAnnotationProcessor'
11:53:56.041 [main] DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory - Creating instance of bean 'org.springframework.context.annotation.internalRequiredAnnotationProcessor'
11:53:56.041 [main] DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory - Eagerly caching bean 'org.springframework.context.annotation.internalRequiredAnnotationProcessor' to allow for resolving potential circular references
11:53:56.041 [main] DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory - Finished creating instance of bean 'org.springframework.context.annotation.internalRequiredAnnotationProcessor'
11:53:56.041 [main] DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'org.springframework.context.annotation.internalCommonAnnotationProcessor'
11:53:56.041 [main] DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory - Creating instance of bean 'org.springframework.context.annotation.internalCommonAnnotationProcessor'
11:53:56.041 [main] DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory - Eagerly caching bean 'org.springframework.context.annotation.internalCommonAnnotationProcessor' to allow for resolving potential circular references
11:53:56.041 [main] DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory - Finished creating instance of bean 'org.springframework.context.annotation.internalCommonAnnotationProcessor'
11:53:56.041 [main] DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'org.springframework.context.annotation.ConfigurationClassPostProcessor.importAwareProcessor'
11:53:56.041 [main] DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory - Creating instance of bean 'org.springframework.context.annotation.ConfigurationClassPostProcessor.importAwareProcessor'
11:53:56.042 [main] DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory - Eagerly caching bean 'org.springframework.context.annotation.ConfigurationClassPostProcessor.importAwareProcessor' to allow for resolving potential circular references
11:53:56.042 [main] DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory - Finished creating instance of bean 'org.springframework.context.annotation.ConfigurationClassPostProcessor.importAwareProcessor'
11:53:56.042 [main] DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'org.springframework.context.annotation.ConfigurationClassPostProcessor.enhancedConfigurationProcessor'
11:53:56.042 [main] DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory - Creating instance of bean 'org.springframework.context.annotation.ConfigurationClassPostProcessor.enhancedConfigurationProcessor'
11:53:56.042 [main] DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory - Eagerly caching bean 'org.springframework.context.annotation.ConfigurationClassPostProcessor.enhancedConfigurationProcessor' to allow for resolving potential circular references
11:53:56.042 [main] DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory - Finished creating instance of bean 'org.springframework.context.annotation.ConfigurationClassPostProcessor.enhancedConfigurationProcessor'
11:53:56.042 [main] DEBUG io.nflow.metrics.MetricsWorkflowExecutorListenerTest$1 - Unable to locate MessageSource with name 'messageSource': using default [org.springframework.context.support.DelegatingMessageSource@2a76b80a]
11:53:56.042 [main] DEBUG io.nflow.metrics.MetricsWorkflowExecutorListenerTest$1 - Unable to locate ApplicationEventMulticaster with name 'applicationEventMulticaster': using default [org.springframework.context.event.SimpleApplicationEventMulticaster@7eb01b12]
11:53:56.043 [main] DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory - Pre-instantiating singletons in org.springframework.beans.factory.support.DefaultListableBeanFactory@138fe6ec: defining beans [org.springframework.context.annotation.internalConfigurationAnnotationProcessor,org.springframework.context.annotation.internalAutowiredAnnotationProcessor,org.springframework.context.annotation.internalRequiredAnnotationProcessor,org.springframework.context.annotation.internalCommonAnnotationProcessor,org.springframework.context.event.internalEventListenerProcessor,org.springframework.context.event.internalEventListenerFactory,metricsWorkflowExecutorListenerTest.Config,org.springframework.context.annotation.ConfigurationClassPostProcessor.importAwareProcessor,org.springframework.context.annotation.ConfigurationClassPostProcessor.enhancedConfigurationProcessor,nflowMetrics/metricsContext,metricsWorkflowExecutorListener,jmxMetricsReporter,databaseConnectionHealthCheck,metricRegistry,healthCheckService,healthCheckRegistry,SQLVariants,jdbcTemplate,executorDao]; root of factory hierarchy
11:53:56.043 [main] DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory - Returning cached instance of singleton bean 'org.springframework.context.annotation.internalConfigurationAnnotationProcessor'
11:53:56.043 [main] DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory - Returning cached instance of singleton bean 'org.springframework.context.annotation.internalAutowiredAnnotationProcessor'
11:53:56.043 [main] DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory - Returning cached instance of singleton bean 'org.springframework.context.annotation.internalRequiredAnnotationProcessor'
11:53:56.043 [main] DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory - Returning cached instance of singleton bean 'org.springframework.context.annotation.internalCommonAnnotationProcessor'
11:53:56.043 [main] DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'org.springframework.context.event.internalEventListenerProcessor'
11:53:56.043 [main] DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory - Creating instance of bean 'org.springframework.context.event.internalEventListenerProcessor'
11:53:56.043 [main] DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory - Eagerly caching bean 'org.springframework.context.event.internalEventListenerProcessor' to allow for resolving potential circular references
11:53:56.045 [main] DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory - Finished creating instance of bean 'org.springframework.context.event.internalEventListenerProcessor'
11:53:56.045 [main] DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'org.springframework.context.event.internalEventListenerFactory'
11:53:56.045 [main] DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory - Creating instance of bean 'org.springframework.context.event.internalEventListenerFactory'
11:53:56.045 [main] DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory - Eagerly caching bean 'org.springframework.context.event.internalEventListenerFactory' to allow for resolving potential circular references
11:53:56.047 [main] DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory - Finished creating instance of bean 'org.springframework.context.event.internalEventListenerFactory'
11:53:56.047 [main] DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'metricsWorkflowExecutorListenerTest.Config'
11:53:56.047 [main] DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory - Creating instance of bean 'metricsWorkflowExecutorListenerTest.Config'
11:53:56.048 [main] DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory - Eagerly caching bean 'metricsWorkflowExecutorListenerTest.Config' to allow for resolving potential circular references
11:53:56.049 [main] DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory - Finished creating instance of bean 'metricsWorkflowExecutorListenerTest.Config'
11:53:56.049 [main] DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory - Returning cached instance of singleton bean 'org.springframework.context.annotation.ConfigurationClassPostProcessor.importAwareProcessor'
11:53:56.049 [main] DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory - Returning cached instance of singleton bean 'org.springframework.context.annotation.ConfigurationClassPostProcessor.enhancedConfigurationProcessor'
11:53:56.049 [main] DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'nflowMetrics/metricsContext'
11:53:56.049 [main] DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory - Creating instance of bean 'nflowMetrics/metricsContext'
11:53:56.049 [main] DEBUG org.springframework.context.annotation.CommonAnnotationBeanPostProcessor - Found init method on class [io.nflow.metrics.NflowMetricsContext$$EnhancerBySpringCGLIB$$9c15e25a]: public void io.nflow.metrics.NflowMetricsContext.registerHealthChecks()
11:53:56.049 [main] DEBUG org.springframework.context.annotation.CommonAnnotationBeanPostProcessor - Registered init method on class [io.nflow.metrics.NflowMetricsContext$$EnhancerBySpringCGLIB$$9c15e25a]: org.springframework.beans.factory.annotation.InitDestroyAnnotationBeanPostProcessor$LifecycleElement@e2261c2a
11:53:56.050 [main] DEBUG org.springframework.beans.factory.annotation.InjectionMetadata - Registered injected element on class [io.nflow.metrics.NflowMetricsContext$$EnhancerBySpringCGLIB$$9c15e25a]: AutowiredFieldElement for private io.nflow.engine.service.HealthCheckService io.nflow.metrics.NflowMetricsContext.healthCheckService
11:53:56.050 [main] DEBUG org.springframework.beans.factory.annotation.InjectionMetadata - Registered injected element on class [io.nflow.metrics.NflowMetricsContext$$EnhancerBySpringCGLIB$$9c15e25a]: AutowiredFieldElement for private com.codahale.metrics.MetricRegistry io.nflow.metrics.NflowMetricsContext.metricRegistry
11:53:56.050 [main] DEBUG org.springframework.beans.factory.annotation.InjectionMetadata - Registered injected element on class [io.nflow.metrics.NflowMetricsContext$$EnhancerBySpringCGLIB$$9c15e25a]: AutowiredFieldElement for private com.codahale.metrics.health.HealthCheckRegistry io.nflow.metrics.NflowMetricsContext.healthCheckRegistry
11:53:56.050 [main] DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory - Eagerly caching bean 'nflowMetrics/metricsContext' to allow for resolving potential circular references
11:53:56.051 [main] DEBUG org.springframework.beans.factory.annotation.InjectionMetadata - Processing injected element of bean 'nflowMetrics/metricsContext': AutowiredFieldElement for private io.nflow.engine.service.HealthCheckService io.nflow.metrics.NflowMetricsContext.healthCheckService
11:53:56.051 [main] DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'healthCheckService'
11:53:56.051 [main] DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory - Creating instance of bean 'healthCheckService'
11:53:56.052 [main] DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory - Returning cached instance of singleton bean 'metricsWorkflowExecutorListenerTest.Config'
11:53:56.052 [main] DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory - Eagerly caching bean 'healthCheckService' to allow for resolving potential circular references
11:53:56.053 [main] DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory - Finished creating instance of bean 'healthCheckService'
11:53:56.053 [main] DEBUG org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor - Autowiring by type from bean name 'nflowMetrics/metricsContext' to bean named 'healthCheckService'
11:53:56.053 [main] DEBUG org.springframework.beans.factory.annotation.InjectionMetadata - Processing injected element of bean 'nflowMetrics/metricsContext': AutowiredFieldElement for private com.codahale.metrics.MetricRegistry io.nflow.metrics.NflowMetricsContext.metricRegistry
11:53:56.054 [main] DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'metricRegistry'
11:53:56.054 [main] DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory - Creating instance of bean 'metricRegistry'
11:53:56.054 [main] DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory - Returning cached instance of singleton bean 'metricsWorkflowExecutorListenerTest.Config'
11:53:56.054 [main] DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory - Eagerly caching bean 'metricRegistry' to allow for resolving potential circular references
11:53:56.055 [main] DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory - Finished creating instance of bean 'metricRegistry'
11:53:56.056 [main] DEBUG org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor - Autowiring by type from bean name 'nflowMetrics/metricsContext' to bean named 'metricRegistry'
11:53:56.056 [main] DEBUG org.springframework.beans.factory.annotation.InjectionMetadata - Processing injected element of bean 'nflowMetrics/metricsContext': AutowiredFieldElement for private com.codahale.metrics.health.HealthCheckRegistry io.nflow.metrics.NflowMetricsContext.healthCheckRegistry
11:53:56.056 [main] DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'healthCheckRegistry'
11:53:56.056 [main] DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory - Creating instance of bean 'healthCheckRegistry'
11:53:56.056 [main] DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory - Returning cached instance of singleton bean 'metricsWorkflowExecutorListenerTest.Config'
11:53:56.057 [main] DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory - Eagerly caching bean 'healthCheckRegistry' to allow for resolving potential circular references
11:53:56.057 [main] DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory - Finished creating instance of bean 'healthCheckRegistry'
11:53:56.057 [main] DEBUG org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor - Autowiring by type from bean name 'nflowMetrics/metricsContext' to bean named 'healthCheckRegistry'
11:53:56.057 [main] DEBUG org.springframework.context.annotation.CommonAnnotationBeanPostProcessor - Invoking init method on bean 'nflowMetrics/metricsContext': public void io.nflow.metrics.NflowMetricsContext.registerHealthChecks()
11:53:56.058 [main] DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'databaseConnectionHealthCheck'
11:53:56.058 [main] DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory - Creating instance of bean 'databaseConnectionHealthCheck'
11:53:56.058 [main] DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory - Returning eagerly cached instance of singleton bean 'nflowMetrics/metricsContext' that is not fully initialized yet - a consequence of a circular reference
11:53:56.058 [main] DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory - Eagerly caching bean 'databaseConnectionHealthCheck' to allow for resolving potential circular references
11:53:56.058 [main] DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory - Finished creating instance of bean 'databaseConnectionHealthCheck'
11:53:56.058 [main] DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory - Finished creating instance of bean 'nflowMetrics/metricsContext'
11:53:56.059 [main] DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'metricsWorkflowExecutorListener'
11:53:56.059 [main] DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory - Creating instance of bean 'metricsWorkflowExecutorListener'
11:53:56.059 [main] DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory - Returning cached instance of singleton bean 'nflowMetrics/metricsContext'
11:53:56.060 [main] DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'executorDao'
11:53:56.060 [main] DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory - Creating instance of bean 'executorDao'
11:53:56.060 [main] DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory - Returning cached instance of singleton bean 'metricsWorkflowExecutorListenerTest.Config'
11:53:56.060 [main] DEBUG org.springframework.context.annotation.CommonAnnotationBeanPostProcessor - Found init method on class [io.nflow.engine.internal.dao.ExecutorDao$MockitoMock$1360062573]: public void io.nflow.engine.internal.dao.ExecutorDao$MockitoMock$1360062573.findHostMaxLength()
11:53:56.061 [main] DEBUG org.springframework.context.annotation.CommonAnnotationBeanPostProcessor - Found init method on class [io.nflow.engine.internal.dao.ExecutorDao$MockitoMock$1360062573]: public void io.nflow.engine.internal.dao.ExecutorDao.findHostMaxLength()
11:53:56.061 [main] DEBUG org.springframework.context.annotation.CommonAnnotationBeanPostProcessor - Registered init method on class [io.nflow.engine.internal.dao.ExecutorDao$MockitoMock$1360062573]: org.springframework.beans.factory.annotation.InitDestroyAnnotationBeanPostProcessor$LifecycleElement@c6974769
11:53:56.062 [main] DEBUG org.springframework.beans.factory.annotation.InjectionMetadata - Registered injected element on class [io.nflow.engine.internal.dao.ExecutorDao$MockitoMock$1360062573]: AutowiredMethodElement for public void io.nflow.engine.internal.dao.ExecutorDao$MockitoMock$1360062573.setEnvironment(org.springframework.core.env.Environment)
11:53:56.062 [main] DEBUG org.springframework.beans.factory.annotation.InjectionMetadata - Registered injected element on class [io.nflow.engine.internal.dao.ExecutorDao$MockitoMock$1360062573]: AutowiredMethodElement for public void io.nflow.engine.internal.dao.ExecutorDao$MockitoMock$1360062573.setSqlVariants(io.nflow.engine.internal.storage.db.SQLVariants)
11:53:56.062 [main] DEBUG org.springframework.beans.factory.annotation.InjectionMetadata - Registered injected element on class [io.nflow.engine.internal.dao.ExecutorDao$MockitoMock$1360062573]: AutowiredMethodElement for public void io.nflow.engine.internal.dao.ExecutorDao$MockitoMock$1360062573.setJdbcTemplate(org.springframework.jdbc.core.JdbcTemplate)
11:53:56.062 [main] DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory - Eagerly caching bean 'executorDao' to allow for resolving potential circular references
11:53:56.063 [main] DEBUG org.springframework.beans.factory.annotation.InjectionMetadata - Processing injected element of bean 'executorDao': AutowiredMethodElement for public void io.nflow.engine.internal.dao.ExecutorDao$MockitoMock$1360062573.setEnvironment(org.springframework.core.env.Environment)
11:53:56.063 [main] DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory - Returning cached instance of singleton bean 'environment'
11:53:56.063 [main] DEBUG org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor - Autowiring by type from bean name 'executorDao' to bean named 'environment'
11:53:56.063 [main] DEBUG org.springframework.beans.factory.annotation.InjectionMetadata - Processing injected element of bean 'executorDao': AutowiredMethodElement for public void io.nflow.engine.internal.dao.ExecutorDao$MockitoMock$1360062573.setSqlVariants(io.nflow.engine.internal.storage.db.SQLVariants)
11:53:56.063 [main] DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'SQLVariants'
11:53:56.063 [main] DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory - Creating instance of bean 'SQLVariants'
11:53:56.063 [main] DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory - Returning cached instance of singleton bean 'metricsWorkflowExecutorListenerTest.Config'
11:53:56.064 [main] DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory - Eagerly caching bean 'SQLVariants' to allow for resolving potential circular references
11:53:56.065 [main] DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory - Finished creating instance of bean 'SQLVariants'
11:53:56.065 [main] DEBUG org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor - Autowiring by type from bean name 'executorDao' to bean named 'SQLVariants'
11:53:56.065 [main] DEBUG org.springframework.beans.factory.annotation.InjectionMetadata - Processing injected element of bean 'executorDao': AutowiredMethodElement for public void io.nflow.engine.internal.dao.ExecutorDao$MockitoMock$1360062573.setJdbcTemplate(org.springframework.jdbc.core.JdbcTemplate)
11:53:56.066 [main] DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'jdbcTemplate'
11:53:56.066 [main] DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory - Creating instance of bean 'jdbcTemplate'
11:53:56.066 [main] DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory - Returning cached instance of singleton bean 'metricsWorkflowExecutorListenerTest.Config'
11:53:56.067 [main] DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory - Eagerly caching bean 'jdbcTemplate' to allow for resolving potential circular references
11:53:56.071 [main] DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory - Invoking afterPropertiesSet() on bean with name 'jdbcTemplate'
11:53:56.071 [main] DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory - Finished creating instance of bean 'jdbcTemplate'
11:53:56.071 [main] DEBUG org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor - Autowiring by type from bean name 'executorDao' to bean named 'jdbcTemplate'
11:53:56.071 [main] DEBUG org.springframework.context.annotation.CommonAnnotationBeanPostProcessor - Invoking init method on bean 'executorDao': public void io.nflow.engine.internal.dao.ExecutorDao.findHostMaxLength()
11:53:56.071 [main] DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory - Finished creating instance of bean 'executorDao'
11:53:56.071 [main] DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory - Autowiring by type from bean name 'metricsWorkflowExecutorListener' via factory method to bean named 'executorDao'
11:53:56.072 [main] INFO io.nflow.metrics.NflowMetricsContext - Enabling MetricsWorkflowExecutorListener
11:53:56.072 [main] DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory - Eagerly caching bean 'metricsWorkflowExecutorListener' to allow for resolving potential circular references
11:53:56.073 [main] DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory - Finished creating instance of bean 'metricsWorkflowExecutorListener'
11:53:56.073 [main] DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'jmxMetricsReporter'
11:53:56.073 [main] DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory - Creating instance of bean 'jmxMetricsReporter'
11:53:56.073 [main] DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory - Returning cached instance of singleton bean 'nflowMetrics/metricsContext'
11:53:56.074 [main] INFO io.nflow.metrics.NflowMetricsContext - Enabling Metrics JmxReporter
11:53:56.074 [main] DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory - Eagerly caching bean 'jmxMetricsReporter' to allow for resolving potential circular references
11:53:56.075 [main] DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory - Finished creating instance of bean 'jmxMetricsReporter'
11:53:56.075 [main] DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory - Returning cached instance of singleton bean 'databaseConnectionHealthCheck'
11:53:56.075 [main] DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory - Returning cached instance of singleton bean 'metricRegistry'
11:53:56.075 [main] DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory - Returning cached instance of singleton bean 'healthCheckService'
11:53:56.075 [main] DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory - Returning cached instance of singleton bean 'healthCheckRegistry'
11:53:56.075 [main] DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory - Returning cached instance of singleton bean 'SQLVariants'
11:53:56.075 [main] DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory - Returning cached instance of singleton bean 'jdbcTemplate'
11:53:56.075 [main] DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory - Returning cached instance of singleton bean 'executorDao'
11:53:56.075 [main] DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory - Returning cached instance of singleton bean 'org.springframework.context.event.internalEventListenerFactory'
11:53:56.092 [main] DEBUG io.nflow.metrics.MetricsWorkflowExecutorListenerTest$1 - Unable to locate LifecycleProcessor with name 'lifecycleProcessor': using default [org.springframework.context.support.DefaultLifecycleProcessor@21d5c1a0]
11:53:56.093 [main] DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory - Returning cached instance of singleton bean 'lifecycleProcessor'
11:53:56.093 [main] DEBUG org.springframework.core.env.PropertySourcesPropertyResolver - Could not find key 'spring.liveBeansView.mbeanDomain' in any property source
11:53:56.093 [main] DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory - Returning cached instance of singleton bean 'metricRegistry'
11:53:56.094 [main] DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory - Returning cached instance of singleton bean 'metricsWorkflowExecutorListener'
11:53:56.094 [main] DEBUG com.codahale.metrics.JmxReporter - Unable to register timer
javax.management.InstanceAlreadyExistsException: nflow.metrics:name=foobarName.0.myWorkflow.my-state.execution-time
	at com.sun.jmx.mbeanserver.Repository.addMBean(Repository.java:437)
	at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.registerWithRepository(DefaultMBeanServerInterceptor.java:1898)
	at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.registerDynamicMBean(DefaultMBeanServerInterceptor.java:966)
	at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.registerObject(DefaultMBeanServerInterceptor.java:900)
	at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.registerMBean(DefaultMBeanServerInterceptor.java:324)
	at com.sun.jmx.mbeanserver.JmxMBeanServer.registerMBean(JmxMBeanServer.java:522)
	at com.codahale.metrics.JmxReporter$JmxListener.registerMBean(JmxReporter.java:505)
	at com.codahale.metrics.JmxReporter$JmxListener.onTimerAdded(JmxReporter.java:634)
	at com.codahale.metrics.MetricRegistry.notifyListenerOfAddedMetric(MetricRegistry.java:356)
	at com.codahale.metrics.MetricRegistry.onMetricAdded(MetricRegistry.java:342)
	at com.codahale.metrics.MetricRegistry.register(MetricRegistry.java:89)
	at com.codahale.metrics.MetricRegistry.getOrAdd(MetricRegistry.java:317)
	at com.codahale.metrics.MetricRegistry.timer(MetricRegistry.java:148)
	at io.nflow.metrics.MetricsWorkflowExecutorListener.beforeProcessing(MetricsWorkflowExecutorListener.java:38)
	at io.nflow.metrics.MetricsWorkflowExecutorListenerTest.beforeContext(MetricsWorkflowExecutorListenerTest.java:77)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:50)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:47)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:325)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:78)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:57)
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:290)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288)
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:58)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:363)
	at org.apache.maven.surefire.junit4.JUnit4Provider.execute(JUnit4Provider.java:367)
	at org.apache.maven.surefire.junit4.JUnit4Provider.executeWithRerun(JUnit4Provider.java:274)
	at org.apache.maven.surefire.junit4.JUnit4Provider.executeTestSet(JUnit4Provider.java:238)
	at org.apache.maven.surefire.junit4.JUnit4Provider.invoke(JUnit4Provider.java:161)
	at org.apache.maven.surefire.booter.ForkedBooter.invokeProviderInSameClassLoader(ForkedBooter.java:290)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:242)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:121)
11:53:56.095 [main] DEBUG com.codahale.metrics.JmxReporter - Unable to register histogram
javax.management.InstanceAlreadyExistsException: nflow.metrics:name=foobarName.0.myWorkflow.my-state.retries
	at com.sun.jmx.mbeanserver.Repository.addMBean(Repository.java:437)
	at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.registerWithRepository(DefaultMBeanServerInterceptor.java:1898)
	at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.registerDynamicMBean(DefaultMBeanServerInterceptor.java:966)
	at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.registerObject(DefaultMBeanServerInterceptor.java:900)
	at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.registerMBean(DefaultMBeanServerInterceptor.java:324)
	at com.sun.jmx.mbeanserver.JmxMBeanServer.registerMBean(JmxMBeanServer.java:522)
	at com.codahale.metrics.JmxReporter$JmxListener.registerMBean(JmxReporter.java:505)
	at com.codahale.metrics.JmxReporter$JmxListener.onHistogramAdded(JmxReporter.java:582)
	at com.codahale.metrics.MetricRegistry.notifyListenerOfAddedMetric(MetricRegistry.java:352)
	at com.codahale.metrics.MetricRegistry.onMetricAdded(MetricRegistry.java:342)
	at com.codahale.metrics.MetricRegistry.register(MetricRegistry.java:89)
	at com.codahale.metrics.MetricRegistry.getOrAdd(MetricRegistry.java:317)
	at com.codahale.metrics.MetricRegistry.histogram(MetricRegistry.java:126)
	at io.nflow.metrics.MetricsWorkflowExecutorListener.meterRetries(MetricsWorkflowExecutorListener.java:46)
	at io.nflow.metrics.MetricsWorkflowExecutorListener.beforeProcessing(MetricsWorkflowExecutorListener.java:41)
	at io.nflow.metrics.MetricsWorkflowExecutorListenerTest.beforeContext(MetricsWorkflowExecutorListenerTest.java:77)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:50)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:47)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:325)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:78)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:57)
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:290)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288)
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:58)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:363)
	at org.apache.maven.surefire.junit4.JUnit4Provider.execute(JUnit4Provider.java:367)
	at org.apache.maven.surefire.junit4.JUnit4Provider.executeWithRerun(JUnit4Provider.java:274)
	at org.apache.maven.surefire.junit4.JUnit4Provider.executeTestSet(JUnit4Provider.java:238)
	at org.apache.maven.surefire.junit4.JUnit4Provider.invoke(JUnit4Provider.java:161)
	at org.apache.maven.surefire.booter.ForkedBooter.invokeProviderInSameClassLoader(ForkedBooter.java:290)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:242)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:121)
